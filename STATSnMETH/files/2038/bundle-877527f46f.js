!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(t,r,o){for(var a,s,c=0,u=[];c<t.length;c++)s=t[c],i[s]&&u.push(i[s][0]),i[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);for(n&&n(t,r,o);u.length;)u.shift()()};var r={},i={6:0};return t.e=function(e){function n(){s.onerror=s.onload=null,clearTimeout(c);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=void 0)}var r=i[e];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var o=new Promise(function(t,n){r=i[e]=[t,n]});r[2]=o;var a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,t.nc&&s.setAttribute("nonce",t.nc),s.src=t.p+""+({0:"atoz_chunk-102d86f650",1:"almaViewer_chunk-225fe6cfb3",2:"account_chunk-aab72ef8f1",3:"fullView_chunk-658a658d39",4:"collectionDiscovery_chunk-4251a54c98",5:"favorites_chunk-6648fda17b"}[e]||e)+".js";var c=setTimeout(n,12e4);return s.onerror=s.onload=n,a.appendChild(s),o},t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t.oe=function(e){throw console.error(e),e},t(t.s=432)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(439));var i=n(464);t.bundle=i.bundle;var o=n(467);t.Directive=o.Directive,t.Component=o.Component,t.NgModule=o.NgModule,t.Attr=o.Attr,t.Input=o.Input,t.Output=o.Output,t.HostBinding=o.HostBinding,t.HostListener=o.HostListener,t.ViewChild=o.ViewChild,t.ViewChildren=o.ViewChildren,t.ContentChild=o.ContentChild,t.ContentChildren=o.ContentChildren;var a=n(469);t.Pipe=a.Pipe,r(n(471));var s=n(13);t.enableProdMode=s.enableProdMode;var c=n(473);t.EventEmitter=c.EventEmitter},function(e,t,n){"use strict";function r(){var e=window.appConfig.authentication.map(function(e,t,n){return new $e(e["authentication-system"],e["profile-name"],t)});return e}function i(){return window.appConfig.tiles.ResultTileInterface}function o(){return window.appConfig.tiles.FacetTileInterface}function a(){return window.appConfig.tiles.LocationsTileInterface}function s(){return window.appConfig.tiles.MainMenuTileInterface}function c(){return window.appConfig.tiles.ResultFullTileInterface}function u(){return window.appConfig["bx-enable"]}function l(){return window.appConfig["syndeticunbound-enable"]}function f(){return window.appConfig["syndeticunbound-id"]}function p(){return window.appConfig["system-configuration"]}function d(){return window.appConfig["primo-view"].institution["institution-code"]}function h(){return window.appConfig["primo-view"].institution["newspapers-search"]}function m(){return C().displayNewspapersLink}function g(){return C().refEntryActive}function y(){return C().displayFeaturedNewspapers}function v(){return window.appConfig["primo-view"].institution.id}function b(){return window.appConfig.beacon["alternative-institution-code"]}function S(){return window.appConfig["primo-view"].showFindInDbPerTabs}function _(){function e(e){return e["scope-id"]}var t=window.appConfig["primo-view"].scopes.map(e);return Pe(t)}function O(){return window.appConfig.tiles.SearchTileInterface}function T(){return window.appConfig.queryTerms}function E(e){return window.appConfig["tab-to-tiles"][e]}function w(){return window.appConfig.UIComponents}function I(){return window.appConfig["base-urls"]}function R(){return window.appConfig["primo-view"].scopes}function P(){return _().indexOf("default_scope")!==-1?"default_scope":_()[0]}function j(){return window.location.href.includes("/collectionDiscovery")||(window.location.href.includes("/jsearch")||window.location.href.includes("/dbsearch"))&&"suprima"!==z()?20:parseInt(window.appConfig["system-configuration"]["FE UI – Scrolling Threshold"]||"10")}function A(){return parseInt(window.appConfig["system-configuration"]["Show More (replaces scrolling) Threshold"]||"50")}function C(){return window.appConfig["primo-view"]["attributes-map"]}function $(e){var t=window.appConfig.authentication.filter(function(t){return t["profile-name"]&&e==t["profile-name"]});return t[0]&&t[0]["redirect-only"]?t[0]["redirect-only"]:"false"}function D(e){var t=window.appConfig.authentication.filter(function(t){return t["profile-name"]&&e==t["profile-name"]});return t[0]&&t[0]["authentication-system"]?"SAML"===t[0]["authentication-system"]:"false"}function L(){return{userSessionTimeout:parseInt(window.appConfig["system-configuration"]["Session Timeout"],10),guestSessionTimeout:parseInt(window.appConfig["primo-view"].timeout["guest-ui-timeout"],10),sessionTimeoutURL:C().sessionTimeoutURL,warningTime:120}}function k(){var e={isActiveCapcha:window.appConfig["system-configuration"]["Activate Captcha [Y/N]"],public_key:window.appConfig["system-configuration"]["Public Captcha Key"]};return e}function M(){return window.appConfig.vid}function x(){return window.location.href.includes("searchCDI=true")}function F(){return window.appConfig["primo-view"]["available-tabs"]}function U(e){var t="default_tab";"suprima"===z()&&(t=window.appConfig["primo-view"].scopes[0]["tab-id-for-scope-matching"]);var n=window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e});return n&&n.length>0?n[0]["tab-id-for-scope-matching"]||t:t}function B(){if(window.appConfig["mapping-tables"]&&window.appConfig["mapping-tables"].primo_central_institutions_unique_ids[0])return window.appConfig["mapping-tables"].primo_central_institutions_unique_ids[0].source1||""}function N(){return window.location.host.replace(/\:.*/,"")}function q(){return"suprima"===this.getBackendSystem()?window.appConfig["system-configuration"].Alma_Version:window.appConfig["system-configuration"].Primo_Version_Number&&window.appConfig["system-configuration"].Primo_HotFix_Number?window.appConfig["system-configuration"].Primo_Version_Number+"."+window.appConfig["system-configuration"].Primo_HotFix_Number:"4.0.0.0"}function H(){return window.appConfig["system-configuration"].RUM_URL}function V(){return window.appConfig.summon_over_alma}function Y(){return window.appConfig.searchWithinJournalConfig}function z(){return Ae(window,"appConfig.backend_system")?window.appConfig.backend_system:(Ce||(Ce=G()),Ce.indexOf("discovery")>-1?"suprima":void 0)}function G(){var e=document.getElementsByTagName("base");return e[0].getAttribute("href")}function W(){var e=window.appConfig["mapping-tables"]["General Configuration"],t=e.filter(function(e){return"Short_Date_Format"===e.source1});return t[0].target}function Q(){var e=window.appConfig["mapping-tables"]["General Configuration"],t=e.filter(function(e){return"Long_Date_Format"===e.source1});return t[0].target}function J(){return"yyyyMMdd"}function K(){return"suprima"===this.getBackendSystem()?"discovery":"primo-explore"}function X(){return window.appConfig.searchScopesMap||(window.appConfig.searchScopesMap=je(R(),"tab")),window.appConfig.searchScopesMap}function Z(e){window.appConfig["primo-view"].scopes=e,window.appConfig.searchScopesMap=je(R(),"tab")}function ee(){if("suprima"===this.getBackendSystem())return window.appConfig["system-configuration"].disable_cache}function te(){var e=d(),t=window.appConfig["mapping-tables"]["Institution Base URLs"],n=t.filter(function(t){return t.source1===e&&"api_base"===t.source2});return n.length>0?n[0].target:""}function ne(){return new Set(["iw","he","ar"])}function re(){return"infinite_scroll"}function ie(){return Boolean(C().citationTrailsEnabled)}function oe(){return window.appConfig["institution-base-url"]}function ae(){return window.appConfig["system-configuration"].Proxy_Server+"syndetics.com/index.php?client="}function se(){return window.appConfig["system-configuration"].Proxy_Server+"books.google.com/books?bibkeys="}function ce(){return window.appConfig["system-configuration"].Auto_Complete_Server_URL+"/solr/ac"}function ue(){return window.appConfig["system-configuration"].skip_delivery}function le(){return window.appConfig["system-configuration"].manualAlternativeEmailRS}function fe(){return window.appConfig["system-configuration"].split_facets_max_wait}function pe(){return window.appConfig["system-configuration"].split_facets_wait_interval}function de(){return window.appConfig["mapping-tables"]["A-Z Languages"]}function he(){return window.appConfig["mapping-tables"].seo_params_mapping}function me(e){var t=this.getSEOParamsMapping();if(t){var n=t.filter(function(t){return t.source1===e});if(n&&n[0])return n[0].target}return""}function ge(){return window.appConfig.enableSingleLogout}function ye(){return"true"===C().tabsRemote}function ve(){return window.appConfig["system-configuration"]["Show ICP License Footer"]}function ue(){return window.appConfig["system-configuration"].skip_delivery}function be(){return"suprima"!==this.getBackendSystem()&&(!window.appConfig["system-configuration"]["blend facets separately"]||"true"===window.appConfig["system-configuration"]["blend facets separately"])}function Se(){return C().legantoURLTemplate}function _e(){return C().multilingualConfigurationEnabled}function Oe(){return 60*parseInt(Ae(window,'appConfig["system-configuration"]["request item availability check timeout"]',"1"))*1e3}function Te(){if("suprima"!==z())return!1;var e=Ae(window.appConfig,"['mapping-tables']['consortia member codes']",[]),t=Ae(window.appConfig,"['primo-view']['is-union-catalog-view']",!1);return t&&e.length>0}function Ee(){if("suprima"!==z())return!1;var e=Ae(window.appConfig,"['primo-view']['is-union-catalog-view']",!1);return e&&!Te()}function we(e){return!(!window.appConfig["system-configuration"].ngrs_enabled||this.isFullView)&&"RAPIDXL"===e.tab}function Ie(){return window.appConfig["system-configuration"].ngrs_enabled}function Re(){return Ae(window.appConfig,"['system-configuration']['unionViewScopeSuffix']")}Object.defineProperty(t,"__esModule",{value:!0});var Pe=n(69),je=n(170),Ae=n(3);t.DEFAULT_COLOR_CSS="lib/app-colors-4979da4ff9.css";var Ce,$e=function(){function e(e,t,n){this._authenticationSystem=e,this._profileName=t,this._index=n}return Object.defineProperty(e.prototype,"profileName",{get:function(){return this._profileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authenticationSystem",{get:function(){return this._authenticationSystem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.isExternal=function(){return"SAML"===this._authenticationSystem||"PDS"===this._authenticationSystem||"CAS"===this._authenticationSystem||"SOCIAL_VIA_ALMA"===this._authenticationSystem?1:0},e.prototype.isSilentLoginSupported=function(){return"SAML"===this._authenticationSystem||"PDS"===this._authenticationSystem||"CAS"===this._authenticationSystem},e}();t.AuthenticationMethod=$e,t.getAuthenticationMethods=r,t.getBriefResultConfiguration=i,t.getFacetConfiguration=o,t.getLocationsConfiguration=a,t.getMainMenuConfiguration=s,t.getFullViewConfiguration=c,t.getBxEnable=u,t.getSyndeticUnboundEnable=l,t.getSyndeticUnboundId=f,t.getSystemConfiguration=p,t.getInstitutionCode=d,t.getNewspapersSearchEnabled=h,t.getDisplayNewspapersLink=m,t.getRefEntryActive=g,t.getDisplayFeaturedNewspapers=y,t.getInstitutionId=v,t.getBeaconInstitutionCode=b,t.getFindInDbPerTabs=S,t.getScopes=_,t.getSearchConfiguration=O,t.getQueryTerms=T,t.getTabToTiles=E,t.getUIComponents=w,t.getBaseUrls=I,t.getScopeList=R,t.getDefaultScope=P,t.getResultsBulkSize=j,t.getShowMoreThreshold=A,t.getAttributesMap=C,t.isRedirectOnlyForAuthName=$,t.isSaml=D,t.getSessionTimeoutParams=L,t.getCaptcha=k,t.getVid=M,t.isCDI=x,t.getTabs=F,t.getTab=U,t.getCurrentPCKey=B,t.getCurrentServer=N,t.getCurrentVersionNumber=q,t.getBeaconUrl=H,t.getSummonOverAlma=V,t.getSearchWithinJournalConfig=Y,t.getBackendSystem=z,t.getPrimoShortDateFormat=W,t.getPrimoLongDateFormat=Q,t.getIlsDateFormat=J,t.getUrlContext=K,t.getSearchScopesMap=X,t.updateSearchScopesMap=Z,t.getDisableCacheParameters=ee,t.getApiBaseUrl=te,t.getRtlLanguages=ne,t.getPagingType=re,t.isCitationTrailsEnabled=ie,t.getCitationLinkerBaseURL=oe,t.getSyndetixWithProxy=ae,t.getGoogWithProxy=se,t.getAutocompleteUrl=ce,t.getPrimoVeSkipDelivery=ue,t.getPrimoVeAlternativeEmailDigitalResourceSharing=le,t.getPrimoSplitFacetsMaxWait=fe,t.getPrimoVeSplitFacetsWaitInterval=pe,t.getAZLangages=de,t.getSEOParamsMapping=he,t.getSEOParamsMappingParam=me,t.isEnableSingleLogout=ge,t.isAutoSearchOnTabChange=ye,t.getShowICPLicenseFooter=ve,t.getPrimoVeSkipDelivery=ue,t.getBlendFacetsSeparatelyConfig=be,t.getLegantoTemplateUrl=Se,t.getMultilingualConfigurationEnabled=_e,t.getRequestItemAvailabilityCheckTimeout=Oe,t.isUnionCatalogNZView=Te,t.isUnionCatalogMemberView=Ee,t.isNgrsSearch=we,t.isNgrs=Ie,t.getUnionViewScopeSuffix=Re},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=n(22),c=n(21),u=n(14),l=n(1),f=n(1),p=n(3),d=function(){function e(e,t,n){this.searchStateService=e,this.searchFieldsService=t,this.journalsService=n,this.vid=l.getVid(),this.briefResultConfiguration=l.getBriefResultConfiguration(),this.locationsTileConfiguration=l.getLocationsConfiguration(),this.systemConfiguration=l.getSystemConfiguration(),this.facetConfiguration=l.getFacetConfiguration(),this.fullViewConfiguration=l.getFullViewConfiguration(),this.mainMenuConfiguration=l.getMainMenuConfiguration(),this.summonOverAlma=l.getSummonOverAlma(),this.backendSystem=l.getBackendSystem(),this.searchWithinJournalConfig=l.getSearchWithinJournalConfig(),this.scopes=f.getScopes(),this.configuration={facet:{mainConfig:this.facetConfiguration,tileInterface:"FacetTileInterface",enrich:this.enrichFacetConfiguration},brief:{mainConfig:this.briefResultConfiguration,tileInterface:"ResultTileInterface"},briefFrbrGeneric:{mainConfig:this.briefResultConfiguration,tileInterface:"ResultTileInterfaceFrbrGeneric",enrich:this.enrichBriefResultsConfiguration},locations:{mainConfig:this.locationsTileConfiguration,tileInterface:"LocationsTileInterface"},full:{mainConfig:this.fullViewConfiguration,tileInterface:"ResultFullTileInterface"},mainMenu:{mainConfig:this.mainMenuConfiguration,tileInterface:"MainMenuTileInterface"}}}return e.prototype.getMainMenuConfiguration=function(){return this.mainMenuConfiguration[this.vid+"."+this.configuration.mainMenu.tileInterface]},e.prototype.getFacetConfiguration=function(e){return this.getConfiguration(this.configuration.facet,e)},e.prototype.getBriefResultConfiguration=function(e){return this.getConfiguration(this.configuration.brief,e)},e.prototype.getBriefResultFrbrGenericConfiguration=function(e){return this.getConfiguration(this.configuration.briefFrbrGeneric,e)},e.prototype.getLocationsConfiguration=function(e){return this.getConfiguration(this.configuration.locations,e)},e.prototype.getFullViewConfiguration=function(e){return this.getConfiguration(this.configuration.full,e)},e.prototype.getSystemConfiguration=function(e){return this.systemConfiguration[e]},e.prototype.getViewInstitutionLibraries=function(){return p(window,"appConfig.institution-libraries")},e.prototype.getTile=function(e,t){var n=this,r=t.map(function(t){if(t.startsWith(n.vid+"."+e+"."))return t}).filter(this.filterEmpty);return r.length>0?r[0]:""},e.prototype.filterEmpty=function(e){if(""!==e)return e},e.prototype.getConfiguration=function(e,t){t=this.getScope(t);var n;n=this.journalsService.isJournalSearch()?this.searchFieldsService.tab||this.journalsService.JOURNAL_SEARCH_TAB:this.getTabs(t);var r,i=l.getTabToTiles(n);i&&(r=this.getTile(e.tileInterface,i)),r||(r=this.vid+"."+e.tileInterface+"."+n);var a=e.mainConfig[r];if(!a&&(r=this.vid+"."+e.tileInterface+"."+o.getTab(t),a=e.mainConfig[r],!a)){var s=window.appConfig["primo-view"].scopes[0]["tab-id-for-scope-matching"];r=this.vid+"."+e.tileInterface+"."+s,a=e.mainConfig[r]}return e.enrich&&e.enrich(a),a},e.prototype.getScope=function(e){return e||(e=this.searchStateService.getSearchObject().scope||this.scopes[0]),"browse_search"===e&&this.isSuprima()?"MyInstitution":e},e.prototype.enrichBriefResultsConfiguration=function(e){e&&!e.enriched&&(e.enriched=!0)},e.prototype.enrichFacetConfiguration=function(e){e&&!e.enriched&&(e.toplevelsidefacet&&e.facetview.splice(0,0,{count:5,display:!0,viewinstsort:!1,id:"facet_tlevel",sort:{_string:"open_access",_int:5},instsort:!1,valid:!0}),e.enriched=!0)},e.prototype.getSummonOverAlma=function(){return this.summonOverAlma},e.prototype.getBackendSystem=function(){return this.backendSystem},e.prototype.isSuprima=function(){return"suprima"===this.backendSystem},e.prototype.getSearchWithinJournalConfig=function(){return this.searchWithinJournalConfig},e.prototype.getScopesObj=function(e){return window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e})},e.prototype.getProxyServerPath=function(){return this.systemConfiguration.Proxy_Server},e.prototype.jsonPathToValue=function(e,t){if(!(e instanceof Object)||"undefined"==typeof t)throw"Not valid argument:jsonData:"+e+", path:"+t;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var n=t.split("."),r=0,i=n.length;r<i;++r){var o=n[r];if(!(o in e))return o;if(!e[o])return null;e=e[o]}return e},e.prototype.getTabs=function(e){return"suprima"===l.getBackendSystem()&&p(this.searchFieldsService,"searchParams.fn","q").startsWith("BrowseSearch")?o.getTabs().includes("LibraryCatalog")?"LibraryCatalog":void 0:this.searchFieldsService.tab||o.getTab(e)},e=r([a.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.SearchStateService&&c.SearchStateService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.SearchFieldsService&&u.SearchFieldsService)&&n||Object,"function"==typeof(d="undefined"!=typeof s.JournalsService&&s.JournalsService)&&d||Object])],e);var t,n,d}();t.ConfigurationUtil=d},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(174);e.exports=r},function(e,t,n){"use strict";function r(e){return e.promise}function i(i,a){var u=i.state;if(i.state=function(e,t){return t.resolve=d.extend({},t.resolve,{updateUnionViewParams:y}),u.apply(this,arguments)},window.location.search.indexOf("%u")>-1){var l=window.location.search.match(/%u([0-9a-f]{4})/);l&&(window.location.search=window.location.search.replace(l[0],o(l[1])))}i.state("exploreMain",{abstract:!0,template:"<prm-explore-main></prm-explore-main>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.SEARCH,{url:"/search?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&pcAvailability?browseQuery&browseFirstTerm&browseScope&innerPnxIndex&numOfUsedTerms&fn&came_from?docCount&show_performance&conVoc&browseParams&authenticationError&fromRedirectFilter&timeout&explain&fromDate&searchCDI",template:"<prm-search></prm-search>",reloadOnSearch:!0,resolve:{personalizationConfiguration:r}}),i.state(t.STATE_NAMES.JOURNAL_SEARCH,{url:"/jsearch?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&journals&timeout&explain&databases&searchCDI",template:"<prm-journals></prm-journals>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(0).then(function(i){(function(e){var e=n(64);e=s.bundle(e.AtozModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.JOURNAL_FULL_DISPLAY,{url:"/jfulldisplay?vid&search_scope&tab&docid&lang&context&adaptor&isFrbr&showPnx&query&pfilter&sortby&mode&facet&mfacet&journals&timeout&explain&searchCDI",template:"<prm-journals-full-view></prm-journals-full-view>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",s.getInjectableName(c.FullViewModuleLoaderService),function(t,r,i){var o=r(function(r){n.e(0).then(function(i){(function(e){var e=n(64);e=s.bundle(e.AtozModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})}),a=i.loadFullViewModule();return r.all([o,a])}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.NEWSPAPERS_FULL_DISPLAY,{url:"/npfulldisplay?vid&search_scope&tab&docid&lang&context&adaptor&showPnx&query&sortby&facet&mfacet&timeout",template:"<prm-newspapers-full-view></prm-newspapers-full-view>",reloadOnSearch:!0,resolve:{loadModule:[s.getInjectableName(c.FullViewModuleLoaderService),function(e){return e.loadFullViewModule()}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.DB_SEARCH,{url:"/dbsearch?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&databases&showPnx&timeout&explain&searchCDI",template:"<prm-databases></prm-databases>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",s.getInjectableName(c.FullViewModuleLoaderService),function(t,r,i){var o=r(function(r){n.e(0).then(function(i){(function(e){var e=n(64);e=s.bundle(e.AtozModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})}),a=i.loadFullViewModule();return r.all([o,a])}]}}),i.state(t.STATE_NAMES.DB_FULL_DISPLAY,{url:"/dbfulldisplay?query&pfilter&tab&docid&context&adaptor&search_scope&isFrbr&sortby&vid&facet&mfacet&lang&mode&offset&databases&showPnx&timeout&explain&searchCDI",template:"<prm-databases-full-view></prm-databases-full-view>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",s.getInjectableName(c.FullViewModuleLoaderService),function(t,r,i){var o=r(function(r){n.e(0).then(function(i){(function(e){var e=n(64);e=s.bundle(e.AtozModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})}),a=i.loadFullViewModule();return r.all([o,a])}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.NEWSPAPERS,{url:"/npsearch?vid&query&search_scope&sortby&lang&pcAvailability&facet&mfacet&offset&issn&featured_scope&timeout",template:"<prm-newspapers-home></prm-newspapers-home>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.COLLECTION_DISCOVERY,{url:"/collectionDiscovery?vid&colayout&inst&collectionId&lang&timeout&query&sortby",params:{currentCollection:void 0,items:void 0,path:void 0},template:"<prm-collection-discovery></prm-collection-discovery>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(4).then(function(i){(function(e){var e=n(428);e=s.bundle(e.CollectionDiscoveryModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.SERVICE_PAGE,{url:"/openurl?institution&vid&lang&ctx_ver&ctx_enc&ctx_tim&url_ver&url_ctx_fmt&{rfr_id:any}&rft_val_fmt&rft.genre&rft.atitle&atitle&rft.jtitle&jtitle&rft.btitle&btitle&rft.aulast&aulast&rft.auinit&auinit&rft.auinit1&auinit1&rft.auinitm&auinitm&rft.ausuffix&ausuffix&rft.au&au&rft.aucorp&aucorp&rft.volume&volume&rft.issue&issue&rft.part&part&rft.quarter&quarter&rft.ssn&ssn&rft.spage&spage&rft.epage&epage&rft.pages&pages&rft.artnum&artnum&rft.issn&issn&rft.eissn&eissn&rft.isbn&isbn&rft.sici&sici&rft.coden&coden&rft_id&rft.lccn&rft.oclcid&rft.object_id&object_id&rft_dat&rft.eisbn&eisbn&req.language&rft.title&title&dscnt&rft.mms_id&rft.date&rft.doi&rft.pmid&rft.aufirst&rft.publisher&rft.pubdate&dstmp&debug&svc_dat&response_type&req_id&output&fromLogin&u.ignore_date_coverage&url_ctx_val&isSerivcesPage&Force_direct&isCitationLinker&timeout&id&sid&genre&date&searchCDI",template:"<prm-services-page></prm-services-page>",reloadOnSearch:!0,resolve:{loadModule:[s.getInjectableName(c.FullViewModuleLoaderService),function(e){return e.loadFullViewModule()}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.FULL_DISPLAY,{url:"/fulldisplay?vid&search_scope&tab&docid&id&inst&lang&context&adaptor&isFrbr&showPnx&query&pfilter&sortby&mode&facet&mfacet&offset?&browseQuery&browseFirstTerm&browseScope&innerPnxIndex&numOfUsedTerms&fn&pcAvailability&fromFeaturedResult&originScope&originTab&timeout&explain&virtualBrowse&searchCDI",template:"<prm-full-view-page></prm-full-view-page>",reloadOnSearch:!0,resolve:{loadModule:[s.getInjectableName(c.FullViewModuleLoaderService),function(e){return e.loadFullViewModule()}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.SEO_FULL_DISPLAY,{url:"/fulldisplay/:docid/:vid",template:"<prm-full-view-page></prm-full-view-page>",reloadOnSearch:!0,resolve:{loadModule:[s.getInjectableName(c.FullViewModuleLoaderService),function(e){return e.loadFullViewModule()}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.LEGANTO_GETIT,{url:"/legantogetit?vid&docid&lang&context&body-bgcolor",template:"<prm-leganto-getit></prm-leganto-getit>",reloadOnSearch:!0,resolve:{loadModule:[s.getInjectableName(c.FullViewModuleLoaderService),function(e){return e.loadFullViewModule()}],waitForSilentLogin:g}}),i.state(t.STATE_NAMES.FAVORITES,{url:"/favorites?vid&label&lang&section&sortBy&timeout",template:"<prm-favorites></prm-favorites>",reloadOnSearch:!0,params:{section:"items"},resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(5).then(function(i){(function(e){var e=n(430);e=s.bundle(e.FavoritesModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.TAGS,{url:"/tags?vid&label&lang&section&timeout",template:"<prm-tags></prm-tags>",reloadOnSearch:!0}),i.state("account",{url:"/account?vid&section&lang&timeout",template:"<prm-account></prm-account>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(2).then(function(i){(function(e){var e=n(201);e=s.bundle(e.AccountModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state("blankIll",{url:"/blankIll?vid&timeout",template:"<prm-blank_ill></prm-blank_ill>",reloadOnSearch:!0}),i.state("purchaseRequest",{url:"/purchaseRequest?vid&timeout",template:"<prm-blank-purchase-request></prm-blank-purchase-request>",reloadOnSearch:!0}),i.state("deposit",{url:"/deposit?vid&lang&auth&timeout",template:"<prm-deposits-link></prm-deposits-link>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(2).then(function(i){(function(e){var e=n(201);e=s.bundle(e.AccountModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.DELIVERY,{url:"/delivery?vid&mmsId&repId&lang&timeout&showLogo&mode",template:"<prm-alma-viewer></prm-alma-viewer>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(1).then(function(i){(function(e){var e=n(119);e=s.bundle(e.AlmaViewerModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.DELIVERY_CNAME,{url:"/delivery/:pid?lang&timeout&showLogo&mode",template:"<prm-alma-viewer></prm-alma-viewer>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(1).then(function(i){(function(e){var e=n(119);e=s.bundle(e.AlmaViewerModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state(t.STATE_NAMES.DELIVERY_CANON,{url:"/delivery/:vid/:pid?lang&timeout&showLogo&mode",template:"<prm-alma-viewer></prm-alma-viewer>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",function(t,r){return r(function(r){n.e(1).then(function(i){(function(e){var e=n(119);e=s.bundle(e.AlmaViewerModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})})}]}}),i.state("static",{url:"/static-file/:section?vid&lang&timeout",template:"<prm-static-page></prm-static-page>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.EMAIL_TEMPLATE,{url:"/email-template?vid&lang&timeout",template:"<prm-email-template></prm-email-template>",params:{items:void 0,note:void 0},reloadOnSearch:!0,resolve:{loadModule:[function(){f(document.querySelectorAll('link[rel="stylesheet"]'),function(e){e.parentNode.removeChild(e)})}]}}),i.state(t.STATE_NAMES.LOGIN,{url:"/login?vid&lang&timeout&toState&toParams&unionCatalogNZVid",template:"<prm-stand-alone-login></prm-stand-alone-login>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.CITATION_TRAILS,{url:"/citationTrails?query&search_scope&tab&vid&facet&mfacet&lang&adaptor&active&seed_id&timeout&explain&searchCDI",params:{seedInfo:null},template:"<prm-citation-trails-breadcrumbs></prm-citation-trails-breadcrumbs>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.SOURCE_RECORD,{url:"/sourceRecord?vid&docId&recordOwner&timeout",template:"<prm-source-record></prm-source-record>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.CITATION_LINKER,{url:"/citationlinker?vid&lang&timeout",template:"<prm-citation-linker></prm-citation-linker>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.CITATION_CHAPTERS,{url:"/chapters?vid&lang&timeout&query&search_scope&tab&type&adaptor&docid&facet&mfacet&isRelatedItems&context",template:"<prm-chapters-and-reviews></prm-chapters-and-reviews>",reloadOnSearch:!0}),i.state("model",{url:"/model?vid",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.active",{url:"/:active",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.entry",{url:"/:active/:entry",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.bulk",{url:"/:active/:entry/:bulk",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.entry2",{url:"/:active/:entry/:bulk/:entry2",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.detail",{url:"/:active/:entry/:bulk/:entry2/:index",template:"<prm-model></prm-model>",reloadOnSearch:!1}),i.state(t.STATE_NAMES.BROWSE_SEARCH,{url:"/browse?vid&browseQuery&browseScope&browseFirstTerm&innerPnxIndex&numOfUsedTerms&fn&timeout&explain&searchCDI",template:"<prm-browse-search></prm-browse-search>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.BROWSE_HEADER_RESULTS,{url:"/browse/results?vid&query&browseQuery&browseFirstTerm&timeout&explain&searchCDI",template:"<prm-browse-header-results></prm-browse-header-results>",reloadOnSearch:!0}),i.state(t.STATE_NAMES.ORGANIZATION_LIST,{url:"/orgList?vid&query&sortby&timeout&searchCDI&showPnx&organization&organizationPath&tab&search_scope&facet&mfacet&offset",template:"<prm-organizations></prm-organizations>",reloadOnSearch:!0,resolve:{loadModule:["$ocLazyLoad","$q",s.getInjectableName(c.FullViewModuleLoaderService),function(t,r,i){var o=r(function(r){n.e(0).then(function(i){(function(e){var e=n(64);e=s.bundle(e.AtozModule),t.inject(e.name).then(function(){r()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)})}),a=i.loadFullViewModule();return r.all([o,a])}]}}),a.otherwise(function(e,n){var r=e.get("$state"),i=t.STATE_NAMES.SEARCH,o=n.path();o.indexOf(".do")>-1?o.indexOf("login.do")===-1&&o.indexOf("loginpage.do")===-1&&(window.location=n.absUrl()):r.go(i,n.search())})}function o(e){var t="",n="be";/^feff/.test(e)?n="be":/^fffe/i.test(e)&&(n="le");var r=parseInt(e,16);if("le"==n){var i=(65280&r)>>8,o=255&r;r=o<<8|i}return t+=String.fromCodePoint(r)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),s=n(0),c=n(135),u=n(137),l=n(1),f=n(18),p=n(41),d=n(5),h=d.module("primo-explore.states",[p]);t.default=h;var m=n(116);t.STATE_NAMES={FAVORITES:"exploreMain.favorites",
SEARCH:"exploreMain.search",TAGS:"tags",CITATION_TRAILS:"exploreMain.citationTrails",CITATION_LINKER:"exploreMain.citationlinker",CITATION_CHAPTERS:"exploreMain.chapters",CITATION_REVIEWS:"exploreMain.chapters",EMAIL_TEMPLATE:"emailTemplate",FULL_DISPLAY:"fulldisplay",SEO_FULL_DISPLAY:"seoFulldispaly",SOURCE_RECORD:"sourceRecord",JOURNAL_SEARCH:"exploreMain.jsearch",JOURNAL_FULL_DISPLAY:"jfulldisplay",NEWSPAPERS_FULL_DISPLAY:"npfulldisplay",DB_SEARCH:"exploreMain.dbsearch",NEWSPAPERS:"exploreMain.npsearch",DB_FULL_DISPLAY:"dbfulldisplay",BLANK_ILL:"blankIll",PURCHASE_REQUEST:"purchaseRequest",BROWSE_SEARCH:"exploreMain.browseSearch",BROWSE_HEADER_RESULTS:"exploreMain.browseSearchResults",COLLECTION_DISCOVERY:"exploreMain.collectionDiscovery",SERVICE_PAGE:"servicesPage",LEGANTO_GETIT:"legantoGetIt",DELIVERY:"delivery",DELIVERY_CANON:"canonDelivery",DELIVERY_CNAME:"cnameDelivery",LOGIN:"login",ORGANIZATION_LIST:"exploreMain.orgList"},h.config(i);var g=["$q",s.getInjectableName(u.SilentLoginService),function(e,t){return e(function(e,n){t.silentLoginAppDelayTimer.then(function(){e()}),t.silentLoginInprogressPromise.then(function(){e()})})}],y=["$stateParams",function(e){if(l.isUnionCatalogMemberView()){var t=l.getUnionViewScopeSuffix();e.search_scope&&!m(e.search_scope,t)&&(e.search_scope=e.search_scope+t),e.tab&&!m(e.tab,t)&&(e.tab=e.tab+t)}}];r.$inject=[s.getInjectableName(a.PersonalizeResultsButtonService)],i.$inject=["$stateProvider","$urlRouterProvider"]},function(e,t){e.exports=angular},function(e,t,n){"use strict";function r(e){return function(t,n,r){function i(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(new Date).getTime();this.primolyticsService.originalMethodArgs=n;var a=o.apply(this,n);return this.primolyticsService.getScope().$evalAsync(function(){var r=t[e.item]||t.item||t.items||t.result||t.results||(A(n)?void 0:1===n.length?n[0]:n);t.primolyticsService.doBeaconReport(e,r,i)}),a}var o;return r.set?(o=r.set,r.set=i):(o=r.value,r.value=i),r}}function i(e){try{JSON.parse(e)}catch(e){return!1}return!0}function o(e){for(var t,n=Object.keys(e),r=n.length,i={};r--;)t=n[r],i[t.toUpperCase()]=e[t];return i}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r in t)if(e.indexOf(t[r])===-1)return!1;return!0}var s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1);window.appConfig=window.appConfig||{};var f=n(41),p=n(564),d=n(0),h=n(1),m=n(14),g=n(10),y=n(21),v=n(11),b=n(112),S=n(7),_=n(2),O=n(231),T=n(107),E=n(17),w=n(4),I=n(56),R=n(16),P=n(193),j=(n(77),n(138)),A=n(66),C=n(60),$=n(24),D=n(3),L=n(5),k=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d,m,g,y,v){this.searchFieldsService=e,this.$translate=t,this.userSessionManagerService=n,this.searchStateService=r,this.searchService=i,this.collectionDiscoveryService=o,this.newspapersService=a,this.linksService=s,this.$rootScope=c,this.$timeout=u,this.fullViewPageService=l,this.$state=f,this.jwtUtilService=p,this.$stateParams=d,this.configurationUtil=m,this.browseResultService=g,this.browseSearchBarService=y,this.storageUtil=v,this.resourceRecommenderFields=["database","person","website","library_information","library_guide","custom1","custom2","custom3"],this.urlPrefixPattern=/(^((http|https):\/\/|www\.))/i,this.urlSuffixPattern=/\/$/i,this.beaconBaseUrl=h.getBeaconUrl()||"http://1234.exlibrisgroup.com",this.needToGetReferrer=!0}return e.prototype.trackInitialPage=function(){var e=this;this.$rootScope.$evalAsync(function(){var t=e.$rootScope.$on("$viewContentLoaded",function(){return e.reportDeepLinks()});t()})},e.prototype.reportDeepLinks=function(e,t,n,r,i){var o=window.location.toString();if(o.indexOf("vid=")!==-1){var a=(new Date).getTime(),s=this.getMappingJson(),c=o.substring(o.lastIndexOf("/")+1,o.lastIndexOf("?")+1);s[c]&&s[c].apply(this,[o,a])}},e.prototype.getSearchService=function(){return this.searchService},e.prototype.getScope=function(){return this.$rootScope},e.prototype.getMappingJson=function(e){var t=this;return{recommender:{O5:function(e){return encodeURIComponent(e.link1)},O3:function(e){return e.sourceid},O2:function(e){return e.index.toString()}},"search?":function(e,n){if(a(e,"query=","search_scope="))if(a(e,"facet=")){var r=e.substr(e.indexOf("facet=")).split("facet="),i=t.searchService.getFacetsFromUrl(decodeURIComponent(r[r.length-1]),!1)[0];"frbrgroupid"===i.name?t.doBeaconReportWaitForFacetSearch({p:"refine",op:"frbr"},void 0,n):"include"===i.name?t.doBeaconReportWaitForFacetSearch({p:"refine",op:"facetInclude"},void 0,n):t.doBeaconReportWaitForFacetSearch({p:"refine",op:"facetExclude"},void 0,n)}else t.doBeaconReportWaitForSearch({p:"search",op:"do"},"",n)},"fulldisplay?":function(e,n){a(e,"docid=","context=","search_scope=")&&t.doBeaconReportWaitForFullView({p:"brief",op:"openfull"},"",n)},"account?":function(e,n){var r=/section=([^&]+)/.exec(window.location.toString())[1];A(r)?t.doBeaconReport({p:"general",op:"gotoMyAccount"},"",n):t.doBeaconReport({p:"general",op:"menu.myaccount."+r},"",n)},"collectionDiscovery?":function(e,n){a(e,"colayout=","inst=","collectionId=")&&t.doBeaconReport({p:"general",op:"???"})},"favorites?":function(e,n){a(e,"label=")&&t.doBeaconReport({p:"general",op:"gotoeShelf"},"",n)},colldisc:{favorites:{OP:function(){return"collection"==t.searchService.cameFromState?"favoritesAddCollection":"favoritesAddItem"}},changeView:{OP:function(){return"changeViewTo"+t.collectionDiscoveryService.itemsViewStyle}},refine:{OP:"refine"},sort:{OP:function(){return 1===t.originalMethodArgs.length?"sortCollectionsBy"+t.originalMethodArgs[0]:void 0}}},TimesCited:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)}},rssSubscription:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O8:function(){return t.getSearchTermsFromUrl()},O10:function(){return t.getResourceTypePreFilterFromUrl()},O11:function(){return t.getSearchTypeFromUrl()},O17:function(){return t.getSearchTab()},O19:function(){return t.getPercentOfContentBySource()},O22:function(){return t.getServerTime()},click:{O22:function(e){return t.getServerTime(e)}}},search:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O8:function(){return t.getSearchTermsFromUrl()},O10:function(){return t.getResourceTypePreFilterFromUrl()},O11:function(){return t.getSearchTypeFromUrl()},O17:function(){return t.getSearchTab()},O19:function(){return t.getPercentOfContentBySource()},O22:function(e){return t.getServerTime(e)},O38:function(){return t.getSearchActionType()},O40:function(){return t.getRecommendationCount(t.resourceRecommenderFields[0])},O41:function(){return t.getRecommendationCount(t.resourceRecommenderFields[1])},O42:function(){return t.getRecommendationCount(t.resourceRecommenderFields[2])},O43:function(){return t.getRecommendationCount(t.resourceRecommenderFields[3])},O44:function(){return t.getRecommendationCount(t.resourceRecommenderFields[4])},O45:function(){return t.getRecommendationCount(t.resourceRecommenderFields[5])},O46:function(){return t.getRecommendationCount(t.resourceRecommenderFields[6])},O47:function(){return t.getRecommendationCount(t.resourceRecommenderFields[7])},O48:function(){return t.getBeaconSearchErrorMessage()},lateralLinking:{OP:"lateralLinking",O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.originalMethodArgs.length>0?t.originalMethodArgs[0]:void 0},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.originalMethodArgs.length>1&&t.originalMethodArgs[1]?"facet exact":t.getSearchTypeFromUrl()},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(){return t.getServerTime()}},browseRelated:{OP:"browseRelated",O:function(){return t.getInstNameForBeacon()},O8:function(){return t.getBrowseQuery()}},browse:{OP:function(){return"browse_"+t.browseSearchBarService.selectedScope.SourceCode1},O:function(){return t.getInstNameForBeacon()}},atoz:{OP:function(){return t.getATOZSearchOP()},O2:"primo_alma",O3:function(){return t.getNumberOfResults()},O8:function(){var e=t.getAtozSearchTerm();return e.length>1&&"Others"!==e&&"0-9"!==e&&(e=e.substring(4)),e},O10:function(){var e=t.getAtozSearchTerm();return e=e.length>1&&"Others"!==e&&"0-9"!==e?e.substring(0,2)+"_"+e.substring(2,4).toUpperCase():"Å"===e||"Æ"===e||"Ø"===e?"no_NO":"en_US"}},newspapers:{OP:"newspapers",O1:"deep_search",O2:function(){return t.getSearchScope()+("all"!=t.getSearchScope()?" <"+t.newspapersService.featuredScope+">":"")},O3:function(){return t.getNumberOfResults()},O8:function(){return t.getSearchTermsFromUrl()}},azdb:{OP:function(){return t.getDBSearchOP()},O2:"primo_alma",O3:function(){return t.getNumberOfResults()},O8:function(){return t.getAtozSearchTerm()},O10:function(){return t.getDBSearchType()}},dbCategoryExpand:{OP:"azdbDbCategoryExpend"},sessionQuery:{OP:"sessionQuery",O1:function(){return"deep_search"},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O6:"",O8:function(){return t.getSearchTermsFromUrl()},O10:"",O11:"",O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:"NUI",O22:"",O23:""},savedQuery:{OP:"savedQuery",O1:function(){return"deep_search"},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O6:"",O8:function(){return t.getSearchTermsFromUrl()},O10:"",O11:"",O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:"NUI",O22:"",O23:""},searchInCollection:{OP:"searchInCollection",O8:function(){return t.getCollectionSearchTerm()}},preFilter:{OP:"preFilter"}},brief:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:function(e){return"favorites"===t.op?t.getFavoritesAction(e):void 0},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},P:function(){return t.checkIfCitationTrail(t.op)},icon:{OP:"icon"},title:{OP:"title"},next:{OP:"next",O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O8:function(){return t.getSearchTerm()},O22:function(e){return t.getServerTime(e)}},linktoPath:{OP:"linktoPath"},nextResult:{OP:"nextResult",O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O8:function(){return t.getSearchTerm()},O22:function(e){return t.getServerTime(e)}},previousResult:{OP:"previousResult",O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O8:function(){return t.getSearchTerm()},O22:function(e){return t.getServerTime(e)}},resourceRecommender:{OP:function(e){return"resourceRecommender_"+e.resourceType}},resourceRecommenderDisplayed:{O8:function(){return t.getSearchTermsFromUrl()}},openfull:{OP:"openfull",O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:function(e){return"favorites"===t.op?t.getFavoritesAction(e):void 0},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},O40:function(){return t.getSearchTermsFromUrl()},O41:function(e){return t.getTitleOfRecord(e)},O42:function(e){return t.getPublisherOfRecord(e)},O43:function(e){return t.getIsCdiRecord(e)},P:function(){return t.checkIfCitationTrail(t.op)},PV:function(){return t.getViewItTimes()},PG:function(){return t.getGetItTimes()},PCD:function(){return t.getPCTimes()}},checkOnlineFromOthers:{OP:"checkOnlineFromOthers"},checkOnlineFromOthersCampuses:{OP:"checkOnlineFromOthersCampuses"}},sort:{OP:function(){return t.getSortType()},O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O19:function(){return t.getPercentOfContentBySource()},O22:function(){return t.getServerTime()}},general:{O:function(){return"signIn"===t.op||"gotoSearch"===t.op?t.getCurrentLocation():void 0},O1:function(){return"gotoSearchHistory"===t.op?"deep_search":void 0},O2:function(){return"gotoSearchHistory"===t.op?t.getSearchScope():void 0},O4:function(){return t.getCurrentLang()},goToNewspapersfromMainMenu:{OP:"goToNewspapersfromMainMenu"},goToNewspapersfromRegularSearch:{OP:"goToNewspapersfromRegularSearch",O1:function(){return t.newspapersService.regularSearchCameFrom}},mainMenuLink:{OP:function(){return"mainMenuLink"+t.searchService.cameFromState}},sortEshelfdate:{OP:"sortEshelfdate"},sortEshelfTitle:{OP:"sortEshelfTitle"},sortEshelfAuthor:{OP:"sortEshelfAuthor"},goToRefworks:{OP:"goToRefworks"},resourceExistLink:{OP:"resourceExistLink"}},fullshortcuts:{OP:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0},O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},getIt1:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:"???",O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},linksService:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O4:"",O6:function(e){return t.getGIDOfRecord(e)},O8:function(){return t.getSearchTerm()},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},linkToLeganto:{OP:"linkToLeganto"}},myAccount:{renewLoans:{OP:"renewLoans"},cancelRequest:{OP:"cancelRequest"}},tags:{},refine:{OP:function(e){return t.getFacetAction(e)},O:function(e){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(e){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(e){return t.getFacetValue(e)},O22:function(){return t.getServerTime()},O50:function(e){return e.ignoreInActions?"ignoreInActions":"Not Defined"},frbr:{OP:"frbr",O:function(e){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(){return t.getServerTime()}}},setPersistentFacet:{O:function(){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(){return t.getFacetValue(e)},O22:function(){return t.getServerTime()}},persistent:{OP:function(){return t.getFacetAction(e)},O:function(){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(){return t.getFacetValue(e)},O22:function(){return t.getServerTime()},O50:"ignoreInActions"},sendTo:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O8:function(e){return"Citation"===t.op?e.citationStyle:void 0},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},click:{O:function(){return t.getInstNameForBeacon()}},"citation-linker":{},personalizedResults:{},voiceSearch:{},virtualBrowse:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},recordVirtualBrowse:{OP:"recordVirtualBrowse",O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0}}},moreFromTheSame:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},recordMoreFromTheSame:{OP:"recordMoreFromTheSame",O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0}}},featuredResults:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},recordFeaturedResults:{OP:"recordFeaturedResults",O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0}}},detailsTab:{}}},e.prototype.getInstNameForBeacon=function(){var e=l.getInstitutionCode(),t=this.$translate.instant(e);return encodeURIComponent("&&&&"+e+"&"+t+"&&")},e.prototype.getParamsFromMapping=function(e,t){e.OP&&(this.op=e.OP);var n=e.P,r=e,i=this.getMappingJson(t);i[n][this.op]&&(i[n]=i[n][this.op]);for(var o in i[n])try{"function"==typeof i[n][o]?r[o]=i[n][o](t):r[o]=i[n][o]}catch(e){}return r},e.prototype.json2Urlparams=function(e,t){var n=this.genBeaconParamsArray(t),r={};for(var i in n)""!==e[i]&&""===n[i]?r[i]=e[i]:""!==e[i]&&"undefined"!=typeof e[i]||""===n[i]?""!==e[i]&&""!==n[i]&&(r[i]=e[i]):r[i]=n[i];var o="";for(var a in r)r[a]&&(o=o+a+"="+encodeURI(r[a])+"&");return o.substring(0,o.length-1)},e.prototype.genBeaconParamsArray=function(e){return{A:"Primo_Local",G:this.getUserGroup(),I:this.getInstitutionCalculatedId(),IP:"",O:"",O1:"",O2:"",O3:"",O4:"",O5:h.getCurrentPCKey(),O6:"",O7:this.getUserLoginStatus(),O8:"",O9:h.getVid()||"",O10:"",O11:"",O12:this.getCampusStatus(),O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:this.configurationUtil.isSuprima()?"SUP":"NUI",O23:this.getReferrer(),O38:"",O39:this.getInstitutionServer(e),O40:"",O41:"",O42:"",O43:"",O44:"",O45:"",O46:"",O47:"",O48:"",O50:"",OP:"",P:"",RS:this.getResolution(),PV:"",PG:"",PCD:"",S:this.getCurrentJWTDigest(),SRVR:h.getCurrentServer(),T:"",TYP:"Page_View_"+h.getCurrentVersionNumber(),ctx_enc:"",ctx_tim:"",rfr_id:"","rft.artnum":"","rft.atitle":"","rft.au":"","rft.aucorp":"","rft.auinit":"","rft.auinit1":"","rft.auinitm":"","rft.aulast":"","rft.ausuffix":"","rft.btitle":"","rft.coden":"","rft.eisbn":"","rft.eissn":"","rft.epage":"","rft.genre":"","rft.isbn":"","rft.issn":"","rft.issue":"","rft.jtitle":"","rft.object_id":"","rft.pages":"","rft.part":"","rft.quarter":"","rft.sici":"","rft.spage":"","rft.ssn":"","rft.volume":"",rft_dat:"",rft_id:"",rft_val_fmt:"",url_ctx_fmt:"",url_ver:""}},e.prototype.getReferrer=function(){var e="",t="Primo",n=window.location.href;if(this.needToGetReferrer&&(n=document.referrer?document.referrer:window.location.href),n)if(n.indexOf("/primo-explore/")>-1||n.indexOf("/discovery/")>-1)e=t;else{var r=new URL(n);e=r.origin,this.needToGetReferrer=!1}return e},e.prototype.getOnlineOrPhysical=function(e){if(L.isDefined(e.beaconIsPhsical)){if(e.beaconIsPhsical)return"physical";if(!e.beaconIsPhsical)return"online"}},e.prototype.getSourceOfTheRecord=function(){var e=l.getTab(this.getSearchScope()).toUpperCase(),t=window.appConfig["primo-view"].scopes;for(var n in t){var r=t[n].tab.toUpperCase(),i=this.getSearchScope().toUpperCase(),o=t[n]["scope-id"].toUpperCase();if(r===e&&i===o){var a=t[n].types;return a.indexOf("local")>-1&&(a.indexOf("adaptor")>-1||a.indexOf("deep_search")>-1)?"blended":a.indexOf("deep_search")>-1?"deep_search":"local"}}},e.prototype.getServerTime=function(e){return e&&e.beaconO22?e.beaconO22:e?void 0:this.searchService.getResultObject().beaconO22},e.prototype.getSortType=function(){return this.searchFieldsService.sortby},e.prototype.getSearchScopeType=function(e){return this.getSourceOfTheRecord()},e.prototype.getRecordDataSource=function(e){return e.pnx.search.sourceid||""},Object.defineProperty(e.prototype,"browseRecordSource",{get:function(){return this.browseResultService.browseResult.pnx.search.sourceid||""},enumerable:!0,configurable:!0}),e.prototype.getInstitutionServer=function(e){if(this.configurationUtil.isSuprima()&&window.appConfig["system-configuration"]&&window.appConfig["system-configuration"].hostLB){var t=window.appConfig["system-configuration"].hostLB;return t=t.replace(this.urlPrefixPattern,""),t=t.replace(this.urlSuffixPattern,"")}if(!(e&&e.data&&e.data[0]&&e.data[0]["@id"]))return this.institutionServer?this.institutionServer:h.getCurrentServer();var n=e.data[0]["@id"],r=new URL(n);return r&&r.hostname?(this.institutionServer=r.hostname,r.hostname):void 0},e.prototype.getInstitutionCalculatedId=function(){return this.configurationUtil&&this.configurationUtil.isSuprima()?h.getInstitutionId():this.jwtUtilService&&this.jwtUtilService.getDecodedToken().jwtAlternativeBeaconInstitutionCode?this.jwtUtilService.getDecodedToken().jwtAlternativeBeaconInstitutionCode:(console.log("Unable to find the JWT alternative beacon institution code."),"noJwtAlternativeBeaconInstitutionCode")},e.prototype.getSearchType=function(){if(this.searchStateService.getSearchObject().query)return this.searchStateService.getSearchObject().query.replace(/[a-z]+,/,"").replace(/,.*/,"")},e.prototype.getSearchActionType=function(){return this.searchService&&"voiceSearch"==this.searchService.cameFromState?"voiceSearch":null},e.prototype.getDBSearchType=function(){var e=this.searchStateService.getSearchObject().databases;if(e){if(e.includes("letter,"))return"AtoZ";if(e.includes("any,"))return"DB Search";if(e.includes("category,"))return"DB Category"}return"Not Defined Search"},e.prototype.getDBSearchOP=function(){var e=this.searchStateService.getSearchObject().databases;if(e){if(e.includes("letter,"))return"azdbAtoZ";if(e.includes("category,"))return"azdbDbCategory"}return"azdb"},e.prototype.getATOZSearchOP=function(){var e=this.searchStateService.getSearchObject().journals;if(e){if(e.includes("letter,"))return"atoz";if(e.includes("category,"))return"atozCategory"}return"atoz"},e.prototype.getBrowseQuery=function(){return encodeURIComponent(this.browseResultService.query)},e.prototype.getGIDOfRecord=function(e){if("5"===e.pnx.facets.frbrtype[0])return e.pnx.facets.frbrgroupid},e.prototype.getItemDataScope=function(e){return"PC"===e.context?e.pnx.search.scope:e.pnx.control.sourceid},e.prototype.getIdOfRecord=function(e){return e.pnx.control.recordid},e.prototype.getTitleOfRecord=function(e){return D(e,"pnx.search.title")},e.prototype.getPublisherOfRecord=function(e){return D(e,"pnx.display.publisher")},e.prototype.getIsCdiRecord=function(e){var t=this.$stateParams.docid;if(t&&(t.toLowerCase().startsWith("cdi_")||t.toLowerCase().startsWith("tn_cdi_")))return!0},e.prototype.getIssnOfRecord=function(e){return this.arrayToStringWithToken(e.pnx.addata.issn,";")},e.prototype.getEIssnOfRecord=function(e){return this.arrayToStringWithToken(e.pnx.addata.eissn,";")},e.prototype.arrayToStringWithToken=function(e,t){var n="";if(e.length>0){var r=!0;for(var i in e)r?(n=e[i],r=!1):n+=t+e[i]}return n},e.prototype.getJournalOfRecord=function(e){var t="";return e.pnx.facets.jtitle.length>0&&(t=e.pnx.facets.jtitle[0]),t},e.prototype.getFacetAsObj=function(e){return{name:e[0],label:e[1],value:e[2],type:e[3],displayedType:e[4],operation:e.slice(-1)[0]}},e.prototype.getFacetAddOrRemove=function(e){if("expandResults"===this.op){var t=this.searchService.getSearchObject().pcAvailability;return"false"===t&&(t=!1),t?"Add":"Remove"}var n=this.searchStateService.getSearchObject().facets;if("frbr"===this.op||"frbrgroupid"===e.name){for(var r in n)if("frbrgroupid"===n[r].name)return"Add";return"Remove"}if("add"==e.operation)return"Add";for(var r in n)if(e.name===n[r].name&&e.label===n[r].label&&e.value===n[r].value&&e.facetType===n[r].facetType&&e.displayedType===n[r].displayedType)return"Add";return"Remove"},e.prototype.getFacetAction=function(e){var t=this.getFacetType(e);return"facet"+t[0].toUpperCase()+t.slice(1)},e.prototype.getFacetValue=function(e){if(!e){var t=this.searchStateService.getSearchObject().facets;t.length>0&&(e=t[t.length-1])}return"tlevel"===e.name||"rtype"===e.name?e.value:void 0},e.prototype.getFacetType=function(e){if(!e){var t=this.searchStateService.getSearchObject().facets;return t[t.length-1].type}return"frbrgroupid"===e.name?"frbr":e.facetType?e.facetType:e.type},e.prototype.getFacetName=function(e){if(e)return e.name;var t=this.searchStateService.getSearchObject().facets;return t[t.length-1].name},e.prototype.getFavoritesAction=function(e){var t,n=this,r=this.userSessionManagerService.area;return t=r.map(function(e){return n.userSessionManagerService.isGuest()?e.pnx.control.recordid[0]:e}),C(t,e.pnx.control.recordid[0])!==-1?"remove":"add"},e.prototype.checkIfCitationTrail=function(e){return"CitedByLink"!=e&&"CitationsLink"!=e?"brief":this.$state.$current.name===w.STATE_NAMES.CITATION_TRAILS?"citationTrail":"brief"},e.prototype.getCurrentLocation=function(){var e=window.location.pathname;return e.substring(e.lastIndexOf("/")+1)},e.prototype.getResolution=function(){return"W"+window.screen.availWidth+"H"+window.screen.availHeight},e.prototype.getCampusStatus=function(){var e="0";return"true"==this.jwtUtilService.getDecodedToken().onCampus&&(e="1"),e},e.prototype.getUserGroup=function(){if(!this.jwtUtilService.getDecodedToken())return"GUEST";var e=this.jwtUtilService.getDecodedToken().userGroup;return e||(e="GUEST"),e},e.prototype.getPercentOfContentBySource=function(e){e||(e=this.searchService.getResultObject().data);var t={};for(var n in e){var r=e[n].context;t[r]||(t[r]=0),t[r]+=1}return"TOT:"+e.length+";PR:"+(t.L/e.length*100||0).toFixed(2)+";PC:"+(t.PC/e.length*100||0).toFixed(2)+";EB:"+(t.Ebsco/e.length*100||0).toFixed(2)+";WC:"+(t.WorldCat/e.length*100||0).toFixed(2)+";OT:"+(this.getOtherContentBySource(e)/e.length*100||0).toFixed(2)},e.prototype.getOtherContentBySource=function(e){var t=0;for(var n in e){var r=e[n].context;j(r,"L")||j(r,"PC")||j(r,"v2v")||j(r,"Ebsco")||j(r,"WorldCat")||(t+=1)}return t},e.prototype.getCurrentSearchTab=function(){return window.appConfig["view-translations"][this.$translate.use()]["scopes.option."+this.searchFieldsService.scope]||""},e.prototype.getNumberOfResults=function(){return this.searchService.getResultObject().info.total},e.prototype.getBeaconSearchErrorMessage=function(){var e="";if(this.searchService){var t=this.searchService.getResultObject();t&&t.info&&(e=t.info.beaconSearchErrorMessage)}return e},e.prototype.getRecommendationCount=function(e){return this.searchService.getRecommendationCount(e)},e.prototype.getSearchTerm=function(){if(this.searchStateService.getSearchObject().query)return this.searchStateService.getSearchObject().query.replace(/[a-z]+,[a-z]+,/,"")},e.prototype.getViewItTimes=function(){return window.appPerformance.serverTimeLog.viewit?window.appPerformance.serverTimeLog.viewit:0},e.prototype.getPCTimes=function(){return window.appPerformance.serverTimeLog.pcDelivery?window.appPerformance.serverTimeLog.pcDelivery:0},e.prototype.getGetItTimes=function(){if(!window.appPerformance.serverTimeLog.PhysicalServiceIdCalc&&!window.appPerformance.serverTimeLog.getLocItems)return 0;if(window.appPerformance.serverTimeLog.getLocItems&&window.appPerformance.serverTimeLog.getLocItems==-1&&window.appPerformance.serverTimeLog.PhysicalServiceIdCalc&&window.appPerformance.serverTimeLog.PhysicalServiceIdCalc==-1)return-1;var e=(window.appPerformance.serverTimeLog.getLocItems&&window.appPerformance.serverTimeLog.getLocItems!==-1?parseInt(window.appPerformance.serverTimeLog.getLocItems):0)+(window.appPerformance.serverTimeLog.PhysicalServiceIdCalc&&window.appPerformance.serverTimeLog.PhysicalServiceIdCalc!==-1?parseInt(window.appPerformance.serverTimeLog.PhysicalServiceIdCalc):0);
return e},e.prototype.getAtozSearchTerm=function(){if(this.searchStateService.getSearchObject().journals||this.searchStateService.getSearchObject().databases){var e=this.searchStateService.getSearchObject().journals||this.searchStateService.getSearchObject().databases;return e.replace(/[a-z]+,/,"")}},e.prototype.getFieldSearched=function(){return this.searchStateService.getSearchObject().query.replace(/,.*/,"")},e.prototype.getFieldSearchedFromUrl=function(){return this.getParamFromQuery(0)},e.prototype.getSearchTermsFromUrl=function(){return this.getParamFromQuery(2)},e.prototype.getSearchTypeFromUrl=function(){return this.getParamFromQuery(1)},e.prototype.getParamFromQuery=function(e){var t=this.$stateParams.query;if(t){t=$([t]);var n=t.map(function(t){var n=t.split(",");return n[e]});return n}},e.prototype.getCollectionSearchTerm=function(){var e=this.$stateParams.query;return e&&(e=e.split(","),e.splice(0,2),e=e.join(",")),e},e.prototype.getSearchTab=function(){return this.$stateParams.tab},e.prototype.getCurrentJWTDigest=function(){var e=this.storageUtil.sessionStorage.getItem("primoExploreJwt");return e?p(e):"NO_SESSION"},e.prototype.getUserLoginStatus=function(){return this.userSessionManagerService.isGuest()?"0":"1"},e.prototype.getCurrentLang=function(){return this.$translate.use()},e.prototype.getSearchScope=function(){var e=this.searchFieldsService.scope;if(!e){var t=this.$stateParams.search_scope;t&&(e=t)}return e},e.prototype.getResourceTypePreFilter=function(){return"All items"},e.prototype.getResourceTypePreFilterFromUrl=function(){var e="All items",t=this.$stateParams.pfilter;return t&&(t=$([t]),t.forEach(function(t,n,r){var i=t.split(",");"pfilter"===i[0]&&(e=i[2])})),e},e.prototype.getTimestamp=function(){return(new Date).getTime()},e.prototype.doBeaconReport=function(e,t,n){this.getSearchService().isSearchInProgress()?this.doBeaconReportWaitForSearch(e,t,n):this.fullViewPageService.isGetItemInProgress()?this.doBeaconReportWaitForFullView(e,t,n):"refine"===e.p?this.doBeaconReportWaitForFacetSearch(e,t=t instanceof Array?this.getFacetAsObj(t):t,n):"sort"===e.p?this.doBeaconReportWaitForSearch(e,t,n):this._doBeaconReport(e,t,n)},e.prototype.doBeaconReportWaitForFacetSearch=function(e,t,n){var r=this,i=this.getScope().$watch(function(){return r.searchService.isSearchInProgress()},function(o,a){if(o===!1&&a===!0){var s=r.searchStateService.getSearchObject().facets;r._doBeaconReport(e,t||s[s.length-1],n,!0),i()}})},e.prototype.doBeaconReportWaitForSearch=function(e,t,n){var r=this,i=this.getScope().$watch(function(){return r.searchService.isSearchInProgress()},function(o,a){o===!1&&a===!0&&(r._doBeaconReport(e,t||r.searchStateService.getResultObject(),n,!0),i())})},e.prototype.doBeaconReportWaitForFullView=function(e,t,n){var r=this,i=this.getScope().$watch(function(){return r.fullViewPageService.isGetItemInProgress()},function(o,a){o===!1&&a===!0&&(r._doBeaconReport(e,t||r.fullViewPageService.currentItem,n),i())})},e.prototype._doBeaconReport=function(e,t,n,r){var a=this;if("N"!==window.appConfig["system-configuration"].GATHER_PAGE_STAT&&this.beaconBaseUrl&&!this.getBeaconSearchErrorMessage()){i(e)&&(e=JSON.parse(e)),e=o(e);var s=this.getParamsFromMapping(e,t),c=this.json2Urlparams(s,t),u=c.split("&"),l=/#/g;if(r&&u){var f=u.findIndex(function(e){return"O8"===e.split("=")[0]});if(f>-1){var p=u[f].replace(l,"%23");u[f]=p,c=u.join("&")}}var d=r?2e3:0;this.$timeout(function(){var e=D(window.appPerformance,"timeStamps['search result displayed']",void 0),t=D(window.appPerformance,"timeStamps['search api send']",void 0),i=D(window.appPerformance,"timeStamps['focusIn']",void 0),o=D(window.appPerformance,"serverTimeLog['BriefSearchDeltaTime']",void 0),s=D(window.appPerformance,"serverTimeLog['COMBINED_SEARCH_TIME']",void 0),u=o||s,l=document.hasFocus()||!1,f=r&&e&&t&&t>0&&e>t,p=e-t,h=(new Date).getTime(),m=h-n-d,g=f?p:m;(!l||i&&t&&i>t)&&(g=1,r&&u&&(g=u+400)),(!g||isNaN(g)||g<0)&&(g=1);var y=a.beaconBaseUrl+"?"+c+(n||r?"&T="+g:"")+"&ignore="+(new Date).getTime();a.placeImageOnPage(y)},d)}},e.prototype.placeImageOnPage=function(e){var t=document.createElement("img");t.src=e,t.style.display="none",document.getElementById("beaconPlaceHolder").appendChild(t)},e=s([d.Injectable(),u(1,d.Inject("$translate")),u(8,d.Inject("$rootScope")),u(9,d.Inject("$timeout")),u(11,d.Inject("$state")),u(13,d.Inject("$stateParams")),c("design:paramtypes",["function"==typeof(t="undefined"!=typeof m.SearchFieldsService&&m.SearchFieldsService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof g.UserSessionManagerService&&g.UserSessionManagerService)&&n||Object,"function"==typeof(r="undefined"!=typeof y.SearchStateService&&y.SearchStateService)&&r||Object,"function"==typeof(f="undefined"!=typeof v.SearchService&&v.SearchService)&&f||Object,"function"==typeof(k="undefined"!=typeof I.CollectionDiscoveryService&&I.CollectionDiscoveryService)&&k||Object,"function"==typeof(M="undefined"!=typeof R.NewspapersService&&R.NewspapersService)&&M||Object,"function"==typeof(x="undefined"!=typeof P.FullViewLinksService&&P.FullViewLinksService)&&x||Object,Object,Object,"function"==typeof(F="undefined"!=typeof b.FullViewPageService&&b.FullViewPageService)&&F||Object,Object,"function"==typeof(U="undefined"!=typeof S.JwtUtilService&&S.JwtUtilService)&&U||Object,Object,"function"==typeof(B="undefined"!=typeof _.ConfigurationUtil&&_.ConfigurationUtil)&&B||Object,"function"==typeof(N="undefined"!=typeof O.BrowseResultService&&O.BrowseResultService)&&N||Object,"function"==typeof(q="undefined"!=typeof T.BrowseSearchBarService&&T.BrowseSearchBarService)&&q||Object,"function"==typeof(H="undefined"!=typeof E.StorageUtil&&E.StorageUtil)&&H||Object])],e);var t,n,r,f,k,M,x,F,U,B,N,q,H}();t.PrimolyticsService=k,t.beacon=r,t.isJson=i,t.normalizeJson2UpperCase=o,t.urlContainsParams=a,t.default=[f]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(0),c=n(17),u="primoExploreJwt",l=function(){function e(e,t){this.jwtHelper=e,this.storageUtil=t,this.backFromLoginIframe=!1}return e.prototype.isTokenExpired=function(e){return this.jwtHelper.isTokenExpired(e)},e.prototype.getDecodedToken=function(){if(!a){var e=this.getJwtFromLocalStorage();if(!e)return{};try{a=this.jwtHelper.decodeToken(e)}catch(e){return this.removeJwt(),{}}}return a},e.prototype.storeJwt=function(e){this.storageUtil.sessionStorage.setItem(u,e),a=""},e.prototype.getJwtFromLocalStorage=function(){var e=this.storageUtil.sessionStorage.getItem(u);return e},e.prototype.removeJwt=function(){this.storageUtil.sessionStorage.removeItem(u),a=""},e.prototype.getPdsHandle=function(){var e=this.getDecodedToken();return e.jti||""},e.prototype.getInstitutionCode=function(){var e=this.getDecodedToken();return e.institution||""},e.prototype.decodeJWT=function(e){return this.jwtHelper.decodeToken(e)},e=r([s.Injectable(),o(0,s.Inject("jwtHelper")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.StorageUtil&&c.StorageUtil)&&t||Object])],e);var t}();t.JwtUtilService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$mdMedia=e}return Object.defineProperty(e.prototype,"xs",{get:function(){return this.$mdMedia("xs")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtxs",{get:function(){return this.$mdMedia("gt-xs")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sm",{get:function(){return this.$mdMedia("sm")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtsm",{get:function(){return this.$mdMedia("gt-sm")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"md",{get:function(){return this.$mdMedia("md")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtmd",{get:function(){return this.$mdMedia("gt-md")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lg",{get:function(){return this.$mdMedia("lg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lgPlus",{get:function(){return this.$mdMedia("(min-width: 1600px) and (max-width: 1919px)")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtlg",{get:function(){return this.$mdMedia("gt-lg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xl",{get:function(){return this.$mdMedia("xl")},enumerable:!0,configurable:!0}),e.prototype.createDynamicClass=function(){var e="__",t="__gt-";return this.xs?e+"xs":this.sm?e+"sm "+t+"xs":this.md?e+"md "+t+"xs "+t+"sm":this.lgPlus?e+"lgPlus "+t+"xs "+t+"sm "+t+"md":this.lg?e+"lg "+t+"xs "+t+"sm "+t+"md":this.xl?e+"xl "+t+"xs "+t+"sm "+t+"md "+t+"lg":""},e=r([a.Injectable(),o(0,a.Inject("$mdMedia")),i("design:paramtypes",[Object])],e)}();t.MediaQueries=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(305),s=function(){function e(){this.cachedTableNames={AUTO_COMPLETE_CONFIG:"Auto Complete Configuration",HOLDINGS_RECORD_CONFIG:"Holdings Record Configuration",BROWSE_LISTS:"Browse Lists",SORT_FIELDS_CONFIG:"sort_fields_config",CITATION_STYLES:"Citation styles",CITATION_STYLE_LANGUAGE:"Citation Style Language",PERSONAL_SETTING_FIELDS:"Personal Setting Fields",LOANS_BRIEF_DISPLAY:"Loans Brief Display",REQUESTS_BRIEF_DISPLAY:"Requests Brief Display",FINES_BRIEF_DISPLAY:"Fines Brief Display",AUTHENTICATION_SERVICE:"Authentication Service",LOANS_DETAILED_DISPLAY:"Loans Detailed Display",MAIN_MENU_URLS_FOR_THE_NEW_UI:"Main Menu URLs for the New UI",LOCATION_ITEM_CONTENT:"Location Item content",ITEMS_BRIEF_DISPLAY:"Items Brief Display",GENERAL_CONF:"General Configuration",HOLD_OPTIONAL_REQUEST_PARAMETERS:"Hold Optional Request Parameters",PHOTOCOPY_OPTIONAL_REQUEST_PARAMETERS:"Photocopy Optional Request Parameters",CALL_SLIP_OPTIONAL_REQUEST_PARAMETERS:"CallSlip Optional Request Parameters",UBREQUEST_OPTIONAL_REQUEST_PARAMETERS:"UBRequest Optional Request Parameters",RECALL_OPTIONAL_REQUEST_PARAMETERS:"Recall Optional Request Parameters",ILL_OPTIONAL_REQUEST_PARAMETERS:"ILL Optional Request Parameters",UB_OPTIONAL_REQUEST_PARAMETERS:"UBRequest Optional Request Parameters",DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS:"Digitization Optional Request Parameters",RESOURCE_SHARING_REQUEST_PARAMETERS:"Resource Sharing Request Parameters",HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS:"Request (Hold and Booking) Optional Parameters",PURCHASE_REQUEST_OPTIONAL_PARAMETERS:"Purchase Request Optional Parameters",EXPORT_RIS_ENCODINGS:"Export RIS encodings",BULK_DEFINITION:"Bulk Definition",INSTITUTIONS_BASE_URLS:"Institution Base URLs",CITATION_LINKER_DEFINITIONS:"Citation Linker Definitions",HYPERTEXT_LINKING_DEFINITIONS:"Hypertext Linking Definitions",FIELD_CHAINS_DISPLAY:"Field chains display",PERSONALIZE_YOUR_RESULTS_DISCIPLINES_FIELDS:"Personalize Your Results Disciplines Fields",ALMA_VIEWIT_CONFIG:"Alma ViewIt Config",FEATURED_NEWSPAPERS:"Featured newspapers",RELATED_ITEMS:"Related Items",VOICE_SEARCH_LANGUAGES:"Voice Search Languages",VOICE_SEARCH_LANGUAGES_ACTIVATION:"Voice Search Languages Activation",VIEW_PROPERTIES:"View Properties"},this.MAPPING_TABLES_CACHE=this.getMappingTablesCache()}return e.prototype.getTable=function(e){var t=this.MAPPING_TABLES_CACHE[e];return t||[]},e.prototype.getTargetValue=function(e,t,n){void 0===n&&(n="");var r=this.findByProperties(e,t);if(r&&r.length>0){var i=r[0]||{target:n};return i.target}return n},e.prototype.findByProperties=function(e,t){var n=this.getTable(e)||[];return n.filter(this.filterByProperties(t))},Object.defineProperty(e.prototype,"tables",{get:function(){return this.cachedTableNames},enumerable:!0,configurable:!0}),e.prototype.getMappingTablesCache=function(){return window.appConfig["mapping-tables"]},e.prototype.filterByProperties=function(e){return function(t){return a(t,e)}},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.MappingTablesCache=s},function(e,t,n){"use strict";function r(){return A}var i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(175),f=n(1),p=n(1),d=n(7),h=n(21),m=n(1),g=n(1),y=n(1),v=n(222),b=n(4),S=n(22),_=n(226),O=n(37),T="",E=n(92),w=n(17),I=n(9),R=n(28),P=n(137),j=n(315);t.UNION_CATALOG_FAVORITE_STORAGE_KEY="union catalog favorites from iz view";var A,C=n(98).Subject;t.bootstrapJwt=r;var $=function(){function e(e,t,n,r,i,o,a,s,c,u,l,d,h,g,y,v,b,S,_,O,T,E){this.jwtUtilService=e,this.restUtils=t,this.sessionTimeoutService=n,this.$http=r,this.$location=i,this.$q=o,this.$rootScope=a,this.$state=s,this.$window=c,this.i18nService=u,this.restBaseURLs=l,this.$stateParams=d,this.searchStateService=h,this.sharedSessionStorage=g,this.uuidGenerator=y,this.journalsService=v,this.personalizationDialogService=b,this.storageUtil=S,this.databasesService=_,this.mappingTablesCache=O,this.silentLoginService=T,this.timeoutToastService=E,this.inst=f.getInstitutionCode(),this.userInstitution=f.getInstitutionCode(),this.attributesMap=f.getAttributesMap(),this.authenticationMethods=f.getAuthenticationMethods(),this.sessionStorageKeys=["stickyFacets"],this.vid=p.getVid(),this.urlContext=m.getUrlContext(),this.uuid=this.uuidGenerator.generateUUID(),this.userSettingsUrl=l.userSettingsBaseURL,this.userDetailsDeferred=this.$q.defer(),this.signInObservable=new C}return e.prototype.isGuest=function(e){var t,n=this.getUserName(e);return t=!n},e.prototype.getUserName=function(e){var t,n=e?this.jwtUtilService.decodeJWT(e):this.jwtUtilService.getDecodedToken();return t="GUEST"!==n.userGroup?n.userName:""},e.prototype.getUserNameForDisplay=function(){var e,t=this.jwtUtilService.getDecodedToken();return e="GUEST"!==t.userGroup?t.displayName?t.displayName:t.userName:""},e.prototype.getUserLanguage=function(){return this.i18nService.getLanguage()},e.prototype.createOrGetUserArea=function(e){var t,n=this;return this.areaName=e,this.storageUtil.$localForage.getItem(this.areaName).then(function(e){return e?t=e:n.isUnionCatalogLogin()?n.copyFavoritesFromUnionCatalogNZView():(n.storageUtil.$localForage.setItem(n.areaName,[]),[])}).then(function(e){return e?e:[]})},e.prototype.copyFavoritesFromUnionCatalogNZView=function(){try{var e=this.storageUtil.sessionStorage.getItem(t.UNION_CATALOG_FAVORITE_STORAGE_KEY);if(e){var n=JSON.parse(e);return this.storageUtil.$localForage.setItem(this.areaName,n),n}return this.storageUtil.$localForage.setItem(this.areaName,[]),[]}catch(e){return console.log("Error while copying favorites from union catalog NZ view. Initializing empty favorites"),console.log("Error",e.stack),console.log("Error",e.name),console.log("Error",e.message),this.storageUtil.$localForage.setItem(this.areaName,[]),[]}},e.prototype.getGuestJwt=function(){var e=this,t=this.$location.search().lang,n={targetUrl:encodeURIComponent(this.$location.absUrl()),viewId:this.vid,isGuest:this.isGuest(),lang:t?t:this.attributesMap.interfaceLanguage},r="/primo_library/libweb/webservices/rest/v1/guestJwt/"+this.inst;"suprima"===f.getBackendSystem()&&(r="/primaws/rest/pub/institution/"+this.inst+"/guestJwt");var i={url:r,skipAuthorization:!0,method:"GET",params:n};return A=this.$http(i).then(function(t){return e.guestJwtResponseHandler(t)})},e.prototype.guestJwtResponseHandler=function(e){var t=e.data;if(t.includes("http")&&"SAML"!==this.getAuthenticationSystem()&&"PDS"!==this.getAuthenticationSystem())return this.$window.location.assign(t),t;var n=this.getJwt();return t=t||T||n},e.prototype.getJwt=function(){return this.jwtUtilService.getJwtFromLocalStorage()},e.prototype.syncJwtWithTabs=function(e){this.storageUtil.localStorage.setItem("tempJWT",JSON.stringify({jwt:e,uuid:this.uuid,vid:p.getVid()}))},e.prototype.login=function(e){var t=this,n=this.isGuest(e);!this.$location.absUrl().includes("performLogout=true")&&n||(this.syncJwtWithTabs(e),this.storageUtil.localStorage.removeItem("tempJWT")),!this.isGuest()&&n&&this.isJWTValidForApp(this.getJwt())||this.jwtUtilService.storeJwt(e);var r=this.getInterfaceLanguage();this.i18nService.setLanguage(r).then(function(){var e=t.getUserInstitutionCode();if(t.userInstitution!==e){t.userInstitution=e;var r="/primo_library/libweb/webservices/rest/v1/configuration/";"suprima"===f.getBackendSystem()&&(r="/primaws/rest/pub/configuration/vid/");var i=window.location.protocol+"//"+window.location.host+r+t.vid+"?institution="+e;t.$http.get(i).then(function(e){window.appConfig=e.data,window.appConfig.vid=t.vid})}t.updateUserDetailsInForage(),t.sessionTimeoutService.startSession(n)})},e.prototype.getInterfaceLanguage=function(){var e=this.attributesMap.interfaceLanguage;return this.isGuest()&&this.$stateParams.lang&&(e=this.$stateParams.lang),!this.isGuest()&&this.jwtUtilService.getDecodedToken().language&&(e=this.jwtUtilService.getDecodedToken().language),e},e.prototype.getUserInstitutionCode=function(){return this.jwtUtilService.getDecodedToken().institution},e.prototype.logout=function(e){var t=this;this.personalizationDialogService.resetPersonalization();for(var n=0,r=this.sessionStorageKeys;n<r.length;n++){var i=r[n];this.sharedSessionStorage.removeItem(i)}e&&this.sessionTimeoutService.startSession(!0),this.i18nService.setLanguage(this.attributesMap.interfaceLanguage).then(function(){var n=!0;("servicesPage"===t.$state.current.name||"suprima"===f.getBackendSystem()&&t.journalsService.isJournalSearch())&&(n=!1),t.isGuest()&&!t.isLoggedInIDP()||e&&"suprima"===f.getBackendSystem()&&!f.isEnableSingleLogout()?(n=n&&!e,t.guestLogout(n)):t.userLogout(e,n)})},e.prototype.isLoggedInIDP=function(){return!(!this.sharedSessionStorage.getItem("loggedInIDP")||"true"!==this.sharedSessionStorage.getItem("loggedInIDP")||!this.sharedSessionStorage.getItem("authenticationProfile"))},e.prototype.runStartupCode=function(){var e=this;this.prevTabDeeplink=window.location.href;var t=this.getJwt();t&&!this.isGuest(t)||this.storageUtil.localStorage.setItem("getJWTFromSessionStorage",this.uuid);var n=function(t){if(t||(t=window.event),t.newValue&&t.newValue!==e.uuid)if("getJWTFromSessionStorage"===t.key&&e.getJwt())e.storageUtil.localStorage.setItem("tempJWT",JSON.stringify({jwt:e.getJwt(),uuid:e.uuid,vid:p.getVid()})),e.storageUtil.localStorage.removeItem("tempJWT");else if("tempJWT"===t.key){var n=JSON.parse(t.newValue);n&&n.uuid!==e.uuid&&n.vid===p.getVid()&&n.jwt!==T&&n.jwt!==e.getJwt()&&e.isGuest()&&!e.isGuest(n.jwt)&&(T=n.jwt,e.jwtUtilService.storeJwt(n.jwt),console.log(e.prevTabDeeplink),e.prevTabDeeplink=e.prevTabDeeplink.replace(/(loginId=.*?)(&|(\%26)|$)/i,""),console.log("location assign:"+e.prevTabDeeplink),"login"===e.$state.current.name?window.location.assign(e.prevTabDeeplink):(e.signInObservable.next(),e.$state.reload()))}else if("logout"===t.key){var n=JSON.parse(t.newValue);n&&n.uuid!==e.uuid&&n.vid===p.getVid()&&(e.jwtUtilService.removeJwt(),n.jwt&&e.jwtUtilService.storeJwt(n.jwt),e.cleanURL(),e.$rootScope.$apply())}};window.addEventListener?window.addEventListener("storage",n,!1):window.attachEvent("onstorage",n),this.$location.absUrl().includes("performLogout=true")&&(this.$location.search("performLogout",null),this.$location.search("amp;performLogout",null)),this.$location.absUrl().includes("timeout=true")&&(this.$location.search("timeout",null),this.$location.search("amp;timeout",null),this.isGuest()&&this.timeoutToastService.showTimeoutLogoutToast())},e.prototype.performLocalLogout=function(e){var t=this;this.local_logout().then(function(){return t.goToHomepage(e)},function(){return t.goToHomepage(e)})},e.prototype.updateUserArea=function(e){if(!this.area)throw"trying to update user area without creating it";var t=this.area;return t.unshift(e),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.removeRecordFromFavorites=function(e){var t=this.area;return t.splice(e,1),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.extendUserArea=function(e){var t=this.area;return this.area=t.concat(e),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.removeArrayOfRecords=function(e){for(var t=0;t<this.area.length;t++){var n=this.returnRecordId(this.area[t]);if(E(e,n)){var r=this.area;r.splice(t,1),t-=1}}return this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.returnRecordId=function(e){return this.isGuest()?e.pnx.control.recordid[0]:e},e.prototype.getAuthenticationMethodForSSO=function(){return this.authenticationMethods[0].profileName},e.prototype.getAuthenticationSystem=function(){return this.authenticationMethods[0].authenticationSystem},e.prototype.guestLogout=function(e){var t=this;return this.local_logout().then(function(){e?t.$window.location.assign(t.getHomePage()):t.$window.location.reload()})},e.prototype.userLogout=function(e,t){var n=this;this.remoteLogout(e).then(function(r){n.local_logout().then(function(){if(r)t&&(r=n.setTargetUrl(r,n.getHomePage(),e)),r=n.addFlagOfLogout(r),n.$window.location.assign(r);else if(t)n.goToHomepage(!0,e);else{var i=n.$window.location.href;i=e?i+"&timeout=true":i,n.$window.location.reload()}},function(t){console.log("local logout failed: "+t),n.goToHomepage(!0,e)})},function(t){console.log("Failed getting redirectUrl: "+t),n.goToHomepage(!0,e)})},e.prototype.addFlagOfLogout=function(e){var t=this.jwtUtilService.getDecodedToken().authenticationProfile,n=t?g.isRedirectOnlyForAuthName(t):"false";return(t&&!y.isSaml(t)||y.isSaml(t)&&"false"===n)&&(e+="%26performLogout=true"),e},e.prototype.setTargetUrl=function(e,t,n){t="suprima"!==f.getBackendSystem()||e.indexOf("service=")==-1&&e.indexOf("service%3D")==-1?n?t+"%26timeout=true":t:n?t+"&timeout=true":t,e=e.replace(/(\&|\%26)url(\=|\%3D).*/i,"&url="+t);var r="";return"suprima"===f.getBackendSystem()&&e.indexOf("RelayState")!=-1&&e.indexOf("@@",e.indexOf("RelayState"))!=-1&&(r=e.toString().substring(e.indexOf("@@",e.indexOf("RelayState")),e.length)),e=e.replace(/(\&|\%26)RelayState(\=|\%3D).*/i,"&RelayState="+t+r),e=e.replace(/(\?|\%3F)service(\=|\%3D).*/i,"?service="+encodeURIComponent(t))},e.prototype.goToHomepage=function(e,t){e&&(this.searchStateService.setSearchObject({}),this.searchStateService.setResultObject({}));var n=this.getHomePage();if(n=t?n+"&timeout=true":n,"delivery"===this.$state.current.name||"canonDelivery"===this.$state.current.name||"cnameDelivery"===this.$state.current.name){var r=encodeURIComponent(this.$window.location.pathname+this.$window.location.search);n="/services/login?institute="+this.inst+"&backUrlDel="+r}this.$window.location.assign(n)},e.prototype.getHomePage=function(){return"suprima"===f.getBackendSystem()&&this.attributesMap.sessionTimeoutURL?this.attributesMap.sessionTimeoutURL:this.$state.href(b.STATE_NAMES.SEARCH,{vid:this.vid},{inherit:!1,absolute:!0})},e.prototype.remoteLogout=function(e){this.cleanURL();var t={sessionTimeout:"false",targetURL:encodeURIComponent(this.$location.absUrl())};e&&(t.sessionTimeout="true"),this.isLoggedInIDP()&&(t.authenticationProfile=this.sharedSessionStorage.getItem("authenticationProfile"),this.sharedSessionStorage.removeItem("loggedInIDP"),this.sharedSessionStorage.removeItem("authenticationProfile"));var n="/primo_library/libweb/primoExploreLogout";return"suprima"===f.getBackendSystem()&&(n="/primaws/suprimaLogout"),this.restUtils.postToServlet(n,t).then(function(e){var t=e.data.redirect;return t})},e.prototype.cleanURL=function(){this.$location.search().authenticationError&&this.$location.search("authenticationError",null),this.$location.search().authenticationProfile&&this.$location.search("authenticationProfile",null),this.$location.search()["from-new-ui"]&&this.$location.search("from-new-ui",null)},e.prototype.getGuestJwtWithTimeout=function(e){var t=this;return this.$q(function(n,r){setTimeout(function(){r()},e),t.getGuestJwt().then(function(e){n(e)})})},e.prototype.local_logout=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getGuestJwtWithTimeout(4e3)];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),console.error("get guest jwt failed or timed out"),[3,3];case 3:return this.storageUtil.localStorage.setItem("logout",JSON.stringify({uuid:this.uuid,vid:p.getVid(),jwt:e})),this.storageUtil.localStorage.removeItem("logout"),this.jwtUtilService.removeJwt(),e&&this.jwtUtilService.storeJwt(e),[2,this.storageUtil.$localForage.clear()]}})})},e.prototype.updateUserDetailsInForage=function(){var e=this,t=this.userSettingsUrl+"?vid="+this.vid,n=this.$http({method:"GET",url:t});n.then(function(t){e.userDetailsDeferred.resolve(t),e.storageUtil.$localForage.setItem("userDetails",t.data)})},e.prototype.isJWTValidForApp=function(e){if(!e)return console.log("no jwt so invalid"),!1;console.log(e);var t=this.jwtUtilService.decodeJWT(e),n=t.viewId,r=p.getVid(),i=f.getInstitutionCode(),o=t.institution;return!(n!==r&&(this.isGuest()||!this.isViewCentral(r)&&o!==i))},e.prototype.isViewCentral=function(e){var t=this.mappingTablesCache.findByProperties("Central View Configuration",{source1:"Keep users signed-in when switching to or from view",source2:"true",target:e});return t&&t.length>0},e.prototype.isUnionCatalogLogin=function(){return void 0!=this.$stateParams.unionCatalogNZVid},e=i([u.Injectable(),a(2,u.Inject("SessionTimeoutService")),a(3,u.Inject("$http")),a(4,u.Inject("$location")),a(5,u.Inject("$q")),a(6,u.Inject("$rootScope")),a(7,u.Inject("$state")),a(8,u.Inject("$window")),a(9,u.Inject("I18nService")),a(10,u.Inject("restBaseURLs")),a(11,u.Inject("$stateParams")),o("design:paramtypes",["function"==typeof(n="undefined"!=typeof d.JwtUtilService&&d.JwtUtilService)&&n||Object,"function"==typeof(r="undefined"!=typeof l.RestUtils&&l.RestUtils)&&r||Object,Object,Object,Object,Object,Object,Object,Object,Object,Object,Object,"function"==typeof($="undefined"!=typeof h.SearchStateService&&h.SearchStateService)&&$||Object,"function"==typeof(D="undefined"!=typeof O.SharedSessionStorage&&O.SharedSessionStorage)&&D||Object,"function"==typeof(L="undefined"!=typeof v.UUIDGenerator&&v.UUIDGenerator)&&L||Object,"function"==typeof(k="undefined"!=typeof S.JournalsService&&S.JournalsService)&&k||Object,"function"==typeof(M="undefined"!=typeof _.PersonalizationDialogService&&_.PersonalizationDialogService)&&M||Object,"function"==typeof(x="undefined"!=typeof w.StorageUtil&&w.StorageUtil)&&x||Object,"function"==typeof(F="undefined"!=typeof R.DatabasesService&&R.DatabasesService)&&F||Object,"function"==typeof(U="undefined"!=typeof I.MappingTablesCache&&I.MappingTablesCache)&&U||Object,"function"==typeof(B="undefined"!=typeof P.SilentLoginService&&P.SilentLoginService)&&B||Object,"function"==typeof(N="undefined"!=typeof j.TimeoutToastService&&j.TimeoutToastService)&&N||Object])],e);var n,r,$,D,L,k,M,x,F,U,B,N}();t.UserSessionManagerService=$},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];
return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(194),u=n(54),l=n(55),f=n(326),p=n(178),d=n(21),h=n(2),m=n(179),g=n(1),y=n(30),v=n(7),b=n(104),S=n(14),_=n(1),O=n(0),T=n(228),E=n(328),w=n(4),I=n(175),R=n(49),P=n(10),j=n(95),A=n(197),C=n(152),$=n(79),D=n(22),L=n(28),k=n(230),M=n(16),x=n(180),F=n(196),U=n(24),B=(n(18),n(116),n(77)),N=n(332),q=n(227),H=(n(65),n(3)),V=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,v,b,S,O,T,E,w,I,R,P,j,A,C,$,D,L,k,M,x,F,U){this.$http=e,this.cheetah=t,this.$stateParams=n,this.restBaseURLs=r,this.searchHistoryService=i,this.searchResultParser=o,this.searchStateService=a,this.timesCitedService=s,this.facetService=c,this.limit=u,this.imagesBarLimit=l,this.configurationUtil=f,this.searchUtil=p,this.$state=d,this.$location=h,this.searchBar=m,this.searchFieldsService=v,this.searchErrorMessageService=b,this.jwtUtilService=S,this.alertService=O,this.rtaService=T,this.databasesService=E,this.resourceRecommender=w,this.snippetService=I,this.highlightsService=R,this.restUtils=P,this.$httpParamSerializer=j,this.userSessionManagerService=A,this.recordUtil=C,this.filterInstitution=$,this.$translate=D,this.journalsService=L,this.$rootScope=k,this.newspapersService=M,this.$q=x,this.$timeout=F,this.translationService=U,this.searchDone=!1,this.locationsTileConfiguration=g.getLocationsConfiguration(),this._showMobileFacets=!0,this.vid=_.getVid(),this.needToRender=!0,this.reloadSearch=!1,this.limit=u,this.imagesBarLimit=l,this.query="",this.cameFromState="",this.isFacetExact=!1,this._signInAlert=this.alertService.create(y.ALERT_MSG_TYPE.SIGNIN),this._browseGapAlert=this.alertService.create(y.ALERT_MSG_TYPE.BROWSE_GAP),this._afterRedirectAlert=this.alertService.create(y.ALERT_MSG_TYPE.SIMPLE),this.showAfterRedirectAlert(),this.blendFacetsSeparatelyConf=g.getBlendFacetsSeparatelyConfig()}return Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseGapAlert",{get:function(){return this._browseGapAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterRedirectAlert",{get:function(){return this._afterRedirectAlert},enumerable:!0,configurable:!0}),e.prototype.showAfterRedirectAlert=function(){this.afterRedirectAlert.show("nui.message.fromredirect",!1)},e.prototype.hasBrowseGap=function(){var e=this.getResultObject();return void 0!=e&&void 0!=e.info&&void 0!=e.info.browseGap},e.prototype.resetSearchDone=function(){this.searchDone=!1},e.prototype.isSearchDone=function(){return this.searchDone},e.prototype.getItemAtIndex=function(e){var t=this.searchStateService.getItemAtIndex(e);return t?t:void(this.searchStateService.isSearchInProgress()||this.nextResults())},e.prototype.getRecommendationCount=function(e){return this.resourceRecommender.getRecommendationCount(e)},e.prototype.resetResultObject=function(){this.searchStateService.resetResultObject()},e.prototype.parseSearchResponse=function(e,t){void 0===t&&(t=!1);var n=this.searchResultParser.parseSearchResponse(e);this.needToRender?this.searchStateService.setResultObject(n,t):this.searchStateService.setTempResultList(n.groups),1!==H(this.getSearchObject(),"getMore","")&&this.handleMetaLibMoreStatus(!0),this.needToRender?this.facetService.setResult(this.getResultObject().facets):this.facetService.setResult(n.facetsList)},e.prototype.performCitationTrailsSearch=function(e){var t=this.searchStateService.getSearchObject();return t.offset=0,t.facets=this.getFacetsFromUrl([e],!1),this.searchStateService.resetResultObject(),this.search(t,!0)},e.prototype.performChaptersSearch=function(e){var t=this.searchStateService.getSearchObject();return t.offset=0,t.facets=this.getFacetsFromUrl(e,!0),t.isRelatedItems=!0,this.searchStateService.resetResultObject(),this.search(t,!0)},e.prototype.search=function(e,t){return e.sortby=this.setSortBy(e),e.getMore=e.getMore||0,t?this.searchStateService.setSearchObject(e):this.searchStateService.updateSearchObject(e),1!==H(this.getSearchObject(),"getMore","")?this.getSearchObject().metalibMoreStatus={}:this.handleMetaLibMoreStatus(!1),this._search()},e.prototype.setSortBy=function(e){return e.journals&&"letter"===e.journals.split(",")[0]||e.databases&&"letter"===e.databases.split(",")[0]?"title":e.sortby||"rank"},e.prototype.handleMetaLibMoreStatus=function(e){var t=this,n=this.getResultObject(),r=H(n,"data","");r.map(function(n,r){var i=H(n,"pnx.ranking.booster2");if(i){t.getSearchObject().metalibMoreStatus||(t.getSearchObject().metalibMoreStatus={});var o=++i[0];e&&(t.getSearchObject().metalibMoreStatus={},o=0),t.getSearchObject().metalibMoreStatus[n.pnx.control.recordid[0]]=o}return n})},e.prototype.setMessages=function(e,t){var n=this.configurationUtil.getBriefResultConfiguration().groupmessage,r=this.configurationUtil.getBriefResultConfiguration().displaysigninmsg;r&&(0===n&&e||1===n&&t)&&this._signInAlert.show("nui.signin_message",!1)},e.prototype.restSignInAlertMessage=function(){this._signInAlert.show("",!1)},e.prototype.loadResults=function(e,t){void 0===t&&(t=!1),this.parseSearchResponse(e,t)},e.prototype.nextResults=function(e){var t=this;if(void 0===e&&(e=!1),this.needToGetNextResults())return this.searchStateService.nextBulk(),this.getSearchObject().getMore=0,this._search(e,!0).then(function(){if(e){var n=t.searchStateService.getSearchObject().offset;n!=t.$stateParams.offset&&t.updateOffsetInUrl(n)}})},e.prototype.updateOffsetInUrl=function(e){this.$location.search("offset",e)},e.prototype.jumpToPage=function(e){this.searchStateService.jumpToPage(e),this._search()},e.prototype.needToGetNextResults=function(){return this.searchStateService.hasNextBulk()},e.prototype.previousResults=function(){this.searchStateService.isNotFirstBulk()&&(this.searchStateService.previousBulk(),this._search())},e.prototype.getSearchObject=function(){return this.searchStateService.getSearchObject()},e.prototype.getResultObject=function(){return this.searchStateService.getResultObject()},e.prototype.selectItem=function(e){this.searchStateService.selectItem(e)},e.prototype.getSelectedItem=function(){return this.searchStateService.getSelectedItem()},e.prototype.addImagesResults=function(e){this.parseImagesSearchResponse(e)},e.prototype.parseImagesSearchResponse=function(e){var t=this.searchResultParser.parseImagesSearchResponse(e);this.searchStateService.addImagesToResultObject(t)},e.prototype.isSearchInProgress=function(){return this.searchStateService.isSearchInProgress()},e.prototype.getFrbrDisplay=function(){return this.configurationUtil.getBriefResultConfiguration().frbrdisplay},e.prototype.resetParameters=function(e){var t=this;void 0===e&&(e="");var n=this.getSearchObject()||{};this.getSearchObject().metalibMoreStatus={},this.$stateParams.offset?n.offset=parseInt(this.$stateParams.offset,10):n.offset=0,n.scope=this.searchUtil.urlParamScope||n.scope,n.tab=this.searchUtil.urlParamTab||n.tab,n.sortby=this.$stateParams.sortby,n.explain=this.$stateParams.explain,n.searchCDI=this.$stateParams.searchCDI;var r=this.getFacetsFromUrl(this.$stateParams.facet,!1);if(n.facets=r.concat(this.getFacetsFromUrl(this.$stateParams.mfacet,!0)),n.isRelatedItems=this.$stateParams.isRelatedItems,!(this.$state.current.name!==w.STATE_NAMES.SEARCH&&this.$state.current.name!==w.STATE_NAMES.NEWSPAPERS||"browse"===this.$stateParams.mode||this.journalsService.isJournalSearch()||this.databasesService.isDBSearch())){var i=this.facetService.getStickyFacets();if(i)for(var o=function(e){q(n.facets,function(n){return t.facetService.isFacetEqual(n,e)}),n.facets.unshift(e)},a=0,s=i;a<s.length;a++){var c=s[a];o(c)}}n.journals=this.$stateParams.journals,n.databases=this.$stateParams.databases,n.featuredNewspapersIssnList=this.$stateParams.issn,n.fromDate=this.$stateParams.fromDate,n.pcAvailability=this.calcPcAvailability()||n.pcAvailabilty,n.browseParams=this.$stateParams.browseParams,n.organization=this.$stateParams.organization,n.getMore=0;var u=this.$stateParams.query||n.query;Array.isArray(u)?(n.query=N(u,";"),"simple"===this.$stateParams.mode&&(n.query=u[0],this.updateQueryAfterSwitchingToSimpleMode(n))):(n.query=u,"simple"===this.$stateParams.mode&&this.updateQueryAfterSwitchingToSimpleMode(n));var l=this.$stateParams.mode;l&&"advanced"===l?(n.mode="advanced",this.searchFieldsService.advancedSearch=!0):this.searchFieldsService.advancedSearch=!1;var f=this.$stateParams.pfilter;if(f)if(Array.isArray(f)&&(f=N(f,";")),this.configurationUtil.isSuprima())f&&(n.query+=";"+f,this.updatePreFiltersQueryAfterSwitchingToSimpleMode(u,n));else{var p=f.replace("lang","facet_lang").replace("pfilter","facet_pfilter").replace("creationdate","facet_creationdate");p&&(n.query+=";"+p,this.updatePreFiltersQueryAfterSwitchingToSimpleMode(u,n))}if("false"===H(this,["$stateParams","conVoc"],!0)&&(n.noConVoc=!0),u)return this.search(n,!0)},e.prototype.updateQueryAfterSwitchingToSimpleMode=function(e){var t=e.query.toString().split(",");["AND","OR","NOT"].indexOf(t[t.length-1])>-1&&(t=t.slice(0,t.length-1),e.query=t.join(","))},e.prototype.updatePreFiltersQueryAfterSwitchingToSimpleMode=function(e,t){"simple"===this.$stateParams.mode&&(Array.isArray(e)?t.query=e[0]:t.query=e,this.updateQueryAfterSwitchingToSimpleMode(t))},e.prototype.getFacetsFromUrl=function(e,t){var n=this;if(!e)return[];var r=U([e]),i=r.map(function(e){var r=n.isCurrFacetLocked(e);r&&(e=n.removeLockedIndication(e));var i,o=e.split(",");t&&(i=o.pop());for(var c=3;c<o.length;c++)o[2]=o[2]+","+o[c];o[2]=B.decode(o[2]),o=o.slice(0,3);var u,l=n.facetService.displayedTypeFacet[o[0].replace("facet_","",1)]||"exact",f=n.filterInstitution.filterAndNormalizeDataFacets([{name:o[0],value:o[2]}]),p=o[2];f&&f.length>0&&(p=n.facetService.facetLabel(f[0]),u=f[0].displayValue);var d=n.facetService.getFacetLabelValue(o[0],o[2]);d&&(u=d);var h=n.configurationUtil.getFacetConfiguration().facetview,m=h.filter(function(e){return e.id===o[0]}),g=m.length>0&&m[0].useTranslations,y={name:o[0],type:o[1],value:o[2],displayValue:u,displayedType:l,label:"",multiFacetGroupId:i,isMultiFacet:t,tooltip:"",useTranslation:g,translationsPromise:void 0,isLocked:r};return y.translationsPromise=n.$q(function(e,t){return a(n,void 0,void 0,function(){var t,n,r,i,a;return s(this,function(s){switch(s.label){case 0:return[4,this.facetService.getFacetLabel(o[0],l,p)];case 1:return t=s.sent(),y.label=t,[4,this.$translate(t,[],"",t)];case 2:return n=s.sent(),y.label=n,r=this.$translate.instant("nui.facets.remove.tooltip"),"searchcreationdate"===o[0]&&(o[0]="creationdate"),i=this.$translate.instant("facets.facet.facet_"+o[0]),"suprima"===this.configurationUtil.getBackendSystem()&&o[0].startsWith("lds")&&(i=this.$translate.instant("fulldisplay."+o[0])),a="range"===this.facetService.displayedTypeFacet[y.name]?y.label:this.translationService.translateInstantWithDefault(this.facetService.facetLabel(y),this.facetService.getFacetDefaultValue(y)),y.tooltip="frbrgroupid"!==y.name?r+i+" "+a:r+i,e(y),[2]}})})}),y.isLocked&&n.facetService.addStickyFacet(y),y});return i},e.prototype.isCurrFacetLocked=function(e){return e&&e.endsWith(",lk")},e.prototype.removeLockedIndication=function(e){return e.replace(",lk","")},Object.defineProperty(e.prototype,"numOfLoadedResultBulks",{get:function(){return this.searchStateService.numOfLoadedResultBulks},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.resetParameters()},e.prototype.reloadSearchAfterSLI=function(){this.reloadSearch?(this.reloadSearch=!1,this.$state.reload()):this.reloadSearch=!0},e.prototype.preventSearchStateReload=function(){var e=this.$state.current;e.reloadOnSearch=!1},e.prototype._search=function(e,t){var n=this;this.preventSearchStateReload(),this.$rootScope.$on("silentLogin",function(){n.reloadSearchAfterSLI()}),this.searchDone=!0;var r=this.configurationUtil.isSuprima()&&!g.getPrimoVeSkipDelivery()?"N":"Y";this.searchStateService.setSkipDelivery(r);var i=this.getSearchObject();this.searchStateService.setSearchInProgress(!0),this.searchBar.setShowSignIn(!1);var o=this.getResultObject(),a=0|i.offset,s=this.blendFacetsSeparatelyConf&&this.cheetah.isScopeBlended(i.scope)&&0===a;i.blendFacetsSeparately=s,window.appPerformance.timeStamps["before search api"]=Date.now();var c=this.cheetah.performSearch(i,o.info,!0).then(function(t){if(n.configurationUtil.isSuprima()&&n.getFacetsRetry(t,i,o),s){var r=n.searchResultParser.parseSearchResponse(t.data).facetsList;t.data.facets=[],setTimeout(function(){i.blendFacetsSeparately=!1,n.cheetah.performSearch(i,o.info,!0,!0).then(function(e){var t=n.searchResultParser.parseSearchResponse(e.data);n.facetService.setResult(t.facetsList)},function(e){n.facetService.setResult(r)})},650)}if(n.configurationUtil.isSuprima()){if("Y"===n.searchStateService.getSkipDelivery()){var a=t.data.docs.map(function(e){return e.pnx.control.recordid[0]}).filter(function(e){return e.match(/^alma.*/)}).toString(),c=t.data.docs.map(function(e){return H(e,"pnx.control.rapidosourcerecordid")}).filter(function(e){return void 0!==e}).toString();if(a||c){if(g.isNgrsSearch(n.$stateParams))var u=n.restBaseURLs.openUrl+"/rapidoDelivery/"+g.getInstitutionCode()+"/"+n.vid,l=t.data.docs;else var u=n.restBaseURLs.deliveryURL+"?"+n.$httpParamSerializer(n.cheetah.searchData),l=a;n.$http.post(u,l).then(function(e){t.data.docs.forEach(function(t){var n=e.data.filter(function(e){return e.pnx.control.recordid[0].match(t.pnx.control.recordid)});n.length&&(t.delivery=n[0].delivery,t.enrichment=n[0].enrichment,n[0].pnx.display.crsinfo&&(t.pnx.display.crsinfo=n[0].pnx.display.crsinfo),n[0].pnx.display.dedupmemberids&&(t.pnx.display.dedupmemberids=n[0].pnx.display.dedupmemberids))})})}}}else{var f=n.restBaseURLs.pnxBaseURL+"/delivery?"+n.$httpParamSerializer(n.cheetah.searchData);n.$http.post(f,{records:t.data.docs}).then(function(e){var r=e.data;e.data.docs.forEach(function(n,i){t.data.docs[i].delivery=n.delivery,r.docs[i].context=t.data.docs[i].context,n["@rta_link"]&&e.data.docs[i]["@rta_link"]&&(t.data.docs[i]["@rta_link"]=e.data.docs[i]["@rta_link"],r.docs[i]["@rta_link"]=e.data.docs[i]["@rta_link"])});var i=r.timelog.FullEndDMDataDeltaTime;e.data.rtaResultsLink&&(t.data.rtaResultsLink=e.data.rtaResultsLink,r.rtaResultsLink=e.data.rtaResultsLink),window.appPerformance.serverTimeLog.FullEndDMDataDeltaTime=i,n.configurationUtil.getLocationsConfiguration()&&"none"!==n.configurationUtil.getLocationsConfiguration().rta&&n.rtaService.updateAvailability(r.docs)})}n.reloadSearch=!1,window.appPerformance.timeStamps["after search api"]=Date.now();var p=t.data;window.appPerformance.serverTimeLog=p.timelog;var d=n.$state.current;d.reloadOnSearch=!0,n.recordUtil.loadRecordsExtras(p.docs),n.$stateParams.journals||n.$stateParams.databases||n.$stateParams.browseScope||n.snippetService.updateSnippets(p.docs),n.loadResults(p,e),n.searchStateService.setSearchInProgress(!1),n.highlightsService.updateHighlights(p.highlights);var h="GUEST"===n.jwtUtilService.getDecodedToken().userGroup,m="true"!==n.jwtUtilService.getDecodedToken().onCampus;h&&n.setMessages(h,m),n._browseGapAlert.show("nui.browseGap_message",!1),n.afterRedirectAlert.hide(),A.updateZoteroPlugin()},function(e){var t=n.$state.current;t.reloadOnSearch=!0;var r=e.data;if(r){var i="Error code: "+(e.status?e.status:e.data.errorCode)+", Error message: "+e.data.errorMessage;i=i.substring(0,100);var o={docs:[],facets:[],info:{first:"1",last:"0",total:"0",beaconSearchErrorMessage:i,errorDetails:{errorCode:n.searchErrorMessageService.serverError}}};n.loadResults(o),n.searchStateService.setSearchInProgress(!1),"Not Authorized"===r.errorMessage&&(n.reloadSearchAfterSLI(),n.searchBar.setShowSignIn(!0),n._signInAlert.hide())}}).then(function(e){"browse"===n.$stateParams.mode||n.journalsService.isJournalSearch()||n.databasesService.isDBSearch()||n.newspapersService.isNewspapersSearch()||n.searchHistoryService.updateSearchHistory()});return c},e.prototype.IsScopeLocal=function(e){var t;return t=e?window.appConfig["scopes-context-map"][e]:"browse"===this.$stateParams.mode?"L":this.searchFieldsService.scope?window.appConfig["scopes-context-map"][this.searchFieldsService.scope]:"","L"===t},e.prototype.calcPcAvailability=function(){if(this.$state.current.name===w.STATE_NAMES.CITATION_TRAILS)return!0;if(this.$state.current.name===w.STATE_NAMES.NEWSPAPERS){var e=!!this.$stateParams.pcAvailability&&this.$stateParams.pcAvailability;return e}return this.$stateParams.pcAvailability||!this.facetService.showPcAvailabilityForScope(this.$stateParams.search_scope)},e.prototype.updatePageTitle=function(){var e=this.searchFieldsService.mainSearch;try{this.$translate(["nui.brief.title"],{query:e}).then(function(e){var t=document.getElementById("primoExploreTitle");t.innerHTML=e["nui.brief.title"],t.innerHTML=t.innerHTML.replace(/\s*\-\s*$/,"")})}catch(e){console.log("translation of 'nui.brief.title' is corrupt")}},e.prototype.updatePageTitleFullView=function(e,t){var n=this;try{this.$translate(t).then(function(t){var r={recordTitle:e,institutionName:t};n.$translate(["nui.full.display.title"],r).then(function(e){var t=document.getElementById("primoExploreTitle");t.innerHTML=e["nui.full.display.title"],t.innerHTML=t.innerHTML.replace(/\s*\-\s*$/,"")})})}catch(e){console.log("translation of 'nui.brief.title' is corrupt")}},e.prototype.updatePageTitleResearch=function(){var e=this;try{var t=g.getInstitutionCode();this.$translate(t).then(function(t){var n={institutionName:t};e.$translate(["nui.brief.title.research"],n).then(function(e){var t=document.getElementById("primoExploreTitle");t.innerHTML=e["nui.brief.title.research"],t.innerHTML=t.innerHTML.replace(/\s*\-\s*$/,"")})})}catch(e){console.log("translation of 'nui.brief.title.research' is corrupt")}},e.prototype.updateCanonicalFullDisplayResearch=function(){try{var e=document.getElementById("canonicalFullDisplay");e.href=window.location.href}catch(e){console.log("Not exists meta element canonicalFullDisplay in index")}},e.prototype.updatePageDescriptionResearch=function(){var e=this;try{var t=g.getInstitutionCode();this.$translate(t).then(function(t){var n={institutionName:t};e.$translate(["nui.brief.description.research"],n).then(function(e){var t=document.getElementsByName("description")[0];t.content=e["nui.brief.description.research"]})})}catch(e){console.log("translation of 'nui.brief.description.research' is corrupt")}},e.prototype.updatePageDescriptionFullView=function(e){try{var t=document.getElementsByName("description")[0];t.content=e}catch(e){console.log("Not exists meta element description in index")}},e.prototype.clearPageTitle=function(){var e=document.getElementById("primoExploreTitle");e.innerHTML=""},e.prototype.clearPageDescription=function(){this.updatePageDescriptionFullView("")},e.prototype.updatePageKeywordsFullView=function(e){try{var t=document.getElementsByName("keywords")[0];t.content=e}catch(e){console.log("Not exists meta element keywords in index")}},e.prototype.getRecordId=function(e){var t=e.recordid[0];if(t.startsWith("dedupmrg")||t.startsWith("TN_dedupmrg")){var n=e.sourcerecordid[0],r=n.indexOf("$$O");return r!==-1&&(n=n.substring(r+3)),n}return t},e.prototype.getRestToSDOType=function(e){switch(e){case"article":return"Article";case"audio":return"CreativeWork";case"book":return"Book";case"bookChapter":return"Chapter";case"collection":return"CreativeWork";case"conference_proceeding":return"Article";case"database":return"CreativeWork";case"dissertation":return"Thesis";case"GovernmentDocument":return"Book";case"image":return"Photograph";case"journal":return"Periodical";case"kit":return"CreativeWork";case"LegalDocument":return"Book";case"manuscript":return"Book";case"map":return"Map";case"newspaper":return"Periodical";case"NewspaperArticle":return"NewsArticle";case"other":return"CreativeWork";case"ReferenceEntry":return"CreativeWork";case"ResearchDataset":return"Dataset";case"Review":return"Review";case"score":return"CreativeWork";case"StatisticalDataSet":return"CreativeWork";case"TechnicalReport":return"Report";case"text_resource":return"CreativeWork";case"video":return"Movie";case"website":return"WebSite";case"print_book":return"Book";case"book_chapter":return"Chapter";case"report":return"Report";case"journal_article":return"Article";case"Conference-Paper":return"Article"}},e.prototype.getScheameDotOrg=function(e,t){var n={};n["@context"]="http://schema.org",n["@type"]="WebPage";var r=this.$location.url();n["@id"]=r;var i={};i["@type"]="PropertyValue",i.propertyID="local";var o=H(e,"pnx.control");i.value=this.getRecordId(o),n.identifier=i;var a=t;n.name=a;var s={},c=H(e,"pnx.display.type[0]","book"),u=this.getRestToSDOType(c);s["@type"]=u,s["@id"]="#"+u;try{var l=H(e,"pnx.addata.addau");if(l){for(var f=[],p=0,d=l;p<d.length;p++){var h=d[p],m={};m["@type"]="Person",m.name=h,f.push(m)}s.creator=f}}catch(t){console.log(e),console.log(t)}try{var g=H(e,"pnx.display.aucorp");if(g){for(var y=[],v=0,b=g;v<b.length;v++){var h=b[v],m={};m["@type"]="Person",m.name=h,y.push(m)}s.contributor=y}}catch(t){console.log(e),console.log(t)}try{var S=H(e,"pnx.display.description");if(S){for(var _=[],O=0,T=S;O<T.length;O++){var E=T[O];_.push(E)}s.description=_}}catch(t){console.log(e),console.log(t)}try{var w=H(e,"pnx.display.edition[0]");w&&(s.edition=w)}catch(t){console.log(e),console.log(t)}try{var I=H(e,"pnx.addata.issn"),R=[];if(I)for(var P=0,j=I;P<j.length;P++){var A=j[P];R.push(A)}if(I=H(e,"pnx.addata.eissn"))for(var C=0,$=I;C<$.length;C++){var A=$[C];R.push(A)}R.length>0&&(s.issn=R)}catch(t){console.log(e),console.log(t)}var D={};D["@type"]="PropertyValue";var L=[],k=H(e,"pnx.display.sici");if(k){var M={};M.propertyID="SICI",M.value=k,L.push(M)}if(k=H(e,"pnx.display.coden")){var M={};M.propertyID="CODEN",M.value=k,L.push(M)}if(k=H(e,"pnx.display.ean")){var M={};M.propertyID="EAN",M.value=k,L.push(M)}if(k=H(e,"pnx.display.lccallnum")){var M={};M.propertyID="LCCallNum",M.value=k,L.push(M)}if(k=H(e,"pnx.display.pmid")){var M={};M.sameAs="https://www.ncbi.nlm.nih.gov/pubmed/"+k,L.push(M)}if(k=H(e,"pnx.display.pmid")){var M={};M.sameAs="https://lccn.loc.gov/"+k,L.push(M)}L.length>0&&(D.indentifier=L,s.indentifier=D);var x={};x["@type"]="PropertyValue";var F=[],k=H(e,"pnx.links.uri");if(k){var M={};M.propertyID="uri",M.value=k,M.sameAs="http://dx.doi.org/"+k,F.push(M)}if(k=H(e,"pnx.display.doi")){var M={};M.propertyID="doi",M.value=k,M.sameAs="http://dx.doi.org/"+k,F.push(M)}F.length>0&&(x.sameas=F,s.sameas=x);try{var U=H(e,"pnx.display.language[0]");U&&(s.inLanguage=U)}catch(t){console.log(e),console.log(t)}if(k=H(e,"pnx.display.publisher")){var M={};M["@type"]="Organization",M.name=k,s.publisher=M}k=H(e,"pnx.display.creationdate[0]"),k&&(s.publisher=k);try{var B=H(e,"pnx.display.subject");if(B){for(var N=[],q=0,V=B;q<V.length;q++){var h=V[q],m={};m["@type"]="Thing",m.name=h,N.push(m)}s.about=N}}catch(t){console.log(e),console.log(t)}switch(k=H(e,"pnx.addata.url[0]"),k&&(s.url=k),u){case"Book":k=H(e,"pnx.addata.isbn[0]"),k&&(s.isbn=k),k=H(e,"pnx.display.format[0]"),k&&(s.bookFormat=k),k=H(e,"pnx.display.relation[0]"),k&&(s.isPartOf=k);break;case"Article":case"Periodical":case"Chapter":var Y={};Y["@id"]="#periodical";var z=["PublicationVolume","Periodical"];Y["@type"]=z,k=H(e,"pnx.addata.title[0]"),k?Y.name=k:(k=H(e,"pnx.addata.btitle[0]"),k&&(Y.name=k)),k=H(e,"pnx.addata.issn[0]"),k&&(Y.issn=k),k=H(e,"pnx.addata.volume[0]"),k&&(Y.PublicationVolume=k),k=H(e,"pnx.display.periodical[0]"),k&&(Y.PublicationTitle=k),s.isPartOf=Y,k=H(e,"pnx.addata.volume[0]"),k&&(s.volumeNumber=k),k=H(e,"pnx.display.duns[0]"),k&&(s.duns=k),k=H(e,"pnx.display.publicationplace[0]"),k&&(s.Place=k),k=H(e,"pnx.display.relation[0]"),k&&(s.additionalType=k),k=H(e,"pnx.display.periodical[0]"),k&&(s.PublicationTitle=k),k=H(e,"pnx.addata.startpage[0]"),k&&(s.pageStart=k),k=H(e,"pnx.addata.endpage[0]"),k&&(s.pageEnd=k),k=H(e,"pnx.addata.pages[0]"),k&&(s.pagination=k),k=H(e,"pnx.addata.issue[0]"),k&&(s.issueNumber=k);break;case"Photograph":break;case"CreativeWork":break;case"Movie":break;default:console.log("Not defined type: "+u)}return n.mainEntity=s,n},e.prototype.updateSDO=function(e){try{for(var t=document.getElementsByTagName("script"),n=0,r=t;n<r.length;n++){var i=r[n];if("application/ld+json"===i.type)return void(i.innerHTML=JSON.stringify(e))}console.log(" NOT FOUND application/ld+json script ")}catch(e){console.log(e),console.log("Error application/ld+json script")}},e.prototype.addSEOData=function(e,t){this.updatePageTitle();var n=this.getScheameDotOrg(e,t);this.updateSDO(n),this.updatePageDescriptionFullView(t)},e.prototype.removeSEOData=function(){this.updatePageTitle(),this.updateSDO({}),this.updatePageDescriptionFullView("")},e.prototype.getReferenceEntry=function(e){var t=this,n={query:e,pckey:_.getCurrentPCKey()},r=this.restBaseURLs.pnxBaseURL+"/delivery?"+this.$httpParamSerializer(this.cheetah.searchData),i=this.restBaseURLs.referenceEntryUrl;return this.configurationUtil.isSuprima()&&(i=i+"?vid="+this.vid),this.$http.post(i,n).then(function(e){if(e.data){var n=[e.data];return t.configurationUtil.isSuprima()?n:t.$http.post(r,{records:[e.data]})}return null})},e.prototype.getFacetsRetry=function(e,t,n){if(0===H(e,"data.facets",[]).length){var r=g.getPrimoSplitFacetsMaxWait(),i=this.$timeout(function(){},r);this.getFacets(t,n,i)}},e.prototype.getFacets=function(e,t,n){var r=this;this.cheetah.performFacetSearch(e,t.info).then(function(i){var o=r.searchResultParser.parseSearchResponse(i.data);if(H(o,"facetsList",[]).length>0)r.$timeout.cancel(n),r.facetService.setResult(o.facetsList);else{var a=g.getPrimoVeSplitFacetsWaitInterval(),s=r.$timeout(function(){r.getFacets(e,t,n)},a);n.then(function(){r.$timeout.cancel(s)})}},function(e){r.$timeout.cancel(n)})},Object.defineProperty(e.prototype,"showMobileFacets",{get:function(){return this._showMobileFacets},set:function(e){this._showMobileFacets=e},enumerable:!0,configurable:!0}),e.prototype.fromEsploro=function(){return"undefined"!=typeof this.vid&&this.vid&&this.vid.includes("ResearchRepository")},r([R.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"updateOffsetInUrl",null),e=r([O.Injectable(),o(0,O.Inject("$http")),o(2,O.Inject("$stateParams")),o(3,O.Inject("restBaseURLs")),o(9,O.Inject("limit")),o(10,O.Inject("imagesBarLimit")),o(13,O.Inject("$state")),o(14,O.Inject("$location")),o(26,O.Inject("$httpParamSerializer")),o(30,O.Inject("$translate")),o(32,O.Inject("$rootScope")),o(34,O.Inject("$q")),o(35,O.Inject("$timeout")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof u.Cheetah&&u.Cheetah)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof C.SearchHistoryService&&C.SearchHistoryService)&&n||Object,"function"==typeof(V="undefined"!=typeof f.SearchResultParser&&f.SearchResultParser)&&V||Object,"function"==typeof(Y="undefined"!=typeof d.SearchStateService&&d.SearchStateService)&&Y||Object,"function"==typeof(z="undefined"!=typeof j.TimesCitedService&&j.TimesCitedService)&&z||Object,"function"==typeof(G="undefined"!=typeof l.FacetService&&l.FacetService)&&G||Object,Object,Object,"function"==typeof(W="undefined"!=typeof h.ConfigurationUtil&&h.ConfigurationUtil)&&W||Object,"function"==typeof(Q="undefined"!=typeof m.SearchUtil&&m.SearchUtil)&&Q||Object,Object,Object,"function"==typeof(J="undefined"!=typeof p.SearchBarService&&p.SearchBarService)&&J||Object,"function"==typeof(K="undefined"!=typeof S.SearchFieldsService&&S.SearchFieldsService)&&K||Object,"function"==typeof(X="undefined"!=typeof x.SearchErrorMessageService&&x.SearchErrorMessageService)&&X||Object,"function"==typeof(Z="undefined"!=typeof v.JwtUtilService&&v.JwtUtilService)&&Z||Object,"function"==typeof(ee="undefined"!=typeof y.AlertFactory&&y.AlertFactory)&&ee||Object,"function"==typeof(te="undefined"!=typeof b.RtaService&&b.RtaService)&&te||Object,"function"==typeof(ne="undefined"!=typeof L.DatabasesService&&L.DatabasesService)&&ne||Object,"function"==typeof(re="undefined"!=typeof k.ResourceRecommenderService&&k.ResourceRecommenderService)&&re||Object,"function"==typeof(ie="undefined"!=typeof T.SnippetService&&T.SnippetService)&&ie||Object,"function"==typeof(oe="undefined"!=typeof E.HighlightsService&&E.HighlightsService)&&oe||Object,"function"==typeof(ae="undefined"!=typeof I.RestUtils&&I.RestUtils)&&ae||Object,Object,"function"==typeof(se="undefined"!=typeof P.UserSessionManagerService&&P.UserSessionManagerService)&&se||Object,"function"==typeof(ce="undefined"!=typeof c.RecordUtil&&c.RecordUtil)&&ce||Object,"function"==typeof(ue="undefined"!=typeof $.FilterInstitution&&$.FilterInstitution)&&ue||Object,Object,"function"==typeof(le="undefined"!=typeof D.JournalsService&&D.JournalsService)&&le||Object,Object,"function"==typeof(fe="undefined"!=typeof M.NewspapersService&&M.NewspapersService)&&fe||Object,Object,Object,"function"==typeof(pe="undefined"!=typeof F.TranslationService&&F.TranslationService)&&pe||Object])],e);var t,n,V,Y,z,G,W,Q,J,K,X,Z,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,fe,pe}();t.SearchService=V},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(38),s=n(39),c=n(24),u=function(){function e(e){this.dateUtils=e}return Object.defineProperty(e.prototype,"formMode",{get:function(){return l.FORM_MODE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldType",{get:function(){return l.FIELD_TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiType",{get:function(){return l.UI_TYPE},enumerable:!0,configurable:!0}),e.prototype.groupFields=function(e){var t=[],n=[];"hidden"!==e[0].uiType&&n.push(e[0]);for(var r=1;r<e.length;r++){var i=e[r];i.group||(0===n.length&&(n.hidden=!0),t.push(n),n=[]),"hidden"!==i.uiType&&n.push(i)}return 0===n.length&&(n.hidden=!0),t.push(n),t},e.prototype.handleValue=function(e){if(e){var t=e.value;t&&e.fieldType===this.fieldType.DATE&&(e.value=this.dateUtils.convertIlsDateStringToPrimoDateString(t))}},e.prototype.validate=function(e,t){var n=[];for(var r in t)if(t[r].validator){var i=t[r].validator.func,o=t[r].validator.params;i(e,t[r].name,o)||n.push(t[r].validator.message)}return{isOk:0===n.length,errorMessages:n}},e.prototype.compareFields=function(e,t,n){return e[t]===e[n]},e.prototype.getFieldByName=function(e,t){var n=s(c(e),function(e){return e.name===t});if(n)return n[0]},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.DateUtils&&a.DateUtils)&&t||Object])],e);var t}();t.FormBuilderService=u;var l=function(){function e(){}return Object.defineProperty(e,"FORM_MODE",{get:function(){return this._formMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIELD_TYPE",{get:function(){return this._fieldType},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UI_TYPE",{get:function(){return this._uiType},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BEHAVIOR",{get:function(){return this._behavior},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROOT",{get:function(){return"$root$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIRST",{get:function(){return"$first$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIELD",{get:function(){return"$field$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TODAY",{get:function(){return"$today$"},enumerable:!0,configurable:!0
}),Object.defineProperty(e,"FUTURE_DATES",{get:function(){return"$future$"},enumerable:!0,configurable:!0}),e._formMode={NEW:"New",EDIT:"Edit",VIEW:"View",ERROR:"Error"},e._fieldType={STRING:"string",DATE:"date",BOOLEAN:"boolean",INTERNAL:"internal"},e._uiType={TEXT:"text",CHECK_BOX:"checkbox",READ_ONLY:"readonly",PASSWORD:"password",DROP_DOWN:"dropdown",DROP_DOWN_MULTIPLE:"comboboxmultiplenew",TEXT_AREA:"textarea",RADIO_BUTTON:"radio",DATE:"date",LABEL:"label",MULTI_LABEL:"multiLabel",HIDDEN:"hidden",LINK:"link",DATE_TIME:"datetime",DATE_AND_HOURS:"dateAndHours",DATE_AND_TIME:"dateAndTime",DATE_DROPDOWN:"dateDropdown",DATE_NOT_NEEDED_AFTER:"dateNgrs"},e._behavior={DISABLED:"disabled",HIDDEN:"hidden"},e}();t.FormBuilderEnums=l,t.default=[]},function(e,t,n){"use strict";(function(e){function n(){K=!1}function r(){return K}function i(e){return void 0!==e&&null!==e}function o(e){return void 0===e||null===e}function a(e){return"string"==typeof e}function s(e){return"function"==typeof e}function c(e){return"boolean"==typeof e}function u(e){return Array.isArray(e)}function l(e){return"number"==typeof e}function f(e){return e instanceof Date&&!isNaN(e.valueOf())}function p(e){return s(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return e instanceof H.Promise}function m(e){return Boolean(i(e)&&e.then)}function g(e){return Boolean(i(e)&&e.subscribe)}function y(e){return m(e)||g(e)}function v(e){return i(e)&&e.$digest&&e.$on}function b(e){return i(e)&&e.unsubscribe}function S(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function _(e){return"length"in e&&Object.prototype.hasOwnProperty.call(e,"callee")&&(!Object.prototype.propertyIsEnumerable.call(e,"callee")||Object.prototype.toString.call(e)==J)}function O(){}function T(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.name)return e.name;var t=e.toString(),n=t.indexOf("\n");return n===-1?t:t.substring(0,n).replace("\r","")}function E(e){return null==e?"":e+""}function w(e){if(u(e))return e;var t=[];return E(e).replace(z,function(e,n,r,i){var o=r?i.replace(G,"$1"):n||e;return t.push(o),o}),t}function I(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=H.Object.assign||H.angular.extend;return r.apply(void 0,[e].concat(t))}function R(e){if(!e.match(Z))throw new Error("Only selectors matching element names or base attributes are supported, got: "+e);return e.trim().replace(X,"").replace(ee,function(e,t){return t.toUpperCase()})}function P(e){var t=j(e);return $(t)}function j(e){var t=/function\s*([^\s(]+)/.exec(T(e)),n=t||[],r=n[1],i=void 0===r?"":r;return i||T(e)}function A(e){return"$"+e+"Controller"}function C(e){return Array.isArray(e.$inject)&&0!==e.$inject.length}function $(e){return L(e,String.prototype.toLowerCase)}function D(e){return L(e,String.prototype.toUpperCase)}function L(e,t){return t.call(e.charAt(0))+e.substring(1)}function k(e){return o(e)?null:e}function M(e){return!o(e)&&e}function x(e){console.log(e)}function F(e,t,n){for(var r=t.split("."),o=e;r.length>1;){var a=r.shift();o=o.hasOwnProperty(a)&&i(o[a])?o[a]:o[a]={}}void 0!==o&&null!==o||(o={}),o[r.shift()]=n}function U(e){return S(e)?e:Object(e)}function B(e,t){return void 0===t&&(t=Q),e=l(e)||W.test(e)?+e:-1,e>-1&&e%1==0&&e<t}function N(e,t){if(a(e)&&Y.test(e)||l(e))return!0;if(u(e))return!1;var n=!V.test(e);return n||null!=t&&e in U(t)}var q;q="undefined"==typeof window?e:window;var H=q;t.global=H;var V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Y=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,G=/\\(\\)?/g,W=/^\d+$/,Q=9007199254740991,J="[object Arguments]",K=!0;t.enableProdMode=n,t.assertionsEnabled=r,t.isPresent=i,t.isBlank=o,t.isString=a,t.isFunction=s,t.isBoolean=c,t.isArray=u,t.isNumber=l,t.isDate=f,t.isType=p,t.isStringMap=d,t.isPromise=h,t.isPromiseLike=m,t.isObservable=g,t.isPromiseOrObservable=y,t.isScope=v,t.isSubscription=b,t.isJsObject=S,t.isArguments=_,t.noop=O,t.stringify=T,t.baseToString=E,t.toPath=w,t.assign=I;var X=/\[|\]/g,Z=/^\[?[\w|-]*\]?$/,ee=/-(\w)/g;t.resolveDirectiveNameFromSelector=R,t.getTypeName=P,t.getFuncName=j,t.controllerKey=A,t.hasCtorInjectables=C,t.firstToLowerCase=$,t.firstToUpperCase=D,t.normalizeBlank=k,t.normalizeBool=M,t.print=x,t.setValueOnPath=F,t.toObject=U,t.isIndex=B,t.isKey=N}).call(t,n(68))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(45),u=function(){function e(e){this.$translate=e,this.searchParams={vid:s.getVid(),lang:e.use()},this.facets=[],this.prevFacets=[]}return e.prototype.reset=function(){this.mainSearch=void 0,this.scope=void 0,this.sortby=void 0,this.facets=void 0,this.prevSortBy=void 0,this.prevOffset=void 0,this.prevFacets=void 0,this.advancedSearch=void 0,this.tab=void 0,this.searchParams=void 0,this.offset=void 0,this.pfilters=void 0,this.journals=void 0,this.databases=void 0},Object.defineProperty(e.prototype,"mainSearch",{get:function(){return this._mainSearch},set:function(e){this._mainSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},set:function(e){this._scope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab",{get:function(){return this._tab},set:function(e){this._tab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortby",{get:function(){return this._sortby},set:function(e){this._sortby=e,this._searchParams.sortby=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facets",{get:function(){return this._facets},set:function(e){this._facets=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevFacets",{get:function(){return this._prevFacets},set:function(e){this._prevFacets=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevSortBy",{get:function(){return this._prevSortBy},set:function(e){this._prevSortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advancedSearch",{get:function(){return this._advancedSearch},set:function(e){this._advancedSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevOffset",{get:function(){return this._prevOffset},set:function(e){this._prevOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfilters",{get:function(){return this._pfilters},set:function(e){this._pfilters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevPFilters",{get:function(){return this._prevPFilters},set:function(e){this._prevPFilters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchParams",{get:function(){return this._searchParams},set:function(e){this._searchParams=c(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"databases",{get:function(){return this._databases},set:function(e){this._databases=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"journals",{get:function(){return this._journals},set:function(e){this._journals=e},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$translate")),i("design:paramtypes",[Object])],e)}();t.SearchFieldsService=u},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(9),u=n(1),l=function(){function e(e,t,n){var r=this;this.mappingTablesCache=e,this.$state=t,this.$stateParams=n,this.vid=u.getVid(),this.NEWSPAPERS_SEARCH_ENABLED=u.getNewspapersSearchEnabled(),this.DISPLAY_FEATURED_NEWSPAPERS=u.getDisplayFeaturedNewspapers(),this.DISPLAY_NEWSPAPERS_LINK=u.getDisplayNewspapersLink(),this._featuredNewspapers=[],this._cameFromSearch=!1,this._cameFromFeaturedSearch=!1,this._regularSearchCameFrom="",this._featuredTitle="",this._featuredDescription="",this._scopes=["all","featured"],this._featuredScopes=["all"],this._featuredScope="all",this._nameIssnMap={},this._nameDescMap={},this.DEFAULT_SCOPE="all",this.DEFAULT_FEATURED_SCOPE="all",this._scope=this.DEFAULT_SCOPE;var i=this.mappingTablesCache.findByProperties("Featured newspapers",{source1:this.vid});0===i.length&&(i=this.mappingTablesCache.findByProperties("Featured newspapers",{source1:"default"})),0===i.length?this.isFeaturedNewspapersTableFilled=!1:(this.isFeaturedNewspapersTableFilled=!0,i=i.sort(function(e,t){return parseInt(e.source4)-parseInt(t.source4)}),i.forEach(function(e){var t={name:e.source2,description:e.source3,issn:e.target};r.featuredNewspapers.push(t),r._featuredScopes.push(t.name),r._nameIssnMap[t.name]=t.issn,r._nameDescMap[t.name]=t.description}),this._nameIssnMap[this.DEFAULT_FEATURED_SCOPE]=this.allFeaturedIssns,this._nameDescMap[this.DEFAULT_FEATURED_SCOPE]="")}return e.prototype.isNewspapersSearch=function(){return this.$state.current.name===s.STATE_NAMES.NEWSPAPERS||this.$state.current.name===s.STATE_NAMES.NEWSPAPERS_FULL_DISPLAY},Object.defineProperty(e.prototype,"featuredNewspapers",{get:function(){return this._featuredNewspapers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameFromSearch",{get:function(){return this._cameFromSearch},set:function(e){this._cameFromSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameFromFeaturedSearch",{get:function(){return this._cameFromFeaturedSearch},set:function(e){this._cameFromFeaturedSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredDescription",{get:function(){return this._featuredDescription},set:function(e){this._featuredDescription=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredTitle",{get:function(){return this._featuredTitle},set:function(e){this._featuredTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scopes",{get:function(){return this._scopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},set:function(e){this._scope=e,"all"===this._scope&&(this.featuredScope=this.DEFAULT_FEATURED_SCOPE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredScopes",{get:function(){return this._featuredScopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredScope",{get:function(){return this._featuredScope},set:function(e){this._featuredScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"regularSearchCameFrom",{get:function(){return this._regularSearchCameFrom},set:function(e){this._regularSearchCameFrom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nameIssnMap",{get:function(){return this._nameIssnMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nameDescMap",{get:function(){return this._nameDescMap},enumerable:!0,configurable:!0}),e.prototype.displayFeaturedNewspapers=function(){return this.NEWSPAPERS_SEARCH_ENABLED&&this.DISPLAY_FEATURED_NEWSPAPERS&&this.isFeaturedNewspapersTableFilled},e.prototype.displayNewspapersLink=function(){return!this.isNewspapersSearch()&&this.isPcScope()&&this.DISPLAY_NEWSPAPERS_LINK&&this.NEWSPAPERS_SEARCH_ENABLED},e.prototype.isPcScope=function(){var e=this.$stateParams.tab,t=this.$stateParams.search_scope,n=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"][e];return!(!n||!n[t])},e.prototype.goToNewspapersFromSearch=function(){this.cameFromSearch=!0,this.cameFromFeaturedSearch=!1;var e=this.$stateParams.query,t=this.$stateParams.pcAvailability,n={};n.vid=this.vid,n.search_scope=this.DEFAULT_SCOPE,e&&(n.query=e),t&&(n.pcAvailability=t),this.$state.go(s.STATE_NAMES.NEWSPAPERS,n,{reload:!0})},e.prototype.addCameFromGoToNewspapersfromRegularSearch=function(e){this.regularSearchCameFrom=e},e.prototype.isNewspaperItem=function(e){return!("U"!==e.context&&"NP"!==e.context||!e.pnx||!e.pnx.control||!e.pnx.control.sourcesystem||!Array.isArray(e.pnx.control.sourcesystem)||"Newspapers"!==e.pnx.control.sourcesystem[0])},Object.defineProperty(e.prototype,"allFeaturedIssns",{get:function(){var e=this.featuredNewspapers.map(function(e){return e.issn.replace(/;$/,"")});return e.join(";")},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(1,a.Inject("$state")),o(2,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&t||Object,Object,Object])],e);var t}();t.NewspapersService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(69),c="LOCALSTORAGE",u="SESSIONSTORAGE",l="Bulk",f="@",p=function(){function e(e,t,n){this.$cookies=e,this.$q=t,this._isLocalStorageAvailable=!0,this._isSessionStorageAvailable=!0;try{localStorage.setItem("storageTest",""),localStorage.removeItem("storageTest")}catch(e){this._isLocalStorageAvailable=!1}try{sessionStorage.setItem("storageTest",""),sessionStorage.removeItem("storageTest")}catch(e){this._isSessionStorageAvailable=!1}this._isLocalStorageAvailable?(this.localStorage=localStorage,this.$localForage=n):(this.localStorage=new h(c,this.$cookies),this.$localForage=new m(c,this.$cookies,this.$q)),this._isSessionStorageAvailable?this.sessionStorage=sessionStorage:this.sessionStorage=new h(u,this.$cookies)}return Object.defineProperty(e.prototype,"isLocalStorageAvailable",{get:function(){return this._isLocalStorageAvailable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSessionStorageAvailable",{get:function(){return this._isSessionStorageAvailable},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$cookies")),o(1,a.Inject("$q")),o(2,a.Inject("$localForage")),i("design:paramtypes",[Object,Object,Object])],e)}();t.StorageUtil=p;var d=function(){function e(e,t){this.prefix=e,this.$cookies=t,this.MAX_COOKIE_SIZE=2e3}return e.prototype.splitToBulksAndSet=function(e,t){this.removeBulkedItem(e);for(var n=JSON.stringify(t),r=this.MAX_COOKIE_SIZE/2,i=[],o=0;o<n.length;o+=r)i[i.length]=n.slice(o,o+r);for(var a=0;a<i.length;a++){var s=this.prefix+l+a+f+e;this.$cookies.put(s,i[a])}},e.prototype.getBulkedItem=function(e){for(var t=0,n="",r=this.$cookies.get(this.prefix+l+t+f+e);void 0!=r;)n+=r,t++,r=this.$cookies.get(this.prefix+l+t+f+e);if(0!==t)return JSON.parse(n)},e.prototype.removeBulkedItem=function(e){for(var t=0,n=this.$cookies.get(this.prefix+l+t+f+e);void 0!=n;)this.$cookies.remove(this.prefix+l+t+f+e),t++,n=this.$cookies.get(this.prefix+l+t+f+e)},e}(),h=function(){function e(e,t){this.prefix=e,this.$cookies=t,this.cookieBulkHandler=new d(e,t)}return e.prototype.setItem=function(e,t){this.cookieBulkHandler.splitToBulksAndSet(e,t)},e.prototype.removeItem=function(e){this.cookieBulkHandler.removeBulkedItem(e)},e.prototype.getItem=function(e){return this.cookieBulkHandler.getBulkedItem(e)},e}(),m=function(){function e(e,t,n){this.prefix=e,this.$cookies=t,this.$q=n,this.cookieBulkHandler=new d(e,t)}return e.prototype.setItem=function(e,t){var n,r=!1;try{this.cookieBulkHandler.splitToBulksAndSet(e,t)}catch(e){r=!0,n=e}return this.$q(function(e,i){r?i(n):e(t)})},e.prototype.removeItem=function(e){var t,n=!1;try{this.cookieBulkHandler.removeBulkedItem(e)}catch(e){n=!0,t=e}return this.$q(function(e,r){n?r(t):e()})},e.prototype.getItem=function(e){var t,n,r=!1;try{n=this.cookieBulkHandler.getBulkedItem(e)}catch(e){r=!0,t=e}return this.$q(function(e,i){r?i(t):e(n)})},e.prototype.clear=function(){var e,t=!1;try{var n=this.$cookies.getAll();for(var r in n)0===r.indexOf(this.prefix)&&this.$cookies.remove(r)}catch(n){t=!0,e=n}return this.$q(function(n,r){t?r(e):n()})},e.prototype.keys=function(){var e,t,n=this,r=!1;try{var i=this.$cookies.getAll();t=Object.keys(i),t=t.filter(function(e){return 0===e.indexOf(n.prefix)}),t=t.map(function(e){return e.replace(new RegExp("^"+n.prefix),"")}),t=t.map(function(e){return e.replace(new RegExp("^"+l+"\\d+"+f),"")}),t=s(t)}catch(t){r=!0,e=t}return this.$q(function(n,i){r?i(e):n(t)})},e}();(function(){function e(e,t){this.prefix=e,this.$cookies=t}return e.prototype.setItem=function(e,t){var n=this.prefix+e;this.$cookies.put(n,t)},e.prototype.removeItem=function(e){var t=this.prefix+e;this.$cookies.remove(t)},e.prototype.getItem=function(e){var t=this.prefix+e;return this.$cookies.get(t)},e})(),function(){function e(e,t,n){this.prefix=e,this.$cookies=t,this.$q=n}return e.prototype.setItem=function(e,t){var n,r=!1,i=this.prefix+e;try{this.$cookies.putObject(i,t)}catch(e){r=!0,n=e}return this.$q(function(e,i){r?i(n):e(t)})},e.prototype.removeItem=function(e){var t,n=!1,r=this.prefix+e;try{this.$cookies.remove(r)}catch(e){n=!0,t=e}return this.$q(function(e,r){n?r(t):e()})},e.prototype.getItem=function(e){var t,n,r=!1,i=this.prefix+e;try{n=this.$cookies.getObject(i)}catch(e){r=!0,t=e}return this.$q(function(e,i){r?i(t):e(n)})},e.prototype.clear=function(){var e,t=!1;try{var n=this.$cookies.getAll();for(var r in n)0===r.indexOf(this.prefix)&&this.$cookies.remove(r)}catch(n){t=!0,e=n}return this.$q(function(n,r){t?r(e):n()})},e.prototype.keys=function(){var e,t,n=this,r=!1;try{var i=this.$cookies.getAll();t=Object.keys(i),t=t.filter(function(e){return 0===e.indexOf(n.prefix)}),t=t.map(function(e){return e.replace(new RegExp("^"+n.prefix),"")})}catch(t){r=!0,e=t}return this.$q(function(n,i){r?i(e):n(t)})},e}()},function(e,t,n){function r(e,t){var n=s(e)?i:o;return n(e,a(t))}var i=n(300),o=n(126),a=n(556),s=n(15);e.exports=r},function(e,t,n){"use strict";function r(){var e=window.document;return e.documentMode}function i(){var e=navigator.userAgent;return e.indexOf("Chrome")!=-1}function o(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification)}function a(){return!r()&&!!window.StyleMedia}function s(){return!r()&&!!window.StyleMedia}function c(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserIE=r,t.isBrowserChrome=i,t.isBrowserSafari=o,t.isBrowserEdge=a,t.isBrowserFirefox=s,t.isIosDevice=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(49),c=function(){function e(e,t,n,r){this.$http=e,this.restBaseURLs=t,this.$location=n,this.i18nService=r,this.UPDATE_DB_URL=t.userSettingsBaseURL}return e.prototype.updateUserLanguage=function(e,t){var n=this.buildPaylod(e,t);return this.$http.post(this.UPDATE_DB_URL,n)},e.prototype.buildPaylod=function(e,t){var n={vid:e,"interface-language":t};return n},e.prototype.addLangParamToUrl=function(e){var t=this.$location.search();t.lang!==e&&this.changeUrl(e)},e.prototype.changeUrl=function(e){var t=this.$location.search();t.lang=e,this.$location.search(t).replace()},Object.defineProperty(e.prototype,"direction",{get:function(){return this.i18nService.direction},enumerable:!0,configurable:!0}),r([s.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"changeUrl",null),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$location")),o(3,a.Inject("I18nService")),i("design:paramtypes",[Object,Object,Object,Object])],e)}();t.ChangeLangService=c,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(1),c=n(0),u=n(223),l=n(5),f=function(){function e(){this.data=[]}return e.prototype.saveResponse=function(e){this.featuredResult=e.featuredResult,this.data=e.groups,this.didUMean=e.did_u_mean,this.details=e.details,this.info=e.info,this.facets=e.facetsList,this.images=e.images,this.beaconO22=e.beaconO22,this.lang3=e.lang3},e.prototype.updateResponse=function(e,t){void 0===t&&(t=!1),t?this.data=e.groups:Array.prototype.push.apply(this.data,e.groups),this.info=e.info,this.facets=e.facetsList,this.beaconO22=e.beaconO22},e.prototype.updateResponseImages=function(e){this.images=e},e}(),p=function(){function e(e,t,n){this.jsonUtils=e,this.$filter=t,this.$anchorScroll=n,this.resultsBulkSize=s.getResultsBulkSize(),this.showMoreThreshold=s.getShowMoreThreshold(),this.resultObject=new f,this.tempTopMaxItems=[],this.firstBulk=0,this.$filter=t,this.currentItem={},this.selectedItem="",this.PAGE_SIZE=s.getResultsBulkSize()}return e.prototype.resetResultObject=function(){this.resultObject=new f},e.prototype.resetSearchObject=function(){this.searchObject={}},e.prototype.getItemAtIndex=function(e){var t=this.resultObject.data;return t&&t.length>e?t[e]:null},e.prototype.hasNextBulk=function(){var e=this.resultObject.info.maxTotal&&this.resultObject.info.maxTotal>0?this.resultObject.info.maxTotal:this.resultObject.info.total;return this.resultObject.info&&this.searchObject.to<e},e.prototype.isNotFirstBulk=function(){return this.searchObject.offset>this.firstBulk},e.prototype.nextBulk=function(){this.searchObject.offset=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total),this.searchObject.to=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total)},e.prototype.jumpToPage=function(e){this.searchObject.offset=Math.min(10*e,this.resultObject.info.total),this.searchObject.to=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total),this.searchObject.newSearch=!0},e.prototype.previousBulk=function(){this.searchObject.offset=Math.max(this.searchObject.offset-this.searchObject.bulkSize,1);var e=this.searchObject.offset+this.searchObject.bulkSize-1;this.searchObject.to=Math.min(e,this.resultObject.info.total)},e.prototype.getResultObject=function(){return this.resultObject},Object.defineProperty(e.prototype,"numOfLoadedResultBulks",{get:function(){return this.resultObject&&this.resultObject.data?Math.ceil(this.resultObject.data.length/this.PAGE_SIZE):0},enumerable:!0,configurable:!0}),e.prototype.getSearchObject=function(){return this.searchObject||{}},e.prototype.setUpdatedSearchObject=function(e){this.searchObject={bulkSize:this.resultsBulkSize,query:e.query||this.searchObject.query,facets:e.facets||this.searchObject.facets,pcAvailability:e.pcAvailability||this.searchObject.pcAvailability,scope:e.scope||this.searchObject.scope,browseParams:this.searchObject.browseParams,tab:e.tab||this.searchObject.tab,explain:e.explain||this.searchObject.explain,searchCDI:e.searchCDI||this.searchObject.searchCDI,sortby:e.sortby||this.searchObject.sortby,journals:e.journals||this.searchObject.journals,databases:e.databases||this.searchObject.databases,featuredNewspapersIssnList:e.featuredNewspapersIssnList||this.searchObject.featuredNewspapersIssnList,fromDate:e.fromDate||this.searchObject.fromDate,offset:this.firstBulk,to:this.resultsBulkSize,newSearch:!0,searchInProgress:!1,mode:this.searchObject.mode,getMore:e.getMore,isRelatedItems:e.isRelatedItems}},e.prototype.setSearchObject=function(e){e.searchObject&&(e=e.searchObject);var t=e.offset||this.firstBulk;this.searchObject={bulkSize:s.getResultsBulkSize(),query:e.query||"",facets:e.facets||[],pcAvailability:e.pcAvailability||!1,scope:e.scope||a.getDefaultScope(),browseParams:e.browseParams,tab:e.tab,journals:e.journals,databases:e.databases,featuredNewspapersIssnList:e.featuredNewspapersIssnList,fromDate:e.fromDate,sortby:e.sortby,explain:e.explain,searchCDI:e.searchCDI,offset:t,to:t+this.resultsBulkSize,newSearch:!0,searchInProgress:!1,mode:e.mode,getMore:e.getMore,isRelatedItems:e.isRelatedItems,organization:e.organization},e.noConVoc&&(this.searchObject.noConVoc=!0)},e.prototype.setResultObject=function(e,t){void 0===t&&(t=!1),this.searchObject.newSearch?(this.searchObject.newSearch=!1,this.$anchorScroll(),this.resultObject.saveResponse(e)):(t&&this.$anchorScroll(),this.resultObject.updateResponse(e,t))},e.prototype.setTempResultList=function(e){this.tempTopMaxItems=e},e.prototype.getTempResultList=function(){return this.tempTopMaxItems},e.prototype.updateSearchObject=function(e){l.extend(this.searchObject,e)},e.prototype.updateResultObject=function(e){l.extend(this.resultObject,e)},e.prototype.selectItem=function(e){this.selectedDetail=e},e.prototype.getSelectedItem=function(){return this.selectedDetail},e.prototype.addImagesToResultObject=function(e){var t=[];if(!l.isUndefined(e.images)){var n=this.jsonUtils.convertObjectToArray(e.images);n=this.$filter("filter")(n,"!img/icon_image.png");for(var r=0;r<n.length&&r<9;r++)t.push({link:n[r],type:"dynamic"});t=t.sort(function(){return 5-Math.random()})}this.resultObject.updateResponseImages(t)},e.prototype.isSearchInProgress=function(){return this.searchObject&&this.searchObject.searchInProgress||!1},e.prototype.setSearchInProgress=function(e){this.searchObject.searchInProgress=e},e.prototype.setSkipDelivery=function(e){this.searchObject.skipDelivery=e},e.prototype.getSkipDelivery=function(){return this.searchObject.skipDelivery},e=r([c.Injectable(),o(1,c.Inject("$filter")),o(2,c.Inject("$anchorScroll")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.JsonUtils&&u.JsonUtils)&&t||Object,Object,Object])],e);var t}();t.SearchStateService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=n(0),c=n(14),u=n(1),l=function(){function e(e,t,n){this.$state=e,this.searchFieldsService=t,this.$stateParams=n}return e.prototype.isJournalSearch=function(){return this.$state.current.name===a.STATE_NAMES.JOURNAL_SEARCH||this.$state.current.name===a.STATE_NAMES.JOURNAL_FULL_DISPLAY},e.prototype.returnToJournalsSearch=function(){return this.searchFieldsService.tab===this.JOURNAL_SEARCH_TAB&&"suprima"===u.getBackendSystem()},Object.defineProperty(e.prototype,"JOURNAL_SEARCH_TAB",{get:function(){return window.appConfig.journal_tab||"jsearch_slot"},enumerable:!0,configurable:!0}),e=r([s.Injectable(),o(0,s.Inject("$state")),o(2,s.Inject("$stateParams")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&t||Object,Object])],e);var t}();t.JournalsService=l},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){function r(e){var t=null==e?0:e.length;return t?i(e,1):[]}var i=n(82);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(38),o=n(140),a=n(24),s=n(39),c=n(18),u=n(92),l=n(340),f=(n(3),n(5)),p=f.injector(["ng"]),d=(p.get("$timeout"),function(){function e(){}return e.prototype.getFields=function(){return this.formFields},e.prototype.getSectionsMap=function(){return this.sectionsMap},e.prototype.itemsArrayPopulator=function(e,t,n,r){var i=this,s=this.getIlsDataByPath(r,e,n),c=s.key;if(r=s.data,c||(c=e.name),!r)return void(e.options=[]);if(!e.duplicateOf||!this.isDuplicatedFieldExists(t,e)){var u=this.filterPopulator(t,e,n,r);f.isArray(u)||(u=[u]);var l=u.map(function(t,r,o){return i.parseDataForMultiSelect(t,e,n)});l=a(l),e.options=o(l,"label").filter(this.filterEmpty)}},e.prototype.freeTextPopulator=function(e,t,n,r){this.updateDefaultValue(e,r,n),e.options={dummy:"dummy"},n[e.name]&&(e.disabled=!0)},e.prototype.hardCodedPopulator=function(e,t,n,r){e.disableMultiValueCheck=!0,this.isIlsFieldExists(r,n,e)||(e.options={})},e.prototype.parseDataForMultiSelect=function(e,t,n){var r=this;if(!e)return[];var i=this.getRequestKey(t,n),o=e[i];if(f.isArray(o)){var a=o.map(function(e,i,o){return r.parseDataForMultiSelect(e,t,n)}).filter(this.filterEmpty);return a}var s;if(t.populator&&(s=t.populator.params),f.isObject(o)){if(s&&s.key&&s.value)return n[t.name]||"Y"!==o.default||this.updateFormData(n,t,o[s.key]),{label:o[s.value],value:o[s.key]};var u=[];return c(o,function(e,t){u.push({label:t,value:e})}),u}if(s&&s.byKey&&e[s.byKey]===i&&s.byValue&&e[s.byValue]){var l=[];if(s.byCategory){var p=[];return c(e[s.byValue],function(e){var t=[];c(e.optionsList,function(e){t.push({label:e.value,value:e.key})}),p.push({label:e[s.byCategory],options:t})}),p}return c(e[s.byValue],function(e){s.key&&s.value?l.push({label:e[s.value],value:e[s.key]}):(l.push({label:e.value,value:e.key}),n[t.name]||"Y"!==e.default&&"Yes"!==e.default||r.updateFormData(n,t,e.key))}),l}return s&&s.byCategory&&s.value&&s.key?{label:e[s.value],value:e[s.key],category:e[s.byCategory]}:s&&s.key?(n[t.name]||"Y"!==e.default||this.updateFormData(n,t,e[s.key]),{label:e[s.value],value:e[s.key]}):f.isObject(e)?{label:e[i],
value:e[i]}:{label:e,value:e}},e.prototype.datePopulator=function(e,t,n,r){if(e.populator&&e.populator.params&&e.populator.params.path){if(!r)return void(e.options=[]);f.isArray(r)&&(r=r[0]);var i=[];c(r[e.populator.params.path],function(e){i.push({day:e[0],month:e[1],year:e[2]})}),e.options=i}},e.prototype.timeSlotPopulator=function(e,t,n,r){var o=this,a=this.getIlsDataByPath(r,e,n),s=a.key;if(r=a.data,s||(s=e.name),!r)return void(e.options=[]);if(!e.dependOn||!e.dependOn.key)return void(e.options=[]);var c,u=new i.DateUtils;if(f.isArray(e.dependOn)||(c=n[e.dependOn.key],c instanceof Date&&(c=u.convertDateTypeToIlsDateString(c))),f.isArray(r)&&(r=r[0]),r=r[s],!c)return void(e.options=[]);r=r[c];var l=r.map(function(t,r,i){return o.parseTimeForMultiSelect(t,e,n)});e.options=l},e.prototype.filterEmpty=function(e){return e.value||e.options},e.prototype.onChange=function(){return""},e.prototype.onClick=function(){return""},e.prototype.handleField=function(e,t,n,o,a){var s=this;if(e.uiType===r.FormBuilderEnums.UI_TYPE.MULTI_LABEL&&e.options&&e.options.length>0&&this.updateFormData(n,e,"DUMMY"),e.populator&&e.populator.params&&(e.populator.params.defaultValue||e.populator.params.defaultValuePath)&&(e.populator.params.filters&&u(e.populator.params.filters,a.trigger)&&delete n[e.name],!n[e.name]&&e.options&&e.options.length>0&&e.populator.params.defaultValue===r.FormBuilderEnums.FIRST&&this.updateFormData(n,e,e.options[0].value),!n[e.name]&&e.options&&e.options.length>0&&e.populator.params.defaultValuePath)){var l=f.isArray(o)?o[0][e.populator.params.defaultValuePath]:o[e.populator.params.defaultValuePath];this.updateFormData(n,e,l)}if(e.dependOn){if(e.dependOn.method&&e.dependOn.method(e,this.formFields,n,o),e.dependOn.ilsFields){var p=!0;return c(Object.keys(e.dependOn.ilsFields),function(r){var i=!1;c(e.dependOn.ilsFields[r],function(e){var r=s.getFieldByName(t,e);i||(i=s.isIlsFieldExists(o,n,r))}),p=p&&i}),void(p||(e.uiType=r.FormBuilderEnums.UI_TYPE.HIDDEN,delete n[e.name]))}if(e.uiTypeBack||(e.uiTypeBack=e.uiType),e.fieldTypeBack||(e.fieldTypeBack=e.fieldType),!e.dependOn.method){var d=!1;if(f.isArray(e.dependOn)||(e.dependOn=[e.dependOn]),c(e.dependOn,function(i){var o=s.getFieldByName(t,i.key);i.showIfFieldByKeyDoesntExist&&"false"===i.showIfFieldByKeyDoesntExist&&!n[i.key]?d=!0:i.isExists===!!n[i.key]||i.booleanCheckVar?(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1):i.value&&(o.uiType!==r.FormBuilderEnums.UI_TYPE.CHECK_BOX&&!n[i.key]||n[i.key]===i.value)?(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1):i.booleanValue&&"false"===i.booleanValue&&!s.checkIfCondValEqFormCondKey(n,i)?(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1):i.booleanValue&&"true"!==i.booleanValue||!s.checkIfCondValEqFormCondKey(n,i)?d=!0:(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1)}),d&&(e.fieldType=r.FormBuilderEnums.FIELD_TYPE.INTERNAL,e.dependOn.behavior===r.FormBuilderEnums.BEHAVIOR.DISABLED?(delete n[e.name],e.disabled=!0):e.uiType=r.FormBuilderEnums.UI_TYPE.HIDDEN),1===e.dependOn.length&&(e.dependOn=e.dependOn[0]),e.dependOn.booleanCheckVar){var h=e.dependOn.booleanCheckVar,m=this.parseDataAndKeyFromPath(o,h,n),g=(m.key,m.data);g||(e.uiType=r.FormBuilderEnums.UI_TYPE.HIDDEN)}}}var y=!a.trigger;if(e.uiType!==r.FormBuilderEnums.UI_TYPE.CHECK_BOX&&e.options&&1===e.options.length&&(e.dependOn&&!f.isDefined(e.dependOn.isExists)&&(e.disabled=!0),e.disabled||(y&&e.uiType!==r.FormBuilderEnums.UI_TYPE.HIDDEN?(e.saveFormField||(e.saveFormField={}),e.saveFormField.uiType=e.uiType,this.singleValueBehaviourDefined(e)?e.uiType=e.populator.params.singleValueBehaviour:e.uiType=r.FormBuilderEnums.UI_TYPE.LABEL):e.disabled=!0,e.value=e.options[0].label),this.updateFormData(n,e,e.options[0].value)),this.needToRestoreUiType(e)&&(e.uiType=e.saveFormField.uiType),this.updateDefaultValue(e,o,n),f.isArray(o)&&(o=o[0]),this.isIlsFieldExists(o,n,e)||(e.uiType=r.FormBuilderEnums.UI_TYPE.HIDDEN),e.uiType===r.FormBuilderEnums.UI_TYPE.DATE||e.uiType===r.FormBuilderEnums.UI_TYPE.DATE_AND_TIME){var v=new i.DateUtils;n[e.name]instanceof Date||(n[e.name]=v.convertIlsDateStringToDateType(n[e.name])),e.populator&&e.populator.params&&e.populator.params.defaultValue&&(n[e.name]||e.populator.params.defaultValue!==r.FormBuilderEnums.TODAY||(n[e.name]=new Date)),"now"===e.minDate&&(e.minDate=new Date)}},e.prototype.singleValueBehaviourDefined=function(e){return e.populator&&e.populator.params&&e.populator.params.singleValueBehaviour},e.prototype.needToRestoreUiType=function(e){return e.uiType&&e.uiType===r.FormBuilderEnums.UI_TYPE.LABEL&&e.saveFormField&&e.saveFormField.uiType&&e.options&&e.options.length>1},e.prototype.checkIfCondValEqFormCondKey=function(e,t){return f.isArray(t.value)?t.value&&t.value.indexOf(e[t.key])!==-1:t.value&&e[t.key]===t.value},e.prototype.updateDefaultValue=function(e,t,n){f.isArray(t)&&(t=t[0]);var r=e.valuePath||"chosen-parameters-map";if(t[r]&&!n[e.name]){var i=f.isObject(t[r])?t[r][e.key]:t[r];this.updateFormData(n,e,i),e.value=i}},e.prototype.isIlsFieldExists=function(e,t,n){var i=n.existingPath||"optional-service-parameters/"+n.name,o=this.parseDataAndKeyFromPath(e,i,t);e=o.data;var a=o.key;if(t[n.name])return!0;var s=e&&f.isDefined(e[a])||e&&f.isArray(e)&&f.isDefined(e[0][a]),c=!n.disableMultiValueCheck&&n.options&&n.options.length>0,u=n.fieldType===r.FormBuilderEnums.FIELD_TYPE.INTERNAL,l=s||c||u;return delete n.disableMultiValueCheck,l},e.prototype.filterPopulator=function(e,t,n,r){var i=this;return t.populator&&t.populator.params&&t.populator.params.filters?s(r,function(r){var o=!0;return c(t.populator.params.filters,function(t){var a=i.getFieldByName(e,t);if(a){var s=i.getRequestKey(a,n);if(f.isArray(r[s])){var u=!1;c(r[s],function(e){n[t]&&i.convertToString(e[a.populator.params.key])!==i.convertToString(n[t])||(u=!0)}),o=o&&u}else if(f.isObject(r[s])){var l=!1;n[t]&&r[s][a.populator.params.key]!==n[t]||(l=!0),o=o&&l}else n[t]&&r[s]!==n[t]&&(o=!1)}}),o}):r},e.prototype.convertToString=function(e){return e?e.toString():e},e.prototype.getRequestKey=function(e,t){return e.path&&e.path!==r.FormBuilderEnums.ROOT?this.getRequestKeyByPath(e.path,t):e.name},e.prototype.getRequestKeyByPath=function(e,t){if(!e)return"";var n=e.split("/"),i=n[n.length-1],o=i.indexOf("{"),a=i.indexOf("}"),s=i.substring(o+1,a);if(o>=0){var c=l(s,":");c[0]===r.FormBuilderEnums.FIELD&&(i=t[c[1]])}return i},e.prototype.isDuplicatedFieldExists=function(e,t){var n=this.getFieldByName(e,t.duplicateOf);return n&&(t.mandatory=n.mandatory,t.mandatoryIndicator=n.mandatoryIndicator),n&&n.options&&n.options.length>0},e.prototype.getFieldByName=function(e,t){var n=s(e,function(e){return e.name===t});return n[0]},e.prototype.getIlsDataByPath=function(e,t,n){var r=t.path;return r?this.parseDataAndKeyFromPath(e,r,n):{key:t.name,data:e}},e.prototype.parseDataAndKeyFromPath=function(e,t,n){var r;return c(t.split("/"),function(t,i,o){if(i===o.length-1)r=t;else{if(e){if(f.isArray(e)){var a=t.indexOf("{");if(a>0){var c=t.indexOf("}"),u=t.substring(a+1,c);t=t.substring(0,a);var p=l(u,":");e=s(e,function(e){return e[p[1]]===n[p[0]]})}e&&(e=e[0])}}else e=[];e&&(e=e[t])}}),r=this.getRequestKeyByPath(t,n),{key:r,data:e}},e.prototype.parseTimeForMultiSelect=function(e,t,n){return t.populator&&t.populator.params?t.populator.params.func?t.populator.params.func(t,e):{label:e[t.populator.params.key],value:e[t.populator.params.value]}:[]},e.prototype.updateFormData=function(e,t,n){t.populator&&t.populator.deleteFromFormDataIfHidden&&"true"===t.populator.deleteFromFormDataIfHidden&&t.uiType===r.FormBuilderEnums.UI_TYPE.HIDDEN?delete e[t.name]:n?e[t.name]=n:delete e[t.name],t.uiType===r.FormBuilderEnums.UI_TYPE.DROP_DOWN&&(n?(t.mandatory&&(t.mandatoryIndicator=!0),t.mandatory=!1):t.mandatoryIndicator&&(t.mandatory=!0))},e.prototype.otherInstitutionChosen=function(e,t,n,i){var o=i[0];n.preferredPickupInstitution===o.preferredPickupInstitutionDefault?e.uiType=r.FormBuilderEnums.UI_TYPE.HIDDEN:e.uiType=e.origUiType},e}());t.AbstractRequest=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(11),c=n(2),u=n(109),l=n(10),f=n(48),p=n(7),d=n(4),h=n(256),m=n(60),g=n(140),y=n(39),v=n(81),b=n(3),S=n(20),_=n(79),O=n(1),T=n(179),E=n(112),w=n(49),I=n(42),R=n(54),P=n(21),j=n(9),A=n(1),C=n(176),$=n(5),D=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b,S,_){var O=this;this.configurationUtil=e,this.searchService=t,this.searchStateService=n,this.resultUtil=r,this.cheetah=i,this.$http=o,this.$location=a,this.userSessionManagerService=s,this.jwtUtilService=c,this.$translate=u,this.searchUtil=l,this.favoritesService=f,this.fullViewPageService=p,this.templateUtil=d,this.restBaseURLs=h,this.$state=m,this.$q=g,this.$rootScope=y,this.changeLangService=v,this.filterInstitution=b,this.mappingTablesCache=S,this.partiallyTranslatedLocalFieldsUtil=_,this.isChosen=[],this.chosen=[],this.searchChosen=[],this.items=[],this.searchItems=[],this.searchChosenItems=[],this.chosenItems=[],this._selectAll=!1,this._enableOrDisableToolBar=!1,this._openedFromTopActionBar=!1,this.allOoRegexp=new RegExp("\\$\\$O(.*),?","g"),this.showPins={},this._isFullViewOverlayOpen=!1,this._pinnedToFav=!1,this.selectedSearchRecordsCounter=0,this.selectedSearchRecordsCounter=0,this.UPDATE_FAVORITES_URL=h.favoritesBaseURL+"/",this.SHOW_PNX_IN_XML_URL=h.showPnxInXmlUrl,this.GET_ITEM_API_URL=h.pnxBaseURL,this.userSessionManagerService.signInObservable.subscribe(function(){O.buildJsonOdIdsAndPins()})}return e.prototype.handleDialogHide=function(e,t){if(this.isFullViewOverlayOpen=!1,window.onpopstate=void 0,!this.isInGetFrbrEvent){this.restorePreviousUrl(e),this.$state.current.name==d.STATE_NAMES.FAVORITES&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup&&this.favoritesService.needToChangeUrl&&(this.favoritesService.needToChangeUrl=!1,this.favoritesService.getItemsFromServer());var n=document.getElementById("SEARCH_RESULT_RECORDID_"+b(t,"pnx.control.recordid[0]"));n&&n.focus()}},e.prototype.restorePreviousUrl=function(e){this.$location.url(e)},e.prototype.changeFullDisplayUrl=function(e){var t=this,n=this.templateUtil.getFullDeepLinkAbsPath(e);this.preventDialogClose=!0,history.replaceState({},"fullDisplay",n);var r;r=this.$rootScope.$on("$stateChangeStart",function(e,n,i,o,a){e.preventDefault(),r(),r=t.$rootScope.$on("$locationChangeStart",function(e){e.preventDefault(),r()})})},e.prototype.parseDisplayLines=function(e,t){var n,r=$.bind(this,this.parseLineUnbound,e),i=this.resultUtil.isFrbr(e)&&1===this.searchService.getFrbrDisplay()&&"PC"!==e.context&&this.isGenericRecord(e)&&!this.isFavoriteState()&&this.resultUtil.isMultipleVersions(e);if("servicesPage"===this.$state.current.name){if(this.configurationUtil.isSuprima())var o=[{delimiter:",",items:"title"},{delimiter:"; ",items:"creator,contributor"},{delimiter:",",items:"creationdate"},{delimiter:",",items:"identifier"},{delimiter:",",items:"ispartof"}];else var o=[{delimiter:",",items:"title"},{delimiter:";",items:"creator,creationdate"},{delimiter:",",items:"identifier"},{delimiter:",",items:"ispartof"}];n=v(o,r)}else if(t){var a=[{delimiter:" ",items:"title"},{delimiter:" ",items:"description"}];n=v(a,r)}else n=i?v(this.configurationUtil.getBriefResultFrbrGenericConfiguration().resultview,r):v(this.configurationUtil.getBriefResultConfiguration().resultview,r);return y(n,function(e){return e.values.length>0})},e.prototype.isGenericRecord=function(e){if(this.getSearchObject().facets){var t=this.getSearchObject().facets.map(function(e,t,n){return e.name});return t.indexOf("frbrgroupid")===-1}return!0},e.prototype.getSearchObject=function(){return this.searchService.getSearchObject()},e.prototype.getValueObjectUnbound=function(e,t,n,r,i){var o=this,a=e.pnx.display[r]||e.pnx.display[r.toLowerCase()],s=!1,c=[];if(this.configurationUtil.getFullViewConfiguration().resultitemview.filter(function(e){return e.items===r}).length>0&&(s=this.configurationUtil.getFullViewConfiguration().resultitemview.filter(function(e){return e.items===r})[0].useTranslations),!a)return{codes:[""],values:a,text:a,key:r,clazz:"media-"+r};a.forEach(function(e,t){s?o.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(e)?o.partiallyTranslatedLocalFieldsUtil.parsePartiallyTranslatedLocalField(e).then(function(e){c.push(e)}):e.toLowerCase().trim()!==o.$translate.instant(e.toLowerCase())&&(a[t]=o.$translate.instant(e.toLowerCase())):o.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(e)&&(a[t]=o.partiallyTranslatedLocalFieldsUtil.removeTranslationTags(e))}),a=a.map(function(e){return o.remove$$OValues(e)}),a=this.filterInstitution.filterAndNormalizeData(e,a);var u=a,l=";",f=$.isArray(a)&&a.filter(function(e){return e.indexOf("$$")>-1}).length>0;l="suprima"===this.configurationUtil.getBackendSystem()?f?l:t:f?l:n;var p=$.isArray(a)?a.join(l):a;if("source"===r)p=this.parseSourceCodes(u);else if(["identifier","description","relation"].indexOf(r)>-1)p=this.parseCodes(p);else{if(!this.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(p))return{codes:[""],values:[p],text:[p],key:r,clazz:"media-"+r};p={codes:[],values:[p]}}return p.codes.forEach(function(e,t){var n="";if(e){var i="";"source"===r&&(i=e.replace("fulldisplay.datasource."," ")),o.$translate(e,[],"",i).then(function(e){"source"===r?o.$translate(e,[],"",e).then(function(e){p.codes[t]=e,n=o.calculateTextPerCodeAndValue(e,p,t),c.push(n)}):("identifier"===r&&(e+=" "),p.codes[t]=e,n=o.calculateTextPerCodeAndValue(e,p,t),c.push(n))})}else n=p.values[t],c.push(n)}),{codes:p.codes,values:p.values,text:c,key:r,clazz:"media-"+r}},e.prototype.calculateTextPerCodeAndValue=function(e,t,n){var r=e;return t.values[n]&&(r=r+" "+t.values[n]),r},e.prototype.parseLineUnbound=function(e,t,n){var r=t.delimiter,i=0===n?"<br/>":r,o=$.bind(this,this.getValueObjectUnbound,e,r,i),a=t.items.split(",");return{values:a.map(o).filter(function(e,t,n){return e.values}),delimiter:r}},e.prototype.addUserFavorite=function(e){var t=this.buildPaylodOfAdd(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.buildPaylodOfAdd=function(e){var t=e.context,n=e.recordId;e.pnx&&(n=e.pnx.control.recordid[0]),void 0===t&&(t=n.startsWith("TN_")?"PC":"L");var r={add:{records:[{recordId:n,context:t,pnx:e.pnx,institutionCode:e.institutionCode}]}};return r},e.prototype.addUserFavoritesFewRecords=function(e){var t=this.buildPaylodOfAddFewRecords(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.buildPaylodOfAddFewRecords=function(e){var t,n=[];e.forEach(function(e){var r=e.context,i=e.recordId;e.pnx&&(i=e.pnx.control.recordid[0]),void 0===r&&(r=i.startsWith("TN_")?"PC":"L"),t={recordId:i,context:r,pnx:e.pnx,institutionCode:e.institutionCode},n.push(t)});var r={add:{records:n}};return r},e.prototype.removeUserFavorite=function(e){var t=this.buildPaylodOfRemove(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.buildPaylodOfRemove=function(e){var t={delete:{records:[{recordId:e}]}};return t},e.prototype.removeUserFavoritesFewRecords=function(e){var t=this.buildPaylodOfRemoveFewRecords(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.buildPaylodOfRemoveFewRecords=function(e){for(var t,n=[],r=0;r<e.length;r++)t={recordId:e[r]},n.push(t);var i={delete:{records:n}};return i},e.prototype.saveJsonOdIdsAndPins=function(e,t){this.showPins[e]=t},e.prototype.saveJsonsOdIdsAndPins=function(e,t){var n=this;e.map(function(e){return n.saveJsonOdIdsAndPins(e,t)})},e.prototype.getShowPinForRecordId=function(e){return this.showPins[e]},Object.defineProperty(e.prototype,"selectAll",{get:function(){return this.checkIfAllSelected()?this._selectAll=!0:this._selectAll=!1,this._selectAll},set:function(e){this._selectAll=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableOrDisableToolBar",{get:function(){return this._enableOrDisableToolBar},set:function(e){this._enableOrDisableToolBar=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openedFromTopActionBar",{get:function(){return this._openedFromTopActionBar},set:function(e){this._openedFromTopActionBar=e},enumerable:!0,configurable:!0}),e.prototype.saveJsonOdIdsAndIfChosen=function(e,t){this.isChosen[e]=t},e.prototype.saveJsonOdIdsAndItems=function(e,t){t?(this.chosenItems.push(e),this.searchChosenItems.push(e),this.selectedSearchRecordsCounter++):this.removeElementFromItemsList(e)},e.prototype.removeElementFromItemsList=function(e){for(var t=0;t<this.chosenItems.length;t++)this.chosenItems[t].pnx.control.recordid[0]===e.pnx.control.recordid[0]&&(this.chosenItems.splice(t,1),t=this.chosenItems.length);for(var t=0;t<this.searchChosenItems.length;t++)this.searchChosenItems[t].pnx.control.recordid[0]===e.pnx.control.recordid[0]&&(this.searchChosenItems.splice(t,1),t=this.searchChosenItems.length)},e.prototype.getIfChosenForRecordId=function(e){return void 0!==this.isChosen[e]&&this.isChosen[e]},e.prototype.getChosenRecords=function(){this.chosen.length=0;var e=this.favoritesService.getFullList();if(void 0!==e)for(var t=this.returnArrayOfRecordIds(e),n=0;n<t.length;n++)this.isChosen[t[n]]&&this.chosen.push(t[n]);return this.chosen},e.prototype.getSearchChosenRecords=function(){this.searchChosen.length=0;var e=this.searchResults();if(void 0!==e)for(var t=0;t<e.length;t++)this.isChosen[e[t].pnx.control.recordid[0]]&&this.searchChosen.push(e[t]);return this.searchChosen},e.prototype.checkIfAllSelected=function(){var e=this.favoritesService.getFullList();if(void 0!==e&&0!==e.length){var t=this.returnArrayOfRecordIds(e);if(0===h(t,this.getChosenRecords()).length)return!0}return!1},e.prototype.returnArrayOfRecordIds=function(e){var t=this;return e.map(function(e){return t.returnRecordIds(e)})},e.prototype.chooseAll=function(){var e=this,t=$.copy(this.favoritesService.getFullList());if(t.map(function(t){return e.saveJsonOdIdsAndIfChosen(e.returnRecordIds(t),e._selectAll)}),this._selectAll)if(this.isGuest())this.chosenItems=t;else{this.favoritesService.isSelectAllDone=!1;var n=setTimeout(function(){e.favoritesService.isFetchingAllItems=!0},3e3);this.favoritesService.returnPnxForRecords(t).then(function(t){var n=t.data;n=n.filter(e.favoritesService.filterObject),n.forEach(function(e,t,n){return e.context="U"}),e.chosenItems=e.chosenItems.concat(n)}).finally(function(){clearTimeout(n),e.favoritesService.isSelectAllDone=!0,e.favoritesService.isFetchingAllItems=!1})}else this.chosenItems=[]},e.prototype.searchChooseAllVisible=function(){var e=this,t=$.copy(this.searchResults());if(t.map(function(t){return e.saveJsonOdIdsAndIfChosen(t.pnx.control.recordid[0],e._selectAll)}),!this._selectAll){var n=this.searchChosenItems;n.map(function(t){return e.saveJsonOdIdsAndIfChosen(t.pnx.control.recordid[0],e._selectAll)})}this.searchChosenItems=this._selectAll?t:[]},e.prototype.checkSearchIfAllSelected=function(){var e=this.searchResults();return void 0!==e&&0!==e.length&&0===h(e,this.getSearchChosenRecords()).length},e.prototype.checkIfJumpedByPageNav=function(){return 0!=this.$state.params.offset},e.prototype.loadAndSelectTopMax=function(e){var t=this,n=this.getSearchObject(),r=n.to,i=e-r,o=n.bulkSize;i>0&&(n.offset=n.offset+n.bulkSize,n.bulkSize=i,this.searchService.needToRender=!1,this.searchService.search(n,!1).then(function(){t.selectTopMax(e)}).finally(function(){n.bulkSize=o,n.offset=n.offset-n.bulkSize,t.searchService.needToRender=!0}))},e.prototype.selectTopMax=function(e){var t=this,n=this.searchResults();n=n.concat(this.searchStateService.getTempResultList()),n.map(function(e){return t.saveJsonOdIdsAndIfChosen(e.pnx.control.recordid[0],!1)}),n=n.slice(0,e),n.map(function(e){return t.saveJsonOdIdsAndIfChosen(e.pnx.control.recordid[0],!0)}),this.searchChosenItems=n},e.prototype.getSearchChosenItems=function(){return this.searchChosenItems},e.prototype.getChosenItems=function(){var e=this,t=this.chosenItems.filter(function(t){return m(e.chosen,t.pnx.control.recordid[0])>-1});t=g(t,"pnx.control.recordid[0]"),this.items.length=0;for(var n=0;n<t.length;n++)this.items.push(t[n]);return this.items},e.prototype.returnRecordIds=function(e){return this.isGuest()&&void 0!==e.pnx?e.pnx.control.recordid[0]:e},e.prototype.getIsChosen=function(){return this.isChosen},e.prototype.isGuest=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"===e},e.prototype.buildJsonOdIdsAndPins=function(){var e=this;this.showPins={};var t=this.jwtUtilService.getDecodedToken().user;t&&this.userSessionManagerService.createOrGetUserArea(t).then(function(t){e.userSessionManagerService.area=t;for(var n=0;n<e.userSessionManagerService.area.length;n++){var r=e.userSessionManagerService.area[n];e.isGuest()?e.showPins[r.pnx.control.recordid[0]]=!0:e.showPins[r]=!0}})},e.prototype.resetShowPin=function(){this.showPins={}},e.prototype.remove$$OValues=function(e){var t=e.match(this.allOoRegexp);if(t){for(var n=0;n<t.length;n++)e=e.replace(t[n],"");e=e.replace(/\$\$O(.*)/,"")}return e},e.prototype.parseSourceCodes=function(e){var t={codes:[],values:[]};return e.forEach(function(e,n){e=e.replace("$$V",""),e="fulldisplay.datasource."+e,t.codes.push(e),t.values.push("")}),t},e.prototype.parseCodes=function(e){if(e.indexOf("$$C")===-1)return{codes:[""],values:[e.replace(/\$\$./g," ")]};for(var t={codes:[],values:[]},n=e.split("$$C"),r=1;r<n.length;r++){e=n[r].split("$$V"),t.codes.push("fulldisplay.constants."+e[0].trim());for(var i="",o=1;o<e.length;o++)i+=e[o];t.values.push(i)}return t},e.prototype.pinToFavoritesFromToolBar=function(e){var t=this.jwtUtilService.getDecodedToken().user;this.isGuest()?this.pinToFavoritesForGuest(t,e):this.pinToFavoritesForUser(t,e)},e.prototype.pinToFavoritesForGuest=function(e,t){var n=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(r){n.userSessionManagerService.area=r,t=t.filter(function(e){return!r.find(function(t){return t.pnx.control.recordid[0]==e.pnx.control.recordid[0]})}),n.userSessionManagerService.extendUserArea(t).then(function(){t.map(function(e){return n.saveJsonOdIdsAndPins(e.pnx.control.recordid[0],!0)}),n.favoritesService.getItemsFromLocalForage(e)})})},e.prototype.pinToFavoritesForUser=function(e,t){var n=this;this.pinnedToFav=!1,this.userSessionManagerService.createOrGetUserArea(e).then(function(e){n.userSessionManagerService.area=e;var r=t.map(function(e){return e.pnx.control.recordid[0]});n.addUserFavoritesFewRecords(t).then(function(){n.userSessionManagerService.extendUserArea(r).then(function(){r.map(function(e){return n.saveJsonOdIdsAndPins(e,!0)}),n.favoritesService.getItemsFromServer()})}).finally(function(){n.pinnedToFav=!0})})},e.prototype.unpinFavoritesFromToolBar=function(e){var t=this.jwtUtilService.getDecodedToken().user;this.isGuest()?this.unpinFavoritesForGuest(t,e):this.unpinFavoritesForUser(t,e)},e.prototype.unpinFavoritesForGuest=function(e,t){var n=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(r){n.userSessionManagerService.area=r,n.userSessionManagerService.removeArrayOfRecords(t).then(function(){n.saveJsonsOdIdsAndPins(t,!1),n.favoritesService.getItemsFromLocalForage(e)})})},e.prototype.unpinFavoritesForUser=function(e,t){var n=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){n.userSessionManagerService.area=e,n.removeUserFavoritesFewRecords(t).then(function(){n.userSessionManagerService.removeArrayOfRecords(t).then(function(){n.saveJsonsOdIdsAndPins(t,!1),n.favoritesService.getItemsFromServer()})})})},e.prototype.resetIsChosen=function(){this.isChosen=[],this.chosenItems=[],this.searchChosenItems=[],this.selectedSearchRecordsCounter=0},Object.defineProperty(e.prototype,"isInGetFrbrEvent",{get:function(){return this._isInGetFrbrEvent},set:function(e){this._isInGetFrbrEvent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFullViewIndex",{get:function(){return this._currentFullViewIndex},set:function(e){this._currentFullViewIndex=e},enumerable:!0,configurable:!0}),e.prototype.isServicePageState=function(){return"servicesPage"===this.$state.current.name},e.prototype.isFavoriteState=function(){return this.$state.current.name==d.STATE_NAMES.FAVORITES},e.prototype.getShowBookmark=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()!==!0},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e.prototype.changeStringDirectionToRtl=function(e){if("ltr"==this.changeLangService.direction)return!1;if(0===e.length)return!1;var t=!1,n=!1,r=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,i=/[a-z]/i;return e.forEach(function(e){return e.text&&e.text.length&&e.text.forEach(function(e){t=t||r.test(e),n=n||i.test(e)})}),t&&n},e.prototype.dontChangeStringDirectionToRtl=function(e){if("ltr"==this.changeLangService.direction)return!1;if(0===e.length)return!1;var t=!1,n=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,r=/[a-z]/i;return t=n.test(e)||r.test(e)},Object.defineProperty(e.prototype,"isFullViewOverlayOpen",{get:function(){return this._isFullViewOverlayOpen},set:function(e){this._isFullViewOverlayOpen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pinnedToFav",{get:function(){return this._pinnedToFav},set:function(e){this._pinnedToFav=e},enumerable:!0,configurable:!0}),e.prototype.ShowPnxInXmlUrl=function(e){var t="primo-explore/";"suprima"===this.configurationUtil.getBackendSystem()&&(t="discovery/");var n=this.$location.absUrl().substring(0,this.$location.absUrl().indexOf(t)-1),r="";if(e){var i=O.getInstitutionCode(),o=this.templateUtil.getDeepLinkPath(e),a=this.templateUtil.prmParseKeyValue(o.substr(o.indexOf("?")+1)),s=this.fullViewPageService.createUrl(a.context,a.docid,a.id,a.inst,a.search_scope,a.adaptor,a.isFrbr,a.showPnx);s=s.replace(this.GET_ITEM_API_URL,n+this.SHOW_PNX_IN_XML_URL),r=s+"&inst="+i+"&showPnx=true&jwtAsParam="+this.jwtUtilService.getJwtFromLocalStorage()}return r},e.prototype.getTextDirection=function(e){var t=this.changeLangService.direction,n="rtl"===t?"direction-rtl":"direction-ltr",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",i="֑-߿יִ-﷽ﹰ-ﻼ",o=new RegExp("^[^"+r+"]*["+i+"]");return"ltr"==t&&o.test(e)&&(n="direction-rtl"),"rtl"!=t||o.test(e)||(n="direction-ltr"),n},e.prototype.isFirstRecord=function(){var e=this._currentFullViewIndex-Number(0|this.$state.params.offset)-1;return!this._currentFullViewIndex||0===e},e.prototype.isLastRecord=function(){if(!this.searchService.getResultObject()||!this.searchService.getResultObject().info||!this.searchService.getResultObject().info.total)return!1;var e=this._currentFullViewIndex,t=this.searchService.getResultObject().info.total;return!e||e===t},e.prototype.isLastRecordFav=function(){var e=this._currentFullViewIndex,t=this.favoritesService.getTotalItems();return!e||e===t},e.prototype.searchResults=function(){return this.searchService.getResultObject().data},e.prototype.currentResultIndex=function(){return this._currentFullViewIndex-Number(0|this.$state.params.offset)-1},e.prototype.getNextRecord=function(){var e=this;return this.$q(function(t,n){e.isLastResultInCurrentBulk()?(e.searchService.nextResults().then(function(n){e._currentFullViewIndex++,t(e.currentResultIndex())}),function(e){n()}):(e._currentFullViewIndex++,t(e.currentResultIndex()))})},e.prototype.getNextRecordFav=function(){return this.favoritesService.nextResults(),this._currentFullViewIndex++},e.prototype.getNextRecordJSearch=function(){this.searchResults(),this._currentFullViewIndex++},e.prototype.getNextRecordDBSearch=function(){this.searchResults(),this._currentFullViewIndex++},e.prototype.isLastResultInCurrentBulk=function(){var e=this.currentResultIndex(),t=this.searchResults();return e===t.length-1},e.prototype.getPreviousRecord=function(){return this._currentFullViewIndex--,this.currentResultIndex()},e.prototype.isRelatedItemsConfiguredPrimo=function(e){var t=this.mappingTablesCache.findByProperties("Related Items",{source1:e});return!(t.length>0)||"Yes"===t[0].target},e.prototype.isRelatedItemsConfigured=function(e){return this.isSuprima()?1==A.getAttributesMap().relatedItemsActive:this.isRelatedItemsConfiguredPrimo(e)},r([w.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"restorePreviousUrl",null),e=r([a.Injectable(),o(5,a.Inject("$http")),o(6,a.Inject("$location")),o(9,a.Inject("$translate")),o(14,a.Inject("restBaseURLs")),o(15,a.Inject("$state")),o(16,a.Inject("$q")),o(17,a.Inject("$rootScope")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof s.SearchService&&s.SearchService)&&n||Object,"function"==typeof(D="undefined"!=typeof P.SearchStateService&&P.SearchStateService)&&D||Object,"function"==typeof(L="undefined"!=typeof u.ResultUtil&&u.ResultUtil)&&L||Object,"function"==typeof(k="undefined"!=typeof R.Cheetah&&R.Cheetah)&&k||Object,Object,Object,"function"==typeof(M="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&M||Object,"function"==typeof(x="undefined"!=typeof p.JwtUtilService&&p.JwtUtilService)&&x||Object,Object,"function"==typeof(F="undefined"!=typeof T.SearchUtil&&T.SearchUtil)&&F||Object,"function"==typeof(U="undefined"!=typeof f.FavoritesService&&f.FavoritesService)&&U||Object,"function"==typeof(B="undefined"!=typeof E.FullViewPageService&&E.FullViewPageService)&&B||Object,"function"==typeof(N="undefined"!=typeof I.TemplateUtil&&I.TemplateUtil)&&N||Object,Object,Object,Object,Object,"function"==typeof(q="undefined"!=typeof S.ChangeLangService&&S.ChangeLangService)&&q||Object,"function"==typeof(H="undefined"!=typeof _.FilterInstitution&&_.FilterInstitution)&&H||Object,"function"==typeof(V="undefined"!=typeof j.MappingTablesCache&&j.MappingTablesCache)&&V||Object,"function"==typeof(Y="undefined"!=typeof C.PartiallyTranslatedLocalFieldsUtil&&C.PartiallyTranslatedLocalFieldsUtil)&&Y||Object])],e);var t,n,D,L,k,M,x,F,U,B,N,q,H,V,Y}();t.BriefResultService=D},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=function(){function e(e,t){this.$state=e,this.$stateParams=t}return e.prototype.isDBSearch=function(){return this.$state.current.name===s.STATE_NAMES.DB_SEARCH||this.$state.current.name===s.STATE_NAMES.DB_FULL_DISPLAY},e=r([a.Injectable(),o(0,a.Inject("$state")),o(1,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object])],e)}();t.DatabasesService=c},function(e,t,n){function r(e){return i(e,o|a)}var i=n(218),o=1,a=4;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);
return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(563),a=function(){function e(){}return e.prototype.create=function(e){return void 0===e&&(e=s.GENERAL),new o.GeneralAlertMsg(e)},e=r([i.Injectable()],e)}();t.AlertFactory=a;var s;!function(e){e[e.GENERAL=0]="GENERAL",e[e.SIGNIN=1]="SIGNIN",e[e.REQUEST=2]="REQUEST",e[e.SIMPLE=3]="SIMPLE",e[e.SIMPLE_WITHOUT_DISMISS=4]="SIMPLE_WITHOUT_DISMISS",e[e.BROWSE_GAP=5]="BROWSE_GAP"}(s=t.ALERT_MSG_TYPE||(t.ALERT_MSG_TYPE={})),t.default=[]},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(410),o=r(i),a=new o.default("$component");t.componentStore=a;var s=new o.default("$provider");t.providerStore=s;var c=new o.default("$bundle");t.bundleStore=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(19),s=n(35).Observable;n(594),n(601),n(608),n(611);var c=n(614).animationFrame,u=function(){function e(){var e=c;this.msElapsed=s.defer(function(){var t=e.now();return s.interval(0,e).map(function(){return e.now()-t})})}return e.prototype.focusOn=function(e){return this.elementFocus(e),e},e.prototype.elementFocus=function(e){if(e){if("string"==typeof e&&(e=document.getElementById(e)),!e)return;var t="0"===e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus(),t&&e.setAttribute("tabindex","0")}},e.prototype.scrollTo=function(e,t,n,r){var i=this;void 0===r&&(r=70);var o=this.getScrollContainer(t,n),a=e;if(a instanceof HTMLElement||(a=document.getElementById(e)),a){var s,c=this.currentYPosition(o);a&&(s=this.elmYPosition(a)-this.elmYPosition(o)-r),s=s<0?0:s;var u=o.scrollHeight-o.offsetHeight;s=Math.min(u,s);var l=s>c?s-c:c-s;if(l<100)return o.scrollTop=s,void this.focusOn(a);var f=Math.round(l/100)+30;f>=150&&(f=150),this.existingAnimationSubscription&&this.existingAnimationSubscription.unsubscribe(),this.existingAnimationSubscription=this.msElapsed.map(function(e){return Math.ceil(f*e/1e3)}).takeWhile(function(){return Math.abs(o.scrollTop-s)>1}).subscribe(function(e){var t=o.scrollTop;s>c&&(o.scrollTop=Math.min(s,t+e)),s<c&&(o.scrollTop=Math.max(s,t-e))},function(){console.log("something went wrong during smooth scroll"),i.focusOn(a)},function(){i.focusOn(a)})}},e.prototype.currentYPosition=function(e){return e.scrollTop},e.prototype.elmYPosition=function(e){for(var t=e.offsetTop,n=e;n.offsetParent&&n.offsetParent!=document.body;)n=n.offsetParent,t+=n.offsetTop;return t},e.prototype.getScrollContainer=function(e,t){if(e)return document.getElementById(e);if(t)return document.querySelector(t);var n=!!document.documentMode,r=window;return a.isBrowserSafari()||Object.prototype.toString.call(r.HTMLElement).indexOf("Constructor")>0||!n&&r.StyleMedia?document.body:document.body.parentNode},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.SmoothScrollUtil=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(43),u=n(2),l=function(){function e(e,t,n,r,i,o){this.restBaseURLs=e,this.$http=t,this.$translate=n,this.$timeout=r,this.configurationUtil=i,this.httpService=o,this.requestsErrorCounter=0,this.servicesListIsLoading=!0,this.serviceListRequestInProgress=!1,this.opacBaseUrl=e.opacBaseUrl,this.ilsServices={services:{path:this.opacBaseUrl,method:"GET"},locations:{path:this.restBaseURLs.ILSServicesBaseURL+"/holdings",method:"POST"},requests:{path:"",method:"GET"}}}return Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this._responseStatus},set:function(e){this._responseStatus=e},enumerable:!0,configurable:!0}),e.prototype.getResponseMessage=function(){return this.responseStatus&&"ok"===this.responseStatus.msg?this.configurationUtil.isSuprima?"nui.request.success":"Your request was successfully placed":this.responseStatus?this.responseStatus.msg:void 0},e.prototype.getServices=function(){return this.ilsServices},e.prototype.updateService=function(e,t){this.ilsServices[e]=t},e.prototype.makeIlsRequest=function(e,t,n,r){var i=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="");var o=this.ilsServices[e];r+=(r?"&":"?")+"lang="+this.$translate.use();var a={method:n||o.method,url:o.path+r,params:"GET"===o.method?t:null,data:"POST"===o.method?t:null};return"services"===e&&(this.servicesListIsLoading=!1),this.$http(a).then(function(e){return i.ilsRequestSuccess(e.data)},function(n){return i.ilsRequestFailure(n,e,t)}).finally(function(){"services"===e&&(i.servicesListIsLoading=!0)})},e.prototype.makeIlsCall=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n="GET"),this.httpService.call(n,e["link-to-service"],t)},e.prototype.getIlsServicesList=function(e,t,n,r){var i=this;void 0===r&&(r=!1);var o=this.ilsServices.services;o.path=this.opacBaseUrl+"/"+e,n&&(o.path=o.path+"/svcId/"+n),this.updateService("services",o);var a;return t&&(a={"record-institution":t}),this.serviceListRequestInProgress=r,this.makeIlsRequest("services",a,"").finally(function(){i.serviceListRequestInProgress=!1})},e.prototype.isServicesListIsLoadingDone=function(){return this.servicesListIsLoading},e.prototype.ilsRequestSuccess=function(e){return this.requestsErrorCounter=0,e},e.prototype.ilsRequestFailure=function(e,t,n){var r=this;if(this.requestsErrorCounter++,this.requestsErrorCounter<3)return this.$timeout(function(){return r.makeIlsRequest(t,n,"")},2e3);throw e},e=r([a.Injectable(),o(0,a.Inject("restBaseURLs")),o(1,a.Inject("$http")),o(2,a.Inject("$translate")),o(3,a.Inject("$timeout")),i("design:paramtypes",[Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof s.HttpService&&s.HttpService)&&n||Object])],e);var t,n}();t.OpacService=l;var f=function(){function e(e,t){this.isSuccess=e,this.msg=t}return e}();t.StatusMsg=f,t.default=[c.default.name]},function(e,t,n){"use strict";var r=n(71),i=n(452),o=n(274),a=n(455),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();t.Observable=s},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):c(e)}var i=n(514),o=n(527),a=n(74),s=n(15),c=n(532);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(17),s=n(222),c=n(1),u="sharedSessionStorageManifest",l="sendSharedSessionStorageData",f="removeSharedSessionStorageData",p="getAllSharedSessionStorageDataRequest",d=function(){function e(e,t){var n=this;this.storageUtil=e,this.createNewSharedSessionStorageManifest(),this.uuid=t.generateUUID(),window.addEventListener?window.addEventListener("storage",function(e){n.onStorageEvent(e)},!1):window.attachEvent("onstorage",function(e){n.onStorageEvent(e)});var r={uuid:this.uuid,vid:c.getVid()},i=JSON.stringify(r);this.storageUtil.localStorage.setItem(p,i)}return e.prototype.createNewSharedSessionStorageManifest=function(){if(!this.storageUtil.sessionStorage.getItem(u)){var e=[];this.storageUtil.sessionStorage.setItem(u,JSON.stringify(e))}},e.prototype.onStorageEvent=function(e){if(e||(e=window.event),e.newValue)switch(e.key){case l:this.receiveDataEvent(e);break;case f:this.removeDataEvent(e);break;case p:this.sendAllSharedSessionStorageData(e);default:return}},e.prototype.getManifest=function(){var e=this.storageUtil.sessionStorage.getItem(u);return JSON.parse(e)},e.prototype.addKeyToManifest=function(e){var t=this.getManifest();t.indexOf(e)===-1&&(t.push(e),this.storageUtil.sessionStorage.setItem(u,JSON.stringify(t)))},e.prototype.removeKeyFromManifest=function(e){var t=this.getManifest(),n=t.indexOf(e);n>-1&&(t.splice(n,1),this.storageUtil.sessionStorage.setItem(u,JSON.stringify(t)))},e.prototype.sendAllSharedSessionStorageData=function(e){var t=JSON.parse(e.newValue);if(t.uuid!==this.uuid&&t.vid==c.getVid())for(var n=this.getManifest(),r=0,i=n;r<i.length;r++){var o=i[r];this.setItem(o,this.getItem(o))}},e.prototype.receiveDataEvent=function(e){var t=JSON.parse(e.newValue);t.uuid!==this.uuid&&t.vid==c.getVid()&&(this.addKeyToManifest(t.key),this.storageUtil.sessionStorage.setItem(t.key,t.data))},e.prototype.removeDataEvent=function(e){var t=JSON.parse(e.newValue);t.uuid!==this.uuid&&t.vid==c.getVid()&&(this.storageUtil.sessionStorage.removeItem(t.key),this.removeKeyFromManifest(t.key))},e.prototype.setItem=function(e,t){var n={key:e,uuid:this.uuid,data:t,vid:c.getVid()},r=JSON.stringify(n);this.storageUtil.localStorage.setItem(l,r),this.storageUtil.localStorage.removeItem(l),this.storageUtil.sessionStorage.setItem(e,t),this.addKeyToManifest(e)},e.prototype.getItem=function(e){return this.storageUtil.sessionStorage.getItem(e)},e.prototype.removeItem=function(e){var t={key:e,uuid:this.uuid,vid:c.getVid()},n=JSON.stringify(t);this.storageUtil.localStorage.setItem(f,n),this.storageUtil.sessionStorage.removeItem(e),this.storageUtil.localStorage.removeItem(f),this.removeKeyFromManifest(t.key)},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.StorageUtil&&a.StorageUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof s.UUIDGenerator&&s.UUIDGenerator)&&n||Object])],e);var t,n}();t.SharedSessionStorage=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(338),c=function(){function e(){this._ilsDateFormat=a.getIlsDateFormat(),this._primoShortDateFormat=a.getPrimoShortDateFormat(),this._primoLongDateFormat=a.getPrimoLongDateFormat()}return Object.defineProperty(e.prototype,"primoShortDateFormat",{get:function(){return this._primoShortDateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primoLongDateFormat",{get:function(){return this._primoLongDateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsDateFormat",{get:function(){return this._ilsDateFormat},enumerable:!0,configurable:!0}),e.prototype.convertDateStringToDateType=function(e,t){if(e&&t){for(var n=0,r=0,i=0,o=0,a=0,s=0,c=0;c<e.length;c++){var u=e[c];switch(t[c]){case"y":n=10*n+parseInt(u);break;case"M":r=parseInt(u)>=0?10*r+parseInt(u):this.extractMonth3Letters(e,t,e.substring(c,c+3)),this.isthreeLetterMonth(t)&&(c+=2);break;case"d":i=10*i+parseInt(u);break;case"h":o=10*o+parseInt(u);break;case"m":a=10*a+parseInt(u);break;case"s":s=10*s+parseInt(u)}}return new Date(n,r-1,i,o,a,s,0)}},e.prototype.extractMonth3Letters=function(e,t,n){return this.isthreeLetterMonth(t)?this.letterMonthToNumber(n):1},e.prototype.isthreeLetterMonth=function(e){return e.indexOf("-MMM-")>-1},e.prototype.letterMonthToNumber=function(e){var t={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12};return t[e.toLowerCase()]||1},e.prototype.fromString=function(e,t,n){return s(e,t).format(n)},e.prototype.convertIlsDateStringToPrimoDateString=function(e){return this.fromString(e,this._ilsDateFormat.toUpperCase(),this._primoShortDateFormat.toUpperCase())},e.prototype.convertPrimoDateStringToIlsDateString=function(e){return this.fromString(e,this._primoShortDateFormat.toUpperCase(),this._ilsDateFormat.toUpperCase())},e.prototype.convertDateTypeToIlsDateString=function(e){if(e)return s(e).format(this._ilsDateFormat.toUpperCase())},e.prototype.convertDateTypeToFormatString=function(e,t){return e?s(e).format(t.toUpperCase()):""},e.prototype.convertDateTypeToPrimoDateString=function(e){if(e)return s(e).format(this._primoShortDateFormat.toUpperCase())},e.prototype.convertIlsDateStringToDateType=function(e){return this.convertDateStringToDateType(e,this._ilsDateFormat)},e.prototype.convertPrimoDateStringToDateType=function(e){return this.convertDateStringToDateType(e,this._primoShortDateFormat)},e.prototype.convertPrimoDateStringToLongDateType=function(e){return this.convertDateStringToDateType(e,this._primoLongDateFormat)},e.prototype.convert24HourStringToDisplayString=function(e,t){return void 0===t&&(t=":"),this.fromString(e,"HHmm","HH"+t+"mm")},e.prototype.convertDateStringToDate=function(e,t){var n=s(e,t.toUpperCase(),!0);return n.isValid()?n.toDate():new Date(NaN)},e.prototype.convertDateANDTimeTypeToIlsDate=function(e){return e.date.setHours(e.hour),e.date.setMinutes(e.minute),e.date},e.prototype.convertBookingRequestDateANDTimeTypeToIlsDate=function(e){return e.date||(e={date:e,hour:"00",minute:"00"}),e.date.setHours(e.hour?e.hour:"00"),e.date.setMinutes(e.minute?e.minute:"00"),e.date},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.DateUtils=c},function(e,t,n){function r(e,t){var n=s(e)?i:o;return n(e,a(t,3))}var i=n(293),o=n(588),a=n(36),s=n(15);e.exports=r},function(e,t,n){"use strict";var r=n(13),i=1/0,o=function(){function e(){}return e.create=function(){return{}},e.contains=function(e,t){return e.hasOwnProperty(t)},e.baseGet=function(e,t,n){if(null!=e){e=r.toObject(e),void 0!==n&&n in e&&(t=[n]);for(var i=0,o=t.length;null!=e&&i<o;)e=r.toObject(e)[t[i++]];return i&&i==o?e:void 0}},e.getValueFromPath=function(t,n,i){var o=null==t?void 0:e.baseGet(t,r.toPath(n),n+"");return void 0===o?i:o},e.setValueInPath=function(e,t,n){if(null==e)return e;var i=t+"";t=null!=e[i]||r.isKey(t,e)?[i]:r.toPath(t);for(var o=-1,a=t.length,s=a-1,c=e;null!=c&&++o<a;){var u=t[o];r.isJsObject(c)&&(o==s?c[u]=n:null==c[u]&&(c[u]=r.isIndex(t[o+1])?[]:{})),c=c[u]}return e},e.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},e.set=function(e,t,n){e[t]=n},e.keys=function(e){return Object.keys(e)},e.size=function(t){return e.keys(t).length},e.isEmpty=function(e){for(var t in e)return!1;return!0},e.delete=function(e,t){delete e[t]},e.forEach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},e.values=function(e){return Object.keys(e).reduce(function(t,n){return t.push(e[n]),t},[])},e.merge=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},e.equals=function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],e[i]!==t[i])return!1;return!0},e.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!r.isPresent(e))throw new TypeError("Object.assign cannot be called with null or undefined");var i=Object.prototype.hasOwnProperty;if(Object.assign)return(u=Object).assign.apply(u,[e].concat(t));for(var o,a=Object(e),s=0;s<t.length;s++){o=Object(t[s]);for(var c in o)i.call(o,c)&&(a[c]=o[c])}return a;var u},e}();t.StringMapWrapper=o;var a=function(){function e(){}return e.create=function(){return[]},e.size=function(e){return e.length},e.createFixedSize=function(e){return new Array(e)},e.createGrowableSize=function(e){return new Array(e)},e.clone=function(e){return e.slice(0)},e.forEachWithIndex=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},e.first=function(e){return e?e[0]:null},e.last=function(e){return e&&0!=e.length?e[e.length-1]:null},e.indexOf=function(e,t,n){return void 0===n&&(n=0),e.indexOf(t,n)},e.contains=function(e,t){return e.indexOf(t)!==-1},e.reversed=function(t){var n=e.clone(t);return n.reverse()},e.concat=function(e,t){return e.concat(t)},e.insert=function(e,t,n){e.splice(t,0,n)},e.removeAt=function(e,t){var n=e[t];return e.splice(t,1),n},e.removeAll=function(e,t){for(var n=0;n<t.length;++n){var r=e.indexOf(t[n]);e.splice(r,1)}},e.remove=function(e,t){var n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)},e.clear=function(e){e.length=0},e.isEmpty=function(e){return 0==e.length},e.fill=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=null),Array.prototype.fill||(Array.prototype.fill=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=r>>0,o=i<0?Math.max(n+i,0):Math.min(i,n),a=arguments[2],s=void 0===a?n:a>>0,c=s<0?Math.max(n+s,0):Math.min(s,n);o<c;)t[o]=e,o++;return t}),e.fill(t,n,null===r?e.length:r)},e.equals=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.slice=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=null),e.slice(t,null===n?void 0:n)},e.splice=function(e,t,n){return e.splice(t,n)},e.sort=function(e,t){r.isPresent(t)?e.sort(t):e.sort()},e.toString=function(e){return e.toString()},e.toJSON=function(e){return JSON.stringify(e)},e.maximum=function(e,t){if(0==e.length)return null;for(var n=null,i=-(1/0),o=0;o<e.length;o++){var a=e[o];if(!r.isBlank(a)){var s=t(a);s>i&&(n=a,i=s)}}return n},e.find=function(e,t,n){if(r.isFunction(Array.prototype.find))return e.find(t,n);n=n||this;var i,o=e.length;if(!r.isFunction(t))throw new TypeError(t+" is not a function");for(i=0;i<o;i++)if(t.call(n,e[i],i,e))return e[i]},e.findIndex=function(e,t,n){if(r.isFunction(Array.prototype.findIndex))return e.findIndex(t,n);if(!r.isFunction(t))throw new TypeError("predicate must be a function");var i=Object(e),o=i.length;if(0===o)return-1;for(var a=0;a<o;a++)if(t.call(n,i[a],a,i))return a;return-1},e.isFlattenable=function(e){return r.isArray(e)||r.isArguments(e)},e.arrayPush=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},e.baseFlatten=function(t,n,r,i,o){void 0===r&&(r=e.isFlattenable),void 0===i&&(i=!1),void 0===o&&(o=[]);for(var a=-1,s=t.length;++a<s;){var c=t[a];n>0&&r(c)?n>1?e.baseFlatten(c,n-1,r,i,o):e.arrayPush(o,c):i||(o[o.length]=c)}return o},e.flatten=function(t){var n=t?t.length:0;return n?e.baseFlatten(t,1):[]},e.flattenDeep=function(t){var n=t?t.length:0;return n?e.baseFlatten(t,i):[]},e}();t.ListWrapper=a},function(e,t){"undefined"!=typeof e&&"undefined"!=typeof t&&e.exports===t&&(e.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return V(new(V(function(){},{prototype:e})),t)}function i(e){return H(arguments,function(t){t!==e&&H(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var t=[];return H(e,function(e,n){t.push(n)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=n);r<n;r++)if(r in e&&e[r]===t)return r;return-1}function c(e,t,n,r){var i,c=o(n,r),u={},l=[];for(var f in c)if(c[f]&&c[f].params&&(i=a(c[f].params),i.length))for(var p in i)s(l,i[p])>=0||(l.push(i[p]),u[i[p]]=e[i[p]]);return V({},u,t)}function u(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!=t[o])return!1}return!0}function l(e,t){var n={};return H(e,function(e){n[e]=t[e]}),n}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return H(n,function(n){n in e&&(t[n]=e[n])}),t}function p(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)s(n,r)==-1&&(t[r]=e[r]);return t}function d(e,t){var n=q(e),r=n?[]:{};return H(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function h(e,t){var n=q(e)?[]:{};return H(e,function(e,r){n[r]=t(e,r)}),n}function m(e){return e.then(n,function(){})&&e}function g(e,t){var r=1,o=2,c={},u=[],l=c,f=V(e.when(c),{$$promises:c,$$values:c});this.study=function(c){function d(e,n){if(v[n]!==o){if(y.push(n),v[n]===r)throw y.splice(0,s(y,n)),new Error("Cyclic dependency: "+y.join(" -> "));if(v[n]=r,B(e))g.push(n,[function(){return t.get(e)}],u);else{var i=t.annotate(e);H(i,function(e){e!==n&&c.hasOwnProperty(e)&&d(c[e],e)}),g.push(n,e,i)}y.pop(),v[n]=o}}function h(e){return N(e)&&e.then&&e.$$promises}if(!N(c))throw new Error("'invocables' must be an object");var m=a(c||{}),g=[],y=[],v={};return H(c,d),c=y=v=null,function(r,o,a){function s(){--S||(_||i(b,o.$$values),y.$$values=b,y.$$promises=y.$$promises||!0,delete y.$$inheritedValues,d.resolve(b))}function c(e){y.$$failure=e,d.reject(e)}function u(n,i,o){function u(e){f.reject(e),c(e)}function l(){if(!F(y.$$failure))try{f.resolve(t.invoke(i,a,b)),f.promise.then(function(e){b[n]=e,s()},u)}catch(e){u(e)}}var f=e.defer(),p=0;H(o,function(e){v.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(p++,v[e].then(function(t){b[e]=t,--p||l()},u))}),p||l(),v[n]=f.promise}if(h(r)&&a===n&&(a=o,o=r,r=null),r){if(!N(r))throw new Error("'locals' must be an object")}else r=l;if(o){if(!h(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var d=e.defer(),y=d.promise,v=y.$$promises={},b=V({},r),S=1+g.length/3,_=!1;if(F(o.$$failure))return c(o.$$failure),y;o.$$inheritedValues&&i(b,p(o.$$inheritedValues,m)),V(v,o.$$promises),o.$$values?(_=i(b,p(o.$$values,m)),y.$$inheritedValues=p(o.$$values,m),s()):(o.$$inheritedValues&&(y.$$inheritedValues=p(o.$$inheritedValues,m)),o.then(s,c));for(var O=0,T=g.length;O<T;O+=3)r.hasOwnProperty(g[O])?s():u(g[O],g[O+1],g[O+2]);return y}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function y(e,t,n){this.fromConfig=function(e,t,n){return F(e.template)?this.fromString(e.template,t):F(e.templateUrl)?this.fromUrl(e.templateUrl,t):F(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return U(e)?e(t):e},this.fromUrl=function(n,r){return U(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function v(e,t,i){function o(t,n,r,i){if(g.push(t),h[t])return h[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(m[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return m[t]=new G.Param(t,n,r,i),m[t]}function a(e,t,n,r){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+t+i[1]}function s(i,o){var a,s,c,u,l;return a=i[2]||i[3],l=t.params[a],c=e.substring(p,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),s&&(u=G.type(s)||r(G.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)})),{id:a,regexp:s,segment:c,type:u,cfg:l}}t=V({params:{}},N(t)?t:{});var c,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",p=0,d=this.segments=[],h=i?i.params:{},m=this.params=i?i.params.$$new():new G.ParamSet,g=[];this.source=e;for(var y,v,b;(c=u.exec(e))&&(y=s(c,!1),!(y.segment.indexOf("?")>=0));)v=o(y.id,y.type,y.cfg,"path"),f+=a(y.segment,v.type.pattern.source,v.squash,v.isOptional),d.push(y.segment),p=u.lastIndex;b=e.substring(p);var S=b.indexOf("?");if(S>=0){var _=this.sourceSearch=b.substring(S);if(b=b.substring(0,S),this.sourcePath=e.substring(0,p+S),_.length>0)for(p=0;c=l.exec(_);)y=s(c,!0),v=o(y.id,y.type,y.cfg,"search"),p=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=a(b)+(t.strict===!1?"/?":"")+"$",d.push(b),this.regexp=new RegExp(f,t.caseInsensitive?"i":n),this.prefix=d[0],this.$$paramNames=g}function b(e){V(this,e)}function S(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function i(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function o(){return{strict:m,caseInsensitive:p}}function c(e){return U(e)||q(e)&&U(e[e.length-1])}function u(){for(;O.length;){var e=O.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(y[e.name],f.invoke(e.def))}}function l(e){V(this,e||{})}G=this;var f,p=!1,m=!0,g=!1,y={},_=!0,O=[],T={string:{encode:e,decode:i,is:function(e){return null==e||!F(e)||"string"==typeof e},pattern:/[^\/]*/},int:{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return F(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};S.$$getDefaultValue=function(e){if(!c(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return F(e)&&(p=e),p},this.strictMode=function(e){return F(e)&&(m=e),m},this.defaultSquashPolicy=function(e){if(!F(e))return g;if(e!==!0&&e!==!1&&!B(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return g=e,e},this.compile=function(e,t){return new v(e,V(o(),t))},this.isMatcher=function(e){if(!N(e))return!1;var t=!0;return H(v.prototype,function(n,r){U(n)&&(t=t&&F(e[r])&&U(e[r]))}),t},this.type=function(e,t,n){if(!F(t))return y[e];if(y.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return y[e]=new b(V({name:e},t)),n&&(O.push({name:e,def:n}),_||u()),this},H(T,function(e,t){y[t]=new b(V({name:t},e))}),y=r(y,{}),this.$get=["$injector",function(e){return f=e,_=!1,u(),H(T,function(e,t){y[t]||(y[t]=new b(e))}),this}],this.Param=function(e,r,i,o){function u(e){var t=N(e)?a(e):[],n=s(t,"value")===-1&&s(t,"type")===-1&&s(t,"squash")===-1&&s(t,"array")===-1;return n&&(e={value:e}),e.$$fn=c(e.value)?e.value:function(){return e.value},e}function l(n,r,i){if(n.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r?r:n.type?t.isString(n.type)?y[n.type]:n.type instanceof b?n.type:new b(n.type):"config"===i?y.any:y.string}function p(){var t={array:"search"===o&&"auto"},n=e.match(/\[\]$/)?{array:!0}:{};return V(t,n,i).array}function m(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!F(n)||null==n)return g;if(n===!0||B(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function v(e,t,r,i){var o,a,c=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=q(e.replace)?e.replace:[],B(i)&&o.push({from:i,to:n}),a=h(o,function(e){return e.from}),d(c,function(e){return s(a,e.from)===-1}).concat(o)}function S(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(i.$$fn);if(null!==e&&e!==n&&!T.type.is(e))throw new Error("Default value ("+e+") for parameter '"+T.id+"' is not an instance of Type ("+T.type.name+")");return e}function _(e){function t(e){return function(t){return t.from===e}}function n(e){var n=h(d(T.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),F(e)?T.type.$normalize(e):S()}function O(){return"{Param:"+e+" "+r+" squash: '"+I+"' optional: "+w+"}"}var T=this;i=u(i),r=l(i,r,o);var E=p();r=E?r.$asArray(E,"search"===o):r,"string"!==r.name||E||"path"!==o||i.value!==n||(i.value="");var w=i.value!==n,I=m(i,w),R=v(i,E,w,I);V(this,{id:e,type:r,location:o,array:E,squash:I,replace:R,isOptional:w,value:_,dynamic:n,config:i,toString:O})},l.prototype={$$new:function(){return r(this,V(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(l.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),H(t,function(t){H(a(t),function(t){s(e,t)===-1&&s(r,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return H(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return H(r.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var r,i,o,a,s,c=this.$$keys();for(r=0;r<c.length&&(i=this[c[r]],o=e[c[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=l}function _(e,r){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);
return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!F(r)||r}function s(r,i,o,a,s){function p(e,t,n){return"/"===g?e:t?g.slice(0,-1)+e:n?g.slice(1)+e:e}function d(e){function t(e){var t=e(o,r);return!!t&&(B(t)&&r.replace().url(t),!0)}if(!e||!e.defaultPrevented){m&&r.url()===m;m=n;var i,a=u.length;for(i=0;i<a;i++)if(t(u[i]))return;l&&t(l)}}function h(){return c=c||i.$on("$locationChangeSuccess",d)}var m,g=a.baseHref(),y=r.url();return f||h(),{sync:function(){d()},listen:function(){return h()},update:function(e){return e?void(y=r.url()):void(r.url()!==y&&(r.url(y),r.replace()))},push:function(e,t,i){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),r.url(o),m=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled),a=a&&s.history;var c=n.format(i);if(o=o||{},a||null===c||(c="#"+e.hashPrefix()+c),null!==c&&i&&i["#"]&&(c+="#"+i["#"]),c=p(c,a,o.absolute),!o.absolute||!c)return c;var u=!a&&c?"/":"",l=r.port();return l=80===l||443===l?"":":"+l,[r.protocol(),"://",r.host(),l,u,c].join("")}}}var c,u=[],l=null,f=!1;this.rule=function(e){if(!U(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(B(e)){var t=e;e=function(){return t}}else if(!U(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var n,s=B(t);if(B(e)&&(e=r.compile(e)),!s&&!U(t)&&!q(t))throw new Error("invalid 'handler' in when()");var c={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),V(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:B(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),V(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:i(e)})}},u={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var l in u)if(u[l])return this.rule(c[l](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function O(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function p(e,t){if(!e)return n;var r=B(e),i=r?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=p(t);for(var s=i.split("."),c=0,u=s.length,l=t;c<u;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;s=s.slice(c).join("."),i=l.name+(l.name&&s?".":"")+s}var f=I[i];return!f||!r&&(r||f!==e&&f.self!==e)?n:f}function d(e,t){R[e]||(R[e]=[]),R[e].push(t)}function g(e){for(var t=R[e]||[];t.length;)y(t.shift())}function y(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!B(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(I.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=n.indexOf(".")!==-1?n.substring(0,n.lastIndexOf(".")):B(t.parent)?t.parent:N(t.parent)&&B(t.parent.name)?t.parent.name:"";if(i&&!I[i])return d(i,t.self);for(var o in j)U(j[o])&&(t[o]=j[o](t,j.$delegates[o]));return I[n]=t,!t[P]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){w.$current.navigable==t&&u(e,n)||w.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function v(e){return e.indexOf("*")>-1}function b(e){for(var t=e.split("."),n=w.$current.name.split("."),r=0,i=t.length;r<i;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length==n.length&&n.join("")===t.join("")}function S(e,t){return B(e)&&!F(t)?j[e]:U(t)&&B(e)?(j[e]&&!j.$delegates[e]&&(j.$delegates[e]=j[e]),j[e]=t,this):this}function _(e,t){return N(e)?t=e:t.name=e,y(t),this}function O(e,i,o,s,f,d,g,y,S){function _(t,n,r,o){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return g.update(),C;if(!a.retry)return null;if(o.$retry)return g.update(),$;var s=w.transition=i.when(a.retry);return s.then(function(){return s!==w.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,n,r),j):(t.options.$retry=!0,w.transitionTo(t.to,t.toParams,t.options))},function(){return C}),g.update(),s}function O(e,n,r,a,c,u){function p(){var n=[];return H(e.views,function(r,i){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:c.globals,params:d,notify:u.notify})||""}],n.push(f.resolve(a,c.globals,c.resolve,e).then(function(n){if(U(r.controllerProvider)||q(r.controllerProvider)){var o=t.extend({},a,c.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,n.$$resolveAs=r.resolveAs,c[i]=n}))}),i.all(n).then(function(){return c.globals})}var d=r?n:l(e.params.$$keys(),n),h={$stateParams:d};c.resolve=f.resolve(e.resolve,h,c.resolve,e);var m=[c.resolve.then(function(e){c.globals=e})];return a&&m.push(a),i.all(m).then(p).then(function(e){return c})}var R=new Error("transition superseded"),j=m(i.reject(R)),A=m(i.reject(new Error("transition prevented"))),C=m(i.reject(new Error("transition aborted"))),$=m(i.reject(new Error("transition failed")));return E.locals={resolve:null,globals:{$stateParams:{}}},w={params:{},current:E.self,$current:E,transition:null},w.reload=function(e){return w.transitionTo(w.current,d,{reload:e||!0,inherit:!1,notify:!0})},w.go=function(e,t,n){return w.transitionTo(e,t,V({inherit:!0,relative:w.$current},n))},w.transitionTo=function(t,n,o){n=n||{},o=V({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,u=w.$current,f=w.params,h=u.path,m=p(t,o.relative),y=n["#"];if(!F(m)){var v={to:t,toParams:n,options:o},b=_(v,u.self,f,o);if(b)return b;if(t=v.to,n=v.toParams,o=v.options,m=p(t,o.relative),!F(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[P])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=c(d,n||{},w.$current,m)),!m.params.$$validates(n))return $;n=m.params.$$values(n),t=m;var S=t.path,I=0,C=S[I],D=E.locals,L=[];if(o.reload){if(B(o.reload)||N(o.reload)){if(N(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var k=o.reload===!0?h[0]:p(o.reload);if(o.reload&&!k)throw new Error("No such reload state '"+(B(o.reload)?o.reload:o.reload.name)+"'");for(;C&&C===h[I]&&C!==k;)D=L[I]=C.locals,I++,C=S[I]}}else for(;C&&C===h[I]&&C.ownParams.$$equals(n,f);)D=L[I]=C.locals,I++,C=S[I];if(T(t,n,u,f,D,o))return y&&(n["#"]=y),w.params=n,Y(w.params,d),Y(l(t.params.$$keys(),d),t.locals.globals.$stateParams),o.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),w.transition=null,i.when(w.current);if(n=l(t.params.$$keys(),n||{}),y&&(n["#"]=y),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,u.self,f,o).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,f),null==w.transition&&g.update(),A;for(var M=i.when(D),x=I;x<S.length;x++,C=S[x])D=L[x]=r(D),M=O(C,n,C===t,M,D,o);var U=w.transition=M.then(function(){var r,i,a;if(w.transition!==U)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,f),j;for(r=h.length-1;r>=I;r--)a=h[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=I;r<S.length;r++)i=S[r],i.locals=L[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return w.transition!==U?(e.$broadcast("$stateChangeCancel",t.self,n,u.self,f),j):(w.$current=t,w.current=t.self,w.params=n,Y(w.params,d),w.transition=null,o.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,u.self,f),g.update(!0),w.current)}).then(null,function(r){return r===R?j:w.transition!==U?(e.$broadcast("$stateChangeCancel",t.self,n,u.self,f),j):(w.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,u.self,f,r),a.defaultPrevented||g.update(),i.reject(r))});return U},w.is=function(e,t,r){r=V({relative:w.$current},r||{});var i=p(e,r.relative);return F(i)?w.$current===i&&(!t||u(i.params.$$values(t),d)):n},w.includes=function(e,t,r){if(r=V({relative:w.$current},r||{}),B(e)&&v(e)){if(!b(e))return!1;e=w.$current.name}var i=p(e,r.relative);if(!F(i))return n;if(!F(w.$current.includes[i.name]))return!1;if(!t)return!0;for(var o=a(t),s=0;s<o.length;s++){var c=o[s],u=i.params[c];if(u&&!u.type.equals(d[c],t[c]))return!1}return!0},w.href=function(e,t,r){r=V({lossy:!0,inherit:!0,absolute:!1,relative:w.$current},r||{});var i=p(e,r.relative);if(!F(i))return null;r.inherit&&(t=c(d,t||{},w.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?g.href(o.url,l(i.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},w.get=function(e,t){if(0===arguments.length)return h(a(I),function(e){return I[e].self});var n=p(e,t||w.$current);return n&&n.self?n.self:null},w}function T(e,t,n,r,i,o){function a(e,t,n){function r(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(r),o=f.apply({},[e.params].concat(i)),a=new G.ParamSet(o);return a.$$equals(t,n)}if(!o.reload&&e===n&&(i===n.locals||e.self.reloadOnSearch===!1&&a(n,r,t)))return!0}var E,w,I={},R={},P="abstract",j={parent:function(e){if(F(e.parent)&&e.parent)return p(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?p(t[1]):E},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=r(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(B(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||E).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new G.ParamSet;return H(e.params||{},function(e,n){t[n]||(t[n]=new G.Param(n,null,e,"config"))}),t},params:function(e){var t=f(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?V(e.parent.params.$$new(),t):new G.ParamSet},views:function(e){var t={};return H(F(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),n.resolveAs=n.resolveAs||e.resolveAs||"$resolve",t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?V({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};E=y({name:"",url:"^",views:null,abstract:!0}),E.navigable=null,this.decorator=S,this.state=_,this.$get=O,O.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function T(){function e(e,t){return{load:function(e,n){var r,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=V(i,n),n.view&&(r=t.fromConfig(n.view,n.params,n.locals)),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function E(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function w(e,n,r,i,o){function a(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(e){return null}}}function s(e,n){var r=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,n,r){t.version.minor>2?l.enter(e,null,n).then(r):l.enter(e,null,n,r)},leave:function(e,n){t.version.minor>2?l.leave(e).then(n):l.leave(e,n)}};if(u){var i=u&&u(n,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return r()}var c=a(),u=c("$animator"),l=c("$animate"),f={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,a,c){return function(n,a,u){function l(){if(p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),d){var e=d.data("$uiViewAnim");v.leave(d,function(){e.$$animLeave.resolve(),p=null}),p=d,d=null}}function f(s){var f,p=R(n,u,a,i),b=p&&e.$current&&e.$current.locals[p];if(s||b!==m){f=n.$new(),m=e.$current.locals[p],f.$emit("$viewContentLoading",p);var S=c(f,function(e){var i=o.defer(),s=o.defer(),c={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",c),v.enter(e,a,function(){i.resolve(),h&&h.$emit("$viewContentAnimationEnded"),(t.isDefined(y)&&!y||n.$eval(y))&&r(e)}),l()});d=S,h=f,h.$emit("$viewContentLoaded",p),h.$eval(g)}}var p,d,h,m,g=u.onload||"",y=u.autoscroll,v=s(u,n);a.inheritedData("$uiView");n.$on("$stateChangeSuccess",function(){f(!1)}),f(!0)}}};return f}function I(e,n,r,i){return{restrict:"ECA",priority:-400,compile:function(o){var a=o.html();return function(o,s,c){var u=r.$current,l=R(o,c,s,i),f=u&&u.locals[l];if(f){s.data("$uiView",{name:l,state:f.$$state}),s.html(f.$template?f.$template:a);var p=t.extend({},f);o[f.$$resolveAs]=p;var d=e(s.contents());if(f.$$controller){f.$scope=o,f.$element=s;var h=n(f.$$controller,f);f.$$controllerAs&&(o[f.$$controllerAs]=h,o[f.$$controllerAs][f.$$resolveAs]=p),U(h.$onInit)&&h.$onInit(),s.data("$ngControllerController",h),s.children().data("$ngControllerController",h)}d(o)}}}}}function R(e,t,n,r){var i=r(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function P(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function j(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function A(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function C(e,t,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var c=n(function(){t.go(s.state,s.params,s.options)});o.preventDefault();var u=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){u--<=0&&n.cancel(c)}}}}function $(e,t){return{relative:j(e)||t.$current,inherit:!0}}function D(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,c=P(o.uiSref,e.current.name),u={state:c.state,href:null,params:null},l=A(i),f=a[1]||a[0],p=null;u.options=V($(i,e),o.uiSrefOpts?r.$eval(o.uiSrefOpts):{});var d=function(n){n&&(u.params=t.copy(n)),u.href=e.href(c.state,u.params,u.options),p&&p(),f&&(p=f.$$addStateInfo(c.state,u.params)),null!==u.href&&o.$set(l.attr,u.href)};c.paramExpr&&(r.$watch(c.paramExpr,function(e){e!==u.params&&d(e)},!0),u.params=t.copy(r.$eval(c.paramExpr))),d(),l.clickable&&(s=C(i,e,n,l,function(){return u}),i[i.on?"on":"bind"]("click",s),r.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function L(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,r,i,o){function a(t){p.state=t[0],p.params=t[1],p.options=t[2],p.href=e.href(p.state,p.params,p.options),d&&d(),u&&(d=u.$$addStateInfo(p.state,p.params)),p.href&&i.$set(c.attr,p.href)}var s,c=A(r),u=o[1]||o[0],l=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],f="["+l.map(function(e){return e||"null"}).join(", ")+"]",p={state:null,params:null,options:null,href:null},d=null;n.$watch(f,a,!0),a(n.$eval(f)),c.clickable&&(s=C(r,e,t,c,function(){return p}),r[r.on?"on":"bind"]("click",s),n.$on("$destroy",function(){r[r.off?"off":"unbind"]("click",s)}))}}}function k(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,r,i,o){function a(t,n,i){var o=e.get(t,j(r)),a=s(t,n),c={state:o||{name:t},params:n,hash:a};return m.push(c),g[a]=i,function(){var e=m.indexOf(c);e!==-1&&m.splice(e,1)}}function s(e,n){if(!B(e))throw new Error("state should be a string");return N(n)?e+z(n):(n=t.$eval(n),N(n)?e+z(n):e)}function c(){for(var e=0;e<m.length;e++)f(m[e].state,m[e].params)?u(r,g[m[e].hash]):l(r,g[m[e].hash]),p(m[e].state,m[e].params)?u(r,d):l(r,d)}function u(e,t){o(function(){e.addClass(t)})}function l(e,t){e.removeClass(t)}function f(t,n){return e.includes(t.name,n)}function p(t,n){return e.is(t.name,n)}var d,h,m=[],g={};d=n(i.uiSrefActiveEq||"",!1)(t);try{h=t.$eval(i.uiSrefActive)}catch(e){}h=h||n(i.uiSrefActive||"",!1)(t),N(h)&&H(h,function(n,r){if(B(n)){var i=P(n,e.current.name);a(i.state,t.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(e,t){if(!(N(h)&&m.length>0)){var n=a(e,t,h);return c(),n}},t.$on("$stateChangeSuccess",c),c()}]}}function M(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function x(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}var F=t.isDefined,U=t.isFunction,B=t.isString,N=t.isObject,q=t.isArray,H=t.forEach,V=t.extend,Y=t.copy,z=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),y.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",y);var G;v.prototype.concat=function(e,t){var n={caseInsensitive:G.caseInsensitive(),strict:G.strictMode(),squash:G.defaultSquashPolicy()};return new v(this.sourcePath+e+this.sourceSearch,V(n,t),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var r=t(e).split(/-(?!\\)/),i=h(r,t);return h(i,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i,o,a,s=this.parameters(),c=s.length,u=this.segments.length-1,l={};if(u!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var f,p;for(i=0;i<u;i++){for(a=s[i],f=this.params[a],p=r[i+1],o=0;o<f.replace.length;o++)f.replace[o].from===p&&(p=f.replace[o].to);p&&f.array===!0&&(p=n(p)),F(p)&&(p=f.type.decode(p)),l[a]=f.value(p)}for(;i<c;i++){for(a=s[i],l[a]=this.params[a].value(t[a]),f=this.params[a],p=t[a],o=0;o<f.replace.length;o++)f.replace[o].from===p&&(p=f.replace[o].to);F(p)&&(p=f.type.decode(p)),l[a]=f.value(p)}return l},v.prototype.parameters=function(e){return F(e)?this.params[e]||null:this.$$paramNames},v.prototype.validates=function(e){return this.params.$$validates(e)},v.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,c=r.length,u=n[0];for(o=0;o<c;o++){var l=o<s,f=r[o],p=i[f],d=p.value(e[f]),m=p.isOptional&&p.type.equals(p.value(),d),g=!!m&&p.squash,y=p.type.encode(d);if(l){var v=n[o+1],b=o+1===s;if(g===!1)null!=y&&(u+=q(y)?h(y,t).join("-"):encodeURIComponent(y)),u+=v;else if(g===!0){var S=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=v.match(S)[1]}else B(g)&&(u+=g+v);b&&p.squash===!0&&"/"===u.slice(-1)&&(u=u.slice(0,-1))}else{if(null==y||m&&g!==!1)continue;if(q(y)||(y=[y]),0===y.length)continue;y=h(y,encodeURIComponent).join("&"+f+"="),u+=(a?"&":"?")+(f+"="+y),a=!0}}return u},b.prototype.is=function(e,t){return!0},b.prototype.encode=function(e,t){return e},b.prototype.decode=function(e,t){return e},b.prototype.equals=function(e,t){return e==t},b.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},b.prototype.pattern=/.*/,b.prototype.toString=function(){return"{Type:"+this.name+"}"},b.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},b.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return q(e)?e:F(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){if(q(n)&&0===n.length)return n;n=i(n);var r=h(n,e);return t===!0?0===d(r,a).length:o(r)}}function c(e){return function(t,n){var r=i(t),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e(r[a],o[a]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=c(r(e,"equals")),this.pattern=e.pattern,this.$normalize=s(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",S),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),_.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",_),O.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",O).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),T.$inject=[],t.module("ui.router.state").provider("$view",T),t.module("ui.router.state").provider("$uiViewScroll",E),w.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],I.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",w),t.module("ui.router.state").directive("uiView",I),D.$inject=["$state","$timeout"],L.$inject=["$state","$timeout"],k.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",k).directive("uiSrefActiveEq",k).directive("uiState",L),M.$inject=["$state"],x.$inject=["$state"],t.module("ui.router.state").filter("isState",M).filter("includedByState",x)}(window,window.angular)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(21),c=n(14),u=n(1),l=n(1),f=n(232),p=n(22),d=n(4),h=n(28),m=n(16),g=n(7),y=n(24),v=function(){function e(e,t,n,r,i,o,a,s,c,f,p,d){this.$location=e,this.searchStateService=t,this.$translate=n,this.searchFieldsService=r,this.$stateParams=i,this.restBaseURLs=o,this.permalinkService=a,this.databasesService=s,this.journalsService=c,this.newspapersService=f,this.jwtUtilService=p,this.$interpolate=d,this.vid=u.getVid(),this.urlContext=l.getUrlContext(),this.$location=e,this.SHOW_PNX_IN_XML_URL=o.showPnxInXmlUrl+"/"}return e.prototype.getBaseUrl=function(){return this.$location.absUrl().substring(0,this.$location.absUrl().indexOf(this.urlContext+"/")-1)},e.prototype.parseParametersFromItemIdField=function(e){var t={context:e.context,id:e.pnx.control.recordid[0]};return t},e.prototype.prmParseKeyValue=function(e){var t={},n=(e||"").split("&"),r=this;return n.forEach(function(e){var n,i,o;e&&(i=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(i=e.substring(0,n),o=e.substring(n+1)),i=r.prmTryDecodeURIComponent(i),angular.isDefined(i)&&(o=!angular.isDefined(o)||r.prmTryDecodeURIComponent(o),angular.hasOwnProperty.call(t,i)?angular.isArray(t[i])?t[i].push(o):t[i]=[t[i],o]:t[i]=o))}),t},e.prototype.prmTryDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(e){}},e.prototype.getDeepLinkPath=function(e,t,n){var r=this.getBaseDeepLinkPath(e,t,n);return r+=this.searchFieldsService.tab?"&tab="+this.searchFieldsService.tab:"",r+=this.getQueryDeepLink(),r+=this.$stateParams.sortby?"&sortby="+this.$stateParams.sortby:"",r+=this.getFacetsDeepLink(),r+=this.$stateParams.mode?"&mode="+this.$stateParams.mode:"",r+=this.getPfiltersDeepLink(),r+=this.$stateParams.offset?"&offset="+this.$stateParams.offset:"",r+=this.$stateParams.journals?"&journals="+this.$stateParams.journals:"",r+=this.$stateParams.databases?"&databases="+this.$stateParams.databases:"",r+=this.$stateParams.pcAvailability?"&pcAvailability="+this.$stateParams.pcAvailability:"",r+=this.$stateParams.searchCDI?"&searchCDI="+this.$stateParams.searchCDI:""},e.prototype.getCurState=function(e){var t="fulldisplay";return this.journalsService.isJournalSearch()?t=d.STATE_NAMES.JOURNAL_FULL_DISPLAY:this.databasesService.isDBSearch()?t=d.STATE_NAMES.DB_FULL_DISPLAY:e&&(this.newspapersService.isNewspapersSearch()||this.newspapersService.isNewspaperItem(e))&&(t=d.STATE_NAMES.NEWSPAPERS_FULL_DISPLAY),t},e.prototype.getBaseDeepLinkPath=function(e,t,n){var r=this.getCurState(e);t||this.databasesService.isDBSearch()||this.journalsService.isJournalSearch()||(t=this.searchStateService.getSearchObject().scope);var i=this.permalinkService.getRecordId(e.pnx.control);"NP"===e.context&&(i=this.permalinkService.getNewspapersRecordId(e.pnx.control));var o="/"+r+"?docid="+i+"&context="+e.context+"&vid="+this.vid+"&lang="+this.$translate.use();return t&&(o+="&search_scope="+t),(n||e.adaptor)&&(o=o+"&adaptor="+(n?n:e.adaptor)),"L"===e.context&&this.isFrbr(e)&&t&&(o+="&isFrbr=true"),o},e.prototype.getFacetsDeepLink=function(){var e=this.$stateParams.facet?[this.$stateParams.facet]:[];e=y(e);for(var t="",n=0;n<e.length;n++)t+="&facet="+e[n];return t},e.prototype.getPfiltersDeepLink=function(){var e=this.$stateParams.pfilter?[this.$stateParams.pfilter]:[];e=y(e);for(var t="",n=0;n<e.length;n++)t+="&pfilter="+e[n];return t},e.prototype.getQueryDeepLink=function(){var e=this.$stateParams.query?[this.$stateParams.query]:[];e=y(e);for(var t="",n=0;n<e.length;n++)t+="&query="+e[n];return t},e.prototype.getDeepLinkAbsPath=function(e,t,n){return this.getBaseUrl()+"/"+this.urlContext+this.getBaseDeepLinkPath(e,t,n)},e.prototype.getFullDeepLinkAbsPath=function(e){return this.getBaseUrl()+"/"+this.urlContext+this.getDeepLinkPath(e)},e.prototype.getXmlDeepLinkAbsPath=function(e){return this.getBaseUrl()+"/"+this.urlContext+this.getDeepLinkPath(e)},e.prototype.isFrbr=function(e){if(void 0!=e.pnx.facets){if(!e||!e.pnx.facets.frbrtype)return!1;var t="7"===e.pnx.facets.frbrtype[0]||"5"===e.pnx.facets.frbrtype[0];return t}return!1},e.prototype.resolveUrlTemplate=function(e){var t=this.jwtUtilService.getPdsHandle(),n=(this.jwtUtilService.getJwtFromLocalStorage()||"").replace(/"/g,""),r=this.jwtUtilService.getInstitutionCode(),i=this.$translate.use(),o=this.getThreeLetterLanguage(i);return e=this.$interpolate(e)({INST_CODE:r,pds_handle:t,jwt:n,language:i,language_bibliographic:o,view:this.vid})},e.prototype.getThreeLetterLanguage=function(e){var t=u.getAttributesMap().interfaceLanguageOptions.split(","),n=u.getAttributesMap().threeLettersLanguagesOptions.split(","),r=t.indexOf(e);return r!=-1?n[r]:n[0]},e=r([a.Injectable(),o(0,a.Inject("$location")),o(2,a.Inject("$translate")),o(4,a.Inject("$stateParams")),o(5,a.Inject("restBaseURLs")),o(11,a.Inject("$interpolate")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.SearchStateService&&s.SearchStateService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&n||Object,Object,Object,"function"==typeof(v="undefined"!=typeof f.PermalinkService&&f.PermalinkService)&&v||Object,"function"==typeof(b="undefined"!=typeof h.DatabasesService&&h.DatabasesService)&&b||Object,"function"==typeof(S="undefined"!=typeof p.JournalsService&&p.JournalsService)&&S||Object,"function"==typeof(_="undefined"!=typeof m.NewspapersService&&m.NewspapersService)&&_||Object,"function"==typeof(O="undefined"!=typeof g.JwtUtilService&&g.JwtUtilService)&&O||Object,Object])],e);var t,n,v,b,S,_,O}();t.TemplateUtil=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.default=r.module("appConfig",[]),n(550),n(551)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(10),u=n(122),l=n(6),f=n(7),p=n(4),d=n(17),h=n(233),m=n(5),g=function(){function e(e,t,n,r,i,o,a,s,c,u,l){this.$window=e,this.$location=t,this.$mdDialog=n,this.userSessionManagerService=r,this.$state=i,this.primoExploreService=o,this.primolyticsService=a,this.jwtUtilService=s,this.storageUtil=c,this.$translate=u,this.unionCatalogLoginService=l}return e.prototype.redirectLogin=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=!1),t||(this._toUrl?(t=this._toUrl,this._toUrl=""):this.toState&&this.toParams&&(t=this.normalizeTargetUrl(this.$state.href(this.toState,this.toParams,{absolute:!0}),this.toParams))),this.$window.location.assign(this.loginUrl(e.profileName,e.authenticationSystem,t,n))},e.prototype.loginUrl=function(e,t,n,r){void 0===r&&(r=!1);var i="";n?i=n:(!this._toState||null===this._toState||"account"!==this._toState.name&&this._toState.name!==p.STATE_NAMES.BLANK_ILL&&this._toState.name!==p.STATE_NAMES.PURCHASE_REQUEST?this._toState&&null!==this._toState&&this._toState.name===p.STATE_NAMES.FAVORITES&&this.$location.path("favorites").search("section","queries"):this.$location.path(this._toState.name),i=this.normalizeTargetUrl(),!this._toState||null===this._toState||"account"!==this._toState.name&&this._toState.name!==p.STATE_NAMES.FAVORITES&&this._toState.name!==p.STATE_NAMES.BLANK_ILL&&this._toState.name!==p.STATE_NAMES.PURCHASE_REQUEST||(i+="&fromLogin=true",i=i.replace("&authenticationError=1",""))),r&&(i+="&isIframeSSO=true");var o=this.jwtUtilService.getDecodedToken().institution;if(o||(o=s.getInstitutionCode()),"suprima"===s.getBackendSystem()){var a=this.jwtUtilService.getDecodedToken().viewId;return a||(a=s.getVid()),"/primaws/suprimaExtLogin?institution="+encodeURIComponent(o)+"&lang="+encodeURIComponent(this.$location.search().lang)+"&target-url="+encodeURIComponent(i)+"&authenticationProfile="+encodeURIComponent(e)+"&idpCode="+encodeURIComponent(e)+"&auth="+encodeURIComponent(t)+"&view="+encodeURIComponent(a)+"&isSilent="+r}return"/primo_library/libweb/primoExploreLogin?institution="+encodeURIComponent(o)+"&lang="+encodeURIComponent(this.$location.search().lang)+"&target-url="+encodeURIComponent(i)+"&authenticationProfile="+encodeURIComponent(e)+"&auth="+encodeURIComponent(t)+"&isSilent="+r},e.prototype.normalizeTargetUrl=function(e,t){return e||(e=this.$location.absUrl()),e=decodeURIComponent(e),t=t||this.$state.params,m.forEach(t,function(t,n){var r=this;if("vid"!==n&&"lang"!==n&&t)if(Array.isArray(t))t.map(function(t){e=e.replace(t,encodeURIComponent(r.replaceCharacters(encodeURIComponent(t))))});else{var i=t;e=e.replace(n+"="+i,n+"="+encodeURIComponent(this.replaceCharacters(encodeURIComponent(i))))}},this),e},e.prototype.replaceCharacters=function(e){
return e.replace(/\'/g,"%27").replace(/~/g,"%7E").replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\+/g,"%2B").replace(/\_/g,"%2E")},e.prototype.redirectToTargetURL=function(e){void 0===e&&(e=""),e||(e=this.$location.search().targetURL),e?this.$window.location.assign(e):this._toState&&this.loadSavedState()},e.prototype.loadSavedState=function(){var e=this._toState;"openurl"===e?e="servicesPage":"search"===e?e=p.STATE_NAMES.SEARCH:"favorites"===e?e=p.STATE_NAMES.FAVORITES:"jsearch"===e?e=p.STATE_NAMES.JOURNAL_SEARCH:"dbsearch"===e?e=p.STATE_NAMES.DB_SEARCH:"orgList"===e&&(e=p.STATE_NAMES.ORGANIZATION_LIST);var t=this._toParams;this._toState="",this._toParams="",this.$state.go(e,t,{reload:!0})},e.prototype.clearSavedState=function(){this._toState="",this._toParams="",this._toUrl=""},e.prototype.handleLoginClick=function(){if(s.getAuthenticationMethods().length>1)this.handleInternalLogin();else{var e=s.getAuthenticationMethods()[0];if(e.isExternal())this.redirectLogin(e);else if("delivery"===this.$state.current.name||"canonDelivery"===this.$state.current.name||"cnameDelivery"===this.$state.current.name){var t=this.jwtUtilService.getDecodedToken().institution;t||(t=s.getInstitutionCode());var n=encodeURIComponent(this.$window.location.pathname+this.$window.location.search);this.$window.location.href="/services/login?institute="+t+"&backUrlDel="+n}else this.handleInternalLogin()}},e.prototype.callHandleLoginClickWithBeacon=function(){this.handleLoginClick()},e.prototype.handleInternalLogin=function(){this.handleLogin(),this.isUnionCatalogNZView()?this.showUnionCatalogLoginDialog():this.showLoginDialog()},e.prototype.handleLogin=function(){if(this._toState);else{this._toParams=this.$location.search();for(var e in this._toParams)this._toParams[e]&&"string"==typeof this.toParams[e]&&(this._toParams[e]=this._toParams[e].replace("~2F","/"));this._toState=this.$location.path().replace(/^\/|\/$/g,""),this._toUrl=this.normalizeTargetUrl()}},e.prototype.getToUrl=function(){return this._toUrl||(this._toUrl=this.normalizeTargetUrl()),this._toUrl},e.prototype.showLoginDialog=function(){var e='<md-dialog aria-label="'+this.loginAriaTranslated()+'" class="login-dialog light-on-dark-dialog tabbed-dialog"> <prm-login [authentication-methods] = "ctrl.authenticationMethods" layout="row"></prm-login> </md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({focusOnOpen:!1,bindToController:!0,controller:function(){},controllerAs:"ctrl",locals:{authenticationMethods:s.getAuthenticationMethods()},template:e})},e.prototype.loginAriaTranslated=function(){return this.$translate.instant("nui.aria.login.loginDialog")},Object.defineProperty(e.prototype,"toState",{get:function(){return this._toState},set:function(e){this._toState=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toParams",{get:function(){return this._toParams},set:function(e){this._toParams=e},enumerable:!0,configurable:!0}),e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},e.prototype.removeBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!1)},e.prototype.showUnionCatalogLoginDialog=function(){var e='<md-dialog aria-label="'+this.loginAriaTranslated()+'" class="login-dialog light-on-dark-dialog tabbed-dialog"> <prm-union-catalog-login layout="row"></prm-union-catalog-login> </md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({focusOnOpen:!1,bindToController:!0,controller:function(){},controllerAs:"ctrl",template:e})},e.prototype.isUnionCatalogLogin=function(){return this.userSessionManagerService.isUnionCatalogLogin()},e.prototype.isUnionCatalogNZView=function(){return s.isUnionCatalogNZView()},e.prototype.returnToUnionCatalogNZView=function(){this.unionCatalogLoginService.returnToUnionCatalogNZView()},r([l.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"callHandleLoginClickWithBeacon",null),e=r([a.Injectable(),o(0,a.Inject("$window")),o(1,a.Inject("$location")),o(2,a.Inject("$mdDialog")),o(4,a.Inject("$state")),o(9,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.UserSessionManagerService&&c.UserSessionManagerService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof u.PrimoExploreService&&u.PrimoExploreService)&&n||Object,"function"==typeof(g="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.JwtUtilService&&f.JwtUtilService)&&y||Object,"function"==typeof(v="undefined"!=typeof d.StorageUtil&&d.StorageUtil)&&v||Object,Object,"function"==typeof(b="undefined"!=typeof h.UnionCatalogLoginService&&h.UnionCatalogLoginService)&&b||Object])],e);var t,n,g,y,v,b}();t.LoginService=g,t.default=[]},function(e,t,n){function r(e){return i(e,o)}var i=n(218),o=4;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(37),c=n(4),u=n(45),l=function(){function e(e,t,n,r,i,o){this.sharedSessionStorage=e,this.restBaseURLs=t,this.$q=n,this.$stateParams=r,this.$http=i,this.$state=o,this._enable=!1,this._recentness=!1,this._editPressed=!1,this._cancelPressed=!1;var a=this.sharedSessionStorage.getItem("enable_personalization");null!==a&&null!==this.sharedSessionStorage.getItem("personalization")?this.enable="true"===a:null!==a&&null===this.sharedSessionStorage.getItem("personalization")&&this.sharedSessionStorage.removeItem("enable_personalization");var s=this.sharedSessionStorage.getItem("recentness");null!==s&&null!==this.sharedSessionStorage.getItem("personalization")&&(this.recentness="true"===s),this.userSettingsUrl=t.userSettingsBaseURL}return e.prototype.displayDialog=function(){return!!(this.enable&&null===this.sharedSessionStorage.getItem("personalization")&&!this.cancelPressed||this.editPressed)},e.prototype.personalizationToggled=function(){return!(!this.enable||null===this.sharedSessionStorage.getItem("personalization")||this.$state.current.name===c.STATE_NAMES.NEWSPAPERS)},e.prototype.updatePersonalization=function(e){return this.sharedSessionStorage.getItem("personalization")?this.setUserPersonalizationPreferencesToDB(e):this.getUserPersonalizationPreferencesFromDB(e)},e.prototype.setUserPersonalizationPreferencesToDB=function(e){var t=this.buildPersonalizationPaylod(e);return this.$http.post(this.userSettingsUrl,t)},e.prototype.buildPersonalizationPaylod=function(e){var t=this.sharedSessionStorage.getItem("personalization")?this.sharedSessionStorage.getItem("personalization"):"";return{vid:e,"pr-discipline":t,"pr-recentness":this.recentness,"pr-enabled":this.enable}},e.prototype.addCameFromPersonalizationParam=function(){var e=u(this.$stateParams);e.came_from="personalization",this.searchParams=e},e.prototype.getUserPersonalizationPreferencesFromDB=function(e){var t=this,n=this.$q.defer(),r=this.userSettingsUrl+"?vid="+e;return this.$http({method:"GET",url:r}).then(function(e){var n=e.data;n.pr_discipline&&(t.sharedSessionStorage.setItem("personalization",n.pr_discipline),t.recentness="true"===n.pr_recentness||"1"===n.pr_recentness,n.pr_enabled?(t.enable="true"===n.pr_enabled,t.sharedSessionStorage.setItem("enable_personalization",t.enable)):(t.enable=!0,t.sharedSessionStorage.setItem("enable_personalization","true")))}).then(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},Object.defineProperty(e.prototype,"cancelPressed",{get:function(){return this._cancelPressed},set:function(e){this._cancelPressed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recentness",{get:function(){return this._recentness},set:function(e){this._recentness=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},set:function(e){this._promise=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editPressed",{get:function(){return this._editPressed},set:function(e){this._editPressed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){this._enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchParams",{get:function(){return this._searchParams},set:function(e){this._searchParams=e},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$q")),o(3,a.Inject("$stateParams")),o(4,a.Inject("$http")),o(5,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SharedSessionStorage&&s.SharedSessionStorage)&&t||Object,Object,Object,Object,Object,Object])],e);var t}();t.PersonalizeResultsButtonService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(18),c=n(5),u=c.injector(["ng"]);this.$timeout=u.get("$timeout");var l=function(){function e(e){this.$http=e}return e.prototype.call=function(e,t,n){var r={method:e,url:t,params:"GET"===e?n:null,data:"POST"===e?n:null};return new f(r,this.$http)},e.prototype.callPostAndParams=function(e,t,n){return this.call("POST",e+"?"+this.parseObjectToUrlParams(t),n)},e.prototype.parseObjectToUrlParams=function(e){var t=[];return s(Object.keys(e),function(n){t.push(n+"="+e[n])}),t.join("&")},e=r([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Object])],e)}();t.HttpService=l;var f=function(){function e(e,t){return this.httpConfig=e,this.$http=t,this.maxAttempts=1,this.attemptsCounter=0,this.call(e)}return e.prototype.call=function(e){var t=this;return this.$http(e).then(function(e){return t.onSuccess(e.data)},function(n){return t.onFailure(n,e)})},e.prototype.onSuccess=function(e){return this.attemptsCounter=0,e},e.prototype.onFailure=function(e,t){var n=this;if(this.attemptsCounter++,this.attemptsCounter<this.maxAttempts)return this.$timeout(function(){return n.call(t)},2e3);throw e},e}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(10),c=n(49),u=n(7),l=n(2),f=n(11),p=n(1),d=n(104),h=n(38),m=n(6),g=n(51),y=n(3),v=n(256),b=n(362),S=n(60),_=n(139),O=n(57),T=n(66),E=n(98).Subject,w=n(35).Observable;n(363),n(628);var I=function(){function e(){}return e=r([a.Injectable()],e)}();t.LoansRequestParams=I;var R=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,d){var h=this;this.$http=e,this.$translate=t,this.userSessionManagerService=n,this.jwtUtilService=r,this.$location=i,this.$stateParams=o,this.restBaseURLs=a,this.configurationUtil=s,this.searchService=c,this.primolyticsService=u,this.rtaService=l,this.accountListBulkSize=f,this.dateUtil=d,this.items=[],this.unlabeledRecords=!1,this.isFirstBulk=!1,this.needToChangeUrl=!1,this.allItems=!0,this.allItemsLoaded=!1,this._user=!1,this.firstBulk=0,this.countRecords=0,this.bulkSize=10,this._favoritesInProgress=!1,this._isSelectAllDone=!0,this._isFetchingAllItems=!1,this.vid=p.getVid(),this._sortInProgress=!1,this.QUERIES_TAB_NAME="queries",this.SEARCH_HISTORY_TAB_NAME="search_history",this.ITEMS__TAB_NAME="items",this.favoritesTab=this.ITEMS__TAB_NAME,this.sortOptions=["date","title","author"],this.GET_LABELS_URL=a.favoritesBaseURL,this.isMore=!1,this.promiseObservable=new E,this.promiseObservable.concatMap(function(e){return e}).subscribe(function(e){h.handleResponse(e)})}return e.prototype.getItemsFromServer=function(e){var t=this;this.allItemsLoaded=!1,this.isFirstBulk=!0,this.$http.get(this.GET_LABELS_URL).then(function(n){var r=n.data;t.records=r.records,t.unlabeled=r.unlabeledRecords,t.labels=r.labels,t.keysLabels=O(t.labels),t.sortedLabels=t.keysLabels.map(function(e){return[e,e.toLowerCase()]}).sort(function(e,t){return e[1].localeCompare(t[1])}).map(function(e){return[e[0],t.labels[e[0]]]}),t.unlabeled>0&&(t.labels=b({unlabled:t.unlabeled},t.labels),t.keysLabels=O(t.labels),t.sortedLabels.unshift(["unlabled",t.unlabeled])),t.totalItems=r.totalItems,t.recordsId=t.records.map(function(e){return e.recordId}),void 0==t.$stateParams.label?(t.selectedLabels=[],t.unlabeledRecords=!1):(t.selectedLabels=t.initSelectedLabels(t.$stateParams.label),t.IsUrlChangeNeeded(),t.unlabeledRecords=t.selectedLabels.indexOf("unlabled")!=-1),t.sortFavFromURL(e),t.returnAllOrFilter()})},e.prototype.IsUrlChangeNeeded=function(){var e=v(this.selectedLabels,this.keysLabels);e.length>0&&this.changeUrL(e)},e.prototype.changeUrL=function(e){for(var t,n,r=this.$location.url(),i=0;i<e.length;i++)t=S(this.selectedLabels,e[i]),this.selectedLabels.splice(t,1),n=encodeURIComponent(e[i]),r=r.replace("&label="+n,"");this.needToChangeUrl=!0,this.$location.url(r)},e.prototype.initSelectedLabels=function(e){return Array.isArray(e)?e:[e]},e.prototype.getFirstBulkOfAllItems=function(){this.fullList=this.recordsId,this.to=Math.min(this.bulkSize,this.recordsId.length),this.start=!0,this.getPnxRecordFromRecordId(this.recordsId.slice(this.firstBulk,this.to))},e.prototype.getLabels=function(){return this.labels},e.prototype.getSortedLabels=function(){return this.sortedLabels},e.prototype.getTotalItems=function(){return this.totalItems},e.prototype.getItems=function(){return this.items},e.prototype.getRecords=function(){return this.records},e.prototype.getLabelsOfRecord=function(e){for(var t=0;t<this.records.length;t++)if(this.records[t].recordId==e)return this.records[t].labels;return[]},e.prototype.getOtherLabels=function(e){for(var t=O(this.labels),n=[],r=this.getLabelsOfRecord(e),i=0;i<t.length;i++)r.indexOf(t[i])==-1&&"unlabled"!=t[i]&&n.push(t[i]);return n},e.prototype.filterObject=function(e,t){var n=this;if(!T(e))return e;var r=this.recordsIdBulk[t];if(r){var i=this.records.filter(function(e){return e.recordId===r})[0];if(i&&!i.deleted){this.totalItems=this.totalItems.valueOf()-1,i.deleted=!0;var o=i.labels;o.length>0?o.forEach(function(e){n.labels[e]=n.labels[e]-1,n.sortedLabels.some(function(t,n,r){return t[0]===e&&(t[1]-1>0?r[n][1]=t[1]-1:r.splice(n,1),!0)})}):(this.unlabeled=this.unlabeled.valueOf()-1,this.unlabeled>0?(this.labels.unlabled=this.unlabeled,this.sortedLabels[0][1]=this.unlabeled):this.sortedLabels.shift())}(_(i.labels,this.selectedLabels).length>0||0==i.labels.length&&this.unlabeledRecords)&&(this.countRecords-=1)}},e.prototype.getPnxRecordFromRecordId=function(e){if(this.recordsIdBulk=e,e.length>0){var t=this.restBaseURLs.pnxBaseURL+"/U?recordIds="+encodeURIComponent(e)+"&vid="+this.vid+"&lang="+this.$translate.use();this.promiseObservable.next(w.fromPromise(this.$http.get(t)))}else this.items=[]},e.prototype.handleResponse=function(e){var t=e.data;if(t.length<this.recordsIdBulk.length){var n=t.map(function(e){return e.pnx.control.recordid[0]||void 0});t=this.recordsIdBulk.map(function(e){var r=n.indexOf(e);return r>-1?(n[r]="",t[r]):{}})}t=t.filter(this.filterObject,this),this.configurationUtil.getLocationsConfiguration()&&"none"!==this.configurationUtil.getLocationsConfiguration().rta&&this.rtaService.updateAvailability(t),this.start?this.items=t:this.items=this.items.concat(t),this.isFirstBulk=!1},e.prototype.returnPnxForRecords=function(e){if(e.length>0){var t=this.restBaseURLs.pnxBaseURL+"/U?recordIds="+e+"&vid="+this.vid+"&lang="+this.$translate.use();return this.$http.get(t)}},e.prototype.getFullList=function(){return this.fullList},Object.defineProperty(e.prototype,"favoritesInProgress",{get:function(){return this._favoritesInProgress},set:function(e){this._favoritesInProgress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectAllDone",{get:function(){return this._isSelectAllDone},set:function(e){this._isSelectAllDone=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFetchingAllItems",{get:function(){return this._isFetchingAllItems},set:function(e){this._isFetchingAllItems=e},enumerable:!0,configurable:!0}),e.prototype.getItemsFromLocalForage=function(e,t){var n=this;this.allItemsLoaded=!1,this.isFirstBulk=!0,this.userSessionManagerService.createOrGetUserArea(e).then(function(e){n.configurationUtil.getLocationsConfiguration()&&"none"!==n.configurationUtil.getLocationsConfiguration().rta&&n.rtaService.updateAvailability(e),n.fullList=e,n.totalItems=e.length,n.to=Math.min(n.bulkSize,e.length),n.items=e.slice(n.firstBulk,n.to),n.isFirstBulk=!1,n.guestRecordsIdsOrder=n.fullList.map(function(e){return e.pnx.control.recordid}),n.sortFavFromURL(t)})},e.prototype.getFavoritesTab=function(){return this.favoritesTab},e.prototype.setFavoritesTab=function(e){this.favoritesTab=e},Object.defineProperty(e.prototype,"user",{get:function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},set:function(e){this._user=e},enumerable:!0,configurable:!0}),e.prototype.nextResults=function(){if(!this.isFirstBulk){var e=Math.min(this.bulkSize,this.fullList.length-this.to);e>0?(this.from=this.to,this.to=this.to+e,(e<this.bulkSize||this.to===this.fullList.length)&&(this.allItemsLoaded=!0),this.user?(this.start=!1,this.getPnxRecordFromRecordId(this.fullList.slice(this.from,this.to))):this.items=this.fullList.slice(this.firstBulk,this.to)):this.allItemsLoaded=!0}},e.prototype.hasNextResults=function(){return!this.allItemsLoaded&&this.fullList&&this.fullList.length>this.bulkSize},e.prototype.getSelectedLabels=function(){return this.selectedLabels},e.prototype.checkSelectedLabels=function(e){"unlabled"==e&&(this.unlabeledRecords=!this.unlabeledRecords);var t=S(this.selectedLabels,e);if(t!=-1){this.selectedLabels.splice(t,1);var n=encodeURIComponent(e),r=this.$location.url().replace("&label="+n,"");this.$location.url(r)}else this.selectedLabels.push(e),this.$location.url(this.$location.url()+"&label="+e);this.returnAllOrFilter()},e.prototype.returnAllOrFilter=function(){this.allItems=0==this.selectedLabels.length,this.allItems?this.getFirstBulkOfAllItems():this.parseResults()},e.prototype.iterateOverEachRecord=function(e){return _(e.labels,this.selectedLabels).length>0||0==e.labels.length&&this.unlabeledRecords?(this.countRecords+=1,e.recordId):""},e.prototype.filterEmpty=function(e){if(""!=e)return e},e.prototype.parseResults=function(){var e=this,t=[];this.countRecords=0;var n=this.getRecords();t=n.map(function(t){return e.iterateOverEachRecord(t)}).filter(this.filterEmpty),this.fullList=t,this.to=Math.min(this.bulkSize,t.length),this.start=!0,this.getPnxRecordFromRecordId(t.slice(this.firstBulk,this.to))},e.prototype.clearSelection=function(){this.selectedLabels=[],this.allItems=!0,this.unlabeledRecords=!1,this.getFirstBulkOfAllItems();var e=this.$location.search().vid;this.$location.url("/favorites?vid="+e)},e.prototype.getCountRecords=function(){return this.countRecords},e.prototype.getAllItems=function(){return this.allItems},e.prototype.getselectedLabels=function(){return this.selectedLabels},Object.defineProperty(e.prototype,"sortInProgress",{get:function(){return this._sortInProgress},set:function(e){this._sortInProgress=e},enumerable:!0,configurable:!0}),e.prototype.sortFavRecordsIds=function(e){e&&(this.sortBy=e);var t,n,r=function(e){return new Date(e.creationDate)},i=function(e){var t=y(e,"title");return t&&(t=t.toLowerCase()),t},o=function(e){var t=y(e,"author");return t&&(t=t.toLowerCase()),t};switch(this.sortBy){case"date":n=r,t=!0;break;case"title":n=i,t=!1;break;case"author":n=o,t=!1;break;default:n=r,t=!1}var a=t?"desc":"asc";this.records=g(this.records,[n],a),this.recordsId=this.records.map(function(e){return e.recordId})},e.prototype.sortFavFullList=function(e){var t=this;e&&(this.sortBy=e);var n,r,i=function(e){return t.guestRecordsIdsOrder.indexOf(e.pnx.control.recordid)},o=function(e){var t=void 0;return void 0!==e.pnx.display.title&&(t=y(e,"pnx.display.title[0]")),t&&(t=t.toLowerCase()),t},a=function(e){var t=void 0;return void 0!==e.pnx.display.creator?t=y(e,"pnx.display.creator[0]"):void 0!==e.pnx.display.contributor&&(t=y(e,"pnx.display.contributor[0]")),t&&(t=t.toLowerCase()),t};switch(this.sortBy){case"date":r=i,n=!1;break;case"title":r=o,n=!1;break;case"author":r=a,n=!1;break;default:r=i,n=!1}var s=n?"desc":"asc";this.fullList=g(this.fullList,[r],s)},e.prototype.sortFavFromURL=function(e){this.sortInProgress=!0,this.isLoggedIn()?(this.sortFavRecordsIds(e),this.fullList=this.recordsId):(this.sortFavFullList(e),this.to=Math.min(this.bulkSize,this.fullList.length),this.items=this.fullList.slice(this.firstBulk,this.to),this.isFirstBulk=!1)},e.prototype.sortAllFavFromDropdown=function(e){this.runSortInFavoriteBeacon(),e||this.$location.search("sortBy",this.sortBy),this.sortInProgress=!0,this.isLoggedIn()?(this.sortFavRecordsIds(e),this.fullList=this.recordsId):(this.sortFavFullList(e),this.to=Math.min(this.bulkSize,this.fullList.length),this.items=this.fullList.slice(this.firstBulk,this.to),this.isFirstBulk=!1)},e.prototype.runSortInFavoriteBeacon=function(){var e=this.sortBy;this.primolyticsService.doBeaconReport({p:"general",op:"sortEshelf"+(e.charAt(0).toUpperCase()+e.slice(1))},this.item,this.primolyticsService.getTimestamp())},Object.defineProperty(e.prototype,"sortBy",{get:function(){return this._sortBy},set:function(e){this._sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!T(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.resultsExists?this.searchService.getResultObject().info.total:0},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return!!this.userSessionManagerService.getUserName()},e.prototype.addCameFromPinToFavoritesParam=function(e){this.searchService.cameFromState=e},r([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"changeUrL",null),r([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"checkSelectedLabels",null),r([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"clearSelection",null),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$translate")),o(4,a.Inject("$location")),o(5,a.Inject("$stateParams")),o(6,a.Inject("restBaseURLs")),o(11,a.Inject("accountListBulkSize")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.UserSessionManagerService&&s.UserSessionManagerService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&n||Object,Object,Object,Object,"function"==typeof(I="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&I||Object,"function"==typeof(R="undefined"!=typeof f.SearchService&&f.SearchService)&&R||Object,"function"==typeof(P="undefined"!=typeof m.PrimolyticsService&&m.PrimolyticsService)&&P||Object,"function"==typeof(j="undefined"!=typeof d.RtaService&&d.RtaService)&&j||Object,Object,"function"==typeof(A="undefined"!=typeof h.DateUtils&&h.DateUtils)&&A||Object])],e);var t,n,I,R,P,j,A}();t.FavoritesService=R},function(e,t,n){"use strict";function r(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.element(document.getElementsByTagName("primo-explore")).injector().get("$state");n.current.reloadOnSearch=!1;var o=r.apply(this,e),a=i.element(document.getElementsByTagName("primo-explore")).injector().get("$rootScope").$on("$locationChangeSuccess",function(){n.current.reloadOnSearch=!0,a()});return o},n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.preventStateReload=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(34),c=n(154),u=n(93),l=n(181),f=n(108),p=n(1),d=n(2),h=n(26),m=n(33),g=n(3),y=n(138),v=function(){function e(e,t,n,r,i,o,a,s){var u=this;this.opacService=e,this.configurationUtil=t,this.fullViewService=n,this.requestServicesService=r,this.$timeout=i,this.$scope=o,this.locationsService=a,this.smoothScrollUtil=s,this.defaultTab=b.LOCATIONS,this.BACK_HISTORY_SIZE=12,this._isLocationFiltered=!1,this._isLocationsFilterVisible=!1,this.backToHistoryStack=new c.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab,this.serviceScrollId="",this.isOverlayFullView=!1,this.$scope.$watch(function(){return u.memberInst},function(e,t){y(e,t)||(u.selectedTab=u.defaultTab,u.backToHistoryStack=new c.LimitedHistoryStack(u.BACK_HISTORY_SIZE))})}return Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isServicesListIsLoadingDone",{get:function(){return!this.isSuprima()||this.opacService.isServicesListIsLoadingDone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocationFiltered",{get:function(){return this._isLocationFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocationsFilterVisible",{get:function(){return this._isLocationsFilterVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mmsId",{get:function(){return this._mmsId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationServices",{get:function(){return this._locationServices},enumerable:!0,configurable:!0}),e.prototype.onChangeTabEvent=function(e){var t=this;null!==e&&angular.isDefined(e.isFiltered)&&(this._isLocationFiltered=e.isFiltered),null!==e&&angular.isDefined(e.itemId)?this._itemId=e.itemId:this._itemId="",null!==e&&angular.isDefined(e.mmsId)?this._mmsId=e.mmsId:this._mmsId="",null!==e&&angular.isDefined(e.filters)&&(this.filters=e.filters),null!==e&&angular.isDefined(e.dropDownOptions)&&(this.dropDownOptions=e.dropDownOptions),null!==e&&angular.isDefined(e.locationsFilterVisible)&&(this._isLocationsFilterVisible=e.locationsFilterVisible),this.isLocationFiltered||(this.filters={});var n=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==n.referer&&this.backToHistoryStack.peek()!==n.referer&&this.backToHistoryStack.push(n.referer),void 0!==n.loc?(this.loc=n.loc,"suprima"===this.configurationUtil.getBackendSystem()&&(this._locationServices=this.loc.services)):"suprima"===this.configurationUtil.getBackendSystem()&&n.dest===b.LOCATIONS&&(this._locationServices=void 0),n.service&&(this.service=n.service),n.clearStack&&this.backToHistoryStack.clear(),n.updateLocationItems&&(g(this,"loc.locationNoItems")||this.locationsService.getLocationsItems([[this.loc]],!1,!0).then(function(e){t.loc=e.data.itemInfo.results[0][0]})),this.selectedTab=n.dest,n.cancelFocus||this.$timeout(function(){t.isOverlayFullView?t.smoothScrollUtil.scrollTo(t.serviceScrollId,"","sticky-scroll"):t.smoothScrollUtil.scrollTo(t.serviceScrollId,"","")},100))},e.prototype.hasGetit1=function(){var e=g(this.item,"delivery.GetIt1.links",g(this.item,"delivery.GetIt1",[]));return e.length>0},e.prototype.goBack=function(){var e=this.backToHistoryStack.pop();this.selectedTab=e},e.prototype.availTabs=function(){return b},e.prototype.hasLocations=function(){return!!(this.item&&this.item.delivery.holding.length>0)},e.prototype.isSingleLoc=function(e){var t=this.configurationUtil.getLocationsConfiguration().viewinstsort;if(!e)return!1;var n=e.delivery.holding;return n=n.filter(function(e){return!t||e.organization===p.getInstitutionCode()}),n.length<2},e.prototype.displayBackToLocationButton=function(){return this.configurationUtil.getLocationsConfiguration().displayholdingsfilters||!this.isSingleLoc(this.item)},e.prototype.focusOnLocations=function(){var e=document.querySelector("prm-location > button");this.$timeout(function(){e&&e.focus()},100)},e.prototype.getResponseMessage=function(){return this.opacService.getResponseMessage()},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof h.PrimoResponse&&h.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",String)],e.prototype,"serviceMode",void 0),r([a.Input(),i("design:type",String)],e.prototype,"serviceScrollId",void 0),r([a.Input(),i("design:type",String)],e.prototype,"memberInst",void 0),r([a.Input(),i("design:type",String)],e.prototype,"registerUser",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),e=r([a.Component({selector:"prm-opac",templateUrl:"components/search/fullView/getit/opac/opac.html"}),o(4,a.Inject("$timeout")),o(5,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.OpacService&&s.OpacService)&&n||Object,"function"==typeof(v="undefined"!=typeof d.ConfigurationUtil&&d.ConfigurationUtil)&&v||Object,"function"==typeof(S="undefined"!=typeof u.FullViewService&&u.FullViewService)&&S||Object,"function"==typeof(_="undefined"!=typeof l.RequestServicesService&&l.RequestServicesService)&&_||Object,Object,Object,"function"==typeof(O="undefined"!=typeof f.LocationsService&&f.LocationsService)&&O||Object,"function"==typeof(T="undefined"!=typeof m.SmoothScrollUtil&&m.SmoothScrollUtil)&&T||Object])],e);var t,n,v,S,_,O,T}();t.PrmOpac=v;var b;!function(e){e[e.LOCATIONS=0]="LOCATIONS",e[e.ITEMS=1]="ITEMS",e[e.REQUEST=2]="REQUEST",e[e.COPYRIGHTS=3]="COPYRIGHTS",e[e.RESPONSE=4]="RESPONSE",e[e.APPROVAL=5]="APPROVAL"}(b=t.OPAC_TAB||(t.OPAC_TAB={}))},function(e,t,n){function r(e,t,n,r){
return null==e?[]:(o(t)||(t=null==t?[]:[t]),n=r?void 0:n,o(n)||(n=null==n?[]:[n]),i(e,t,n))}var i=n(322),o=n(15);e.exports=r},function(e,t,n){var r=n(277),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(1),c=n(0),u=n(37),l=n(46),f=n(16),p=n(96),d=n(18),h=function(){function e(e,t,n,r,i,o,a,c,u,l,f){this.$http=e,this.restBaseURLs=t,this.configurationUtil=n,this.$translate=r,this.sharedSessionStorage=i,this.personalizeResultsButtonService=o,this.newspapersService=a,this.$state=c,this.$location=u,this.preFiltersService=l,this.$q=f,this.inst=s.getInstitutionCode(),this.NEWSPAPERS_SEARCH_ENABLED=s.getNewspapersSearchEnabled(),this.refEntryActive=s.getRefEntryActive(),this.vid=s.getVid(),this.disableCache=s.getDisableCacheParameters(),this.searchInProgress=!1,this.searchRestUrl=t.pnxBaseURL,this.getFacetsRestUrl=this.configurationUtil.isSuprima()?t.getFacetsBaseURL:this.searchRestUrl,this.PAGE_SIZE=s.getResultsBulkSize()}return Object.defineProperty(e.prototype,"searchData",{get:function(){return this.dataToBeSent},enumerable:!0,configurable:!0}),e.prototype.performSearch=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),r&&this.searchInProgress)return this.$q.reject("there is a newer search than the one we are trying to get facets for so this facets request is irrelevant");var o=e.query;e.mode&&"advanced"===e.mode||(o=this.preFiltersService.removePreFilter(o,!0," "));var a=this.sharedSessionStorage.getItem("personalization"),s="";this.personalizeResultsButtonService.enable&&null!==a&&a.length>0&&(s=a.split(",").join(";"));var c=e.facets||[],u={offset:0,inst:e.overrideViewInstitution||this.inst,limit:e.bulkSize,vid:this.vid,scope:"browse"===this.$state.params.mode?"browse_search":e.scope,tab:e.tab||"default_tab",q:o,journals:e.journals,databases:e.databases,featuredNewspapersIssnList:e.featuredNewspapersIssnList,fromDate:e.fromDate,qInclude:c.filter(function(e){return("include"===e.type||"exact"===e.type)&&e.isMultiFacet!==!0}).map(this.facetToString).join("|,|"),qExclude:c.filter(function(e){return"exclude"===e.type&&e.isMultiFacet!==!0}).map(this.facetToString).join("|,|"),lang:this.$translate.use(),explain:e.explain,sort:e.sortby,pcAvailability:e.pcAvailability,rtaLinks:!0,disableCache:this.disableCache,getMore:e.getMore?e.getMore:0,browseParams:e.browseParams,came_from:this.$state.params.came_from,skipDelivery:e.skipDelivery||"N",mode:this.$state.params.mode,newspapersActive:this.NEWSPAPERS_SEARCH_ENABLED,refEntryActive:this.refEntryActive,searchCDI:e.searchCDI,newspapersSearch:!1,blendFacetsSeparately:e.blendFacetsSeparately,isRelatedItems:e.isRelatedItems,organization:e.organization},l=[],f=[];if(d(c,function(e){e.isMultiFacet===!0&&l.indexOf(e.multiFacetGroupId)==-1&&l.push(e.multiFacetGroupId)}),l.length&&(d(l,function(e){var t=[];t=c.filter(function(t){return t.isMultiFacet===!0&&t.multiFacetGroupId===e}).map(i.facetToString).join("|,|"),t.length&&f.push(t),t=[]}),f.length&&(u.multiFacets=f)),this.newspapersService.isNewspapersSearch()&&(u.newspapersSearch=!0,u.tab=void 0),this.dataToBeSent=u,e.offset&&(u.offset=e.offset-e.offset%this.PAGE_SIZE),s){var p=this.sharedSessionStorage.getItem("recentness")?1:0;u.personalization="1,"+p+","+s}var h=this.searchRestUrl+"&offset="+u.offset+"&inst="+u.inst+"&limit="+u.limit+"&vid="+u.vid+"&scope="+u.scope+"&tab="+u.tab+"&q="+u.q+"&qInclude="+u.qInclude+"&qExclude="+u.qExclude+"&lang="+u.lang+"&sort="+u.sort+"&pcAvailability="+u.pcAvailability+"&rtaLinks="+u.rtaLinks+"&disableCache="+u.disableCache+"&isRelatedItems"+u.isRelatedItems;e.noConVoc&&(h+="&conVoc=false",u.conVoc="false"),this.sharedSessionStorage.setItem("suprimaSearchApiurl",h),console.log("Search for query: "+u.q+" scope: "+u.scope+" facets: "+u.qInclude+" sorted by:"+u.sort+" is related items:"+u.isRelatedItems),r||(window.appPerformance.timeStamps["search api send"]=Date.now());var m=r?this.getFacetsRestUrl:this.searchRestUrl;return n?(this.searchDeferredObject&&!r&&this.searchDeferredObject.reject("search canceled by newer one"),this.searchDeferredObject=this.$q.defer(),r||(this.searchInProgress=!0),this.$http.get(m,{params:u}).then(function(e){r||(i.searchInProgress=!1),r&&i.searchInProgress||i.searchDeferredObject.resolve(e)},function(e){r||(i.searchInProgress=!1),r&&i.searchInProgress||i.searchDeferredObject.reject(e)}),this.searchDeferredObject.promise):this.$http.get(m,{params:u})},e.prototype.isScopeBlended=function(e){var t=window.appConfig["scopes-context-map"][e];return"B"===t},e.prototype.facetToString=function(e){var t=e.isMultiFacet&&e.type?e.type:"exact",n={range:function(e){return"facet_"+e.name+","+t+",["+e.value.replace("|,|"," TO ")+"]"},exact:function(e){return"facet_"+e.name+","+t+","+e.value},default:function(e){return"facet_"+e.name+","+t+","+e.value}},r=e.displayedType;return e.displayedType&&n[e.displayedType]||(e.displayedType="default"),n[r](e)},e.prototype.performFacetSearch=function(e,t){if(!this.configurationUtil.isSuprima())throw new Error("facet search is only supported by PrimoVE");return this.performSearch(e,t,!0,!0)},e=r([c.Injectable(),o(0,c.Inject("$http")),o(1,c.Inject("restBaseURLs")),o(3,c.Inject("$translate")),o(7,c.Inject("$state")),o(8,c.Inject("$location")),o(10,c.Inject("$q")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof a.ConfigurationUtil&&a.ConfigurationUtil)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof u.SharedSessionStorage&&u.SharedSessionStorage)&&n||Object,"function"==typeof(h="undefined"!=typeof l.PersonalizeResultsButtonService&&l.PersonalizeResultsButtonService)&&h||Object,"function"==typeof(m="undefined"!=typeof f.NewspapersService&&f.NewspapersService)&&m||Object,Object,Object,"function"==typeof(g="undefined"!=typeof p.PreFiltersService&&p.PreFiltersService)&&g||Object,Object])],e);var t,n,h,m,g}();t.Cheetah=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=n(21),l=n(49),f=n(14),p=n(4),d=n(37),h=n(10),m=n(1),g=n(316),y=n(318),v=n(176),b=n(196),S=n(5),_=n(15),O=n(24),T=n(227),E=(n(77),n(132)),w=n(88),I=n(18),R=n(65),P=n(113),j=(n(578),n(138),n(66)),A=n(29),C=n(3),$=n(323),D=(n(177),function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d){var h=this;this.configurationUtil=e,this.searchStateService=t,this.searchFieldsService=n,this.$location=r,this.$translate=i,this.$state=o,this.$stateParams=a,this.$q=s,this.sharedSessionStorageService=c,this.userSessionManager=u,this.translationService=l,this.activeFacetsTransformerService=f,this.inactiveFacetsTransformationService=p,this.partiallyTranslatedLocalFieldsUtil=d,this.activeMultipleFacets=!1,this.activeRangeMultiFacet=!1,this._pcAvailability=!1,this.stickyFacetsStorageKey="stickyFacets",this.origLimits=[-1500,-1e3,-500,1,500,1e3,1500,1600,1700,1800,1900,1910,1920,1930,1940,1950],this.bundlePrefix={lang:"lang.",rtype:"facets.facet.facet_rtype.",frbrgroupid:"facets.facet.facet_frbrgroupid",tlevel:"facets.facet.tlevel.",newrecords:"facets.facet.facet_newrecords.",domain:"",library:"",other_libraries:"",data_source:"fulldisplay.datasource."},this.showPcAvailabilityForScope=E(function(e){var t=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"];return w(Object.keys(t),function(n){return"AVAILABLE_ONLY"===t[n][e]})}),this.results=[],this._displayedTypeFacet={creationdate:"range",searchcreationdate:"range"},this.sortBy={alpha_numeric:function(e){var t=e.value.indexOf(".")>-1?e.value:i.instant(h.facetLabel(e));return t.toLowerCase()},by_size:function(e){return-1*parseInt(e.count)},by_number:function(e){return parseInt(e.value,0)},open_access:function(e){return"open_access"===e.value?1:-1}};var m=this;this.additionalData={range:function(e,t,n){return e=P(e,m.sortBy.by_number),t=t?parseInt(t):parseInt(h.normalizeMinYear(e[0].value),0),n=n?parseInt(n):parseInt(e[e.length-1].value,0),{min:t,max:n,selectedMin:t,selectedMax:n,step:1}}},"suprima"===this.configurationUtil.getBackendSystem()&&(this.bundlePrefix.library="facets.facet.facet_library.",this.bundlePrefix.location_code="facets.facet.facet_location_code.",this.bundlePrefix.other_libraries=this.bundlePrefix.library),this._facetLabelsMap={},this.addFacetViewForInstitutionLibraries(),this.configurationUtil.getViewInstitutionLibraries()&&(this.viewInstitutionLibraries=Object.keys(this.configurationUtil.getViewInstitutionLibraries()))}return Object.defineProperty(e.prototype,"facetViews",{get:function(){return this.configurationUtil.getFacetConfiguration().facetview},enumerable:!0,configurable:!0}),e.prototype.addFacetViewForInstitutionLibraries=function(){var e=R(this.facetViews,function(e){return"facet_library"===e.id&&e.instsort});if(e>-1){var t=A(this.facetViews[e]);t.instsort=!1,t.otherInstitutions=!0,this.facetViews.splice(e+1,0,t)}},e.prototype.facetSearch=function(e){e.facet=e.facet?O([e.facet]):[];var t=this.$stateParams;t.facet||(t.facet=[]),t.facet=O([t.facet]),t.mfacet||(t.mfacet=[]),t.mfacet=O([t.mfacet]);var n=t.mfacet;if(e.sortby&&(t.sortby=e.sortby),e.removeAll&&(this.facetsIncludeFrbr(t.facet)?t=this.restorePrevSearchParams(t):(t.facet=[],t.mfacet=[],t.offset=0,this.sharedSessionStorageService.removeItem("stickyFacets"))),e.facet.length>0&&e.remove)if(this.facetsIncludeFrbr(e.facet))t=this.restorePrevSearchParams(t);else{var r=e.facet;t.facet=T(t.facet,function(e){return!r.includes(e)}),t.mfacet=T(n,function(e){return!r.includes(e.slice(0,-2))}),t.offset=0}var i=!1;if(e.facet.length>0&&!e.remove&&(t.offset=0,this.facetsIncludeFrbr(e.facet)?(t.facet=e.facet,t.mfacet=[],i=!0,t.pfilter=[]):t.facet=t.facet.concat(e.facet)),!i&&e.mfacets&&I(e.mfacets,function(e){t.mfacet.push(e)}),!t.query&&t.docid){var o=t.docid;this.configurationUtil.isSuprima()&&o.startsWith("alma")&&(o=o.substr(4)),t.query="any,contains,"+o}else t.query||(t.query="title,contains,"+e.title);return e.came_from&&(t.came_from=e.came_from),this.$state.go(this.facetSearchState(),t,{reload:this.facetSearchState()})},e.prototype.facetsIncludeFrbr=function(e){return R(e,function(e){return e.indexOf("frbrgroupid")!==-1})!==-1},e.prototype.frbrSearch=function(e,t){this.$state.current.name!==p.STATE_NAMES.CITATION_TRAILS&&this.backupPreFrbrSearchParams(t),e.sortby=this.configurationUtil.getBriefResultConfiguration().frbrsortby,this.facetSearch(e)},e.prototype.backupPreFrbrSearchParams=function(e){this.searchFieldsService.prevSortBy=this.searchFieldsService.sortby,this.searchFieldsService.prevOffset=e?e-e%m.getResultsBulkSize():0,this.searchFieldsService.prevFacets=this.$stateParams.facet?this.$stateParams.facet:[],this.searchFieldsService.prevMFacets=this.$stateParams.mfacet?this.$stateParams.mfacet:[],this.searchFieldsService.prevPFilters=this.$stateParams.pfilter?this.$stateParams.pfilter:[]},e.prototype.restorePrevSearchParams=function(e){return e.sortby=this.searchFieldsService.prevSortBy?this.searchFieldsService.prevSortBy:"rank",e.offset=this.searchFieldsService.prevOffset?this.searchFieldsService.prevOffset:0,e.facet=this.searchFieldsService.prevFacets?this.searchFieldsService.prevFacets:[],e.mfacet=this.searchFieldsService.prevMFacets?this.searchFieldsService.prevMFacets:[],e.pfilter=this.searchFieldsService.prevPFilters?this.searchFieldsService.prevPFilters:[],e},e.prototype.getResults=function(){return this.results},e.prototype.setResult=function(e){var t=this;this._facetLabelsMap={},this.inactiveFacetsTransformationService.transformInactiveFacets(e).then(function(n){e=n,t.userSessionManager.userDetailsDeferred.promise.then(function(n){var r=Object.keys(C(n,"data.userInstitutionLibraries",{}));t.results=t.parseResults(e,r)})})},e.prototype.toggleMultiFacet=function(e){var t=this.multiResults.indexOf(e);t>-1?(this.multiResults.splice(t,1),e.checked=!1):(e.facetType=e.facetType?e.facetType:"include",this.multiResults.push(e),e.checked=!0),this.totalMultipleResults?this.activeMultipleFacets=!0:this.activeMultipleFacets=!1},e.prototype.toggleMultiRangeFacet=function(e){var t=!this.activeRangeMultiFacet;if(this.activeRangeMultiFacet=t,t){var n={name:"searchcreationdate",facetType:"include",value:e,checked:!0};this.multiResults.push(n)}else for(var r=0;r<this.multiResults.length;r++)if("searchcreationdate"===this.multiResults[r].name){this.multiResults.splice(r,1);break}this.totalMultipleResults?this.activeMultipleFacets=!0:this.activeMultipleFacets=!1},e.prototype.replaceMultiRangeFacet=function(e){for(var t=0;t<this.multiResults.length;t++)if("searchcreationdate"===this.multiResults[t].name){this.multiResults[t].value=e;break}},e.prototype.totalMultipleResults=function(){return this.multiResults.length},e.prototype.toggleIncludeExclude=function(e){if(this.excludeIncludeUtil(e),this.activeMultipleFacets)e.checked||this.toggleMultiFacet(e);else if(e.mergedFacets)this.toggleMultiFacet(e),this.applyMultiFacets();else{var t=e.facetType?e.facetType:"include",n=e.name+","+t+","+e.value;this.facetSearch({facet:n})}},e.prototype.excludeIncludeUtil=function(e){e.facetType&&"exclude"===e.facetType?e.facetType="include":e.facetType="exclude"},e.prototype.clearMultiFacets=function(){I(this.multiResults,function(e){e.checked&&(e.checked=!1,e.facetType="include")}),this.multiResults=[],this.activeMultipleFacets=!1,this.activeRangeMultiFacet=!1},e.prototype.applyMultiFacets=function(){if(this.totalMultipleResults()){var e=this.$stateParams,t=e.mfacet;t&&(t=O([t]));var n=[];I(t,function(e){var t=e.split(",");if(t.length>=4){var r=parseInt(t[t.length-1],10);r&&r.toString().length<=2&&n.indexOf(r)===-1&&n.push(r)}});var r=1,i=!1;if(n.length)for(;r<100&&!i;)n.indexOf(r)===-1?i=!0:r++;var o=[];I(this.multiResults,function(e){var t=e.name+","+e.facetType+","+e.value+","+r;if(o.push(t),e.mergedFacets)for(var n=0,i=e.mergedFacets;n<i.length;n++){var a=i[n],s=e.name+","+e.facetType+","+a.value+","+r;o.push(s)}}),this.facetSearch({mfacets:o})}},e.prototype.filterEmpty=function(e){return e.name},e.prototype.parseItem=function(e,t,n,r,i,o){var a=this,s=e.filter(function(e){return e.name===n.id.replace("facet_","")});if(0===s.length)return{};var c=s[0],u=c.values,l=c.name,f=t.filter(function(e){return e.name===c.name}).map(function(e){return e.value});if(u=c.values.filter(function(e){return f.indexOf(e.value)==-1}),0===u.length)return{};"library"===c.name&&(u=this.filterLibraryValuesByInstitution(u,n.instsort,n.otherInstitutions,n.viewinstsort,o),n.instsort&&(l="library_myinstitution"),n.otherInstitutions&&(l="library_otherinstitution"));var p=S.bind(this,this.convertFacet,c.name);u=u.map(p);var d=S.isObject(n.sort)?n.sort._string:n.sort;this.sortBy[d]&&(u=P(u,this.sortBy[d])),u.forEach(function(e){a.addPartialTranslation(e,n.useTranslations)});var h={name:l,limitCount:n.count,values:u,additionalData:this.additionalData[this._displayedTypeFacet[c.name]]?this.additionalData[this._displayedTypeFacet[c.name]](u,r,i):{},displayedType:this._displayedTypeFacet[c.name]?this._displayedTypeFacet[c.name]:"exact",displayedCount:n.count>0?n.count:u.length,facetGroupCollapsed:0===n.count,useTranslations:n.useTranslations};return n.instsort&&(h.labelParam=this.$translate.instant(this.userSessionManager.getUserInstitutionCode())),h},e.prototype.addPartialTranslation=function(e,t){this.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(e.value)&&(e.isPartialyTranslatedFacet=!0,this.partiallyTranslatedLocalFieldsUtil.handlePartiallyTranslatedLocalFacet(e,t).then(function(t){e.partaillyTranslatedValue=t}))},e.prototype.filterLibraryValuesByInstitution=function(e,t,n,r,i){var o=this;return e.filter(function(e){return t?i.indexOf(e.value)>-1:n?i.indexOf(e.value)===-1:!r||o.viewInstitutionLibraries.indexOf(e.value)>-1})},e.prototype.parseResults=function(e,t){var n=this,r=this.searchStateService.getSearchObject().facets,i=void 0,o=void 0;return I(r,function(e){if("searchcreationdate"===e.name&&e.value){var t=e.value.split("|,|"),n=e.minValue,r=e.maxValue;t&&2===t.length&&(n=t[0],r=t[1]),(!i||i<n)&&(i=n),(!o||o>r)&&(o=r)}}),this.facetViews.map(function(a,s,c){return n.parseItem(e,r,a,i,o,t)}).filter(this.filterEmpty)},e.prototype.convertFacet=function(e,t){var n={name:e,value:t.value,count:t.count,maxCount:t.maxCount,label:t.label};if(t.mergedFacets&&(n.mergedFacets=t.mergedFacets),t.label){var r=this._facetLabelsMap[e];r||(r={},this._facetLabelsMap[e]=r),r[t.value]=t.label}return n},e.prototype.isFacetExists=function(e,t){return e.filter(function(e){return t.value===e.value}).length>0},Object.defineProperty(e.prototype,"displayedTypeFacet",{get:function(){return this._displayedTypeFacet},enumerable:!0,configurable:!0}),e.prototype.getRangeFacetValue=function(e,t){return e+"|,|"+t},e.prototype.getFacetLabel=function(e,t,n){var r=this;return this.$q(function(i,o){"frbrgroupid"===e&&i(e),"range"===t?r.getYearLabelValue(n).then(function(e){i(e)}):i(n)})},e.prototype.getYearLabelValue=function(e){var t=this;return this.$q(function(n,r){e===-1&&n(e);var i,o="nui."+e.substr(0,e.lastIndexOf("."));t.$translate(o).then(function(e){i=e,n(i+" ")})})},e.prototype.getRangeFacetLabelFromValue=function(e){var t=e.split("|,|");return t[0]+"-"+t[1]},e.prototype.normalizeMinYear=function(e){if(!this.configurationUtil.isSuprima()){var t=this.getIndex(parseInt(e,10));if(t>0)return this.origLimits[t-1]}return e},e.prototype.getIndex=function(e){for(var t=0;t<this.origLimits.length;t++)if(e<=this.origLimits[t])return t;return-1},Object.defineProperty(e.prototype,"pcAvailability",{get:function(){return this._pcAvailability},set:function(e){this._pcAvailability=e},enumerable:!0,configurable:!0}),e.prototype.facetSearchState=function(){return this.$state.current.name===p.STATE_NAMES.FULL_DISPLAY||this.$state.current.name===p.STATE_NAMES.CITATION_TRAILS||this.$state.current.name===p.STATE_NAMES.COLLECTION_DISCOVERY?p.STATE_NAMES.SEARCH:this.$state.current.name},e.prototype.facetLabel=function(e){var t=this.getFacetLabelValue(e.name,e.value);if(t)return t;var n=this.bundlePrefix[e.name];S.isDefined(n)||(n="facets.facet.facet_"+e.name+".");var r="tlevel"!==e.name?e.displayValue||e.value:e.value;return r.endsWith(".")&&(r=r.slice(0,-1)),e.partaillyTranslatedValue&&(r=e.partaillyTranslatedValue),"frbrgroupid"!==e.name?n+r:n},e.prototype.getFacetDefaultValue=function(e){return"range"===this.displayedTypeFacet[e.name]?e.label+this.getRangeFacetLabelFromValue(e.displayValue):e.partaillyTranslatedValue||e.displayValue||e.value},e.prototype.addStickyFacet=function(e){e.persistent=!0,e.operation="add",this.addLockedIndicationOfFacetInUrl(e);var t=this.getStickyFacetsFromPersistentStorage(),n=this.expandFacetToArray(e);t=t.concat(n),this.sharedSessionStorageService.setItem(this.stickyFacetsStorageKey,JSON.stringify(t))},e.prototype.addLockedIndicationOfFacetInUrl=function(e){this.replaceUrlFacetsParameters(e,!0)},e.prototype.removeLockedIndicationOfFacetFromUrl=function(e){this.replaceUrlFacetsParameters(e,!1)},e.prototype.getFacetsAndMfacetsArray=function(){var e=this.$location.search();e.facet||(e.facet=[]),e.mfacet||(e.mfacet=[]);var t=_(e.facet)?e.facet:[e.facet],n=_(e.mfacet)?e.mfacet:[e.mfacet];return t.concat(n)},e.prototype.replaceUrlFacetsParameters=function(e,t){var n=this,r=this.getFacetsAndMfacetsArray(),i=this.$location.search(),o=this.getStickyFacetStr(e,t);r.forEach(function(r){if(r===o){var a=t?r.concat(",lk"):r.replace(",lk",""),s=e.isMultiFacet?"mfacet":"facet";if(i[s]){if(_(i[s])){var c=i[s].indexOf(r);i[s][c]=a}else i[s]=a;n.$location.search(s,i[s]),n.$stateParams[s]=i[s]}}})},e.prototype.getStickyFacetStr=function(e,t){var n=e.name+","+e.type+","+e.value;return e.isMultiFacet&&(n=n.concat(","+e.multiFacetGroupId)),t?n:n.concat(",lk")},e.prototype.expandFacetToArray=function(e){var t=[];return e.mergedFacets&&(t=t.concat(e.mergedFacets),e=$(e,"mergedFacets")),t.push(e),t},e.prototype.removeStickyFacet=function(e){var t=this;e.persistent=!1,this.removeLockedIndicationOfFacetFromUrl(e);var n=this.getStickyFacetsFromPersistentStorage(),r=this.expandFacetToArray(e);T(n,function(e){return R(r,function(n){return t.isFacetEqual(e,n)})>-1}),this.sharedSessionStorageService.setItem(this.stickyFacetsStorageKey,JSON.stringify(n))},e.prototype.getStickyFacets=function(){return this.isFrbrSearch()?[]:this.getStickyFacetsFromPersistentStorage()},e.prototype.getStickyFacetsFromPersistentStorage=function(){var e,t=this.sharedSessionStorageService.getItem(this.stickyFacetsStorageKey);return e=j(t)?[]:JSON.parse(t)},e.prototype.isFrbrSearch=function(){var e=this.$stateParams.facet;if(void 0!==e&&e&&(e=O([e]),!e.includes(void 0)))for(var t=0;t<e.length;t++)if(e[t].indexOf("frbrgroupid")!==-1)return!0;return!1},e.prototype.isFacetEqual=function(e,t){return!j(e)&&!j(t)&&(e.type==t.type&&e.name==t.name&&e.value==t.value)},Object.defineProperty(e.prototype,"facetLabelsMap",{get:function(){return this._facetLabelsMap},enumerable:!0,configurable:!0}),e.prototype.getFacetLabelValue=function(e,t){if(this._facetLabelsMap[e])return this._facetLabelsMap[e][t]},e.prototype.transformActiveFacets=function(e){var t=this,n=this.activeFacetsTransformerService.transformActiveFacets(e);return n.forEach(function(e){t.addPartialTranslation(e,e.useTranslation)}),n},e.prototype.getTranslatedFacetGroupName=function(e){if(this.$translate.isReady())return this.translationService.translateInstantWithDefault("facets.facet.facet_"+e,e)},e.prototype.removeNotRelevantChars=function(e){var t=/\$\$8\s*(.){3}/g;return"suprima"===this.configurationUtil.getBackendSystem()&&(t=/\$\$8\s*(.){2}/g),e.replace(t,"")},e.prototype.subStringBeforeSecondDash=function(e){var t="–",n=e.indexOf(t),r=e.indexOf(t,n+1);return e.substring(0,r)},e.prototype.getFacetTitleTranslated=function(e,t){if(this.$translate.isReady()){var n=this.removeNotRelevantChars(e.displayValue||e.value);return e.isPartiallyTranslated?e.partaillyTranslatedValue:t.useTranslations&&!e.isPartialyTranslatedFacet?this.translationService.translateInstantWithDefault(e.value.toLowerCase(),n):this.isDisplayLibraryNameLocationFacet(t)?this.getTranslatedLocationWithLibraryName(e,t):this.translationService.translateInstantWithDefault(this.removeNotRelevantChars(this.facetLabel(e)),n)}},e.prototype.isDisplayLibraryNameLocationFacet=function(e){return"suprima"===this.configurationUtil.getBackendSystem()&&"location_code"===e.name&&c.getAttributesMap().displayLibraryNameLocationFacet},e.prototype.getTranslatedLocationWithLibraryName=function(e,t){if(this.$translate.isReady()){var n=this.removeNotRelevantChars(e.displayValue||e.value);return this.translationService.translateInstantWithDefault(this.removeNotRelevantChars(this.createlibraryNameLabelFromLocationFacet(e,t)),n)+" - "+this.translationService.translateInstantWithDefault(this.removeNotRelevantChars(this.facetLabel(e)),n)}},e.prototype.createlibraryNameLabelFromLocationFacet=function(e,t){var n=""+this.bundlePrefix.library+e.value,r=this.subStringBeforeSecondDash(n);return r},r([l.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"addLockedIndicationOfFacetInUrl",null),r([l.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"removeLockedIndicationOfFacetFromUrl",null),e=r([a.Injectable(),o(3,a.Inject("$location")),o(4,a.Inject("$translate")),o(5,a.Inject("$state")),o(6,a.Inject("$stateParams")),o(7,a.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof u.SearchStateService&&u.SearchStateService)&&n||Object,"function"==typeof(D="undefined"!=typeof f.SearchFieldsService&&f.SearchFieldsService)&&D||Object,Object,Object,Object,Object,Object,"function"==typeof(L="undefined"!=typeof d.SharedSessionStorage&&d.SharedSessionStorage)&&L||Object,"function"==typeof(k="undefined"!=typeof h.UserSessionManagerService&&h.UserSessionManagerService)&&k||Object,"function"==typeof(M="undefined"!=typeof b.TranslationService&&b.TranslationService)&&M||Object,"function"==typeof(x="undefined"!=typeof g.ActiveFacetsTransformationService&&g.ActiveFacetsTransformationService)&&x||Object,"function"==typeof(F="undefined"!=typeof y.InactiveFacetsTransformationService&&y.InactiveFacetsTransformationService)&&F||Object,"function"==typeof(U="undefined"!=typeof v.PartiallyTranslatedLocalFieldsUtil&&v.PartiallyTranslatedLocalFieldsUtil)&&U||Object])],e);var t,n,D,L,k,M,x,F,U}());t.FacetService=D},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(54),u=n(9),l=n(3),f=n(80),p=n(426),d=n(557),h=function(){function e(e,t,n,r,i,o,a){this.$http=e,this.$stateParams=n,this.$q=r,this.$translate=i,this.cheetah=o,this.mappingTablesCache=a,this.collectionTreePromiseMap={},this.sourceCodeIdPromiseMap={},this.$http=e,this.restIlsUrl=t.myAccountBaseURL+"/collection",this._itemsViewStyle="grid","suprima"===s.getBackendSystem()?this._isCollectionDiscoverySpecificDisplay=s.getAttributesMap().collectionDiscoveryEnabled:this._isCollectionDiscoverySpecificDisplay=this.mappingTablesCache.findByProperties("Collection Discovery Configuration",{source1:"Use Collection-specific display",target:"Yes"}).length>0}return e.prototype.getCollectionTreePromise=function(e,t){var n=e||s.getInstitutionCode(),r=t||this.$translate.use(),i=n+"_"+r;return this.collectionTreePromiseMap[i]},e.prototype.getBreadcrumbs=function(){return this.breadcrumbs},e.prototype.getCollection=function(e,t){var n=e||s.getInstitutionCode(),r=t||this.$translate.use(),i=n+"_"+r;if(this.collectionTreePromiseMap[i])return this.collectionTreePromiseMap[i];var o={inst:n,name:"get_collections",lang:this.$translate.use(),userInst:s.getInstitutionCode(),ilsgEntityParams:"primo_user_institution,"+s.getInstitutionCode()+";ils_user_institution,"+n,useCache:!0},a=this.$http.get(this.restIlsUrl,{params:o}).then(function(e){return l(e,"data.data.collection",void 0)});return this.collectionTreePromiseMap[i]=a,a},e.prototype.getSubColWithPath=function(e,t){var n=this;return this.$q(function(r,i){n.getCollection(t).then(function(t){e&&r(n.searchCollectionTree(t,e,{value:0,path:[],level:0},0))})})},e.prototype.getSubColThatHasItems=function(e){var t=this;return this.$q(function(n,r){t.getCollection(e).then(function(e){n(t.searchCollectionTree(e,void 0,{value:0,path:[],level:0},0,!0))})})},e.prototype.searchCollectionTree=function(e,t,n,r,i){if(void 0===e.length){if(i&&"Y"===e.items||!i&&e.pid.value==t)return n.value=e,n;n.path.push({name:e.name,pid:e.pid.value,level:r}),e.collections&&(e=e.collections.collection,"suprima"===s.getBackendSystem()&&void 0===e.length&&(e=[e]))}if(void 0!==e.length)for(var o=++n.level,a=0;a<e.length;a++){var c=this.searchCollectionTree(e[a],t,n,o,i);if(void 0!==c&&void 0!==c.value||(n.path=n.path.filter(function(e){return e.level<n.level}),n.level=a+1===e.length?n.level-1:n.level),void 0!==c)return n.value=c.value,n}},e.prototype.getItemsForCollection=function(e,t,n,r,i,o){var a=t||s.getInstitutionCode(),c="";c+="cdparentid,exact,"+e,i&&(c+=",AND;"+i.split(";").join(" ").split("*").join(" "));var u={query:c,scope:"suprima"!==s.getBackendSystem()?"collection_discovery_search":"browse_search",offset:0|n,bulkSize:r||s.getResultsBulkSize(),overrideViewInstitution:a,sortby:o};return i&&(u.mode="advanced"),this.cheetah.performSearch(u)},e.prototype.getSubcollectionsForSearchQuery=function(e,t,n){var r=this,i=n||s.getInstitutionCode(),o=[],a=[];return this.$q(function(n,c){t?r.getSourceCodeIdByCollections(i).then(function(c){o=t.map(function(e){return"suprima"!==s.getBackendSystem()?c+e.pid.value:e.mms_id}),a=r.prepareSearchRequests(e,o,i),n(a)}):n(a)})},e.prototype.prepareSearchRequests=function(e,t,n){var r=this,i=[],o=970-(e?e.length:0),a=30;if("suprima"!==s.getBackendSystem()){if(t.length>0){var c=t.map(function(e){return e.length}),u=d(c)+6;o/=u,a=Math.min(a,Math.floor(o))}}else t.length>0&&(a=Math.min(t.length,100));var l=p(t,a);return l.forEach(function(t){var o="";o+="suprima"!==s.getBackendSystem()?"rid":"mms_id",o+=",contains,",t.forEach(function(e){return o+=e+" OR "}),o=o.substring(0,o.length-4),e&&(o+=",AND;"+e.split(";").join(" ").split("*").join(" "));var c={query:o,scope:"suprima"!==s.getBackendSystem()?"collection_discovery_search":"browse_search",mode:"advanced",bulkSize:a,overrideViewInstitution:n};i.push(r.cheetah.performSearch(c))}),i},e.prototype.getDataFromCollectionRecord=function(e){var t=l(e,"pnx.control.colldiscovery");if(t)return t.map(function(e){var t;if(e){t={};for(var n=e.split("$$"),r=0,i=n;r<i.length;r++){var o=i[r],a=o.substring(1);switch(o.charAt(0)){case"T":t.type=a.toUpperCase();break;case"D":t.collectionId=a;break;case"I":t.institution=a}}}return t})},e.prototype.getSourceCodeIdByCollections=function(e){var t=this,n=e||s.getInstitutionCode();if(this.sourceCodeIdPromiseMap[n])return this.sourceCodeIdPromiseMap[n];var r=this.$q(function(e,r){if("suprima"!==s.getBackendSystem()){var i={query:"rtype,exact,collection",scope:"suprima"!==s.getBackendSystem()?"collection_discovery_search":"browse_search",mode:"advanced",bulkSize:1,overrideViewInstitution:n};t.cheetah.performSearch(i).then(function(t){var n=l(t,"data.docs",{}),r=l(n,"[0].pnx.control.sourceid[0]","");e(r)})}else e("")});return this.sourceCodeIdPromiseMap[n]=r,r},e.prototype.getCollectionRecordByCId=function(e,t){var n=this,r=t||s.getInstitutionCode();return this.$q(function(t,i){n.getSourceCodeIdByCollections(r).then(function(i){n.getRecordByDocId("suprima"!==s.getBackendSystem()?i+e:""+e,r).then(function(e){t(e)})})})},e.prototype.getRecordByDocId=function(e,t){var n=t||s.getInstitutionCode(),r={query:"any,exact,"+e,scope:"suprima"!==s.getBackendSystem()?"collection_discovery_search":"browse_search",overrideViewInstitution:n};return this.cheetah.performSearch(r).then(function(e){return l(e,"data.docs[0]")})},e.prototype.getThumbnailFromItem=function(e){var t=l(e,"delivery.link",[]),n=f(t,function(e){return e.linkType.indexOf("thumbnail")>-1&&e.linkURL});return l(n,"linkURL")},Object.defineProperty(e.prototype,"itemsViewStyle",{get:function(){return this._itemsViewStyle},set:function(e){this._itemsViewStyle=e;
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollectionDiscoverySpecificDisplay",{get:function(){return this._isCollectionDiscoverySpecificDisplay},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$stateParams")),o(3,a.Inject("$q")),o(4,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.Cheetah&&c.Cheetah)&&t||Object,"function"==typeof(n="undefined"!=typeof u.MappingTablesCache&&u.MappingTablesCache)&&n||Object])],e);var t,n}();t.CollectionDiscoveryService=h},function(e,t,n){function r(e){return a(e)?i(e):o(e)}var i=n(284),o=n(285),a=n(58);e.exports=r},function(e,t,n){function r(e){return null!=e&&o(e.length)&&!i(e)}var i=n(208),o=n(214);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:o(n);return s<0&&(s=a(r+s,0)),i(e,t,s)}var i=n(124),o=n(76),a=Math.max;e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(133);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(54),c=n(1),u=n(14),l=n(1),f=n(17),p=n(16),d=function(){function e(e,t,n,r,i,o,a,s){this.cheetahService=e,this.$location=t,this.$http=n,this.restBaseURLs=r,this.$httpParamSerializer=i,this.searchFieldsService=o,this.storageUtil=a,this.newspapersService=s,this.GET_URL=r.saveSearchURL}return e.prototype.calculatePayload=function(){var e="";"suprima"===l.getBackendSystem()?e=this.$location.protocol()+"://"+location.host+"/discovery/search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams):(e=this.$location.protocol()+"://"+location.host+"/primo-explore/search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams),this.newspapersService.isNewspapersSearch()&&(e=this.$location.absUrl())),e=this.multiReplace(e,"+","%20");var t={add:[{searchData:this.cheetahService.searchData,queryUrl:e,suprimaSearchApiurl:this.storageUtil.sessionStorage.getItem("suprimaSearchApiurl")}]};return t},e.prototype.multiReplace=function(e,t,n){if(t===n)return e;do e=e.replace(t,n);while(e.indexOf(t)!==-1);return e},e.prototype.addItems=function(){var e=this.calculatePayload();return this.makeRequest("add",e,"POST","/add?vid="+c.getVid())},e.prototype.makeRequest=function(e,t,n,r){var i=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="");var o={method:n,url:this.GET_URL+r,params:"GET"===n?t:null,data:"POST"===n||"PUT"===n?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(n){return i.reqFailure(n,e,t)})},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,n){throw e},e.prototype.onToastClose=function(){angular.element(document.querySelector("primo-explore")).css("position","")},e=r([a.Injectable(),o(1,a.Inject("$location")),o(2,a.Inject("$http")),o(3,a.Inject("restBaseURLs")),o(4,a.Inject("$httpParamSerializer")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.Cheetah&&s.Cheetah)&&t||Object,Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof u.SearchFieldsService&&u.SearchFieldsService)&&n||Object,"function"==typeof(d="undefined"!=typeof f.StorageUtil&&f.StorageUtil)&&d||Object,"function"==typeof(h="undefined"!=typeof p.NewspapersService&&p.NewspapersService)&&h||Object])],e);var t,n,d,h}();t.AddQueryToSavedSearchesService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(337),c=n(9),u=n(12),l=n(30),f=n(34),p=n(108),d=n(1),h=n(7),m=n(98),g=n(5),y=n(39),v=n(340),b=n(18),S=n(3),_=n(45),O=function(){function e(e,t,n,r,i,o,a,s,c,u){var f=this;this.$translate=e,this.requestFromService=t,this.mappingTablesCache=n,this.formBuilderService=r,this.alertService=i,this.restBaseURLs=o,this.opacService=a,this.locationsService=s,this.$http=c,this.jwtUtilService=u,this.updateForm=g.bind(this,this.updateFormUnbound),this._formFields=[],this._form=[],this._formData={},this.ilsDataPerService={HoldRequest:function(e){return f.getDataByService("HoldRequest",e)},ILL:function(e){return f.getDataByService("ILL",e)},Recall:function(e){return f.getDataByService("Recall",e)},PhotocopyRequest:function(e){return e["services-arr"].services},CallSlip:function(e){return f.getDataByService("CallSlip",e)},UBRequest:function(e){return f.getDataByService("ubrequest",e)},ShortLoan:function(e){return f.getDataByService("ShortLoan",e)},AlmaRequest:function(e){return f.getDataByService("AlmaRequest",e)},AlmaDigitization:function(e){return f.getDataByService("AlmaDigitization",e)},AlmaPurchaseRequest:function(e){return f.getDataByService("AlmaPurchaseRequest",e)},AlmaResourceSharing:function(e){return f.getDataByService("AlmaResourceSharing",e)},AlmaRequestAnyItem:function(e){return f.getDataByService("AlmaRequestAnyItem",e)},AlmaRequestOther:function(e){return f.getDataByService("AlmaRequestOther",e)},AlmaDigitizationOther:function(e){return f.getDataByService("AlmaDigitizationOther",e)},AlmaGeneralDigitization:function(e){return f.getDataByService("AlmaGeneralDigitization",e)},AlmaItemRequest:function(e){return f.getDataByService("AlmaRequest",e)},AlmaItemDigitization:function(e){return f.getDataByService("AlmaDigitization",e)}},this.mappingTablePerService={HoldRequest:this.mappingTablesCache.tables.HOLD_OPTIONAL_REQUEST_PARAMETERS,ILL:this.mappingTablesCache.tables.ILL_OPTIONAL_REQUEST_PARAMETERS,Recall:this.mappingTablesCache.tables.RECALL_OPTIONAL_REQUEST_PARAMETERS,PhotocopyRequest:this.mappingTablesCache.tables.PHOTOCOPY_OPTIONAL_REQUEST_PARAMETERS,CallSlip:this.mappingTablesCache.tables.CALL_SLIP_OPTIONAL_REQUEST_PARAMETERS,UBRequest:this.mappingTablesCache.tables.UB_OPTIONAL_REQUEST_PARAMETERS,AlmaRequest:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaDigitization:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS,AlmaPurchaseRequest:this.mappingTablesCache.tables.PURCHASE_REQUEST_OPTIONAL_PARAMETERS,AlmaResourceSharing:this.mappingTablesCache.tables.RESOURCE_SHARING_REQUEST_PARAMETERS,AlmaRequestAnyItem:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaRequestOther:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaDigitizationOther:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS,AlmaGeneralDigitization:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS,AlmaItemRequest:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaItemDigitization:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS},this.copyRight={ILL:function(){return f.mappingTablesCache.findByProperties(f.mappingTablePerService.ILL,{source2:"copyright",target:"Yes"})},AlmaDigitization:function(){var e=f.mappingTablesCache.findByProperties(f.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return f._digitizationCopyright?e:void 0},AlmaDigitizationOther:function(){var e=f.mappingTablesCache.findByProperties(f.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return f._digitizationCopyright?e:void 0},AlmaGeneralDigitization:function(){var e=f.mappingTablesCache.findByProperties(f.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return f._digitizationCopyright?e:void 0},AlmaItemDigitization:function(){var e=f.mappingTablesCache.findByProperties(f.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return f._digitizationCopyright?e:void 0},AlmaResourceSharing:function(){var e=f.mappingTablesCache.findByProperties(f.mappingTablePerService.AlmaResourceSharing,{source2:"copyrights",target:"Yes"});return f._resourceSharingCopyright?e:void 0}},this.filterMappingTableRowsByCitationType=function(e){return function(t){return!!t.source3&&("book"===t.source3&&"BK"===e.citationType||"article"===t.source3&&"CR"===e.citationType)}},this._newFormObservable=new m.Subject,this._reqAlert=this.alertService.create(l.ALERT_MSG_TYPE.REQUEST),this.$translate("almaDigitization.copyright.message").then(function(e){e&&e.length>0?f._digitizationCopyright=!0:f._digitizationCopyright=!1}),this.$translate("almaResourceSharing.copyright.message").then(function(e){e&&e.length>0?f._resourceSharingCopyright=!0:f._resourceSharingCopyright=!1}),this._isCheckAvailabilityEnabled=this.mappingTablesCache.findByProperties(this.mappingTablePerService.AlmaResourceSharing,{source2:"itemAvailability",target:"Yes"}).length>0}return Object.defineProperty(e.prototype,"isCheckAvailabilityEnabled",{get:function(){return this._isCheckAvailabilityEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestIsLoading",{get:function(){return this._requestIsLoading},set:function(e){return this._requestIsLoading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayErrorMessage",{get:function(){return this._displayErrorMessage},set:function(e){this._displayErrorMessage=e},enumerable:!0,configurable:!0}),e.prototype.getHoldAdditionalParams=function(e){return{}},e.prototype.getILLAdditionalParams=function(e){return{}},e.prototype.getRecallAdditionalParams=function(e){return{}},e.prototype.getPhotocopyAdditionalParams=function(e){return{}},e.prototype.getCallSlipAdditionalParams=function(e){return{}},e.prototype.getUBAdditionalParams=function(e){var t,n=this;return t=g.isArray(e.pnx.control.sourcedbandrecordid)?e.pnx.control.sourcedbandrecordid.map(function(e,t,r){return n.handleDedup(e)}):this.handleDedup(e.pnx.control.sourcedbandrecordid),{ils_db_id_record_id:t}},e.prototype.getShortLoanAdditionalParams=function(e){return{}},e.prototype.getAlmaDigitizationAdditionalParams=function(e){return{}},e.prototype.getAlmaRequestAdditionalParams=function(e){return{}},e.prototype.getAlmaPurchaseRequestAdditionalParams=function(e){return{}},e.prototype.getAlmaResourceSharingAdditionalParams=function(e){return{}},e.prototype.getAlmaRequestAnyItemAdditionalParams=function(e){return{}},e.prototype.handleDedup=function(e){var t=v(e,"$$V");return t.length>1&&(e=t[1]),t=v(e,"$$"),t.length>1&&(e=t[0]),e},e.prototype.setMessages=function(e){this._reqAlert.show(e)},e.prototype.getHtml=function(e,t){var n="";return e?t&&(n='<span class="bar-text margin-right-small" translate="'+t+'"></span>'):n='<span class="bar-text margin-right-small" translate="nui.request.signin"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>',n},Object.defineProperty(e.prototype,"formFields",{get:function(){return this._formFields},set:function(e){this._formFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},set:function(e){this._form=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this._formData},set:function(e){this._formData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsData",{get:function(){return this._ilsData},set:function(e){this._ilsData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formchanged",{get:function(){return this._formchanged},set:function(e){this._formchanged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},set:function(e){this._service=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsApiId",{get:function(){return this._ilsApiId},set:function(e){this._ilsApiId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this._reqAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newFormObservable",{get:function(){return this._newFormObservable},enumerable:!0,configurable:!0}),e.prototype.setupNewForm=function(e,t,n){void 0===n&&(n=!1),this.form=[],this.formData={},this.ilsData=t,this.service=e,this.formFields=this.requestFromService.getFormFields(this.service),this.updateForm({service:e}),n||this._newFormObservable.next("newForm")},e.prototype.updateFormUnbound=function(e){e||(e={}),e.service&&(this.service=e.service),this.form=this.parseFields(this.service,e)},e.prototype.isCopyRight=function(e){return!!this.copyRight[e.type]&&this.copyRight[e.type]()},e.prototype.parseFields=function(e,t){var n=this;if(!this.formFields)return[];t.trigger&&b(this.formFields,function(e){e.disabled&&(n.formData[e.name]=void 0,e.disabled=!1)});var r=this.formFields.map(function(r,i,o){return n.parseItem(e,r,t)}).filter(this.filterEmpty);return r&&r.length>0&&r[0].order?r.sort(function(e,t){return e.order&&t.order?parseFloat(e.order)-parseFloat(t.order):e.order&&!t.order?-1:!e.order&&t.order?1:0}):r},e.prototype.parseItem=function(e,t,n){var r=this;if(!t)return{};this.updateFieldFromMappingTable(e,t);var i=this.getIlsDataForField(e,t);return(t.name!==n.trigger||t.duplicateOf===n.trigger)&&t.populator&&t.populator.func&&i&&(t.populator.func(t,this.formFields,this.formData,i),!t.options||0===t.options.length)?{}:(this.requestFromService.getForm(e).handleField(t,this.formFields,this.formData,this.ilsDataPerService[e.type](this.ilsData),n),t.events&&(t.events.onChange=this.updateForm,t.events.onClick=this.updateForm,t.events.params={service:e,trigger:t.name},"requestType"===t.name&&(t.events.onClick=function(e){b(e.formFields,function(t){"requestType"!==t.name&&(e.formData[t.name]=void 0,t.disabled=!1)}),r.updateForm()},t.events.params={formData:this.formData,formFields:this.formFields})),t)},e.prototype.getIlsDataForField=function(e,t){return t.path===u.FormBuilderEnums.ROOT?this.ilsData:this.ilsDataPerService[e.type]?this.ilsDataPerService[e.type](this.ilsData):void 0},e.prototype.filterEmpty=function(e){return e.name},e.prototype.hideField=function(e){e.saveFormField||(e.saveFormField={}),e.saveFormField.uiType=e.uiType,e.uiType=u.FormBuilderEnums.UI_TYPE.HIDDEN},e.prototype.updateFieldFromMappingTable=function(e,t){if(this.mappingTablePerService[e.type]){var n=this.mappingTablesCache.findByProperties(this.mappingTablePerService[e.type],{source2:t.key});if(!n||0===n.length)return void(0===n.length&&"allowOtherLibrary"===t.key&&this.hideField(t));var r;"AlmaResourceSharing"===e.type&&n.length>1&&(n=n.filter(this.filterMappingTableRowsByCitationType(this._formData))),r=n[0],"No"===r.target?this.hideField(t):t.saveFormField&&t.uiType===u.FormBuilderEnums.UI_TYPE.HIDDEN&&t.saveFormField.uiType&&S(t,"populator.params.singleValueBehaviour")!==u.FormBuilderEnums.UI_TYPE.HIDDEN&&(t.uiType=t.saveFormField.uiType),r.source5&&(t.mandatory="Yes"===r.source5);var i=this.requestFromService.getSectionsMap(this.service);if(i)if("line1"===t.key||"line2"===t.key||"line3"===t.key||"line4"===t.key){var o=r;n=this.mappingTablesCache.findByProperties(this.mappingTablePerService[e.type],{source2:"alternativeLocationAddress"}),n.length>1&&(n=n.filter(this.filterMappingTableRowsByCitationType(this._formData))),r=n[0],t.order=100*i[r.source3]+parseInt(r.source4,10)+parseInt(o.source4,10)}else if("email"===t.key){var o=r;n=this.mappingTablesCache.findByProperties(this.mappingTablePerService[e.type],{source2:"alternativeLocationEmail"}),n.length>1&&(n=n.filter(this.filterMappingTableRowsByCitationType(this._formData))),r=n[0],t.order=100*i[r.source3]+parseInt(r.source4,10)+parseInt(o.source4,10)}else t.order=100*i[r.source3]+parseInt(r.source4,10)}},e.prototype.getDataByService=function(e,t){var n=y(t["services-arr"].services,function(t){return t["type-name"]===e||t["service-name"]===e});return n?n:[]},e.prototype.getServicesAdditionalParams=function(e){return{HoldRequest:this.getHoldAdditionalParams(e),ILL:this.getILLAdditionalParams(e),Recall:this.getRecallAdditionalParams(e),PhotocopyRequest:this.getPhotocopyAdditionalParams(e),CallSlip:this.getCallSlipAdditionalParams(e),UBRequest:this.getUBAdditionalParams(e),ShortLoan:this.getShortLoanAdditionalParams(e),AlmaDigitization:this.getAlmaDigitizationAdditionalParams(e),AlmaPurchaseRequest:this.getAlmaPurchaseRequestAdditionalParams(e),AlmaRequest:this.getAlmaRequestAdditionalParams(e),AlmaResourceSharing:this.getAlmaResourceSharingAdditionalParams(e),AlmaRequestAnyItem:this.getAlmaRequestAnyItemAdditionalParams(e),AlmaDigitizationOther:this.getAlmaDigitizationAdditionalParams(e),AlmaGeneralDigitization:this.getAlmaDigitizationAdditionalParams(e),AlmaRequestOther:this.getAlmaRequestAdditionalParams(e),AlmaItemDigitization:this.getAlmaDigitizationAdditionalParams(e),AlmaItemRequest:this.getAlmaRequestAdditionalParams(e)}},e.prototype.checkAvailability=function(){var e=_(this.formData),t=this.jwtUtilService.getDecodedToken().user;e.userId=t;var n=d.getRequestItemAvailabilityCheckTimeout();return this.$http.get(this.restBaseURLs.ILSServicesBaseURL+"/institutionCode/"+d.getInstitutionCode()+"/isItemAvailableForRequest",{params:e,timeout:n})},e=r([a.Injectable(),o(0,a.Inject("$translate")),o(5,a.Inject("restBaseURLs")),o(8,a.Inject("$http")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.RequestFromService&&s.RequestFromService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,"function"==typeof(O="undefined"!=typeof u.FormBuilderService&&u.FormBuilderService)&&O||Object,"function"==typeof(T="undefined"!=typeof l.AlertFactory&&l.AlertFactory)&&T||Object,Object,"function"==typeof(E="undefined"!=typeof f.OpacService&&f.OpacService)&&E||Object,"function"==typeof(w="undefined"!=typeof p.LocationsService&&p.LocationsService)&&w||Object,Object,"function"==typeof(I="undefined"!=typeof h.JwtUtilService&&h.JwtUtilService)&&I||Object])],e);var t,n,O,T,E,w,I}();t.RequestService=O,t.default=[]},,function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var c=null==n?0:a(n);return c<0&&(c=s(r+c,0)),i(e,o(t,3),c)}var i=n(279),o=n(36),a=n(76),s=Math.max;e.exports=r},function(e,t,n){function r(e){if(null==e)return!0;if(c(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||f(e)||a(e)))return!e.length;var t=o(e);if(t==p||t==d)return!e.size;if(l(e))return!i(e).length;for(var n in e)if(m.call(e,n))return!1;return!0}var i=n(285),o=n(131),a=n(127),s=n(15),c=n(58),u=n(128),l=n(130),f=n(171),p="[object Map]",d="[object Set]",h=Object.prototype,m=h.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(42),c=n(1),u=n(24),l=function(){function e(e,t,n){this.templateUtil=e,this.$http=t,this.restBaseURLs=n,this.vid=c.getVid(),this.PUSHTO_API_URL=n.actionsBaseURL+"/pushto/"}return e.prototype.getServiceUrl=function(e,t,n,r){var i=this.buildPayload(u(e),t,r);return console.log("payload push to"),console.log(i),this.$http.post(this.PUSHTO_API_URL+n+"?vid="+this.vid,i)},e.prototype.buildPayload=function(e,t,n){var r={records:t?t:e};for(var i in n)r[i]=n[i];return r},e=r([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.TemplateUtil&&s.TemplateUtil)&&t||Object,Object,Object])],e);var t}();t.PushtoService=l},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function r(e){return e&&e.length?i(e):[]}var i=n(206);e.exports=r},function(e,t,n){"use strict";var r=n(13),i=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return null},enumerable:!0,configurable:!0}),e}();t.DependencyMetadata=i;var o=function(){function e(e){this.token=e}return e.paramDecoratorForNonConstructor=function(e,t,n,r){var i=t[n];i.$inject=i.$inject||[],i.$inject[r]=e.token},e.prototype.toString=function(){return"@Inject("+r.stringify(this.token)+")"},e}();t.InjectMetadata=o;var a=function(){function e(){}return e.prototype.toString=function(){return"@Optional()"},e}();t.OptionalMetadata=a;var s=function(){function e(e){this._id=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e}();t.InjectableMetadata=s;var c=function(){function e(){}return e.prototype.toString=function(){return"@Self()"},e}();t.SelfMetadata=c;var u=function(){function e(){}return e.prototype.toString=function(){return"@SkipSelf()"},e}();t.SkipSelfMetadata=u;var l=function(){function e(){}return e.prototype.toString=function(){return"@Host()"},e}();t.HostMetadata=l},function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(68))},function(e,t,n){function r(e){return null==e?void 0===e?c:s:u&&u in Object(e)?o(e):a(e)}var i=n(100),o=n(480),a=n(481),s="[object Null]",c="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?o(n,u,l):i(n,u,l)}return n}var i=n(157),o=n(125);e.exports=r},function(e,t,n){function r(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=n(307);e.exports=r},function(e,t,n){(function(e,r){var i;!function(o){var a="object"==typeof t&&t,s=("object"==typeof e&&e&&e.exports==a&&e,"object"==typeof r&&r);s.global!==s&&s.window!==s||(o=s);var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,f=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,p={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof",
"⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr","ª":"ordf","á":"aacute","Á":"Aacute","à":"agrave","À":"Agrave","ă":"abreve","Ă":"Abreve","â":"acirc","Â":"Acirc","å":"aring","Å":"angst","ä":"auml","Ä":"Auml","ã":"atilde","Ã":"Atilde","ą":"aogon","Ą":"Aogon","ā":"amacr","Ā":"Amacr","æ":"aelig","Æ":"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf","ℬ":"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf","ℭ":"Cfr","𝒞":"Cscr","ℂ":"Copf","ć":"cacute","Ć":"Cacute","ĉ":"ccirc","Ĉ":"Ccirc","č":"ccaron","Č":"Ccaron","ċ":"cdot","Ċ":"Cdot","ç":"ccedil","Ç":"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf","ď":"dcaron","Ď":"Dcaron","đ":"dstrok","Đ":"Dstrok","ð":"eth","Ð":"ETH","ⅇ":"ee","ℯ":"escr","𝔢":"efr","𝕖":"eopf","ℰ":"Escr","𝔈":"Efr","𝔼":"Eopf","é":"eacute","É":"Eacute","è":"egrave","È":"Egrave","ê":"ecirc","Ê":"Ecirc","ě":"ecaron","Ě":"Ecaron","ë":"euml","Ë":"Euml","ė":"edot","Ė":"Edot","ę":"eogon","Ę":"Eogon","ē":"emacr","Ē":"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf","ℱ":"Fscr","ﬀ":"fflig","ﬃ":"ffilig","ﬄ":"ffllig","ﬁ":"filig",fj:"fjlig","ﬂ":"fllig","ƒ":"fnof","ℊ":"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr","ǵ":"gacute","ğ":"gbreve","Ğ":"Gbreve","ĝ":"gcirc","Ĝ":"Gcirc","ġ":"gdot","Ġ":"Gdot","Ģ":"Gcedil","𝔥":"hfr","ℎ":"planckh","𝒽":"hscr","𝕙":"hopf","ℋ":"Hscr","ℌ":"Hfr","ℍ":"Hopf","ĥ":"hcirc","Ĥ":"Hcirc","ℏ":"hbar","ħ":"hstrok","Ħ":"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf","ℐ":"Iscr","ℑ":"Im","í":"iacute","Í":"Iacute","ì":"igrave","Ì":"Igrave","î":"icirc","Î":"Icirc","ï":"iuml","Ï":"Iuml","ĩ":"itilde","Ĩ":"Itilde","İ":"Idot","į":"iogon","Į":"Iogon","ī":"imacr","Ī":"Imacr","ĳ":"ijlig","Ĳ":"IJlig","ı":"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf","ĵ":"jcirc","Ĵ":"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr","ķ":"kcedil","Ķ":"Kcedil","𝔩":"lfr","𝓁":"lscr","ℓ":"ell","𝕝":"lopf","ℒ":"Lscr","𝔏":"Lfr","𝕃":"Lopf","ĺ":"lacute","Ĺ":"Lacute","ľ":"lcaron","Ľ":"Lcaron","ļ":"lcedil","Ļ":"Lcedil","ł":"lstrok","Ł":"Lstrok","ŀ":"lmidot","Ŀ":"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf","ℳ":"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr","ℕ":"Nopf","𝒩":"Nscr","𝔑":"Nfr","ń":"nacute","Ń":"Nacute","ň":"ncaron","Ň":"Ncaron","ñ":"ntilde","Ñ":"Ntilde","ņ":"ncedil","Ņ":"Ncedil","№":"numero","ŋ":"eng","Ŋ":"ENG","𝕠":"oopf","𝔬":"ofr","ℴ":"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf","º":"ordm","ó":"oacute","Ó":"Oacute","ò":"ograve","Ò":"Ograve","ô":"ocirc","Ô":"Ocirc","ö":"ouml","Ö":"Ouml","ő":"odblac","Ő":"Odblac","õ":"otilde","Õ":"Otilde","ø":"oslash","Ø":"Oslash","ō":"omacr","Ō":"Omacr","œ":"oelig","Œ":"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf","ℙ":"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr","ℚ":"Qopf","ĸ":"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr","ℛ":"Rscr","ℜ":"Re","ℝ":"Ropf","ŕ":"racute","Ŕ":"Racute","ř":"rcaron","Ř":"Rcaron","ŗ":"rcedil","Ŗ":"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS","ś":"sacute","Ś":"Sacute","ŝ":"scirc","Ŝ":"Scirc","š":"scaron","Š":"Scaron","ş":"scedil","Ş":"Scedil","ß":"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf","ť":"tcaron","Ť":"Tcaron","ţ":"tcedil","Ţ":"Tcedil","™":"trade","ŧ":"tstrok","Ŧ":"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr","ú":"uacute","Ú":"Uacute","ù":"ugrave","Ù":"Ugrave","ŭ":"ubreve","Ŭ":"Ubreve","û":"ucirc","Û":"Ucirc","ů":"uring","Ů":"Uring","ü":"uuml","Ü":"Uuml","ű":"udblac","Ű":"Udblac","ũ":"utilde","Ũ":"Utilde","ų":"uogon","Ų":"Uogon","ū":"umacr","Ū":"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr","ŵ":"wcirc","Ŵ":"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf","ý":"yacute","Ý":"Yacute","ŷ":"ycirc","Ŷ":"Ycirc","ÿ":"yuml","Ÿ":"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf","ℨ":"Zfr","ℤ":"Zopf","𝒵":"Zscr","ź":"zacute","Ź":"Zacute","ž":"zcaron","Ž":"Zcaron","ż":"zdot","Ż":"Zdot","Ƶ":"imped","þ":"thorn","Þ":"THORN","ŉ":"napos","α":"alpha","Α":"Alpha","β":"beta","Β":"Beta","γ":"gamma","Γ":"Gamma","δ":"delta","Δ":"Delta","ε":"epsi","ϵ":"epsiv","Ε":"Epsilon","ϝ":"gammad","Ϝ":"Gammad","ζ":"zeta","Ζ":"Zeta","η":"eta","Η":"Eta","θ":"theta","ϑ":"thetav","Θ":"Theta","ι":"iota","Ι":"Iota","κ":"kappa","ϰ":"kappav","Κ":"Kappa","λ":"lambda","Λ":"Lambda","μ":"mu","µ":"micro","Μ":"Mu","ν":"nu","Ν":"Nu","ξ":"xi","Ξ":"Xi","ο":"omicron","Ο":"Omicron","π":"pi","ϖ":"piv","Π":"Pi","ρ":"rho","ϱ":"rhov","Ρ":"Rho","σ":"sigma","Σ":"Sigma","ς":"sigmaf","τ":"tau","Τ":"Tau","υ":"upsi","Υ":"Upsilon","ϒ":"Upsi","φ":"phi","ϕ":"phiv","Φ":"Phi","χ":"chi","Χ":"Chi","ψ":"psi","Ψ":"Psi","ω":"omega","Ω":"ohm","а":"acy","А":"Acy","б":"bcy","Б":"Bcy","в":"vcy","В":"Vcy","г":"gcy","Г":"Gcy","ѓ":"gjcy","Ѓ":"GJcy","д":"dcy","Д":"Dcy","ђ":"djcy","Ђ":"DJcy","е":"iecy","Е":"IEcy","ё":"iocy","Ё":"IOcy","є":"jukcy","Є":"Jukcy","ж":"zhcy","Ж":"ZHcy","з":"zcy","З":"Zcy","ѕ":"dscy","Ѕ":"DScy","и":"icy","И":"Icy","і":"iukcy","І":"Iukcy","ї":"yicy","Ї":"YIcy","й":"jcy","Й":"Jcy","ј":"jsercy","Ј":"Jsercy","к":"kcy","К":"Kcy","ќ":"kjcy","Ќ":"KJcy","л":"lcy","Л":"Lcy","љ":"ljcy","Љ":"LJcy","м":"mcy","М":"Mcy","н":"ncy","Н":"Ncy","њ":"njcy","Њ":"NJcy","о":"ocy","О":"Ocy","п":"pcy","П":"Pcy","р":"rcy","Р":"Rcy","с":"scy","С":"Scy","т":"tcy","Т":"Tcy","ћ":"tshcy","Ћ":"TSHcy","у":"ucy","У":"Ucy","ў":"ubrcy","Ў":"Ubrcy","ф":"fcy","Ф":"Fcy","х":"khcy","Х":"KHcy","ц":"tscy","Ц":"TScy","ч":"chcy","Ч":"CHcy","џ":"dzcy","Џ":"DZcy","ш":"shcy","Ш":"SHcy","щ":"shchcy","Щ":"SHCHcy","ъ":"hardcy","Ъ":"HARDcy","ы":"ycy","Ы":"Ycy","ь":"softcy","Ь":"SOFTcy","э":"ecy","Э":"Ecy","ю":"yucy","Ю":"YUcy","я":"yacy","Я":"YAcy","ℵ":"aleph","ℶ":"beth","ℷ":"gimel","ℸ":"daleth"},d=/["&'<>`]/g,h={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},m=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,g=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,v={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",
rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},b={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},S={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},_=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],O=String.fromCharCode,T={},E=T.hasOwnProperty,w=function(e,t){return E.call(e,t)},I=function(e,t){for(var n=-1,r=e.length;++n<r;)if(e[n]==t)return!0;return!1},R=function(e,t){if(!e)return t;var n,r={};for(n in t)r[n]=w(e,n)?e[n]:t[n];return r},P=function(e,t){var n="";return e>=55296&&e<=57343||e>1114111?(t&&C("character reference outside the permissible Unicode range"),"�"):w(S,e)?(t&&C("disallowed character reference"),S[e]):(t&&I(_,e)&&C("disallowed character reference"),e>65535&&(e-=65536,n+=O(e>>>10&1023|55296),e=56320|1023&e),n+=O(e))},j=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},A=function(e){return"&#"+e+";"},C=function(e){throw Error("Parse error: "+e)},$=function(e,t){t=R(t,$.options);var n=t.strict;n&&g.test(e)&&C("forbidden code point");var r=t.encodeEverything,i=t.useNamedReferences,o=t.allowUnsafeSymbols,a=t.decimal?A:j,s=function(e){return a(e.charCodeAt(0))};return r?(e=e.replace(u,function(e){return i&&w(p,e)?"&"+p[e]+";":s(e)}),i&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),i&&(e=e.replace(f,function(e){return"&"+p[e]+";"}))):i?(o||(e=e.replace(d,function(e){return"&"+p[e]+";"})),e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),e=e.replace(f,function(e){return"&"+p[e]+";"})):o||(e=e.replace(d,s)),e.replace(c,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=1024*(t-55296)+n-56320+65536;return a(r)}).replace(l,s)};$.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var D=function(e,t){t=R(t,D.options);var n=t.strict;return n&&m.test(e)&&C("malformed character reference"),e.replace(y,function(e,r,i,o,a,s,c,u){var l,f,p,d,h,m;return r?(p=r,f=i,n&&!f&&C("character reference was not terminated by a semicolon"),l=parseInt(p,10),P(l,n)):o?(d=o,f=a,n&&!f&&C("character reference was not terminated by a semicolon"),l=parseInt(d,16),P(l,n)):s?(h=s,w(v,h)?v[h]:(n&&C("named character reference was not terminated by a semicolon"),e)):(h=c,m=u,m&&t.isAttributeValue?(n&&"="==m&&C("`&` did not start a character reference"),e):(n&&C("named character reference was not terminated by a semicolon"),b[h]+(m||"")))})};D.options={isAttributeValue:!1,strict:!1};var L=function(e){return e.replace(d,function(e){return h[e]})},k={version:"1.1.0",encode:$,decode:D,escape:L,unescape:D};i=function(){return k}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(this)}).call(t,n(23)(e),n(68))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e.prototype.getValue=function(e,t,n,r){return void 0===r&&(r=""),this.getArrayValue(e,t,n,null)[0]||r},e.prototype.getArrayValue=function(e,t,n,r){return void 0===r&&(r=[]),e.pnx&&e.pnx[t]?e.pnx[t][n]||r:r},e=r([i.Injectable()],e)}();t.PnxUtil=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(39),s=n(116),c=n(117),u=n(81),l=function(){function e(){}return e.prototype.filterAndNormalizeData=function(e,t){function n(e){return e.replace(/\$\$I.*?(?=\$\$|$)/g,"")}var r=o.getInstitutionCode(),i=new RegExp("\\$\\$I\\s*"+r),s=a(t,function(e){return!e||(i.test(e)||!e.includes("$$I"))});return s=u(s,n)},e.prototype.filterAndNormalizeDataFacets=function(e){function t(e){return e.displayValue=c(e.value,"$$I"+n,""),e.label&&(e.displayValue=e.label),e}var n=o.getInstitutionCode(),r=a(e,function(e){return s(e.value,"$$I"+n)||!e.value.includes("$$I")});return r=u(r,t)},e=r([i.Injectable()],e)}();t.FilterInstitution=l},function(e,t,n){var r=n(553),i=n(65),o=r(i);e.exports=o},function(e,t,n){function r(e,t){var n=s(e)?i:a;return n(e,o(t,3))}var i=n(59),o=n(36),a=n(310),s=n(15);e.exports=r},function(e,t,n){function r(e,t,n,a,s){var c=-1,u=e.length;for(n||(n=o),s||(s=[]);++c<u;){var l=e[c];t>0&&n(l)?t>1?r(l,t-1,n,a,s):i(s,l):a||(s[s.length]=l)}return s}var i=n(191),o=n(555);e.exports=r},function(e,t,n){"use strict";var r=n(440),i=n(442);t.reflector=new r.Reflector(new i.ReflectionCapabilities)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(70),o=function(e){function t(t){var n=void 0===t?{}:t,r=n.selector,i=n.inputs,o=n.attrs,a=n.outputs,s=n.host,c=n.providers,u=n.exportAs,l=n.queries,f=n.legacy,p=e.call(this)||this;return p.selector=r,p._inputs=i,p._attrs=o,p._outputs=a,p.host=s,p.exportAs=u,p.queries=l,p._providers=c,p.legacy=f,p}return r(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attrs",{get:function(){return this._attrs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),t}(i.InjectableMetadata);t.DirectiveMetadata=o;var a=function(e){function t(t){var n=void 0===t?{}:t,r=n.selector,i=n.inputs,o=n.attrs,a=n.outputs,s=n.host,c=n.exportAs,u=n.moduleId,l=n.providers,f=n.viewProviders,p=n.changeDetection,d=void 0===p?1:p,h=n.queries,m=n.templateUrl,g=n.template,y=n.styleUrls,v=n.styles,b=n.legacy,S=e.call(this,{selector:r,inputs:i,attrs:o,outputs:a,host:s,exportAs:c,providers:l,queries:h,legacy:b})||this;return S.changeDetection=d,S._viewProviders=f,S.templateUrl=m,S.template=g,S.styleUrls=y,S.styles=v,S.moduleId=u,S}return r(t,e),Object.defineProperty(t.prototype,"viewProviders",{get:function(){return this._viewProviders},enumerable:!0,configurable:!0}),t}(o);t.ComponentMetadata=a;var s=function(){function e(e){this.bindingPropertyName=e}return e}();t.InputMetadata=s;var c=function(){function e(e){this.bindingPropertyName=e}return e}();t.AttrMetadata=c;var u=function(){function e(e){this.bindingPropertyName=e}return e}();t.OutputMetadata=u;var l=function(){function e(e){this.hostPropertyName=e}return e}();t.HostBindingMetadata=l;var f=function(){function e(e,t){this.eventName=e,this.args=t}return e}();t.HostListenerMetadata=f;var p=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n._providers=t.providers,n.declarations=t.declarations,n.imports=t.imports,n}return r(t,e),Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),t}(i.InjectableMetadata);t.NgModuleMetadata=p},function(e,t,n){function r(e,t){var n=o(e,t);return i(n)?n:void 0}var i=n(479),o=n(484);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=function(){function e(e,t){this.configurationUtil=e,this.$translate=t,this.configurationUtil=e}return e.prototype.isOvpLocation=function(e){var t=e.holdingURL;return e.holdingURL||e.location&&(t=e.location.holdingURL),!t||"OVP"===t.toUpperCase()},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.getLibraryName=function(e){if(e&&e.librarycodeTranslation)return e.librarycodeTranslation;var t=e.libraryCode||"",n=e.organization,r=n+".library."+t;return this.isSuprima()?(e.librarycodeTranslation=e.mainLocation||e["main-location"],e.librarycodeTranslation):void this.$translate(r,[],"",this.$translate.instant(t)).then(function(t){e.librarycodeTranslation=t})},e.prototype.getSubLibraryName=function(e){if(e&&e.collectionTranslation)return e.collectionTranslation;var t=e.subLocation||"",n=e.organization,r=n+".collection."+t;this.isSuprima()&&(r=t);var i=t.indexOf(".")>-1?t:this.$translate.instant(t);this.$translate(r,[],"",i).then(function(t){e.collectionTranslation=t})},e=r([a.Injectable(),o(1,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,Object])],e);var t}();t.LocationService=c,t.default=[]},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&a(t,n.length):"string"==r&&t in n)&&i(n[t],e)}var i=n(123),o=n(58),a=n(129),s=n(31);e.exports=r},function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return n&&c(e,t,n)&&(t=void 0),r(e,o(t,3))}var i=n(289),o=n(36),a=n(574),s=n(15),c=n(87);e.exports=r},function(e,t,n){"use strict";function r(){return g||(g=window.appConfig.customization||{}),g}function i(){return r().viewCss}function o(){return r().resourceIcons}function a(){return r().libraryLogo}function s(){return r().libraryLogoClickableURL}function c(){return r().centralCss}function u(){return r().centralJs}function l(){return r().colorCss}function f(){return r().favIcon}function p(){return r().homeScreenIcon}function d(){return r().viewJs}function h(){return r().viewSvg}function m(){return r().staticHtml}Object.defineProperty(t,"__esModule",{value:!0});var g;t.getViewCss=i,t.getResouceTypeImages=o,t.getLibraryLogo=a,t.getLibraryLogoClickableURL=s,t.getCentralCss=c,t.getCentralJs=u,t.getColorCss=l,t.getFavIcon=f,t.getHomeScreenIcon=p,t.getViewJs=d,t.getViewSvg=h,t.getStaticHtml=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(1),u=n(110),l=n(7),f=n(3),p=function(){function e(e,t,n,r,i,o,a){this.httpService=e,this.ngrsService=t,this.jwtUtilService=n,this.$translate=r,this.restBaseURLs=i,this.$http=o,this.$q=a,this.ilsServices={},this._instId=c.getInstitutionId(),this._instCode=c.getInstitutionCode(),this.resquestInProgress={},this.primaBaseUrl=i.bestOfferURL,this.primaRequestBaseUrl=i.ngrsCreateBorrowingRequestURL,this.primaPickupLocationBaseUrl=i.primaPickupLocationBaseUrl,this.primaEmailUrl=i.primaEmailUrl,this.ilsServices={"/bestoffer/physical":{path:this.primaBaseUrl,method:"GET"},"/bestoffer/borrowingrequest":{path:this.primaRequestBaseUrl,method:"POST"},"/bestoffer/pickupLocation":{path:this.primaPickupLocationBaseUrl,method:"GET"},"/bestoffer/email":{path:this.primaEmailUrl,method:"GET"}}}return e.prototype.getbestOffer=function(e,t){var n=this.getIssnFromItem(t),r={mmsid:e,instId:this._instId,instCode:this._instCode,clientUserId:this.jwtUtilService.getDecodedToken().userGroup,publicationDate:f(t,"pnx.addata.date"),isbn:f(t,"pnx.addata.isbn"),issn:n,title:f(t,"pnx.display.title"),format:f(t,"pnx.addata.format"),edition:f(t,"pnx.addata.edition"),creator:f(t,"pnx.search.creatorcontrib"),volume:f(t,"pnx.addata.volume"),oclc:f(t,"pnx.addata.oclcid"),issue:f(t,"pnx.addata.issue"),atitle:f(t,"pnx.addata.atitle")};return this.makeIlsRequest("/bestoffer/physical",r)},e.prototype.getIssnFromItem=function(e){var t;return t=f(e,"pnx.addata.issn"),t||(t=f(e,"pnx.search.issn")),t},e.prototype.getbestOfferByGlobalIndex=function(e,t){var n={globalTitleIndex:e,instId:this._instId,instCode:this._instCode,clientUserId:this.jwtUtilService.getDecodedToken().userGroup,publicationDate:f(t,"pnx.addata.date"),isbn:f(t,"pnx.addata.isbn"),issn:this.getIssnFromItem(t),title:f(t,"pnx.display.title"),format:f(t,"pnx.addata.format"),edition:f(t,"pnx.addata.edition"),creator:f(t,"pnx.search.creatorcontrib"),volume:f(t,"pnx.addata.volume"),oclc:f(t,"pnx.addata.oclcid"),issue:f(t,"pnx.addata.issue"),atitle:f(t,"pnx.addata.atitle")};return this.makeIlsRequest("/bestoffer/physical",n)},e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e.prototype.createBorrowingRequest=function(e,t,n,r){var i={supplyTime:n.supplyTime,cost:n.cost,allowRenewal:n.allowRenewal,supportRush:n.supportRush,memberId:n.memberId,policyId:n.policyId,title:f(t,"pnx.display.title"),availableLenderMmsId:n.availableLenderMmsId,lenderMemberId:n.lenderMemberId,lenderMemberName:n.lenderMemberName,lenderInstitutionId:n.lenderInstitutionId,globalIndex:f(t,"pnx.control.recordid"),requesterNote:e.myNote,dueDate:e.myDate,volume:this.getVolume(t,e),publicationDate:f(t,"pnx.addata.date"),offerType:n.offerType,isbn:f(t,"pnx.addata.isbn"),issn:this.getIssnFromItem(t),pnxFormat:f(t,"pnx.addata.format"),edition:f(t,"pnx.addata.edition"),creator:f(t,"pnx.search.creatorcontrib"),oclc:f(t,"pnx.addata.oclcid"),issue:f(t,"pnx.addata.issue"),atitle:f(t,"pnx.addata.atitle")};return"undefined"==typeof n.memberId?(i.format=n.policyType,this.setPhysicalalFields(i,e),this.setDigitalFields(i,e,r),i.allowOtherFormat=n.allowOtherFormat):"PHYSICAL"===n.policyType?(i.loanPeriod=n.loanPeriod,i.format="PHYSICAL",this.setPhysicalalFields(i,e),i.allowOtherFormat=!1):(i.format="DIGITAL",this.setDigitalFields(i,e,r),i.allowOtherFormat=!1),isNaN(f(t,"pnx.control.sourcerecordid"))||(i.localMmsId=f(t,"pnx.control.sourcerecordid")),this.makeIlsRequest("/bestoffer/borrowingrequest",i)},e.prototype.setDigitalFields=function(e,t,n){t.myEmail===n?e.email=t.myAlternativeEmail:e.email=t.myEmail,e.chapterTitle=t.myChapterTitle,e.chapterAuthor=t.myChapterAuthor,e.chapterNumber=t.myChapterNumber,e.fromPage=t.myFromPage,e.toPage=t.myToPage},e.prototype.setPhysicalalFields=function(e,t){e.pickUpLocation=t.myLocation},e.prototype.getVolume=function(e,t){return t.myVolume?t.myVolume:f(e,"pnx.addata.volume")},e.prototype.getPickupLocation=function(){var e={instCode:this._instCode,instId:this._instId};return this.makeIlsRequest("/bestoffer/pickupLocation",e)},e.prototype.getEmailList=function(){var e={instCode:this._instCode,instId:this._instId};return this.makeIlsRequest("/bestoffer/email",e)},e.prototype.setResultsObject=function(e,t){this._resultsObject?this._resultsObject[t]=e[t]:(this._resultsObject=[],this._resultsObject[t]=e[t])},e.prototype.getResultsObject=function(){return this._resultsObject},e.prototype.resetResultsObject=function(){this._resultsObject=[]},e=r([a.Injectable(),o(3,a.Inject("$translate")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$http")),o(6,a.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.NgrsService&&u.NgrsService)&&n||Object,"function"==typeof(p="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&p||Object,Object,Object,Object,Object])],e);var t,n,p}();t.PhysicalBestOfferService=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(32),a={},s=function(){function e(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];r(this,e),this.name=t,n?(this.moduleList(n),this._module=angular.module(t,this._dependencies)):this._module=angular.module(t)}return i(e,[{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(function(e){return!e.isProvider}),s=n.filter(function(e){return e.isProvider}),c=function(t){if(!o.providerStore.has("type",t))throw new Error("Cannot read provider metadata. Are you adding a class that hasn't been decorated yet?");var n=o.providerStore.get("type",t),r=o.providerStore.get("name",t),i=o.bundleStore.get("$inject",t)||[];if(!a[n])throw new Error("No parser registered for type '"+n+"'");a[n](t,r,i,e._module)};return i.forEach(c),s.forEach(c),this}},{key:"publish",value:function(){return this._module}},{key:"moduleList",value:function(e){if(this._dependencies=[],e&&0!==e.length)for(var t=0;t<e.length;t++)if("string"==typeof e[t])this._dependencies.push(e[t]);else{if(!e[t]||!e[t].name)throw new Error("Cannot read module: Unknown module in "+this.name);this._dependencies.push(e[t].name)}}},{key:"config",value:function(e){return this._module.config(e),this}},{key:"run",value:function(e){return this._module.run(e),this}},{key:"value",value:function(e,t){return this._module.value(e,t),this}},{key:"constant",value:function(e,t){return this._module.constant(e,t),this}}]),e}();t.DecoratedModule=s;var c=function(e,t){return new s(e,t)};c.addProvider=function(e,t){a[e]=t},c.getParser=function(e){return a[e]},t.default=c},function(e,t,n){function r(e,t,n,r){e=o(e)?e:c(e),n=n&&!r?s(n):0;var l=e.length;return n<0&&(n=u(l+n,0)),a(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&i(e,t,n)>-1}var i=n(124),o=n(58),a=n(567),s=n(76),c=n(568),u=Math.max;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(2),l=n(9),f=n(1),p=n(193),d=n(104),h=n(86),m=n(194),g=n(195),y=n(95),v=n(16),b=n(4),S=n(225),_=n(56),O=n(3),T=n(5),E=n(65),w=n(60),I=n(3),R=n(255),P=n(80),j=(n(18),n(29),";"),A=function(){function e(e,t,n,r,i,o,a,s,c,u,l,p,d,h,m,g,y){var v=this;if(this.collectionDiscoveryService=e,this.$http=t,this.restBaseURLs=n,this.configurationUtil=r,this.$state=i,this.$location=o,this.$translate=a,this.$q=s,this.mappingTablesCache=c,this.linksService=u,this.rtaService=l,this.locationService=p,this.recordUtil=d,this.citationTrailsFullviewLinkService=h,this.timesCitedService=m,this.moreLikeThisService=g,this.newspapersService=y,this.vid=f.getVid(),this.calculateSvcIdDone=!1,this.calculatePcDeliveryDone=!1,this._calculatePrimaViewItDeliveryDone=!1,this.isVirtualBrowseDisabled=!1,this.nextOffset={},this.totalItems={},this.moreLikeThisItems={},this.moreLikeThisUnfilteredItems={},this.isPromiseResolved=!1,this.servicesToFilter=["details","reviewsandtags","esploroUsage","onlinereviews","browseshelf","moreLikeThisCourse","moreLikeThisCollection"],this.configurationUtil=r,this.isVirtualBrowseDisabled=1===this.mappingTablesCache.getTable(this.mappingTablesCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===v.vid&&"disable_virtual_browse"===e.source2&&"true"===e.target}).length,this.servicesDirectives={brief:{scrollId:"brief",serviceName:"brief",title:"nui.brief.results.tabs.brief"},citations:{scrollId:"citationTrails",serviceName:"citationTrails",title:"citation_trail.link.citations",conditional:function(e){return v.recordUtil.hasCitationTrails(e)&&v.citationTrailsFullviewLinkService.shouldDisplayCitationTrial()||v.citationTrailsFullviewLinkService.shouldDisplayTimesCited()}},action_list:{scrollId:"action_list",serviceName:"action_list",title:"nui.brief.results.tabs.send_to"},esploroUsage:{scrollId:"esploroUsage",serviceName:"esploroUsage",title:"nui.brief.results.tabs.esploroUsage"},getit_link2:{serviceName:"getit_link2",title:"Get it 2"},getit_link1:{scrollId:"getit_link1",serviceName:"getit_link1",title:"brief.results.tabs.locations"
},tags:{scrollId:"tags",serviceName:"tags",title:"brief.results.tabs.tags"},ngrs:{scrollId:"ngrs",serviceName:"ngrs",title:"brief.results.tabs.Get_it_from_other_locations"},quickAccess:{scrollId:"quickAccess",serviceName:"quickaccess",title:"nui.brief.results.tabs.quickAccess"},details:{scrollId:"details",serviceName:"details",title:"brief.results.tabs.details"},links:{scrollId:"links",serviceName:"links",title:"nui.brief.results.tabs.links"},browseshelf:{scrollId:"virtualBrowse",serviceName:"virtualBrowse",title:"brief.results.tabs.browseshelf"},moreLikeThisCourse:{scrollId:"moreFromTheSameCourse",serviceName:"moreLikeThisCourse",title:"nui.brief.results.tabs.courseTab",tabTitle:"nui.brief.results.tabs.moreCourse",conditional:function(e){return!!f.getAttributesMap().moreLikeCourse&&f.getAttributesMap().moreLikeCourse}},moreLikeThisCollection:{scrollId:"moreFromTheSameCollection",serviceName:"moreLikeThisCollection",title:"nui.brief.results.tabs.collectionTab",tabTitle:"nui.brief.results.tabs.moreCollection",conditional:function(e){return!!f.getAttributesMap().moreLikeCollection&&f.getAttributesMap().moreLikeCollection}},searchWithinJournal:{scrollId:"searchWithinJournal",serviceName:"searchWithinJournal",title:"brief.results.tabs.searchWithinJournal"},timesCited:{scrollId:"citationTrails",serviceName:"timesCited",title:"citation_trail.link.citations",conditional:function(e){return v.timesCitedService.shouldDisplayTimesCited}}},this.services=[],"suprima"===this.configurationUtil.getBackendSystem()){var b=this.servicesToFilter.indexOf("details");b>-1&&this.servicesToFilter.splice(b,1)}this.calculateSvcIdDone=!1,this.calculatePcDeliveryDone=!1}return e.prototype.getServices=function(e,t,n){return a(this,void 0,void 0,function(){return s(this,function(r){return!this.servicesArray||n?[2,this.updateServices(e,t,n)]:[2,this.servicesArray]})})},Object.defineProperty(e.prototype,"lang3",{get:function(){return this._lang3},set:function(e){this._lang3=e},enumerable:!0,configurable:!0}),e.prototype.updateServices=function(e,t,n){var r=this;if(!this.isCall||n){this.isCall=!0,this.lang3=e.lang3;var i=this.configurationUtil.getBriefResultConfiguration().tabsorder.items.split(","),o=i.filter(function(e,t,n){return r.servicesDirectives[e]}).map(function(e,t,n){return r.servicesDirectives[e]});i.indexOf("moreFromTheSame")>=0&&i.splice(i.indexOf("moreFromTheSame"),1,"moreLikeThisCourse","moreLikeThisCollection");var a=i.map(function(e){return I(r.servicesDirectives,e)}).filter(Boolean),s=[];"suprima"===this.configurationUtil.getBackendSystem()&&(o=this.handleCitationTrialsAndTimesCitedVisibilityForSuprima(o,this.citationTrailsFullviewLinkService,this.timesCitedService));var c=this.parseServicesWithConfiguration(e,"getit_link1"),u=this.parseServicesWithConfiguration(e,"getit_link2"),l=[this.parseServicesWithConfiguration(e,"brief")].concat([this.parseServicesWithConfiguration(e,"action_list")]).concat(o);if(this.configurationUtil.isSuprima()||this.newspapersService.isNewspapersSearch()||this.newspapersService.isNewspaperItem(e)){var p=this.configurationUtil.getMainMenuConfiguration(),d=P(p.mainview,function(e){return"tags"===e.label});if(!d||this.configurationUtil.getSummonOverAlma()){var h=E(l,function(e){return"tags"===e.serviceName});l.splice(h,1)}}else l=l.concat([this.parseServicesWithConfiguration(e,"tags")]);if(I(e,"pnx.search.crsid")||I(e,"pnx.display.crsinfo")){var m=this.parseServicesWithConfiguration(e,"moreLikeThisCourse");m.conditional(e)&&s.push(this.moreLikeThisService.getItemsForSameField(e,"crs").then(function(t){if(r.setResultFields(t,e,"crs"),r.moreLikeThisItems.crs&&r.moreLikeThisItems.crs.length>0){var n=r.getInsertIndexLateService(a,l,m);l.splice(n,0,m)}else l=l.filter(function(e){return"moreLikeThisCourse"!==e.serviceName}),r.setResultFields(void 0,e,"moreLikeThisCourse")},function(e){}).finally(function(){r.moreLikeThisService.itemsSearchInProgress=!1}))}else l=l.filter(function(e){return"moreLikeThisCourse"!==e.serviceName}),this.setResultFields(void 0,e,"moreLikeThisCourse");if(I(e,"pnx.search.cdparentid")||I(e,"pnx.control.colldiscovery")){var g=this.parseServicesWithConfiguration(e,"moreLikeThisCollection");g.conditional(e)&&s.push(this.moreLikeThisService.getItemsForSameField(e,"col").then(function(t){if(r.setResultFields(t,e,"col"),r.moreLikeThisItems.col&&r.moreLikeThisItems.col.length>0){var n=r.getInsertIndexLateService(a,l,g);l.splice(n,0,g)}else l=l.filter(function(e){return"moreLikeThisCollection"!==e.serviceName}),r.setResultFields(void 0,e,"moreLikeThisCollection")},function(e){}).finally(function(){r.moreLikeThisService.itemsSearchInProgress=!1}))}else l=l.filter(function(e){return"moreLikeThisCollection"!==e.serviceName}),this.setResultFields(void 0,e,"moreLikeThisCollection");if(O(e,"enrichment.virtualBrowseObject.isVirtualBrowseEnabled",!1)&&!this.isVirtualBrowseDisabled||"bib"===O(f.getAttributesMap(),["virtualBrowseType"],"shelf")&&O(e,"enrichment.bibVirtualBrowseObject.isVirtualBrowseEnabled",!1)||(l=l.filter(function(e){return"virtualBrowse"!==e.serviceName})),"suprima"!==this.configurationUtil.getBackendSystem()){if(this.linksService.hasLinks(e)){var y=E(l,function(e){return"details"===e.serviceName});l.splice(y+1,0,this.parseServicesWithConfiguration(e,"links"))}}else{var v=E(l,function(e){return"links"===e.serviceName});v!=-1&&(this.linksService.hasLinks(e)?l[v].isHidden=!1:l[v].isHidden=!0)}var S=E(l,function(e){return"getit_link1"===e.serviceName});if(l=l.filter(function(e,t,n){return"getit_link1"!==e.serviceName}),l=l.slice(0,S).concat(c).concat(l.slice(S)),T.isDefined(u)){for(var _=!1,w=0;w<l.length;w++)if("getit_link2"==l[w].serviceName){l[w]=u[0],_=!0;break}_||(l=l.concat(u))}else l=l.filter(function(e){return"getit_link2"!=e.serviceName});if(this.$state.current.name===b.STATE_NAMES.SERVICE_PAGE&&(l=l.filter(function(e){return E(r.servicesToFilter,function(t){return t===e.serviceName})<0}),!("suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()&&this.isLocalRecord(e)))){var y=E(l,function(e){return"details"===e.serviceName});l.splice(y,1)}return this.displaySearchWithinJournal||(l=l.filter(function(e,t,n){return"searchWithinJournal"!==e.serviceName})),this.isNgrs()||(l=l.filter(function(e,t,n){return"ngrs"!==e.serviceName})),this.isEsploroRecord(e)||(l=l.filter(function(e,t,n){return"esploroUsage"!==e.serviceName})),this.showQuickAccess(e)||(l=l.filter(function(e,t,n){return"quickaccess"!==e.serviceName})),this.servicesArray=l,this.$q.all(s).then(function(){return r.isCall=!1,n&&(r.servicesArray=l),r.servicesArray})}},e.prototype.showQuickAccess=function(e){var t=!1;if(e.delivery&&e.delivery.serviceMode)for(var n=0,r=e.delivery.serviceMode;n<r.length;n++){var i=r[n];if("quickaccess"===i){t=!0;break}}return t},e.prototype.setResultFields=function(e,t,n){if(e){this.nextOffset[n]=I(e,"data.docs").length;var r=this.moreLikeThisService.parseResponse(e,t);this.totalItems[n]=I(e,"data.info.total"),this.moreLikeThisItems[n]=r,this.moreLikeThisUnfilteredItems[n]=O(e,"data.docs")||O(e,"docs")}else this.nextOffset[n]=void 0,this.totalItems[n]=void 0,this.moreLikeThisItems[n]=void 0,this.moreLikeThisUnfilteredItems[n]=void 0},e.prototype.isEsploroRecord=function(e){if(!this.isLocalRecord(e))return!1;var t=I(e,"pnx.control.sourceformat");return T.isArray(t)&&(t=t[0]),!(!t||"ESPLORO"!==t)},e.prototype.isLocalRecord=function(e){var t=I(e,"pnx.control.sourceid");return T.isArray(t)&&(t=t[0]),"alma"===t},e.prototype.setSearchWithinJournalService=function(e){if(this.displaySearchWithinJournal=!1,"suprima"===this.configurationUtil.getBackendSystem()){var t=I(e,"pnx.addata.issn[0]",void 0),n=I(e,"pnx.addata.eissn[0]",void 0);if(t||n){var r=I(e,"pnx.display.type[0]",void 0);if(r&&("journal"===r.toLowerCase()||"journals"===r.toLowerCase())){var i=this.configurationUtil.getSearchWithinJournalConfig();if(this.configurationUtil.getSummonOverAlma()){if(!i.summonUrl)return}else if(!i.tab||!i.scope)return;this.displaySearchWithinJournal=!0}}}},e.prototype.isCalculatePcDeliveryDone=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.calculatePcDeliveryDone},e.prototype.isCalculateSvcIdDone=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.calculateSvcIdDone},e.prototype.suprimaEnrichers=function(e){this.calculatePhysicalServiceId(e),this.enrichDeliveryWithERTA(e),this.calculatePcDelivery(e),this.updateGoogleScholarUrls(e)},e.prototype.googleScholarEnrich=function(e){e.control&&e.control.sourceformat&&e.control.sourceformat.length>0&&"ESPLORO"===e.control.sourceformat[0]?this.googleScholarEnrichForEsploro(e):this.googleScholarEnrichForDigital(e)},e.prototype.googleScholarEnrichForDigital=function(e){if(void 0!==e.display.creator)for(var t=0,n=e.display.creator;t<n.length;t++){var r=n[t];this.addMeta("citation_author",r)}this.addMeta("citation_language",I(e,"display.language[0]",void 0)),this.addMeta("citation_title",I(e,"display.title[0]",void 0)),this.addMeta("citation_publisher",I(e,"display.publisher[0]",void 0)),this.addMeta("citation_publication_date",I(e,"addata.date[0]",void 0))},e.prototype.googleScholarEnrichForEsploro=function(e){var t=[e.display.title[0]];e.display.title.length>1&&(t[0]=t[0]+": "+e.display.title[1]),this.googleScholarEnrichHandleField("citation_title",t,!1,!0),e.addata.authorsforgs&&e.addata.authorsforgs.length>0&&this.googleScholarEnrichHandleField("citation_author",e.addata.authorsforgs,!0,!1),this.isArticle(e)&&(null==e.addata.jtitle||""==e.addata.jtitle?this.googleScholarEnrichHandleField("citation_journal_title",e.display.partoftitle,!1,!0):this.googleScholarEnrichHandleField("citation_journal_title",e.addata.jtitle,!1,!0),this.googleScholarEnrichHandleField("citation_issn",e.addata.issn,!1,!1),this.googleScholarEnrichHandleField("citation_issn",e.addata.eissn,!1,!1),this.googleScholarEnrichHandleField("citation_volume",e.addata.volume,!1,!0),this.googleScholarEnrichHandleField("citation_issue",e.addata.issue,!1,!0),this.googleScholarEnrichHandleField("citation_firstpage",e.addata.spage,!1,!0),this.googleScholarEnrichHandleField("citation_lastpage",e.addata.epage,!1,!0)),this.isConference(e)&&this.googleScholarEnrichHandleField("citation_conference_title",e.addata.atitle,!1,!0),this.googleScholarEnrichHandleField("citation_doi",e.addata.doi,!1,!0),this.googleScholarEnrichHandleField("citation_isbn",e.addata.isbnforgs,!1,!1),this.googleScholarEnrichHandleField("citation_isbn",e.addata.eisbnforgs,!1,!1),this.googleScholarEnrichHandleField("citation_publication_date",e.addata.datepublishedforgs,!1,!0),this.googleScholarEnrichHandleField("citation_online_date",e.addata.dateepublishedforgs,!1,!0),e.addata.dissertationforgs&&e.addata.dissertationforgs.length>0&&this.googleScholarEnrichHandleField("citation_dissertation_institution",e.addata.dissertationforgs,!1,!0),this.googleScholarEnrichHandleField("citation_technical_report_institution",e.addata.aucorp,!1,!0),this.googleScholarEnrichHandleField("citation_language",e.display.language,!1,!0),this.googleScholarEnrichHandleField("citation_publisher",e.display.publisher,!1,!0)},e.prototype.isArticle=function(e){if(e.addata&&e.addata.esplororesourcetype&&e.addata.esplororesourcetype.length>0){var t=e.addata.esplororesourcetype[0];return"publication.journalArticle"===t||"publication.conferenceProceeding"===t||"postedContent.acceptedManuscript"===t||"publication.bookReview"===t}return!1},e.prototype.isConference=function(e){if(e.addata&&e.addata.esplororesourcetype&&e.addata.esplororesourcetype.length>0){var t=e.addata.esplororesourcetype[0];return"conference.conferencePaper"===t}return!1},e.prototype.googleScholarEnrichHandleField=function(e,t,n,r){var i=new Array;if(null!=t)if(r){if(null!=t[0]&&""!=t[0]){var o=this.googleScholarEnrichAddElement(e,t[0]);o&&i.push(o)}}else for(var a=0,s=t;a<s.length;a++){var o=s[a];if(n)for(var c=0,u=o.split(j);c<u.length;c++){var l=u[c];if(l){var f=this.googleScholarEnrichAddElement(e,l);f&&i.push(f)}}else{var p=this.googleScholarEnrichAddElement(e,o);p&&i.push(p)}}return i},e.prototype.googleScholarEnrichAddElement=function(e,t){var n=t.trimStart().trimEnd();return this.addMeta(e,n),n},e.prototype.calculatePhysicalServiceId=function(e){if(window.appPerformance.serverTimeLog=window.appPerformance.serverTimeLog?window.appPerformance.serverTimeLog:[],window.appPerformance.serverTimeLog.PhysicalServiceIdCalc=-1,"suprima"!==this.configurationUtil.getBackendSystem()||"Local Search Engine"!==e.adaptor)return this.calculateSvcIdDone=!0,void(window.appPerformance.serverTimeLog.PhysicalServiceIdCalc=0);var t=e.delivery;if(t){if(t.physicalServiceId||!this.hasHolding(t))return this.calculateSvcIdDone=!0,void(window.appPerformance.serverTimeLog.PhysicalServiceIdCalc=0);this.calculateSvcIdDone=!1;var n=this.getIlsRecordId(e),r={method:"GET",url:this.restBaseURLs.calculatePhysicalServiceId+"/"+n+"?vid="+this.vid+"&lang="+this.$translate.use()+"&recordOwner="+t.recordOwner,params:null,data:null},i=this;this.$http(r).then(function(t){i.updatePhysicalServiceIdAndLinks(e,t.data),i.updateServices(e),i.calculateSvcIdDone=!0,window.appPerformance.serverTimeLog.PhysicalServiceIdCalc=t.data.beaconO22}).finally(function(){i.calculateSvcIdDone=!0})}},e.prototype.getIlsRecordId=function(e){var t=e.delivery;return O(t,"holding[0].ilsApiId")?t.holding[0].ilsApiId:e.pnx.control.sourcerecordid[0]},e.prototype.hasHolding=function(e){return!!(e&&e.holding&&e.holding.length>=1)||!(!e||!this.hasPCategory(e.deliveryCategory))},e.prototype.skipDeliveryForRapido=function(e){if(!this.isNgrs())return!1;var t=O(e,"pnx.control.recordid"),n=O(e,"pnx.control.rapidosourcerecordid");return t&&n&&0===t[0].indexOf("cdi_globaltitleindex_catalog_")},e.prototype.calculatePcDelivery=function(e){if(window.appPerformance.serverTimeLog=window.appPerformance.serverTimeLog?window.appPerformance.serverTimeLog:[],window.appPerformance.serverTimeLog.pcDelivery=-1,this.calculatePcDeliveryDone=!1,"suprima"!==this.configurationUtil.getBackendSystem()||"Primo Central"!==e.adaptor&&"Primo VE Deep Search"!==e.adaptor&&"EbscoLocal"!==e.adaptor&&"WorldCatLocal"!==e.adaptor&&"SummonLocal"!==e.adaptor||this.skipDeliveryForRapido(e))return this.calculatePcDeliveryDone=!0,void(window.appPerformance.serverTimeLog.pcDelivery=0);var t=e.delivery;if(t){var n={doc:e},r=e.pnx.control.recordid[0],i={method:"POST",url:this.restBaseURLs.calculatePcDelivery+"/"+encodeURI(r)+"?vid="+this.vid+"&lang="+this.$translate.use(),params:null,data:n},o=this;this.$http(i).then(function(t){if("WorldCatLocal"===e.adaptor){var n=I(t,"data.delivery.availability[0]");"no_inventory"===n&&(t.data.delivery.availability=e.delivery.availability)}e.delivery=t.data.delivery,o.updateServices(e),o.calculatePcDeliveryDone=!0,window.appPerformance.serverTimeLog.pcDelivery=t.data.beaconO22}).finally(function(){o.calculatePcDeliveryDone=!0})}},e.prototype.enrichDeliveryWithERTA=function(e){var t=this;window.appPerformance.serverTimeLog=window.appPerformance.serverTimeLog?window.appPerformance.serverTimeLog:[],window.appPerformance.serverTimeLog.viewit=-1,this.calculatePrimaViewItDeliveryDone=!1;var n=e.delivery;if(n){if(this.skipElectronicEnrich(e))return this.calculatePrimaViewItDeliveryDone=!0,void(window.appPerformance.serverTimeLog.viewit=0);var r=this.$location.url(),i=e.pnx.control.recordid[0],o=I(e,"delivery.recordInstitutionCode"),a=this.vid;o&&!this.hasECategory(n.deliveryCategory)&&(a=o+":SD");var s={method:"GET",url:this.restBaseURLs.prepareElectorincRTA+"/"+i+"?vid="+a+"&lang="+this.$translate.use(),params:{googleScholar:r.includes("tags=scholar")},data:null};this.$http(s).then(function(r){t.mergeDeliveryWithEDelivery(e,r.data,null!==n.electronicServices),t.calculatePrimaViewItDeliveryDone=!0,t.updateServices(e),t.updateGoogleScholarUrls(e),window.appPerformance.serverTimeLog.viewit=r.data.beaconO22}).finally(function(){t.calculatePrimaViewItDeliveryDone=!0})}},e.prototype.updateAvailability=function(e){(this.configurationUtil.getLocationsConfiguration()&&"none"!==this.configurationUtil.getLocationsConfiguration().rta||e.delivery&&e.delivery.almaInstitutionsList)&&this.rtaService.updateAvailability([e],{rtaOnAllInstitutions:"true"})},e.prototype.skipElectronicEnrich=function(e){var t=e.delivery;return"suprima"!==this.configurationUtil.getBackendSystem()||"SP"===e.context||"Primo Central"===e.adaptor||"Primo VE Deep Search"===e.adaptor||"EbscoLocal"===e.adaptor||"WorldCatLocal"===e.adaptor||!this.hasEOrDOrRCategory(t.deliveryCategory)&&!e.delivery.hasFilteredServices},e.prototype.buildGetitServicesArray=function(e,t){var n=this;if(!e)return null;var r=this.getLinkByAction(e,t),i=[];if(this.configurationUtil.isSuprima()){var o=e.delivery?e.delivery.deliveryCategory:[];o.indexOf("Alma-E")==-1&&o.indexOf("Alma-D")==-1&&o.indexOf("Remote Search Resource")==-1||0==r.filter(function(e){return"Alma-E"===e.category||"Alma-D"===e.category||"Remote Search Resource"===e.category}).length&&i.push({scrollId:"getit_link1_0",serviceName:"Viewit",title:"nui.getit.service_viewit"})}if(r.forEach(function(t,r,o){var a=t.category,s=e.delivery?e.delivery.deliveryCategory:[],c=w(s,a);!n.configurationUtil.isSuprima()||c!==-1||"Alma-D"!==a&&"Alma-E"!==a||(a="Alma-E"===a?"Alma-D":"Alma-E",c=w(s,a));var u="";if(c!==-1&&e.delivery.serviceMode&&(u=e.delivery.serviceMode[c]),t.links&&t.links[0]){var l=i.length;"display"===u&&(n.viewOnlineScrollId="getit_link1_"+l),i.push({scrollId:"getit_link1_"+l,serviceName:u,title:"nui.getit."+t.links[0].getItTabText,linkElement:t})}}),!this.configurationUtil.isSuprima()){var a=i.map(function(e){return e.serviceName});if(w(a,"ovp")===-1&&w(a,"ovl")===-1&&w(a,"activate")===-1){var s=I(e,"delivery.holding",[]);s&&s.length>0&&i.push({scrollId:"getit_link1_0",serviceName:this.locationService.isOvpLocation(s[0])?"ovp":"ovl",title:"nui.getit.tab1_check",linkElement:null})}}return i},e.prototype.buildGetit2ServicesArray=function(e,t){if(!e)return null;if(e.delivery&&e.delivery.GetIt2){var n=[],r=e.delivery.GetIt2;return r.hyperlinkText=r.getItTabText?r.getItTabText:"",n.push({scrollId:"getit_link2",serviceName:r.serviceModeGetit2,title:"getit."+r.getItTabText,linkElement:{links:[r]}}),n}},e.prototype.hasEOrDOrRCategory=function(e){if(null===e)return!1;for(var t=0;t<e.length;t++)if("Alma-E"===e[t]||"Alma-D"===e[t]||"Remote Search Resource"===e[t])return!0;return!1},e.prototype.hasECategory=function(e){if(null===e)return!1;for(var t=0;t<e.length;t++)if("Alma-E"===e[t])return!0;return!1},e.prototype.hasPCategory=function(e){if(null===e)return!1;for(var t=0;t<e.length;t++)if("Alma-P"===e[t])return!0;return!1},e.prototype.mergeDeliveryWithEDelivery=function(e,t,n){var r=e.delivery;if(null!=t&&null!=t.quickAccessService&&(r.quickAccessService=t.quickAccessService),t&&t.filteredByGroupServices&&(r.filteredByGroupServices=t.filteredByGroupServices),null===t||!t.electronicServices){var i=E(r.deliveryCategory,function(e){return"Alma-E"===e});i!==-1&&r.deliveryCategory.splice(i,1);var o=E(r.availability,function(e){return"not_restricted"===e});o!==-1&&r.availability.splice(o,1);var a=E(r.deliveryCategory,function(e){return"Alma-D"===e});return void(a!==-1&&r.deliveryCategory.splice(a,1))}for(var s=0,c=t.electronicServices;s<c.length;s++){var u=c[s];u.isFromEDelivery=!0}if(n){var l=O(e,"delivery.electronicServices",[]),f=l.filter(function(e){return!e.isFromEDelivery});return void(e.delivery.electronicServices=f.concat(t.electronicServices))}return this.updateLinks(e,t),null===r.GetIt1?(e.delivery.electronicServices=t.electronicServices,e.delivery.GetIt1=t.GetIt1,e.delivery.serviceMode=t.serviceMode,void(e.delivery.availabilityLinks=t.availabilityLinks)):(r.electronicServices=t.electronicServices,r.availabilityLinks.unshift(t.availabilityLinks[0]),r.displayedAvailability=t.displayedAvailability,void r.GetIt1.unshift(t.GetIt1[0]))},e.prototype.updateGoogleScholarUrls=function(e){this.isEsploroRecord(e)?this.updateGoogleScholarUrlsForEsploro(e):this.updateGoogleScholarUrlsForDigital(e)},e.prototype.updateGoogleScholarUrlsForEsploro=function(e){if(e.delivery){var t=this.$location.url();t.includes("tags=scholar")&&e.delivery.electronicServices&&e.delivery.electronicServices.length>0&&e.delivery.electronicServices[0].pdfFilesUrl&&e.delivery.electronicServices[0].pdfFilesUrl.length>0&&this.addMeta("citation_pdf_url",e.delivery.electronicServices[0].pdfFilesUrl[0])}},e.prototype.updateGoogleScholarUrlsForDigital=function(e){if(e.delivery){var t=this.$location.url();if(t.includes("tags=scholar"))for(var n in e.delivery.electronicServices)if(e.delivery.electronicServices[n].pdfFilesUrl)for(var r=0,i=e.delivery.electronicServices[n].pdfFilesUrl;r<i.length;r++){var o=i[r];this.addMeta("citation_pdf_url",o)}}},e.prototype.addMeta=function(e,t){if(void 0!==t){var n=document.createElement("META");n.setAttribute("name",e),n.setAttribute("content",t),document.head.appendChild(n)}},e.prototype.updatePhysicalServiceIdAndLinks=function(e,t){var n=e.delivery;n&&null!=t&&(n.physicalServiceId=t.physicalServiceId,this.updateLinks(e,t))},e.prototype.updateLinks=function(e,t){var n=this,r=e.delivery;if((void 0===r.link||null===r.link)&&t.link)return void(e.delivery=t.link);if(t.link){var i=r.link.length;t.link=t.link.map(function(e,t,r){return n.updateIndex(e,t,i)}),e.delivery.link=R(r.link,t.link)}},e.prototype.updateIndex=function(e,t,n){return e["@id"]="_:"+(t+n),e},e.prototype.getLinkByAction=function(e,t){var n=this.getGetItObject(e,t);return n&&n.length>0?n:[]},e.prototype.getGetItObject=function(e,t){var n=[];switch(t){case"getit_link1":if(!e.delivery||!e.delivery.GetIt1)return null;n=e.delivery.GetIt1.links||e.delivery.GetIt1;break;case"getit_link2":n=e.delivery.GetIt2;break;default:return null}return n},e.prototype.parseServicesWithConfiguration=function(e,t){return"getit_link1"===t?this.buildGetitServicesArray(e,t):"getit_link2"===t?this.buildGetit2ServicesArray(e,t):this.servicesDirectives[t]},e.prototype.handleCitationTrialsAndTimesCitedVisibilityForSuprima=function(e,t,n){var r=!0;return e.filter(function(e){return"citationTrails"==e.serviceName}).length>0?t.setShowCitationTrialForSuprima(!0):(t.setShowCitationTrialForSuprima(!1),r=!1),e.filter(function(e){return"timesCited"==e.serviceName}).length>0?n.setShowTimesCitedForSuprima(!0):(n.setShowTimesCitedForSuprima(!1),r=!1),r&&(e=e.filter(function(e){return"timesCited"!=e.serviceName})),e},e.prototype.getServicesDirectives=function(){return this.servicesDirectives},e.prototype.setServiceTitle=function(e,t){this.servicesDirectives[e].title=t},e.prototype.addServiceDirective=function(e,t){this.servicesDirectives[e]=t},e.prototype.disableService=function(e){this.servicesDirectives[e].isDisabled=!0},e.prototype.calculatePrimaViewItDone=function(){return this._calculatePrimaViewItDeliveryDone&&this.isCalculatePcDeliveryDone()},Object.defineProperty(e.prototype,"calculatePrimaViewItDeliveryDone",{set:function(e){this._calculatePrimaViewItDeliveryDone=e},enumerable:!0,configurable:!0}),e.prototype.isNgrs=function(){return window.appConfig["system-configuration"].ngrs_enabled},e.prototype.getInsertIndexLateService=function(e,t,n){var r=t.length,i=I(n,"serviceName"),o=!1,a=E(e,function(e){return I(e,"serviceName")===i});return t.forEach(function(n,i,s){var c=E(e,function(e){return I(e,"serviceName")===I(n,"serviceName")});c=c===-1?t.length:c,c<=a?(r=i+1,o=!0):!o&&c<t.length&&(r=i,o=!0)}),r},e=r([c.Injectable(),o(1,c.Inject("$http")),o(2,c.Inject("restBaseURLs")),o(4,c.Inject("$state")),o(5,c.Inject("$location")),o(6,c.Inject("$translate")),o(7,c.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof _.CollectionDiscoveryService&&_.CollectionDiscoveryService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&n||Object,Object,Object,Object,Object,"function"==typeof(A="undefined"!=typeof l.MappingTablesCache&&l.MappingTablesCache)&&A||Object,"function"==typeof(C="undefined"!=typeof p.FullViewLinksService&&p.FullViewLinksService)&&C||Object,"function"==typeof($="undefined"!=typeof d.RtaService&&d.RtaService)&&$||Object,"function"==typeof(D="undefined"!=typeof h.LocationService&&h.LocationService)&&D||Object,"function"==typeof(L="undefined"!=typeof m.RecordUtil&&m.RecordUtil)&&L||Object,"function"==typeof(k="undefined"!=typeof g.CitationTrailsFullviewLinkService&&g.CitationTrailsFullviewLinkService)&&k||Object,"function"==typeof(M="undefined"!=typeof y.TimesCitedService&&y.TimesCitedService)&&M||Object,"function"==typeof(x="undefined"!=typeof S.MoreLikeThisService&&S.MoreLikeThisService)&&x||Object,"function"==typeof(F="undefined"!=typeof v.NewspapersService&&v.NewspapersService)&&F||Object])],e);var t,n,A,C,$,D,L,k,M,x,F}();t.FullViewService=A},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(54),u=(n(139),n(57),n(66),function(){function e(e,t,n,r,i){this.cheetahService=e,this.$http=t,this.$location=n,this.$stateParams=r,this.restBaseURLs=i,this.totalItems=[],this.numberOfItemsToDisplay=10,this.favoritesInProgress=!1,this.unlabeledRecords=!1,this.isFirstBulk=!0,this.needToChangeUrl=!1,this.allItems=!1,this._user=!1,this.firstBulk=0,this.countRecords=0,this.bulkSize=10,this.vid=s.getVid(),this.GET_URL=i.saveSearchURL}return e.prototype.getItemsFromApi=function(){var e=this;return this.makeRequest("get",null,"GET","?vid="+s.getVid()).then(function(t){console.log("entire res:"+JSON.stringify(t)),e.totalItems=[],e.items=[];for(var n=0,r=t.searchesList;n<r.length;n++){var i=r[n];e.totalItems.push(new l(i))}e.isFirstBulk?(e.isFirstBulk=!1,e.resetItems()):e.refreshItems()},function(e){console.log("get searches failed: ",e)})},Object.defineProperty(e.prototype,"Items",{get:function(){return this.items},enumerable:!0,configurable:!0}),e.prototype.setItems=function(e){return this.items=e},e.prototype.nextResults=function(){var e=Math.min(this.bulkSize,this.totalItems.length-this.numberOfItemsToDisplay);e>0?(this.numberOfItemsToDisplay+=e,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay),e<this.bulkSize&&(this.allItems=!0)):this.allItems=!0},e.prototype.hasNextResults=function(){return!this.allItems&&this.totalItems.length>this.bulkSize},e.prototype.refreshItems=function(){this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.resetItems=function(){this.allItems=!1,this.numberOfItemsToDisplay=this.bulkSize,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.calculatePayload=function(e,t){var n={add:[{searchData:this.cheetahService.searchData,queryUrl:e,email:t}]};return n},e.prototype.makeRequest=function(e,t,n,r){var i=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="");var o={method:n,url:this.GET_URL+r,params:"GET"===n?t:null,data:"POST"===n||"PUT"===n?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(n){return i.reqFailure(n,e,t)})},e.prototype.removeSearch=function(e){var t={ids:[{id:e}]};return this.makeRequest("remove",t,"POST","/remove?vid="+s.getVid())},e.prototype.removeSelectedSearches=function(){for(var e=this.getCheckedItems(),t={ids:[]},n=0,r=e;n<r.length;n++){var i=r[n];t.ids.push({id:i.ID})}return this.makeRequest("remove",t,"POST","/remove?vid="+s.getVid())},e.prototype.updateAlerts=function(e,t){var n=e.ID,r=e.alert?0:1,i={ids:[{id:n}],isAlert:r,email:t};return this.makeRequest("update",i,"PUT","?vid="+s.getVid())},e.prototype.createRSS=function(e){var t=e.ID,n={ver:"2_1_4",gatherpagestat:"true",EXLTabBoomId:"xxxxx",boombaseurl:"https://beacon01.alma.exlibrisgroup.com/boom/apache_pb.gif",encCtxt:e.encCtxt,sr:e.sr},r="/primo_library/libweb/action/../newRss?rssId="+t+"&amp;ver=2_1_4",i={params:n};return this.$http.post(r,n,i)},e.prototype.setAlertToSelectedSearches=function(e,t){e=e?e:"",t=t?t:this.getCheckedItems().map(function(e){return e.ID});for(var n={ids:[],isAlert:1,email:e},r=0,i=t;r<i.length;r++){var o=i[r];n.ids.push({id:o})}return this.makeRequest("update",n,"PUT","?vid="+s.getVid())},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,n){throw e},e.prototype.getCheckedItems=function(){return this.items?this.items.filter(function(e){return e.checked}):[]},e=r([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$location")),o(3,a.Inject("$stateParams")),o(4,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.Cheetah&&c.Cheetah)&&t||Object,Object,Object,Object,Object])],e);var t}());t.SavedQueriesService=u;var l=function(){function e(e){this.ID=e.ID,this.alert=e.alert,this.creationDate=e.creationDate,this.deepLink=e.deepLink,this.email=e.email,this.mode=e.mode,this.query=e.query,this.scope=e.scope,this.tab=e.tab,this.checked=!1,this.pfilter=e.pfilter,this.facet=e.facet,this.cheetahSearchData=e.cheetahSearchData,this.sr=e.sr,this.encCtxt=e.encCtxt,this.rsscreated=e.rsscreated}return e}();t.SavedQueryItem=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(7),u=n(2),l=n(81),f=n(3),p=function(){function e(e,t,n,r,i){this.jwtUtilService=e,this.$http=t,this.$stateParams=n,this.restBaseURLs=r,this.configurationUtil=i}return Object.defineProperty(e.prototype,"citedData",{get:function(){return this._citedData},set:function(e){this._citedData=e},enumerable:!0,configurable:!0}),e.prototype.containsInArr=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i===t)return!0}return!1},Object.defineProperty(e.prototype,"inFrbrMode",{get:function(){var e=this.$stateParams.facet;if(void 0==e)return!1;if(e instanceof Array){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.startsWith("frbrgroupid,"))return!0}return!1}return!!e.startsWith("frbrgroupid,")},enumerable:!0,configurable:!0}),e.prototype.updateCitedTimesAvailability=function(e){var t=this;this.citedData=void 0;var n=e.pnx.control;if(!this.configurationUtil.isSuprima()||"Primo Central"===e.adaptor){var r=f(e,"pnx.facets.frbrtype");if(this.containsInArr(n.sourceid,"scopus")||this.containsInArr(n.sourceid,"wos")||6!=r&&!this.inFrbrMode){var i=[],o=e.pnx.control.recordid,a=f(e,"pnx.facets.frbrgroupid"),c=f(e,"pnx.addata.oa",[""]);r=l(r,function(e){return 5==e?7:e});var u={recordid:o,facetGroupid:a,facetType:r,openAccess:c};i.push(u);var p=s.getInstitutionCode(),d=s.getCurrentPCKey(),h=this.isSignedIn(),m={institutionCode:p,signedIn:h,recordsPnx:i,pcKey:d};this.configurationUtil.isSuprima()&&(m.vid=s.getVid());var g=this.$http.post(this.restBaseURLs.timesCited,m);g.then(function(e){t.addDataToDoc(e.data)})}}},e.prototype.addDataToDoc=function(e){e&&(this.citedData=e)},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return!(void 0==this.citedData||Array.isArray(this.citedData)&&!this.citedData.length);
},enumerable:!0,configurable:!0}),e.prototype.isShowTimesCitedForSuprima=function(){return this.showTimesCitedForSuprima},e.prototype.setShowTimesCitedForSuprima=function(e){this.showTimesCitedForSuprima=e},e=r([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$stateParams")),o(3,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&t||Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&n||Object])],e);var t,n}();t.TimesCitedService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(1),c=n(2),u=n(1),l=n(1),f=n(1),p=n(69),d=n(24),h=n(3),m=function(){function e(e){this.configurationUtil=e,this.searchConfig=l.getSearchConfiguration()}return e.prototype.getPreFilterByType=function(e,t,n){var r=a.getQueryTerms(),i=s.getUIComponents(),o=e.map(function(e){if(e.qtvid.includes(t)&&r[e.qtvid])return r[e.qtvid].map(function(e){return i[e]})});return o&&o.length>0?(o=d(o),n&&(o=o.filter(function(e){return h(e,"type._string")===n})),o.map(function(e){if(!e)return{};var t=p(e.displayOptions.slice()),n=e.defaultOption?e.defaultOption:t[0],r={label:e.type._string,options:p(e.options.slice()),displayOptions:t,indexField:e.indexFields[0],defaultOption:n,selection:n};return r})):[]},e.prototype.removePreFilter=function(e,t,n){var r=e.split(";"),i=r[r.length-1];return i.split(",").length>=3&&r.length>1&&("facet_pfilter"===i.split(",")[0]||"suprima"===l.getBackendSystem()&&"rtype"===i.split(",")[0])&&(t&&(r[r.length-2]=r[r.length-2]+";"+r[r.length-1]),r.pop()),r.join(n)},e.prototype.isPreFilterEnable=function(e){if(!e){var t=f.getTabs();t&&t.length>0&&(e=t[0])}if(!e)return!1;var n=this.configurationUtil.getTile("SearchTileInterface-Simple",u.getTabToTiles(e));return!!this.searchConfig[n]&&this.searchConfig[n].prefiltersenable},e.prototype.isIndexedPreFilterEnable=function(e){if(!e){var t=f.getTabs();t&&t.length>0&&(e=t[0])}if(!e)return!1;var n=this.configurationUtil.getTile("SearchTileInterface-Simple",u.getTabToTiles(e));return!!this.searchConfig[n]&&this.searchConfig[n].indexedPrefiltersenable},e.prototype.isRTypePreFilterEnable=function(e){if(!e){var t=f.getTabs();t&&t.length>0&&(e=t[0])}if(!e)return!1;var n=this.configurationUtil.getTile("SearchTileInterface-Simple",u.getTabToTiles(e));return!!this.searchConfig[n]&&this.searchConfig[n].resourcetypePrefiltersenable},e.prototype.filterEmpty=function(e){if(""!==e)return e},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object])],e);var t}();t.PreFiltersService=m},function(e,t,n){"use strict";function r(e,t){var n=void 0===t?{}:t,r=n.useClass,i=n.useValue,o=n.useFactory,a=n.deps;return b.createFromType(e,{useClass:r,useValue:i,useFactory:o,deps:a})}function i(e){var t=u.reflector.parameters(e);if(c.isBlank(t))return[];if(t.some(function(e){return c.isBlank(e)||p.ListWrapper.isEmpty(e)}))throw new Error(h.getErrorMsg(e,"you cannot have holes in constructor DI injection"));return t.map(function(e){return o(e)})}function o(e){var t=e.filter(c.isType)[0],n=e.filter(y.isInjectMetadata)[0];if(!c.isBlank(n)||!c.isBlank(t)){var r=(n||{}).token,i=void 0===r?void 0:r,o=d.resolveForwardRef(i)||t;return a(o)}}function a(e){if(c.isString(e))return e;if(m.isOpaqueToken(e))return e.desc;if(c.isType(e)){var t=u.reflector.annotations(e)[0];if(c.isBlank(t))throw new Error("\n        cannot get injectable name token from none decorated class "+c.getFuncName(e)+"\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\n      ");if(m.isPipe(t))return t.name;if(m.isDirectiveLike(t))return c.resolveDirectiveNameFromSelector(t.selector);if(m.isService(t))return t.id}}function s(e){return e.every(function(e,t,n){var r=e.length>1,i=t>0,o=t<n.length-1;if(i){var a=n[t-1],s=a.length>1;if(s&&!r)return!1}if(o){var c=n[t+1],u=c.length>1;if(!u&&u)return!1}return!0})}var c=n(13),u=n(83),l=n(444),f=n(446),p=n(40),d=n(120),h=n(264),m=n(121),g=n(121),y=n(121),v=function(){function e(e,t){var n=t.useClass,r=t.useValue,i=t.useExisting,o=t.useFactory,a=t.deps,s=t.multi;this.token=e,this.useClass=n,this.useValue=r,this.useExisting=i,this.useFactory=o,this.dependencies=a,this._multi=s}return Object.defineProperty(e.prototype,"multi",{get:function(){return c.normalizeBool(this._multi)},enumerable:!0,configurable:!0}),e}();t.Provider=v;var b=function(){function e(){}return e.createFromType=function(e,t){var n=t.useClass,r=t.useValue,o=t.useFactory,s=t.deps;if(c.isPresent(o)){var h=a(e),y=c.isArray(s)?s.map(a):[];return o.$inject=y,[h,o]}if(c.isPresent(r)){var v=a(e);return[v,r]}var b=c.isString(e)||m.isOpaqueToken(e)?d.resolveForwardRef(n):d.resolveForwardRef(e),S=c.isString(e)||m.isOpaqueToken(e)?a(e):"";if(!c.isType(b))throw new Error('\n      Provider registration: "'+c.stringify(b)+'":\n      =======================================================\n      token '+c.stringify(b)+" must be type of Type, You cannot provide none class\n      ");var _=u.reflector.annotations(b),O=_[0];if(p.ListWrapper.isEmpty(_))return[b];if(p.ListWrapper.size(_)>1){var T=_.some(function(e){return g.isComponent(e)}),E=_.some(function(e){return m.isDirectiveLike(e)||m.isService(e)||m.isPipe(e)});if(!T||E&&T)throw Error('\n        Provider registration: "'+c.stringify(b)+"\":\n        =======================================================\n        - you cannot use more than 1 class decorator,\n        - you've used "+_.map(function(e){return c.stringify(e.constructor)})+"\n        Multiple class decorators are allowed only for component class: [ @Component, @StateConfig? ]\n        ")}return b.$inject=i(b),m.isPipe(O)?l.pipeProvider.createFromType(b):m.isDirectiveLike(O)?f.directiveProvider.createFromType(b):m.isService(O)?[S||O.id,b]:void 0},e}();t.provide=r,t._dependenciesFor=i,t._extractToken=o,t.getInjectableName=a,t._areAllDirectiveInjectionsAtTail=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(35),o=n(99),a=n(163),s=n(457),c=n(458),u=n(205),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[u.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(i.Observable);t.Subject=f;var p=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=p},function(e,t,n){"use strict";function r(e){return e instanceof u||"syncErrorThrowable"in e&&e[c.rxSubscriber]}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(269),a=n(163),s=n(273),c=n(205),u=function(e){function t(t,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!t){this.destination=s.empty;break}if("object"==typeof t){if(r(t)){var o=t[c.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,n,i)}}return i(t,e),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(a.Subscription);t.Subscriber=u;var l=function(e){function t(t,n,r,i){e.call(this),this._parentSubscriber=t;var a,c=this;o.isFunction(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==s.empty&&(c=Object.create(n),o.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=a,this._error=r,this._complete=i}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t,n){var r=n(52),i=r.Symbol;e.exports=i},function(e,t,n){function r(e,t){return i(e)?e:o(e,t)?[e]:a(s(e))}var i=n(15),o=n(217),a=n(528),s=n(61);e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=n(72),o=n(53),a="[object Symbol]";e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=n(102),o=1/0;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(2),u=n(43),l=function(){function e(e,t,n,r){this.$http=e,this.$translate=t,this.configurationUtil=n,this.$stateParams=r}return e.prototype.updateAvailability=function(e,t){var n=this;void 0===t&&(t={});var r=this.calcRtaUrl(e);if(r){var i=this.calcRtaPayload(e,t);i&&(this.setRtaInProgress(e,!0),r=r.replace(/(https?:\/\/[^\/]*)/,"").replace("//","/"),this.$http.post(r,i).then(function(t){return n.onSuccess(t,e)},this.onError).finally(function(){n.setRtaInProgress(e,!1)}))}},e.prototype.calcRtaUrl=function(e){var t=e.map(function(e){if(e["@rta_link"]&&e["@rta_link"].length>0)return e["@rta_link"]}).filter(this.filterEmpty),n=".*recordInformation=";if(t.length>0&&t[0]){var r=t[0].match(n);if(null!=r){var i=r[0];return i.replace("recordInformation=","")}}return null},e.prototype.calcRtaPayload=function(e,t){var n=e.map(function(e){if(e["@rta_link"]&&e["@rta_link"].length>0&&"PC"!==e.context)return e["@rta_link"]}).filter(this.filterEmpty),r=".*recordInformation=",i="";if(n.length>0&&n[0]){var o=n[0].match(r);if(null!=o){for(var a=0;a<n.length;a++){var c=new RegExp(".*recordInformation="),u=n[a].replace(c,"");i+=u,a!==n.length-1&&(i+="|;|")}var l={records:e,recordsData:i,instCode:s.getInstitutionCode(),vid:s.getVid(),rtaOnAllInstitutions:"false",instSort:this.configurationUtil.getLocationsConfiguration().instsort,selectedScope:this.$stateParams.search_scope,lang:this.$translate.use()};return Object.assign(l,t),l}}},e.prototype.setRtaInProgress=function(e,t){e.forEach(function(e){e["@rta_link"]&&(e.rtaInProgress=t)})},e.prototype.onSuccess=function(e,t){if(200===e.status){var n=e.data;t.forEach(function(e){var r=e.pnx.control.recordid;n[r]&&n[r].delivery.availability&&n[r].delivery.holding.length>0&&(e.pnx.delivery.availability=n[r].delivery.availability,e.pnx.delivery.displayedAvailability=n[r].delivery.availability[0],e.pnx.delivery.holding=n[r].delivery.holding,e.pnx.delivery.bestlocation=n[r].delivery.bestlocation,e.pnx.delivery.physicalItemTextCodes=n[r].delivery.physicalItemTextCodes,e.pnx.delivery.feDisplayOtherLocations=n[r].delivery.feDisplayOtherLocations,e.delivery.availability=n[r].delivery.availability,e.delivery.displayedAvailability=n[r].delivery.availability[0],e.delivery.holding=n[r].delivery.holding,e.delivery.bestlocation=n[r].delivery.bestlocation,e.delivery.formatedDueDate=n[r].delivery.formatedDueDate,e.delivery.bestlocation&&(e.delivery.bestlocation.pendingRender=!0),e.delivery.physicalItemTextCodes=n[r].delivery.physicalItemTextCodes,e.delivery.feDisplayOtherLocations=n[r].delivery.feDisplayOtherLocations,(e.delivery.almaInstitutionsList||n[r].delivery.almaInstitutionsList)&&(e.delivery.almaInstitutionsList=n[r].delivery.almaInstitutionsList),1===t.length)})}return e},e.prototype.onError=function(e){return console.error("RTA request failed",e),e},e.prototype.filterEmpty=function(e){return e},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$translate")),o(3,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object,Object])],e);var t}();t.RtaService=l,t.default=[u.default.name]},function(e,t){function n(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}e.exports=n},function(e,t,n){function r(e,t){return a(o(e,t,i),e+"")}var i=n(74),o=n(312),a=n(313);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(){function e(e,t,n){this.$http=e,this.$state=t,this.restBaseURLs=n,this._scopesProgress=!1}return e.prototype.getLinkScopes=function(){var e=s.getVid(),t={params:{vid:e}},n=this.$http.get(this.restBaseURLs.browse+"/browseList",t);return n},Object.defineProperty(e.prototype,"scopesProgress",{get:function(){return this._scopesProgress},set:function(e){this._scopesProgress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchBarInput",{get:function(){return this._searchBarInput},set:function(e){this._searchBarInput=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this._selectedScope},set:function(e){this._selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.setSlectedScope=function(){if(null!=this.$state.params.browseScope)for(var e=void 0,t=0,n=this.scopes;t<n.length;t++)if(e=n[t],e.SourceCode1==this.$state.params.browseScope){this.selectedScope=e;break}},Object.defineProperty(e.prototype,"scopes",{get:function(){return this._scopes},set:function(e){this._scopes=e},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$state")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object,Object])],e)}();t.BrowseSearchBarService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(0),c=n(2),u=n(34),l=n(360),f=n(141),p=n(9),d=n(7),h=n(181),m=n(86),g=n(39),y=n(29),v=n(18),b=n(3),S=n(69),_=function(){function e(e){this.items=[],this.isHoldingExpandedData=!1,this.locationNoItems=!1,this.isExpandAll=!1,this.location=e,this.isExpandAll=!1}return e=r([s.Injectable(),i("design:paramtypes",[Object])],e)}();t.Location=_;var O=function(){function e(e,t,n,r,i,o,a){this._additionalData=a,this.itemFields=[],this.fullItemFields=[],this.fullItemValues=[],this.isExpanded=!1,this.listOfServices=[],this.item=e,this.itemFields=t,this.fullItemValues=r,this.isExpanded=i,this.listOfServices=o}return Object.defineProperty(e.prototype,"additionalData",{get:function(){return this._additionalData},enumerable:!0,configurable:!0}),e=r([s.Injectable(),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object])],e)}();t.FieldsPerItem=O;var T=function(){function e(e,t){this.allLines=[],this.baseSummaryShort=e,this.allLines=t}return e=r([s.Injectable(),i("design:paramtypes",[Object,Object])],e)}();t.SummaryShort=T;var E=function(){function e(e,t){this.key=e,this.value=t}return e=r([s.Injectable(),i("design:paramtypes",[Object,Object])],e)}(),w=function(){function e(e,t,n,r,i,o,s,c,u,l){this.configurationUtil=e,this.opacService=t,this.mappingTablesCache=n,this.locationBuilder=r,this.$translate=i,this.restBaseURLs=o,this.locationsFilterService=s,this.jwtUtilService=c,this.requestServicesService=u,this.locationService=l,this.vid=a.getVid(),this.line="",this.lineData="",this.bulkSize=0,this.filtersMode=!1,this.configurationUtil=e,this.opacService=t,this.jwtUtilService=c,this.confInit(),this.requestServicesService=u}return e.prototype.clearItemsForDisplay=function(){this.itemsForDisplay=[]},e.prototype.getLocations=function(e){this.clearItemsForDisplay();var t=this.configurationUtil.getLocationsConfiguration().instsort,n=this.configurationUtil.getLocationsConfiguration().viewinstsort,r=e.delivery.holding;r=r.filter(function(e){return!n||e.organization===a.getInstitutionCode()}),this.svcId=e.delivery.physicalServiceId;var i=this.jwtUtilService.getDecodedToken().institution,o=[];if(t){var s=[],c=[];r.forEach(function(e){e.organization===i?s.push(new _(e)):c.push(new _(e))}),o.push(s),o.push(c)}else{var u=r.map(function(e){return new _(e)});o.push(u)}return o},e.prototype.getIndexFieldExists=function(e,t){var n=-1;return e.forEach(function(e,r){t===e.key&&(n=r)}),n},e.prototype.getOrUpdateCurrentHolding=function(e,t,n,r){var i,o=this.getIndexFieldExists(e,t);return o!==-1?(r.isHoldingExpandedData=!0,e[o].value=e[o].value.concat(n[t])):i=new E(t,n[t]),i},e.prototype.getLocationSummaryHoldings=function(e,t,n){var r=[],i=[],o=0;e.map(function(e){var t=e["location-fields"],i=e["location-fields-list"],o=!1,a=[];a=i.map(function(e){if(e.includes("loc.customized")){if(o=!0,t[e]&&0===r.length)return t[e]}else if(t[e]&&(t[e]=t[e].filter(function(e){return void 0!==e&&""!==e.trim()})),t[e]&&0===r.length)return n.isHoldingExpandedData=t[e].length>1,new E(e,t[e])}).filter(function(e){if(void 0!==e)return e}),o&&(a=a.length>1?a[0].concat(a[1]):a[0]),r=r.concat(a)}),r.map(function(e,t){if(o<3&&void 0!==e&&void 0!==e.value){var r=e.value.length>1?"...":"";n.isHoldingExpandedData=n.isHoldingExpandedData?n.isHoldingExpandedData:e.value.length>1,o++,i.push(new E(e.key,e.value[0]+r))}else n.isHoldingExpandedData=!0}),n.summaryHoldings=new T(i,r)},e.prototype.getItemsList=function(e){var t=this,n=[];return e.forEach(function(e){n.push(new l.LocationItemDisplay(e,t.locationBuilder,t.vid))}),n},e.prototype.calculateRequestParams=function(e,t,n,r){var i=[],o=[],a="",s="",c="",u="",l="",f="",p="";e.map(function(e){e.map(function(e){i.some(function(t){return t.recordId===e.location.ilsApiId&&t.institution===e.location.organization})||i.push({institution:e.location.organization,recordId:e.location.ilsApiId}),o.push(e.location),a=e.location.mainLocation,s=e.location.subLocationCode,p=e.location.callNumber,f="",e.location.matchForHoldings&&e.location.matchForHoldings.length>0&&(f=e.location.matchForHoldings[0].matchOn+(e.location.matchForHoldings[1]?","+e.location.matchForHoldings[1].matchOn:"")),c=e.location.holdId,u=e.location.holKey,l=l+e.location.mainLocation+","}),l=e.length>0?l.substring(0,l.length-1):l}),this.bulkSize=0===this.bulkSize?this.locationBuilder.getShowMoreBulkSize():this.bulkSize;var d=this.getNoItems(t,r),h=b(r,"volume"),m=b(r,"year"),g=b(r,"description"),y={filters:{startPos:t,noItem:d,sublibrary:l.includes(",")?"":a,collection:l.includes(",")||"MainLocation,SecondaryLocation"!==f?"":s,callnumber:l.includes(",")||"MainLocation,CallNumber"!==f?"":p,holid:l.includes(",")?"":c,sublibs:l,ilsRecordList:i,vid:this.vid,volume:"All"!==h?h:"",year:"All"!==m?m:""},locations:o};return"suprima"===this.configurationUtil.getBackendSystem()&&(e.length>1&&(y.filters.holKey=u),y.filters.description="All"!==g?g:"",y.filters.filterCall=n),y},e.prototype.getItems=function(e,t,n,r){e=e||{},e.nextStartPos=void 0===e.nextStartPos?1:e.nextStartPos,e.isMore=void 0!==e.isMore&&e.isMore;var i=[[e]];return"suprima"===this.configurationUtil.getBackendSystem()&&(r=r||{},r.location=e.location.libraryCode,this.locationsFilterService.isFilterClicked&&(n=!0)),this.getLocationsItems(i,t,n,r)},e.prototype.getLocationsItems=function(e,t,n,r){var i=this;if(e&&e[0]&&e[0][0]&&e[0][0].items&&(e[0][0].nextStartPos===-1&&(e[0][0].isMore=!1),e[0][0].nextStartPos!==-1||n)){var o=n?1:e[0][0].nextStartPos;if(n||(t||0===e[0][0].items.length)&&!e[0][0].locationNoItems){var a=this.calculateRequestParams(e,o,n,r);this.isItemsResquestInProgress=!0;var s="";return"suprima"===this.configurationUtil.getBackendSystem()&&(this.svcId&&(s="/"+this.svcId),e[0][0].location&&e[0][0].location.organization&&(s+="?record-institution="+e[0][0].location.organization)),this.opacService.makeIlsRequest("locations",a,"POST",s).then(function(t){return"suprima"===i.configurationUtil.getBackendSystem()?i.processSuprimaLocationsResponse(e,t,o,n,r):i.processResponse(e,t,o,n,r),t},function(e){console.log("Load locations failed: ",e),i.isItemsResquestInProgress=!1})}}},e.prototype.getNoItems=function(e,t){var n=this.bulkSize;return t&&(t.volume&&"All"!==t.volume||t.year&&"All"!==t.year||t.description&&"All"!==t.description)?n:(1===e&&(n=this.locationBuilder.getLocationsConfig("Location Item content","item.brief.number_of_items",this.vid)[0].target),n=Number(n)+(1===e?Number(1):Number(0)))},e.prototype.processSuprimaLocationsResponse=function(e,t,n,r,i){var o;if(t.data&&t.data.itemInfo){if(o=t.data.itemInfo,e[0][0].services=t.data,r&&o.locations.length>1)return o.results=this.updateLocationsAfterFilter(e,o.locations),void(this.isItemsResquestInProgress=!1)}else o=t;this.processResponse(e,o,n,r,i)},e.prototype.updateLocationsAfterFilter=function(e,t){var n=(this.configurationUtil.getLocationsConfiguration().instsort,this.configurationUtil.getLocationsConfiguration().viewinstsort,[]),r=[];return t.forEach(function(t){e[0].forEach(function(e){e.location.holKey===t.holKey&&r.push(e)})}),n[0]=r,n},e.prototype.processResponse=function(e,t,n,r,i){var o,a,s,c=this;try{t.locations.map(function(t){var u,l,f=e.map(function(e){return l=e.filter(function(e){return e.location.ilsApiId===(t["ils-api-id"]?t["ils-api-id"]:"")&&e.location.libraryCode===(t["library-code"]?t["library-code"]:"")&&e.location.subLocationCode===(t["sub-location-code"]?t["sub-location-code"]:"")&&e.location.organization===(t.organization?t.organization:"")&&e.location.holdId===(t["hold-id"]?t["hold-id"]:"")&&e.location.callNumber===(t["call-number"]?t["call-number"]:"")}),"suprima"===c.configurationUtil.getBackendSystem()&&(l[0].location.availabilityStatement=t.availabilityStatement),l});if(u=f[0][0]?f[0][0]:f[1][0],o=t.items,o&&0!==o.length){var p=t.partial;u.nextStartPos=p?t["current-start-pos"]:-1;var d=c.getNoItems(n,i);u.isMore=t.items.length===d}else u.items=[],u.locationNoItems=1===n||u.locationNoItems;a=t.adaptorid,s=t.holdings;var h=c.processHoldings(o,s,a,u,r,e);h.length>0&&(u.items=r?h:u.items.concat(h),r||e.map(function(e){e.map(function(e){u.location.ilsApiId===e.location.ilsApiId&&u.location.libraryCode===e.location.libraryCode&&u.location.mainLocation===e.location.mainLocation&&u.location.subLocationCode===e.location.subLocationCode&&u.location.organization===e.location.organization&&u.location.callNumber===e.location.callNumber&&u.location.holdId===e.location.holdId&&(e.items=0===e.items.length?u.items:e.items)})}))}),e=e.map(function(e){return e.filter(function(e){return e.items.length>0})}),t.results=e,1===e.length&&console.log("in order to update currentLoc for loc items view (when filtering from loc items - it doesn't pass the loc view so should update currentLoc)"),this.isItemsResquestInProgress=!1}catch(e){return this.isItemsResquestInProgress=!1,console.log(e),null}},e.prototype.processHoldings=function(e,t,n,r,i,o){var a=this.getItemsList(e),s=e.length>0?this.processItems(a,i,o):[];return t&&t.length>0&&this.getLocationSummaryHoldings(t,n,r),s},e.prototype.processItems=function(e,t,n){var r=this.locationBuilder.getFullDisplayFields(),i=this.getItemsForDisplay(e,r,t,n);return i},e.prototype.getItemsForDisplay=function(e,t,n,r){var i=this,o=this.locationBuilder.itemsListConf;return e.map(function(e){return i.parseItemsDisplay(e,o,t,n,r)})},e.prototype.confInit=function(){this.locationBuilder.getBriefDisplayFields(this.vid)},e.prototype.parseItemsDisplay=function(e,t,n,r,i){var o=this,a="",s=[];t.map(function(t,n){var r="";t.map(function(n){if(n){var i=n.split(" ");i.map(function(n){if(n){var i=e[n.replace(/_/g,"")];a="&nbsp"===t[3]||"&nbsp;"===t[3]?" ":t[3],a=a.replace(/&nbsp;|&nbsp/g," "),i&&""!==i&&(r+=i+a)}})}}),s[n]=r.substr(0,r.lastIndexOf(a))});var c=this.getAllowedServices(e.listofservices.service);a=" ";var u=[],l=[];n.map(function(t){if(t[1]){var n=t[1].split(" ");return o.$translate(t[0]).then(function(t){o.line="",o.lineData="";for(var r=t?t+": ":"",s=0;s<n.length;s++)if(n[s]){var c=n[s].replace(/_/g,""),u=e[c];o.line+=u&&""!==u?r+u+a:"",o.lineData+=u&&""!==u?u+a:"",""!==o.line&&(r="")}o.line=o.line.substr(0,o.line.lastIndexOf(a)),o.lineData=o.lineData.substr(0,o.lineData.lastIndexOf(a)),""!==o.line&&i.map(function(t){t.map(function(t){t.items.map(function(t){e.itemid!==t.item||t.fullItemFields.some(function(e){return e===o.line})||(t.fullItemFields.push(o.line),t.fullItemValues.push(o.lineData))})})})})}});var f=this.createItemAdditionalFields(e);return new O(e.itemid,s,u,l,e.isExpanded,c,f)},e.prototype.createItemAdditionalFields=function(e){var t=["itemid","itemdescription","mainlocationname","secondarylocationname","callnumber","itemcategoryname","itemstatusname"],n={};return v(t,function(t){n[t]=e[t]}),n},e.prototype.getAllowedServices=function(e){return e.filter(function(e){if("Y"===e.allowed)return e})},e.prototype.updateServicesList=function(){var e=this;v(this.requestServicesService.services.serviceinfo,function(t,n){var r={path:t["link-to-service"],method:"GET",serviceType:t["service-type"]};e.opacService.updateService(t.type,r)})},e.prototype.clearFilters=function(e,t){this.filtersMode=!1,t&&this.locationsFilterService.setFilterDropDownOptions(e)},e.prototype.performFilter=function(e,t){this.filtersMode=!0;var n,r=y(t);return e||(e={volume:this.locationsFilterService.volumeFilter,year:this.locationsFilterService.yearFilter,description:this.locationsFilterService.descriptionFilter}),e.location?(r=this.filterLocation(e.location,r),"suprima"===this.configurationUtil.getBackendSystem()&&(n=this.filterYearAndVolume(e.volume,e.year,e.description,r))):(e.volume||e.year||e.description)&&(n=this.filterYearAndVolume(e.volume,e.year,e.description,r)),n||(n=new Promise(function(e,t){setTimeout(function(){e({results:r})},100)})),n},e.prototype.filterLocation=function(e,t){return"All"===e?t:(t[0]=g(t[0],function(t){return t.location.libraryCode===e}),t[1]&&(t[1]=g(t[1],function(t){return t.location.libraryCode===e})),t)},e.prototype.preFilterLocations=function(e,t){var n=y(t);return e&&0!==e.length?(n[0]=g(t[0],function(t){return e.indexOf(t.location.libraryCode)>-1}),t[1]&&(n[1]=g(t[1],function(t){return e.indexOf(t.location.libraryCode)>-1})),n):n},e.prototype.filterYearAndVolume=function(e,t,n,r){return this.getLocationsItems(r,!1,!0,{volume:e,year:t,description:n})},e.prototype.updateFilterDropDownOptions=function(e,t){var n=this;if(!e||!t)return{};var r=t.map(function(e){return e["library-code"]+":"+n.locationService.getLibraryName(e)}),i={years:S(e.years),volumes:S(e.volumes),descriptions:S(e.descriptions),
locations:S(r)};return i},e.prototype.getItemQueueData=function(e,t){var n={},r="";return t&&(r="?record-institution="+t),n["link-to-service"]=this.restBaseURLs.ILSServicesBaseURL+"/itemQueue/"+e+r,this.opacService.makeIlsCall(n,"","GET").then(function(e){return e})},e.prototype.getLocationsPrefilterConf=function(){return this.mappingTablesCache.findByProperties("get it prefilter locations",{target:a.getVid()}).map(function(e){return e.source1})},e=r([s.Injectable(),o(4,s.Inject("$translate")),o(5,s.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof u.OpacService&&u.OpacService)&&n||Object,"function"==typeof(w="undefined"!=typeof p.MappingTablesCache&&p.MappingTablesCache)&&w||Object,"function"==typeof(I="undefined"!=typeof l.LocationBuilder&&l.LocationBuilder)&&I||Object,Object,Object,"function"==typeof(R="undefined"!=typeof f.LocationsFilterService&&f.LocationsFilterService)&&R||Object,"function"==typeof(P="undefined"!=typeof d.JwtUtilService&&d.JwtUtilService)&&P||Object,"function"==typeof(j="undefined"!=typeof h.RequestServicesService&&h.RequestServicesService)&&j||Object,"function"==typeof(A="undefined"!=typeof m.LocationService&&m.LocationService)&&A||Object])],e);var t,n,w,I,R,P,j,A}();t.LocationsService=w,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.isFrbr=function(e){if(void 0!==e.pnx.facets){if(!e||!e.pnx.facets.frbrtype)return!1;var t="7"===e.pnx.facets.frbrtype[0]||"5"===e.pnx.facets.frbrtype[0];return t}return!1},e.prototype.isMultipleVersions=function(e){if(!e||!e.pnx.display.version)return!1;var t=e.pnx.display.version[0],n=this.isFrbr(e),r=!t||t>1;return n&&r},e.prototype.displayMultipleVersions=function(e,t){if(t.facets){var n=t.facets.map(function(e,t,n){return e.name});return this.isMultipleVersions(e)&&n.indexOf("frbrgroupid")===-1}return this.isMultipleVersions(e)},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.ResultUtil=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(30),c=n(47),u=n(1),l=(n(3),function(){function e(e,t,n){this.httpService=e,this.alertFactory=t,this.restBaseURLs=n,this._showBestOffer=!0,this._supplyTime=0,this._loanPeriod=0,this._ngrsVisibilityService={},this.resquestInProgress={},this.institutionCode=u.getInstitutionCode(),this.ngrsVisibilityResponseByMmsId={},this.ngrsRSSystemChecksUrl=n.ngrsResourceSharingServiceEnabledURL,this.initSignInLink(),this.initSignInLinkRequest(),this.initNgrsVisibilityServices()}return e.prototype.initNgrsVisibilityServices=function(){this._ngrsVisibilityService={"/ngrsRSServiceEnabledURL":{path:this.ngrsRSSystemChecksUrl,method:"GET"}}},e.prototype.isNgrsRSServiceEnabled=function(e,t){var n={recordId:e,physicalServiceId:t,"record-institution":this.institutionCode};return this.makeIlsRequest("/ngrsRSServiceEnabledURL",n)},e.prototype.makeIlsRequest=function(e,t){var n=this;if(this.isNgrs()){t||(t={});var r=this._ngrsVisibilityService[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e,t)},function(t){return n.ilsRequestFailure(t,e)}).finally(function(){n.resquestInProgress[e]=!1})}},e.prototype.isNgrs=function(){return window.appConfig["system-configuration"].ngrs_enabled},Object.defineProperty(e.prototype,"ngrsVisibilityRequestInProgress",{get:function(){return!(!this.resquestInProgress||!this.resquestInProgress["/ngrsRSServiceEnabledURL"])&&this.resquestInProgress["/ngrsRSServiceEnabledURL"]},enumerable:!0,configurable:!0}),e.prototype.ilsRequestSuccess=function(e,t){return this.ngrsVisibilityResponseByMmsId[t.recordId]=e,e},e.prototype.getResponseByRecordId=function(e){return this.ngrsVisibilityResponseByMmsId[e]},e.prototype.resetNgrsVisibilityResponse=function(){this.ngrsVisibilityResponseByMmsId={},this.resquestInProgress={}},e.prototype.ilsRequestFailure=function(e,t){return console.error(e,t),e},e.prototype.initSignInLink=function(){this._signInLink=this.alertFactory.create(s.ALERT_MSG_TYPE.REQUEST);var e='<span class="bar-text margin-right-small" translate="nui.ngrs.signin"></span><prm-authentication [is-logged-in]="ctrl.isSignedIn()" flex="none"></prm-authentication>';this._signInLink.show(e)},e.prototype.initSignInLinkRequest=function(){this._signInLinkRequest=this.alertFactory.create(s.ALERT_MSG_TYPE.REQUEST);var e='<span class="bar-text margin-right-small" translate="nui.ngrs.get.it.request.signin"></span><prm-authentication [is-logged-in]="ctrl.isSignedIn()" flex="none"></prm-authentication>';this._signInLinkRequest.show(e)},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this._signInLink},set:function(e){this._signInLink=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"signInLinkRequest",{get:function(){return this._signInLinkRequest},set:function(e){this._signInLinkRequest=e},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.HttpService&&c.HttpService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.AlertFactory&&s.AlertFactory)&&n||Object,Object])],e);var t,n}());t.NgrsService=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=arguments.length<=1||void 0===arguments[1]?"while parsing "+e.name+"'s providers":arguments[1];return function(){var r=(0,c.default)(t,n),o=r.modules,s=r.providers,u=a.bundleStore.get("modules",e)||[];a.bundleStore.set("modules",[].concat(i(o),i(u)),e);var l=a.bundleStore.get("providers",e)||[];a.bundleStore.set("providers",[].concat(i(s),i(l)),e)}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.Providers=o;var a=n(32),s=n(413),c=r(s)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(104),u=n(93),l=n(1),f=n(197),p=function(){function e(e,t,n,r,i,o,a){this.$http=e,this.restBaseURLs=t,this.configurationUtil=n,this.$translate=r,this.fullViewService=i,this.rtaService=o,this.$q=a,this.vid=l.getVid(),this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.getItemById=function(e,t,n,r,i,o,a,s,c,u){var l=this;void 0===u&&(u=!1),this._currentItem=void 0;var p,d=this.createUrl(r,e,t,n,i,o,a,s,c,u);if(this.configurationUtil.isSuprima()&&("EbscoLocal"===o||"WorldCatLocal"===o)){var h=sessionStorage.current_pnx;if(h){var m=JSON.parse(h),g=this.$q.defer();g.resolve({data:m}),p=g.promise}}return p||(p=this.$http.get(d)),p.then(function(e){f.updateZoteroPlugin();var t=e.data;return t.delivery&&(t.delivery.availability.length>1&&t.delivery.availability.reverse(),t.delivery.deliveryCategory.length>1&&t.delivery.deliveryCategory.reverse(),t.delivery.availabilityLinks&&t.delivery.availabilityLinks.length>1&&t.delivery.availabilityLinks.reverse(),t.delivery.availabilityLinksUrl&&t.delivery.availabilityLinksUrl.length>1&&t.delivery.availabilityLinksUrl.reverse(),t.delivery.serviceMode&&t.delivery.serviceMode.length>1&&t.delivery.serviceMode.reverse(),l.fullViewService.updateServices(t)),l._currentItem=t,t}),p},e.prototype.createUrl=function(e,t,n,r,i,o,a,s,c,u){"WorldCat"===e&&(e="U"),!t&&n&&(this.configurationUtil.isSuprima()?n="alma"+n:e="LC");var l=this.GET_ITEM_API_URL+"/"+e+"/"+escape(t?t:n)+"?vid="+this.vid+"&lang="+this.$translate.use();return i&&(l=l+"&search_scope="+i),o&&(l=l+"&adaptor="+o),a&&i&&(l+="&isFrbr=true"),s&&(l+="&showPnx=true"),u&&(l=l+"&searchCDI="+u),c&&(l+="&virtualBrowse=true"),"LC"===e&&r&&(l=l+"&inst="+r),l},Object.defineProperty(e.prototype,"currentItem",{get:function(){return this._currentItem},enumerable:!0,configurable:!0}),e.prototype.setGetItemInProgress=function(e){this.getItemInProgress=e},e.prototype.isGetItemInProgress=function(){return this.getItemInProgress},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(3,a.Inject("$translate")),o(6,a.Inject("$q")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof u.FullViewService&&u.FullViewService)&&n||Object,"function"==typeof(p="undefined"!=typeof c.RtaService&&c.RtaService)&&p||Object,Object])],e);var t,n,p}();t.FullViewPageService=p,t.default=[]},function(e,t,n){var r=n(82),i=n(322),o=n(106),a=n(87),s=o(function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])});e.exports=s},function(e,t,n){"use strict";function r(e){return!(!this.isNgrs()||!e||1!==e.length)&&"AlmaResourceSharing"===e[0].type}function i(){return!(!window.appConfig["system-configuration"]||!window.appConfig["system-configuration"].ngrs_enabled)}function o(e){var t=e;return t=this.isNgrs()?e.filter(function(e){return"AlmaResourceSharing"!==e.type}):e}function a(e){return s(e,"pnx.display.type[0]","b").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0});var s=(n(329),n(330),n(3));t.ngrsEnabledAndRSLinkIsOnlyService=r,t.isNgrs=i,t.filteredServices=o,t.getResourceType=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(4),u=n(1),l=function(){function e(e,t,n,r,i){this.$http=e,this.configurationUtil=n,this.$state=r,this.$stateParams=i,this.ORG_LIST_DELIMITER="───",this._isMobileDBSlider=!1,this.$http=e,this.restIlsUrl=t.orgListEsploroUrl}return e.prototype.isOrgListSearch=function(){return this.$state.current.name===c.STATE_NAMES.ORGANIZATION_LIST},e.prototype.isSearchFromOrgListCategory=function(){return!!this.isOrgListSearch()&&!!this.$stateParams.organization},e.prototype.getOrgListCategories=function(){return this.$http.get(this.restIlsUrl+"?institution="+u.getInstitutionCode())},e.prototype.setCategories=function(e){this.iscategories=e},e.prototype.isCategories=function(){return this.iscategories},e.prototype.getCategory=function(e){return e?e.dbcategories?"suprima"===this.configurationUtil.getBackendSystem()?e.dbcategories[0]?e.dbcategories[0].dbcategory:[]:e.dbcategories.dbcategory:e.dbcategory:(console.log("ERROR: Item is not defined."),null)},e.prototype.setCategory=function(e,t){e.dbcategory?e.dbcategory=t:"suprima"===this.configurationUtil.getBackendSystem()?e.dbcategories=[{dbcategory:t}]:e.dbcategories.dbcategory=t},Object.defineProperty(e.prototype,"isMobileDBSlider",{get:function(){return this._isMobileDBSlider},set:function(e){this._isMobileDBSlider=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RESEARCH_SLOT_TAB",{get:function(){return"Research"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ORGANIZATION_SEARCH_TYPE",{get:function(){return"organization"},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(3,a.Inject("$state")),o(4,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,Object,Object])],e);var t}();t.OrgListCategorizeService=l},function(e,t,n){function r(e,t,n){e=s(e),t=o(t);var r=e.length;n=void 0===n?r:i(a(n),0,r);var c=n;return n-=t.length,n>=0&&e.slice(n,c)==t}var i=n(589),o=n(133),a=n(76),s=n(61);e.exports=r},function(e,t,n){function r(){var e=arguments,t=i(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var i=n(61);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=(n(5),function(){function e(e,t){this.$http=e,this.restBaseURLs=t,this.tagsBulkSize=20}return e.prototype.getTagsFromApi=function(){var e=this,t=this.restBaseURLs.tagsBaseURL;"suprima"===s.getBackendSystem()&&(t+="?vid="+s.getVid()),this.$http.get(t).then(function(t){e.popularTags=t.data.popularTags,e.recentTags=t.data.recentTag,e.myTags=t.data.recentUserTags})},e.prototype.doTagsSearch=function(e){var t=this;this.searchInProgress=!0,this.GET_API_URL=this.restBaseURLs.tagsSearchBaseURL+e,this.$http.get(this.GET_API_URL).then(function(e){t.searchInProgress=!1,t.tagsSearchResult=e.data.tagsSearchResult})},e.prototype.getRecordTagsFromApi=function(e){var t=this;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+encodeURI(e),this.$http.get(this.GET_API_URL).then(function(e){t.allRecordNonUserTags=e.data.nonUserTags,t.recordUserTags=e.data.userTags,t.allRecordNonUserTags.length<t.tagsBulkSize?(t.showAllNonUserTags=!0,t.recordNonUserTags=t.allRecordNonUserTags):(t.showAllNonUserTags=!1,t.recordNonUserTags=t.allRecordNonUserTags.slice(0,t.tagsBulkSize))})},e.prototype.addTag=function(e,t){var n=e.pnx.control.recordid;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+encodeURI(n);var r=this.getContext(e),i={add:{tagName:t,context:r,pnx:e.pnx}};return this.$http.post(this.GET_API_URL,i)},e.prototype.removeTag=function(e,t){var n=e.pnx.control.recordid;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+encodeURI(n);var r={delete:{tagName:t}};return this.$http.post(this.GET_API_URL,r)},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],n=e.context;return void 0===n&&(n=t.startsWith("TN_")?"PC":t.startsWith("RS_")?"SP":"L"),n},e.prototype.showAllRecordNonUserTags=function(){this.showAllNonUserTags=!0,this.recordNonUserTags=this.allRecordNonUserTags},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object])],e)}());t.TagsService=c;var u=function(){function e(e){this.count=e.count,this.tagName=e.tagName}return e}();t.TagItem=u},,function(e,t,n){"use strict";function r(e){return e.__forward_ref__=r,e.toString=function(){return o.stringify(this())},e}function i(e){function t(e){return o.isFunction(e)&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===r}return t(e)?e():e}var o=n(13);t.forwardRef=r,t.resolveForwardRef=i},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&e.provide}function i(e){return new y.Provider(e.provide,e)}function o(e){return e instanceof v.OpaqueToken}function a(e){return h.isString(e.selector)&&e instanceof m.DirectiveMetadata}function s(e){return a(e)&&!u(e)}function c(e){return h.isString(e.selector)&&u(e)&&e instanceof m.ComponentMetadata}function u(e){return h.isPresent(e.template||e.templateUrl)}function l(e){return e instanceof b.InjectableMetadata}function f(e){return h.isString(e.name)&&e instanceof g.PipeMetadata}function p(e){return e instanceof b.InjectMetadata}function d(e){return e instanceof m.NgModuleMetadata}var h=n(13),m=n(84),g=n(202),y=n(97),v=n(263),b=n(70);t.isProviderLiteral=r,t.createProvider=i,t.isOpaqueToken=o,t.isDirectiveLike=a,t.isDirective=s,t.isComponent=c,t.isService=l,t.isPipe=f,t.isInjectMetadata=p,t.isNgModule=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(5),a=function(){function e(){this._classes=new Set}return e.prototype.getPrimoExploreElement=function(){if(this.primoExploreElement)return this.primoExploreElement;var e=document.querySelector("primo-explore");if(e)return this.primoExploreElement=e,this.primoExploreElement},e.prototype.dimScreen=function(e){o.isDefined(e)&&(e?this.addCSSClass("background-dark"):this.removeCSSClass("background-dark"))},e.prototype.addCSSClass=function(e){var t=this.getPrimoExploreElement();t&&t.classList.add(e)},e.prototype.removeCSSClass=function(e){var t=this.getPrimoExploreElement();t&&t.classList.remove(e)},e=r([i.Injectable()],e)}();t.PrimoExploreService=a,t.default=[]},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n){return t===t?a(e,t,n):i(e,o,n)}var i=n(279),o=n(501),a=n(502);e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(281);e.exports=r},function(e,t,n){var r=n(213),i=n(513),o=i(r);e.exports=o},function(e,t,n){var r=n(509),i=n(53),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){var r=n(52),i=n(510),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,c=s?r.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||i;e.exports=l}).call(t,n(23)(e))},function(e,t){function n(e,t){var n=typeof e;return t=null==t?r:t,!!t&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(524),i=n(209),o=n(525),a=n(280),s=n(526),c=n(72),u=n(278),l="[object Map]",f="[object Object]",p="[object Promise]",d="[object Set]",h="[object WeakMap]",m="[object DataView]",g=u(r),y=u(i),v=u(o),b=u(a),S=u(s),_=c;(r&&_(new r(new ArrayBuffer(1)))!=m||i&&_(new i)!=l||o&&_(o.resolve())!=p||a&&_(new a)!=d||s&&_(new s)!=h)&&(_=function(e){var t=c(e),n=t==f?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case g:return m;case y:return l;case v:return p;case b:return d;case S:return h}return t}),e.exports=_},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n(207),o="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return o(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var i=n(100),o=n(59),a=n(15),s=n(102),c=1/0,u=i?i.prototype:void 0,l=u?u.toString:void 0;e.exports=r},function(e,t,n){function r(e){return a(e)?i(e,!0):o(e)}var i=n(284),o=n(536),a=n(58);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function t(e,t){this.$ocLazyLoad=e,this.$q=t,this.isFullViewModuleLoaded=!1,this.fullViewDeferredObject=this.$q.defer()}return t.prototype.loadFullViewModule=function(){var t=this;return this.isFullViewModuleLoaded||n.e(3).then(function(r){(function(e){var e=n(425);e=a.bundle(e.FullViewModule),t.$ocLazyLoad.inject(e.name).then(function(){t.isFullViewModuleLoaded=!0,t.fullViewDeferredObject.resolve()})}).call(this,n(23)(e))}.bind(null,n)).catch(function(e){console.log(e)}),this.fullViewDeferredObject.promise},t=r([a.Injectable(),o(0,a.Inject("$ocLazyLoad")),o(1,a.Inject("$q")),i("design:paramtypes",[Object,Object])],t)}();t.FullViewModuleLoaderService=s},function(e,t,n){function r(e){return o(e)&&i(e)}var i=n(58),o=n(53);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(0),c=n(62),u=function(){function e(e,t,n,r){this.$mdToast=e,this.$q=t,this.$timeout=n,this.addQueryToSavedSearchesService=r,this.APP_DELAY_TIME=4500,this._silentLoginAppDelayTimer=this.$timeout(function(){},this.APP_DELAY_TIME),this.silentLoginProgressDeferedObject=this.$q.defer()}return e.prototype.ngOnInit=function(){},e.prototype.showSilentLoginToast=function(){var e=this,t="<prm-silent-login-alert-toast></prm-silent-login-alert-toast>";this.$mdToast.show({hideDelay:!1,position:"top right",template:t}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},e.prototype.silentLoginEnd=function(){this.$timeout.cancel(this.silentLoginAppDelayTimer),this.silentLoginProgressDeferedObject.resolve()},Object.defineProperty(e.prototype,"silentLoginInprogressPromise",{get:function(){return this.silentLoginProgressDeferedObject?this.silentLoginProgressDeferedObject.promise:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"silentLoginAppDelayTimer",{get:function(){return this._silentLoginAppDelayTimer},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,s.Inject("$mdToast")),o(1,s.Inject("$q")),o(2,s.Inject("$timeout")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.AddQueryToSavedSearchesService&&c.AddQueryToSavedSearchesService)&&t||Object])],e);var t}();t.SilentLoginService=u},function(e,t,n){function r(e,t){return i(e,t)}var i=n(215);e.exports=r},function(e,t,n){var r=n(59),i=n(586),o=n(106),a=n(587),s=o(function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]});e.exports=s},function(e,t,n){function r(e,t){return e&&e.length?o(e,i(t,2)):[]}var i=n(36),o=n(206);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(2),u=n(86),l=n(140),f=n(69),p=n(3),d=function(){function e(e,t,n,r){this.$http=e,this.restBaseURLs=t,this.locationService=n,this.configurationUtil=r,this.vid=s.getVid(),this._filters={},this.filterConfig=this.getFilterConfig()}return Object.defineProperty(e.prototype,"dropDownOptions",{get:function(){return this._dropDownOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedFilter",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),e.prototype.setFilterDropDownOptions=function(e,t){t&&("all_filters"===this.filterConfig&&this.getYearAndVolumeDropDownOptions(e,t),t.locations=this.getLocationDropDownOptions(e))},e.prototype.getFilterConfig=function(){if(this.configurationUtil.getLocationsConfiguration())return this.configurationUtil.getLocationsConfiguration().filtersop},e.prototype.getLocationDropDownOptions=function(e){var t=this,n=e.delivery.holding,r=this.configurationUtil.getLocationsConfiguration().viewinstsort;r&&(n=e.delivery.holding.filter(function(e){return!r||e.organization===s.getInstitutionCode()}));var i=n.map(function(e){return e.libraryCode+":"+t.locationService.getLibraryName(e)});return f(i)},e.prototype.getYearAndVolumeDropDownOptions=function(e,t){var n=this,r=e.delivery.holding.map(function(e){return{ilsApiId:e.ilsApiId,institution:e.organization}});r=l(r,function(e){return e.ilsApiId}),r=r.reduce(function(e,t){return e["ils-record-id"]+=t.ilsApiId+",",e["record-institution"]+=t.institution+",",e},{"ils-record-id":"","record-institution":""}),r["ils-record-id"]=r["ils-record-id"].slice(0,-1),r["record-institution"]=r["record-institution"].slice(0,-1),this.$http.get(this.restBaseURLs.ILSServicesBaseURL+"/filters",{params:r}).then(function(e){n.parseFiltersApiResponse(e,t)})},e.prototype.parseFiltersApiResponse=function(e,t){var n=this,r=e.data.data;r=r.map(function(e){return n.parseLocationFilters(e)}),r=r.reduce(function(e,t){return{years:e.years.concat(t.years),volumes:e.volumes.concat(t.volumes),descriptions:e.descriptions.concat(t.descriptions)}},{years:[],volumes:[],descriptions:[]}),t&&(t.years=f(r.years),t.volumes=f(r.volumes),t.descriptions=f(r.descriptions))},e.prototype.parseLocationFilters=function(e){return e?{years:p(e,"filters.years.year"),volumes:p(e,"filters.volumes.volume"),descriptions:p(e,"filters.descriptions.description")}:{years:[],volumes:[],descriptions:[]}},e.prototype.deleteFilterOptions=function(){this._dropDownOptions=void 0,this.locationFilter=void 0,this.yearFilter=void 0,this.volumeFilter=void 0,this.descriptionFilter=void 0},Object.defineProperty(e.prototype,"isFilterClicked",{get:function(){return!!(this.locationFilter&&"All"!==this.locationFilter||this.volumeFilter&&"All"!==this.volumeFilter||this.yearFilter&&"All"!==this.yearFilter||this.descriptionFilter&&"All"!==this.descriptionFilter)},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof u.LocationService&&u.LocationService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object])],e);var t,n}();t.LocationsFilterService=d,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(7),u=n(6),l=function(){function e(e,t,n,r){this.$http=e,this.jwtUtilService=t,this.primolyticsService=n,this.restBaseURLs=r,this._browseResult=[],this._searchParams=[],this._inProgress=!1}return e.prototype.resetParams=function(){this._backTerm=void 0,this._nextTerm=void 0,this._lastPnxIndex=void 0,this._numOfUsedTerm=void 0,this._browseResult=[],this._searchParams=[]},e.prototype.onCampus=function(){return"true"==this.jwtUtilService.getDecodedToken().onCampus?"true":"false"},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"===e?"false":"true"},e.prototype.getSearchJson=function(e,t,n,r,i,o,a){var c=this;void 0===e&&(e="BrowseSearch"),void 0===t&&(t=""),void 0===r&&(r=-1),void 0===i&&(i=-1),void 0===o&&(o=-1),void 0===a&&(a=!1);var u=s.getVid(),l=this.onCampus(),f=this.isSignedIn(),p=s.getInstitutionCode(),d=this.jwtUtilService.getDecodedToken().userGroup;""!=t||n.startsWith("callnumber")||(t="!");var h={params:{vid:u,onCamp:l,loggedIn:f,instCode:p,group:d,callnumberBack:r,innerPnxIndex:i,numOfUsedTerms:o,isBack:a,fn:e,searchWord:t,browseField:n}};this._inProgress=!0;var m=this.$http.get(this.restBaseURLs.browse+"/browseSearch",h);return this._searchedScope=n,m.then(function(e){c._browseResult=e.data.nexdPresentedValues,c.updateFields(e.data),c._inProgress=!1}),!0},Object.defineProperty(e.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),e.prototype.updateFields=function(e){this._backTerm=e.backTerm,this._nextTerm=e.nextTerm,this._lastPnxIndex=e.lastPnxIndex,this._numOfUsedTerm=e.numOfUsedTerm},Object.defineProperty(e.prototype,"lastPnxIndex",{get:function(){return this._lastPnxIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfUsedTerm",{get:function(){return this._numOfUsedTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextTerm",{get:function(){return this._nextTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backTerm",{get:function(){return this._backTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseResult",{get:function(){return this._browseResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchedScope",{get:function(){return this._searchedScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseSearchParams",{get:function(){return this._searchParams},enumerable:!0,configurable:!0
}),r([u.beacon({p:"search",op:"browse"}),i("design:type",Function),i("design:paramtypes",[String,String,String,Number,Number,Number,Boolean]),i("design:returntype",void 0)],e.prototype,"getSearchJson",null),e=r([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&n||Object,Object])],e);var t,n}();t.BrowseSearchService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=(n(5),n(0)),s=n(1),c=n(44),u=n(7),l=n(37),f=function(){function e(e,t,n,r,i){this.$window=e,this.loginService=t,this.sharedSessionStorage=n,this.jwtUtilService=r,this.$location=i,this.tryAgain=!1,this.urls=this.getLoginUrls(),this.url=this.urls.shift(),this._iframeSilentLoginEnabled=!1;for(var o=0;o<window.appConfig.authentication.length;o++)if(!this.$location.path().endsWith("/account")&&!this.$location.path().endsWith("/login")&&"true"===window.appConfig.authentication[o]["silent-login-enabled"]){this._iframeSilentLoginEnabled=!0;break}}return e.prototype.setTryAgain=function(e){this.tryAgain=e},e.prototype.getTryAgain=function(){return this.tryAgain},e.prototype.getUrl=function(){return this.url},e.prototype.advanceToNextUrl=function(){return this.urls.length?(this.url=this.urls.shift(),this.sharedSessionStorage.setItem("trySilentLogin","true"),this.tryAgain=!0,!0):(this.url=void 0,this.tryAgain=!1,!1)},e.prototype.getLoginUrls=function(){for(var e=s.getAuthenticationMethods(),t=[],n=0;n<e.length;n++)e[n].isSilentLoginSupported()&&(this.$location.path().endsWith("/account")||this.$location.path().endsWith("/login")||"true"!==window.appConfig.authentication[n]["silent-login-enabled"]||t.push(this.loginService.loginUrl(e[n].profileName,e[n].authenticationSystem,"",!0)));return t},e.prototype.trySilentLogin=function(){this._iframeSilentLoginEnabled=!1;var e=this.$window.location.search.indexOf("noSilentLogin=true")>-1;if(e)return!1;var t=this.jwtUtilService.getDecodedToken().user;return t&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup?(this.sharedSessionStorage.setItem("trySilentLogin","false"),!1):window.location.search.includes("performLogout=true")?(this.sharedSessionStorage.setItem("trySilentLogin","false"),!1):"false"!==this.sharedSessionStorage.getItem("trySilentLogin")&&(this.sharedSessionStorage.setItem("trySilentLogin","false"),this._iframeSilentLoginEnabled=!0,!0)},Object.defineProperty(e.prototype,"iframeSilentLoginEnabled",{get:function(){return this._iframeSilentLoginEnabled},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$window")),o(4,a.Inject("$location")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.LoginService&&c.LoginService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.SharedSessionStorage&&l.SharedSessionStorage)&&n||Object,"function"==typeof(f="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&f||Object,Object])],e);var t,n,f}();t.LoginIframeService=f},function(e,t,n){var r,i,o;!function(){"use strict";function a(e){return{restrict:"A",require:"?^^inViewContainer",link:function(t,n,r,i){var o={};r.inViewOptions&&(o=t.$eval(r.inViewOptions)),o.offset&&(o.offset=l(o.offset)),o.viewportOffset&&(o.viewportOffset=l(o.viewportOffset));var a=g({type:"initial"}).merge(m(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));i&&(a=a.merge(i.eventsSignal)),o.throttle&&(a=a.throttle(o.throttle));var s=a.map(function(e){var t;t=i?i.getViewportRect():c(),t=f(t,o.viewportOffset);var r=f(n[0].getBoundingClientRect(),o.offset),a={inView:u(r,t),event:e,element:n,elementRect:r,viewportRect:t};return o.generateParts&&a.inView&&(a.parts={},a.parts.top=r.top>=t.top,a.parts.left=r.left>=t.left,a.parts.bottom=r.bottom<=t.bottom,a.parts.right=r.right<=t.right),a}).scan({},function(e,t){return o.generateDirection&&t.inView&&e.elementRect&&(t.direction={horizontal:t.elementRect.left-e.elementRect.left,vertical:t.elementRect.top-e.elementRect.top}),t.changed=t.inView!==e.inView||!angular.equals(t.parts,e.parts)||!angular.equals(t.direction,e.direction),t}).filter(function(e){return!!e.changed&&!("initial"===e.event.type&&!e.inView)}),p=e(r.inView),d=s.subscribe(function(e){t.$applyAsync(function(){p(t,{$inview:e.inView,$inviewInfo:e})})});t.$on("$destroy",d)}}}function s(){return{restrict:"A",controller:["$element",function(e){this.element=e,this.eventsSignal=m(e,"scroll"),this.getViewportRect=function(){return e[0].getBoundingClientRect()}}]}}function c(){var e={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};if(e.height)return e;var t=document.compatMode;return"CSS1Compat"===t?(e.width=e.right=document.documentElement.clientWidth,e.height=e.bottom=document.documentElement.clientHeight):(e.width=e.right=document.body.clientWidth,e.height=e.bottom=document.body.clientHeight),e}function u(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function l(e){return angular.isArray(e)?2==e.length?e.concat(e):3==e.length?e.concat([e[1]]):e:[e,e,e,e]}function f(e,t){if(!t)return e;var n={top:p(t[0])?parseFloat(t[0])*e.height:t[0],right:p(t[1])?parseFloat(t[1])*e.width:t[1],bottom:p(t[2])?parseFloat(t[2])*e.height:t[2],left:p(t[3])?parseFloat(t[3])*e.width:t[3]};return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right,height:e.height+n.top+n.bottom,width:e.width+n.left+n.right}}function p(e){return angular.isString(e)&&e.indexOf("%")>0}function d(e){this.didSubscribeFunc=e}function h(){var e=arguments;return new d(function(t){for(var n=[],r=e.length-1;r>=0;r--)n.push(e[r].subscribe(function(){t.apply(null,arguments)}));t.$dispose=function(){for(var e=n.length-1;e>=0;e--)n[e]&&n[e]()}})}function m(e,t){return new d(function(n){var r=function(e){n(e)},i=angular.element(e);i.on(t,r),n.$dispose=function(){i.off(t,r)}})}function g(e){return new d(function(t){setTimeout(function(){t(e)})})}var y=angular.module("angular-inview",[]).directive("inView",["$parse",a]).directive("inViewContainer",s);d.prototype.subscribe=function(e){this.didSubscribeFunc(e);var t=function(){e.$dispose&&(e.$dispose(),e.$dispose=null)};return t},d.prototype.map=function(e){var t=this;return new d(function(n){n.$dispose=t.subscribe(function(t){n(e(t))})})},d.prototype.filter=function(e){var t=this;return new d(function(n){n.$dispose=t.subscribe(function(t){e(t)&&n(t)})})},d.prototype.scan=function(e,t){var n=this;return new d(function(r){var i=e;r.$dispose=n.subscribe(function(e){i=t(i,e),r(i)})})},d.prototype.merge=function(e){return h(this,e)},d.prototype.throttle=function(e){var t,n,r=this;return new d(function(i){var o=r.subscribe(function(){var r=+new Date,o=arguments;t&&r<t+e?(clearTimeout(n),n=setTimeout(function(){t=r,i.apply(null,o)},e)):(t=r,i.apply(null,o))});i.$dispose=function(){clearTimeout(n),o&&o()}})},i=[n(5)],r=y,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(20),c=n(8),u=n(19),l=function(){function e(e,t,n){this.$interval=e,this.changeLangService=t,this.mediaQueries=n}return e.prototype.easeInOutQuart=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.smoothScrollClick=function(e,t,n){var r=this;void 0===n&&(n=null);var i=0;if(null!=n){var o=this.detectMobile()?1:2,a=n[0].clientWidth+15;i=a*o}else i=120;"left"===e&&(i=-i);var s=0,c=60,u=t.scrollLeft,l=this.$interval(function(){var e=r.easeInOutQuart(s,u,i,c);s++,t.scrollLeft=e,s===c&&r.$interval.cancel(l)},2)},e.prototype.onLeftArrowClick=function(e){null!=e&&this.smoothScrollClick("left",e)},e.prototype.onRightArrowClick=function(e){null!=e&&this.smoothScrollClick("right",e)},e.prototype.isShowLeftArrow=function(e){if(null!=e)return"rtl"!==this.changeLangService.direction||u.isBrowserChrome()||u.isBrowserIE()?e.scrollLeft>0:e.scrollLeft>e.offsetWidth-e.scrollWidth},e.prototype.isShowRightArrow=function(e){if(null!=e)return this.getScrollRight(e)>0},e.prototype.getScrollRight=function(e){if(null!=e){var t=e.scrollWidth-e.scrollLeft-e.offsetWidth;return"rtl"!==this.changeLangService.direction||u.isBrowserChrome()||u.isBrowserIE()?t<15?0:t:0==e.scrollLeft?0:t}},e=r([a.Injectable(),o(0,a.Inject("$interval")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.ChangeLangService&&s.ChangeLangService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MediaQueries&&c.MediaQueries)&&n||Object])],e);var t,n}();t.ScrollService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.isMobileMenu=!1,this.isLinksMenuVisible=!1,this.isDepositDisplay=!1}return e.prototype.getMobileMenu=function(){return this.isMobileMenu},e.prototype.setMobileMenu=function(e){this.isMobileMenu=e},e.prototype.getLinksMenuVisible=function(){return this.isLinksMenuVisible},e.prototype.setLinksMenuVisible=function(e){this.isLinksMenuVisible=e},e.prototype.getDepositDisplay=function(){return this.isDepositDisplay},e.prototype.setDepositDisplay=function(e){this.isDepositDisplay=e},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.MobileMenu=a,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(3),u=n(116),l=(n(51),function(){function e(e,t,n,r,i){this.$http=e,this.restBaseURLs=t,this.$location=n,this.$state=r,this.$mdDialog=i}return e.prototype.buildRestApiInitialParams=function(e,t,n){var r=c(s.getAttributesMap(),["virtualBrowseType"],"shelf"),i={callNumber:"",callNumberBrowseField:"",institution:s.getInstitutionCode(),position:"CENTER",numOfRecords:40,type:r,offset:0};return i.callNumberBrowseField=e?e.callNumberBrowseField:e,i.callNumber=e?e.callNumber:e,i.bibCallNumberBrowseField=t?t.callNumberBrowseField:t,i.bibCallNumber=t?t.callNumber:t,i.mmsId=c(n,[0],n),i},e.prototype.callVirtualBrowseApi=function(e){return this.$http.get(this.restBaseURLs.browse,{params:e})},e.prototype.parseVirtualBrowseApiResponse=function(e){for(var t=[],n=0,r=e.browseShelfItems;n<r.length;n++){var i=r[n];t.push(new f(i))}return{virtualBrowseItems:t,nextTerm:e.nextTerm,backTerm:e.backTerm,currTerm:e.currTerm,browseField:e.browseField}},e.prototype.getStateName=function(){switch(this.$state.current.name){case"exploreMain.search":return"fulldisplay";case"exploreMain.jsearch":return"jfulldisplay";default:return this.$state.current.name}},e.prototype.navigateToItemFullView=function(e){var t=this.$location.search();"suprima"===s.getBackendSystem()&&(t.virtualBrowse="true"),"suprima"===s.getBackendSystem()&&"servicesPage"===this.$state.current.name?(t["rft.mms_id"]=e.recordId.replace("alma",""),t.rft_dat="ie=",t.ie=void 0,this.$state.go("servicesPage",t,{reload:!0})):"suprima"!==s.getBackendSystem()||"jfulldisplay"!==this.$state.current.name&&"exploreMain.jsearch"!==this.$state.current.name?(t.docid=e.recordId,this.$state.go("fulldisplay",t,{reload:!0})):(t.docid=e.recordId,this.$state.go("jfulldisplay",t,{reload:!0})),this.$mdDialog.hide()},e.prototype.getItemFullViewParams=function(e){if(e){var t=angular.copy(this.$location.search());return"suprima"===s.getBackendSystem()&&"servicesPage"===this.$state.current.name?(t["rft.mms_id"]=e.recordId.replace("alma",""),t.rft_dat="ie=",t.ie=void 0):t.docid=e.recordId,t}},e.prototype.getDisplayCallNumber=function(e,t){for(var n=e.map(function(e){return e.split("$$")}),r=n.filter(function(e){var n=e.filter(function(e){return"E"===e.charAt(0)})[0]||"";return n.substring(1)===t})[0],i=0,o=r;i<o.length;i++){var a=o[i];if("D"===a.charAt(0))return a.substring(1)}},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$location")),o(3,a.Inject("$state")),o(4,a.Inject("$mdDialog")),i("design:paramtypes",[Object,Object,Object,Object,Object])],e)}());t.VirtualBrowseService=l;var f=function(){function e(e){this.isSelectedRecord=!1,this.callNumber=e.callNumber,this.title=e.title,this.author=e.author,this.date=e.date,this.recordId=e.recordId,this.thumbnails=this.buildThumbnailsArray(e.thumbnails)}return e.prototype.buildThumbnailsArray=function(e){var t=[];if(!e||!e.url)return t;for(var n=e.url,r=0,i=n;r<i.length;r++){var o=i[r];t.push({displayLabel:"thumbnail",linkURL:o})}return t},e.prototype.getThumbnail=function(e){for(var t=0,n=e.url;t<n.length;t++){var r=n[t];if(u(r,".jpg"))return r}},e}();t.VirtualBrowseItem=f,t.default=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),i=n(247),o=n(245),a=function(e){return"string"==typeof e||e instanceof o.OpaqueToken?e.toString():r.providerStore.has("type",e)?r.providerStore.get("name",e):void 0};t.getInjectableName=a;var s=function(e){var t=a(e);return t?t:"function"==typeof e?((0,i.Injectable)(e),r.providerStore.get("name",e)):void 0};t.getInjectableNameWithJitCreation=s},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return""+e.charAt(0).toUpperCase()+e.substring(1)}function o(e){var t=e.split("-");return""+t.shift()+t.map(i).join("")}function a(e){var t=arguments.length<=1||void 0===arguments[1]?"-":arguments[1];return e.replace(l,function(e,n){return""+(n?t:"")+e.toLowerCase()})}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"-":arguments[1];return e.replace(l,function(e,n){return""+(n?t:"")+e.toLowerCase()})}function c(e){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;Array.isArray(u)?t.push.apply(t,r(c(u))):t.push(u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}function u(e,t,n){return'Processing "'+e.name+'" in "'+t.name+'": '+n}Object.defineProperty(t,"__esModule",{value:!0}),t.ucFirst=i,t.dashToCamel=o,t.dasherize=a,t.snakeCase=s,t.flatten=c,t.createConfigErrorMessage=u;var l=/[A-Z]/g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(22),u=n(28),l=function(){function e(e,t,n,r,i,o){this.$http=e,this.configurationUtil=n,this.$stateParams=r,this.databasesService=i,this.journalsService=o,this.iscategories=!0,this.isactivate=!1,this.categoriesResponse=new Array,this._isMobileDBSlider=!1,this.DELIMITER="─",this.$http=e,this.restIlsUrl=t.dbCategoriesBaseURL}return e.prototype.getCategories=function(e){return this.$http.get(this.restIlsUrl+"?type="+e)},e.prototype.setCategories=function(e){this.iscategories=e,this.isactivate=!0},e.prototype.isCategories=function(){return this.iscategories},e.prototype.isActivate=function(){return this.isactivate},e.prototype.getCategory=function(e){return e?e.dbcategories?"suprima"===this.configurationUtil.getBackendSystem()?e.dbcategories[0]?e.dbcategories[0].dbcategory:[]:e.dbcategories.dbcategory:e.dbcategory:(console.log("ERROR: Item is not defined."),null)},e.prototype.setCategory=function(e,t){e.dbcategory?e.dbcategory=t:"suprima"===this.configurationUtil.getBackendSystem()?e.dbcategories=[{dbcategory:t}]:e.dbcategories.dbcategory=t},Object.defineProperty(e.prototype,"isMobileDBSlider",{get:function(){return this._isMobileDBSlider},set:function(e){this._isMobileDBSlider=e},enumerable:!0,configurable:!0}),e.prototype.isSearchFromBarDBorJournals=function(){return!!this.DBOrJournal&&!!(this.$stateParams.query&&this.$stateParams.query.indexOf("any")>-1)},e.prototype.isSearchFromCategoryTree=function(){return!!this.DBOrJournal&&!!(this.$stateParams.query&&this.$stateParams.query.indexOf("contains,dbcategory")>-1)},e.prototype.isSearchFromLetters=function(){return!!this.DBOrJournal&&!!(this.$stateParams.databases&&this.$stateParams.databases.indexOf("letter")>-1||this.$stateParams.journals&&this.$stateParams.journals.indexOf("letter")>-1)},Object.defineProperty(e.prototype,"DBOrJournal",{get:function(){return this.databasesService.isDBSearch()||this.journalsService.isJournalSearch()},enumerable:!0,configurable:!0}),e.prototype.getTName=function(e){return this.getTNameWithDelimiter(e,this.DELIMITER)},e.prototype.getTNameWithDelimiter=function(e,t){if(!e)return"";var n=e.split(t),r=n[n.length-1];return r.split(" ").join("_")},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(3,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof u.DatabasesService&&u.DatabasesService)&&n||Object,"function"==typeof(l="undefined"!=typeof c.JournalsService&&c.JournalsService)&&l||Object])],e);var t,n,l}();t.DatabasesCategorizeService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(117),a=n(635),s=function(){function e(){}return e.prototype.isEmpty=function(e){return!e||0===e.length},e.prototype.removeSpaceEncodingFromString=function(e){return o(e,new RegExp("%20","g"),"")},e.prototype.abbreviate=function(e,t){void 0===t&&(t=26);var n={length:t,separator:/\s/};return a(e,n)},e.prototype.encode=function(e){for(var t=[],n=e.length-1;n>=0;n--)t.unshift(["&#",e[n].charCodeAt(),";"].join(""));return t.join("")},e.prototype.decode=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},e=r([i.Injectable()],e)}();t.StringUtils=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(21),u=n(54),l=n(7),f=n(94),p=n(10),d=n(331),h=n(14),m=n(62),g=n(94),y=n(17),v=n(2),b=n(55),S=n(79),_=n(16),O=(n(77),n(92)),T=(n(39),n(140)),E=(n(88),n(24)),w=n(332),I=(n(116),n(590),n(5)),R=function(){function e(e,t,n,r,i,o,a,c,u,l,f,p,d,h,m,g,y,v,b,S,_,O){this.cheetahService=e,this.$http=t,this.$location=n,this.$stateParams=r,this.restBaseURLs=i,this.$filter=o,this.$mdToast=a,this.$httpParamSerializer=c,this.$translate=u,this.$timeout=l,this.filterInstitution=f,this.addQueryToSavedSearchesService=p,this.searchFieldsService=d,this.facetService=h,this.browserStorageManagerService=m,this.savedQueriesService=g,this.searchStateService=y,this.userSessionManagerService=v,this.jwtUtilService=b,this.storageUtil=S,this.configurationUtil=_,this.newspapersService=O,this.totalItems=[],this.items=[],this.numberOfItemsToDisplay=10,this.bulkSize=10,this.allItems=!1,this.vid=s.getVid(),this.GET_URL=i.saveSearchURL,this.browserStorageManagerService.cleanOldItemsFromLocalForage()}return e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.getItems=function(){return this.items},e.prototype.getItemsFromLocalForage=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user,n=t+"_SearchHistoryQeuriesKey";this.storageUtil.$localForage.getItem(n).then(function(t){return null==t&&(t=[]),e.totalItems=t,e.items=[],e.resetItems(),t})},e.prototype.changeSearchHistorylocalForageKey=function(e){var t=this,n=this.jwtUtilService.getDecodedToken().user,r=e+"_SearchHistoryQeuriesKey",i=n+"_SearchHistoryQeuriesKey";this.storageUtil.$localForage.getItem(r).then(function(e){return null==e&&(e=[]),t.storageUtil.$localForage.setItem(i,e).then(function(e){t.getItemsFromLocalForage()})})},e.prototype.nextResults=function(){var e=Math.min(this.bulkSize,this.totalItems.length-this.numberOfItemsToDisplay);e>0?(this.numberOfItemsToDisplay+=e,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay),e<this.bulkSize&&(this.allItems=!0)):this.allItems=!0},e.prototype.hasNextResults=function(){return!this.allItems&&this.totalItems.length>this.bulkSize},e.prototype.removeSearchHistoryItem=function(e){var t=this,n=this.jwtUtilService.getDecodedToken().user,r=n+"_SearchHistoryQeuriesKey",i=this.storageUtil.$localForage.getItem(r).then(function(n){return null==n&&(n=[]),n=n.filter(function(t){return t.ID!==e}),t.storageUtil.$localForage.setItem(r,n)});return i},e.prototype.removeSearchHistorySelectedItems=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user,n=t+"_SearchHistoryQeuriesKey",r=this.getCheckedItems(),i=r.map(function(e){return e.ID}),o=this.storageUtil.$localForage.getItem(n).then(function(t){return null==t&&(t=[]),t=t.filter(function(e){return!O(i,e.ID)}),e.storageUtil.$localForage.setItem(n,t)});return o},e.prototype.getCheckedItems=function(){return this.items?this.items.filter(function(e){return e.checked}):[]},e.prototype.setItems=function(e){return this.items=e},e.prototype.setTotalItems=function(e){return this.totalItems=e},e.prototype.refreshItems=function(){this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.resetItems=function(){this.allItems=!1,this.numberOfItemsToDisplay=this.bulkSize,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.saveSearchHistoryItemToSavedSearches=function(e){var t=this,n=this.getSearchHistoryItemByItemID(e),r=this.calculatePayload([n]);return this.makeRequest("add",r,"POST","/add?vid="+s.getVid()).then(function(e){var n='<prm-add-alert-toast id="'+e.id+'" add-mode="'+!0+'" user-email="'+e.email+'"></prm-add-alert-toast>';t.$mdToast.show({hideDelay:8e3,position:"top right",template:n}).then(function(){t.addQueryToSavedSearchesService.onToastClose()})},function(e){console.log("add failed: ",e)}).then(function(e){t.savedQueriesService.getItemsFromApi()})},e.prototype.saveSelectedSearchHistoryItemsToSavedSearches=function(){var e=this,t=this.getCheckedItems(),n=this.calculatePayload(t);return this.makeRequest("add",n,"POST","/add?vid="+s.getVid()).then(function(t){e.savedQueriesService.getItemsFromApi()})},e.prototype.removeSearchHistoryItemFromSavedSearches=function(e){var t=this,n=this.getParallelSavedSearchesId(e),r=n.map(function(e){return{id:e.ID}}),i={ids:r};return this.makeRequest("remove",i,"POST","/remove?vid="+s.getVid()).then(function(e){t.savedQueriesService.getItemsFromApi()})},e.prototype.removeSelectedSearchHistoryItemFromSavedSearches=function(){for(var e=this,t=this.getCheckedItems(),n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(this.isSearchHistoryItemInSavedSearches(o))for(var a=this.getParallelSavedSearchesId(o.ID),c=0,u=a;c<u.length;c++){var l=u[c];n.push({id:l.ID})}}var f={ids:T(n,"id")};return this.makeRequest("remove",f,"POST","/remove?vid="+s.getVid()).then(function(t){e.savedQueriesService.getItemsFromApi()})},e.prototype.getParallelSavedSearchesId=function(e){var t=this,n=this.getSearchHistoryItemByItemID(e),r=this.savedQueriesService.items,i=r.filter(function(e){return t.compareSearchHistoryAndSavedQueriesItems(n,e)});return i},e.prototype.getSearchHistoryItemByItemID=function(e){var t=this.items.filter(function(t){return t.ID===e})[0];return t},e.prototype.isSearchHistoryItemInSavedSearches=function(e){var t=this,n=this.savedQueriesService.items;if(n){var r=n.filter(function(n){return t.compareSearchHistoryAndSavedQueriesItems(e,n)});return r.length>0}return!1},e.prototype.compareSearchHistoryAndSavedQueriesItems=function(e,t){var n=decodeURI(e.facet)===decodeURI(t.facet)&&decodeURI(e.pfilter)===decodeURI(t.pfilter)&&decodeURI(e.scope)===decodeURI(t.scope)&&decodeURI(e.query)===decodeURI(t.query);return n},e.prototype.multiReplace=function(e,t,n){if(t===n)return e;do e=e.replace(t,n);while(e.indexOf(t)!==-1);return e},e.prototype.makeRequest=function(e,t,n,r){var i=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="");var o={method:n,url:this.GET_URL+r,params:"GET"===n?t:null,data:"POST"===n||"PUT"===n?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(n){return i.reqFailure(n,e,t)})},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,n){throw e},e.prototype.onToastClose=function(){I.element(document.querySelector("primo-explore")).css("position","")},e.prototype.calculatePayload=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n],o="";o=i.deepLink,o=this.multiReplace(o,"+","%20");var a=i.cheetahSearchData;t.push({searchData:a,queryUrl:o})}var s={add:t};return s},e.prototype.updateSearchHistory=function(){var e=this;if(this.storageUtil.isLocalStorageAvailable){var t=this.jwtUtilService.getDecodedToken().user,n=t+"_SearchHistoryQeuriesKey",r=this.createSavedQueryItem();this.userSessionManagerService.createOrGetUserArea(t).then(function(t){e.browserStorageManagerService.area=t,e.browserStorageManagerService.addValueToKeyInLocalForage(n,r)})}},e.prototype.getFacetsList=function(){var e=void 0!=this.$stateParams.facet?this.$stateParams.facet:[],t=void 0!=this.$stateParams.mfacet?this.$stateParams.mfacet:[],n=void 0;return(e.length>0||t.length>0)&&(n=decodeURI(w(E([e,t]),";"))),n},e.prototype.createSavedQueryItem=function(){var e=(this.jwtUtilService.getDecodedToken().user,""),t="/primo-explore/";this.configurationUtil.isSuprima()&&(t="/discovery/"),e=this.$location.protocol()+"://"+location.host+t+"search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams),this.newspapersService.isNewspapersSearch()&&(e=this.$location.absUrl()),e=this.multiReplace(e,"+","%20");var n=this.searchStateService.getSearchObject(),r={};r.alert=!1;var i=new Date;r.ID=parseInt(i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString()),r.creationDate=("00"+i.getDate()).slice(-2)+"/"+("00"+(i.getMonth()+1)).slice(-2)+"/"+i.getFullYear()+" "+("00"+i.getHours()).slice(-2)+":"+("00"+i.getMinutes()).slice(-2)+":"+("00"+i.getSeconds()).slice(-2),r.deepLink=e,r.email="",r.mode=n.mode,"advanced"!==r.mode&&(r.mode="simple"),r.query=decodeURI(w(E([this.$stateParams.query]),";")),""==r.query&&(r.query=void 0),r.scope=decodeURI(n.scope),r.tab=n.tab,r.checked=!1,r.pfilter=decodeURI(w(E([this.$stateParams.pfilter]),";")),""==r.pfilter&&(r.pfilter=void 0),r.facet=this.getFacetsList(),r.cheetahSearchData=this.cheetahService.searchData;var o=new f.SavedQueryItem(r);return o},e=r([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$location")),o(3,a.Inject("$stateParams")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$filter")),o(6,a.Inject("$mdToast")),o(7,a.Inject("$httpParamSerializer")),o(8,a.Inject("$translate")),o(9,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.Cheetah&&u.Cheetah)&&t||Object,Object,Object,Object,Object,Object,Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof S.FilterInstitution&&S.FilterInstitution)&&n||Object,"function"==typeof(R="undefined"!=typeof m.AddQueryToSavedSearchesService&&m.AddQueryToSavedSearchesService)&&R||Object,"function"==typeof(P="undefined"!=typeof h.SearchFieldsService&&h.SearchFieldsService)&&P||Object,"function"==typeof(j="undefined"!=typeof b.FacetService&&b.FacetService)&&j||Object,"function"==typeof(A="undefined"!=typeof d.BrowserStorageManagerService&&d.BrowserStorageManagerService)&&A||Object,"function"==typeof(C="undefined"!=typeof g.SavedQueriesService&&g.SavedQueriesService)&&C||Object,"function"==typeof($="undefined"!=typeof c.SearchStateService&&c.SearchStateService)&&$||Object,"function"==typeof(D="undefined"!=typeof p.UserSessionManagerService&&p.UserSessionManagerService)&&D||Object,"function"==typeof(L="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&L||Object,"function"==typeof(k="undefined"!=typeof y.StorageUtil&&y.StorageUtil)&&k||Object,"function"==typeof(M="undefined"!=typeof v.ConfigurationUtil&&v.ConfigurationUtil)&&M||Object,"function"==typeof(x="undefined"!=typeof _.NewspapersService&&_.NewspapersService)&&x||Object])],e);var t,n,R,P,j,A,C,$,D,L,k,M,x}();t.SearchHistoryService=R},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){
return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(11),c=n(93),u=n(2),l=n(5),f=function(){function e(e,t,n,r){this.searchService=e,this.fullViewService=t,this.$translate=n,this.configurationUtil=r}return e.prototype.fillterPnx=function(e){return e.display.title=this.filterField(e.display.title),e.display.subject=this.filterField(e.display.subject),e.display.description=this.filterField(e.display.description),e.display.format=this.filterField(e.display.format),e.display.creator=this.filterField(e.display.creator),e.display.contributor=this.filterField(e.display.contributor),e},e.prototype.filterField=function(e){var t=this;if(l.isDefined(e))return"string"==typeof e?this.checkLang(e)?"":this.removeNotRelevantChars(e):(e=e.filter(function(e){return t.checkLang(e)}),e=e.map(function(e){return t.removeNotRelevantChars(e)}))},e.prototype.checkLang=function(e){var t=this.searchService.getResultObject().lang3||this.fullViewService.lang3,n=-3;if("suprima"===this.configurationUtil.getBackendSystem()&&(t=this.$translate.use(),n=-2),!l.isDefined(e))return!0;if(e.indexOf("$$8")==-1)return!0;if("suprima"===this.configurationUtil.getBackendSystem())for(var r=e.indexOf("$$8"),i=e.substring(r),o=i.split(","),a=0,s=o;a<s.length;a++){var c=s[a];if(c.slice(n)===t)return!0}else if(e.slice(n)==t)return!0;return!1},e.prototype.removeNotRelevantChars=function(e){var t=/\$\$8\s*(.){3}/g;return"suprima"===this.configurationUtil.getBackendSystem()&&(t=/\$\$8\s*(.){2}/g),e.replace(t,"")},e=r([a.Injectable(),o(2,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SearchService&&s.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.FullViewService&&c.FullViewService)&&n||Object,Object,"function"==typeof(f="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&f||Object])],e);var t,n,f}();t.FilterLanguage=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(624),o=function(e){function t(t){return void 0===t&&(t=2048),e.call(this,t)||this}return r(t,e),t.prototype.push=function(e){return this.size===this._maxSize&&this._elements.shift(),this._elements.push(e),!0},t}(i.Stack);t.LimitedHistoryStack=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(27),u=n(42),l=n(7),f=n(48),p=n(8),d=n(19),h=n(135),m=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f){this.$mdDialog=e,this.$rootScope=t,this.$location=n,this.$state=r,this.$timeout=i,this.$mdToast=o,this.briefResultService=a,this.templateUtil=s,this.jwtUtilService=c,this.favoritesService=u,this.mediaQueries=l,this.fullViewModuleLoaderService=f}return e.prototype.openFullViewDialog=function(e,t,n){var r,i,o=this;if(t){if(i=t.target,i&&i.hasAttribute("prm-brief-internal-button-marker")||i.classList.contains("prm-brief-internal-button-marker"))return!1;r=t.detail?t.detail.index:t.index}this.$mdToast.hide();var a={val:!d.isBrowserIE()},s={val:!1};return this.fullViewModuleLoaderService.loadFullViewModule().then(function(){var t=o.$location.url();o.$location.url(o.templateUtil.getDeepLinkPath(e)),o.favoritesService.needToChangeUrl=!1;var c=o.$mdDialog;c.show({onComplete:function(){a.val?s.val=!0:(o.$timeout(function(){return s.val=!0},0),o.$timeout(function(){return a.val=!0},1e3))},onRemoving:function(){o.handleDialogHide(t,i)},templateUrl:"components/search/fullView/full-view-dialog-template.html",locals:{focusId:r,item:e,$location:o.$location,perviousUrl:t,$state:o.$state,favoritesService:o.favoritesService,jwtUtilService:o.jwtUtilService,mediaQueries:o.mediaQueries,isfavorites:o.isfavorites,loadFullViewAdditionalServices:a,dialogOpened:s,originator:n,briefResultService:o.briefResultService},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,focusOnOpen:!1,controller:function(){function e(){c.hide()}function t(){return[this.item]}function n(){return 0}function r(){return!0}function i(){return!0}var o=this;o.handleHideDetails=e,o.currentStateResults=t,o.currentResultIndex=n,o.isFirstRecord=r,o.isLastRecordByState=i},controllerAs:"$ctrl"});var u,l;u=o.$rootScope.$on("$stateChangeStart",function(e,t,n,r,i){e.preventDefault(),u(),u=o.$rootScope.$on("$locationChangeStart",function(e){e.preventDefault(),u()}),l=o.$rootScope.$watch(function(){return o.$location.path()},function(e,t){"/fulldisplay"===t&&"/fulldisplay"!=e&&(o.$mdDialog.cancel(),l())})})}),!0},e.prototype.handleDialogHide=function(e,t){this.briefResultService.isInGetFrbrEvent||(this.$location.url(e),this.$state.current.name==s.STATE_NAMES.FAVORITES&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup&&this.favoritesService.needToChangeUrl&&(this.favoritesService.needToChangeUrl=!1,this.favoritesService.getItemsFromServer()),t&&(t.setAttribute("tabindex","-1"),t.focus(),t.setAttribute("tabindex","0")))},e=r([a.Injectable(),o(0,a.Inject("$mdDialog")),o(1,a.Inject("$rootScope")),o(2,a.Inject("$location")),o(3,a.Inject("$state")),o(4,a.Inject("$timeout")),o(5,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.BriefResultService&&c.BriefResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.TemplateUtil&&u.TemplateUtil)&&n||Object,"function"==typeof(m="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&m||Object,"function"==typeof(g="undefined"!=typeof f.FavoritesService&&f.FavoritesService)&&g||Object,"function"==typeof(y="undefined"!=typeof p.MediaQueries&&p.MediaQueries)&&y||Object,"function"==typeof(v="undefined"!=typeof h.FullViewModuleLoaderService&&h.FullViewModuleLoaderService)&&v||Object])],e);var t,n,m,g,y,v}();t.FullViewDialogService=m,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(10),u=n(11),l=n(48),f=n(142),p=n(14),d=n(258),h=n(634),m=n(138),g=n(15),y=function(){function e(e,t,n,r,i,o,a){this.userSessionManagerService=e,this.searchService=t,this.$state=n,this.favoritesService=r,this.browseSearchService=i,this.searchFieldsService=o,this.collectionGalleryService=a,this.skipLinksObject={},this.signedInOnlyLabels=["favoritesLabels"],this.withSearchResultsLabels=["facets","mainResults","favoritesLabels"],this.withSimpleSearchLabels=["advanced-search"],this.withAdvancedSearchLabels=["searchBar"],this.withSortAndSearchLabels=["searchWithinInput"],this.skipLinksObject[s.STATE_NAMES.SEARCH]=["mainMenu","searchBar","advanced-search","mainResults","facets"],this.skipLinksObject[s.STATE_NAMES.JOURNAL_SEARCH]=["mainMenu","searchBarJournal","mainResults"],this.skipLinksObject[s.STATE_NAMES.FAVORITES]=["mainMenu","searchBar","advanced-search","mainResults","favoritesLabels"],this.skipLinksObject.account=["mainMenu","accountoverview"],this.skipLinksObject[s.STATE_NAMES.CITATION_TRAILS]=["mainMenu","citationTrail","mainResults"],this.skipLinksObject[s.STATE_NAMES.CITATION_CHAPTERS]=["mainMenu","mainResults"],this.skipLinksObject[s.STATE_NAMES.CITATION_LINKER]=["mainMenu","citationLinker"],this.skipLinksObject[s.STATE_NAMES.TAGS]=["mainMenu","searchBarTags","tags"],this.skipLinksObject[s.STATE_NAMES.NEWSPAPERS]=["mainMenu","searchBar","mainResults"],this.skipLinksObject[s.STATE_NAMES.BROWSE_SEARCH]=["mainMenu","searchBarBrowse","mainResults"],this.skipLinksObject[s.STATE_NAMES.DB_SEARCH]=["mainMenu","searchBarJournal","mainResults"],this.skipLinksObject[s.STATE_NAMES.COLLECTION_DISCOVERY]=["mainMenu","searchWithinInput","mainCollResults"],this.skipLinksObject[s.STATE_NAMES.ORGANIZATION_LIST]=["mainMenu","searchBarJournal","mainResults"]}return Object.defineProperty(e.prototype,"skipLinks",{get:function(){var e=this.skipLinksObject[this.$state.current.name];return this.userSessionManagerService.isGuest()&&(e=h(e,this.signedInOnlyLabels,m)),this.hasSearchResults()||(e=h(e,this.withSearchResultsLabels,m)),e=this.getAdvancedSearch()?h(e,this.withAdvancedSearchLabels,m):h(e,this.withSimpleSearchLabels,m),this.hasSortAndSearch()&&(e=h(e,this.withSortAndSearchLabels,m)),e},enumerable:!0,configurable:!0}),e.prototype.getStateSkipLinksArray=function(){var e=["searchBar","navigation"];return this.hasSearchResults()&&e.push("mainResults","facets"),e},e.prototype.hasSearchResults=function(){var e;return e=this.$state.current.name===s.STATE_NAMES.FAVORITES?this.favoritesService.getItems():this.$state.current.name===s.STATE_NAMES.BROWSE_SEARCH?this.browseSearchService.browseResult:this.searchResults,g(e)&&e.length>0},Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),e.prototype.getAdvancedSearch=function(){return this.searchFieldsService.advancedSearch},e.prototype.hasSortAndSearch=function(){return this.collectionGalleryService.isGalleryLobby},e=r([a.Injectable(),o(2,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.UserSessionManagerService&&c.UserSessionManagerService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.SearchService&&u.SearchService)&&n||Object,Object,"function"==typeof(y="undefined"!=typeof l.FavoritesService&&l.FavoritesService)&&y||Object,"function"==typeof(v="undefined"!=typeof f.BrowseSearchService&&f.BrowseSearchService)&&v||Object,"function"==typeof(b="undefined"!=typeof p.SearchFieldsService&&p.SearchFieldsService)&&b||Object,"function"==typeof(S="undefined"!=typeof d.CollectionGalleryService&&d.CollectionGalleryService)&&S||Object])],e);var t,n,y,v,b,S}();t.SkipToService=y,t.default=[]},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(125),o=n(123),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t){function n(e){return l.test(e)}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,c="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+r+s+c+"]");e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(7),u=n(10),l=n(11),f=n(49),p=n(45),d=n(3),h=function(){function e(e,t,n,r,i,o){this.$http=e,this.restBaseURLs=t,this.jwtUtilService=n,this.userSessionManagerService=r,this.searchService=i,this.$location=o,this.vid=s.getVid(),this.relatedItems=this.restBaseURLs.relateditems}return Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),e.prototype.getRelatedItems=function(e){var t=this,n=d(e,"pnx.facets.frbrgroupid[0]");if(!(this.relatedItemsObj&&this.relatedItemsObj.results&&this.relatedItemsObj.results[n])){var r={display:e.pnx.display,search:e.pnx.search,control:e.pnx.control,facet:e.pnx.facets,addata:e.pnx.addata},i=s.getCurrentPCKey(),o=s.getInstitutionCode(),a=this.isSignedIn(),c=this.userSessionManagerService.getUserLanguage(),u=s.isCDI(),l={vid:this.vid,institutionCode:o,signedIn:a,pcKey:i,lang:c,isCDI:u,items:[r]};this.$http.post(this.relatedItems,l).then(function(e){t.relatedItemsObj=e.data})}},e.prototype.groupIDsChapters=function(e){if(this.relatedItemsObj&&this.relatedItemsObj.results[e])return this.relatedItemsObj.results[e].relatedItems["Book Chapter"].groupIds},e.prototype.multiFacetsBookChapter=function(e){var t=this.groupIDsChapters(e);if(t)return t.map(function(e){return"frbrgroupid,include,"+e+",1"})},e.prototype.groupIDsReviews=function(e){if(this.relatedItemsObj&&this.relatedItemsObj.results[e])return this.relatedItemsObj.results[e].relatedItems["Book Review"].groupIds},e.prototype.multiFacetsBookReviews=function(e){var t=this.groupIDsReviews(e);if(t)return t.map(function(e){return"frbrgroupid,include,"+e+",1"})},e.prototype.getBookChapters=function(e){return d(this.relatedItemsObj,"results["+e+'].relatedItems["Book Chapter"]')},e.prototype.getBookReviews=function(e){return d(this.relatedItemsObj,"results["+e+'].relatedItems["Book Review"]')},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.chaptersFrbrGroupId=function(e){return d(e.pnx,"facets.frbrgroupid[0]")},e.prototype.performChaptersSearch=function(e){return this.searchService.performChaptersSearch(e.mfacet)},e.prototype.updateURLSearchParams=function(e){var t=p(e);this.$location.search(t)},r([f.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"updateURLSearchParams",null),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(5,a.Inject("$location")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.UserSessionManagerService&&u.UserSessionManagerService)&&n||Object,"function"==typeof(h="undefined"!=typeof l.SearchService&&l.SearchService)&&h||Object,Object])],e);var t,n,h}();t.ChaptersAndReviewsService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this._isOrganizationTree=!0}return Object.defineProperty(e.prototype,"isOrganizationTree",{get:function(){return this._isOrganizationTree},set:function(e){this._isOrganizationTree=e},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.OrganizationOrFacetToggleService=a},function(e,t,n){"use strict";function r(e,t){function n(n){function r(e){i instanceof c.InjectableMetadata&&(i.id=i.id||u.globalKeyRegistry.get(e));var t=s.reflector.ownAnnotations(e);return t=t||[],t.push(i),s.reflector.registerAnnotations(t,e),e}var i=new e(n);return this instanceof e?i:(t&&t(r),r)}return void 0===t&&(t=null),n.prototype=Object.create(e.prototype),n}function i(e,t){function n(){function n(e,n,r){if(a.isFunction(t)&&a.isPresent(n))return t(o,e,n,r);var i=s.reflector.rawParameters(e);for(i=i||[];i.length<=r;)i.push(null);i[r]=i[r]||[];var c=i[r];return c.push(o),s.reflector.registerParameters(i,e),e}for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Object.create(e.prototype);return e.apply(o,r),this instanceof e?o:n}return void 0===t&&(t=null),n.prototype=Object.create(e.prototype),n}function o(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Object.create(e.prototype);return e.apply(r,t),this instanceof e?r:function(e,t){var n=s.reflector.ownPropMetadata(e.constructor);n=n||{},n[t]=n[t]||[],n[t].unshift(r),s.reflector.registerPropMetadata(n,e.constructor)}}return t.prototype=Object.create(e.prototype),t}var a=n(13),s=n(83),c=n(70),u=n(443);t.makeDecorator=r,t.makeParamDecorator=i,t.makePropDecorator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(13),o=n(120),a=n(70),s=function(e){function t(t,n){var r=void 0===n?{}:n,i=r.descendants,o=void 0!==i&&i,a=r.first,s=void 0!==a&&a,c=e.call(this)||this;return c._selector=t,c.descendants=o,c.first=s,c}return r(t,e),Object.defineProperty(t.prototype,"isViewQuery",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selector",{get:function(){return o.resolveForwardRef(this._selector)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVarBindingQuery",{get:function(){return i.isString(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"varBindings",{get:function(){return this.isVarBindingQuery?this.selector.split(","):[]},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"@Query("+i.stringify(this.selector)+")"},t}(a.DependencyMetadata);t.QueryMetadata=s;var c=function(e){function t(t,n){var r=(void 0===n?{}:n).descendants,i=void 0!==r&&r;return e.call(this,t,{descendants:i})||this}return r(t,e),t}(s);t.ContentChildrenMetadata=c;var u=function(e){function t(t){return e.call(this,t,{descendants:!0,first:!0})||this}return r(t,e),t}(s);t.ContentChildMetadata=u;var l=function(e){function t(t,n){var r=void 0===n?{}:n,i=r.descendants,o=void 0!==i&&i,a=r.first,s=void 0!==a&&a;return e.call(this,t,{descendants:o,first:s})||this}return r(t,e),Object.defineProperty(t.prototype,"isViewQuery",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"@ViewQuery("+i.stringify(this.selector)+")"},t}(s);t.ViewQueryMetadata=l;var f=function(e){function t(t){return e.call(this,t,{descendants:!0})||this}return r(t,e),t}(l);t.ViewChildrenMetadata=f;var p=function(e){function t(t){return e.call(this,t,{descendants:!0,first:!0})||this}return r(t,e),t}(l);t.ViewChildMetadata=p},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)},[])}var i=n(270),o=n(271),a=n(269),s=n(453),c=n(272),u=n(454),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,p=n._unsubscribe,d=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,m=f?f.length:0;l;)l.remove(this),l=++h<m&&f[h]||null;if(a.isFunction(p)){var g=s.tryCatch(p).call(this);g===c.errorObject&&(t=!0,e=e||(c.errorObject.e instanceof u.UnsubscriptionError?r(c.errorObject.e.errors):[c.errorObject.e]))}if(i.isArray(d))for(h=-1,m=d.length;++h<m;){var y=d[h];if(o.isObject(y)){var g=s.tryCatch(y.unsubscribe).call(y);if(g===c.errorObject){t=!0,e=e||[];var v=c.errorObject.e;v instanceof u.UnsubscriptionError?e=e.concat(r(v.errors)):e.push(v)}}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=n(207),o=n(499),a=n(500);r.prototype.add=r.prototype.push=o,r.prototype.has=a,e.exports=r},function(e,t,n){var r=n(85),i=r(Object,"create");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(489),o=n(490),a=n(491),s=n(492),c=n(493);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(123);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(495);e.exports=r},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){var r=n(125),i=n(282),o=Object.prototype,a=o.hasOwnProperty,s=i(function(e,t,n){a.call(e,n)?e[n].push(t):r(e,n,[t])});e.exports=s},function(e,t,n){var r=n(511),i=n(73),o=n(172),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){(function(e){var r=n(277),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,c=function(){try{var e=o&&o.require&&o.require("util").types;return e?e:s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(t,n(23)(e))},function(e,t,n){function r(e){var t=this.__data__=new i(e);this.size=t.size}var i=n(166),o=n(515),a=n(516),s=n(517),c=n(518),u=n(519);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}var i=n(101),o=n(103);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$http=e}return e.prototype.postToServlet=function(e,t){var n={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:function(e){var t=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])});return t.join("&")}};return this.$http.post(e,t,n)},e=r([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Object])],e)}();t.RestUtils=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e,t){this.$q=e,this.$translate=t}return e.prototype.handlePartiallyTranslatedLocalFacet=function(e,t){var n=this;return this.$q(function(r,i){e||i(),t?n.parsePartiallyTranslatedLocalField(e.value).then(function(t){e.tooltip=n.$translate.instant("nui.facets.remove.tooltip")+n.$translate.instant("fulldisplay."+e.name)+" "+t,r(t)}):r(n.removeTranslationTags(e.value))})},e.prototype.parsePartiallyTranslatedLocalField=function(e){var t=this;return this.$q(function(n,r){e||r();var i=e.split("$$"),o=i.shift(),a=i.filter(function(e){return"T"===e.charAt(0)}).map(function(e){return e.slice(1).trim().toLowerCase()});t.$translate(a).then(function(e){i=i.map(function(t){return"T"===t.charAt(0)?e[t.slice(1).trim().toLowerCase()]===t.slice(1).trim().toLowerCase()?t.slice(1).trim():e[t.slice(1).trim().toLowerCase()]:t.trim()}),i.unshift(o),n(i.join(" "))})})},e.prototype.removeTranslationTags=function(e){return e?e.replace(/\$\$T/g,"").replace(/ \$\$/g,"").replace(/\$\$/g,""):e},e.prototype.isPartiallyTranslated=function(e){return!!e&&e.indexOf("$$T")>-1},e=r([a.Injectable(),o(0,a.Inject("$q")),o(1,a.Inject("$translate")),i("design:paramtypes",[Object,Object])],e)}();t.PartiallyTranslatedLocalFieldsUtil=s},function(e,t,n){function r(e){return e=o(e),e&&s.test(e)?e.replace(a,i):e}var i=n(583),o=n(61),a=/[&<>"']/g,s=RegExp(a.source);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this._showSignIn=!1}return Object.defineProperty(e.prototype,"autoCompleteItems",{get:function(){return this._autoCompleteItems},set:function(e){this._autoCompleteItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this._showSignIn},enumerable:!0,configurable:!0}),e.prototype.setShowSignIn=function(e){this._showSignIn=e},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.SearchBarService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(49),c=n(22),u=n(1),l=n(16),f=(n(24),n(227),n(80)),p=function(){function e(e,t,n,r){var i=this;this.$stateParams=e,this.$location=t,this.journalsService=n,this.newspapersService=r,this.deepLinksField={query:function(e){return i.getSearchValue(e)},scope:function(e){return e},sortby:function(e){return e}},this.parameterName={query:"query",scope:"search_scope",sortby:"sortby"}}return e.prototype.getValidScope=function(e){return f(u.getScopeList(),function(t){return t["scope-id"]===e})?e:void this.$location.search("search_scope",[])},e.prototype.getSearchValue=function(e){if(!e)return"";if(Array.isArray(e))return e;for(var t=e.split(","),n=0;n<2;n++)t.shift();return t.join(",")},Object.defineProperty(e.prototype,"urlParamScope",{get:function(){if(this.newspapersService.isNewspapersSearch()&&this.newspapersService.scopes.indexOf(this.$stateParams.search_scope)!==-1)return this.$stateParams.search_scope;var e=this.getValidScope(this.$stateParams.search_scope);return e?e:this.$stateParams.tab&&u.getSearchScopesMap()[this.$stateParams.tab]?u.getSearchScopesMap()[this.$stateParams.tab][0]["scope-id"]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParamTab",{get:function(){return this.$stateParams.tab},enumerable:!0,configurable:!0}),e.prototype.removeAllFacetsFromURL=function(){this.$location.search("facet",[]),this.$location.search("pfilter",[]),this.$location.search("mode",[])},e.prototype.filterEmpty=function(e){return e},e.prototype.updateLocationBar=function(e){var t=this;if(e.mode&&"advanced"===e.mode&&e.query)this.parseArgs(e);else{var n=Object.keys(this.deepLinksField);n.forEach(function(n){n in e&&t.deepLinksField[n](e[n])&&t.$location.search(t.parameterName[n],e[n])})}},e.prototype.parseArgs=function(e){var t=e.query,n=t.split(";"),r=n.map(function(e){if(!e.match("(facet_|dr_s|dr_e).*,exact,.*,AND"))return e}).filter(this.filterEmpty),i=n.map(function(e){if(e.match("(facet_|dr_s|dr_e).*,exact,.*,AND"))return e.replace("facet_","")}).filter(this.filterEmpty);this.updateUrlForAdvanced(e,r,i)},e.prototype.updateUrlForAdvanced=function(e,t,n){this.$location.search("mode","advanced"),this.$location.search("query",t),this.$location.search("pfilter",n),e.scope&&this.$location.search("search_scope",e.scope),e.sortby&&this.$location.search("sortby",e.sortby),e.tab&&this.$location.search("tab",e.tab),e.facet&&this.$location.search("facet",e.facet)},r([s.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object,Object,Object]),i("design:returntype",void 0)],e.prototype,"updateUrlForAdvanced",null),e=r([a.Injectable(),o(0,a.Inject("$stateParams")),o(1,a.Inject("$location")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof c.JournalsService&&c.JournalsService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.NewspapersService&&l.NewspapersService)&&n||Object])],e);var t,n}();t.SearchUtil=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.TOO_MANY_CLAUSES="search.error.wildcards.toomanyclauses",t.NOT_ALL_SLICES_SEARCHED="search.error.ui.slice.down",t.ERR_BLENDED_TIMEOUT="search.error.search.blendedsearch",t.RESULTS_NOTE_EXPANDED_SEARCH_FMT_CODE="results.note.expanded_search",t.ILLEGAL_SEARCH_TERM="search.error.illegal.search.term",t.QUERY_CROSS_SYSTEM_LIMITS="search.error.query.cross.system.limits",t.QUERY_TOO_MANY_BOOLEAN="search.error.query.too.many.boolean",t.SERVER_ERROR="search.error.ui.server.error";var o=function(){function e(){}return Object.defineProperty(e.prototype,"tooManyClauses",{get:function(){return t.TOO_MANY_CLAUSES},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notAllSlicesSearched",{get:function(){return t.NOT_ALL_SLICES_SEARCHED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendedTimeout",{get:function(){return t.ERR_BLENDED_TIMEOUT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expansionUiNotice",{get:function(){return t.RESULTS_NOTE_EXPANDED_SEARCH_FMT_CODE;
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"illegalSearchTerm",{get:function(){return t.ILLEGAL_SEARCH_TERM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossSystemLimits",{get:function(){return t.QUERY_CROSS_SYSTEM_LIMITS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooManyBoolean",{get:function(){return t.QUERY_TOO_MANY_BOOLEAN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverError",{get:function(){return t.SERVER_ERROR},enumerable:!0,configurable:!0}),e=r([i.Injectable()],e)}();t.SearchErrorMessageService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(34),s=function(){function e(e){this.opacService=e}return e.prototype.updateIlsServices=function(e){this.opacService.getServices()},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.OpacService&&a.OpacService)&&t||Object])],e);var t}();t.RequestServicesService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(9),s=n(1),c=n(370),u=n(371),l=n(372),f=n(373),p=n(374),d=n(183),h=n(51),m=function(){function e(e,t,n,r,i,o,a){var s=this;this.mappingTablesCache=e,this.endNoteService=t,this.printItemService=n,this.easyBibService=r,this.refWorksService=i,this.mendeleyService=o,this.legantoService=a,this.actionsToDisplay=["E-mail","Print","Permalink","Citation","EasyBib","EndNote","RefWorks","RISPushTo","BibTeXPushTo","Mendeley","Leganto"],this._requiredActionsList=[],this._actionsToIndex={none:0},this.onToggle={Print:function(e,t){s.printItemService.printItemAction(e,t)},RefWorks:function(e,t){s.refWorksService.refworksAction(e,t)},EasyBib:function(e,t){s.easyBibService.easyBibAction(e,t)},EndNote:function(e,t){s.endNoteService.endNoteAction(e,t)},Mendeley:function(e,t){s.mendeleyService.mendeleyAction(e,t)},Leganto:function(e,t){return s.legantoService.legantoAction(e,t)}},this.setRequiredActionsList()}return e.prototype.setRequiredActionsList=function(){var e=this,t=h(this.mappingTablesCache.getTable("Actions List"),function(e){return parseInt(e.source2)},"desc"),n=t.filter(function(e){return e.target===s.getVid()});t=n.length?n:t.filter(function(e){return"default"===e.target}),t=t.map(function(e){return e.source1}),this._requiredActionsList=t.filter(function(t){return e.actionsToDisplay.indexOf(t)!==-1});for(var r=0;r<this._requiredActionsList.length;r++)this._actionsToIndex[this._requiredActionsList[r]]=r+1},Object.defineProperty(e.prototype,"requiredActionsList",{get:function(){return this._requiredActionsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsToIndex",{get:function(){return this._actionsToIndex},enumerable:!0,configurable:!0}),e.prototype.isActionEnabled=function(e){return this._requiredActionsList.indexOf(e)>-1},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MappingTablesCache&&a.MappingTablesCache)&&t||Object,"function"==typeof(n="undefined"!=typeof c.EndNoteService&&c.EndNoteService)&&n||Object,"function"==typeof(m="undefined"!=typeof u.PrintItemService&&u.PrintItemService)&&m||Object,"function"==typeof(g="undefined"!=typeof l.EasyBibService&&l.EasyBibService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.RefWorksService&&f.RefWorksService)&&y||Object,"function"==typeof(v="undefined"!=typeof p.MendeleyService&&p.MendeleyService)&&v||Object,"function"==typeof(b="undefined"!=typeof d.LegantoService&&d.LegantoService)&&b||Object])],e);var t,n,m,g,y,v,b}();t.ActionListService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(67),c=n(7),u=n(44),l=function(){function e(e,t,n,r,i){var o=this;this.pushtoService=e,this.jwtUtilService=t,this.loginService=n,this.$mdDialog=r,this.$translate=i,this.responseLists=[],this.noListsMessage="",this.$mdDialog=r,this.$translate=i,this.$translate(["fulldisplay.command.pushto.option.LegantoPushTo.alert.okButton","fulldisplay.command.pushto.option.LegantoPushTo.list","fulldisplay.command.pushto.option.LegantoPushTo.collection","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.list","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.collection","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","fulldisplay.command.pushto.option.LegantoPushTo.getLists.error","fulldisplay.command.pushto.option.LegantoPushTo.noLists","fulldisplay.command.pushto.option.LegantoPushTo.add"]).then(function(e){o.translations=e})}return e.prototype.legantoAction=function(e,t){return this.isGuest()?void(this.showTemplateType="signIn"):(this.statusMessage="",this.item=e,this.selectedIds=t,this.getListFromLeganto())},e.prototype.getListFromLeganto=function(){var e=this;this.showSpinner="show";var t=this.pushtoService.getServiceUrl([this.item],this.selectedIds,"leganto",{action:"get_lists"});return t.then(function(t){return e.successfullFetchLists(t)},function(t){return e.failedFetchLists(t)}),t},e.prototype.pushRecord=function(e,t){var n=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),i=null,o=""!==e&&""!==t?"list":"collection";return this.showSpinner="show",i="list"===o?this.pushtoService.getServiceUrl([this.item],this.selectedIds,"leganto",{action:"list",listId:e,sectionId:t}):this.pushtoService.getServiceUrl([this.item],this.selectedIds,"leganto",{action:"collection"}),i.then(function(e){return r(e,o)},function(e){return n(e)}),i},e.prototype.successfullFetchLists=function(e){this.showSpinner="",e.data.error?this.failedFetchLists(e):(this.responseLists=e.data.lists,console.log("Leganto successfully fetched"),e.data.lists.length<=0?(this.showTemplateType="noListsExist",this.noListsMessage=this.translations["fulldisplay.command.pushto.option.LegantoPushTo.noLists"],this.pushAllowed=!0):this.showTemplateType="userSelection")},e.prototype.failedFetchLists=function(e){this.showSpinner="",console.log("Leganto call failed"),(!e.data||e.data&&e.data.error)&&(console.log(e.data.error),this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.getLists.error","error")),e.setSelectedAction=!1},e.prototype.successfullPushtoAction=function(e,t){this.showSpinner="",e.data.error?this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","error"):this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded."+t)},e.prototype.failedPushtoAction=function(e){this.showSpinner="",this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","error")},e.prototype.getResponseLists=function(){return this.responseLists},e.prototype.showMessage=function(e,t){this.statusMessage=this.translations[e],t&&(this.showTemplateType="error")},e.prototype.isGuest=function(){return"GUEST"===this.jwtUtilService.getDecodedToken().userGroup},e=r([a.Injectable(),o(3,a.Inject("$mdDialog")),o(4,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PushtoService&&s.PushtoService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&n||Object,"function"==typeof(l="undefined"!=typeof u.LoginService&&u.LoginService)&&l||Object,Object,Object])],e);var t,n,l}();t.LegantoService=l},function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,o){r=[],i=function(){return n.annyang=o(n)}.apply(t,r),!(void 0!==i&&(e.exports=i))}("undefined"!=typeof window?window:void 0,function(e,t){var n,r=e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition||e.oSpeechRecognition;if(!r)return null;var i,a,s=[],c={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},u=0,l=0,f=!1,p="font-weight: bold; color: #00f;",d=!1,h=!1,m=/\s*\((.*?)\)\s*/g,g=/(\(\?:[^)]+\))\?/g,y=/(\(\?)?:\w+/g,v=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#]/g,S=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.forEach(function(e){e.callback.apply(e.context,n)})},_=function(){return i!==t},O=function(e,t){-1!==e.indexOf("%c")||t?console.log(e,t||p):console.log(e)},T=function(){_()||n.init({},!1)},E=function(e,t,n){s.push({command:e,callback:t,originalPhrase:n}),f&&O("Command successfully loaded: %c"+n,p)},w=function(e){var t;S(c.result,e);for(var n=0;n<e.length;n++){t=e[n].trim(),f&&O("Speech recognized: %c"+t,p);for(var r=0,i=s.length;r<i;r++){var o=s[r],a=o.command.exec(t);if(a){var u=a.slice(1);return f&&(O("command matched: %c"+o.originalPhrase,p),u.length&&O("with parameters",u)),o.callback.apply(this,u),void S(c.resultMatch,t,o.originalPhrase,e)}}}S(c.resultNoMatch,e)};return n={init:function(o){var p=!(1<arguments.length&&arguments[1]!==t)||arguments[1];i&&i.abort&&i.abort(),(i=new r).maxAlternatives=5,i.continuous="http:"===e.location.protocol,i.lang="en-US",i.onstart=function(){h=!0,S(c.start)},i.onsoundstart=function(){S(c.soundstart)},i.onerror=function(e){switch(S(c.error,e),e.error){case"network":S(c.errorNetwork,e);break;case"not-allowed":case"service-not-allowed":a=!1,(new Date).getTime()-u<200?S(c.errorPermissionBlocked,e):S(c.errorPermissionDenied,e)}},i.onend=function(){if(h=!1,S(c.end),a){var e=(new Date).getTime()-u;(l+=1)%10==0&&f&&O("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),e<1e3?setTimeout(function(){n.start({paused:d})},1e3-e):n.start({paused:d})}},i.onresult=function(e){if(d)return f&&O("Speech heard, but annyang is paused"),!1;for(var t=e.results[e.resultIndex],n=[],r=0;r<t.length;r++)n[r]=t[r].transcript;w(n)},p&&(s=[]),o.length&&this.addCommands(o)},start:function(e){T(),d=(e=e||{}).paused!==t&&!!e.paused,a=e.autoRestart===t||!!e.autoRestart,e.continuous!==t&&(i.continuous=!!e.continuous),u=(new Date).getTime();try{i.start()}catch(e){f&&O(e.message)}},abort:function(){a=!1,l=0,_()&&i.abort()},pause:function(){d=!0},resume:function(){n.start()},debug:function(){var e=!(0<arguments.length&&arguments[0]!==t)||arguments[0];f=!!e},setLanguage:function(e){T(),i.lang=e},addCommands:function(t){var n,r;for(var i in T(),t)if(t.hasOwnProperty(i))if("function"==typeof(n=e[t[i]]||t[i]))E((r=(r=i).replace(b,"\\$&").replace(m,"(?:$1)?").replace(y,function(e,t){return t?e:"([^\\s]+)"}).replace(v,"(.*?)").replace(g,"\\s*$1?\\s*"),new RegExp("^"+r+"$","i")),n,i);else{if(!("object"===(void 0===n?"undefined":o(n))&&n.regexp instanceof RegExp)){f&&O("Can not register command: %c"+i,p);continue}E(new RegExp(n.regexp.source,"i"),n.callback,i)}},removeCommands:function(e){e===t?s=[]:(e=Array.isArray(e)?e:[e],s=s.filter(function(t){for(var n=0;n<e.length;n++)if(e[n]===t.originalPhrase)return!1;return!0}))},addCallback:function(n,r,i){var o=e[r]||r;"function"==typeof o&&c[n]!==t&&c[n].push({callback:o,context:i||this})},removeCallback:function(e,n){var r=function(e){return e.callback!==n};for(var i in c)c.hasOwnProperty(i)&&(e!==t&&e!==i||(c[i]=n===t?[]:c[i].filter(r)))},isListening:function(){return h&&!d},getSpeechRecognizer:function(){return i},trigger:function(e){n.isListening()?(Array.isArray(e)||(e=[e]),w(e)):f&&O(h?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(380),c=n(4),u=n(11),l=n(49),f=n(45),p=function(){function e(e,t,n){this.$state=e,this.$location=t,this.searchService=n,this.CITATION_TRAILS_STATE=c.STATE_NAMES.CITATION_TRAILS,this._seeds=new s.Breadcrumbs}return Object.defineProperty(e.prototype,"seeds",{get:function(){return this._seeds},set:function(e){this._seeds=e},enumerable:!0,configurable:!0}),e.prototype.performCitationTrailsSearch=function(e){return this.searchService.performCitationTrailsSearch(e.facet)},e.prototype.updateURLSearchParams=function(e){var t=f(e);t.seedInfo=null,this.$location.search(t)},r([l.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"updateURLSearchParams",null),e=r([a.Injectable(),o(0,a.Inject("$state")),o(1,a.Inject("$location")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof u.SearchService&&u.SearchService)&&t||Object])],e);var t}();t.CitationTrailsBreadcrumbsService=p,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(742),c=n(17),u=n(429),l=u.once,f=u.clone,p={ENABLED:"cmIntegrationEnabled",STYLSHEET:"cmIntegrationStylesheetUrl"},d={NAVIGATE:"NAVIGATE",MAIN_NAVS:"MAIN_NAVS",OTHER_NAVS:"OTHER_NAVS",REQUEST_STYLESHEET:"REQUEST_STYLESHEET",LOAD_STYLESHEET:"LOAD_STYLESHEET",READY:"READY"},h=function(){function e(e,t,n,r,i){var o=this;this.$state=e,this.$translate=t,this.$window=n,this.$location=r,this.storageUtil=i,this.enabled=!1,this.menu=new Map,this.messageHandlers=(a={},a[d.NAVIGATE]=function(e){o.navItemAction(o.menu[e.code])},a[d.LOAD_STYLESHEET]=function(e){o.loadIntegrationStylesheet(e.url).then(function(){return o.communicate({name:d.READY})})},a),this.registerMainNavs=l(function(e){o.registerNav(d.MAIN_NAVS,e,e.map(function(e){return e.label}),function(e){return o.$translate.instant(e.label)})}),this.registerNavMenu=l(function(e,t,n){o.performAction=n,o.registerNav(d.OTHER_NAVS,e,e.map(function(e){return t(e)}),function(e){return o.$translate.instant(t(e))})}),this.enabled=this.checkEnabled(),this.isEnabled()&&(this.registerMessageListener(),this.loadIntegrationStylesheet());var a}return e.prototype.isEnabled=function(){return this.enabled},e.prototype.ready=function(){this.communicate({name:d.REQUEST_STYLESHEET})},e.prototype.overrideWindowOpen=function(){},e.prototype.checkEnabled=function(){var e=this.$location.search().campusm,t="undefined"!=typeof e,n="true"===e,r=n||!t&&this.storageUtil.sessionStorage.getItem(p.ENABLED);return this.storageUtil.sessionStorage.setItem(p.ENABLED,r),r},e.prototype.loadIntegrationStylesheet=function(e){return void 0===e&&(e=this.$location.search().stylesheetUrl),e?this.storageUtil.sessionStorage.setItem(p.STYLSHEET,e):e=this.storageUtil.sessionStorage.getItem(p.STYLSHEET),e?s.loadCSS(e):Promise.resolve()},e.prototype.communicate=function(e){this.isEnabled()&&this.$window.parent.postMessage(e,"*")},e.prototype.registerNav=function(e,t,n,r,i){var o=this,a=[];this.$translate(n).then(function(){t.forEach(function(e){var t=f(e);i&&(t.performAction=!0);var n=t.code||t.label;o.menu[n]=t,a.push({code:n,label:r(e),href:e.href})}),o.communicate({name:e,data:a})})},e.prototype.navItemAction=function(e){if(e)if(this.performAction&&e.performAction)this.performAction(e);else if(e.action&&e.action(),e.sref){var t=e.sref,n=t.state,r=t.params,i=t.opts;this.$state.go(n,r,i)}},e.prototype.registerMessageListener=function(){var e=this;this.$window.addEventListener("message",function(t){var n=e.messageHandlers[t.data.name];return!n||"function"!=typeof n||(t.stopImmediatePropagation(),n(t.data),!1)})},e=r([a.Injectable(),o(0,a.Inject("$state")),o(1,a.Inject("$translate")),o(2,a.Inject("$window")),o(3,a.Inject("$location")),i("design:paramtypes",[Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.StorageUtil&&c.StorageUtil)&&t||Object])],e);var t}();t.CMIntegrationService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(10),c=n(175),u=n(1),l=n(27),f=n(48),p=n(7),d=n(4),h=n(17),m=n(152),g=n(46),y=function(){function e(e,t,n,r,i,o,a,s,c,l,f){this.restUtils=e,this.userSessionManagerService=t,this.$http=n,this.searchHistoryService=r,this.jwtUtilService=i,this.briefResultService=o,this.restBaseURLs=a,this.storageUtil=s,this.favoritesService=c,this.personalizeResultsButtonService=l,this.$state=f,this.inst=u.getInstitutionCode(),this.vid=u.getVid(),this.GET_LABELS_URL=a.favoritesBaseURL,this.UPDATE_FAVORITES_URL=a.favoritesBaseURL+"/"}return e.prototype.login=function(e,t,n,r){var i=this;void 0===r&&(r="");var o={authenticationProfile:n,username:e,password:t,institution:this.inst,view:this.vid,targetUrl:r},a="/primo_library/libweb/primoExploreLogin";return"suprima"===u.getBackendSystem()&&(a="/primaws/suprimaLogin"),this.restUtils.postToServlet(a,o).then(function(e){if(e.data){var t=e.data.jwtData;return t||console.log(e.data),i.userSessionManagerService.login(t),e.data.redirectUrl}})},e.prototype.buildPayloads=function(e){for(var t,n,r=[],i=0;i<e.length;i++){t=this.getContext(e[i]),n=e[i].pnx.control.recordid[0];var o={recordId:n,context:t,pnx:e[i].pnx};r.push(o)}var a={add:{records:r}};return a},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],n=e.context;return void 0===n&&(n=t.startsWith("TN_")?"PC":t.startsWith("RS_")?"SP":"L"),n},e.prototype.getFavorites=function(){return this.$http.get(this.GET_LABELS_URL)},e.prototype.addFavorites=function(e){var t=this.buildPayloads(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.copyFavoritesRecordsThatWereSavedForGuest=function(e){var t=this;void 0!=e?this.userSessionManagerService.createOrGetUserArea(e).then(function(e){e.length>0?t.addFavorites(e).then(function(){t.getFavoritesFromServer()}):t.getFavoritesFromServer()}):this.getFavoritesFromServer()},e.prototype.changeSearchHistorylocalForageKey=function(e){this.searchHistoryService.changeSearchHistorylocalForageKey(e)},e.prototype.getFavoritesFromServer=function(){var e=this;this.getFavorites().then(function(t){var n=t.data,r=n.records.map(function(e){return e.recordId});e.userSessionManagerService.createOrGetUserArea(e.jwtUtilService.getDecodedToken().user).then(function(t){e.userSessionManagerService.area=t,r.length>0&&e.userSessionManagerService.extendUserArea(r).then(function(){e.briefResultService.buildJsonOdIdsAndPins(),e.$state.current.name===d.STATE_NAMES.FAVORITES&&e.favoritesService.getItemsFromServer()})})})},e=r([a.Injectable(),o(2,a.Inject("$http")),o(6,a.Inject("restBaseURLs")),o(10,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.RestUtils&&c.RestUtils)&&t||Object,"function"==typeof(n="undefined"!=typeof s.UserSessionManagerService&&s.UserSessionManagerService)&&n||Object,Object,"function"==typeof(y="undefined"!=typeof m.SearchHistoryService&&m.SearchHistoryService)&&y||Object,"function"==typeof(v="undefined"!=typeof p.JwtUtilService&&p.JwtUtilService)&&v||Object,"function"==typeof(b="undefined"!=typeof l.BriefResultService&&l.BriefResultService)&&b||Object,Object,"function"==typeof(S="undefined"!=typeof h.StorageUtil&&h.StorageUtil)&&S||Object,"function"==typeof(_="undefined"!=typeof f.FavoritesService&&f.FavoritesService)&&_||Object,"function"==typeof(O="undefined"!=typeof g.PersonalizeResultsButtonService&&g.PersonalizeResultsButtonService)&&O||Object,Object])],e);var t,n,y,v,b,S,_,O}();t.UsernamePasswordLoginService=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=e.selector,n=e.controllerAs,r=e.template,o=e.templateUrl,c=e.providers,p=void 0===c?[]:c,d=e.inputs,h=void 0===d?[]:d,m=e.outputs,y=void 0===m?[]:m,v=e.pipes,S=void 0===v?[]:v,O=e.directives,T=void 0===O?[]:O;return function(e){if(!t)throw new Error('Component Decorator Error in "'+e.name+'": Component selector must be provided');var c=(0,u.default)(t),d=c.name,m=c.type;l.providerStore.set("name",d,e),l.providerStore.set("type",_,e),l.bundleStore.set("selector",t,e),f.Providers.apply(void 0,i(p))(e,"while analyzing Component '"+e.name+"' providers"),l.componentStore.set("restrict",m,e),l.componentStore.set("scope",{},e),l.componentStore.set("transclude",!0,e),l.componentStore.set("bindToController",!0,e),[["inputs",h],["providers",p],["directives",T],["outputs",y]].forEach(function(t){var n=s(t,2),r=n[0],i=n[1];if(void 0!==i&&!Array.isArray(i))throw new TypeError('Component Decorator Error in "'+e.name+'": Component '+r+" must be an array")}),(0,g.writeMapMulti)(e,h,"inputMap");var v=(0,g.writeMapMulti)(e,y,"outputMap");Object.keys(v).forEach(function(e){return b.default.add(e)}),"$auto"===n?l.componentStore.set("controllerAs",d,e):n?l.componentStore.set("controllerAs",n,e):l.componentStore.set("controllerAs","ctrl",e),e.link&&l.componentStore.set("link",e.link,e),e.compile&&l.componentStore.set("compile",e.compile,e),a({selector:t,template:r,templateUrl:o,pipes:S,directives:T})(e)}}function a(e){var t=e.selector,n=e.template,r=e.templateUrl,o=e.pipes,a=void 0===o?[]:o,s=e.directives,c=void 0===s?[]:s;return function(e){if(r)l.componentStore.set("templateUrl",r,e);else{if(!n)throw new Error("@Component config must include either a template or a template url for component with selector "+t+" on "+e.name);l.componentStore.set("template",n,e)}f.Providers.apply(void 0,i(c))(e,"while analyzing Component '"+e.name+"' directives"),f.Providers.apply(void 0,i(a))(e,"while analyzing Component '"+e.name+"' pipes")}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.Component=o,t.View=a;var c=n(248),u=r(c),l=n(32),f=n(111),p=n(91),d=r(p),h=n(414),m=r(h),g=n(417),y=n(415),v=n(189),b=r(v),S=n(149),_="component",O={_after:[],_extendDDO:[],_beforeCtrlInvoke:[],_afterCtrlInvoke:[],after:function(e){this._after.push(e)},extendDDO:function(e){this._extendDDO.push(e)},beforeCtrlInvoke:function(e){this._beforeCtrlInvoke.push(e)},afterCtrlInvoke:function(e){this._afterCtrlInvoke.push(e)}};t.componentHooks=O,d.default.addProvider(_,function(e,t,n,r){function i(t,r,i,a,s){var c={$scope:t,$element:r,$attrs:i,$transclude:a};return(0,m.default)(this,n,e,o,s,c)}var o={};l.componentStore.forEach(function(e,t){return o[t]=e},e);var a=angular.version.minor>=4?"bindToController":"scope";if(o[a]=(0,y.inputsMap)(o.inputMap),"E"!==o.restrict)throw new Error((0,S.createConfigErrorMessage)(e,r,"@Component selectors can only be elements. Perhaps you meant to use @Directive?"));i.$inject=["$scope","$element","$attrs","$transclude","$injector"],o.controller=i,"function"==typeof e.prototype.ngAfterViewInit&&(o.link=function(){return o.ngAfterViewInitBound()}),o.template&&o.template.replace&&(o.template=o.template.replace(/ng-content/g,"ng-transclude")),O._extendDDO.forEach(function(i){return i(o,e,t,n,r)}),r.directive(t,function(){return o}),O._after.forEach(function(i){return i(e,t,n,r)})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=[];return m.forEach(function(t){var n="[("+(0,p.dasherize)(t)+")]",r=function(){function e(r,o,a,s){var c=this;i(this,e),this.$element=o,this.$scope=s;var u=(0,f.default)(n),l=u.name;this.expression=r(a[l]),o.on(t,function(e){return c.eventHandler(e)}),s.$on("$destroy",function(){return c.onDestroy()})}return s(e,[{key:"eventHandler",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.detail;!t&&e.originalEvent&&e.originalEvent.detail?t=e.originalEvent.detail:t||(t={}),this.expression(this.$scope,Object.assign(t,{$event:e})),this.$scope.$applyAsync()}},{key:"onDestroy",value:function(){this.$element.off(t)}}]),e}();r=d([(0,c.Directive)({selector:n}),(0,u.Inject)("$parse","$element","$attrs","$scope"),h("design:paramtypes",[Function,Object,Object,Object])],r),e.push(r)}),e}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return m.add(e)})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(418),u=n(246),l=n(248),f=r(l),p=n(149),d=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=new Set(["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","keydown","keyup","keypress","submit","focus","blur","copy","cut","paste","change","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","error","input","load","wheel","scroll"]);t.default={resolve:o,add:a},e.exports=t.default},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(364),u=n(22),l=n(28),f=n(27),p=n(9),d=n(16),h=n(1),m=n(176),g=n(15),y=(n(305),n(18),n(29)),v=n(3);t.DO_NOT_HIGHLIGHT_FIELD="DoNotHighlightField";var b=function(){function e(e,t,n,r,i,o,a,s,c,u){this.configurationUtil=e,this.arrayUtils=t,this.$translate=n,this.journalsService=r,this.briefResultService=i,this.mtCache=o,this.databasesService=a,this.newspapersService=s,this.$q=c,this.partiallyTranslatedLocalFieldsUtil=u,this.configurationUtil=e,this.arrayUtils=t;this.configurationUtil.isSuprima();this.hlTable=this.mtCache.getTable(this.mtCache.tables.HYPERTEXT_LINKING_DEFINITIONS),this.fcdTable=this.mtCache.getTable(this.mtCache.tables.FIELD_CHAINS_DISPLAY);var l=["vertitle","creator","contributor","subject","lds","identifier","relation","source"];this.fieldsDetails={vertitle:{isLinkable:!0,getKey:function(){return"vertitle"}},creator:{isLinkable:!0,getKey:function(e){return e},splitValue:";"},contributor:{isLinkable:!0,getKey:function(){return"creator"},splitValue:";"},subject:{isLinkable:!0,getKey:function(e){return"sub"},splitValue:";"},lds:{isLinkable:"Y"===e.getSystemConfiguration("Use local fields 30-39 as lateral links"),getKey:function(e){return e.replace("lds","lsr")}},identifier:{complexType:"id",splitValue:";"},relation:{complexType:"relatedTitle"},source:{isCollapsible:function(e){var t=!1;return e.forEach(function(e){if(e.match(/ProQuest LLC All rights reserved/i))return void(t=!0)}),t}}},this.basicFieldsDetails=y(this.fieldsDetails),this.fieldsDetails=this.getFieldDetails(this.fieldsDetails,l)}return Object.defineProperty(e.prototype,"doNotHighlightField",{get:function(){return t.DO_NOT_HIGHLIGHT_FIELD},enumerable:!0,configurable:!0}),e.prototype.getTextFromVal=function(e){if(e.includes("$$Q")){var t=e.split("$$Q")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}if(e.includes("$$Z")){var t=e.split("$$Z")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}return e.includes("$$V")?this.getSubfieldFromVal(e,"$$V"):e.includes("$$R")?e.split("$$R")[0]:this.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(e)?this.partiallyTranslatedLocalFieldsUtil.removeTranslationTags(e):e},e.prototype.getSubfieldFromVal=function(e,t){if(this.isSubfieldExist(e,t)){var n=e.split(t)[1];return n.indexOf("$$")!==-1&&(n=n.substring(0,n.indexOf("$$"))),n}return e},e.prototype.createLegantoLink=function(e,t){var n=this.getSubfieldFromVal(t,"$$R").trim(),r="."+this.getSubfieldFromVal(t,"$$N").trim();n=n.split("$$M")[0].trim();var i;n.lastIndexOf(r)>=0&&(i=n.substring(n.lastIndexOf(r),n.length)),i===r&&(n=n.substring(0,n.lastIndexOf(r)));var o=h.getLegantoTemplateUrl();if(o){var a=o.replace("<course_code>",encodeURIComponent(n));return a}var s=v(e,"delivery.link");if(s){var c=s.filter(function(e){return"leganto_url"===e.displayLabel&&e.hyperlinkText&&e.hyperlinkText.trim()===n});return c&&c.length>0?c[0].linkURL:void 0;
}},e.prototype.getDisplayedCourseCode=function(e){var t=this.getSubfieldFromVal(e,"$$M").trim();return t&&t!==e?t:e.split("$$R")[0].trim()},e.prototype.isSubfieldExist=function(e,t){return e.includes(t)},e.prototype.getFieldDetails=function(e,t){var n={},r={};return this.fcdTable.forEach(function(e){r[e.target]=e}),this.hlTable.forEach(function(e,t){var i=e.target,o=e.source3?e.source3:"ANY",a={};a="includes"!==e.target&&"relatedwork"!==e.target?{isLinkable:!0,context:o,getKey:function(t){return e.source1},splitValue:";",operator:e.source2}:{isLinkable:!0,context:o,getKey:function(t){return e.source1},operator:e.source2};var s="";"identifier"===i&&(s="id"),"relation"===i&&(s="relatedTitle"),""!==s&&(a={isLinkable:!0,context:o,getKey:function(t){return e.source1},operator:e.source2,complexType:s}),a.facetField=e.source4;var c=v(r,i);c&&c.source1&&(a.chainDelimiter=c.source1),n[i]=a}),t.forEach(function(t){n[t]||(n[t]=e[t])}),n},e.prototype.filterEmpty=function(e){return e.label},e.prototype.parseItem=function(e,t,n){var r=this,i=this.configurationUtil.getFullViewConfiguration().delimiter+" ",o=t.items.split(","),a=[],s=t.useTranslations,c=o[0],u=!1;return n&&!t.displayInViewer?{label:null,values:null,isCollapsible:null,showMore:null}:(o.forEach(function(t){var n={delimiter:"",key:null,keyt:t,isLinkable:!1,values:[],operator:"",facetField:"",isFacetExact:!1,chainDelimiter:null},o="source"===t?e.pnx.display[t]:angular.copy(e.pnx.display[t]);if(o){var l=r.getFieldConfig(t);if(l){var f=e.pnx.control.recordid[0],p=e.context,d=!1;("PC"===p||f&&f.startsWith("TN_"))&&(d=!0);var m=r.isLdsField(t)?"lds":t;d||(r.configurationUtil.isSuprima()?r.checkMoreThanOneOccurance(o,["$$Q","$$R","$$V","$$Z"])||delete l.splitValue:r.basicFieldsDetails[m]&&(l.splitValue=r.basicFieldsDetails[m].splitValue)),l.getKey&&(n.key=l.getKey(t)),n.facetField=l.facetField,l.operator?"facet exact"!==l.operator?n.operator=l.operator:(n.operator="exact",n.isFacetExact=!0):n.operator="exact";var y="ANY"===l.context||e.context===l.context;n.isLinkable=l.isLinkable&&y,(r.journalsService.isJournalSearch()||r.databasesService.isDBSearch()||r.newspapersService.isNewspapersSearch()||r.newspapersService.isNewspaperItem(e))&&(n.isLinkable=!1),r.getFieldConfig(c)&&r.getFieldConfig(c).noLabel&&(c=""),l.chainDelimiter&&!d?n.chainDelimiter=l.chainDelimiter:l.splitValue&&(o=r.arrayUtils.flattenDeep(o.map(function(e,t,n){return e.split(l.splitValue)}))),l.complexType&&(o=o.map(function(e,t,n){return e[l.complexType]||e})),l.isCollapsible&&(u=l.isCollapsible(o))}if("source"===t)o=o.filter(function(e){return e.length>0}),o=o.map(function(e){return r.briefResultService.remove$$OValues(e)}),o=o.map(function(e){return r.parseSourceCodes(e)}),o.forEach(function(e,t){var n="";n=e.replace("fulldisplay.datasource.",""),o[t]=/\s|\./.test(n)?n:r.$translate.instant(e)});else if("language"===t)o=o.slice(),o[0].split(";").map(function(e,t){o[t]=r.$translate.instant("lang."+e.trim())});else if("crsinfo"===t){var b=void 0,S=r.configurationUtil.getFullViewConfiguration();S&&(b=S.enablelegantolink);var _=v(e,"pnx.display.crsinfo[0]");(b&&_&&_.indexOf("$$R")>-1||h.getLegantoTemplateUrl())&&(n.isLinkable=!0)}else"type"===t&&(s||o.forEach(function(e,t){o[t]=r.$translate.instant("mediatype."+e)}));g(o)?n.values=o:n.values=[o],n.values.forEach(function(e,i,o){s&&(t.startsWith("lds")&&r.partiallyTranslatedLocalFieldsUtil.isPartiallyTranslated(e)?r.partiallyTranslatedLocalFieldsUtil.parsePartiallyTranslatedLocalField(e).then(function(e){n.values[i]=e}):t.startsWith("lds")?r.$translate(e.toLowerCase(),[],"",e).then(function(e){n.values[i]=e}):r.$translate(e.toLowerCase(),[],"","").then(function(e){n.values[i]=e})),r.parseValue(e).then(function(t){t!=e&&(n.values[i]=t)})}),n.delimiter=i,a.push(n)}},this),0===a.length?{label:null,values:null,isCollapsible:null,showMore:null}:{label:c,values:a,isCollapsible:u,showMore:!0})},e.prototype.parseValue=function(e){var t=this;return this.$q(function(n,r){if(!e)return void r();var i=e.split("$$");if(i.length>1){var o=i.shift(),a=i.filter(function(e){return"C"===e.charAt(0)}).map(function(e){return"fulldisplay.constants."+e.slice(1).trim()});t.$translate(a).then(function(e){i=i.map(function(t){switch(t.charAt(0)){case"C":return"$$C"+e["fulldisplay.constants."+t.slice(1).trim()];case"V":return"$$V"+t.slice(1);default:return"$$"+t}}),i.unshift(o),n(i.join(" "))})}else n(i.join(" "))})},e.prototype.parseSourceCodes=function(e){return e=e.replace("$$V",""),e="fulldisplay.datasource."+e},e.prototype.parseDetails=function(e){var t=this;return this.configurationUtil.getFullViewConfiguration().resultitemview.map(function(n){return t.parseItem(e,n)}).filter(this.filterEmpty)},e.prototype.parseValueFromComplexType=function(e,t){return t[e]},e.prototype.getFieldConfig=function(e){var t=y(this.fieldsDetails)[e];return!t&&this.isLdsField(e)&&(t=this.fieldsDetails.lds),t},e.prototype.isLdsField=function(e){var t=e.indexOf("lds"),n=e.substring(t+3);return 0===t&&n>29&&n<40},e.prototype.checkMoreThanOneOccurance=function(e,t){for(var n=0,r=e;n<r.length;n++)for(var i=r[n],o=0,a=t;o<a.length;o++){var s=a[o];if(i.split(s).length-1>1)return!0}return!1},e=r([a.Injectable(),o(2,a.Inject("$translate")),o(8,a.Inject("$q")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&n||Object,"function"==typeof(b="undefined"!=typeof c.ArrayUtils&&c.ArrayUtils)&&b||Object,Object,"function"==typeof(S="undefined"!=typeof u.JournalsService&&u.JournalsService)&&S||Object,"function"==typeof(_="undefined"!=typeof f.BriefResultService&&f.BriefResultService)&&_||Object,"function"==typeof(O="undefined"!=typeof p.MappingTablesCache&&p.MappingTablesCache)&&O||Object,"function"==typeof(T="undefined"!=typeof l.DatabasesService&&l.DatabasesService)&&T||Object,"function"==typeof(E="undefined"!=typeof d.NewspapersService&&d.NewspapersService)&&E||Object,Object,"function"==typeof(w="undefined"!=typeof m.PartiallyTranslatedLocalFieldsUtil&&m.PartiallyTranslatedLocalFieldsUtil)&&w||Object])],e);var n,b,S,_,O,T,E,w}();t.ServiceDetailsService=b},function(e,t){function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}e.exports=n},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=n(3),l=function(){function e(e,t,n){this.$http=e,this.configurationUtil=t,this.$translate=n;var r,i=t.getFullViewConfiguration();i&&(r=i.resultlinks),r&&(this.linksDefinitions=r[0].links.split(","))}return e.prototype.hasLinks=function(e){if(this.linksDefinitions){if(this.hasGoogleLinks(e))return!0;if(this.hasSourceRecordLink(e))return!0;if(e.delivery){var t=e.delivery.link;if(t)for(var n=0;n<this.linksDefinitions.length;n++)if(this.linksDefinitions[n].length>0)for(var r=0;r<t.length;r++)if(t[r].linkType.endsWith(this.linksDefinitions[n]))return!0}}return!1},e.prototype.hasSourceRecordLink=function(e){return!(!this.linksDefinitions||this.linksDefinitions.indexOf("sourcerecord")===-1||!this.isLocal(e))},e.prototype.isLocal=function(e){return"L"===e.context||!("U"!==e.context||!e.pnx.control.sourceid||e.pnx.control.sourceid.indexOf("alma")===-1)},e.prototype.getSourceRecordLinkName=function(){return"sourcerecord"},e.prototype.hasGoogleLinks=function(e){return!(!this.linksDefinitions||this.linksDefinitions.indexOf("gbsabout")===-1&&this.linksDefinitions.indexOf("gbsfull")===-1&&this.linksDefinitions.indexOf("gbsaboutnofull")===-1||!e.pnx||!e.pnx.addata||!e.pnx.addata.isbn&&!e.pnx.addata.oclcid)},e.prototype.getPnxLinks=function(e,t){var n=[],r=u(e,"delivery.link",!1);if(r)for(var i=0;i<this.linksDefinitions.length;i++)if(this.linksDefinitions[i].length>0){var o=!1,a=[],s=[];if(s="gbsabout"!==this.linksDefinitions[i]&&"gbsfull"!==this.linksDefinitions[i]&&"gbsaboutnofull"!==this.linksDefinitions[i]||!t?r:t)for(var c=0;c<s.length;c++)!s[c].linkType.endsWith(this.linksDefinitions[i])||o&&a.indexOf(s[c].linkURL)!==-1||(n.push(s[c]),a.push(s[c].linkURL),o=!0,n[n.length-1].displayLabel===this.linksDefinitions[i]&&(n[n.length-1].displayLabel=this.$translate.instant("fulldisplay."+n[n.length-1].displayLabel)))}return n},e.prototype.getGoogleLinks=function(e){var t=[],n=Object.keys(e);if(n)for(var r=0;r<n.length;r++)if(e[n[r]]){var i=e[n[r]],o=i.preview;if(i.info_url&&t.push({linkType:"gbsabout",linkURL:i.info_url,displayLabel:"$$Egbsabout"}),"partial"!==o&&"full"!==o||!i.preview_url||t.push({linkType:"gbsfull",linkURL:i.preview_url,displayLabel:"$$Egbsfull"}),"partial"!==o&&"full"!==o||!i.preview_url?"noview"===o&&i.info_url&&t.push({linkType:"gbsaboutnofull",linkURL:i.info_url,displayLabel:"$$Egbsaboutnofull"}):t.push({linkType:"gbsaboutnofull",linkURL:i.preview_url,displayLabel:"$$Egbsaboutnofull"}),t.length>0)return t}return t},e.prototype.handleGoogleLinks=function(e){var t=c.getGoogWithProxy(),n=!1,r=!1;if(e.pnx.addata.isbn&&(t+="ISBN:"+e.pnx.addata.isbn[0],n=!0),e.pnx.addata.oclcid&&(n&&(t+=","),t+="OCLC:"+e.pnx.addata.oclcid[0],r=!0),n||r)return t+="&jscmd=viewapi",this.$http.jsonp(t)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,Object])],e);var t}();t.FullViewLinksService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(224),s=n(1),c=n(309),u=function(){function e(e){this.citationTrailsService=e}return e.prototype.getCitationTrails=function(e){return c(e,"extras.citationTrails")?e.extras.citationTrails:null},e.prototype.hasCitationTrails=function(e){var t=this.getCitationTrails(e);return t&&(t.citing&&t.citing.length>0||t.citedby&&t.citedby.length>0)},e.prototype.loadRecordsExtras=function(e){if(s.isCitationTrailsEnabled())return this.citationTrailsService.updateCitationsList(e.filter(function(e){return!c(e,"extras.citationTrails")}))},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.CitationTrailsService&&a.CitationTrailsService)&&t||Object])],e);var t}();t.RecordUtil=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(95),s=n(2),c=function(){function e(e,t){this.timesCitedService=e,this.configurationUtil=t}return e.prototype.hasCitedby=function(e){return e&&e.extras&&e.extras.citationTrails&&e.extras.citationTrails.citedby&&e.extras.citationTrails.citedby.length>0},e.prototype.hasCiting=function(e){return e&&e.extras&&e.extras.citationTrails&&e.extras.citationTrails.citing&&e.extras.citationTrails.citing.length>0},e.prototype.isShowCitationTrialForSuprima=function(){return this.showCitationTrialForSuprima},e.prototype.setShowCitationTrialForSuprima=function(e){this.showCitationTrialForSuprima=e},e.prototype.shouldDisplayTimesCited=function(){return this.configurationUtil.isSuprima()?this.timesCitedService.shouldDisplayTimesCited&&this.timesCitedService.isShowTimesCitedForSuprima():this.timesCitedService.shouldDisplayTimesCited},e.prototype.shouldDisplayCitationTrial=function(){return!this.configurationUtil.isSuprima()||this.isShowCitationTrialForSuprima()},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.TimesCitedService&&a.TimesCitedService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&n||Object])],e);var t,n}();t.CitationTrailsFullviewLinkService=c,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$translate=e}return e.prototype.translateInstantWithDefault=function(e,t){var n=this.$translate.getTranslationTable();return n&&n[e]?this.$translate.instant(e):t},e=r([a.Injectable(),o(0,a.Inject("$translate")),i("design:paramtypes",[Object])],e)}();t.TranslationService=s},function(e,t,n){"use strict";function r(){setTimeout(function(){var e=document.createEvent("HTMLEvents");e.initEvent("ZoteroItemUpdated",!0,!0),document.dispatchEvent(e)},2e3)}function i(e){var t=o(e);return t=c(t,function(e){return""===e}),!t["rft.aufirst"]&&t["rft.aulast"]&&(t["rft.aufirst"]=t["rft.aulast"]),t=s(t,function(e){return encodeURIComponent(e)}),a(t)}function o(e){var t,n,r={},i=(e||"").split("?"),o=0;if(i.length<=1)return r;t=i[1].split("&");for(o in t)n=t[o].split("="),r[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"");return r}function a(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(329),c=n(330);t.updateZoteroPlugin=r,t.encodeZoteroValue=i},function(e,t,n){function r(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:i(e,t,n)}var i=n(105);e.exports=r},function(e,t,n){function r(e){return o(e)?a(e):i(e)}var i=n(592),o=n(158),a=n(593);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(34),s=n(63),c=n(1),u=function(){function e(e,t){this.opacService=e,this.requestService=t}return e.prototype.makeIlsRequest=function(e,t){var n=this;return t||(t={}),t.vid=c.getVid(),this.opacService.makeIlsCall(e,t,"GET").then(function(t){return n.requestService.setupNewForm(e,t),n.requestService.requestIsLoading=!1,t},function(e){var t=e.data?e.data.errorMessage:void 0;t&&(n.requestService.displayErrorMessage=!0,n.requestService.requestIsLoading=!1)})},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.OpacService&&a.OpacService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.RequestService&&s.RequestService)&&n||Object])],e);var t,n}();t.ServiceButtonService=u},,function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(13),o=n(70),a=function(e){function t(t){var n=t.name,r=t.pure,i=e.call(this)||this;return i.name=n,i._pure=r,i}return r(t,e),Object.defineProperty(t.prototype,"pure",{get:function(){return!i.isPresent(this._pure)||this._pure},enumerable:!0,configurable:!0}),t}(o.InjectableMetadata);t.PipeMetadata=a},function(e,t,n){"use strict";var r;!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked",e[e._OnChildrenChanged=8]="_OnChildrenChanged"}(r=t.LifecycleHooks||(t.LifecycleHooks={})),t.LIFECYCLE_HOOKS_VALUES=[r.OnInit,r.OnDestroy,r.DoCheck,r.OnChanges,r.AfterContentInit,r.AfterContentChecked,r.AfterViewInit,r.AfterViewChecked,r._OnChildrenChanged];var i;!function(e){e[e.FromView=0]="FromView",e[e.FromContent=1]="FromContent"}(i=t.ChildrenChangeHook||(t.ChildrenChangeHook={}))},function(e,t,n){"use strict";function r(e){return e instanceof a.DirectiveMetadata&&!(e instanceof a.ComponentMetadata)}function i(e){return e instanceof a.ComponentMetadata}function o(e,t,n,r,i,o){void 0===i&&(i=[]),void 0===o&&(o=[]),e.$on("$destroy",function(){r&&n.ngOnDestroy(),i.forEach(function(e){return e()}),o.forEach(function(e){return e()})})}var a=n(84);t.isAttrDirective=r,t.isComponentDirective=i,t._setupDestroyHandler=o},function(e,t,n){"use strict";var r=n(71),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){function r(e,t,n){var r=-1,f=o,p=e.length,d=!0,h=[],m=h;if(n)d=!1,f=a;else if(p>=l){var g=t?null:c(e);if(g)return u(g);d=!1,f=s,m=new i}else m=t?[]:h;e:for(;++r<p;){var y=e[r],v=t?t(y):y;if(y=n||0!==y?y:0,d&&v===v){for(var b=m.length;b--;)if(m[b]===v)continue e;t&&m.push(v),h.push(y)}else f(m,v,n)||(m!==h&&m.push(v),h.push(y))}return h}var i=n(164),o=n(210),a=n(211),s=n(169),c=n(503),u=n(212),l=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(476),o=n(494),a=n(496),s=n(497),c=n(498);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){if(!o(e))return!1;var t=i(e);return t==s||t==c||t==a||t==u}var i=n(72),o=n(31),a="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},function(e,t,n){var r=n(85),i=n(52),o=r(i,"Map");e.exports=o},function(e,t,n){function r(e,t){var n=null==e?0:e.length;return!!n&&i(e,t,0)>-1}var i=n(124);e.exports=r},function(e,t){function n(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t){return e&&i(e,t,o)}var i=n(283),o=n(57);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e,t,n,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:i(e,t,n,a,r,s))}var i=n(520),o=n(53);e.exports=r},function(e,t,n){var r=n(293),i=n(294),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return a.call(e,t)}))}:i;e.exports=c},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var i=n(15),o=n(102),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){function r(e,t,n,j,A,C){var $,k=t&w,M=t&I,F=t&R;if(n&&($=A?n(e,j,A,C):n(e)),void 0!==$)return $;if(!O(e))return e;var U=b(e);if(U){if($=g(e),!k)return l(e,$)}else{var B=m(e),N=B==D||B==L;if(S(e))return u(e,k);if(B==x||B==P||N&&!A){if($=M||N?{}:v(e),!k)return M?p(e,c($,e)):f(e,s($,e))}else{if(!ee[B])return A?e:{};$=y(e,B,k)}}C||(C=new i);var q=C.get(e);if(q)return q;if(C.set(e,$),T(e))return e.forEach(function(i){$.add(r(i,t,n,i,e,C))}),$;if(_(e))return e.forEach(function(i,o){$.set(o,r(i,t,n,o,e,C))}),$;var H=F?M?h:d:M?keysIn:E,V=U?void 0:H(e);return o(V||e,function(i,o){V&&(o=i,i=e[o]),a($,o,r(i,t,n,o,e,C))}),$}var i=n(173),o=n(300),a=n(157),s=n(534),c=n(535),u=n(301),l=n(192),f=n(538),p=n(539),d=n(291),h=n(220),m=n(131),g=n(540),y=n(541),v=n(304),b=n(15),S=n(128),_=n(546),O=n(31),T=n(548),E=n(57),w=1,I=2,R=4,P="[object Arguments]",j="[object Array]",A="[object Boolean]",C="[object Date]",$="[object Error]",D="[object Function]",L="[object GeneratorFunction]",k="[object Map]",M="[object Number]",x="[object Object]",F="[object RegExp]",U="[object Set]",B="[object String]",N="[object Symbol]",q="[object WeakMap]",H="[object ArrayBuffer]",V="[object DataView]",Y="[object Float32Array]",z="[object Float64Array]",G="[object Int8Array]",W="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",K="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]",ee={};ee[P]=ee[j]=ee[H]=ee[V]=ee[A]=ee[C]=ee[Y]=ee[z]=ee[G]=ee[W]=ee[Q]=ee[k]=ee[M]=ee[x]=ee[F]=ee[U]=ee[B]=ee[N]=ee[J]=ee[K]=ee[X]=ee[Z]=!0,ee[$]=ee[D]=ee[q]=!1,e.exports=r},function(e,t,n){var r=n(286),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){function r(e){return i(e,a,o)}var i=n(292),o=n(302),a=n(134);e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=n(290);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e.prototype.generateUUID=function(){var e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)});return t},e=r([i.Injectable()],e)}();t.UUIDGenerator=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(15),s=function(){function e(){this.arrayCache={}}return e.prototype.toArray=function(e,t){return a(e)?e:null===e||void 0===e?[]:(this.arrayCache[e]||(e&&t?this.arrayCache[e]=e.split(";"):this.arrayCache[e]=[e]),this.arrayCache[e])},e.prototype.convertObjectToArray=function(e){return e instanceof Array||(e=e?[e]:[]),e},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.JsonUtils=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(552),c=n(80),u=n(1),l=function(){function e(e,t){this.$http=e,this.restBaseURLs=t}return e.prototype.updateCitationsList=function(e){var t=this;if(e){var n=e.filter(this.filterNonPcReocrd).map(this.fetchFrbrGroupId);if(n.length>0){var r={frbrgroupids:n,vid:u.getVid()};return this.$http.post(this.restBaseURLs.citationTrails,r).then(function(n){return t.onSuccess(n,e)},this.onError)}}},e.prototype.fetchFrbrGroupId=function(e){return e.pnx.facets.frbrgroupid&&0!==e.pnx.facets.frbrgroupid.length?e.pnx.facets.frbrgroupid[0]:null},e.prototype.onSuccess=function(e,t){var n=this;if(e.error)return void this.onError(e.error);var r=e.data.data;return t.forEach(function(e){return n.updateDoc(e,r)}),t},e.prototype.onError=function(e){console.error(e)},e.prototype.updateDoc=function(e,t){var n=this.fetchFrbrGroupId(e),r=c(t,{frbrgroupid:n});if(n&&r){var i={citing:r.citing,citedby:r.citedby};s(e,"extras.citationTrails",i)}else s(e,"extras.citationTrails",{})},e.prototype.filterNonPcReocrd=function(e){return"PC"===e.context&&e.pnx.facets.frbrgroupid&&e.pnx.facets.frbrgroupid.length>0},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object])],e)}();t.CitationTrailsService=l,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(54),u=n(56),l=n(18),f=n(3),p=function(){function e(e,t,n,r,i,o){this.collectionDiscoveryService=e,this.cheetah=t,this.$stateParams=n,this.$location=r,this.$state=i,this.$mdDialog=o,this.nextOffset={},this.totalItems={},this.moreLikeThisItems={}}return e.prototype.getItemsForSameField=function(e,t,n){void 0===n&&(n=0);var r="",i="any";"crs"===t?i="crsid":"col"===t&&(i="cdparentid");var o={offset:n,bulkSize:s.getResultsBulkSize(),mode:"advanced"},a=[];if("crs"===t){var c=this.$stateParams.search_scope;if(Array.isArray(c)&&(c=c.length>0?c[0]:"browse_search"),o.scope=c||"browse_search",f(e,"pnx.search.crsid"))a=f(e,"pnx.search.crsid");else{var u=this.getDataFromCourseItem(e);u.forEach(function(e){a.push(e.courseCodeAndSection)})}}else"col"===t&&(o.scope="suprima"!==s.getBackendSystem()?"collection_discovery_search":"browse_search",a=f(e,"pnx.search.cdparentid")?f(e,"pnx.search.cdparentid"):this.getCollectionIds(e));l(a,function(e){r+=i+",exact,"+e+",OR;"}),o.query=r,t&&(o.mode="advanced");var p=this.cheetah.performSearch(o);return p},e.prototype.getCollectionIds=function(e){var t=[],n=this.collectionDiscoveryService.getDataFromCollectionRecord(e);return n.forEach(function(e){t.push(e.collectionId)}),t},e.prototype.getDataFromCourseItem=function(e){var t=f(e,"pnx.display.crsinfo"),n="";if(t)return t.map(function(e){var t;if(e){t={};for(var r=e.split("$$"),i=0,o=r;i<o.length;i++){var a=o[i],s=a.substring(1);switch(a.charAt(0)){case"R":t.courseId=s;break;case"M":t.courseName=s;break;case"N":n=s}}}return t.courseCodeAndSection=t.courseId+"."+n,t})},e.prototype.getItemFullViewParams=function(e){if(e){var t=angular.copy(this.$location.search());return"suprima"===s.getBackendSystem()&&"servicesPage"===this.$state.current.name?(t["rft.mms_id"]=f(e,"pnx.control.recordid","").replace("alma",""),t.rft_dat="ie=",t.ie=void 0):t.docid=f(e,"pnx.control.recordid"),t}},e.prototype.navigateToItemFullView=function(e){var t=this.$location.search();"suprima"===s.getBackendSystem()&&"servicesPage"===this.$state.current.name?(t["rft.mms_id"]=f(e,"pnx.control.recordid","").replace("alma",""),t.rft_dat="ie=",t.ie=void 0,this.$state.go("servicesPage",t,{reload:!0})):"suprima"!==s.getBackendSystem()||"jfulldisplay"!==this.$state.current.name&&"exploreMain.jsearch"!==this.$state.current.name?(t.docid=f(e,"pnx.control.recordid"),this.$state.go("fulldisplay",t,{reload:!0})):(t.docid=f(e,"pnx.control.recordid"),this.$state.go("jfulldisplay",t,{reload:!0})),this.$mdDialog.hide()},e.prototype.getStateName=function(){switch(this.$state.current.name){case"exploreMain.search":return"fulldisplay";case"exploreMain.jsearch":return"jfulldisplay";default:return this.$state.current.name}},e.prototype.parseResponse=function(e,t){var n=f(e,"data.docs")||f(e,"docs");return n=n.filter(function(e){return f(t,"pnx.control.recordid[0]")!==f(e,"pnx.control.recordid[0]")})},e=r([a.Injectable(),o(2,a.Inject("$stateParams")),o(3,a.Inject("$location")),o(4,a.Inject("$state")),o(5,a.Inject("$mdDialog")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.CollectionDiscoveryService&&u.CollectionDiscoveryService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.Cheetah&&c.Cheetah)&&n||Object,Object,Object,Object,Object])],e);var t,n}();t.MoreLikeThisService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(37),s=n(46),c=n(7),u=function(){function e(e,t,n){this.sharedSessionStorage=e,this.personalizeResultsButtonService=t,this.jwtUtilService=n}return e.prototype.resetPersonalization=function(){this.sharedSessionStorage.removeItem("personalization"),this.sharedSessionStorage.removeItem("enable_personalization"),this.sharedSessionStorage.removeItem("recentness"),this.personalizeResultsButtonService.enable=!1,this.personalizeResultsButtonService.recentness=!1,this.personalizeResultsButtonService.editPressed=!1},e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.SharedSessionStorage&&a.SharedSessionStorage)&&t||Object,"function"==typeof(n="undefined"!=typeof s.PersonalizeResultsButtonService&&s.PersonalizeResultsButtonService)&&n||Object,"function"==typeof(u="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&u||Object])],e);var t,n,u}();t.PersonalizationDialogService=u},function(e,t,n){function r(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],s=e.length;for(t=i(t,3);++r<s;){var c=e[r];t(c,r,e)&&(n.push(c),a.push(r))}return o(e,a),n}var i=n(36),o=n(572);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);
return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(54),u=n(21),l=n(2),f=n(60),p=n(327),d=n(3),h=function(){function e(e,t,n,r,i){this.httpService=e,this.restBaseURLs=t,this.cheetah=n,this.searchStateService=r,this.configurationUtil=i}return Object.defineProperty(e.prototype,"snippets",{get:function(){return this._snippets},set:function(e){this._snippets=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this._highlight},enumerable:!0,configurable:!0}),e.prototype.updateSnippets=function(e){var t=this;if(e&&this.configurationUtil.getBriefResultConfiguration().showsnip){e=this.handleItemsWithSnipInResp(e);var n=e.map(function(e,n,r){return t.getFieldsFromPnxAsArray(e)});n=n.filter(this.filterByContexts),n&&0!==n.length&&this.httpService.callPostAndParams(this.restBaseURLs.snippetURL,this.cheetah.searchData,n).then(function(e){if(t.searchStateService.getSearchObject().newSearch)t.snippets=e;else{t.snippets||(t.snippets={}),p(t.snippets,e);var n=t.snippets.highlight;t._highlight=n?n.substring(1,n.length-1).split(","):void 0}})}},e.prototype.handleItemsWithSnipInResp=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];d(r,"pnx.display.snippet")?(this.snippets||(this.snippets={}),this.snippets[r.pnx.control.recordid[0]]=r.pnx.display.snippet[0]):t.push(r)}return t},e.prototype.getFieldsFromPnxAsArray=function(e){var t=d(e,"pnx.search.rsrctype");return t&&t.length>0&&(t=t[0]),{context:e.context,recordId:e.pnx.control.recordid[0],resourceType:t}},e.prototype.filterByContexts=function(e){return f(["L","PC"],e.context)>=0},e=r([a.Injectable(),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.Cheetah&&c.Cheetah)&&n||Object,"function"==typeof(h="undefined"!=typeof u.SearchStateService&&u.SearchStateService)&&h||Object,"function"==typeof(m="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&m||Object])],e);var t,n,h,m}();t.SnippetService=h,t.default=[]},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t})}var i=n(106),o=n(87);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(){function e(e,t,n){this.$http=e,this.$translate=n,this.view=s.getVid(),this.resouceRecTypeCount=new Map,this.restUrl=t.resourceRecommenderUrl}return e.prototype.getRecommendations=function(e){e.endsWith(",AND")&&(e=e.slice(0,-4));var t={query:e,view:this.view,lang:this.$translate.use()};return this.$http.get(this.restUrl,{params:t})},e.prototype.getRecommendationCount=function(e){return this.resouceRecTypeCount.has(e)?String(this.resouceRecTypeCount.get(e)):"0"},e.prototype.setRecommendationCount=function(e,t){this.resouceRecTypeCount.set(e,t)},e.prototype.resetRecommendetions=function(){var e=this;this.resouceRecTypeCount.forEach(function(t,n){e.setRecommendationCount(n,"0")})},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object])],e)}();t.ResourceRecommenderService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return Object.defineProperty(e.prototype,"browseResult",{get:function(){return this._browseResult},set:function(e){this._browseResult=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._query},set:function(e){this._query=e},enumerable:!0,configurable:!0}),e=r([i.Injectable()],e)}();t.BrowseResultService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(21),c=n(14),u=n(1),l=n(4),f=n(22),p=n(28),d=function(){function e(e,t,n,r,i,o,a,s){this.searchStateService=e,this.searchFieldsService=t,this.$http=n,this.$translate=r,this.$state=o,this.journalsService=a,this.databasesService=s,this.vid=u.getVid(),this.PERMALINK_API_URL=i.actionsBaseURL+"/permalink"}return e.prototype.buildPayload=function(e,t){var n={docid:this.getRecordId(e.pnx.control),context:e.context,vid:this.vid,pnx:e.pnx,lang:this.$translate.use()};if(t&&t.length>0&&(n.id=t[0]),n=this.addEntryIfDefined(n,"adaptor",e.adaptor),this.$state.current.name!==l.STATE_NAMES.SEARCH&&this.$state.current.name!==l.STATE_NAMES.JOURNAL_SEARCH||"WorldCat"===e.context)"fulldisplay"!==this.$state.current.name&&this.$state.current.name!==l.STATE_NAMES.JOURNAL_FULL_DISPLAY||"WorldCat"===e.context?"v2v"==e.context&&(n.search_scope=this.searchStateService.getSearchObject().scope,n.tab=this.searchStateService.getSearchObject().tab):(this.$state.params.search_scope&&(n.search_scope=this.$state.params.search_scope),n=this.addEntryIfDefined(n,"tab",this.searchFieldsService.tab),this.$state.params.adaptor&&(n.adaptor=this.$state.params.adaptor));else{var r=this.searchStateService.getSearchObject().scope;n.search_scope=r,n=this.addEntryIfDefined(n,"tab",this.searchFieldsService.tab)}return(this.journalsService.isJournalSearch()||this.databasesService.isDBSearch())&&(n=this.addEntryIfDefined(n,"state",this.$state.current.name)),n},e.prototype.getRecordId=function(e){var t=e.recordid[0];if(t.startsWith("dedupmrg")||t.startsWith("TN_dedupmrg")){var n=e.sourcerecordid[0],r=n.indexOf("$$O");return r!==-1&&(n=n.substring(r+3)),n}return t},e.prototype.getNewspapersRecordId=function(e){var t=e.addsrcrecordid[0];return"BM_"+t},e.prototype.getPermalink=function(e,t){var n=this.buildPayload(e,t);return this.$http.post(this.PERMALINK_API_URL,n)},e.prototype.addEntryIfDefined=function(e,t,n){return"undefined"!=typeof n&&(e[t]=n),e},e=r([a.Injectable(),o(2,a.Inject("$http")),o(3,a.Inject("$translate")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SearchStateService&&s.SearchStateService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&n||Object,Object,Object,Object,Object,"function"==typeof(d="undefined"!=typeof f.JournalsService&&f.JournalsService)&&d||Object,"function"==typeof(h="undefined"!=typeof p.DatabasesService&&p.DatabasesService)&&h||Object])],e);var t,n,d,h}();t.PermalinkService=d,t.default=["nddUtils"]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(4),l=n(7),f=n(17),p=n(1),d=n(10),h=n(9),m=n(45),g=function(){function e(e,t,n,r,i,o,a){this.userSessionManagerService=e,this.$state=t,this.$window=n,this.$stateParams=r,this.jwtUtilService=i,this.storageUtil=o,this.mappingTablesCache=a}return e.prototype.goToInstitutionLogin=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:return t=e.code,n=m(this.$state.params),r=n.vid.replace(/.*:/,t+":"),n.vid=r,i=this.$state.href(u.STATE_NAMES.LOGIN,{vid:r,lang:n.lang,unionCatalogNZVid:p.getVid(),toState:this.$state.current.name,toParams:JSON.stringify(n)}),o=this.jwtUtilService.getDecodedToken().user,[4,this.userSessionManagerService.createOrGetUserArea(o)];case 1:return a=s.sent(),this.storageUtil.sessionStorage.setItem(d.UNION_CATALOG_FAVORITE_STORAGE_KEY,JSON.stringify(a)),this.$window.location.assign(i),[2]}})})},e.prototype.isUnionCatalogLogin=function(){return this.userSessionManagerService.isUnionCatalogLogin()},e.prototype.returnToUnionCatalogNZView=function(){var e=JSON.parse(this.$stateParams.toParams);e.vid=this.$stateParams.unionCatalogNZVid;var t=this.$state.href(this.$stateParams.toState,e);this.$window.location.assign(t)},e.prototype.getMemberInstitutionList=function(){var e=this.mappingTablesCache.getTable("consortia member codes");return e.map(function(e){return{name:e.source2,code:e.target}})},e=r([c.Injectable(),o(1,c.Inject("$state")),o(2,c.Inject("$window")),o(3,c.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof d.UserSessionManagerService&&d.UserSessionManagerService)&&t||Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&n||Object,"function"==typeof(g="undefined"!=typeof f.StorageUtil&&f.StorageUtil)&&g||Object,"function"==typeof(y="undefined"!=typeof h.MappingTablesCache&&h.MappingTablesCache)&&y||Object])],e);var t,n,g,y}();t.UnionCatalogLoginService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(62),c=function(){function e(e,t,n){this.addQueryToSavedSearchesService=e,this.$mdToast=t,this.$timeout=n,this.inProgress=!1}return e.prototype.showMendeleyToast=function(e,t){var n=this;this.$timeout(function(){n.$mdToast&&n.$mdToast.hide().then(function(){n.inProgress=!1,n.$timeout(function(){var r='<prm-mendeley-toast is-success="'+(e?"true":"")+'" title="'+t+'"></prm-mendeley-toast>';n.inProgress||n.$mdToast.show({hideDelay:e?2500:8e3,position:"top right",template:r}).then(function(){n.addQueryToSavedSearchesService.onToastClose()})},750)})},1e3)},e.prototype.showInProgressToast=function(){var e=this,t='<prm-mendeley-toast in-progress="true"></prm-mendeley-toast>';this.inProgress||(this.inProgress=!0,this.$mdToast.show({hideDelay:0,position:"top right",template:t}).then(function(){e.addQueryToSavedSearchesService.onToastClose()}))},e=r([a.Injectable(),o(1,a.Inject("$mdToast")),o(2,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.AddQueryToSavedSearchesService&&s.AddQueryToSavedSearchesService)&&t||Object,Object,Object])],e);var t}();t.MendeleyToastService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e.prototype.selectText=function(e){var t=document,n=t.getElementById(e),r=t.body;if(r.createTextRange){var i=r.createTextRange();i.moveToElementText(n),i.select()}else if(window.getSelection){var o=window.getSelection(),i=t.createRange();i.selectNodeContents(n),o.removeAllRanges(),o.addRange(i)}},e=r([i.Injectable()],e)}();t.SelectTextUtil=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.isSearchEnabled=!0}return e.prototype.disableSearchEndlessScrolling=function(){this.isSearchEnabled=!1},e.prototype.enableSearchEndlessScrolling=function(){this.isSearchEnabled=!0},Object.defineProperty(e.prototype,"isSearchEndlessScrollingEnabled",{get:function(){return this.isSearchEnabled},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.EndlessScrollingUtil=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return Object.defineProperty(e.prototype,"pageInView",{get:function(){return this._pageInView},set:function(e){this._pageInView=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needToUpdatePivInSafari",{get:function(){return this._needToUpdatePivInSafari},set:function(e){this._needToUpdatePivInSafari=e},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.PageNavMenuService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(1),u=n(712),l=n(65),f=function(){function e(e,t){this.$http=e,this.restBaseURLs=t,this._isRemoteTab=!1}return e.prototype.updateScopes=function(){return this.scopesUrl=this.restBaseURLs.scopeListBaseURL+"/"+s.getVid()+"/scopes",this.$http({method:"GET",url:this.scopesUrl,params:{}})},e.prototype.findTabByScopeName=function(e){var t=c.getSearchScopesMap();return u(t,function(t){return l(t,function(t){return t["scope-id"]==e})>-1})},e.prototype.updateIsRemoteTab=function(e){var t=c.getSearchScopesMap(),n=t[e];this._isRemoteTab=l(n,function(e){return e.types.includes("remote")})>-1},Object.defineProperty(e.prototype,"isRemoteTab",{get:function(){return this._isRemoteTab},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object])],e)}();t.TabsAndScopesSelectorService=f,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(184),c=function(){function e(e,t,n){this.$translate=e,this.$timeout=t,this.$mdToast=n}return e.prototype.executeVoiceSearch=function(e){var t=this,n=2500;this.voiceSearchTitle=e,this.cancelTimers(),this.voiceSearchTitle.length>20&&(n=5e3),this.$timeout(function(){t.mainSearchField="",t.voiceSearchTitle="",t.onDismiss()},n)},e.prototype.onDismiss=function(){this.cancelTimers(),this.$mdToast.hide(),s&&(s.removeCallback(),s.abort())},e.prototype.cancelTimers=function(){this.$timeout.cancel(this.waitingVoiceSearchTimerDidntGetIt1),this.$timeout.cancel(this.waitingVoiceSearchTimerDidntGetIt2),this.$timeout.cancel(this.waitingVoiceSearchTimerDidntGetItCheck)},e=r([a.Injectable(),o(0,a.Inject("$translate")),o(1,a.Inject("$timeout")),o(2,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,Object])],e)}();t.VoiceSearchToastService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(185),c=n(380),u=n(47),l=n(14),f=n(1),p=n(41),d=n(4),h=n(8),m=n(20),g=n(30),y=n(24),v=n(45),b=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p){var h=this;this.ctBreadcrumbsService=e,this.$state=t,this.httpService=n,this.searchFieldsService=r,this.$translate=i,this.mediaQueries=o,this.restBaseURLs=a,this.$timeout=s,this.$interval=c,this.$scope=u,this.$location=l,this.changeLangService=f,this.alertService=p,this.SEARCH_STATE=d.STATE_NAMES.SEARCH,this.hideArrows=!1,this._citingAlert=p.create(g.ALERT_MSG_TYPE.GENERAL),this._citingAlert.show('<span translate="citation_trail.title.citation.info"></span>'),this._citedByAlert=p.create(g.ALERT_MSG_TYPE.GENERAL),this._citedByAlert.show('<span translate="citation_trail.title.cited_by.info"></span>'),this.$timeout(function(){h.fristPageLoadCitationTrails()},0),this.showLeftArrow=!0,this.showRightArrow=!0,this.offseterElem=angular.element(document.querySelector(".horizontal-content-scroller"))[0],this.containerElem=angular.element(document.querySelector(".horizontal-content-scroller"))[0],r.searchParams.query?this.savedSearchParams=v(r.searchParams):this.savedSearchParams={vid:this.$state.params.vid,query:this.$state.params.query,search_scope:this.$state.params.search_scope,tab:this.$state.params.tab},this.$scope.$on("addCitationEvent",function(e,t){h.onAddCitationEvent(e,t)})}return Object.defineProperty(e.prototype,"citedByAlert",{get:function(){return this._citedByAlert},set:function(e){this._citedByAlert=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citingAlert",{get:function(){return this._citingAlert},set:function(e){this._citingAlert=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.updateCtSession(),this.setActiveLevel(this.$state.params.active),this.refreshSeedsInfo(this.$state.params)},e.prototype.onAddCitationEvent=function(e,t){var n=this;this.hideArrows=!0,this.$timeout(function(){n.hideArrows=!1},200);var r=t.params;this.refreshSeedsInfo(r),this.ctBreadcrumbsService.performCitationTrailsSearch(r).then(function(){n.fristPageLoadCitationTrails()}),this.ctBreadcrumbsService.updateURLSearchParams(r)},Object.defineProperty(e.prototype,"seedList",{get:function(){return this.ctBreadcrumbsService.seeds.asList()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citationTraisLength",{get:function(){return this.seedList.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeSeedTypeCiting",{get:function(){return"citing"===this.seedList[this.getActiveLevel()].citeType},enumerable:!0,configurable:!0}),e.prototype.getMdListClass=function(e){return{"md-list-item-custom":e!==this.getActiveLevel(),"md-list-custom":0===e}},e.prototype.onChangeActiveSeedEvent=function(e,t){var n=this;if(this.ctBreadcrumbsService.seeds.getActiveLevel()!==t){this.setActiveLevel(t);var r=this.$location.search();r.active=t;var i=e.citeType,o=e.frbrGroupId;r.facet=i+",exact,"+o,this.ctBreadcrumbsService.updateURLSearchParams(r),r.seedInfo=null,this.refreshSeedsInfo(r),this.ctBreadcrumbsService.performCitationTrailsSearch(r).then(function(){n.fristPageLoadCitationTrails()})}},e.prototype.fristPageLoadCitationTrails=function(){this.$timeout(function(){var e=document.querySelector("#citationTrail");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0"))},0)},e.prototype.getActiveLevel=function(){return this.ctBreadcrumbsService.seeds.getActiveLevel()},e.prototype.updateCtSession=function(){var e=y([this.$state.params.seed_id]);1===e.length&&(this.ctBreadcrumbsService.seeds=new c.Breadcrumbs)},e.prototype.refreshSeedsInfo=function(e){var t=this,n=e.seedInfo;if(n)this.ctBreadcrumbsService.seeds.push(n);else if(this.ctBreadcrumbsService.seeds.isEmpty()){var r={seeds:Array.isArray(e.seed_id)?[e.seed_id][0].join("|,|"):e.seed_id,inst:f.getInstitutionCode(),lang:e.lang,adaptor:e.adaptor};"suprima"===f.getBackendSystem()&&(r={seeds:Array.isArray(e.seed_id)?[e.seed_id][0].join("|,|"):e.seed_id,inst:f.getInstitutionCode(),lang:e.lang,adaptor:e.adaptor,vid:f.getVid(),search_scope:this.$state.params.search_scope}),this.httpService.call("GET",this.restBaseURLs.citationTrailsSeedsInfo,r).then(function(e){t.onSeedsInfoSuccess(e)})}},e.prototype.setActiveLevel=function(e){void 0!==e&&this.ctBreadcrumbsService.seeds.setActiveLevel(e)},e.prototype.onSeedsInfoSuccess=function(e){var t=e.seedsInfo;if(t){var n=t.map(function(e){return new S(e.citationType,e.title,e.creator.join("; "),e.frbrGroupId,e.pnxId)});this.ctBreadcrumbsService.seeds=new c.Breadcrumbs(n)}this.$state.params.active&&this.setActiveLevel(this.$state.params.active)},e.prototype.onLeftArrowClick=function(){this.smoothScrollClick("left",this.offseterElem)},e.prototype.onRightArrowClick=function(){this.smoothScrollClick("right",this.offseterElem)},e.prototype.isShowLeftArrow=function(){return"rtl"===this.changeLangService.direction?this.offseterElem.scrollLeft>50:this.offseterElem.scrollLeft>0},e.prototype.isShowRightArrow=function(){return this.getScrollRight()>0},e.prototype.getScrollRight=function(){var e=this.offseterElem.scrollWidth-this.offseterElem.scrollLeft-this.containerElem.offsetWidth;return e<15?0:e},e.prototype.easeInOutQuart=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)},e.prototype.smoothScrollClick=function(e,t){var n=this,r=120;"left"===e&&(r=-r);var i=0,o=60,a=t.scrollLeft,s=this.$interval(function(){var e=n.easeInOutQuart(i,a,r,o);i++,t.scrollLeft=e,i===o&&n.$interval.cancel(s)},2)},e.prototype.isActive=function(e){return e==this.ctBreadcrumbsService.seeds.getActiveLevel()?"nui.aria.active_seed":" "},e=r([a.Component({providers:[].concat(s.default),selector:"prm-citation-trails-breadcrumbs",templateUrl:"components/search/citationTrails/citation-trails-breadcrumbs.html"}),o(1,a.Inject("$state")),o(4,a.Inject("$translate")),o(6,a.Inject("restBaseURLs")),o(7,a.Inject("$timeout")),o(8,a.Inject("$interval")),o(9,a.Inject("$scope")),o(10,a.Inject("$location")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.CitationTrailsBreadcrumbsService&&s.CitationTrailsBreadcrumbsService)&&t||Object,"function"==typeof(n="undefined"!=typeof p.IState&&p.IState)&&n||Object,"function"==typeof(b="undefined"!=typeof u.HttpService&&u.HttpService)&&b||Object,"function"==typeof(_="undefined"!=typeof l.SearchFieldsService&&l.SearchFieldsService)&&_||Object,Object,"function"==typeof(O="undefined"!=typeof h.MediaQueries&&h.MediaQueries)&&O||Object,Object,Object,Object,Object,Object,"function"==typeof(T="undefined"!=typeof m.ChangeLangService&&m.ChangeLangService)&&T||Object,"function"==typeof(E="undefined"!=typeof g.AlertFactory&&g.AlertFactory)&&E||Object])],e);var t,n,b,_,O,T,E}();t.PrmCitationTrailsBreadcrumbs=b;var S=function(){function e(e,t,n,r,i,o){this.citeType=e,this.title=decodeURIComponent(t),this.creator=decodeURIComponent(n),this.frbrGroupId=r,this.recordId=i,this.record=o}return e}();t.SeedData=S},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(10),s=function(){function e(e){this.userSessionManagerService=e}return e.prototype.handleLogout=function(){this.userSessionManagerService.logout(!1)},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.UserSessionManagerService&&a.UserSessionManagerService)&&t||Object])],e);var t}();t.AuthenticationService=s,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),a=n(0),s=n(1),c=n(1),u=n(7),l=function(){function e(e,t){this.mtCache=e,this.jwtUtilService=t}return e.prototype.getOpacType=function(){var e=s.getApiBaseUrl();return e?f.OVP:f.OVL},e.prototype.getIlsBaseUrl=function(){var e=c.getBaseUrls().my_library_card||"";return e.replace("__pds_handle__",this.getPdsHandle())},e.prototype.getPdsHandle=function(){var e=this.jwtUtilService.getDecodedToken();return e.jti||""},e=r([a.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.MappingTablesCache&&o.MappingTablesCache)&&t||Object,"function"==typeof(n="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&n||Object])],e);var t,n}();t.LibraryCardMenuService=l;var f;!function(e){e[e.OVL=0]="OVL",e[e.OVP=1]="OVP"}(f=t.OPAC_TYPE||(t.OPAC_TYPE={})),t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(9),c=n(2),u=function(){function e(e,t,n){var r=this;this.mappingTablesCache=e,this.$translate=t,this.configurationUtil=n,this._displaySigninHelp=!1,this.getHelpCodeData().then(function(e){r.setHelpData(e)},function(e){r._displaySigninHelp=!1})}return e.prototype.setHelpData=function(e){var t=e["nui.login.help"],n=e["nui.help.description"];"nui.login.help"===t&&(t=""),"nui.help.description"===n&&(n="");for(var r=[],i=0;i<4;i++){var o=i+1,a=this.mappingTablesCache.findByProperties("User Login Links",{source1:"login.link"+o});a.length>0&&(this.configurationUtil.isSuprima()?r.push({label:"nui.help.login.link"+o,linkURL:a[0].source2}):r.push({label:"nui.help.login.link"+o,linkURL:a[0].target}))}t&&(n||r&&0!==r.length)?this._displaySigninHelp=!0:this._displaySigninHelp=!1,this._loginHelpData={moreInfo:t,description:n,links:r}},Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this._displaySigninHelp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginHelpData",{get:function(){return this._loginHelpData},enumerable:!0,configurable:!0}),e.prototype.getHelpCodeData=function(){return this.$translate(["nui.login.help","nui.help.description"])},e=r([a.Injectable(),o(1,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object])],e);var t,n}();t.LoginHelpService=u,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;
if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(17),s=function(){function e(e){this.storageUtil=e,this.aggregatedEntries=["pnxs"],this.activeStatus=!1,this.model={}}return e.prototype.getKey=function(e){var t=0;e.lastIndexOf("/rest/v1/")!==-1?t=e.lastIndexOf("/rest/v1/")+"/rest/v1/".length:e.lastIndexOf("/rest/primo-explore/v1/")!==-1&&(t=e.lastIndexOf("/rest/primo-explore/v1/")+"/rest/primo-explore/v1/".length);var n=e.indexOf("?")!==-1?e.indexOf("?"):e.length,r=e.substring(t,n);return r},e.prototype.addToModel=function(e,t){var n=this;this.storageUtil.$localForage.getItem("debugModel").then(function(r){r||(r={}),r[e]||(n.aggregatedEntries.indexOf(e)!==-1?r[e]=[]:r[e]={}),n.aggregatedEntries.indexOf(e)!==-1?(0===t.config.params.offset&&(r[e]=[]),r[e].push(t.data)):r[e]=t.data,n.storageUtil.$localForage.setItem("debugModel",r),n.model=r})},Object.defineProperty(e.prototype,"modelInstance",{get:function(){return this.getDatModel(),this.model},set:function(e){this.model=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.checkActive(),this.activeStatus},set:function(e){var t=this;e&&this.storageUtil.$localForage.getItem("debugModelActive").then(function(n){t.activeStatus=n||e,t.storageUtil.$localForage.setItem("debugModelActive",t.activeStatus)})},enumerable:!0,configurable:!0}),e.prototype.getDatModel=function(){var e=this;this.storageUtil.$localForage.getItem("debugModel").then(function(t){e.model=t||{}})},e.prototype.checkActive=function(){var e=this;this.storageUtil.$localForage.getItem("debugModelActive").then(function(t){e.activeStatus=t||!1})},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.StorageUtil&&a.StorageUtil)&&t||Object])],e);var t}();t.ModelService=s,t.default=[]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._desc=t}return i(e,[{key:"toString",value:function(){return"Token "+this._desc}}]),e}();t.OpaqueToken=o},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var i=arguments.length<=2||void 0===arguments[2]?{value:void 0}:arguments[2],o=i.value,l=1===arguments.length,f=l?e:o,p=function(e){return"string"!=typeof e&&!(e instanceof u.OpaqueToken)},d=function(e){if(!a.providerStore.get("name",e)||!a.providerStore.get("type",e))throw new Error('Processing "'+f.name+'" @Inject parameter: "'+(e.name||e.toString())+'" is not a valid injectable.\n\t\t\t\tPlease ensure '+(e.name||e.toString())+" is injectable. Valid examples can be:\n\t\t\t\t- a string representing an ng1 provider, e.g. '$q'\n\t\t\t\t- an @Injectable ng-forward class\n\t\t\t\t- a Provider, e.g. provide(SOME_CONFIG, {asValue: 100})");return e},h=t.filter(p).map(d);c.Providers.apply(void 0,r(h))(f,"while analyzing '"+f.name+"' injected providers");var m=t.map(s.getInjectableName).filter(function(e){return void 0!==e});if(a.bundleStore.has("$inject",f)){var g=a.bundleStore.get("$inject",f);a.bundleStore.set("$inject",[].concat(r(m),r(g)),f)}else a.bundleStore.set("$inject",m,f)}}function o(e,t,n,r,i,o){t.forEach(function(e){if(!i.has(e)){var t=o.$element;do if(t.controller){var n=t.controller(e);if(n)return void(o[e]=n)}while((t=t.parent())&&t.length>0)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.Inject=i;var a=n(32),s=n(148),c=n(111),u=n(245),l=n(188);l.componentHooks.beforeCtrlInvoke(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(91),a=r(o),s=n(412),c=r(s),u="injectable";t.INJECTABLE=u;var l=(0,c.default)(u);t.Injectable=l,a.default.addProvider(u,function(e,t,n,r){r.service(t,[].concat(i(n),[e]))})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0;null!==e.match(/\[(.*?)\]/)?(t=e.slice(1,e.length-1).split("-"),n="A"):"."===e[0]?(t=e.slice(1,e.length).split("-"),n="C"):(t=e.split("-"),n="E");var i=t.shift(),o=void 0;if(t.length>0){for(var a=0;a<t.length;a++){var s=t[a];s=s.slice(0,1).toUpperCase()+s.slice(1,s.length),t[a]=s}o=[i].concat(r(t)).join("")}else o=i;return{name:o,type:n}},e.exports=t.default},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(){function e(e,t,n,r,i){this.$http=e,this.$translate=n,this.$state=r,this.$stateParams=i,this.vid=s.getVid(),this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.getItem=function(){var e=this.GET_ITEM_API_URL+"/"+this.$stateParams.context+"/"+this.$stateParams.docid+"?vid="+this.vid+"&lang="+this.$translate.use();return this.$http.get(e)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),o(3,a.Inject("$state")),o(4,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,Object,Object,Object])],e)}();t.ChaptersAndReviewsItemService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(2),u=n(252),l=n(43),f=function(){function e(e,t,n,r){this.restBaseURLs=e,this.httpService=t,this.configurationUtil=n,this.linkedUserSelectorService=r,this.resquestInProgress={},this.baseUrl=this.configurationUtil.isSuprima()?"/primaws/rest/priv":"/primo_library/libweb/webservices/rest/v1",this.ilsServices={counters:{path:this.baseUrl+"/myaccount/counters",method:"GET"},loans:{path:this.baseUrl+"/myaccount/loans",method:"GET"},renew_loan:{path:this.baseUrl+"/myaccount/renew_loans",method:"POST"},renew_all_loans:{path:this.baseUrl+"/myaccount/renew_all_loans",method:"POST"},requests:{path:this.baseUrl+"/myaccount/requests",method:"GET"},deposits:{path:this.baseUrl+"/myaccount/depositsInfo",method:"GET"},representationInfo:{path:this.baseUrl+"/myaccount/representationInfo",method:"GET"},fines:{path:this.baseUrl+"/myaccount/fines",method:"GET"},cancel_requests:{path:this.baseUrl+"/myaccount/cancel_requests",method:"POST"},blocks_messages:{path:this.baseUrl+"/myaccount/blocks_messages",method:"GET"},personal_settings:{path:this.baseUrl+"/myaccount/personal_settings",method:"GET"},update_personal_settings:{path:this.baseUrl+"/myaccount/update_personal_settings",method:"POST"},submit_deposit:{path:this.baseUrl+"/myaccount/submit_deposit",method:"POST"},withdraw_deposit:{path:this.baseUrl+"/myaccount/withdraw_deposit",method:"POST"},collection:{path:this.baseUrl+"/myaccount/collection",method:"GET"}},this.myAccountBaseUrl=e.myAccountBaseURL,this.refreshRestPaths()}return e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={}),this.linkedUserSelectorService.selectedInstitution&&(this.configurationUtil.isSuprima()?t.inst_code=this.linkedUserSelectorService.selectedInstitution.institutionCode||"":t.linked_inst=this.linkedUserSelectorService.selectedInstitution.institutionCode||"",t.patron_id=this.linkedUserSelectorService.selectedInstitution.patronId||"");var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},e.prototype.getDisplayBackToSearchLink=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()!==!0},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.refreshRestPaths=function(){var e=this.ilsServices;this.httpService.call("GET",this.myAccountBaseUrl).then(function(t){var n=t;Object.keys(n).map(function(t){e[t]=n[t]})})},e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e=r([a.Injectable(),o(0,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object,"function"==typeof(l="undefined"!=typeof u.LinkedUserSelectorService&&u.LinkedUserSelectorService)&&l||Object])],e);var t,n,l}();t.AccountService=f;var p=function(){function e(e,t){this.isSuccess=e,this.msg=t}return e}();t.StatusMsg=p,t.default=[l.default.name]},function(e,t,n){n(5),n(618),n(620),n(622),e.exports="ngMaterial"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(51),c=function(){function e(){}return e.prototype.setInstitutionsList=function(e){if(!this._institutionsList){try{var t=e.data.accountslist.account;this._institutionsList=s(t.map(function(e){return{label:e.primoinstitution?e.primoinstitution:e.institutioncode,value:{institutionCode:e.institutioncode,patronId:e.useridentifier}}}),function(e){return e.value.institutionCode},"asc")}catch(e){}this.setInitialInstitution()}},e.prototype.setInitialInstitution=function(){var e=a.getInstitutionCode();this._selectedInstitution=this._institutionsList.filter(function(t){return t.label===e})[0].value},Object.defineProperty(e.prototype,"institutionsList",{get:function(){return this._institutionsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedInstitution",{get:function(){return this._selectedInstitution},set:function(e){this._selectedInstitution=e},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.LinkedUserSelectorService=c,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(250),s=n(9),c=n(252),u=n(51),l=n(139),f=function(){function e(e,t,n){this.accountService=e,this.linkedUserSelectorService=t,this.mappingTablesCache=n,this.setRequiredTabsList()}return e.prototype.setRequiredTabsList=function(){var e=["deposits","personal_settings","blocks","fines","requests","loans"],t=this.mappingTablesCache.getTable("My Account Menu Configuration - OvP");t.forEach(function(e){e.source2=e.source2.replace("myaccount","")}),t=u(t,function(e){return parseInt(e.source2)},"desc"),t=t.filter(function(e){return"Yes"===e.target}),t=t.map(function(e){return e.source3}),this._requiredTabsList=l(e,t)},Object.defineProperty(e.prototype,"requiredTabsList",{get:function(){return this._requiredTabsList},enumerable:!0,configurable:!0}),e.prototype.updateCounters=function(){var e=this;this.accountService.makeIlsRequest("counters",null).then(function(t){return e.setCounters(t)})},e.prototype.setCounters=function(e){try{var t={},n=e.data.listofactions.action;n.forEach(function(e){t[e.type]=e.value}),this._finesCounter=t.Fines?t.Fines:"0",this._demeritsCounter=t.Demerits?t.Demerits:"0",this._loansCounter=t.Loans?parseInt(t.Loans):0,this._historyLoansCounter=t.HistoryLoans?parseInt(t.HistoryLoans):0,this._requestsCounter=t.Requests?parseInt(t.Requests):0,this._depositsCounter=t.Deposits?parseInt(t.Deposits):0,this.linkedUserSelectorService.setInstitutionsList(e)}catch(e){}},Object.defineProperty(e.prototype,"finesCounters",{get:function(){return parseFloat(this._finesCounter)?this._finesCounter:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demeritsCounter",{get:function(){return parseFloat(this._demeritsCounter)?this._demeritsCounter:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loansCounters",{get:function(){return this._loansCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyLoansCounters",{get:function(){return this._historyLoansCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestsCounter",{get:function(){return this._requestsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositsCounter",{get:function(){return this._depositsCounter},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.AccountService&&a.AccountService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.LinkedUserSelectorService&&c.LinkedUserSelectorService)&&n||Object,"function"==typeof(f="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&f||Object])],e);var t,n,f}();t.AccountOverviewService=f,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(48),c=n(27),u=n(4),l=n(139),f=function(){function e(e,t,n,r,i,o){this.$http=e,this.favoritesService=t,this.briefResultService=n,this.$state=r,this.$translate=i,this.restBaseURLs=o,this.PUT_LABELS_URL=o.favoritesBaseURL+"/",this.$http=e,this.favoritesService=t}return e.prototype.putLabel=function(e,t){var n=this,r={records:[{recordId:e,labels:t}]};this.$http.put(this.PUT_LABELS_URL,r).then(function(){n.favoritesService.getItemsFromServer()})},e.prototype.putLabels=function(e){var t=this;this.$http.put(this.PUT_LABELS_URL,e).then(function(){t.favoritesService.getItemsFromServer()})},e.prototype.getRecordsByState=function(){return this.$state.current.name===u.STATE_NAMES.SEARCH?this.briefResultService.getSearchChosenItems():this.$state.current.name===u.STATE_NAMES.FAVORITES?this.briefResultService.getChosenRecords():void 0},e.prototype.getRecordIdByState=function(e,t){return this.$state.current.name===u.STATE_NAMES.SEARCH?e[t].pnx.control.recordid[0]:this.$state.current.name===u.STATE_NAMES.FAVORITES?e[t]:void 0},e.prototype.returnAssignedLabels=function(e,t){if(e){for(var n=this.getRecordsByState(),r=new Set,i=0;i<n.length;i++)for(var o=this.favoritesService.getLabelsOfRecord(this.getRecordIdByState(n,i)),a=0;a<o.length;a++)r.add(o[a]);var s=Array.from(r);return this.sortLables(s)}var s=this.favoritesService.getLabelsOfRecord(t.pnx.control.recordid[0]);return this.sortLables(s)},e.prototype.returnOtherLabels=function(e,t){if(e){var n=this.getRecordsByState(),r=[];this.favoritesService.getLabels()&&(r=Object.keys(this.favoritesService.getLabels()));for(var i=0;i<n.length;i++){var o=this.favoritesService.getOtherLabels(this.getRecordIdByState(n,i));r=l(r,o)}return this.sortLables(r)}var r=this.favoritesService.getOtherLabels(t.pnx.control.recordid[0]);return this.sortLables(r)},e.prototype.removeLabelForOneRecord=function(e,t){var n=this.favoritesService.getLabelsOfRecord(e).slice(),r=n.indexOf(t);r!==-1&&(n.splice(r,1),this.putLabel(e,n))},e.prototype.removeLabel=function(e,t,n){if(t){for(var r=[],i=this.getRecordsByState(),o={},a=0;a<i.length;a++){var s=this.favoritesService.getLabelsOfRecord(this.getRecordIdByState(i,a)).slice(),c=s.indexOf(e);c!==-1&&(s.splice(c,1),o={recordId:this.getRecordIdByState(i,a),labels:s},r.push(o))}var u={records:r};this.putLabels(u)}else{var l=n.pnx.control.recordid[0];this.removeLabelForOneRecord(l,e)}},e.prototype.addLabelForOneRecord=function(e,t){var n=this.favoritesService.getLabelsOfRecord(e).slice();n.push(t),this.putLabel(e,n)},e.prototype.addLabel=function(e,t,n){if(t){for(var r=[],i=this.getRecordsByState(),o={},a=0;a<i.length;a++){var s=this.favoritesService.getLabelsOfRecord(this.getRecordIdByState(i,a)).slice();s.push(e),o={recordId:this.getRecordIdByState(i,a),labels:s},r.push(o)}var c={records:r};this.putLabels(c)}else{var u=n.pnx.control.recordid[0];this.addLabelForOneRecord(u,e)}},e.prototype.isChosenFavAndLabels=function(e){return e?this.$translate.instant("nui.aria.bulk.addToFavoritesSignedInDisabled"):this.$translate.instant("nui.aria.bulk.addToFavoritesSignedIn")},e.prototype.isChosenLabels=function(e){return e?this.$translate.instant("nui.favorites.labelsDisable")+" "+this.$translate.instant("nui.aria.favorites.enableControls"):this.$translate.instant("nui.favorites.labels")},e.prototype.sortLables=function(e){return e?e.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}):e},e=r([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("$state")),o(4,a.Inject("$translate")),o(5,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.FavoritesService&&s.FavoritesService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.BriefResultService&&c.BriefResultService)&&n||Object,Object,Object,Object])],e);var t,n}();t.FavoritesEditLabelsMenuService=f},function(e,t,n){var r=n(82),i=n(106),o=n(206),a=n(136),s=i(function(e){return o(r(e,1,a,!0))});e.exports=s},function(e,t,n){var r=n(361),i=n(82),o=n(106),a=n(136),s=o(function(e,t){return a(e)?r(e,i(t,1,a,!0)):[]});e.exports=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.TagsListService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return Object.defineProperty(e.prototype,"isGalleryLobby",{get:function(){return this._isGalleryLobby},set:function(e){this._isGalleryLobby=e},enumerable:!0,configurable:!0}),e=r([i.Injectable()],e)}();t.CollectionGalleryService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(117),u=function(){function e(e,t,n){this.$location=e,this.$translate=t,this.$q=n,this.vid=s.getVid()}return e.prototype.getImageLink=function(e){var t=this;return this.$q(function(n,r){if(e&&e.linkURL){var i=e.linkURL,o=new Image;o.onload=function(){o.width>1?n(e):r("")},o.onerror=function(){r("")},o.src=t.handleLink(i)}else r("")})},e.prototype.handleLink=function(e){var t=e,n="https";try{var r=this.$location;n=r.$$protocol}catch(e){n="https"}return"https"===n&&(t=c(e,"http://","https://")),t},e=r([a.Injectable(),o(0,a.Inject("$location")),o(1,a.Inject("$translate")),o(2,a.Inject("$q")),i("design:paramtypes",[Object,Object,Object])],e)}();t.ImagesUtil=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(259),u=n(2),l=n(365),f=n(633),p=n(89),d=n(4),h=n(3),m=n(255),g=n(31),y=function(){function e(e,t,n,r,i,o){this.imagesUtil=e,this.configurationUtil=t,this.primoExploreFooterService=n,this.$http=r,this.$q=i,this.$state=o}return e.prototype.getThumbnailLinks=function(e,t,n,r,i,o){var a=this;return this.$q(function(s,c){var u=[],l=e||[],f=a.getType(t,o);a.defineDefaultTumbnail(f,n,r,t,i,o).then(function(e){a.defaultThumbnailLink=e,a.isFrbr(t,n)&&u.push(e),u=t?l:u.concat(l.filter(function(e){return"thumbnail"===e.displayLabel})),n&&r&&!a.isPcRecord(o)?(e.isDefault=!0,s(e)):a.getThumbnailFromAlmaD(i,o).then(function(t){t?s(t):a.getThumbnailFromSyndeticsEXL(u,o).then(function(t){t?s(t):a.getThumbnailFromSyndetics(u).then(function(t){t?s(t):a.getThumbnailFromGoogle(u).then(function(t){t?s(t):a.getThumbnailFromOther(u).then(function(t){t?s(t):(g(e)&&(e.isDefault=!0),s(e))})})})})})})})},e.prototype.getType=function(e,t){return e?"book":t&&t.pnx.display.type?t.pnx.display.type:[]},e.prototype.defineDefaultTumbnail=function(e,t,n,r,i,o){var a=this;t&&n&&!this.isPc(o)&&!this.isFavoriteState()&&(e="versions");var s={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:"img/icon_other.png"},c={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:e.length>0?"img/icon_"+e+".png":void 0},u={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:p.getResouceTypeImages()[e]};return this.$q(function(e){r&&e("");a.imagesUtil.getImageLink(u).then(function(t){e(u)},function(t){a.imagesUtil.getImageLink(c).then(function(t){e(c)},function(t){e(i?"":s)})})})},e.prototype.isFrbr=function(e,t){return!e&&t},e.prototype.isPcRecord=function(e){var t=h(e,"pnx.control.recordid[0]"),n=h(e,"context"),r=h(e,"adaptor");return"PC"===n||t&&t.startsWith("TN_")||"Primo Central"===r},e.prototype.getThumbnailFromAlmaD=function(e,t){var n=this;return this.$q(function(r){if(!e&&n.isAlmaD(t)){var i=h(t,"pnx.control.sourcerecordid[0]"),o=h(t,"delivery.recordInstitutionCode");o||(o=s.getInstitutionCode()),n.imagesUtil.getImageLink(n.createLinkObj("/view/delivery/thumbnail/"+o+"/"+i)).then(function(e){r(e)},function(){r("")})}else r("")})},e.prototype.getThumbnailFromSyndeticsEXL=function(e,t){var n=this;return this.$q(function(r){var i=!1,o=[];if(o=e.filter(n.getSpecificLink,"syndetics.com").filter(n.getSpecificLink,"primo"),o.length>0)i=!0;else if(n.configurationUtil.isSuprima()){var a=h(t,"pnx.addata.isbn",[]),s=h(t,"pnx.addata.eisbn",[]);a=m(a,s);var c=h(t,"pnx.addata.issn",[]),u=h(t,"pnx.addata.eissn",[]);c=m(c,u);var l="https://syndetics.com/index.php?client=primo&";if(a&&a.length>0){for(var f=0;f<a.length;f++)o.push(n.createLinkObj(l+"isbn="+a[f]+"/sc.jpg"));i=!0}if(c&&c.length>0){for(var f=0;f<c.length;f++)o.push(n.createLinkObj(l+"issn="+c[f]+"/sc.jpg"));i=!0}}if(i)for(var f=0;f<o.length;f++){var p=o[f];n.imagesUtil.getImageLink(p).then(function(e){r(e)},function(){r("")})}else r("")})},e.prototype.getThumbnailFromSyndetics=function(e){var t=this;return this.$q(function(n){var r=!1,i=[];if(i=e.filter(t.getSpecificLink,"syndetics.com"),i.length>0&&(r=!0),r)for(var o=0;o<i.length;o++){var a=i[o];t.imagesUtil.getImageLink(a).then(function(e){n(e)},function(){n("")})}else n("")})},e.prototype.getThumbnailFromGoogle=function(e){var t=this;return this.$q(function(n){if(t.primoExploreFooterService.showICPLicenseFooter)n("");else{var r=e.filter(t.getSpecificLink,"books.google.com");if(angular.isDefined(r)&&r.length>0){var i=r[0].linkURL,o=i.replace("&callback=updateGBSCover","");t.$http.jsonp(o).then(function(e){var r=e.data,i=Object.keys(r);if(i.length>0){var o=r[i[0]].thumbnail_url;if(angular.isDefined(o)){var a={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:t.imagesUtil.handleLink(o)};n(a)}else n("")}else n("")})}else n("")}})},e.prototype.getThumbnailFromOther=function(e){var t=this;return this.$q(function(n){var r=e.filter(t.getAllButSpecificLink,"amazon");if(t.primoExploreFooterService.showICPLicenseFooter&&(r=r.filter(t.getAllButSpecificLink,"google.com")),r.length){for(var i=[],o=0;o<r.length;o++)i.push(t.imagesUtil.getImageLink(r[o]));t.$q.all(i.map(f.reflect)).then(function(e){var t=e.filter(function(e){return"resolved"===e.status});n(t.length?t[0].value:"")})}else n("")})},e.prototype.isAlmaD=function(e){return!!this.configurationUtil.isSuprima()&&("SP"===e.context&&"alma"===h(e,"pnx.control.sourceid")&&e.delivery.electronicServices?e.delivery.electronicServices.filter(function(e){return"DIGITAL"===e.serviceType}).length>0:e.delivery.hasD===!0)},e.prototype.createLinkObj=function(e){return{displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:e}},e.prototype.getSpecificLink=function(e){var t=this;return"string"==typeof e?e.indexOf(t)>-1:e.linkURL.indexOf(t)>-1},e.prototype.getAllButSpecificLink=function(e){var t=this;return"string"==typeof e?e.indexOf(t)===-1:e.linkURL.indexOf(t)===-1},e.prototype.isPc=function(e){return"PC"===e.context},e.prototype.isFavoriteState=function(){return!!this.$state.is(d.STATE_NAMES.FAVORITES)},e=r([a.Injectable(),o(3,a.Inject("$http")),o(4,a.Inject("$q")),o(5,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ImagesUtil&&c.ImagesUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&n||Object,"function"==typeof(y="undefined"!=typeof l.PrimoExploreFooterService&&l.PrimoExploreFooterService)&&y||Object,Object,Object,Object])],e);var t,n,y}();t.SearchResultThumbnailContainerService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=function(){function e(e,t,n,r){this.httpService=e,this.$translate=t,this.restBaseURLs=n,this.$q=r,this.ilsServices={},this.resquestInProgress={},this.primaBaseUrl=n.requestStatusMapURL,this.ilsServices={"/requestStatusMap":{path:n.requestStatusMapURL,method:"GET"},"/datesMap":{path:n.datesMapURL,method:"GET"}}}return e.prototype.getRequestStatusMap=function(){var e={};return this.makeIlsRequest("/requestStatusMap",e)},e.prototype.getDatesMap=function(e,t){var n={requestid:e,expirationDate:t};return this.makeIlsRequest("/datesMap",n)},e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e=r([a.Injectable(),o(1,a.Inject("$translate")),o(2,a.Inject("restBaseURLs")),o(3,a.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,Object,Object,Object])],e);var t}();t.ProgressBarService=c},function(e,t,n){"use strict";var r=n(70),i=n(161);t.Inject=i.makeParamDecorator(r.InjectMetadata,r.InjectMetadata.paramDecoratorForNonConstructor),t.Optional=i.makeParamDecorator(r.OptionalMetadata),t.Injectable=i.makeDecorator(r.InjectableMetadata),t.Self=i.makeParamDecorator(r.SelfMetadata),t.Host=i.makeParamDecorator(r.HostMetadata),t.SkipSelf=i.makeParamDecorator(r.SkipSelfMetadata)},function(e,t,n){"use strict";var r=function(){function e(e){this._desc=e}return Object.defineProperty(e.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Token "+this._desc},e}();t.OpaqueToken=r},function(e,t,n){"use strict";function r(e,t){return"\n      "+o.getFuncName(e)+":\n      ===========================\n      "+t+"\n    ";
}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(13),a=function(e){function t(t){void 0===t&&(t="--");var n=e.call(this,t)||this;return n.message=t,n.stack=new Error(t).stack,n}return i(t,e),t.prototype.toString=function(){return this.message},t}(Error);t.BaseException=a,t.getErrorMsg=r},function(e,t,n){"use strict";t.Type=Function},function(e,t,n){"use strict";function r(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}}function i(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,n=t.$parent;t.$$disconnected=!1,t.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=t,n.$$childTail=t):n.$$childHead=n.$$childTail=t}}var o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=n(262),c=u=function(){function e(e){this.$scope=e}return e.create=function(e){return new u(e)},e.prototype.markForCheck=function(){this.$scope.$applyAsync()},e.prototype.detach=function(){r(this.$scope)},e.prototype.detectChanges=function(){this.$scope.$digest()},e.prototype.checkNoChanges=function(){},e.prototype.reattach=function(){i(this.$scope)},e}();c=u=o([s.Injectable("changeDetectorRef"),a("design:paramtypes",[Object])],c),t.ChangeDetectorRef=c;var u},function(e,t,n){"use strict";var r=n(13),i=function(){function e(){}return e}();t.UninitializedValue=i;var o=new i,a=function(){function e(e,t){this.previousValue=e,this.currentValue=t}return e.prototype.isFirstChange=function(){return this.previousValue===o},e}();t.SimpleChange=a;var s=function(){function e(){}return e.simpleChange=function(e,t){return new a(e,t)},e.isOnPushChangeDetectionStrategy=function(e){return r.isPresent(e)&&0===e},e}();s.uninitialized=o,t.ChangeDetectionUtil=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(13),o=n(98),a=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._ngExpressionBindingCb=i.noop,n.__isAsync=t,n}return r(t,e),t.prototype.wrapNgExpBindingToEmitter=function(e){this._ngExpressionBindingCb=e},t.prototype.emit=function(t){var n={$event:t};e.prototype.next.call(this,t),this._ngExpressionBindingCb(n)},t.prototype.subscribe=function(t,n,r){var i,o=function(e){return null},a=function(){return null};return t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(o=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),e.prototype.subscribe.call(this,i,o,a)},t}(o.Subject);t.EventEmitter=a},function(e,t,n){"use strict";function r(e){return"function"==typeof e}t.isFunction=r},function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.isObject=r},function(e,t,n){"use strict";t.errorObject={e:{}}},function(e,t,n){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(71);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";t.INPUT_MODE_REGEX=/^(<|=|@)?(\??)(\w*)$/,t.BINDING_MODE=Object.freeze({oneWay:"<",twoWay:"=",output:"&",attr:"@",optional:"?"})},function(e,t,n){"use strict";function r(e){function t(t){return t.replace(n,function(t,n){return(n?e:"")+t.toLowerCase()})}var n=/[A-Z]/g;return t}var i=n(13),o=r("-"),a=r("_"),s=function(){function e(){}return e.fromCharCode=function(e){return String.fromCharCode(e)},e.charCodeAt=function(e,t){return e.charCodeAt(t)},e.split=function(e,t){return e.split(t)},e.equals=function(e,t){return e===t},e.stripLeft=function(e,t){if(e&&e.length){for(var n=0,r=0;r<e.length&&e[r]==t;r++)n++;e=e.substring(n)}return e},e.stripRight=function(e,t){if(e&&e.length){for(var n=e.length,r=e.length-1;r>=0&&e[r]==t;r--)n--;e=e.substring(0,n)}return e},e.replace=function(e,t,n){return e.replace(t,n)},e.replaceAll=function(e,t,n){return e.replace(t,n)},e.slice=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=null),e.slice(t,null===n?void 0:n)},e.replaceAllMapped=function(e,t,n){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.splice(-2,2),n(e)})},e.compare=function(e,t){return e<t?-1:e>t?1:0},e.includes=function(e,t,n){return void 0===n&&(n=0),String.prototype.includes?e.includes(t,n):e.indexOf(t,n)===n},e.startsWith=function(e,t,n){return void 0===n&&(n=0),String.prototype.startsWith?e.startsWith(t,n):e.indexOf(t,n)===n},e.endsWith=function(e,t,n){if(String.prototype.endsWith)return e.endsWith(t,n);var r=e.toString();(!i.isNumber(n)||!isFinite(n)||Math.floor(n)!==n||n>r.length)&&(n=r.length),n-=t.length;var o=r.indexOf(t,n);return o!==-1&&o===n},e.kebabCase=function(e){return o(e)},e.snakeCase=function(e){return a(e)},e}();t.StringWrapper=s},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(68))},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t){function n(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){var r=n(85),i=n(52),o=r(i,"Set");e.exports=o},function(e,t,n){var r=n(85),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){function r(e,t){return function(n,r){var c=s(n)?i:o,u=t?t():{};return c(n,e,a(r,2),u)}}var i=n(505),o=n(506),a=n(36),s=n(15);e.exports=r},function(e,t,n){var r=n(507),i=r();e.exports=i},function(e,t,n){function r(e,t){var n=a(e),r=!n&&o(e),l=!n&&!r&&s(e),p=!n&&!r&&!l&&u(e),d=n||r||l||p,h=d?i(e.length,String):[],m=h.length;for(var g in e)!t&&!f.call(e,g)||d&&("length"==g||l&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,m))||h.push(g);return h}var i=n(508),o=n(127),a=n(15),s=n(128),c=n(129),u=n(171),l=Object.prototype,f=l.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){if(!i(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(130),o=n(512),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e,t,n,r){var c=n.length,u=c,l=!r;if(null==e)return!u;for(e=Object(e);c--;){var f=n[c];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++c<u;){f=n[c];var p=f[0],d=e[p],h=f[1];if(l&&f[2]){if(void 0===d&&!(p in e))return!1}else{var m=new i;if(r)var g=r(d,h,p,e,t,m);if(!(void 0===g?o(h,d,a|s,r,m):g))return!1}}return!0}var i=n(173),o=n(215),a=1,s=2;e.exports=r},function(e,t,n){function r(e,t,n,r,u,l){var f=n&s,p=e.length,d=t.length;if(p!=d&&!(f&&d>p))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var m=-1,g=!0,y=n&c?new i:void 0;for(l.set(e,t),l.set(t,e);++m<p;){var v=e[m],b=t[m];if(r)var S=f?r(b,v,m,t,e,l):r(v,b,m,e,t,l);if(void 0!==S){if(S)continue;g=!1;break}if(y){if(!o(t,function(e,t){if(!a(y,t)&&(v===e||u(v,e,n,r,l)))return y.push(t)})){g=!1;break}}else if(v!==b&&!u(v,b,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}var i=n(164),o=n(289),a=n(169),s=1,c=2;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){var r=n(52),i=r.Uint8Array;e.exports=i},function(e,t,n){function r(e){return i(e,a,o)}var i=n(292),o=n(216),a=n(57);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}var i=n(191),o=n(15);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,i(a)]}return t}var i=n(296),o=n(57);e.exports=r},function(e,t,n){function r(e){return e===e&&!i(e)}var i=n(31);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function r(e,t,n){t=i(t,e);for(var r=-1,l=t.length,f=!1;++r<l;){var p=u(t[r]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++r!=l?f:(l=null==e?0:e.length,!!l&&c(l)&&s(p,l)&&(a(e)||o(e)))}var i=n(101),o=n(127),a=n(15),s=n(129),c=n(214),u=n(103);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var i=n(52),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,c=s?i.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.exports=r}).call(t,n(23)(e))},function(e,t,n){var r=n(191),i=n(219),o=n(216),a=n(294),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=c},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var i=n(221);e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:i(o(e))}var i=n(545),o=n(219),a=n(130);e.exports=r},function(e,t,n){function r(e,t){return e===t||i(e,t,o(t))}var i=n(287),o=n(295);e.exports=r},function(e,t,n){function r(e,t,n,r){if(!s(e))return e;t=o(t,e);for(var u=-1,l=t.length,f=l-1,p=e;null!=p&&++u<l;){var d=c(t[u]),h=n;if(u!=f){var m=p[d];h=r?r(m,d,p):void 0,void 0===h&&(h=s(m)?m:a(t[u+1])?[]:{})}i(p,d,h),p=p[d]}return e}var i=n(157),o=n(101),a=n(129),s=n(31),c=n(103);e.exports=r},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=i(e),e===o||e===-o){var t=e<0?-1:1;return t*a}return e===e?e:0}var i=n(308),o=1/0,a=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||l.test(e)?f(e.slice(2),n?2:8):c.test(e)?a:+e}var i=n(31),o=n(102),a=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&o(e,t,i)}var i=n(554),o=n(298);e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,function(e,i,o){r[++n]=t(e,i,o)}),r}var i=n(126),o=n(58);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(void 0===c?s===s&&!i(s):n(s,c)))var c=s,u=a}return u}var i=n(102);e.exports=r},function(e,t,n){function r(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),c=Array(s);++a<s;)c[a]=r[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=r[a];return u[t]=n(c),i(e,this,u)}}var i=n(559),o=Math.max;e.exports=r},function(e,t,n){var r=n(560),i=n(562),o=i(r);e.exports=o},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(62),c=function(){function e(e,t){this.$mdToast=e,this.addQueryToSavedSearchesService=t}return e.prototype.showTimeoutLogoutToast=function(){var e=this,t="<prm-timeout-toast></prm-timeout-toast>";this.$mdToast.show({hideDelay:0,position:"top right",template:t}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},e=r([a.Injectable(),o(0,a.Inject("$mdToast")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.AddQueryToSavedSearchesService&&s.AddQueryToSavedSearchesService)&&t||Object])],e);var t}();t.TimeoutToastService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(317),c=function(){function e(e){this.injector=e,this.activeFacetListTransformers=[];for(var t=a.bundle(s.ActiveFacetsTransformationsModule),n=0,r=t._invokeQueue;n<r.length;n++){var i=r[n];this.activeFacetListTransformers.push(e.get(i[2][0]))}}return e.prototype.transformActiveFacets=function(e){for(var t=0,n=this.activeFacetListTransformers;t<n.length;t++){var r=n[t];e=r.transform(e)}return e},e=r([a.Injectable(),o(0,a.Inject("$injector")),i("design:paramtypes",[Object])],e)}();t.ActiveFacetsTransformationService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(570),a=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.ActiveFacetsMergeLocationFacetsWithinSingleLibraryService],imports:[]})],e)}();t.ActiveFacetsTransformationsModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(319),l=function(){function e(e){this.injector=e,this.activeFacetListTransformers=[];for(var t=c.bundle(u.InactiveFacetsTransformationsModule),n=0,r=t._invokeQueue;n<r.length;n++){var i=r[n];this.activeFacetListTransformers.push(e.get(i[2][0]))}}return e.prototype.transformInactiveFacets=function(e){return a(this,void 0,void 0,function(){var t,n,r;return s(this,function(i){switch(i.label){case 0:t=0,n=this.activeFacetListTransformers,i.label=1;case 1:return t<n.length?(r=n[t],[4,r.transform(e)]):[3,4];case 2:e=i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},e=r([c.Injectable(),o(0,c.Inject("$injector")),i("design:paramtypes",[Object])],e)}();t.InactiveFacetsTransformationService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(571),a=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.InactiveFacetsMergeLocationFacetsWithinSingleLibraryService],imports:[]})],e)}();t.InactiveFacetsTransformationsModule=a},function(e,t,n){function r(e,t){return t=i(t,e),e=a(e,t),null==e||delete e[s(o(t))]}var i=n(101),o=n(321),a=n(573),s=n(103);e.exports=r},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){function r(e,t,n){var r=-1;t=i(t.length?t:[l],c(o));var f=a(e,function(e,n,o){var a=i(t,function(t){return t(e)});return{criteria:a,index:++r,value:e}});return s(f,function(e,t){return u(e,t,n)})}var i=n(59),o=n(36),a=n(310),s=n(575),c=n(73),u=n(576),l=n(74);e.exports=r},function(e,t,n){var r=n(59),i=n(218),o=n(320),a=n(101),s=n(75),c=n(581),u=n(582),l=n(220),f=1,p=2,d=4,h=u(function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,function(t){return t=a(t,e),u||(u=t.length>1),t}),s(e,l(e),n),u&&(n=i(n,f|p|d,c));for(var h=t.length;h--;)o(n,t[h]);return n});e.exports=h},function(e,t,n){function r(e){if(!a(e)||i(e)!=s)return!1;var t=o(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==p}var i=n(72),o=n(219),a=n(53),s="[object Object]",c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,p=l.call(Object);e.exports=r},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=n(18),s=n(3),c=n(0),u=function(){function e(){}return e.prototype.parseImagesSearchResponse=function(e){for(var t=e.docs,n=t.length,r=[],i=0;i<n;i++){var o=t[i];this.enrichItem(o),r.push(o.thumbnail)}return{images:r}},e.prototype.reverseAvailability=function(e){e.delivery&&(e.delivery.availability&&e.delivery.availability.length>1&&e.delivery.availability.reverse(),e.delivery.deliveryCategory&&e.delivery.deliveryCategory.length>1&&e.delivery.deliveryCategory.reverse(),e.delivery.availabilityLinks&&e.delivery.availabilityLinks.length>1&&e.delivery.availabilityLinks.reverse(),e.delivery.availabilityLinksUrl&&e.delivery.availabilityLinksUrl.length>1&&e.delivery.availabilityLinksUrl.reverse(),e.delivery.serviceMode&&e.delivery.serviceMode.length>1&&e.delivery.serviceMode.reverse())},e.prototype.parseSearchResponse=function(e){var t=e.docs,n=e.info,r=e.did_u_mean;a(t,this.reverseAvailability);var i;try{i=s(e,"facets",[])}catch(e){i=[]}i.forEach(function(t){t.count=t.values.length,e.searchStatus&&"domain"===t.name&&t.values.forEach(function(t){var n=e.searchStatus.filter(function(e){return e["full-name"]===t.value});n&&n.length>0&&(t.maxCount=n[0].total)})});for(var o=t?t.length:0,c=[],u=0;u<o;u++){var l=t[u];this.enrichItem(l),c.push(l)}return{lang3:e.lang3,featuredResult:e.featuredResultJson,did_u_mean:r,groups:c,info:n,facetsList:i,beaconO22:e.beaconO22}},e.prototype.removeLinksPrefix=function(e){return e||(e=""),e.replace("http://purl.org/pnx/linkType/","")},e.prototype.removePrefixFromLinks=function(e){var t;if(e.delivery&&e.delivery.link&&(t=e.delivery.link),e.link={},o.isDefined(t))for(var n=0;n<t.length;n++)e.link[this.removeLinksPrefix(t[n].linkType)]=this.removeLinksPrefix(t[n].linkURL)},e.prototype.enrichItem=function(e){this.removePrefixFromLinks(e)},e=r([c.Injectable(),i("design:paramtypes",[])],e)}();t.SearchResultParser=u},function(e,t,n){var r=n(157),i=n(75),o=n(229),a=n(58),s=n(130),c=n(57),u=Object.prototype,l=u.hasOwnProperty,f=o(function(e,t){if(s(t)||a(t))return void i(t,c(t),e);for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2),s=function(){function e(e){this.configurationUtil=e}return Object.defineProperty(e.prototype,"highlights",{get:function(){return this._highlights},set:function(e){this._highlights=e},enumerable:!0,configurable:!0}),e.prototype.updateHighlights=function(e){e&&(!this.configurationUtil.getBriefResultConfiguration().showhighlights,this.highlights=e)},e.prototype.getFieldsFromHighlightsAsArray=function(e){var t={};return t[e.field]=e.terms,t},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ConfigurationUtil&&a.ConfigurationUtil)&&t||Object])],e);var t}();t.HighlightsService=s},function(e,t,n){function r(e,t){var n={};return t=a(t,3),o(e,function(e,r,o){i(n,r,t(e,r,o))}),n}var i=n(125),o=n(213),a=n(36);e.exports=r},function(e,t,n){function r(e,t){return a(e,o(i(t)))}var i=n(36),o=n(584),a=n(427);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(17),s=n(7),c=function(){function e(e,t){this.jwtUtilService=e,this.storageUtil=t}return e.prototype.addValueToKeyInLocalForage=function(e,t){var n=this;this.storageUtil.$localForage.getItem(e).then(function(r){null==r&&(r=[]),r.unshift(t),n.storageUtil.$localForage.setItem(e,r)})},e.prototype.cleanOldItemsFromLocalForage=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user;this.storageUtil.$localForage.keys().then(function(n){var r=n.filter(function(e){return e.indexOf("SearchHistoryQeuriesKey")!==-1&&e.indexOf(t)===-1});for(var i in r)e.storageUtil.$localForage.removeItem(r[i])})},e.prototype.removeValueFromKeyInLocalForage=function(e){var t=this;this.storageUtil.$localForage.getItem(e).then(function(n){n.pop(),t.storageUtil.$localForage.setItem(e,n)})},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.JwtUtilService&&s.JwtUtilService)&&t||Object,"function"==typeof(n="undefined"!=typeof a.StorageUtil&&a.StorageUtil)&&n||Object])],e);var t,n}();t.BrowserStorageManagerService=c},function(e,t){function n(e,t){return null==e?"":i.call(e,t)}var r=Array.prototype,i=r.join;e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){var p=new l.InnerSubscriber(e,n,r);if(p.closed)return null;if(t instanceof c.Observable)return t._isScalar?(p.next(t.value),p.complete(),null):(p.syncErrorThrowable=!0,t.subscribe(p));if(o.isArrayLike(t)){for(var d=0,h=t.length;d<h&&!p.closed;d++)p.next(t[d]);p.closed||p.complete()}else{if(a.isPromise(t))return t.then(function(e){p.closed||(p.next(e),p.complete())},function(e){return p.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),p;if(t&&"function"==typeof t[u.iterator])for(var m=t[u.iterator]();;){var g=m.next();if(g.done){p.complete();break}if(p.next(g.value),p.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));p.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v=s.isObject(t)?"an invalid object":"'"+t+"'",b="You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";p.error(new TypeError(b))}}return null}var i=n(71),o=n(597),a=n(598),s=n(271),c=n(35),u=n(599),l=n(600),f=n(274);t.subscribeToResult=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(99),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(71),o=n(606),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(607),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(12),s=n(339),c=n(342),u=n(343),l=n(345),f=n(346),p=n(347),d=n(348),h=n(349),m=n(350),g=n(351),y=n(352),v=n(353),b=n(354),S=n(355),_=n(356),O=n(357),T=n(358),E=n(359),w=n(29),I=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v){this.formBuilderService=e,this.forms={HoldRequest:n,CallSlip:t,AcquisitionRequest:i,ILL:r,Recall:o,PhotocopyRequest:a,UBRequest:s,ShortLoan:c,AlmaRequest:u,AlmaDigitization:l,AlmaPurchaseRequest:f,AlmaResourceSharing:p,AlmaRequestAnyItem:d,AlmaRequestOther:h,AlmaDigitizationOther:m,AlmaItemRequest:g,AlmaItemDigitization:y,AlmaGeneralDigitization:v}}return e.prototype.getFormFields=function(e){return w(this.forms[e.type].getFields())},e.prototype.getSectionsMap=function(e){return w(this.forms[e.type].getSectionsMap())},e.prototype.getForm=function(e){return this.forms[e.type]},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.FormBuilderService&&a.FormBuilderService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.CallslipRequest&&s.CallslipRequest)&&n||Object,"function"==typeof(I="undefined"!=typeof c.HoldRequest&&c.HoldRequest)&&I||Object,"function"==typeof(R="undefined"!=typeof u.IllRequest&&u.IllRequest)&&R||Object,"function"==typeof(P="undefined"!=typeof l.AcquisitionRequest&&l.AcquisitionRequest)&&P||Object,"function"==typeof(j="undefined"!=typeof f.RecallRequest&&f.RecallRequest)&&j||Object,"function"==typeof(A="undefined"!=typeof p.PhotocopyRequest&&p.PhotocopyRequest)&&A||Object,"function"==typeof(C="undefined"!=typeof h.UBRequest&&h.UBRequest)&&C||Object,"function"==typeof($="undefined"!=typeof d.ShortLoanRequest&&d.ShortLoanRequest)&&$||Object,"function"==typeof(D="undefined"!=typeof m.AlmaRequest&&m.AlmaRequest)&&D||Object,"function"==typeof(L="undefined"!=typeof g.AlmaDigitization&&g.AlmaDigitization)&&L||Object,"function"==typeof(k="undefined"!=typeof y.AlmaPurchaseRequest&&y.AlmaPurchaseRequest)&&k||Object,"function"==typeof(M="undefined"!=typeof v.AlmaResourceSharing&&v.AlmaResourceSharing)&&M||Object,"function"==typeof(x="undefined"!=typeof b.AlmaRequestAnyItem&&b.AlmaRequestAnyItem)&&x||Object,"function"==typeof(F="undefined"!=typeof S.AlmaRequestOther&&S.AlmaRequestOther)&&F||Object,"function"==typeof(U="undefined"!=typeof _.AlmaDigitizationOther&&_.AlmaDigitizationOther)&&U||Object,"function"==typeof(B="undefined"!=typeof O.AlmaItemRequest&&O.AlmaItemRequest)&&B||Object,"function"==typeof(N="undefined"!=typeof T.AlmaItemDigitization&&T.AlmaItemDigitization)&&N||Object,"function"==typeof(q="undefined"!=typeof E.AlmaGeneralDigitization&&E.AlmaGeneralDigitization)&&q||Object])],e);
var t,n,I,R,P,j,A,C,$,D,L,k,M,x,F,U,B,N,q}();t.RequestFromService=I},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(){return Sr.apply(null,arguments)}function n(e){Sr=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function a(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return bt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=d()),e._pf}function m(e){if(null==e._isValid){var t=h(e),n=Or.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=p(NaN);return null!=e?f(h(t),e):h(t).userInvalidated=!0,t}function y(e,t){var n,r,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=h(t)),a(t._locale)||(e._locale=t._locale),Tr.length>0)for(n=0;n<Tr.length;n++)r=Tr[n],i=t[r],a(i)||(e[r]=i);return e}function v(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Er===!1&&(Er=!0,t.updateOffset(this),Er=!1)}function b(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function O(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&_(e[r])!==_(t[r]))&&a++;return a+o}function T(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,n){var r=!0;return f(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function w(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),wr[e]||(T(n),wr[e]=!0)}function I(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,n;for(n in e)t=e[n],I(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function P(e,t){var n,r=f({},e);for(n in t)l(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&i(e[n])&&(r[n]=f({},r[n]));return r}function j(e){null!=e&&this.set(e)}function A(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return I(r)?r.call(t,n):r}function C(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function $(){return this._invalidDate}function D(e){return this._ordinal.replace("%d",e)}function L(e,t,n,r){var i=this._relativeTime[n];return I(i)?i(e,t,n,r):i.replace(/%d/i,e)}function k(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)}function M(e,t){var n=e.toLowerCase();kr[n]=kr[n+"s"]=kr[t]=e}function x(e){return"string"==typeof e?kr[e]||kr[e.toLowerCase()]:void 0}function F(e){var t,n,r={};for(n in e)l(e,n)&&(t=x(n),t&&(r[t]=e[n]));return r}function U(e,t){Mr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Mr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function N(e,n){return function(r){return null!=r?(H(this,e,r),t.updateOffset(this,n),this):q(this,e)}}function q(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function H(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function V(e){return e=x(e),I(this[e])?this[e]():this}function Y(e,t){if("object"==typeof e){e=F(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=x(e),I(this[e]))return this[e](t);return this}function z(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function G(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Br[e]=i),t&&(Br[t[0]]=function(){return z(i.apply(this,arguments),t[1],t[2])}),n&&(Br[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Q(e){var t,n,r=e.match(xr);for(t=0,n=r.length;t<n;t++)Br[r[t]]?r[t]=Br[r[t]]:r[t]=W(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=I(r[i])?r[i].call(t,e):r[i];return o}}function J(e,t){return e.isValid()?(t=K(t,e.localeData()),Ur[t]=Ur[t]||Q(t),Ur[t](e)):e.localeData().invalidDate()}function K(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Fr.lastIndex=0;r>=0&&Fr.test(e);)e=e.replace(Fr,n),Fr.lastIndex=0,r-=1;return e}function X(e,t,n){ii[e]=I(t)?t:function(e,r){return e&&n?n:t}}function Z(e,t){return l(ii,e)?ii[e](t._strict,t._locale):new RegExp(ee(e))}function ee(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)oi[e[n]]=r}function re(e,t){ne(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function ie(e,t,n){null!=t&&l(oi,e)&&oi[e](t,n._a,n,e)}function oe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||gi).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function se(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[gi.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ce(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=mi.call(this._shortMonthsParse,a),i!==-1?i:null):(i=mi.call(this._longMonthsParse,a),i!==-1?i:null):"MMM"===t?(i=mi.call(this._shortMonthsParse,a),i!==-1?i:(i=mi.call(this._longMonthsParse,a),i!==-1?i:null)):(i=mi.call(this._longMonthsParse,a),i!==-1?i:(i=mi.call(this._shortMonthsParse,a),i!==-1?i:null))}function ue(e,t,n){var r,i,o;if(this._monthsParseExact)return ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function le(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function fe(e){return null!=e?(le(this,e),t.updateOffset(this,!0),this):q(this,"Month")}function pe(){return oe(this.year(),this.month())}function de(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=bi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function me(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=te(r[t]),i[t]=te(i[t]);for(t=0;t<24;t++)o[t]=te(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ge(e){return ye(e)?366:365}function ye(e){return e%4===0&&e%100!==0||e%400===0}function ve(){return ye(this.year())}function be(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function Se(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function _e(e,t,n){var r=7+t-n,i=(7+Se(e,0,r).getUTCDay()-t)%7;return-i+r-1}function Oe(e,t,n,r,i){var o,a,s=(7+n-r)%7,c=_e(e,r,i),u=1+7*(t-1)+s+c;return u<=0?(o=e-1,a=ge(o)+u):u>ge(e)?(o=e+1,a=u-ge(e)):(o=e,a=u),{year:o,dayOfYear:a}}function Te(e,t,n){var r,i,o=_e(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+Ee(i,t,n)):a>Ee(e.year(),t,n)?(r=a-Ee(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ee(e,t,n){var r=_e(e,t,n),i=_e(e+1,t,n);return(ge(e)-r+i)/7}function we(e){return Te(e,this._week.dow,this._week.doy).week}function Ie(){return this._week.dow}function Re(){return this._week.doy}function Pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function je(e){var t=Te(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ae(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ce(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function $e(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function De(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Le(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function ke(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=mi.call(this._weekdaysParse,a),i!==-1?i:null):"ddd"===t?(i=mi.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=mi.call(this._minWeekdaysParse,a),i!==-1?i:null):"dddd"===t?(i=mi.call(this._weekdaysParse,a),i!==-1?i:(i=mi.call(this._shortWeekdaysParse,a),i!==-1?i:(i=mi.call(this._minWeekdaysParse,a),i!==-1?i:null))):"ddd"===t?(i=mi.call(this._shortWeekdaysParse,a),i!==-1?i:(i=mi.call(this._weekdaysParse,a),i!==-1?i:(i=mi.call(this._minWeekdaysParse,a),i!==-1?i:null))):(i=mi.call(this._minWeekdaysParse,a),i!==-1?i:(i=mi.call(this._weekdaysParse,a),i!==-1?i:(i=mi.call(this._shortWeekdaysParse,a),i!==-1?i:null)))}function Me(e,t,n){var r,i,o;if(this._weekdaysParseExact)return ke.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function xe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ae(e,this.localeData()),this.add(e-t,"d")):t}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ue(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ce(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ii),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ne(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ri),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function He(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],c=[],u=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),c.push(o),u.push(r),u.push(i),u.push(o);for(a.sort(e),s.sort(e),c.sort(e),u.sort(e),t=0;t<7;t++)s[t]=te(s[t]),c[t]=te(c[t]),u[t]=te(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ve(){return this.hours()%12||12}function Ye(){return this.hours()||24}function ze(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function We(e){return"p"===(e+"").toLowerCase().charAt(0)}function Qe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Ke(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Je(e[o]).split("-"),t=i.length,n=Je(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=Xe(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&O(i,n,!0)>=t-1)break;t--}o++}return null}function Xe(t){var n=null;if(!Di[t]&&"undefined"!=typeof e&&e&&e.exports)try{n=ji._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Ze(n)}catch(e){}return Di[t]}function Ze(e,t){var n;return e&&(n=a(t)?nt(e):et(e,t),n&&(ji=n)),ji._abbr}function et(e,t){if(null!==t){var n=$i;if(t.abbr=e,null!=Di[e])w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Di[e]._config;else if(null!=t.parentLocale){if(null==Di[t.parentLocale])return Li[t.parentLocale]||(Li[t.parentLocale]=[]),Li[t.parentLocale].push({name:e,config:t}),null;n=Di[t.parentLocale]._config}return Di[e]=new j(P(n,t)),Li[e]&&Li[e].forEach(function(e){et(e.name,e.config)}),Ze(e),Di[e]}return delete Di[e],null}function tt(e,t){if(null!=t){var n,r=$i;null!=Di[e]&&(r=Di[e]._config),t=P(r,t),n=new j(t),n.parentLocale=Di[e],Di[e]=n,Ze(e)}else null!=Di[e]&&(null!=Di[e].parentLocale?Di[e]=Di[e].parentLocale:null!=Di[e]&&delete Di[e]);return Di[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ji;if(!r(e)){if(t=Xe(e))return t;e=[e]}return Ke(e)}function rt(){return Pr(Di)}function it(e){var t,n=e._a;return n&&h(e).overflow===-2&&(t=n[si]<0||n[si]>11?si:n[ci]<1||n[ci]>oe(n[ai],n[si])?ci:n[ui]<0||n[ui]>24||24===n[ui]&&(0!==n[li]||0!==n[fi]||0!==n[pi])?ui:n[li]<0||n[li]>59?li:n[fi]<0||n[fi]>59?fi:n[pi]<0||n[pi]>999?pi:-1,h(e)._overflowDayOfYear&&(t<ai||t>ci)&&(t=ci),h(e)._overflowWeeks&&t===-1&&(t=di),h(e)._overflowWeekday&&t===-1&&(t=hi),h(e).overflow=t),e}function ot(e){var t,n,r,i,o,a,s=e._i,c=ki.exec(s)||Mi.exec(s);if(c){for(h(e).iso=!0,t=0,n=Fi.length;t<n;t++)if(Fi[t][1].exec(c[1])){i=Fi[t][0],r=Fi[t][2]!==!1;break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=Ui.length;t<n;t++)if(Ui[t][1].exec(c[3])){o=(c[2]||" ")+Ui[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(c[4]){if(!xi.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),pt(e)}else e._isValid=!1}function at(e){var t,n,r,i,o,a,s,c,u={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},l="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Ni.exec(t)){if(r=n[1]?"ddd"+(5===n[1].length?", ":" "):"",i="D MMM "+(n[2].length>10?"YYYY ":"YY "),o="HH:mm"+(n[4]?":ss":""),n[1]){var f=new Date(n[2]),p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f.getDay()];if(n[1].substr(0,3)!==p)return h(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===c?s=" +0000":(c=l.indexOf(n[5][1].toUpperCase())-12,s=(c<0?" -":" +")+(""+c).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:s=u[n[5]];break;default:s=u[" GMT"]}n[5]=s,e._i=n.splice(1).join(""),a=" ZZ",e._f=r+i+o+a,pt(e),h(e).rfc2822=!0}else e._isValid=!1}function st(e){var n=Bi.exec(e._i);return null!==n?void(e._d=new Date((+n[1]))):(ot(e),void(e._isValid===!1&&(delete e._isValid,at(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e)))))}function ct(e,t,n){return null!=e?e:null!=t?t:n}function ut(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,r,i,o=[];if(!e._d){for(r=ut(e),e._w&&null==e._a[ci]&&null==e._a[si]&&ft(e),null!=e._dayOfYear&&(i=ct(e._a[ai],r[ai]),(e._dayOfYear>ge(i)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=Se(i,0,e._dayOfYear),e._a[si]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ui]&&0===e._a[li]&&0===e._a[fi]&&0===e._a[pi]&&(e._nextDay=!0,e._a[ui]=0),e._d=(e._useUTC?Se:be).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ui]=24)}}function ft(e){var t,n,r,i,o,a,s,c;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=ct(t.GG,e._a[ai],Te(St(),1,4).year),r=ct(t.W,1),i=ct(t.E,1),(i<1||i>7)&&(c=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var u=Te(St(),o,a);n=ct(t.gg,e._a[ai],u.year),r=ct(t.w,u.week),null!=t.d?(i=t.d,(i<0||i>6)&&(c=!0)):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o}r<1||r>Ee(n,o,a)?h(e)._overflowWeeks=!0:null!=c?h(e)._overflowWeekday=!0:(s=Oe(n,r,i,o,a),e._a[ai]=s.year,e._dayOfYear=s.dayOfYear)}function pt(e){if(e._f===t.ISO_8601)return void ot(e);if(e._f===t.RFC_2822)return void at(e);e._a=[],h(e).empty=!0;var n,r,i,o,a,s=""+e._i,c=s.length,u=0;for(i=K(e._f,e._locale).match(xr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(Z(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&h(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),Br[o]?(r?h(e).empty=!1:h(e).unusedTokens.push(o),ie(o,r,e)):e._strict&&!r&&h(e).unusedTokens.push(o);h(e).charsLeftOver=c-u,s.length>0&&h(e).unusedInput.push(s),e._a[ui]<=12&&h(e).bigHour===!0&&e._a[ui]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[ui]=dt(e._locale,e._a[ui],e._meridiem),lt(e),it(e)}function dt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ht(e){var t,n,r,i,o;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],pt(t),m(t)&&(o+=h(t).charsLeftOver,o+=10*h(t).unusedTokens.length,h(t).score=o,(null==r||o<r)&&(r=o,n=t));f(e,n||t)}function mt(e){if(!e._d){var t=F(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function gt(e){var t=new v(it(yt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function yt(e){var t=e._i,n=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new v(it(t)):(c(t)?e._d=t:r(n)?ht(e):n?pt(e):vt(e),m(e)||(e._d=null),e))}function vt(e){var n=e._i;a(n)?e._d=new Date(t.now()):c(n)?e._d=new Date(n.valueOf()):"string"==typeof n?st(e):r(n)?(e._a=u(n.slice(0),function(e){return parseInt(e,10)}),lt(e)):i(n)?mt(e):s(n)?e._d=new Date(n):t.createFromInputFallback(e)}function bt(e,t,n,a,s){var c={};return n!==!0&&n!==!1||(a=n,n=void 0),(i(e)&&o(e)||r(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=n,c._i=e,c._f=t,c._strict=a,gt(c)}function St(e,t,n,r){return bt(e,t,n,r,!1)}function _t(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return St();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function Ot(){var e=[].slice.call(arguments,0);return _t("isBefore",e)}function Tt(){var e=[].slice.call(arguments,0);return _t("isAfter",e)}function Et(e){for(var t in e)if(Yi.indexOf(t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Yi.length;++r)if(e[Yi[r]]){if(n)return!1;parseFloat(e[Yi[r]])!==_(e[Yi[r]])&&(n=!0)}return!0}function wt(){return this._isValid}function It(){return Yt(NaN)}function Rt(e){var t=F(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,c=t.minute||0,u=t.second||0,l=t.millisecond||0;this._isValid=Et(t),this._milliseconds=+l+1e3*u+6e4*c+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function Pt(e){return e instanceof Rt}function jt(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function At(e,t){G(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+z(~~(e/60),2)+t+z(~~e%60,2)})}function Ct(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(zi)||["-",0,0],o=+(60*i[1])+_(i[2]);return 0===o?0:"+"===i[0]?o:-o}function $t(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(b(e)||c(e)?e.valueOf():St(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):St(e).local()}function Dt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Lt(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=Ct(ti,e),null===e)return this}else Math.abs(e)<16&&!r&&(e=60*e);return!this._isUTC&&n&&(i=Dt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?Jt(this,Yt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Dt(this)}function kt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Mt(e){return this.utcOffset(0,e)}function xt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dt(this),"m")),this}function Ft(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ct(ei,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ut(e){return!!this.isValid()&&(e=e?St(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Bt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Nt(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),e=yt(e),e._a){var t=e._isUTC?p(e._a):St(e._a);this._isDSTShifted=this.isValid()&&O(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qt(){return!!this.isValid()&&!this._isUTC}function Ht(){return!!this.isValid()&&this._isUTC}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Yt(e,t){var n,r,i,o=e,a=null;return Pt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(o={},t?o[t]=e:o.milliseconds=e):(a=Gi.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:_(a[ci])*n,h:_(a[ui])*n,m:_(a[li])*n,s:_(a[fi])*n,ms:_(jt(1e3*a[pi]))*n}):(a=Wi.exec(e))?(n="-"===a[1]?-1:1,o={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Wt(St(o.from),St(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Rt(o),Pt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Gt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Wt(e,t){var n;return e.isValid()&&t.isValid()?(t=$t(t,e),e.isBefore(t)?n=Gt(e,t):(n=Gt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Qt(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(w(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Yt(n,r),Jt(this,i,e),this}}function Jt(e,n,r,i){var o=n._milliseconds,a=jt(n._days),s=jt(n._months);e.isValid()&&(i=null==i||i,o&&e._d.setTime(e._d.valueOf()+o*r),a&&H(e,"Date",q(e,"Date")+a*r),s&&le(e,q(e,"Month")+s*r),i&&t.updateOffset(e,a||s))}function Kt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Xt(e,n){var r=e||St(),i=$t(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(I(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,St(r)))}function Zt(){return new v(this)}function en(e,t){var n=b(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&(t=x(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function tn(e,t){var n=b(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&(t=x(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function nn(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function rn(e,t){var n,r=b(e)?e:St(e);return!(!this.isValid()||!r.isValid())&&(t=x(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function on(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function an(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sn(e,t,n){var r,i,o,a;return this.isValid()?(r=$t(e,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),t=x(t),"year"===t||"month"===t||"quarter"===t?(a=cn(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),n?a:S(a)):NaN):NaN}function cn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function un(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(Date.prototype.toISOString)?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+r+i+o)}function pn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=J(this,e);return this.localeData().postformat(n)}function dn(e,t){return this.isValid()&&(b(e)&&e.isValid()||St(e).isValid())?Yt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hn(e){return this.from(St(),e)}function mn(e,t){return this.isValid()&&(b(e)&&e.isValid()||St(e).isValid())?Yt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gn(e){return this.to(St(),e)}function yn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function vn(){return this._locale}function bn(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Sn(e){return e=x(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function _n(){return this._d.valueOf()-6e4*(this._offset||0)}function On(){return Math.floor(this.valueOf()/1e3)}function Tn(){return new Date(this.valueOf())}function En(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function In(){return this.isValid()?this.toISOString():null;
}function Rn(){return m(this)}function Pn(){return f({},h(this))}function jn(){return h(this).overflow}function An(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Cn(e,t){G(0,[e,e.length],0,t)}function $n(e){return Mn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Dn(e){return Mn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ln(){return Ee(this.year(),1,4)}function kn(){var e=this.localeData()._week;return Ee(this.year(),e.dow,e.doy)}function Mn(e,t,n,r,i){var o;return null==e?Te(this,r,i).year:(o=Ee(e,r,i),t>o&&(t=o),xn.call(this,e,t,n,r,i))}function xn(e,t,n,r,i){var o=Oe(e,t,n,r,i),a=Se(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Fn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Un(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Bn(e,t){t[pi]=_(1e3*("0."+e))}function Nn(){return this._isUTC?"UTC":""}function qn(){return this._isUTC?"Coordinated Universal Time":""}function Hn(e){return St(1e3*e)}function Vn(){return St.apply(null,arguments).parseZone()}function Yn(e){return e}function zn(e,t,n,r){var i=nt(),o=p().set(r,t);return i[n](o,e)}function Gn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return zn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=zn(e,r,n,"month");return i}function Wn(e,t,n,r){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=n)return zn(t,(n+o)%7,r,"day");var a,c=[];for(a=0;a<7;a++)c[a]=zn(t,(a+o)%7,r,"day");return c}function Qn(e,t){return Gn(e,t,"months")}function Jn(e,t){return Gn(e,t,"monthsShort")}function Kn(e,t,n){return Wn(e,t,n,"weekdays")}function Xn(e,t,n){return Wn(e,t,n,"weekdaysShort")}function Zn(e,t,n){return Wn(e,t,n,"weekdaysMin")}function er(){var e=this._data;return this._milliseconds=oo(this._milliseconds),this._days=oo(this._days),this._months=oo(this._months),e.milliseconds=oo(e.milliseconds),e.seconds=oo(e.seconds),e.minutes=oo(e.minutes),e.hours=oo(e.hours),e.months=oo(e.months),e.years=oo(e.years),this}function tr(e,t,n,r){var i=Yt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function nr(e,t){return tr(this,e,t,1)}function rr(e,t){return tr(this,e,t,-1)}function ir(e){return e<0?Math.floor(e):Math.ceil(e)}function or(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*ir(sr(s)+a),a=0,s=0),c.milliseconds=o%1e3,e=S(o/1e3),c.seconds=e%60,t=S(e/60),c.minutes=t%60,n=S(t/60),c.hours=n%24,a+=S(n/24),i=S(ar(a)),s+=i,a-=ir(sr(i)),r=S(s/12),s%=12,c.days=a,c.months=s,c.years=r,this}function ar(e){return 4800*e/146097}function sr(e){return 146097*e/4800}function cr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=x(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+ar(t),"month"===e?n:n/12;switch(t=this._days+Math.round(sr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ur(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN}function lr(e){return function(){return this.as(e)}}function fr(e){return e=x(e),this.isValid()?this[e+"s"]():NaN}function pr(e){return function(){return this.isValid()?this._data[e]:NaN}}function dr(){return S(this.days()/7)}function hr(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function mr(e,t,n){var r=Yt(e).abs(),i=Oo(r.as("s")),o=Oo(r.as("m")),a=Oo(r.as("h")),s=Oo(r.as("d")),c=Oo(r.as("M")),u=Oo(r.as("y")),l=i<=To.ss&&["s",i]||i<To.s&&["ss",i]||o<=1&&["m"]||o<To.m&&["mm",o]||a<=1&&["h"]||a<To.h&&["hh",a]||s<=1&&["d"]||s<To.d&&["dd",s]||c<=1&&["M"]||c<To.M&&["MM",c]||u<=1&&["y"]||["yy",u];return l[2]=t,l[3]=+e>0,l[4]=n,hr.apply(null,l)}function gr(e){return void 0===e?Oo:"function"==typeof e&&(Oo=e,!0)}function yr(e,t){return void 0!==To[e]&&(void 0===t?To[e]:(To[e]=t,"s"===e&&(To.ss=t-1),!0))}function vr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=mr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function br(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Eo(this._milliseconds)/1e3,i=Eo(this._days),o=Eo(this._months);e=S(r/60),t=S(e/60),r%=60,e%=60,n=S(o/12),o%=12;var a=n,s=o,c=i,u=t,l=e,f=r,p=this.asSeconds();return p?(p<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(c?c+"D":"")+(u||l||f?"T":"")+(u?u+"H":"")+(l?l+"M":"")+(f?f+"S":""):"P0D"}var Sr,_r;_r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Or=_r,Tr=t.momentProperties=[],Er=!1,wr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Ir;Ir=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Rr,Pr=Ir,jr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ar={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Cr="Invalid date",$r="%d",Dr=/\d{1,2}/,Lr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},kr={},Mr={},xr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Fr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ur={},Br={},Nr=/\d/,qr=/\d\d/,Hr=/\d{3}/,Vr=/\d{4}/,Yr=/[+-]?\d{6}/,zr=/\d\d?/,Gr=/\d\d\d\d?/,Wr=/\d\d\d\d\d\d?/,Qr=/\d{1,3}/,Jr=/\d{1,4}/,Kr=/[+-]?\d{1,6}/,Xr=/\d+/,Zr=/[+-]?\d+/,ei=/Z|[+-]\d\d:?\d\d/gi,ti=/Z|[+-]\d\d(?::?\d\d)?/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ri=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ii={},oi={},ai=0,si=1,ci=2,ui=3,li=4,fi=5,pi=6,di=7,hi=8;Rr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var mi=Rr;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),M("month","M"),U("month",8),X("M",zr),X("MM",zr,qr),X("MMM",function(e,t){return t.monthsShortRegex(e)}),X("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[si]=_(e)-1}),ne(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[si]=i:h(n).invalidMonth=e});var gi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),bi=ri,Si=ri;G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),M("year","y"),U("year",1),X("Y",Zr),X("YY",zr,qr),X("YYYY",Jr,Vr),X("YYYYY",Kr,Yr),X("YYYYYY",Kr,Yr),ne(["YYYYY","YYYYYY"],ai),ne("YYYY",function(e,n){n[ai]=2===e.length?t.parseTwoDigitYear(e):_(e)}),ne("YY",function(e,n){n[ai]=t.parseTwoDigitYear(e)}),ne("Y",function(e,t){t[ai]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var _i=N("FullYear",!0);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),U("week",5),U("isoWeek",5),X("w",zr),X("ww",zr,qr),X("W",zr),X("WW",zr,qr),re(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=_(e)});var Oi={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),X("d",zr),X("e",zr),X("E",zr),X("dd",function(e,t){return t.weekdaysMinRegex(e)}),X("ddd",function(e,t){return t.weekdaysShortRegex(e)}),X("dddd",function(e,t){return t.weekdaysRegex(e)}),re(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:h(n).invalidWeekday=e}),re(["d","e","E"],function(e,t,n,r){t[r]=_(e)});var Ti="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ei="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ii=ri,Ri=ri,Pi=ri;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,Ve),G("k",["kk",2],0,Ye),G("hmm",0,0,function(){return""+Ve.apply(this)+z(this.minutes(),2)}),G("hmmss",0,0,function(){return""+Ve.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),ze("a",!0),ze("A",!1),M("hour","h"),U("hour",13),X("a",Ge),X("A",Ge),X("H",zr),X("h",zr),X("k",zr),X("HH",zr,qr),X("hh",zr,qr),X("kk",zr,qr),X("hmm",Gr),X("hmmss",Wr),X("Hmm",Gr),X("Hmmss",Wr),ne(["H","HH"],ui),ne(["k","kk"],function(e,t,n){var r=_(e);t[ui]=24===r?0:r}),ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ne(["h","hh"],function(e,t,n){t[ui]=_(e),h(n).bigHour=!0}),ne("hmm",function(e,t,n){var r=e.length-2;t[ui]=_(e.substr(0,r)),t[li]=_(e.substr(r)),h(n).bigHour=!0}),ne("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ui]=_(e.substr(0,r)),t[li]=_(e.substr(r,2)),t[fi]=_(e.substr(i)),h(n).bigHour=!0}),ne("Hmm",function(e,t,n){var r=e.length-2;t[ui]=_(e.substr(0,r)),t[li]=_(e.substr(r))}),ne("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ui]=_(e.substr(0,r)),t[li]=_(e.substr(r,2)),t[fi]=_(e.substr(i))});var ji,Ai=/[ap]\.?m?\.?/i,Ci=N("Hours",!0),$i={calendar:jr,longDateFormat:Ar,invalidDate:Cr,ordinal:$r,dayOfMonthOrdinalParse:Dr,relativeTime:Lr,months:yi,monthsShort:vi,week:Oi,weekdays:Ti,weekdaysMin:wi,weekdaysShort:Ei,meridiemParse:Ai},Di={},Li={},ki=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xi=/Z|[+-]\d\d(?::?\d\d)?/,Fi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bi=/^\/?Date\((\-?\d+)/i,Ni=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var qi=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),Hi=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}),Vi=function(){return Date.now?Date.now():+new Date},Yi=["year","quarter","month","week","day","hour","minute","second","millisecond"];At("Z",":"),At("ZZ",""),X("Z",ti),X("ZZ",ti),ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ct(ti,e)});var zi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Gi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Wi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Yt.fn=Rt.prototype,Yt.invalid=It;var Qi=Qt(1,"add"),Ji=Qt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ki=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Cn("gggg","weekYear"),Cn("ggggg","weekYear"),Cn("GGGG","isoWeekYear"),Cn("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),X("G",Zr),X("g",Zr),X("GG",zr,qr),X("gg",zr,qr),X("GGGG",Jr,Vr),X("gggg",Jr,Vr),X("GGGGG",Kr,Yr),X("ggggg",Kr,Yr),re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=_(e)}),re(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),M("quarter","Q"),U("quarter",7),X("Q",Nr),ne("Q",function(e,t){t[si]=3*(_(e)-1)}),G("D",["DD",2],"Do","date"),M("date","D"),U("date",9),X("D",zr),X("DD",zr,qr),X("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ne(["D","DD"],ci),ne("Do",function(e,t){t[ci]=_(e.match(zr)[0],10)});var Xi=N("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),U("dayOfYear",4),X("DDD",Qr),X("DDDD",Hr),ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),G("m",["mm",2],0,"minute"),M("minute","m"),U("minute",14),X("m",zr),X("mm",zr,qr),ne(["m","mm"],li);var Zi=N("Minutes",!1);G("s",["ss",2],0,"second"),M("second","s"),U("second",15),X("s",zr),X("ss",zr,qr),ne(["s","ss"],fi);var eo=N("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),M("millisecond","ms"),U("millisecond",16),X("S",Qr,Nr),X("SS",Qr,qr),X("SSS",Qr,Hr);var to;for(to="SSSS";to.length<=9;to+="S")X(to,Xr);for(to="S";to.length<=9;to+="S")ne(to,Bn);var no=N("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var ro=v.prototype;ro.add=Qi,ro.calendar=Xt,ro.clone=Zt,ro.diff=sn,ro.endOf=Sn,ro.format=pn,ro.from=dn,ro.fromNow=hn,ro.to=mn,ro.toNow=gn,ro.get=V,ro.invalidAt=jn,ro.isAfter=en,ro.isBefore=tn,ro.isBetween=nn,ro.isSame=rn,ro.isSameOrAfter=on,ro.isSameOrBefore=an,ro.isValid=Rn,ro.lang=Ki,ro.locale=yn,ro.localeData=vn,ro.max=Hi,ro.min=qi,ro.parsingFlags=Pn,ro.set=Y,ro.startOf=bn,ro.subtract=Ji,ro.toArray=En,ro.toObject=wn,ro.toDate=Tn,ro.toISOString=ln,ro.inspect=fn,ro.toJSON=In,ro.toString=un,ro.unix=On,ro.valueOf=_n,ro.creationData=An,ro.year=_i,ro.isLeapYear=ve,ro.weekYear=$n,ro.isoWeekYear=Dn,ro.quarter=ro.quarters=Fn,ro.month=fe,ro.daysInMonth=pe,ro.week=ro.weeks=Pe,ro.isoWeek=ro.isoWeeks=je,ro.weeksInYear=kn,ro.isoWeeksInYear=Ln,ro.date=Xi,ro.day=ro.days=xe,ro.weekday=Fe,ro.isoWeekday=Ue,ro.dayOfYear=Un,ro.hour=ro.hours=Ci,ro.minute=ro.minutes=Zi,ro.second=ro.seconds=eo,ro.millisecond=ro.milliseconds=no,ro.utcOffset=Lt,ro.utc=Mt,ro.local=xt,ro.parseZone=Ft,ro.hasAlignedHourOffset=Ut,ro.isDST=Bt,ro.isLocal=qt,ro.isUtcOffset=Ht,ro.isUtc=Vt,ro.isUTC=Vt,ro.zoneAbbr=Nn,ro.zoneName=qn,ro.dates=E("dates accessor is deprecated. Use date instead.",Xi),ro.months=E("months accessor is deprecated. Use month instead",fe),ro.years=E("years accessor is deprecated. Use year instead",_i),ro.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",kt),ro.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Nt);var io=j.prototype;io.calendar=A,io.longDateFormat=C,io.invalidDate=$,io.ordinal=D,io.preparse=Yn,io.postformat=Yn,io.relativeTime=L,io.pastFuture=k,io.set=R,io.months=ae,io.monthsShort=se,io.monthsParse=ue,io.monthsRegex=he,io.monthsShortRegex=de,io.week=we,io.firstDayOfYear=Re,io.firstDayOfWeek=Ie,io.weekdays=$e,io.weekdaysMin=Le,io.weekdaysShort=De,io.weekdaysParse=Me,io.weekdaysRegex=Be,io.weekdaysShortRegex=Ne,io.weekdaysMinRegex=qe,io.isPM=We,io.meridiem=Qe,Ze("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),t.lang=E("moment.lang is deprecated. Use moment.locale instead.",Ze),t.langData=E("moment.langData is deprecated. Use moment.localeData instead.",nt);var oo=Math.abs,ao=lr("ms"),so=lr("s"),co=lr("m"),uo=lr("h"),lo=lr("d"),fo=lr("w"),po=lr("M"),ho=lr("y"),mo=pr("milliseconds"),go=pr("seconds"),yo=pr("minutes"),vo=pr("hours"),bo=pr("days"),So=pr("months"),_o=pr("years"),Oo=Math.round,To={ss:44,s:45,m:45,h:22,d:26,M:11},Eo=Math.abs,wo=Rt.prototype;return wo.isValid=wt,wo.abs=er,wo.add=nr,wo.subtract=rr,wo.as=cr,wo.asMilliseconds=ao,wo.asSeconds=so,wo.asMinutes=co,wo.asHours=uo,wo.asDays=lo,wo.asWeeks=fo,wo.asMonths=po,wo.asYears=ho,wo.valueOf=ur,wo._bubble=or,wo.get=fr,wo.milliseconds=mo,wo.seconds=go,wo.minutes=yo,wo.hours=vo,wo.days=bo,wo.weeks=dr,wo.months=So,wo.years=_o,wo.humanize=vr,wo.toISOString=br,wo.toString=br,wo.toJSON=br,wo.locale=yn,wo.localeData=vn,wo.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",br),wo.lang=Ki,G("X",0,0,"unix"),G("x",0,0,"valueOf"),X("x",Zr),X("X",ni),ne("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,n){n._d=new Date(_(e))}),t.version="2.18.1",n(St),t.fn=ro,t.min=Ot,t.max=Tt,t.now=Vi,t.utc=p,t.unix=Hn,t.months=Qn,t.isDate=c,t.locale=Ze,t.invalid=g,t.duration=Yt,t.isMoment=b,t.weekdays=Kn,t.parseZone=Vn,t.localeData=nt,t.isDuration=Pt,t.monthsShort=Jn,t.weekdaysMin=Zn,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=Xn,t.normalizeUnits=x,t.relativeTimeRounding=gr,t.relativeTimeThreshold=yr,t.calendarFormat=Kt,t.prototype=ro,t})}).call(t,n(23)(e))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"select-or-describe",name:"select-or-describe",label:"",dependOn:{ilsFields:{group1:["request-option"],group2:["reqinput1","reqinput2","reqinput3"]}},value:"select-item",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"callslip.dropdown.select.item",value:"select-item"},{label:"callsllip.describe.item",value:"describe-item"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"request-option",name:"request-option",path:"request-option",label:"callslip.dropdown.select.item",mandatory:!0,dependOn:{key:"select-or-describe",value:"select-item"},existingPath:"describe-item/optionid",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription"}}},{key:"reqinput1",name:"reqinput1",label:"callslip.describe.item_1",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput1",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"reqinput2",name:"reqinput2",label:"callslip.describe.item_2",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput2",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,path:"describe-item"},{key:"reqinput3",name:"reqinput3",label:"callslip.describe.item_3",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput3",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,path:"describe-item"},{key:"locations",name:"pickup_location",label:"callslip.pickup_location",path:"ordered-locations",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"hold.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"patron_note_1",name:"patron_note_1",label:"hold.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"group_id",name:"group_id",label:"group_id",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"hold.ils_db_code",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"holdingrec_id",name:"holdingrec_id",path:"chosen-parameters-map/holdingrec_id",label:"NOT RELEVANT",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.CallslipRequest=u},function(e,t,n){function r(e,t,n){return n&&"number"!=typeof n&&s(e,t,n)&&(t=n=void 0),(n=void 0===n?f:n>>>0)?(e=l(e),e&&("string"==typeof t||null!=t&&!c(t))&&(t=i(t),!t&&a(e))?o(u(e),0,n):e.split(t,n)):[]}var i=n(133),o=n(198),a=n(158),s=n(87),c=n(341),u=n(199),l=n(61),f=4294967295;e.exports=r},function(e,t,n){var r=n(623),i=n(73),o=n(172),a=o&&o.isRegExp,s=a?i(a):r;e.exports=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"year",name:"year",path:"groups-list-map/year",label:"hold.year",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"volume",name:"volume",path:"groups-list-map/volume",label:"hold.volume",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_description",name:"item-description",path:"groups-list-map/item-description",label:"hold.item_description",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"secondary_location_name",name:"secondary-location-name",path:"groups-list-map/secondary-location-name",label:"hold.secondary_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"main_location_name",name:"main-location-name",path:"groups-list-map/main-location-name",label:"hold.main_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_category_name",name:"item-category",path:"groups-list-map/item-category",label:"hold.item_category",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_status_name",name:"item-status",path:"groups-list-map/item-status",label:"hold.item_status",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_material",name:"item-material",path:"groups-list-map/item-material",label:"hold.item_material",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"option_description",name:"option-description",path:"groups-list-map/option-description",label:"hold.option_description",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_locations",name:"pickup_location",path:"groups-list-map/pickup_locations",label:"hold.pickup_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"group_id",name:"group_id",label:"group_id",path:"groups-list-map/group-id",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","pickup_location","option-description"]
}}},{key:"request-option",name:"item_id",path:"request-option",label:"hold.dropdown.select.item",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"locations",name:"pickup_location",label:"hold.pickup_location",path:"ordered-locations",mandatory:!0,value:"",duplicateOf:"pickup_location",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"hold.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"request_author",name:"request_author",label:"hold.request_author",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"hold.request_title",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"hold.request_pages",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"hold.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_2",name:"patron_note_2",label:"hold.patron_note_2",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"rush_request",name:"rush_request",label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"hold.rush_request",value:"Y"}]},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"hold.ils_db_code",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-description",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-category",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},duplicateOf:"item-status",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.HoldRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=n(344),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"allowed_media",name:"allowed_media",label:"illrequest.label.allowed_media",path:"allowed-media",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"service_level",name:"service_level",label:"illrequest.label.service_level",path:"service-level",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST,key:"key",value:"value"}}},{key:"delivery_method",name:"delivery_method",label:"illrequest.label.delivery_method",path:"delivery-method",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST,key:"key",value:"value"}}},{key:"ill-unit",name:"ill_unit",label:"illrequest.label.ill_unit",path:"ill-unit",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"ill-pickup-locations",name:"pickup_location",label:"illrequest.pickup_location",path:"ill-pickup-locations/{"+c.FormBuilderEnums.FIELD+":ill_unit}",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}}},{key:"request_year",name:"request_year",label:"illrequest.label.year",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"last_interest_date",name:"last_interest_date",label:"illrequest.label.last_interest_date",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"willing_to_pay",name:"willing_to_pay",label:"illrequest.label.willing_to_pay",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:"N"}},options:u.YesOrNo()},{key:"send_directly",name:"send_directly",label:"illrequest.label.send_directly",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:"Y"}},options:u.YesOrNo()},{key:"language",name:"language",label:"illrequest.label.language",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"request_author",name:"request_author",label:"illrequest.label.author",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"illrequest.label.title",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_volume",name:"request_volume",label:"illrequest.label.volume",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"illrequest.label.pages",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"illrequest.label.note",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_month",name:"request_month",label:"illrequest.label.month",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_day",name:"request_day",label:"illrequest.label.day",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_issue",name:"request_issue",label:"illrequest.label.issue",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.IllRequest=l},function(e,t,n){"use strict";function r(){return[{label:"illrequest.label.Y",value:"Y"},{label:"illrequest.label.N",value:"N"}]}Object.defineProperty(t,"__esModule",{value:!0}),t.YesOrNo=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"request_issue",name:"request_issue",label:"ill.request_issue",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AcquisitionRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"request-option",name:"request-option",path:"request-option",label:"recall.dropdown.select.item",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription"}}},{key:"locations",name:"pickup_location",label:"recall.pickup_location",path:"ordered-locations",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"recall.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"patron_note_1",name:"patron_note_1",label:"recall.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"group_id",name:"group_id",label:"",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:"first"}}},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-description",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-category",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.RecallRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"locations",name:"pickup_location",path:"ordered-locations",label:"PhotocopyRequest.pickup_location",value:"",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",byKey:"field-name",byValue:"field-values"}}},{key:"request_author",name:"request_author",label:"PhotocopyRequest.request_author",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"PhotocopyRequest.request_title",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"PhotocopyRequest.request_pages",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"PhotocopyRequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_2",name:"patron_note_2",label:"PhotocopyRequest.patron_note_2",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"requester_name",name:"requester_name",label:"PhotocopyRequest.requester_name",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"add_info",name:"add_info",label:"PhotocopyRequest.add_info",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"PhotocopyRequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"PhotocopyRequest.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"PhotocopyRequest.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"PhotocopyRequest.category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"PhotocopyRequest.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.PhotocopyRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=n(338),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"date",name:"date",path:"time-slots",label:"shortloan.date",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{func:t.datePopulator.bind(t),params:{path:"dates"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"time",name:"slot_id",path:"time-slots",label:"shortloan.hour",mandatory:!0,dependOn:{key:"date",isExists:!0},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{func:t.timeSlotPopulator.bind(t),params:{display:!0,key:"slot-id",value:"req-slot",func:t.createOption.bind(t)}},style:{layout:"column"}}],t}return r(t,e),t.prototype.createOption=function(e,t){var n=t[e.populator.params.key],r=t[e.populator.params.value].slotstart.hour,i=t[e.populator.params.value].slotend.hour,o=u(r,"HHmm").format("HH:mm"),a=u(i,"HHmm").format("HH:mm"),s=o+" - "+a,c={label:s,value:n};return"0000"!==i&&parseInt(r)>parseInt(i)&&(c.info="nui.shortloan.note"),console.log("value "+n),c},t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.ShortLoanRequest=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"ils_db_c",name:"ils_db_code",path:"groups-list-map/ils_db",label:"ubrequest.dropdown.select_library",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"ils_db_code",value:"ils_db_name"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"itemid",name:"itemid",path:"groups-list-map/items",label:"ubrequest.label.select_item",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"itemid",value:"itemdescription",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_library_name",name:"pickup_library_code",path:"groups-list-map/pickup_library",label:"ubrequest.dropdown.pickup_library",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplibrarycode",value:"pickuplibraryname",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code","itemid"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_location_name",name:"pickup_location_code",path:"groups-list-map/pickup_location",label:"ubrequest.dropdown.pickup_location",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code","itemid","pickup_library_code"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"last_interest_date",name:"last_interest_date",label:"ubrequest.last_interest_date",path:"ub-last-interest-date",valuePath:"ub-last-interest-date",existingPath:"describe-item/lastinterestdate",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"item_request_link",name:"item_request_link",label:"",path:"describe-item/db/item{ils_db_code:ilsdbcode}/itemrequestlink",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"comment",name:"patron_note_1",label:"ubrequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.UBRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"requestType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,singleValueUiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST,singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN}},events:{onClick:t.onClick.bind(t),params:[]}},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocation","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"termsOfUse",name:"termsOfUse",path:"groups-list-map/termsOfUse",label:"almaRequest.termsOfUse",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["pickupInstitution","pickupLocation","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:"hold"}},{key:"materialType",name:"materialType",path:"groups-list-map/materialType",label:"almaRequest.materialType",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupInstitution","pickupLocation","termsOfUse","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"checkAvailiability",name:"checkAvailiability",label:"almaRequest.checkAvailiability",existingPath:"checkAvailiability",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LINK,dependOn:{key:"requestType",value:"booking"}},{key:"bookingResolution",name:"bookingResolution",label:"almaRequest.bookingResolution",existingPath:"bookingResolution",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,dependOn:{key:"requestType",value:"booking"}},{key:"startDate",name:"startDate",label:"almaRequest.startDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:{method:t.getUITypeByBookingResolution.bind(t)},minDate:"now",dependOn:{key:"requestType",value:"booking"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"endDate",name:"endDate",label:"almaRequest.endDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:{method:t.getUITypeByBookingResolution.bind(t)},minDate:"now",dependOn:{key:"requestType",value:"booking"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t.prototype.getUITypeByBookingResolution=function(e){switch(e.bookingResolution){case"DAYS":case"DAYS_OVERNIGHT":return c.FormBuilderEnums.UI_TYPE.DATE;case"HOURS":return c.FormBuilderEnums.UI_TYPE.DATE_AND_HOURS;case"MINUTES":return c.FormBuilderEnums.UI_TYPE.DATE_AND_TIME;default:return c.FormBuilderEnums.UI_TYPE.DATE_AND_TIME}},t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);
return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]+\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]+\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",minDate:"now",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,minDate:"now",uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaDigitization=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"citationType",name:"citationType",label:"almaPurchaseRequest.citationType",value:"book",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,existingPath:"dummyPath",valuePath:"citationType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValuePath:"citationType"}},options:[{label:"almaPurchaseRequest.book",value:"book"},{label:"almaPurchaseRequest.journal",value:"journal"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"materialType",name:"materialType",label:"almaPurchaseRequest.materialType",value:"default",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,existingPath:"dummyPath",valuePath:"materialType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValuePath:"materialType"}},options:[{label:"almaPurchaseRequest.materialTypeDefault",value:"Default"},{label:"almaPurchaseRequest.materialTypeElectronic",value:"Electronic"},{label:"almaPurchaseRequest.materialTypePhysical",value:"Physical"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"electronicChooseType",name:"electronicChooseType",label:"almaPurchaseRequest.chooseType",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"electronicChooseType",uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,dependOn:{key:"materialType",value:["Electronic"]},events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"defaultElectronicChooseType"}}},{key:"physicalChooseType",name:"physicalChooseType",label:"almaPurchaseRequest.chooseType",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"physicalChooseType",uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,dependOn:{key:"materialType",value:["Physical"]},events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"defaultPhysicalChooseType"}}},{key:"title",name:"title",label:"almaPurchaseRequest.title",mandatory:!0,valuePath:"title",existingPath:"title",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"author",name:"author",label:"almaPurchaseRequest.author",mandatory:!1,valuePath:"author",existingPath:"author",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"edition",name:"edition",label:"almaPurchaseRequest.edition",mandatory:!1,valuePath:"edition",existingPath:"edition",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"isbn",name:"isbn",label:"almaPurchaseRequest.isbn",mandatory:!1,valuePath:"isbn",existingPath:"isbn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"book"}},{key:"issn",name:"issn",label:"almaPurchaseRequest.issn",mandatory:!1,valuePath:"issn",existingPath:"issn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"journal"}},{key:"lccNumber",name:"lccNumber",label:"almaPurchaseRequest.lccNumber",mandatory:!1,valuePath:"lccNumber",existingPath:"lccNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"oclcNumber",name:"oclcNumber",label:"almaPurchaseRequest.oclcNumber",mandatory:!1,valuePath:"oclcNumber",existingPath:"oclcNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"publisher",name:"publisher",label:"almaPurchaseRequest.publisher",mandatory:!1,valuePath:"publisher",existingPath:"publisher",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"publication_year",name:"publication_year",label:"almaPurchaseRequest.publication_year",mandatory:!1,valuePath:"publication_year",existingPath:"publication_year",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"place_of_publication",name:"place_of_publication",label:"almaPurchaseRequest.place_of_publication",mandatory:!1,valuePath:"place_of_publication",existingPath:"place_of_publication",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"volume",name:"volume",label:"almaPurchaseRequest.volume",mandatory:!1,valuePath:"volume",existingPath:"volume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"requesterNotes",name:"requesterNotes",label:"almaPurchaseRequest.requesterNotes",mandatory:!1,valuePath:"requesterNotes",existingPath:"requesterNotes",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"requesterNotesAdditionalInfo",name:"requesterNotesAdditionalInfo",label:"almaPurchaseRequest.requesterNotesAdditionalInfo",mandatory:!1,valuePath:"requesterNotesAdditionalInfo",existingPath:"requesterNotesAdditionalInfo",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaPurchaseRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.sectionsMap={owner:1,type:2,book:3,article:4,delivery:5},t.formFields=[{key:"citationType",name:"citationType",label:"almaResourceSharing.citationType",value:"book",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,existingPath:"dummyPath",valuePath:"citationType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValuePath:"citationType"}},options:[{label:"almaResourceSharing.book",value:"BK"},{label:"almaResourceSharing.article",value:"CR"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"title",name:"title",label:"almaResourceSharing.title",existingPath:"dummyPath",valuePath:"title",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"articleTitle",name:"articleTitle",label:"almaResourceSharing.articleTitle",existingPath:"dummyPath",valuePath:"articleTitle",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"journalTitle",name:"journalTitle",label:"almaResourceSharing.journalTitle",existingPath:"dummyPath",valuePath:"journalTitle",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"author",name:"author",label:"almaResourceSharing.authors",existingPath:"dummyPath",valuePath:"author",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"authorInitials",name:"authorInitials",label:"almaResourceSharing.authInit",existingPath:"dummyPath",valuePath:"authorInitials",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"issue",name:"issue",label:"almaResourceSharing.issue",existingPath:"dummyPath",valuePath:"issue",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"}},{key:"specificEdition",name:"specificEdition",label:"",value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"almaResourceSharing.specificEdition",value:"Y"}],dependOn:{key:"citationType",value:"BK"}},{key:"edition",name:"edition",label:"almaResourceSharing.edition",existingPath:"dummyPath",valuePath:"edition",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"isbn",name:"isbn",label:"almaResourceSharing.isbn",existingPath:"dummyPath",valuePath:"isbn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"issn",name:"issn",label:"almaResourceSharing.issn",existingPath:"dummyPath",valuePath:"issn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"lccn",name:"lccn",label:"almaResourceSharing.lccNumber",existingPath:"dummyPath",valuePath:"lccn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"oclcNumber",name:"oclcNumber",label:"almaResourceSharing.oclcNumber",existingPath:"dummyPath",valuePath:"oclcNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"doi",name:"doi",label:"almaResourceSharing.doi",existingPath:"dummyPath",valuePath:"doi",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"pmid",name:"pmid",label:"almaResourceSharing.pmid",existingPath:"dummyPath",valuePath:"pmid",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"publisher",name:"publisher",label:"almaResourceSharing.publisher",existingPath:"dummyPath",valuePath:"publisher",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"publicationDate",name:"publicationDate",label:"almaResourceSharing.year",existingPath:"dummyPath",valuePath:"publicationDate",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"placeOfPublication",name:"placeOfPublication",label:"almaResourceSharing.placeOfPublication",existingPath:"dummyPath",valuePath:"placeOfPublication",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"additionalAuthor",name:"additionalAuthor",label:"almaResourceSharing.additionalAuthor",existingPath:"dummyPath",valuePath:"additionalAuthor",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"volume",name:"volume",label:"almaResourceSharing.volume",existingPath:"dummyPath",valuePath:"volume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"journalVolume",name:"journalVolume",label:"almaResourceSharing.journalVolume",existingPath:"dummyPath",valuePath:"journalVolume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"part",name:"part",label:"almaResourceSharing.part",existingPath:"dummyPath",valuePath:"part",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"chapter",name:"chapter",label:"almaResourceSharing.chapter",existingPath:"dummyPath",valuePath:"chapter",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"source",name:"source",label:"almaResourceSharing.source",existingPath:"dummyPath",valuePath:"source",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"seriesTitleNumber",name:"seriesTitleNumber",label:"almaResourceSharing.seriesTitleNumber",existingPath:"dummyPath",valuePath:"seriesTitleNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"pagesToPhotocopy",name:"pagesToPhotocopy",label:"almaResourceSharing.pages",existingPath:"dummyPath",valuePath:"pagesToPhotocopy",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"startPage",name:"startPage",label:"almaResourceSharing.startPage",existingPath:"dummyPath",valuePath:"startPage",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3,inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaResourceSharing.endPage",existingPath:"dummyPath",valuePath:"endPage",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3,inputType:"number",validPattern:"[1-9]\\d*"},{key:"maximumFee",name:"maximumFee",label:"almaResourceSharing.maximumFee",existingPath:"dummyPath",valuePath:"maximumFee",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:19,inputType:"number"},{key:"format",name:"format",label:"almaResourceSharing.format",path:"formatOptions",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"format"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"alternativeLocationAddress",name:"alternativeLocationAddress",label:"almaResourceSharing.deliveryLocationToAlternativeAddress",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"alternativeLocationAddress",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"},deleteFromFormDataIfHidden:"true"},events:{onChange:t.onChange.bind(t),params:[]}},{key:"alternativeLocationEmail",name:"alternativeLocationEmail",label:"almaResourceSharing.deliveryLocationToAlternativeEmail",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"alternativeLocationEmail",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"alternativeLocationEmailDefault"},deleteFromFormDataIfHidden:"false"},events:{onChange:t.onChange.bind(t),params:[]}},{key:"email",name:"email",label:"almaResourceSharing.deliveryAlternative.email",existingPath:"dummyPath",valuePath:"email",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationEmail",value:"alternativeEmail",showIfFieldByKeyDoesntExist:"false"},maxlength:255},{key:"line1",name:"line1",label:"almaResourceSharing.deliveryAlternative.line1",existingPath:"dummyPath",valuePath:"line1",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress",showIfFieldByKeyDoesntExist:"false"},maxlength:255},{key:"line2",name:"line2",label:"almaResourceSharing.deliveryAlternative.line2",existingPath:"dummyPath",valuePath:"line2",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress",showIfFieldByKeyDoesntExist:"false"},maxlength:255},{key:"line3",name:"line3",label:"almaResourceSharing.deliveryAlternative.line3",existingPath:"dummyPath",valuePath:"line3",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress",showIfFieldByKeyDoesntExist:"false"},maxlength:255},{key:"line4",name:"line4",label:"almaResourceSharing.deliveryAlternative.line4",existingPath:"dummyPath",valuePath:"line4",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress",showIfFieldByKeyDoesntExist:"false"},maxlength:255},{key:"requestedMedia",name:"requestedMedia",label:"almaResourceSharing.requestedMedia",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"requestedMedia",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"requestedMediaDefault"}}},{key:"owner",name:"owner",path:"groups-list-map/owner",label:"almaResourceSharing.owner",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocation"],singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN,defaultValuePath:"owner"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaResourceSharing.pickupLibrary",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["owner"],defaultValuePath:"pickupLocationDefault"}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"citationType",value:["BK","CR"]}},{key:"preferredLocalPickupLocation",name:"preferredLocalPickupLocation",path:"groups-list-map/preferredLocalPickupLocation",label:"almaResourceSharing.preferredLocalPickupLocation",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["owner"],defaultValuePath:"pickupLocationDefault"}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"citationType",value:["BK","CR"]}},{key:"preferredPickupInstitution",name:"preferredPickupInstitution",path:"ful-net-rs-groups-list-map/preferredPickupInstitution",label:"almaResourceSharing.preferredPickupInstitution",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["preferredPickupLocation"],defaultValuePath:"preferredPickupInstitutionDefault"}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"citationType",value:["BK","CR"]}},{key:"preferredPickupLocation",name:"preferredPickupLocation",path:"ful-net-rs-groups-list-map/preferredPickupLocation",label:"almaResourceSharing.preferredPickupLocation",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,origUiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["preferredPickupInstitution"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{method:t.otherInstitutionChosen.bind(t)}},{key:"allowOtherLibrary",name:"allowOtherLibrary",label:"",value:"true",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"almaResourceSharing.allowOtherLibrary",value:"Y"}]},{key:"notNeedAfter",name:"notNeedAfter",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaResourceSharing.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:1e3},{key:"language",name:"language",label:"almaResourceSharing.language",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"language",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}}},{key:"levelOfService",name:"levelOfService",label:"almaResourceSharing.levelOfService",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"levelOfService",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"levelOfServiceDefault"}}},{key:"physicalServicesResultId",name:"physicalServicesResultId",label:"almaDigitization.physicalServicesResultId",mandatory:!0,valuePath:"physicalServicesResultId",existingPath:"physicalServicesResultId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"willingToPay",name:"willingToPay",label:"",value:"true",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"almaResourceSharing.willingToPay",value:"Y"}]}],t}return r(t,e),t.prototype.createOption=function(e,t){var n=t[e.populator.params.key],r=t[e.populator.params.value].slotstart.hour,i=t[e.populator.params.value].slotend.hour,o=moment(r,"HHmm").format("HH:mm"),a=moment(i,"HHmm").format("HH:mm"),s=o+" - "+a,c={label:s,value:n};return"0000"!==i&&parseInt(r)>parseInt(i)&&(c.info="Information"),console.log("value "+n),c},t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaResourceSharing=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",value:"hold",path:"groups-list-map/requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"almaRequest.requestType.hold",value:"hold"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"manualDescription",name:"manualDescription",label:"almaRequestAnyItem.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocation","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"hasHold",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaRequestAnyItem=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",value:"hold",path:"groups-list-map/requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"almaRequest.requestType.hold",value:"hold"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"manualDescription",name:"manualDescription",label:"almaRequest.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"pickupInstitutionFulNet",name:"pickupInstitutionFulNet",path:"ful-net-request-other-groups-list-map/pickupInstitutionFulNet",label:"almaRequest.pickupInstitution",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocationFulNet"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocationFulNet",name:"pickupLocationFulNet",path:"ful-net-request-other-groups-list-map/pickupLocationFulNet",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitutionFulNet"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:["booking","hold"]}},{key:"pickupLocation",name:"pickupLocation",path:"pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"hasHold",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"instCode",name:"instCode",label:"almaRequest.institutionCode",mandatory:!0,valuePath:"instCode",existingPath:"instCode",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN
},{key:"pickupLocation",name:"pickupLocation",label:"almaRequest.pickupLocation",mandatory:!1,valuePath:"pickupLocation",existingPath:"pickupLocation",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"callNumber",name:"callNumber",label:"almaRequestOther.callNumber",mandatory:!0,valuePath:"callNumber",existingPath:"callNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"holdingKey",name:"holdingKey",label:"almaRequestOther.holdingKey",mandatory:!0,valuePath:"holdingKey",existingPath:"holdingKey",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaRequestOther=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"manualIssueLevelDescrption",name:"manualIssueLevelDescrption",label:"almaDigitizationOther.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,minDate:"now",uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"instCode",name:"instCode",label:"almaRequest.institutionCode",mandatory:!0,valuePath:"instCode",existingPath:"instCode",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"callNumber",name:"callNumber",label:"almaRequestOther.callNumber",mandatory:!0,valuePath:"callNumber",existingPath:"callNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"holdingKey",name:"holdingKey",label:"almaRequestOther.holdingKey",mandatory:!0,valuePath:"holdingKey",existingPath:"holdingKey",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"digitizationType",name:"digitizationType",label:"almaRequestOther.digitizationType",mandatory:!0,valuePath:"digitizationType",existingPath:"digitizationType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaDigitizationOther=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"requestType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,singleValueUiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST,singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN}},events:{onClick:t.onClick.bind(t),params:[]}},{key:"itemDescription",name:"itemDescription",label:"almaItemRequest.itemDescription",mandatory:!1,valuePath:"itemDescription",existingPath:"itemDescription",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LABEL},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocation","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:["booking","hold"]}},{key:"termsOfUse",name:"termsOfUse",path:"groups-list-map/termsOfUse",label:"almaRequest.termsOfUse",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["pickupInstitution","pickupLocation","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:"hold"}},{key:"materialType",name:"materialType",path:"groups-list-map/materialType",label:"almaRequest.materialType",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupInstitution","pickupLocation","termsOfUse","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"checkAvailiability",name:"checkAvailiability",label:"almaRequest.checkAvailiability",existingPath:"checkAvailiability",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LINK,dependOn:{key:"requestType",value:"booking"}},{key:"startDate",name:"startDate",label:"almaRequest.startDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_AND_TIME,minDate:"now",dependOn:{key:"requestType",value:"booking"}},{key:"endDate",name:"endDate",label:"almaRequest.endDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_AND_TIME,minDate:"now",dependOn:{key:"requestType",value:"booking"}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"itemId",name:"itemId",label:"almaRequest.itemId",mandatory:!0,valuePath:"itemId",existingPath:"itemId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaItemRequest=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"issueLevelDescription",name:"issueLevelDescription",label:"almaItemDigitization.issueLevelDescription",mandatory:!1,valuePath:"issueLevelDescription",existingPath:"issueLevelDescription",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LABEL},{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"itemId",name:"itemId",label:"almaDigitization.itemId",mandatory:!0,valuePath:"itemId",existingPath:"itemId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"digitizationType",name:"digitizationType",label:"almaRequestOther.digitizationType",mandatory:!0,valuePath:"digitizationType",existingPath:"digitizationType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaItemDigitization=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(25),c=n(12),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"manualIssueLevelDescrption",name:"manualIssueLevelDescrption",label:"almaDigitizationOther.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,minDate:"now",uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"instCode",name:"instCode",label:"almaRequest.institutionCode",mandatory:!0,valuePath:"instCode",existingPath:"instCode",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"callNumber",name:"callNumber",label:"almaRequestOther.callNumber",mandatory:!0,valuePath:"callNumber",existingPath:"callNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"holdingKey",name:"holdingKey",label:"almaRequestOther.holdingKey",mandatory:!0,valuePath:"holdingKey",existingPath:"holdingKey",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"digitizationType",name:"digitizationType",label:"almaRequestOther.digitizationType",mandatory:!0,valuePath:"digitizationType",existingPath:"digitizationType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return r(t,e),t=i([a.Injectable(),o("design:paramtypes",[])],t)}(s.AbstractRequest);t.AlmaGeneralDigitization=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(9),c=n(43),u=function(){function e(e,t,n){this.builder=t,this.update(e,n)}return e.prototype.update=function(e,t){var n=this;Object.keys(e).forEach(function(t){n[t]=e[t]})},e}(),l=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.isExpanded=!1,i}return r(t,e),t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),this.fullDisplayValues=this.builder.getFullDisplayFields(n).map(function(e){return new p(e[1],r[e[1].replace(/_/g,"")])}).filter(function(e){return null!=e.value})},Object.defineProperty(t.prototype,"fullDisplayValues",{get:function(){return this._fullDisplayValues},set:function(e){this._fullDisplayValues=e},enumerable:!0,configurable:!0}),t}(u);t.LocationItemDisplay=l;var f=function(){function e(e){this.mtCache=e,this.fullDisplayFields=[],this.fullPropertiesType="item.global.dataitem",this.noOfItemsType="number_of_items",this.itemsListConf=[],this.summaryHoldingsFields=[],this.noOfItems=""}return e.prototype.getBriefDisplayFields=function(e){this.itemsListConf=[];for(var t=1;t<=4;t++)this.itemsConfig=this.getLocationsConfig(this.mtCache.tables.ITEMS_BRIEF_DISPLAY,"item.brief."+t,e),this.itemsConfig[0]&&this.itemsListConf.push([this.itemsConfig[0].source3,this.itemsConfig[0].source4,this.itemsConfig[0].source5,this.itemsConfig[0].target]);return this.itemsListConf},e.prototype.getLocationsConfig=function(e,t,n){var r=this.mtCache.findByProperties(e,{source1:n,source2:t});return r.length>0?r:this.mtCache.findByProperties(e,{source1:"default",source2:t})},e.prototype.getFullDisplayFields=function(e){if(0===this.fullDisplayFields.length){var t=this.getDetailedDisplayFieldsConfiguration(e),n=[];this.getBriefDisplayFields(e).map(function(e){e.map(function(e){n.push(e?e.replace(/_/g,""):"")})}),t=t.filter(function(e){var t=e[1].replace(/_/g,"");return n.indexOf(t)===-1}),this.fullDisplayFields=t}return this.fullDisplayFields},e.prototype.getDetailedDisplayFieldsConfiguration=function(e){var t=this,n=this.mtCache.findByProperties(this.mtCache.tables.LOCATION_ITEM_CONTENT,{source1:e}),r=this.mtCache.findByProperties(this.mtCache.tables.LOCATION_ITEM_CONTENT,{source1:"default"}),i=n.filter(function(e){if(e.source2.includes(t.noOfItemsType))return e});0===i.length&&(i=r.filter(function(e){if(e.source2.includes(t.noOfItemsType))return e})),this.noOfItems=i[0]?i[0].target:"0";var o=n.length>0?n:r;return o.filter(function(e){if(e.source2.includes(t.fullPropertiesType))return e}).sort(function(e,t){var n=e.source2.substr(e.source2.lastIndexOf(".")+1,e.source2.length-1),r=t.source2.substr(t.source2.lastIndexOf(".")+1,t.source2.length-1);return parseInt(n)-parseInt(r)}).map(function(e){var t=e.target.replace(/_/g,""),n=[e.source2,t];return n})},e.prototype.getOrderedSummaryHoldingsInfoConfiguration=function(e,t){var n=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:e,source3:t});return 0===n.length&&(n=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:"default",source3:t})),0===n.length&&(n=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:e,source3:"Default"})),0===n.length&&(n=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:"default",source3:"Default"})),this.summaryHoldingsFields=n.sort(function(e,t){return parseInt(e.source4)-parseInt(t.source4)}).map(function(e){return e.source2}),this.summaryHoldingsFields},e.prototype.getShowMoreBulkSize=function(){var e=this.mtCache.findByProperties(this.mtCache.tables.BULK_DEFINITION,{source1:"OvP - Items Paging"});return e.length>0?Number(e[0].target):0},e=i([a.Injectable(),o("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&t||Object])],e);var t}();t.LocationBuilder=f;var p=function(){function e(e,t){this.key=e,this.value=t}return e}();t.default=[c.default.name]},function(e,t,n){function r(e,t,n,r){var f=-1,p=o,d=!0,h=e.length,m=[],g=t.length;if(!h)return m;n&&(t=s(t,c(n))),r?(p=a,d=!1):t.length>=l&&(p=u,d=!1,t=new i(t));e:for(;++f<h;){var y=e[f],v=null==n?y:n(y);if(y=r||0!==y?y:0,d&&v===v){for(var b=g;b--;)if(t[b]===v)continue e;m.push(y)}else p(t,v,r)||m.push(y)}return m}var i=n(164),o=n(210),a=n(211),s=n(59),c=n(73),u=n(169),l=200;e.exports=r},function(e,t,n){e.exports=n(625)},function(e,t,n){"use strict";var r=n(35),i=n(626);r.Observable.fromPromise=i.fromPromise},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(632),s=function(){function e(){}return e.prototype.range=function(e){return Array.apply(null,new Array(e)).map(function(e,t){return t})},e.prototype.chunk=function(e,t){return this.range(Math.ceil(e.length/t)).map(function(n,r){return e.slice(r*t,r*t+t)}.bind(this))},e.prototype.flattenDeep=function(e){return a(e)},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.ArrayUtils=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),a=function(){function e(){}return Object.defineProperty(e.prototype,"showICPLicenseFooter",{get:function(){var e=!1,t=o.getShowICPLicenseFooter();return!t||"yes"!==t.toLowerCase()&&"true"!==t.toLowerCase()||(e=!0),e},enumerable:!0,configurable:!0}),e=r([i.Injectable()],e)}();t.PrimoExploreFooterService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.TagsSearchBarService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.TagsResultsService=o},function(e,t){angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,t,n,r){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(i,o,a){var s,c,u,l,f,p,d,h,m,g,y,v,b,S,_,O,T,E,w;return w=angular.element(t),S=null,_=null,u=null,l=null,y=!0,E=!1,T=null,c=!1,g=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},v=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+b(e)},b=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},m=function(){var t,r,a,s,f;return l===w?(t=g(l)+b(l[0].document.documentElement),a=v(o)+g(o)):(t=g(l),r=0,void 0!==v(l)&&(r=v(l)),a=v(o)-r+g(o)),E&&(a=g((o[0].ownerDocument||o[0].document).documentElement)),s=a-t,f=s<=g(l)*S+1,f?(u=!0,_?i.$$phase||e.$$phase?i.infiniteScroll():i.$apply(i.infiniteScroll):void 0):(c&&n.cancel(c),u=!1)},O=function(e,t){var r,i,o;return o=null,i=0,r=function(){return i=(new Date).getTime(),n.cancel(o),o=null,e.call()},function(){var a,s;return a=(new Date).getTime(),s=t-(a-i),s<=0?(n.cancel(o),o=null,i=a,e.call()):o?void 0:o=n(r,s,1)}},null!=r&&(m=O(m,r)),i.$on("$destroy",function(){if(l.unbind("scroll",m),null!=T&&(T(),T=null),c)return n.cancel(c)}),d=function(e){return S=parseFloat(e)||0},i.$watch("infiniteScrollDistance",d),d(i.infiniteScrollDistance),p=function(e){if(_=!e,_&&u)return u=!1,m()},i.$watch("infiniteScrollDisabled",p),p(i.infiniteScrollDisabled),h=function(e){return E=e},i.$watch("infiniteScrollUseDocumentBottom",h),h(i.infiniteScrollUseDocumentBottom),s=function(e){if(null!=l&&l.unbind("scroll",m),l=e,null!=e)return l.bind("scroll",m)},s(w),i.infiniteScrollListenForEvent&&(T=e.$on(i.infiniteScrollListenForEvent,m)),f=function(e){if(null!=e&&0!==e.length){if(e.nodeType&&1===e.nodeType?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return s(e);throw new Error("invalid infinite-scroll-container attribute.")}},i.$watch("infiniteScrollContainer",f),f(i.infiniteScrollContainer||[]),null!=a.infiniteScrollParent&&s(angular.element(o.parent())),null!=a.infiniteScrollImmediateCheck&&(y=i.$eval(a.infiniteScrollImmediateCheck)),c=n(function(){return y&&m(),n.cancel(c)})}}}]),"undefined"!=typeof e&&"undefined"!=typeof t&&e.exports===t&&(e.exports="infinite-scroll")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(3),u=function(){function e(e,t,n){this.$http=t,this.$q=n,this.vid=s.getVid(),this.DIRECT_LINK_API_URL=e.directLink}return e.prototype.getDirectLinkURL=function(e){var t=this.getExternalRecordDirectLink(e);if(t)return this.$q.resolve(t);var n={doc:e},r=e.pnx.control.recordid[0],i={vid:this.vid},o={method:"POST",url:this.DIRECT_LINK_API_URL+"/"+r,params:i,data:n};return this.$http(o).then(function(e){return c(e,"data.redirect_to")})},e.prototype.getExternalRecordDirectLink=function(e){var t=c(e,"delivery.availability",[]),n=c(e,"delivery.availabilityLinks",[]);if(t.indexOf("ext_not_restricted")!==-1&&n.indexOf("directlink")!==-1)return c(e,"delivery.availabilityLinksUrl[0]")},e=r([a.Injectable(),o(0,a.Inject("restBaseURLs")),o(1,a.Inject("$http")),o(2,a.Inject("$q")),i("design:paramtypes",[Object,Object,Object])],e)}();t.DirectLinkService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;
if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(67),s=function(){function e(e){this.pushtoService=e}return e.prototype.endNoteAction=function(e,t){this.popupWin=window.open("","_blank");var n=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),i=this.pushtoService.getServiceUrl([e],t,"endnote");i.then(function(e){return r(e)},function(e){return n(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl;this.popupWin.document.open(),this.popupWin.document.write('<html>\n                                            <head>\n                                                <link rel="stylesheet" type="text/css" href="style.css" />\n                                                <meta http-equiv="refresh" content="1; url='+t+'" />\n                                                </head>\n                                                <body></body></html>'),this.popupWin.document.close(),console.log("Endnote successfully sent")},e.prototype.failedPushtoAction=function(e){console.log("Endnote call failed")},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PushtoService&&a.PushtoService)&&t||Object])],e);var t}();t.EndNoteService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(42),c=n(1),u=n(24),l=n(19),f=n(21),p=n(3),d=function(){function e(e,t,n,r,i,o){this.templateUtil=e,this.searchStateService=t,this.$http=n,this.restBaseURLs=r,this.$state=i,this.$translate=o,this.vid=c.getVid(),this.PRINT_API_URL=r.actionsBaseURL+"/print"}return e.prototype.printItemAction=function(e,t){var n=window.open("","_blank");this.getPrintHtml([e],t).then(function(e){var t=e.data.html;return t?(n.document.open(),l.isBrowserSafari()?n.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print();" dir='+document.dir+">"+t+"</body></html>"):n.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print();window.close();" dir='+document.dir+">"+t+"</body></html>"),void n.document.close()):void n.close()})},e.prototype.getPrintHtml=function(e,t){var n=this.buildPayload(u(e),t);return this.$http.post(this.PRINT_API_URL,n)},e.prototype.itemToRecord=function(e){var t={pnx:e.pnx,context:this.getContext(e),holdings:p(e,"delivery.holding",[]),deeplink:this.templateUtil.getDeepLinkAbsPath(e),link2online:[]};return t},e.prototype.buildPayload=function(e,t){var n=this,r=(t?t:e.map(function(e){return n.itemToRecord(e)}),{records:t?t:e.map(function(e){return n.itemToRecord(e)}),vid:this.vid,language:this.$translate.use()});return t&&(r.additionalParams={state:this.$state.current.name,href:window.location.href,searchScope:this.$state.params.search_scope||this.searchStateService.getSearchObject().scope,adaptor:this.$state.params.adaptor,baseUrl:this.templateUtil.getBaseUrl(),urlContext:c.getUrlContext(),curState:this.templateUtil.getCurState()}),r},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],n=e.context;return void 0===n&&(n=t.startsWith("TN_")?"PC":"L"),n},e=r([a.Injectable(),o(2,a.Inject("$http")),o(3,a.Inject("restBaseURLs")),o(4,a.Inject("$state")),o(5,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.TemplateUtil&&s.TemplateUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof f.SearchStateService&&f.SearchStateService)&&n||Object,Object,Object,Object,Object])],e);var t,n}();t.PrintItemService=d,t.default=["nddUtils"]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(67),s=function(){function e(e){this.pushtoService=e}return e.prototype.easyBibAction=function(e,t){this.popupWin=window.open("","_blank");var n=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),i=this.pushtoService.getServiceUrl([e],t,"easybib");i.then(function(e){return r(e)},function(e){return n(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl,n=e.data.data;this.popupWin.document.open(),this.popupWin.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="document.getElementById(\'exportForm\').submit();"><FORM name="ExportForm" id="exportForm" method="POST" target="_parent"  style="display:none" action="'+t+'">'+n+"</body></html>"),this.popupWin.document.close(),console.log("Easybib successfully sent")},e.prototype.failedPushtoAction=function(e,t){console.log("Easybib call failed")},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PushtoService&&a.PushtoService)&&t||Object])],e);var t}();t.EasyBibService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(67),s=function(){function e(e){this.pushtoService=e}return e.prototype.refworksAction=function(e,t){this.popupWin=window.open("","_blank");var n=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),i=this.pushtoService.getServiceUrl([e],t,"refworks");i.then(function(e){return r(e)},function(e){return n(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl,n=e.data.data;this.popupWin.document.open(),this.popupWin.document.write('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="document.getElementById(\'exportForm\').submit();"><FORM accept-charset="UTF-8" name="ExportForm" id="exportForm" method="POST" target="_parent"  style="display:none" action="'+t+'">'+n+"</body></html>"),this.popupWin.document.close(),console.log("Refworks successfully sent")},e.prototype.failedPushtoAction=function(e,t){console.log("Refworks call failed")},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PushtoService&&a.PushtoService)&&t||Object])],e);var t}();t.RefWorksService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(67),l=n(37),f=n(234),p=n(1),d=n(3),h=n(177),m="https://api.mendeley.com/documents",g=function(){function e(e,t,n,r,i,o,a,s){this.pushtoService=e,this.sharedSessionStorage=t,this.mendeleyToastService=n,this.$window=r,this.$q=i,this.$interval=o,this.$http=a,this.restBaseURLs=s,this.vid=p.getVid(),this.MENDELEY_TOKEN="mendeley_token",this.MENDELEY_API_URL=s.actionsBaseURL+"/mendeley"}return e.prototype.mendeleyAction=function(e,t){return a(this,void 0,void 0,function(){var n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:n=this.getItemTitle(e),s.label=1;case 1:return s.trys.push([1,4,,5]),this._token=this.getSessionToken(),this.isAuthorizationNeeded(this._token)?[4,this.getTokenFromApi()]:[3,3];case 2:s.sent(),s.label=3;case 3:return this.mendeleyToastService.showInProgressToast(),r=angular.bind(this,this.failedPushtoAction,n),i=angular.bind(this,this.successfullPushtoAction,n),o=this.pushtoService.getServiceUrl([e],t,"mendeley"),o.then(function(e){return i(e)},function(e){return r(e)}),[3,5];case 4:return a=s.sent(),console.log("Mendeley call failed: login to Mendeley failed."+a),this.mendeleyToastService.showMendeleyToast(!1,n),[3,5];case 5:return[2]}})})},e.prototype.successfullPushtoAction=function(e,t){var n=this,r=t.data.data,i=[];r&&r.length>0&&(r.forEach(function(e){i.push(n.createDocumentRequest(e))}),this.$q.all(i).then(function(t){console.log("Mendeley successfully sent"),n.mendeleyToastService.showMendeleyToast(!0,e)},function(t){console.log("Mendeley call failed: "+d(t,"data.message","")),n.mendeleyToastService.showMendeleyToast(!1,e)}))},e.prototype.failedPushtoAction=function(e,t){console.log("Mendeley call failed: server error."),this.mendeleyToastService.showMendeleyToast(!1,e)},e.prototype.getTokenFromApi=function(){return a(this,void 0,void 0,function(){var e,t,n,r,i,o;return s(this,function(a){switch(a.label){case 0:e=this.$q.defer(),a.label=1;case 1:return a.trys.push([1,6,,7]),[4,this.authorizationUrlRequest()];case 2:return t=a.sent(),n=d(t,"data.authorization_url"),n?[4,this.mendeleyLogin(n)]:[3,5];case 3:return r=a.sent(),[4,this.tokenRequest(r)];case 4:i=a.sent(),i=d(i,"data.token",{}),this.setSessionToken(i),this._token=i,e.resolve(),a.label=5;case 5:return[3,7];case 6:return o=a.sent(),e.reject(),[3,7];case 7:return[2,e.promise]}})})},e.prototype.mendeleyLogin=function(e){var t=this,n=this.$q.defer();if(this.popupMendeleyLoginWin=this.$window.open(e,"mendeleylogin","toolbar=yes,scrollbars=yes,resizable=yes"),!this.popupMendeleyLoginWin||this.popupMendeleyLoginWin.closed)return n.reject(),n.promise;this.$window.removeEventListener("storage",this.storageEventHandler),this.storageEventHandler=function(r){if("mendeley_code"===r.key){var i=JSON.parse(r.newValue),o=e.split("state=")[1].split("&")[0];if(d(i,"state")===o){t.$window.removeEventListener("storage",t.storageEventHandler);var a={code:d(i,"code")};n.resolve(a)}}},this.$window.addEventListener("storage",this.storageEventHandler);var r=this.$interval(function(){t.popupMendeleyLoginWin&&!t.popupMendeleyLoginWin.closed||(t.$window.removeEventListener("storage",t.storageEventHandler),t.$interval.cancel(r))},500);return n.promise},e.prototype.authorizationUrlRequest=function(){return this.$http.get(this.MENDELEY_API_URL+"/authorize"+("suprima"===p.getBackendSystem()?"?vid="+p.getVid():""))},e.prototype.tokenRequest=function(e){return this.$http.post(this.MENDELEY_API_URL+"/token"+("suprima"===p.getBackendSystem()?"?vid="+p.getVid():""),e)},e.prototype.setSessionToken=function(e){this.sharedSessionStorage.setItem(this.MENDELEY_TOKEN,JSON.stringify(e))},e.prototype.getSessionToken=function(){return JSON.parse(sessionStorage.getItem(this.MENDELEY_TOKEN))},e.prototype.isAuthorizationNeeded=function(e){if(d(e,"access_token")&&d(e,"expires_in")){var t=d(e,"expires_in"),n=(new Date).getTime();if(n<t)return!1}return!0},e.prototype.createDocumentRequest=function(e){var t={headers:{Authorization:"Bearer "+d(this._token,"access_token"),Accept:"application/vnd.mendeley-document.1+json","Content-Type":"application/vnd.mendeley-document.1+json"}};return this.$http.post(m+("suprima"===p.getBackendSystem()?"?vid="+p.getVid():""),e,t)},e.prototype.getItemTitle=function(e){return e?Array.isArray(e)?Array.isArray(e)&&1===e.length?h(d(e[0],"pnx.display.title[0]","")):"":h(d(e,"pnx.display.title[0]","")):""},e=r([c.Injectable(),o(3,c.Inject("$window")),o(4,c.Inject("$q")),o(5,c.Inject("$interval")),o(6,c.Inject("$http")),o(7,c.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.PushtoService&&u.PushtoService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.SharedSessionStorage&&l.SharedSessionStorage)&&n||Object,"function"==typeof(g="undefined"!=typeof f.MendeleyToastService&&f.MendeleyToastService)&&g||Object,Object,Object,Object,Object,Object])],e);var t,n,g}();t.MendeleyService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(42),u=n(1),l=n(21),f=n(54),p=n(9),d=n(1),h=n(24),m=n(18),g=n(3),y=function(){function e(e,t,n,r,i,o,a,s,c,l){var f=this;this.$http=e,this.configurationUtil=t,this.templateUtil=n,this.searchStateService=r,this.cheetah=i,this.mtCache=o,this.$translate=a,this.restBaseURLs=s,this.$state=c,this.$stateParams=l,this._templateRenderingInProgress=!1,this.isUseClassicTemplate=!1,this.vid=u.getVid(),this.EMAIL_API_URL=s.actionsBaseURL+"/email",this.isUseClassicTemplate=1===this.mtCache.getTable(this.mtCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===f.vid&&"use_classic_email_template"===e.source2&&"true"===e.target}).length}return e.prototype.getLinkToOnline=function(e){var t=[],n=g(e,"delivery.availabilityLinks")?e.delivery.availabilityLinks:[],r=g(e,"delivery.availabilityLinksUrl")?e.delivery.availabilityLinksUrl:[];if(n.length>0&&r.length>0)for(var i=0;i<n.length;i++)if("directlink"===n[i]&&r[i].length>0){var o={linkLabel:this.isPhysical(e.delivery.deliveryCategory[i]),linkURL:r[i]};t.push(o)}return t},e.prototype.isPhysical=function(e){var t="";return t="Physical Item"===e||"Microform"===e||"Alma-P"===e?"physicalCopy":"onlineAccess"},e.prototype.itemToRecord=function(e){var t={pnx:e.pnx,context:this.getContext(e),holdings:g(e,"delivery.holding",[]),deeplink:this.getLinkByPageType(e),link2online:this.getLinkToOnline(e)};return t},e.prototype.getLinkByPageType=function(e){return"servicesPage"===this.$state.current.name?window.location.href:"fulldisplay"===this.$state.current.name?this.templateUtil.getDeepLinkAbsPath(e,this.$state.params.search_scope,this.$state.params.adaptor):this.templateUtil.getDeepLinkAbsPath(e)},e.prototype.buildPaylod=function(e,t,n,r,i,o,a){var s=this,c=o&&!this.isTemplateSupported(o)?o:r.map(function(e){return s.itemToRecord(e)}),u={addresses:e,subject:t,notes:n,language:this.$translate.use(),vid:this.vid,template:"default",records:c,captchaResponse:i};if(this.isTemplateSupported(c)){var l=this.buildTemplate(a);u.html=l}return o&&this.buildAdditionalParamsPayload(u),u},e.prototype.buildAdditionalParamsPayload=function(e){e.additionalParams={state:this.$state.current.name,href:window.location.href,searchScope:this.$state.params.search_scope||this.searchStateService.getSearchObject().scope,adaptor:this.$state.params.adaptor,baseUrl:this.templateUtil.getBaseUrl(),urlContext:u.getUrlContext(),curState:this.templateUtil.getCurState()}},e.prototype.getPnxForSelectedIds=function(e){var t="",n="suprima"===d.getBackendSystem()?"mms_id":"addsrcrid",r={mode:"advanced",scope:this.$stateParams.search_scope||"browse_search"};m(e,function(e){t+=n+",exact,"+e.recordId+",OR;"}),r.query=t,r.bulkSize=e.length;var i=this.cheetah.performSearch(r);return i},e.prototype.sendEmail=function(e,t,n,r,i,o,a){var s=this.buildPaylod(e,t,n,h(r),i,o,a);return this.$http.post(this.EMAIL_API_URL,s)},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],n=e.context;return void 0===n&&(n=t.startsWith("TN_")?"PC":"L"),n},e.prototype.buildTemplate=function(e){var t=e?"email-template-full":"email-template-brief",n=document.querySelector("#"+t);return n&&n.querySelector("#email-template-items")&&(n.querySelector("#email-template-items").innerHTML=this.renderedItems),n.innerHTML},e.prototype.isTemplateSupported=function(e){return e&&e.length>0&&e.length<=50&&!this.isUseClassicTemplate},Object.defineProperty(e.prototype,"renderedItems",{get:function(){return this._renderedItems},set:function(e){this._renderedItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateRenderingInProgress",{get:function(){return this._templateRenderingInProgress},set:function(e){this._templateRenderingInProgress=e},enumerable:!0,configurable:!0}),e=r([a.Injectable(),o(0,a.Inject("$http")),o(6,a.Inject("$translate")),o(7,a.Inject("restBaseURLs")),o(8,a.Inject("$state")),o(9,a.Inject("$stateParams")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof c.TemplateUtil&&c.TemplateUtil)&&n||Object,"function"==typeof(y="undefined"!=typeof l.SearchStateService&&l.SearchStateService)&&y||Object,"function"==typeof(v="undefined"!=typeof f.Cheetah&&f.Cheetah)&&v||Object,"function"==typeof(b="undefined"!=typeof p.MappingTablesCache&&p.MappingTablesCache)&&b||Object,Object,Object,Object,Object])],e);var t,n,y,v,b}();t.SendEmailService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(9),c=n(1),u=n(51),l=function(){function e(e,t){this.mappingTablesCache=e,this.$translate=t,this._requiredUpFrontActionsList=[],this.setRequiredUpFrontActionsList(),this.actionIconNamesMap={"E-mail":"email",Citation:"citations",Permalink:"permalink",Print:"print",EndNote:"endnote",EasyBib:"easybib",RefWorks:"refworks",RISPushTo:"ris",BibTeXPushTo:"bibtex",Mendeley:"mendeley"},this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo",BibTeXPushTo:"pushto.option.BibTeXPushTo",Mendeley:"pushto.option.Mendeley"}}return e.prototype.setRequiredUpFrontActionsList=function(){var e=u(this.mappingTablesCache.getTable("Actions List"),function(e){return parseInt(e.source3)},"desc");e=e.filter(function(e){return e.source3});var t=e.filter(function(e){return e.target===c.getVid()});e=t.length?t:e.filter(function(e){return"default"===e.target}),e=e.map(function(e){return e.source1}),this._requiredUpFrontActionsList=e.filter(function(e){return!("e-shelf"===e)})},Object.defineProperty(e.prototype,"requiredUpFrontActionsList",{get:function(){return this._requiredUpFrontActionsList},enumerable:!0,configurable:!0}),e.prototype.getActionIconName=function(e){return this.actionIconNamesMap[e]},e.prototype.getActionLabel=function(e){return this.$translate.instant("fulldisplay.command."+this.actionLabelNamesMap[e])},e=r([a.Injectable(),o(1,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&t||Object,Object])],e);var t}();t.UpFrontActionsService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(180),c=function(){function e(e,t,n){this.$translate=e,this.errorMessageIcons=t,this.searchErrorMessageService=n}return e.prototype.getErrorHeader=function(){return this.$translate.instant("nui."+this.errorCode+".header")},e.prototype.getErrorDescription=function(){return this.errorCode===this.searchErrorMessageService.tooManyBoolean?this.$translate.instant("nui."+this.errorCode,{idx_0:this.errorMessage[0],idx_1:this.errorMessage[1]}):this.errorCode===this.searchErrorMessageService.expansionUiNotice&&this.errorMessage?this.$translate.instant("nui."+this.errorCode+"_long_query",{idx_0:this.errorMessage[0]}):this.$translate.instant("nui."+this.errorCode)},e.prototype.getErrorSuggestionHeader=function(){return this.errorCode===this.searchErrorMessageService.tooManyClauses||this.errorCode===this.searchErrorMessageService.illegalSearchTerm||this.errorCode===this.searchErrorMessageService.crossSystemLimits||this.errorCode===this.searchErrorMessageService.tooManyBoolean||this.errorCode===this.searchErrorMessageService.expansionUiNotice&&this.errorMessage?this.$translate.instant("nui.search.error.noresults.suggestions.header"):null},e.prototype.getErrorSuggestionsDescription=function(){var e=[];return this.errorCode===this.searchErrorMessageService.expansionUiNotice&&this.errorMessage||this.errorCode===this.searchErrorMessageService.tooManyBoolean?e.push(this.$translate.instant("nui."+this.errorCode+".suggestion1")):this.errorCode===this.searchErrorMessageService.illegalSearchTerm||this.errorCode===this.searchErrorMessageService.tooManyClauses?(e.push(this.$translate.instant("nui."+this.errorCode+".suggestion1")),e.push(this.$translate.instant("nui."+this.errorCode+".suggestion2"))):this.errorCode===this.searchErrorMessageService.crossSystemLimits&&(e.push(this.$translate.instant("nui."+this.errorCode+".suggestion1")),e.push(this.$translate.instant("nui."+this.errorCode+".suggestion2")),e.push(this.$translate.instant("nui."+this.errorCode+".suggestion3"))),e},e.prototype.showNoResultsIcon=function(){return this.errorCode===this.searchErrorMessageService.illegalSearchTerm||this.errorCode===this.searchErrorMessageService.crossSystemLimits||this.errorCode===this.searchErrorMessageService.serverError},e.prototype.showAttentionIcon=function(){return this.errorCode===this.searchErrorMessageService.blendedTimeout||this.errorCode===this.searchErrorMessageService.notAllSlicesSearched},r([a.Input(),i("design:type",String)],e.prototype,"errorCode",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"errorMessage",void 0),e=r([a.Component({selector:"prm-search-error-message",templateUrl:"components/search/searchResult/errorMessage/search-error-message.html"}),o(0,a.Inject("$translate")),o(1,a.Inject("errorMessageIcons")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.SearchErrorMessageService&&s.SearchErrorMessageService)&&t||Object])],e);var t}();t.PrmSearchErrorMessage=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.ChaptersResultsLineService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=n(0),c=n(43),u=function(){function e(e,t){this.autoCompleteConfig=e,this.$http=t}return e.prototype.isAutocompleteEnabledFor=function(e){return this.autoCompleteConfig.isEnabled(e)},e.prototype.search=function(e,t){var n={q:e},r=a.extend({},this.autoCompleteConfig.getDefaultParams(t),n);return this.$http.jsonp(this.autoCompleteConfig.url,{jsonpCallbackParam:"json.wrf",params:r}).then(function(e){return e.data.response.docs.map(function(e){return e.text})})},e=r([s.Injectable(),o(0,s.Inject("autoCompleteConfig")),o(1,s.Inject("$http")),i("design:paramtypes",[Object,Object])],e)}();t.AutoComplete=u,t.default=[c.default.name]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=[]);var t=this;this._crumbs=[],this._activeLevel=-1,e.forEach(function(e){return t.push(e)})}return e.prototype.push=function(e){this._activeLevel++,this._crumbs=this._crumbs.slice(0,this._activeLevel),this._crumbs.push(e)},e.prototype.setActiveLevel=function(e){return e<this._crumbs.length&&(this._activeLevel=e,!0)},e.prototype.getActiveLevel=function(){return this._activeLevel},e.prototype.getActiveElm=function(){return this._crumbs[this.getActiveLevel()]},e.prototype.asList=function(){return this._crumbs.slice()},e.prototype.size=function(){return this._crumbs.length},e.prototype.isEmpty=function(){return 0===this._crumbs.length},e}();t.Breadcrumbs=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(89),s=n(732),c=n(733),u=n(10),l=function(){function e(e){this.userSessionManagerService=e,this.staticHtml=c(s.getStaticOtbHtml(),a.getStaticHtml()||{})}return e.prototype.getTemplateUrl=function(e){var t=this.userSessionManagerService.getUserLanguage();return this.staticHtml[e][t]||this.staticHtml[e].default},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.UserSessionManagerService&&u.UserSessionManagerService)&&t||Object])],e);var t}();t.StaticService=l,t.default=[]},function(e,t,n){function r(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||i(e,t,n)}var i=n(125),o=n(123);e.exports=r},function(e,t){function n(e,t){return"__proto__"==t?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}var i=n(746),o=n(31),a="Expected a function";e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e,t){this.$http=e,this.UPDATE_DB_URL=t.userSettingsBaseURL}return e.prototype.buildPaylod=function(e,t){var n={vid:e,"interface-language":t};return n},e.prototype.updateUserLanguage=function(e,t){var n=this.buildPaylod(e,t);return this.$http.post(this.UPDATE_DB_URL,n)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object])],e)}();t.UserAreaService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.UserAreaExpandableService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{
value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.LanguageSelectionService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(){function e(e,t,n){this.$http=e,this.$translate=n,this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.getItem=function(e){var t=this.GET_ITEM_API_URL+"/L/"+e+"?vid="+s.getVid()+"&lang="+this.$translate.use()+"&virtualBrowse=true";return this.$http.get(t).then(function(e){return new u(e.data)})},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object])],e)}();t.VirtualBrowseItemInfoService=c;var u=function(){function e(e){this._displayLine=e.pnx.display.title[0]}return Object.defineProperty(e.prototype,"displayLine",{get:function(){return this._displayLine},enumerable:!0,configurable:!0}),e}();t.ItemInfo=u,t.default=[]},function(e,t,n){var r=n(282),i=r(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});e.exports=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(769),a=n(46),s=n(770),c=n(226),u=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmPersonalizeResultsButton,s.PrmPersonalizationDialog],providers:[a.PersonalizeResultsButtonService,c.PersonalizationDialogService],imports:[]})],e)}();t.PersonalizeResultsButtonModule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(45),c=function(){function e(e){this.$location=e}return e.prototype.getStateParams=function(){var e=s(this.$location.search());return e.facet=null,e.conVoc="false",e},e=r([a.Injectable(),o(0,a.Inject("$location")),i("design:paramtypes",[Object])],e)}();t.ControlledVocabularyService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(190),s=function(){function e(e){this.serviceDetailsService=e}return e.prototype.getTextFromVal=function(e){return this.serviceDetailsService.getTextFromVal(e)},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ServiceDetailsService&&a.ServiceDetailsService)&&t||Object])],e);var t}();t.MoreLikeThisItemInfoService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.MoreLikeThisItemService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.GetItRequestService=a},function(e,t,n){var r;!function(i){"use strict";function o(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function a(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var i=(t-n)/6048e5;return 1+Math.floor(i)}function s(e){var t=e.getDay();return 0===t&&(t=7),t}function c(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var u=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(r,i,l,f){if(1!==arguments.length||"string"!==c(r)||/\d/.test(r)||(i=r,r=void 0),r=r||new Date,r instanceof Date||(r=new Date(r)),isNaN(r))throw TypeError("Invalid date");i=String(u.masks[i]||i||u.masks.default);var p=i.slice(0,4);"UTC:"!==p&&"GMT:"!==p||(i=i.slice(4),l=!0,"GMT:"===p&&(f=!0));var d=l?"getUTC":"get",h=r[d+"Date"](),m=r[d+"Day"](),g=r[d+"Month"](),y=r[d+"FullYear"](),v=r[d+"Hours"](),b=r[d+"Minutes"](),S=r[d+"Seconds"](),_=r[d+"Milliseconds"](),O=l?0:r.getTimezoneOffset(),T=a(r),E=s(r),w={d:h,dd:o(h),ddd:u.i18n.dayNames[m],dddd:u.i18n.dayNames[m+7],m:g+1,mm:o(g+1),mmm:u.i18n.monthNames[g],mmmm:u.i18n.monthNames[g+12],yy:String(y).slice(2),yyyy:y,h:v%12||12,hh:o(v%12||12),H:v,HH:o(v),M:b,MM:o(b),s:S,ss:o(S),l:o(_,3),L:o(Math.round(_/10)),t:v<12?"a":"p",tt:v<12?"am":"pm",T:v<12?"A":"P",TT:v<12?"AM":"PM",Z:f?"GMT":l?"UTC":(String(r).match(t)||[""]).pop().replace(n,""),o:(O>0?"-":"+")+o(100*Math.floor(Math.abs(O)/60)+Math.abs(O)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10],W:T,N:E};return i.replace(e,function(e){return e in w?w[e]:e.slice(1,e.length-1)})}}();u.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},u.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},r=function(){return u}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.ProgressCheckBoxService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(110),u=(n(3),function(){function e(e,t,n){this.httpService=e,this.ngrsService=t,this.restBaseURLs=n,this.ilsService={},this.moreOptionBaseUrl=n.moreOptionBaseUrl,this.ilsService={"/bestoffer/moreResult":{path:this.moreOptionBaseUrl,method:"GET"}}}return e.prototype.getMoreOption=function(e){var t={mmsid:"",institutionId:e.institutionId,institutionCode:e.institutionCode,customerId:e.customerId,memberId:e.memberId,policyId:e.policyId,institutionDataCenter:e.institutionDataCenter,supplyTime:e.supplyTime,policyType:e.policyType,loanPeriod:e.loanPeriod,cost:e.cost,allowRenewal:e.allowRenewal,supportRush:e.supportRush,czMemberName:e.czMemberName,matchingMmsIds:e.matchingMmsIds};return this.makeIlsRequest("/bestoffer/moreResult",t)},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsService[e];return this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)})},e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e=r([a.Injectable(),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.NgrsService&&c.NgrsService)&&n||Object,Object])],e);var t,n}());t.PhysicalDeliveryMoreOptionRowService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.messagesDismissed={}}return e.prototype.messageShouldDisplay=function(e,t){return this.messagesDismissed[e]||(this.messagesDismissed[e]=!1),t&&(this.messagesDismissed[e]=t),!this.messagesDismissed[e]},e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.AlertBarService=a,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.FormFieldService=a,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(113),s=n(81),c=n(808),u=n(389),l=n(132),f=50,p=n(19),d=n(0),h=function(){function e(e){var t=this;this.changeLangService=e,this.memoizedFun=l(function(e){return t._getTermRegexp(e)},function(e){return e?e.join("##$&"):""}),this.memoizedFunCache=this.memoizedFun.cache,this.combiningHalfMarksRegexp=new RegExp("(.[︠-︯].[︠-︯])","gi"),this.combiningMDiacriticalarksRegexp=new RegExp("(.[͡].)","gi")}return e.prototype.getTermRegexp=function(e){return this.memoizedFunCache.size>f&&this.memoizedFunCache.clear(),this.memoizedFun(e)},e.prototype._getTermRegexp=function(e){var t=this,n=[];if(e&&0!=e.length){var r="(?:^|$|[ \\n\\r\\t.,`@)(%~><}{\\[\\]\\\\\\/:;_&^#$%'\\\"\\+!?*=#|-])",i="(?=^|$|[ \\n\\r\\t.,`@)(%~><}{\\[\\]\\\\\\/:;_&^#$%'\\\"\\+!?*=#|-])",o=a(e,function(e){return-e.length}),l=s(o,c),f=u(l,function(e){return t.isCJK(e)});if(f[0].length&&n.push("("+f[0].join("|")+")"),f[1].length){var p=s(f[1],function(e){return e.trim().split(" ").join("\\W*?")}).join("|"),d="(?:"+r+"("+p+")"+i+")";n.push(d)}var h=n.join("|");return new RegExp(h,"gi")}},e.prototype.checkWithBoundories=function(e,t,n){var r=/[ \n\r\t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/,i=t||n;return e.charAt(0).match(r)?e[0]+("<mark>"+i+"</mark>"):"<mark>"+e+"</mark>"},e.prototype.getHighlightedText=function(e,t){var n="";if(!e)return"";if(e.indexOf("<")===-1||this.containsValidHTML(e)){if(e.indexOf("<")!==-1&&this.containsValidHTML(e))return e}else e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");return n=t?this.isCJK(e)?e.replace(t,function(e){return"<mark>"+e+"</mark>"}).replace(/<\/mark> <mark>/g," "):e.replace(t,this.checkWithBoundories).replace(/<\/mark> <mark>/g," "):e,p.isBrowserChrome()||this.isCombiningHalfMarks(n)&&(n=this.replaceCombiningHalfMarks(n)),this.isCombiningDiacriticalMark(n)&&(n=this.replaceCombiningDiacriticalMark(n)),n},e.prototype.replaceCombiningHalfMarks=function(e){return e=e.replace(this.combiningHalfMarksRegexp,function(e){return'<span class="combined-half-mark">'+e+"</span>"})},e.prototype.replaceCombiningDiacriticalMark=function(e){return e=e.replace(this.combiningMDiacriticalarksRegexp,function(e){return'<span class="combined-half-mark">'+e+"</span>"})},e.prototype.isCombiningHalfMarks=function(e){var t=/[\uFE20-\uFE2F]/;return t.test(e)},e.prototype.isCombiningDiacriticalMark=function(e){var t=/[\u0361]/;return t.test(e)},e.prototype.isCJK=function(e){var t=/[\u4E00-\u9FCC\u3400-\u4DB5\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]/,n=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,r=/[\uAC00-\uD7A3\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]/,i=/[\u02C6-\u0323]/;return t.test(e)||n.test(e)||r.test(e)||i.test(e)},e.prototype.combineStringLastChar=function(e){e=e||"";var t=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,n=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,r=e.slice(-1);return t.test(r)&&"rtl"===this.changeLangService.direction&&n.test(e)?"&#8207":""},e.prototype.containsValidHTML=function(e){var t=/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/g,n=t.exec(e.replace(/\r?\n|\r/gm,""));return null!=n&&n.length>0},e=r([d.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.ChangeLangService&&o.ChangeLangService)&&t||Object])],e);var t}();t.HighlightService=h},function(e,t,n){var r,i;!function(o,a){"use strict";var s=o&&o.angular||window&&window.angular;r=[n(820)],i=function(e){return a(s,e)}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this,function(e,t,n){"use strict";var r=e.module("LocalForageModule",["ng"]);return r.provider("$localForage",function(){var n={},r={name:"lf"},i={setItem:!1,removeItem:!1},o={};this.setNotify=function(e,t){i={setItem:e,removeItem:t}},this.config=function(t){if(!e.isObject(t))throw new Error("The config parameter should be an object");e.extend(r,t)},this.$get=["$rootScope","$q","$parse",function(a,s,c){function u(t,n){return function(r){if((e.isObject(r)&&r.name?"InvalidStateError"===r.name:e.isString(r)&&"InvalidStateError"===r)&&"asyncStorage"===this.driver()||e.isObject(r)&&r.code&&5===r.code){var i=this;return i.setDriver("localStorageWrapper").then(function(){return n.apply(i,t)})}return s.reject(r)}}var l=function(n){e.isDefined(n)?this._localforage=t.createInstance(n):(this._localforage=t,t.config(r))};l.prototype.createInstance=function(t){if(e.isObject(t)){if(t=e.extend({},r,t),e.isDefined(n[t.name]))throw new Error("A localForage instance with the name "+t.name+" is already defined.");return n[t.name]=new l(t),n[t.name]}throw new Error("The parameter should be a config object.")},l.prototype.instance=function(t){if(e.isUndefined(t))return n[r.name];if(e.isString(t)){if(e.isDefined(n[t]))return n[t];throw new Error("No localForage instance of that name exists.")}throw new Error("The parameter should be a string.")},l.prototype.setDriver=function(e){return this._localforage.setDriver(e)},l.prototype.driver=function(){return this._localforage.driver()},l.prototype.defineDriver=function(e){return this._localforage.defineDriver(e)},l.prototype.setItem=function(t,n){function r(t){var n;return e.isArray(t)?t.map(r):e.isObject(t)&&t.constructor===Object?(n=e.extend({},t),e.isDefined(n.$promise)&&delete n.$promise,e.isDefined(n.$$hashKey)&&delete n.$$hashKey,Object.keys(n).reduce(function(e,t){return e[t]=r(n[t]),e},{})):t}if(e.isUndefined(t))throw new Error("You must define a key to set");var o,c=this,l=arguments;if(e.isArray(t)){if(!e.isArray(n))throw new Error("If you set an array of keys, the values should be an array too");return s.all(t.map(function(e,t){return c.setItem(e,n[t])}))}return o=r(n),c._localforage.setItem(c.prefix()+t,o).then(function(){return i.setItem&&a.$broadcast("LocalForageModule.setItem",{key:t,newvalue:o,driver:c.driver()}),o}).catch(u(l,c.setItem))},l.prototype.getItem=function(t,n){if(e.isUndefined(t))throw new Error("You must define a key to get");var r,i=s.defer(),o=arguments,a=this;if(e.isArray(t)){var c=[],u=0;r=a._localforage.iterate(function(e,n){var r=t.indexOf(a.prefix()+n);if(r>-1&&(c[r]=e,u++),u===t.length)return c}).then(function(){for(var r=!0,o=0;o<t.length;o++)e.isUndefined(c[o])&&(c[o]=null,r=!1);r||!n?i.resolve(c):i.reject(c)})}else r=a._localforage.getItem(a.prefix()+t).then(function(e){n&&null===e?i.reject(e):i.resolve(e)});return r.then(null,function(e){a.onError(e,o,a.getItem,i)}),i.promise},l.prototype.iterate=function(t){if(e.isUndefined(t))throw new Error("You must define a callback to iterate");var n=s.defer(),r=arguments,i=this;return i._localforage.iterate(t).then(function(e){n.resolve(e)},function(e){i.onError(e,r,i.iterate,n)}),n.promise},l.prototype.removeItem=function(t){if(e.isUndefined(t))throw new Error("You must define a key to remove");var n=this;if(e.isArray(t)){var r=[];return e.forEach(t,function(e,t){r.push(n.removeItem(e))}),s.all(r)}var o=s.defer(),c=arguments;return n._localforage.removeItem(n.prefix()+t).then(function(){i.removeItem&&a.$broadcast("LocalForageModule.removeItem",{key:t,driver:n.driver()}),o.resolve()},function(e){n.onError(e,c,n.removeItem,o)}),o.promise},l.prototype.pull=function(t){var n,r=this;if(e.isUndefined(t))throw new Error("You must define a key to pull");return r.getItem(t).then(function(e){return n=e,r.removeItem(t)}).then(function(){return n})},l.prototype.clear=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.clear().then(function(t){e.resolve()},function(r){n.onError(r,t,n.clear,e)}),e.promise},l.prototype.key=function(t){if(e.isUndefined(t))throw new Error("You must define a position to get for the key function");var n=s.defer(),r=arguments,i=this;return i._localforage.key(t).then(function(e){n.resolve(e)},function(e){i.onError(e,r,i.key,n)}),n.promise};var f=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.keys().then(function(t){if(r.oldPrefix&&"localStorageWrapper"===n.driver()){for(var i=[],o=0,a=t.length;o<a;o++)i.push(t[o].substr(n.prefix().length,t[o].length));t=i}e.resolve(t)},function(r){n.onError(r,t,n.keys,e)}),e.promise};return l.prototype.keys=f,l.prototype.getKeys=f,l.prototype.length=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.length().then(function(t){e.resolve(t)},function(r){n.onError(r,t,length,e)}),e.promise},l.prototype.bind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to bind");var a={defaultValue:"",name:r.name};i=e.extend({},a,i);var s=n[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");var u=i.scopeKey||i.key,l=c(u);return s.getItem(i.key,!0).then(function(e){return l.assign(t,e),e}).catch(function(){return l.assign(t,i.defaultValue),s.setItem(i.key,i.defaultValue)}).then(function(n){return e.isDefined(o[i.key])&&o[i.key](),o[i.key]=t.$watch(u,function(t){e.isDefined(t)&&s.setItem(i.key,t)},!0),n})},l.prototype.unbind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to unbind");var a={scopeKey:i.key,name:r.name};i=e.extend({},a,i);var s=n[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");return c(i.scopeKey).assign(t,null),e.isDefined(o[i.key])&&(o[i.key](),delete o[i.key]),s.removeItem(i.key)},l.prototype.prefix=function(){return"localStorageWrapper"===this.driver()&&r.oldPrefix?this._localforage.config().name+".":""},l.prototype.onError=function(t,n,r,i){if((e.isObject(t)&&t.name?"InvalidStateError"===t.name:e.isString(t)&&"InvalidStateError"===t)&&"asyncStorage"===this.driver()||e.isObject(t)&&t.code&&5===t.code){var o=this;o.setDriver("localStorageWrapper").then(function(){r.apply(o,n).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(){i.reject(t)})}else i.reject(t)},n[r.name]=new l,n[r.name]}]}),r.directive("localForage",["$localForage",function(t){return{restrict:"A",link:function(n,r,i){var o=n.$eval(i.localForage);e.isObject(o)&&e.isDefined(o.key)?t.bind(n,o):t.bind(n,i.localForage)}}}]),r.name})},function(e,t,n){"use strict";function r(e,t,n){function r(){return{request:function(e){return e.url.includes("primo_library/libweb")||e.url.includes("/primaws/rest")||e.url.includes("/primaws/suprimaLogout")||(e.skipAuthorization=!0),e}}}function o(e){var t={response:function(t){if(e.active){e.modelInstance;if(t.config.url.indexOf("/rest/")>-1){var n=e.getKey(t.config.url);e.addToModel(n,t)}}return t}};return t}function a(e,t){return{responseError:function(n){switch(n.status){case 401:if(null!=n.headers("invalid_jwt")){var r=e.get(l.getInjectableName(h.UserSessionManagerService));r.logout(!0)}}return t.reject(n)}}}function s(e){var t={request:function(t){return(t.url.includes("primaws/")||t.url.includes("primo_library/libweb"))&&t.params&&!t.params.lang&&e.getLanguage()&&(t.params.lang=e.getLanguage()),t}};return t}e.interrupt("keydown mousedown"),t.tokenGetter=i,n.interceptors.push(r),n.interceptors.push("jwtInterceptor"),n.interceptors.push(o),n.interceptors.push(a),n.interceptors.push(s),o.$inject=[l.getInjectableName(f.ModelService)],a.$inject=["$injector","$q"],s.$inject=["I18nService"]}function i(e){var t=e.getJwt();return t?t:h.bootstrapJwt()}function o(e,t,n){n.absUrl().indexOf("debugmode=true")>-1&&(t.defaults.headers.common["explore-debug-mode"]="1"),e.runStartupCode()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(851),s=n(401),c=n(853),u=n(41),l=n(0),f=n(244),p=n(5),d=n(43),h=n(10);t.default=p.module("primo-explore.security",[a,d.default.name,s,c,u]).config(r).run(o),r.$inject=["IdleProvider","jwtInterceptorProvider","$httpProvider"],i.$inject=[l.getInjectableName(h.UserSessionManagerService)],o.$inject=[l.getInjectableName(h.UserSessionManagerService),"$http","$location"],n(855)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(){function e(e,t){this.$http=e,this.restBaseURLs=t}return e.prototype.getSourceRecord=function(e,t){var n=this.restBaseURLs.sourceRecord+"?docId="+e+("suprima"===s.getBackendSystem()?"&vid="+s.getVid()+"&recordOwner="+t:"");return this.$http.get(n)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object])],e)}();t.SourceRecordService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.BlankIllService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(181),a=n(874),s=n(875),c=n(337),u=n(63),l=n(877),f=n(878),p=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmRequestServices,f.PrmRequestsServicesOvl,l.PrmRequest],providers:[o.RequestServicesService,c.RequestFromService,u.RequestService],imports:[s.RequestTypesModule]})],e)}();t.OpacRequestModule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.CitationLinkerService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=(n(408),n(0)),s=function(){function e(e,t,n){this.Upload=e,this.$q=t,this.fileMd5Service=n,this.filenameToMd5Map=new Map}return Object.defineProperty(e.prototype,"amazonInfo",{get:function(){return this._amazonInfo},set:function(e){this._amazonInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositProfile",{get:function(){return this._depositProfile},set:function(e){this._depositProfile=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileFailed",{get:function(){return this._fileFailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this._files},set:function(e){this._files=e},enumerable:!0,configurable:!0}),e.prototype.exceedNoFileLimitFile=function(e,t){var n={file:e,fileKey:this._amazonInfo.uploadpath+e.name,fileName:e.name,type:e.type,label:this.getLabel(e.name),isUploaded:!1,inProgress:!1,exceedNoOfFileLimit:!0,exceedFileSizeLimit:!1,notAllowedFileExtension:!1,action:"ADD",fileId:""};t.push(n)},e.prototype.exceedFileSizeLimit=function(e,t){var n={file:e,fileKey:this._amazonInfo.uploadpath+e.name,fileName:e.name,type:e.type,label:this.getLabel(e.name),isUploaded:!1,inProgress:!1,exceedNoOfFileLimit:!1,exceedFileSizeLimit:!0,notAllowedFileExtension:!1,action:"ADD",fileId:""};t.push(n)},e.prototype.notAllowedFileExtension=function(e,t){var n={file:e,fileKey:this._amazonInfo.uploadpath+e.name,fileName:e.name,type:e.type,label:this.getLabel(e.name),isUploaded:!1,inProgress:!1,exceedNoOfFileLimit:!1,exceedFileSizeLimit:!1,notAllowedFileExtension:!0,action:"ADD",fileId:""};t.push(n)},e.prototype.retrieveFileUploadedSuccessCount=function(e){var t=0;if(void 0==e||0==e.length)return 0;for(var n=0;n<e.length;n++)"directory"!=e[n].type&&e[n].isUploaded&&t++;return t},e.prototype.uploadFiles=function(e){var t=this._files;if(this.filenameToMd5Map.clear(),t&&t.length){var n=(t.length,this.depositProfile.maxnooffiles-this.retrieveFileUploadedSuccessCount(e));if(n>0)for(var r=0,i=0;i<t.length;i++)if(r<n){if("directory"!=t[i].type){var o=t[i].size/1024/1024;if("NOLIMIT"!=this.depositProfile.maxfilesize){var a=parseInt(this.depositProfile.maxfilesize);if(o>a){this.exceedFileSizeLimit(t[i],e);continue}}var s=t[i].name,c=this.depositProfile.fileextensionvalues;if(void 0!==c&&""!==c){var u=c.split(","),l=s.lastIndexOf(".");if(l<0){this.notAllowedFileExtension(t[i],e);continue}for(var f=s.substr(l+1),p=!1,d=0;d<u.length;d++)if(angular.lowercase(f)==angular.lowercase(u[d])){p=!0;break}if(!p){this.notAllowedFileExtension(t[i],e);continue}}r++}this.calculateMD5(t[i],e)}else this.exceedNoFileLimitFile(t[i],e);else for(var i=0;i<t.length;i++)this.exceedNoFileLimitFile(t[i],e)}},e.prototype.startUploadFile=function(e,t){this.uploadS3(e,t).then(function(e){},function(e){console.log("Failed to upload to Amazon: ",e);
})},e.prototype.failMD5File=function(e,t){var n={file:e,fileKey:this._amazonInfo.uploadpath+e.name,fileName:e.name,type:e.type,label:this.getLabel(e.name),isUploaded:!1,inProgress:!1,exceedNoOfFileLimit:!1,exceedFileSizeLimit:!1,notAllowedFileExtension:!1,action:"ADD",fileId:""};t.push(n)},e.prototype.calculateMD5=function(e,t){if("directory"==e.type)return void this.startUploadFile(e,t);var n=this;this.fileMd5Service.md5(e).progress(function(e){console.log("Hashed "+e.loaded+" B out of "+e.total+" B")}).error(function(r){console.log("Error calculating md5: %o",r),n.failMD5File(e,t)}).success(function(r){console.log("MD5 for "+e.name+" is "+r),n.filenameToMd5Map.set(e.name,r),n.startUploadFile(e,t)})},e.prototype.hexToBase64=function(e){return btoa(e.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))},e.prototype.uploadS3=function(e,t){this._fileFailed=!1;var n=(e.size/1024/1024,e.name),r=this.hexToBase64('"'+this.filenameToMd5Map.get(n)+'"'),i=this._amazonInfo.uploadpath+n,o=e.type;e.upload=this.Upload.upload({url:"https://"+this._amazonInfo.endpoint+"/"+this._amazonInfo.bucketname+"/",method:"POST",fields:{key:i,policy:this._amazonInfo.policy64,"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":this._amazonInfo.xamzcredentail,"X-Amz-Date":this._amazonInfo.xamzdate,"X-Amz-Signature":this._amazonInfo.xamzsignature,acl:"public-read",success_action_status:"201","Content-MD5":r,"Content-Type":null===e.type||""===e.type?"application/octet-stream":e.type},file:e});var a=!0,s=this.$q.defer(),c={file:e,fileKey:i,fileName:n,label:this.getLabel(n),type:o,isUploaded:a,inProgress:!0,exceedNoOfFileLimit:!1,exceedFileSizeLimit:!1,notAllowedFileExtension:!1,action:"ADD",fileId:""};return t.push(c),e.upload.then(function(e){var r=t.filter(function(e){return e.fileName===n});r[0].isUploaded=!0,r[0].inProgress=!1,s.resolve(e)},function(e){if(e.status>0){var r=t.filter(function(e){return e.fileName===n});r[0].isUploaded=!1,r[0].inProgress=!1,s.reject(e)}}),e.upload.progress(function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))}),s.promise},e.prototype.getLabel=function(e){var t=e,n=e.lastIndexOf(".");return n!=-1&&(t=e.slice(0,n)),t},e.prototype.generateThumb=function(e){null!=e&&$scope.fileReaderSupported&&e.type.indexOf("image")>-1&&$timeout(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){$timeout(function(){e.dataUrl=t.target.result})}})},e=r([a.Injectable(),o(0,a.Inject("Upload")),o(1,a.Inject("$q")),o(2,a.Inject("fileMd5Service")),i("design:paramtypes",[Object,Object,Object])],e)}();t.UploadFileService=s,t.default=[]},function(e,t,n){n(886),e.exports="ngFileUpload"},function(e,t,n){e.exports=n(893)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.namespace=t}return i(e,[{key:"_map",value:function(e,t){return Reflect.hasOwnMetadata(this.namespace,e,t)||Reflect.defineMetadata(this.namespace,new Map,e,t),Reflect.getOwnMetadata(this.namespace,e,t)}},{key:"get",value:function(e,t,n){return this._map(t,n).get(e)}},{key:"set",value:function(e,t,n,r){this._map(n,r).set(e,t)}},{key:"has",value:function(e,t,n){return this._map(t,n).has(e)}},{key:"push",value:function(e,t,n,r){this.has(e,n,r)||this.set(e,[],n,r);var i=this.get(e,n,r);if(!Array.isArray(i))throw new Error("Metastores can only push metadata to array values");i.push(t)}},{key:"merge",value:function(e,t,n,r){var i=this.get(e,n,r)||{},o=Object.assign({},i,t);this.set(e,o,n,r)}},{key:"forEach",value:function(e,t,n){this._map(t,n).forEach(e)}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(32),c=n(91),u=r(c),l=n(246),f=n(148),p=n(111),d=n(247),h="provider",m=function(){function e(t,n){var r=n.useClass,a=n.useValue,c=n.useConstant,u=n.useFactory,d=n.deps;o(this,e),this.isProvider=!0,this._dependencies=[];try{this.token=(0,f.getInjectableNameWithJitCreation)(t)}catch(e){throw new Error("new Provider() Error: Invalid token "+t)}if(Object.assign(this,{useClass:r,useValue:a,useConstant:c,useFactory:u}),!(r||a||c||u))throw new Error("new Provider("+t+") Error: No usage provided (i.e. useClass, useValue, useConstant, useFactory)");d&&(l.Inject.apply(void 0,i(d))(this.useFactory),p.Providers.apply(void 0,i(d.filter(function(e){return"string"!=typeof e})))(this.useFactory,"while analyzing Provider '"+this.token+"' useFactory deps"),this._dependencies=s.bundleStore.get("$inject",this.useFactory)),s.providerStore.set("name",this.token,this),s.providerStore.set("type",h,this)}return a(e,[{key:"type",get:function(){var e=this;return this._type?this._type:(this._type=Object.keys(this).find(function(t){return t.startsWith("use")&&void 0!==e[t]}),this._type)}},{key:"dependencies",get:function(){return this._dependencies}}]),e}();t.Provider=m,u.default.addProvider(h,function(e,t,n,r){switch(e.type){case"useValue":r.value(e.token,e.useValue);break;case"useConstant":r.constant(e.token,e.useConstant);break;case"useClass":n=s.bundleStore.get("$inject",e.useClass)||[],u.default.getParser(d.INJECTABLE)(e.useClass,e.token,n,r);break;case"useFactory":r.factory(e.token,[].concat(i(e.dependencies),[e.useFactory]))}});var g=function(e,t){var n=t.useClass,r=t.useValue,i=t.useConstant,o=t.useFactory,a=t.deps;return new m(e,{useClass:n,useValue:r,useConstant:i,useFactory:o,deps:a})};t.provide=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),i=function(){return Math.floor(100*Math.random())};t.default=function(e){function t(e){for(var t=!0;t;){var r=e;t=!1;{if(!n.has(r))return r;e=""+r+i(),t=!0}}}var n=(arguments.length<=1||void 0===arguments[1]?"provider":arguments[1],new Set),o=function(t){return new Error("A provider with type "+e+" and name "+t+" has already been registered")};return function(){var i=function(i){var a=function(i){var o=t(i.name);r.providerStore.set("type",e,i),r.providerStore.set("name",o,i),n.add(o)};if("string"==typeof i){if(n.has(i))throw o(i);return function(t){r.providerStore.set("type",e,t),r.providerStore.set("name",i,t),n.add(i)}}return void 0===i?function(e){return a(e)}:void a(i)};return i.clearNameCache=function(){return n.clear()},i}()},e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?"while analyzing providers":arguments[1];e=(0,o.flatten)(e);var n=e.filter(s),r=e.filter(c),i=e.filter(function(e){return!s(e)}).filter(function(e){return!c(e)});if(i.length>0)throw new TypeError("TypeError "+t+".\n    Invalid Providers: please make sure all providers are an Injectable(), Component(), Directive(), a Provider, or a module string.\n    Here's the invalid values: "+i.join(", "));return{modules:n,providers:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(32),o=n(149),a=n(411),s=function(e){return"string"==typeof e},c=function(e){return("function"==typeof e||e instanceof a.Provider)&&i.providerStore.has("name",e)};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(415),a=r(o),s=n(894),c=r(s),u=n(188);t.default=function(e,t,n,r,o,s){var l=Object.create(n.prototype);u.componentHooks._beforeCtrlInvoke.forEach(function(i){return i(e,t,n,r,o,s)}),o.invoke([].concat(i(t),[n]),l,s),u.componentHooks._afterCtrlInvoke.forEach(function(i){return i(e,t,n,r,o,s)});for(var f in r.inputMap)(0,a.default)(l,f,r.inputMap[f]);Object.assign(l,e);var p=s.$element,d=s.$scope;return(0,c.default)(l,p,d,r.outputMap||{}),"function"==typeof l.ngOnInit&&l.ngOnInit(),"function"==typeof l.ngOnDestroy&&d.$on("$destroy",l.ngOnDestroy.bind(l)),"function"==typeof l.ngAfterViewInit&&(r.ngAfterViewInitBound=l.ngAfterViewInit.bind(l)),l},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return"undefined"!=typeof e}function o(e){var t={};for(var n in e){var r=e[n];t["@"+n]="@"+r,t["["+e[n]+"]"]="=?",t["[("+e[n]+")]"]="=?"}return t}function a(e,t,n){function o(n,r){return function(o){this[r]=o,i(o)&&a(n,t),e[y][t]===n&&(this[t]=o)}}function a(t,n){if(e[y][n]&&e[y][n]!==t)throw new Error("Can not use more than one type of attribute binding simultaneously: "+n+", ["+n+"], [("+n+")]. Choose one.");e[y][n]=t}var l,f="@"+t,p="["+n+"]",d="[("+n+")]",h=Symbol(),m=Symbol(),g=Symbol(),y=Symbol();Object.defineProperties(e,(l={},r(l,f,{enumerable:!1,configurable:!1,set:o(s,h),get:function(){return this[h]}}),r(l,p,{enumerable:!1,configurable:!1,set:o(c,m),get:function(){return this[m]}}),r(l,d,{enumerable:!1,configurable:!1,set:o(u,g),get:function(){return this[t]}}),r(l,y,{enumerable:!1,configurable:!1,writable:!0,value:e.__using_binding||{}}),l))}Object.defineProperty(t,"__esModule",{value:!0}),t.inputsMap=o,t.default=a;var s="_bind_string_",c="_bind_oneway_",u="_bind_twoway_"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=o,n=a,r=!0,s=u=void 0}},s=n(98),c=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._isAsync=e}return i(t,e),o(t,[{key:"subscribe",value:function(e,n,r){if(e&&"object"==typeof e){var i=this._isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)};return a(Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,i,function(t){return e.error?e.error(t):null},function(){return e.complete?e.complete():null})}var i=this._isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)};return a(Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,i,function(e){return n?n(e):null},function(){return r?r():null})}}]),t}(s.Subject);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t,n){f(t.constructor,n,e,"inputMap")}}function o(e){return function(t,n){var r=f(t.constructor,n,e,"outputMap");Object.keys(r).forEach(function(e){return l.default.add(e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.Input=i,t.Output=o;var a=n(32),s=n(896),c=r(s),u=n(189),l=r(u),f=function(e,t,n,r){var i=t+(n?":"+n:""),o=(0,c.default)([i]),s=a.componentStore.get(r,e)||{};return a.componentStore.set(r,Object.assign({},s,o),e),o};t.writeMapSingle=f;var p=function(e,t,n){var r=(0,c.default)(t),i=a.componentStore.get(n,e)||{};return a.componentStore.set(n,Object.assign({},i,r),e),r};t.writeMapMulti=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=e.selector,n=e.providers,r=void 0===n?[]:n;return function(e){if(!t)throw new Error("Directive selector must be provided");var n=(0,s.default)(t),o=n.name,a=n.type;if(void 0!==r&&!Array.isArray(r))throw new TypeError("Directive providers must be an array");c.providerStore.set("name",o,e),c.providerStore.set("type",m,e),c.bundleStore.set("selector",t,e),u.Providers.apply(void 0,i(r))(e,"while analyzing Directive '"+e.name+"' providers"),c.componentStore.set("restrict",a,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Directive=o;var a=n(248),s=r(a),c=n(32),u=n(111),l=n(91),f=r(l),p=n(414),d=r(p),h=n(149),m="directive";f.default.addProvider(m,function(e,t,n,r){var i={};if(c.componentStore.forEach(function(e,t){return i[t]=e},e),"A"!==i.restrict)throw new Error((0,h.createConfigErrorMessage)(e,r,"@Directive selectors can only be attributes, e.g. selector: '[my-directive]'"));r.directive(t,["$injector",function(t){return i.link=function(r,o,a,s,c){var u={$scope:r,$element:o,$attrs:a,$transclude:c,$requires:s};return(0,d.default)(this,n,e,i,t,u)},i}])})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){function n(e){if(e){if(g.has(e)||f(g,e.token))return;g.add(e);var t=e.useClass||e.useFactory||e;u(t).forEach(function(e){return y.add(e)}),s(t).forEach(n)}}var r,o=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],s=function(e){return a.bundleStore.get("providers",e)||[]},u=function(e){return a.bundleStore.get("modules",e)||[]},f=function(e,t){return[].concat(i(e)).filter(function(e){return t&&e.token===t}).length>0},d=(0,p.default)([t].concat(i(o)),"during bundle entry point for '"+e+"' module"),h=d.modules,m=d.providers,g=new Set,y=new Set(h);return m.forEach(n),(r=(0,c.default)(e,[].concat(i(y)))).add.apply(r,i(l.default.resolve()).concat(i(g)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(32),s=n(91),c=r(s),u=n(189),l=r(u),f=n(413),p=r(f);e.exports=t.default},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.StackMapService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(190),c=n(2),u=n(79),l=n(153),f=n(1),p=n(47),d=(n(39),n(29),function(){function e(e,t,n,r,i,o,a,s){this.configurationUtil=e,this.serviceDetailsService=t,this.$state=n,this.restBaseURLs=r,this.httpService=i,this.$translate=o,this.filterInstitution=a,this.filterLanguage=s,this.vid=f.getVid(),this._inst=this.getInst(),this.ilsServices={},this._repPid=this.getRepId(),this._showMainFile=!0,this._showCopyrights=!1,this._showThumbnailList=!0,this._showMetadata=!0,this._requestId="",this._mmsRes="",this.resquestInProgress={},this.primaBaseUrl=r.officeFileURL,this.updateStatsUrl=r.updateStatistics,this.ilsServices={officeFile:{path:this.primaBaseUrl,method:"GET"},updateStatistics:{path:this.updateStatsUrl,method:"GET"}}}return e.prototype.parseFilesDisplay=function(e){var t=this,n=[],r=0;return e.forEach(function(e){return n.push(t.parseFileDisplay(e,r++))}),n},e.prototype.getInst=function(){return null!=this.$state.params.vid?this.$state.params.vid.split(":")[0]:appConfig.vid.split(":")[0]},Object.defineProperty(e.prototype,"currentVid",{get:function(){return null!=this.$state.params.vid?this.$state.params.vid:appConfig.vid},enumerable:!0,configurable:!0}),e.prototype.parseFileDisplay=function(e,t){var n="",r="";"ESPLORO_LINK"!=e.fileType&&(n=e.path.split(".")[1],r=e.path.split("/")[0]);var i=e.label;e.label.length>25&&(i=e.label.substring(0,25)+"...");var o=e.label;e.label.length>70&&(o=e.label.substring(0,70)+"...");var a={fileId:e.pid,fileSize:e.size,fileLabel:e.label,fileShortLabel:i,fileMidLabel:o,thumbnail_url:e.thumbnail_url,hasThumbnail:e.hasThumbnail,url:e.url,downloadUrl:e.downloadUrl,inst:r,extension:n,contentType:e.contentType,fileType:e.fileType,cfPolicy:e.cfPolicy,cfSignature:e.cfSignature,cfKP:e.cfKP,index:t,isAccessRightsOk:e.isAccessRightsOk,deniedMessage:e.deniedMessage,fulltext:e.fulltext,requiresPDFCoverPage:e.requiresPDFCoverPage};return a},e.prototype.getRequestId=function(){return this._requestId},e.prototype.setRequestId=function(e){this._requestId=e},e.prototype.getMmsRes=function(){return this._mmsRes},e.prototype.setMmsRes=function(e){this._mmsRes=e},e.prototype.getRepId=function(){return this.$state.params.repId},e.prototype.getDetails=function(){return this.results},Object.defineProperty(e.prototype,"isShowMainFile",{get:function(){return this._showMainFile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowCopyrights",{get:function(){return this._showCopyrights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowThumbnailList",{get:function(){return this._showThumbnailList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowMetadata",{get:function(){return this._showMetadata},enumerable:!0,configurable:!0}),e.prototype.setShowMainFile=function(e){this._showMainFile=e},e.prototype.setShowCopyrights=function(e){this._showCopyrights=e},e.prototype.setShowThumbnailList=function(e){this._showThumbnailList=e},e.prototype.setShowMetadata=function(e){this._showMetadata=e},e.prototype.setDetails=function(e){var t=this,n=this.parseDetails(e);n&&(this.results=n.filter(function(e){if(null!=e.values)for(var n=0;n<e.values.length;n++){var r=e.values[n];return r=t.getValuesOfValueItems(r),r.length>0}}))},e.prototype.parseDetails=function(e){var t=this;return this.configurationUtil.getFullViewConfiguration().resultitemview.map(function(n){return t.serviceDetailsService.parseItem(e,n,!0)})},e.prototype.getValuesOfValueItems=function(e){var t=this.filterInstitution.filterAndNormalizeData(e,e.values);return t=this.filterLanguage.filterField(t)},e.prototype.getRepresentationInfo=function(e){var t={inst:this._inst,url:e};return this.makeIlsRequest("officeFile",t)},e.prototype.updateStatistics=function(e,t){var n={repId:this._repPid,mmsId:this._mmsRes,pid:e,inst:this._inst,type:t,requestId:this._requestId};return this.makeIlsRequest("updateStatistics",n)},e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},e.prototype.showMainFile=function(){var e=(document.getElementsByTagName("prm-copyrights"),document.getElementsByClassName("main-file"),document.getElementsByClassName("main-page")),t=document.getElementsByClassName("thumbnail-list"),n=(document.getElementsByClassName("md-list"),document.getElementById("downloadButton")),r=!1;this._showCopyrights=!1,this._showThumbnailList=!1,this._showMetadata=!1,0!=t.length&&(r=!0);for(var i=document.getElementsByClassName("active-button"),o=document.getElementsByClassName("inactive-button"),a=0;a<i.length;a++)i[a].style.display="none",o[a].style.display="block","ic_image_mobile_active_24px"===i[a].getAttribute("icon-definition")&&(i[a].style.display="block"),"ic_image_mobile_24px"===o[a].getAttribute("icon-definition")&&(o[a].style.display="none");null!=n&&(n.style.display="block"),this._showMainFile=!0,0!=e.length&&(e[0].classList.add("showIfXs"),e[0].classList.remove("hide"))},e=r([a.Injectable(),o(2,a.Inject("$state")),o(3,a.Inject("restBaseURLs")),o(5,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof s.ServiceDetailsService&&s.ServiceDetailsService)&&n||Object,Object,Object,"function"==typeof(d="undefined"!=typeof p.HttpService&&p.HttpService)&&d||Object,Object,"function"==typeof(h="undefined"!=typeof u.FilterInstitution&&u.FilterInstitution)&&h||Object,"function"==typeof(m="undefined"!=typeof l.FilterLanguage&&l.FilterLanguage)&&m||Object])],e);var t,n,d,h,m}());t.RepresentationViewerService=d,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(30),c=n(9),u=function(){function e(e,t,n){this.$http=e,this.alertFactory=t,this.mappingTablesCache=n,this.htmlRegex=/(<([^>]+)>)/gi,this.brHtmlTagRegex=/<br>/gi,this.htmlSpaceRegex=/&nbsp;/gi,this.servicesList=[{name:"ELECTRONIC",header:"viewit.fulltext"},{name:"ELECTRONIC_RELATED",header:"c.uresolverServicesForRelatedTitles"},{name:"DIGITAL",header:"ui.viewit.digital_version"},{name:"ESPLORO",header:""}],this.initSignInLink(),this.setServicesListOrder()}return e.prototype.initSignInLink=function(){this._signInLink=this.alertFactory.create(s.ALERT_MSG_TYPE.REQUEST);var e='<span class="bar-text margin-right-small" translate="nui.viewit.signin"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>';this._signInLink.show(e)},e.prototype.setServicesListOrder=function(){var e=!0,t=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.ALMA_VIEWIT_CONFIG,{target:"electronic_services_before_digital"});if(t&&t.length>0&&"true"!==t[0].source1&&(e=!1),!e){var n=[this.servicesList[2]];n=n.concat(this.servicesList.slice(0,2)),n=n.concat(this.servicesList[3]),this.servicesList=n}},e.prototype.getLicense=function(e){var t=this;if(!e.licence){if(!e.licenceUrl)return"";var n={method:"GET",url:e.licenceUrl,params:null,data:null};this.$http(n).then(function(n){n&&n.data&&n.data.displayValue&&(e.licence=t.splitHtml(n.data.displayValue))})}},e.prototype.splitHtml=function(e){if(e){var t=e.replace(this.brHtmlTagRegex,";;").replace(this.htmlSpaceRegex,"").split(";;");return t&&(t=t.filter(function(e){return e&&0!==e.length})),t}},e.prototype.stripHtml=function(e){if(e)return e.replace(this.htmlRegex,"").replace(this.htmlSpaceRegex,"")},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this._signInLink},set:function(e){this._signInLink=e},enumerable:!0,configurable:!0}),e.prototype.getServicesList=function(){return this.servicesList},e=r([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.AlertFactory&&s.AlertFactory)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object])],e);var t,n}();t.ViewItService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(2),u=n(1),l=function(){function e(e,t,n,r,i){this.$state=e,this.$translate=t,this.restBaseURLs=n,this.httpService=r,this.configurationUtil=i,this.vid=u.getVid(),this._repPid=this.getRepId(),this._mmsId=this.getMmsId(),this._pid=this.getPid(),this._inst=this.getInst(),this._requestId="",this._mmsRes="",this.ilsServices={},this.resquestInProgress={},this.primaBaseUrl=n.deliveryBaseURL,this.ilsServices={representationInfo:{path:this.primaBaseUrl,method:"GET"}}}return e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},e.prototype.getDisplayBackToSearchLink=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()!==!0},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e.prototype.getRepId=function(){return this.$state.params.repId},e.prototype.getPid=function(){return this.$state.params.pid},e.prototype.getMmsId=function(){return this.$state.params.mmsId},e.prototype.getInst=function(){return this.vid.split(":")[0]},e.prototype.getRequestId=function(){return this._requestId},e.prototype.setRequestId=function(e){this._requestId=e},e.prototype.getMmsRes=function(){return this._mmsRes},e.prototype.setmmsRes=function(e){this._mmsRes=e},e.prototype.getRepresentationInfo=function(e){return e||(e={repId:this._repPid,mmsId:this._mmsRes,pid:this._pid,inst:this._inst}),this.makeIlsRequest("representationInfo",e)},e=r([a.Injectable(),o(0,a.Inject("$state")),o(1,a.Inject("$translate")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object])],e);var t,n}();t.AlmaViewerService=l,t.default=[]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(34),c=n(93),u=n(422),l=n(3),f=function(){function e(e,t,n,r,i,o){this.$http=e,this.restBaseURLs=t,this.$translate=n,this.opacService=r,this.fullViewService=i,this.viewItService=o}return e.prototype.isMoreAlmaInst=function(e,t){var n=l(e,"delivery.almaInstitutionsList",!1)&&e.delivery.almaInstitutionsList.length>0;return t?n&&this.isMoreAlmaInstRequestType(e,t):n},e.prototype.isMoreAlmaInstRequestType=function(e,t){var n=this.getAvailabilityStatusByType(t);return e.delivery.almaInstitutionsList.map(function(e){return e.availabilityStatus}).includes(n)},e.prototype.getAvailabilityStatusByType=function(e){switch(e){case"E":return"available_online";case"P":return"available_in_institution";default:return}},e.prototype.getInstitutionsFilteredByType=function(e,t){var n=this;return e.delivery.almaInstitutionsList.filter(function(e){return e.availabilityStatus===n.getAvailabilityStatusByType(t)})||[]},e.prototype.loadOtherMember=function(e,t){var n;return n="P"===t?this.restBaseURLs.memberPnx+"/"+t+"/"+e.getitLink[0].linkRecordId+"?record-institution="+e.instCode+"&lang="+this.$translate.use():this.restBaseURLs.memberPnx+"/"+t+"?"+e.getitLink.map(function(e){return"recordsIds="+e.linkRecordId}).join("&")+"&record-institution="+e.instCode+"&lang="+this.$translate.use(),this.$http.get(n)},e.prototype.opacRequestInProgress=function(){return this.opacService.serviceListRequestInProgress},e.prototype.getServicesList=function(){return this.viewItService.getServicesList()},e.prototype.initializeViewitOtherServicesMap=function(e){var t=this,n={};if(e)for(var r=function(r){var i=e.filter(function(e){return r.name===e.serviceType}).map(function(e){return e.parsedAvailiability=t.viewItService.splitHtml(e.availiability),e});n[r.name]=i},i=0,o=this.getServicesList();i<o.length;i++){var a=o[i];r(a)}return n},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof s.OpacService&&s.OpacService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.FullViewService&&c.FullViewService)&&n||Object,"function"==typeof(f="undefined"!=typeof u.ViewItService&&u.ViewItService)&&f||Object])],e);var t,n,f}();t.AlmaOtherMembersService=f},,function(e,t,n){function r(e,t,n){t=(n?o(e,t,n):void 0===t)?1:c(a(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var u=0,l=0,f=Array(s(r/t));u<r;)f[l++]=i(e,u,u+=t);return f}var i=n(105),o=n(87),a=n(76),s=Math.ceil,c=Math.max;e.exports=r},function(e,t,n){function r(e,t){if(null==e)return{};var n=i(s(e),function(e){return[e]});return t=o(t),a(e,n,function(e,n){return t(e,n[0])})}var i=n(59),o=n(36),a=n(585),s=n(220);e.exports=r},,function(e,t,n){(function(e,r){var i;(function(){function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=null==e?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function f(e,t){var n=null==e?0:e.length;return!!n&&O(e,t,0)>-1}function p(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;
return!1}function d(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function h(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function m(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function v(e){return e.split("")}function b(e){return e.match(Nt)||[]}function S(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function _(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function O(e,t,n){return t===t?J(e,t,n):_(e,E,n)}function T(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function E(e){return e!==e}function w(e,t){var n=null==e?0:e.length;return n?A(e,t)/n:Me}function I(e){return function(t){return null==t?re:t[e]}}function R(e){return function(t){return null==e?re:e[t]}}function P(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function j(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function A(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==re&&(n=n===re?o:n+o)}return n}function C(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $(e,t){return d(t,function(t){return[t,e[t]]})}function D(e){return function(t){return e(t)}}function L(e,t){return d(t,function(t){return e[t]})}function k(e,t){return e.has(t)}function M(e,t){for(var n=-1,r=e.length;++n<r&&O(t,e[n],0)>-1;);return n}function x(e,t){for(var n=e.length;n--&&O(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function U(e){return"\\"+er[e]}function B(e,t){return null==e?re:e[t]}function N(e){return Yn.test(e)}function q(e){return zn.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Y(e,t){return function(n){return e(t(n))}}function z(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==le||(e[n]=le,o[i++]=n)}return o}function G(e,t){return"__proto__"==t?re:e[t]}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Q(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function J(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function K(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function X(e){return N(e)?ee(e):yr(e)}function Z(e){return N(e)?te(e):v(e)}function ee(e){for(var t=Hn.lastIndex=0;Hn.test(e);)++t;return t}function te(e){return e.match(Hn)||[]}function ne(e){return e.match(Vn)||[]}var re,ie="4.17.10",oe=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",se="Expected a function",ce="__lodash_hash_undefined__",ue=500,le="__lodash_placeholder__",fe=1,pe=2,de=4,he=1,me=2,ge=1,ye=2,ve=4,be=8,Se=16,_e=32,Oe=64,Te=128,Ee=256,we=512,Ie=30,Re="...",Pe=800,je=16,Ae=1,Ce=2,$e=3,De=1/0,Le=9007199254740991,ke=1.7976931348623157e308,Me=NaN,xe=4294967295,Fe=xe-1,Ue=xe>>>1,Be=[["ary",Te],["bind",ge],["bindKey",ye],["curry",be],["curryRight",Se],["flip",we],["partial",_e],["partialRight",Oe],["rearg",Ee]],Ne="[object Arguments]",qe="[object Array]",He="[object AsyncFunction]",Ve="[object Boolean]",Ye="[object Date]",ze="[object DOMException]",Ge="[object Error]",We="[object Function]",Qe="[object GeneratorFunction]",Je="[object Map]",Ke="[object Number]",Xe="[object Null]",Ze="[object Object]",et="[object Promise]",tt="[object Proxy]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object Symbol]",at="[object Undefined]",st="[object WeakMap]",ct="[object WeakSet]",ut="[object ArrayBuffer]",lt="[object DataView]",ft="[object Float32Array]",pt="[object Float64Array]",dt="[object Int8Array]",ht="[object Int16Array]",mt="[object Int32Array]",gt="[object Uint8Array]",yt="[object Uint8ClampedArray]",vt="[object Uint16Array]",bt="[object Uint32Array]",St=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tt=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,wt=RegExp(Tt.source),It=RegExp(Et.source),Rt=/<%-([\s\S]+?)%>/g,Pt=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Dt.source),kt=/^\s+|\s+$/g,Mt=/^\s+/,xt=/\s+$/,Ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Zt="\\ud800-\\udfff",en="\\u0300-\\u036f",tn="\\ufe20-\\ufe2f",nn="\\u20d0-\\u20ff",rn=en+tn+nn,on="\\u2700-\\u27bf",an="a-z\\xdf-\\xf6\\xf8-\\xff",sn="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",un="\\u2000-\\u206f",ln=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",dn=sn+cn+un+ln,hn="['’]",mn="["+Zt+"]",gn="["+dn+"]",yn="["+rn+"]",vn="\\d+",bn="["+on+"]",Sn="["+an+"]",_n="[^"+Zt+dn+vn+on+an+fn+"]",On="\\ud83c[\\udffb-\\udfff]",Tn="(?:"+yn+"|"+On+")",En="[^"+Zt+"]",wn="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",Rn="["+fn+"]",Pn="\\u200d",jn="(?:"+Sn+"|"+_n+")",An="(?:"+Rn+"|"+_n+")",Cn="(?:"+hn+"(?:d|ll|m|re|s|t|ve))?",$n="(?:"+hn+"(?:D|LL|M|RE|S|T|VE))?",Dn=Tn+"?",Ln="["+pn+"]?",kn="(?:"+Pn+"(?:"+[En,wn,In].join("|")+")"+Ln+Dn+")*",Mn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fn=Ln+Dn+kn,Un="(?:"+[bn,wn,In].join("|")+")"+Fn,Bn="(?:"+[En+yn+"?",yn,wn,In,mn].join("|")+")",Nn=RegExp(hn,"g"),qn=RegExp(yn,"g"),Hn=RegExp(On+"(?="+On+")|"+Bn+Fn,"g"),Vn=RegExp([Rn+"?"+Sn+"+"+Cn+"(?="+[gn,Rn,"$"].join("|")+")",An+"+"+$n+"(?="+[gn,Rn+jn,"$"].join("|")+")",Rn+"?"+jn+"+"+Cn,Rn+"+"+$n,xn,Mn,vn,Un].join("|"),"g"),Yn=RegExp("["+Pn+Zt+rn+pn+"]"),zn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wn=-1,Qn={};Qn[ft]=Qn[pt]=Qn[dt]=Qn[ht]=Qn[mt]=Qn[gt]=Qn[yt]=Qn[vt]=Qn[bt]=!0,Qn[Ne]=Qn[qe]=Qn[ut]=Qn[Ve]=Qn[lt]=Qn[Ye]=Qn[Ge]=Qn[We]=Qn[Je]=Qn[Ke]=Qn[Ze]=Qn[nt]=Qn[rt]=Qn[it]=Qn[st]=!1;var Jn={};Jn[Ne]=Jn[qe]=Jn[ut]=Jn[lt]=Jn[Ve]=Jn[Ye]=Jn[ft]=Jn[pt]=Jn[dt]=Jn[ht]=Jn[mt]=Jn[Je]=Jn[Ke]=Jn[Ze]=Jn[nt]=Jn[rt]=Jn[it]=Jn[ot]=Jn[gt]=Jn[yt]=Jn[vt]=Jn[bt]=!0,Jn[Ge]=Jn[We]=Jn[st]=!1;var Kn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Xn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},er={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tr=parseFloat,nr=parseInt,rr="object"==typeof e&&e&&e.Object===Object&&e,ir="object"==typeof self&&self&&self.Object===Object&&self,or=rr||ir||Function("return this")(),ar="object"==typeof t&&t&&!t.nodeType&&t,sr=ar&&"object"==typeof r&&r&&!r.nodeType&&r,cr=sr&&sr.exports===ar,ur=cr&&rr.process,lr=function(){try{var e=sr&&sr.require&&sr.require("util").types;return e?e:ur&&ur.binding&&ur.binding("util")}catch(e){}}(),fr=lr&&lr.isArrayBuffer,pr=lr&&lr.isDate,dr=lr&&lr.isMap,hr=lr&&lr.isRegExp,mr=lr&&lr.isSet,gr=lr&&lr.isTypedArray,yr=I("length"),vr=R(Kn),br=R(Xn),Sr=R(Zn),_r=function e(t){function n(e){if(oc(e)&&!yp(e)&&!(e instanceof v)){if(e instanceof i)return e;if(gl.call(e,"__wrapped__"))return na(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=re}function v(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xe,this.__views__=[]}function R(){var e=new v(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e}function J(){if(this.__filtered__){var e=new v(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ee(){var e=this.__wrapped__.value(),t=this.__dir__,n=yp(e),r=t<0,i=n?e.length:0,o=Io(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,f=l.length,p=0,d=zl(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return bi(e,this.__actions__);var h=[];e:for(;c--&&p<d;){u+=t;for(var m=-1,g=e[u];++m<f;){var y=l[m],v=y.iteratee,b=y.type,S=v(g);if(b==Ce)g=S;else if(!S){if(b==Ae)continue e;break e}}h[p++]=g}return h}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nt(){this.__data__=nf?nf(null):{},this.size=0}function Zt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function en(e){var t=this.__data__;if(nf){var n=t[e];return n===ce?re:n}return gl.call(t,e)?t[e]:re}function tn(e){var t=this.__data__;return nf?t[e]!==re:gl.call(t,e)}function nn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nf&&t===re?ce:t,this}function rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function on(){this.__data__=[],this.size=0}function an(e){var t=this.__data__,n=Cn(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Al.call(t,n,1),--this.size,!0}function sn(e){var t=this.__data__,n=Cn(t,e);return n<0?re:t[n][1]}function cn(e){return Cn(this.__data__,e)>-1}function un(e,t){var n=this.__data__,r=Cn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fn(){this.size=0,this.__data__={hash:new te,map:new(Xl||rn),string:new te}}function pn(e){var t=Oo(this,e).delete(e);return this.size-=t?1:0,t}function dn(e){return Oo(this,e).get(e)}function hn(e){return Oo(this,e).has(e)}function mn(e,t){var n=Oo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ln;++t<n;)this.add(e[t])}function yn(e){return this.__data__.set(e,ce),this}function vn(e){return this.__data__.has(e)}function bn(e){var t=this.__data__=new rn(e);this.size=t.size}function Sn(){this.__data__=new rn,this.size=0}function _n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function On(e){return this.__data__.get(e)}function Tn(e){return this.__data__.has(e)}function En(e,t){var n=this.__data__;if(n instanceof rn){var r=n.__data__;if(!Xl||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(e,t),this.size=n.size,this}function wn(e,t){var n=yp(e),r=!n&&gp(e),i=!n&&!r&&bp(e),o=!n&&!r&&!i&&Ep(e),a=n||r||i||o,s=a?C(e.length,ul):[],c=s.length;for(var u in e)!t&&!gl.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Lo(u,c))||s.push(u);return s}function In(e){var t=e.length;return t?e[ei(0,t-1)]:re}function Rn(e,t){return Xo(Mi(e),xn(t,0,e.length))}function Pn(e){return Xo(Mi(e))}function jn(e,t,n){(n===re||Ys(e[t],n))&&(n!==re||t in e)||kn(e,t,n)}function An(e,t,n){var r=e[t];gl.call(e,t)&&Ys(r,n)&&(n!==re||t in e)||kn(e,t,n)}function Cn(e,t){for(var n=e.length;n--;)if(Ys(e[n][0],t))return n;return-1}function $n(e,t,n,r){return mf(e,function(e,i,o){t(r,e,n(e),o)}),r}function Dn(e,t){return e&&xi(t,Bc(t),e)}function Ln(e,t){return e&&xi(t,Nc(t),e)}function kn(e,t,n){"__proto__"==t&&Ll?Ll(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Mn(e,t){for(var n=-1,r=t.length,i=nl(r),o=null==e;++n<r;)i[n]=o?re:xc(e,t[n]);return i}function xn(e,t,n){return e===e&&(n!==re&&(e=e<=n?e:n),t!==re&&(e=e>=t?e:t)),e}function Fn(e,t,n,r,i,o){var a,c=t&fe,u=t&pe,l=t&de;if(n&&(a=i?n(e,r,i,o):n(e)),a!==re)return a;if(!ic(e))return e;var f=yp(e);if(f){if(a=jo(e),!c)return Mi(e,a)}else{var p=Rf(e),d=p==We||p==Qe;if(bp(e))return Ii(e,c);if(p==Ze||p==Ne||d&&!i){if(a=u||d?{}:Ao(e),!c)return u?Ui(e,Ln(a,e)):Fi(e,Dn(a,e))}else{if(!Jn[p])return i?e:{};a=Co(e,p,c)}}o||(o=new bn);var h=o.get(e);if(h)return h;if(o.set(e,a),Tp(e))return e.forEach(function(r){a.add(Fn(r,t,n,r,e,o))}),a;if(_p(e))return e.forEach(function(r,i){a.set(i,Fn(r,t,n,i,e,o))}),a;var m=l?u?vo:yo:u?Nc:Bc,g=f?re:m(e);return s(g||e,function(r,i){g&&(i=r,r=e[i]),An(a,i,Fn(r,t,n,i,e,o))}),a}function Un(e){var t=Bc(e);return function(n){return Bn(n,e,t)}}function Bn(e,t,n){var r=n.length;if(null==e)return!r;for(e=sl(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===re&&!(i in e)||!o(a))return!1}return!0}function Hn(e,t,n){if("function"!=typeof e)throw new ll(se);return Af(function(){e.apply(re,n)},t)}function Vn(e,t,n,r){var i=-1,o=f,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=d(t,D(n))),r?(o=p,a=!1):t.length>=oe&&(o=k,a=!1,t=new gn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h===h){for(var m=u;m--;)if(t[m]===h)continue e;c.push(l)}else o(t,h,r)||c.push(l)}return c}function Yn(e,t){var n=!0;return mf(e,function(e,r,i){return n=!!t(e,r,i)}),n}function zn(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===re?a===a&&!gc(a):n(a,s)))var s=a,c=o}return c}function Kn(e,t,n,r){var i=e.length;for(n=Oc(n),n<0&&(n=-n>i?0:i+n),r=r===re||r>i?i:Oc(r),r<0&&(r+=i),r=n>r?0:Tc(r);n<r;)e[n++]=t;return e}function Xn(e,t){var n=[];return mf(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Zn(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Do),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Zn(s,t-1,n,r,i):h(i,s):r||(i[i.length]=s)}return i}function er(e,t){return e&&yf(e,t,Bc)}function rr(e,t){return e&&vf(e,t,Bc)}function ir(e,t){return l(t,function(t){return tc(e[t])})}function ar(e,t){t=Ei(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Zo(t[n++])];return n&&n==r?e:re}function sr(e,t,n){var r=t(e);return yp(e)?r:h(r,n(e))}function ur(e){return null==e?e===re?at:Xe:Dl&&Dl in sl(e)?wo(e):zo(e)}function lr(e,t){return e>t}function yr(e,t){return null!=e&&gl.call(e,t)}function _r(e,t){return null!=e&&t in sl(e)}function Tr(e,t,n){return e>=zl(t,n)&&e<Yl(t,n)}function Er(e,t,n){for(var r=n?p:f,i=e[0].length,o=e.length,a=o,s=nl(o),c=1/0,u=[];a--;){var l=e[a];a&&t&&(l=d(l,D(t))),c=zl(l.length,c),s[a]=!n&&(t||i>=120&&l.length>=120)?new gn(a&&l):re}l=e[0];var h=-1,m=s[0];e:for(;++h<i&&u.length<c;){var g=l[h],y=t?t(g):g;if(g=n||0!==g?g:0,!(m?k(m,y):r(u,y,n))){for(a=o;--a;){var v=s[a];if(!(v?k(v,y):r(e[a],y,n)))continue e}m&&m.push(y),u.push(g)}}return u}function wr(e,t,n,r){return er(e,function(e,i,o){t(r,n(e),i,o)}),r}function Ir(e,t,n){t=Ei(t,e),e=Wo(e,t);var r=null==e?e:e[Zo(_a(t))];return null==r?re:o(r,e,n)}function Rr(e){return oc(e)&&ur(e)==Ne}function Pr(e){return oc(e)&&ur(e)==ut}function jr(e){return oc(e)&&ur(e)==Ye}function Ar(e,t,n,r,i){return e===t||(null==e||null==t||!oc(e)&&!oc(t)?e!==e&&t!==t:Cr(e,t,n,r,Ar,i))}function Cr(e,t,n,r,i,o){var a=yp(e),s=yp(t),c=a?qe:Rf(e),u=s?qe:Rf(t);c=c==Ne?Ze:c,u=u==Ne?Ze:u;var l=c==Ze,f=u==Ze,p=c==u;if(p&&bp(e)){if(!bp(t))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new bn),a||Ep(e)?po(e,t,n,r,i,o):ho(e,t,c,n,r,i,o);if(!(n&he)){var d=l&&gl.call(e,"__wrapped__"),h=f&&gl.call(t,"__wrapped__");if(d||h){var m=d?e.value():e,g=h?t.value():t;return o||(o=new bn),i(m,g,n,r,o)}}return!!p&&(o||(o=new bn),mo(e,t,n,r,i,o))}function $r(e){return oc(e)&&Rf(e)==Je}function Dr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=sl(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var c=s[0],u=e[c],l=s[1];if(a&&s[2]){if(u===re&&!(c in e))return!1}else{var f=new bn;if(r)var p=r(u,l,c,e,t,f);if(!(p===re?Ar(l,u,he|me,r,f):p))return!1}}return!0}function Lr(e){if(!ic(e)||Uo(e))return!1;var t=tc(e)?Ol:Gt;return t.test(ea(e))}function kr(e){return oc(e)&&ur(e)==nt}function Mr(e){return oc(e)&&Rf(e)==rt}function xr(e){return oc(e)&&rc(e.length)&&!!Qn[ur(e)]}function Fr(e){return"function"==typeof e?e:null==e?Au:"object"==typeof e?yp(e)?Vr(e[0],e[1]):Hr(e):Fu(e)}function Ur(e){if(!Bo(e))return Vl(e);var t=[];for(var n in sl(e))gl.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!ic(e))return Yo(e);var t=Bo(e),n=[];for(var r in e)("constructor"!=r||!t&&gl.call(e,r))&&n.push(r);return n}function Nr(e,t){return e<t}function qr(e,t){var n=-1,r=zs(e)?nl(e.length):[];return mf(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Hr(e){var t=To(e);return 1==t.length&&t[0][2]?qo(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function Vr(e,t){return Mo(e)&&No(t)?qo(Zo(e),t):function(n){var r=xc(n,e);return r===re&&r===t?Uc(n,e):Ar(t,r,he|me)}}function Yr(e,t,n,r,i){e!==t&&yf(t,function(o,a){if(ic(o))i||(i=new bn),zr(e,t,a,n,Yr,r,i);else{var s=r?r(G(e,a),o,a+"",e,t,i):re;s===re&&(s=o),jn(e,a,s)}},Nc)}function zr(e,t,n,r,i,o,a){var s=G(e,n),c=G(t,n),u=a.get(c);if(u)return void jn(e,n,u);var l=o?o(s,c,n+"",e,t,a):re,f=l===re;if(f){var p=yp(c),d=!p&&bp(c),h=!p&&!d&&Ep(c);l=c,p||d||h?yp(s)?l=s:Gs(s)?l=Mi(s):d?(f=!1,l=Ii(c,!0)):h?(f=!1,l=Ci(c,!0)):l=[]:dc(c)||gp(c)?(l=s,gp(s)?l=wc(s):(!ic(s)||r&&tc(s))&&(l=Ao(c))):f=!1}f&&(a.set(c,l),i(l,c,r,o,a),a.delete(c)),jn(e,n,l)}function Gr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Lo(t,n)?e[t]:re}function Wr(e,t,n){var r=-1;t=d(t.length?t:[Au],D(_o()));var i=qr(e,function(e,n,i){var o=d(t,function(t){return t(e)});return{criteria:o,index:++r,value:e}});return j(i,function(e,t){return Di(e,t,n)})}function Qr(e,t){return Jr(e,t,function(t,n){return Uc(e,n)})}function Jr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=ar(e,a);n(s,a)&&ai(o,Ei(a,e),s)}return o}function Kr(e){return function(t){return ar(t,e)}}function Xr(e,t,n,r){var i=r?T:O,o=-1,a=t.length,s=e;for(e===t&&(t=Mi(t)),n&&(s=d(e,D(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Al.call(s,c,1),Al.call(e,c,1);return e}function Zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Lo(i)?Al.call(e,i,1):gi(e,i)}}return e}function ei(e,t){return e+Ul(Ql()*(t-e+1))}function ti(e,t,n,r){for(var i=-1,o=Yl(Fl((t-e)/(n||1)),0),a=nl(o);o--;)a[r?o:++i]=e,e+=n;return a}function ni(e,t){var n="";if(!e||t<1||t>Le)return n;do t%2&&(n+=e),t=Ul(t/2),t&&(e+=e);while(t);return n}function ri(e,t){return Cf(Go(e,t,Au),e+"")}function ii(e){return In(Zc(e))}function oi(e,t){var n=Zc(e);return Xo(n,xn(t,0,n.length))}function ai(e,t,n,r){if(!ic(e))return e;t=Ei(t,e);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var c=Zo(t[i]),u=n;if(i!=a){var l=s[c];u=r?r(l,c,s):re,u===re&&(u=ic(l)?l:Lo(t[i+1])?[]:{})}An(s,c,u),s=s[c]}return e}function si(e){return Xo(Zc(e))}function ci(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=nl(i);++r<i;)o[r]=e[r+t];return o}function ui(e,t){var n;return mf(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function li(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Ue){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!gc(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return fi(e,t,Au,n)}function fi(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,c=gc(t),u=t===re;i<o;){var l=Ul((i+o)/2),f=n(e[l]),p=f!==re,d=null===f,h=f===f,m=gc(f);if(a)var g=r||h;else g=u?h&&(r||p):s?h&&p&&(r||!d):c?h&&p&&!d&&(r||!m):!d&&!m&&(r?f<=t:f<t);g?i=l+1:o=l}return zl(o,Fe)}function pi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ys(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function di(e){return"number"==typeof e?e:gc(e)?Me:+e}function hi(e){if("string"==typeof e)return e;if(yp(e))return d(e,hi)+"";if(gc(e))return df?df.call(e):"";var t=e+"";return"0"==t&&1/e==-De?"-0":t}function mi(e,t,n){var r=-1,i=f,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=p;else if(o>=oe){var u=t?null:Tf(e);if(u)return W(u);a=!1,i=k,c=new gn}else c=t?[]:s;e:for(;++r<o;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,a&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),s.push(l)}else i(c,d,n)||(c!==s&&c.push(d),s.push(l))}return s}function gi(e,t){return t=Ei(t,e),e=Wo(e,t),null==e||delete e[Zo(_a(t))]}function yi(e,t,n,r){return ai(e,t,n(ar(e,t)),r)}function vi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ci(e,r?0:o,r?o+1:i):ci(e,r?o+1:0,r?i:o)}function bi(e,t){var n=e;return n instanceof v&&(n=n.value()),m(t,function(e,t){return t.func.apply(t.thisArg,h([e],t.args))},n)}function Si(e,t,n){var r=e.length;if(r<2)return r?mi(e[0]):[];for(var i=-1,o=nl(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=Vn(o[i]||a,e[s],t,n));return mi(Zn(o,1),t,n)}function _i(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:re;n(a,e[r],s)}return a}function Oi(e){return Gs(e)?e:[]}function Ti(e){return"function"==typeof e?e:Au}function Ei(e,t){return yp(e)?e:Mo(e,t)?[e]:$f(Rc(e))}function wi(e,t,n){var r=e.length;return n=n===re?r:n,!t&&n>=r?e:ci(e,t,n)}function Ii(e,t){if(t)return e.slice();var n=e.length,r=Il?Il(n):new e.constructor(n);return e.copy(r),r}function Ri(e){var t=new e.constructor(e.byteLength);return new wl(t).set(new wl(e)),t}function Pi(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ji(e){var t=new e.constructor(e.source,Vt.exec(e));return t.lastIndex=e.lastIndex,t}function Ai(e){return pf?sl(pf.call(e)):{}}function Ci(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function $i(e,t){if(e!==t){var n=e!==re,r=null===e,i=e===e,o=gc(e),a=t!==re,s=null===t,c=t===t,u=gc(t);if(!s&&!u&&!o&&e>t||o&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0}function Di(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=$i(i[r],o[r]);if(c){if(r>=s)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}function Li(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=Yl(o-a,0),l=nl(c+u),f=!r;++s<c;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l}function ki(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,l=Yl(o-s,0),f=nl(l+u),p=!r;++i<l;)f[i]=e[i];for(var d=i;++c<u;)f[d+c]=t[c];for(;++a<s;)(p||i<o)&&(f[d+n[a]]=e[i++]);return f}function Mi(e,t){var n=-1,r=e.length;for(t||(t=nl(r));++n<r;)t[n]=e[n];return t}function xi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):re;c===re&&(c=e[s]),i?kn(n,s,c):An(n,s,c)}return n}function Fi(e,t){return xi(e,wf(e),t)}function Ui(e,t){return xi(e,If(e),t)}function Bi(e,t){return function(n,r){var i=yp(n)?a:$n,o=t?t():{};return i(n,e,_o(r,2),o)}}function Ni(e){return ri(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:re,a=i>2?n[2]:re;for(o=e.length>3&&"function"==typeof o?(i--,o):re,a&&ko(n[0],n[1],a)&&(o=i<3?re:o,i=1),t=sl(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function qi(e,t){return function(n,r){if(null==n)return n;if(!zs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=sl(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Hi(e){return function(t,n,r){for(var i=-1,o=sl(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(n(o[c],c,o)===!1)break}return t}}function Vi(e,t,n){function r(){var t=this&&this!==or&&this instanceof r?o:e;return t.apply(i?n:this,arguments)}var i=t&ge,o=Gi(e);return r}function Yi(e){return function(t){t=Rc(t);var n=N(t)?Z(t):re,r=n?n[0]:t.charAt(0),i=n?wi(n,1).join(""):t.slice(1);return r[e]()+i}}function zi(e){return function(t){return m(wu(ou(t).replace(Nn,"")),e,"")}}function Gi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=hf(e.prototype),r=e.apply(n,t);return ic(r)?r:n}}function Wi(e,t,n){function r(){for(var a=arguments.length,s=nl(a),c=a,u=So(r);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==u&&s[a-1]!==u?[]:z(s,u);if(a-=l.length,a<n)return oo(e,t,Ki,r.placeholder,re,s,l,re,re,n-a);var f=this&&this!==or&&this instanceof r?i:e;return o(f,this,s)}var i=Gi(e);return r}function Qi(e){return function(t,n,r){var i=sl(t);if(!zs(t)){var o=_o(n,3);t=Bc(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:re}}function Ji(e){return go(function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ll(se);if(o&&!s&&"wrapper"==bo(a))var s=new i([],(!0))}for(r=s?r:n;++r<n;){a=t[r];var c=bo(a),u="wrapper"==c?Ef(a):re;s=u&&Fo(u[0])&&u[1]==(Te|be|_e|Ee)&&!u[4].length&&1==u[9]?s[bo(u[0])].apply(s,u[3]):1==a.length&&Fo(a)?s[c]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&yp(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Ki(e,t,n,r,i,o,a,s,c,u){function l(){for(var y=arguments.length,v=nl(y),b=y;b--;)v[b]=arguments[b];if(h)var S=So(l),_=F(v,S);if(r&&(v=Li(v,r,i,h)),o&&(v=ki(v,o,a,h)),y-=_,h&&y<u){var O=z(v,S);return oo(e,t,Ki,l.placeholder,n,v,O,s,c,u-y)}var T=p?n:this,E=d?T[e]:e;return y=v.length,s?v=Qo(v,s):m&&y>1&&v.reverse(),f&&c<y&&(v.length=c),this&&this!==or&&this instanceof l&&(E=g||Gi(E)),E.apply(T,v)}var f=t&Te,p=t&ge,d=t&ye,h=t&(be|Se),m=t&we,g=d?re:Gi(e);return l}function Xi(e,t){return function(n,r){return wr(n,e,t(r),{})}}function Zi(e,t){return function(n,r){var i;if(n===re&&r===re)return t;if(n!==re&&(i=n),r!==re){if(i===re)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=di(n),r=di(r)),i=e(n,r)}return i}}function eo(e){return go(function(t){return t=d(t,D(_o())),ri(function(n){var r=this;return e(t,function(e){return o(e,r,n)})})})}function to(e,t){t=t===re?" ":hi(t);var n=t.length;if(n<2)return n?ni(t,e):t;var r=ni(t,Fl(e/X(t)));return N(t)?wi(Z(r),0,e).join(""):r.slice(0,e)}function no(e,t,n,r){function i(){for(var t=-1,c=arguments.length,u=-1,l=r.length,f=nl(l+c),p=this&&this!==or&&this instanceof i?s:e;++u<l;)f[u]=r[u];for(;c--;)f[u++]=arguments[++t];return o(p,a?n:this,f)}var a=t&ge,s=Gi(e);return i}function ro(e){return function(t,n,r){return r&&"number"!=typeof r&&ko(t,n,r)&&(n=r=re),t=_c(t),n===re?(n=t,t=0):n=_c(n),r=r===re?t<n?1:-1:_c(r),ti(t,n,r,e)}}function io(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ec(t),n=Ec(n)),e(t,n)}}function oo(e,t,n,r,i,o,a,s,c,u){var l=t&be,f=l?a:re,p=l?re:a,d=l?o:re,h=l?re:o;t|=l?_e:Oe,t&=~(l?Oe:_e),t&ve||(t&=~(ge|ye));var m=[e,t,i,d,f,h,p,s,c,u],g=n.apply(re,m);return Fo(e)&&jf(g,m),g.placeholder=r,Jo(g,e,t)}function ao(e){var t=al[e];return function(e,n){if(e=Ec(e),n=null==n?0:zl(Oc(n),292)){var r=(Rc(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(Rc(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function so(e){return function(t){var n=Rf(t);return n==Je?V(t):n==rt?Q(t):$(t,e(t))}}function co(e,t,n,r,i,o,a,s){var c=t&ye;if(!c&&"function"!=typeof e)throw new ll(se);var u=r?r.length:0;if(u||(t&=~(_e|Oe),r=i=re),a=a===re?a:Yl(Oc(a),0),s=s===re?s:Oc(s),u-=i?i.length:0,t&Oe){var l=r,f=i;r=i=re}var p=c?re:Ef(e),d=[e,t,n,r,i,l,f,o,a,s];if(p&&Vo(d,p),e=d[0],t=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===re?c?0:e.length:Yl(d[9]-u,0),!s&&t&(be|Se)&&(t&=~(be|Se)),t&&t!=ge)h=t==be||t==Se?Wi(e,t,s):t!=_e&&t!=(ge|_e)||i.length?Ki.apply(re,d):no(e,t,n,r);else var h=Vi(e,t,n);var m=p?bf:jf;return Jo(m(h,d),e,t)}function uo(e,t,n,r){return e===re||Ys(e,dl[n])&&!gl.call(r,n)?t:e}function lo(e,t,n,r,i,o){return ic(e)&&ic(t)&&(o.set(t,e),Yr(e,t,re,lo,o),o.delete(t)),e}function fo(e){return dc(e)?re:e}function po(e,t,n,r,i,o){var a=n&he,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var l=-1,f=!0,p=n&me?new gn:re;for(o.set(e,t),o.set(t,e);++l<s;){var d=e[l],h=t[l];if(r)var m=a?r(h,d,l,t,e,o):r(d,h,l,e,t,o);if(m!==re){if(m)continue;f=!1;break}if(p){if(!y(t,function(e,t){if(!k(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(d!==h&&!i(d,h,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ho(e,t,n,r,i,o,a){switch(n){case lt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!o(new wl(e),new wl(t)));case Ve:case Ye:case Ke:return Ys(+e,+t);case Ge:return e.name==t.name&&e.message==t.message;case nt:case it:return e==t+"";case Je:var s=V;case rt:var c=r&he;if(s||(s=W),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=me,a.set(e,t);var l=po(s(e),s(t),r,i,o,a);return a.delete(e),l;case ot:if(pf)return pf.call(e)==pf.call(t)}return!1}function mo(e,t,n,r,i,o){var a=n&he,s=yo(e),c=s.length,u=yo(t),l=u.length;if(c!=l&&!a)return!1;for(var f=c;f--;){var p=s[f];if(!(a?p in t:gl.call(t,p)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var h=!0;o.set(e,t),o.set(t,e);for(var m=a;++f<c;){p=s[f];var g=e[p],y=t[p];if(r)var v=a?r(y,g,p,t,e,o):r(g,y,p,e,t,o);if(!(v===re?g===y||i(g,y,n,r,o):v)){h=!1;break}m||(m="constructor"==p)}if(h&&!m){var b=e.constructor,S=t.constructor;b!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S)&&(h=!1)}return o.delete(e),o.delete(t),h}function go(e){return Cf(Go(e,re,da),e+"")}function yo(e){return sr(e,Bc,wf)}function vo(e){return sr(e,Nc,If)}function bo(e){for(var t=e.name+"",n=of[t],r=gl.call(of,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function So(e){var t=gl.call(n,"placeholder")?n:e;return t.placeholder}function _o(){var e=n.iteratee||Cu;return e=e===Cu?Fr:e,arguments.length?e(arguments[0],arguments[1]):e}function Oo(e,t){var n=e.__data__;return xo(t)?n["string"==typeof t?"string":"hash"]:n.map}function To(e){for(var t=Bc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,No(i)]}return t;
}function Eo(e,t){var n=B(e,t);return Lr(n)?n:re}function wo(e){var t=gl.call(e,Dl),n=e[Dl];try{e[Dl]=re;var r=!0}catch(e){}var i=bl.call(e);return r&&(t?e[Dl]=n:delete e[Dl]),i}function Io(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=zl(t,e+a);break;case"takeRight":e=Yl(e,t-a)}}return{start:e,end:t}}function Ro(e){var t=e.match(Ut);return t?t[1].split(Bt):[]}function Po(e,t,n){t=Ei(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=null==e?0:e.length,!!i&&rc(i)&&Lo(a,i)&&(yp(e)||gp(e)))}function jo(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&gl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ao(e){return"function"!=typeof e.constructor||Bo(e)?{}:hf(Rl(e))}function Co(e,t,n){var r=e.constructor;switch(t){case ut:return Ri(e);case Ve:case Ye:return new r((+e));case lt:return Pi(e,n);case ft:case pt:case dt:case ht:case mt:case gt:case yt:case vt:case bt:return Ci(e,n);case Je:return new r;case Ke:case it:return new r(e);case nt:return ji(e);case rt:return new r;case ot:return Ai(e)}}function $o(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ft,"{\n/* [wrapped with "+t+"] */\n")}function Do(e){return yp(e)||gp(e)||!!(Cl&&e&&e[Cl])}function Lo(e,t){var n=typeof e;return t=null==t?Le:t,!!t&&("number"==n||"symbol"!=n&&Qt.test(e))&&e>-1&&e%1==0&&e<t}function ko(e,t,n){if(!ic(n))return!1;var r=typeof t;return!!("number"==r?zs(n)&&Lo(t,n.length):"string"==r&&t in n)&&Ys(n[t],e)}function Mo(e,t){if(yp(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!gc(e))||(Ct.test(e)||!At.test(e)||null!=t&&e in sl(t))}function xo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Fo(e){var t=bo(e),r=n[t];if("function"!=typeof r||!(t in v.prototype))return!1;if(e===r)return!0;var i=Ef(r);return!!i&&e===i[0]}function Uo(e){return!!vl&&vl in e}function Bo(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||dl;return e===n}function No(e){return e===e&&!ic(e)}function qo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==re||e in sl(n)))}}function Ho(e){var t=Cs(e,function(e){return n.size===ue&&n.clear(),e}),n=t.cache;return t}function Vo(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ge|ye|Te),a=r==Te&&n==be||r==Te&&n==Ee&&e[7].length<=t[8]||r==(Te|Ee)&&t[7].length<=t[8]&&n==be;if(!o&&!a)return e;r&ge&&(e[2]=t[2],i|=n&ge?0:ve);var s=t[3];if(s){var c=e[3];e[3]=c?Li(c,s,t[4]):s,e[4]=c?z(e[3],le):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?ki(c,s,t[6]):s,e[6]=c?z(e[5],le):t[6]),s=t[7],s&&(e[7]=s),r&Te&&(e[8]=null==e[8]?t[8]:zl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Yo(e){var t=[];if(null!=e)for(var n in sl(e))t.push(n);return t}function zo(e){return bl.call(e)}function Go(e,t,n){return t=Yl(t===re?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Yl(r.length-t,0),s=nl(a);++i<a;)s[i]=r[t+i];i=-1;for(var c=nl(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),o(e,this,c)}}function Wo(e,t){return t.length<2?e:ar(e,ci(t,0,-1))}function Qo(e,t){for(var n=e.length,r=zl(t.length,n),i=Mi(e);r--;){var o=t[r];e[r]=Lo(o,n)?i[o]:re}return e}function Jo(e,t,n){var r=t+"";return Cf(e,$o(r,ta(Ro(r),n)))}function Ko(e){var t=0,n=0;return function(){var r=Gl(),i=je-(r-n);if(n=r,i>0){if(++t>=Pe)return arguments[0]}else t=0;return e.apply(re,arguments)}}function Xo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===re?r:t;++n<t;){var o=ei(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Zo(e){if("string"==typeof e||gc(e))return e;var t=e+"";return"0"==t&&1/e==-De?"-0":t}function ea(e){if(null!=e){try{return ml.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ta(e,t){return s(Be,function(n){var r="_."+n[0];t&n[1]&&!f(e,r)&&e.push(r)}),e.sort()}function na(e){if(e instanceof v)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ra(e,t,n){t=(n?ko(e,t,n):t===re)?1:Yl(Oc(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=nl(Fl(r/t));i<r;)a[o++]=ci(e,i,i+=t);return a}function ia(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function oa(){var e=arguments.length;if(!e)return[];for(var t=nl(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return h(yp(n)?Mi(n):[n],Zn(t,1))}function aa(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:Oc(t),ci(e,t<0?0:t,r)):[]}function sa(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:Oc(t),t=r-t,ci(e,0,t<0?0:t)):[]}function ca(e,t){return e&&e.length?vi(e,_o(t,3),!0,!0):[]}function ua(e,t){return e&&e.length?vi(e,_o(t,3),!0):[]}function la(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ko(e,t,n)&&(n=0,r=i),Kn(e,t,n,r)):[]}function fa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Oc(n);return i<0&&(i=Yl(r+i,0)),_(e,_o(t,3),i)}function pa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==re&&(i=Oc(n),i=n<0?Yl(r+i,0):zl(i,r-1)),_(e,_o(t,3),i,!0)}function da(e){var t=null==e?0:e.length;return t?Zn(e,1):[]}function ha(e){var t=null==e?0:e.length;return t?Zn(e,De):[]}function ma(e,t){var n=null==e?0:e.length;return n?(t=t===re?1:Oc(t),Zn(e,t)):[]}function ga(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function ya(e){return e&&e.length?e[0]:re}function va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Oc(n);return i<0&&(i=Yl(r+i,0)),O(e,t,i)}function ba(e){var t=null==e?0:e.length;return t?ci(e,0,-1):[]}function Sa(e,t){return null==e?"":Hl.call(e,t)}function _a(e){var t=null==e?0:e.length;return t?e[t-1]:re}function Oa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==re&&(i=Oc(n),i=i<0?Yl(r+i,0):zl(i,r-1)),t===t?K(e,t,i):_(e,E,i,!0)}function Ta(e,t){return e&&e.length?Gr(e,Oc(t)):re}function Ea(e,t){return e&&e.length&&t&&t.length?Xr(e,t):e}function wa(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,_o(n,2)):e}function Ia(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,re,n):e}function Ra(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=_o(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Zr(e,i),n}function Pa(e){return null==e?e:Jl.call(e)}function ja(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ko(e,t,n)?(t=0,n=r):(t=null==t?0:Oc(t),n=n===re?r:Oc(n)),ci(e,t,n)):[]}function Aa(e,t){return li(e,t)}function Ca(e,t,n){return fi(e,t,_o(n,2))}function $a(e,t){var n=null==e?0:e.length;if(n){var r=li(e,t);if(r<n&&Ys(e[r],t))return r}return-1}function Da(e,t){return li(e,t,!0)}function La(e,t,n){return fi(e,t,_o(n,2),!0)}function ka(e,t){var n=null==e?0:e.length;if(n){var r=li(e,t,!0)-1;if(Ys(e[r],t))return r}return-1}function Ma(e){return e&&e.length?pi(e):[]}function xa(e,t){return e&&e.length?pi(e,_o(t,2)):[]}function Fa(e){var t=null==e?0:e.length;return t?ci(e,1,t):[]}function Ua(e,t,n){return e&&e.length?(t=n||t===re?1:Oc(t),ci(e,0,t<0?0:t)):[]}function Ba(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:Oc(t),t=r-t,ci(e,t<0?0:t,r)):[]}function Na(e,t){return e&&e.length?vi(e,_o(t,3),!1,!0):[]}function qa(e,t){return e&&e.length?vi(e,_o(t,3)):[]}function Ha(e){return e&&e.length?mi(e):[]}function Va(e,t){return e&&e.length?mi(e,_o(t,2)):[]}function Ya(e,t){return t="function"==typeof t?t:re,e&&e.length?mi(e,re,t):[]}function za(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Gs(e))return t=Yl(e.length,t),!0}),C(t,function(t){return d(e,I(t))})}function Ga(e,t){if(!e||!e.length)return[];var n=za(e);return null==t?n:d(n,function(e){return o(t,re,e)})}function Wa(e,t){return _i(e||[],t||[],An)}function Qa(e,t){return _i(e||[],t||[],ai)}function Ja(e){var t=n(e);return t.__chain__=!0,t}function Ka(e,t){return t(e),e}function Xa(e,t){return t(e)}function Za(){return Ja(this)}function es(){return new i(this.value(),this.__chain__)}function ts(){this.__values__===re&&(this.__values__=Sc(this.value()));var e=this.__index__>=this.__values__.length,t=e?re:this.__values__[this.__index__++];return{done:e,value:t}}function ns(){return this}function rs(e){for(var t,n=this;n instanceof r;){var i=na(n);i.__index__=0,i.__values__=re,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function is(){var e=this.__wrapped__;if(e instanceof v){var t=e;return this.__actions__.length&&(t=new v(this)),t=t.reverse(),t.__actions__.push({func:Xa,args:[Pa],thisArg:re}),new i(t,this.__chain__)}return this.thru(Pa)}function os(){return bi(this.__wrapped__,this.__actions__)}function as(e,t,n){var r=yp(e)?u:Yn;return n&&ko(e,t,n)&&(t=re),r(e,_o(t,3))}function ss(e,t){var n=yp(e)?l:Xn;return n(e,_o(t,3))}function cs(e,t){return Zn(hs(e,t),1)}function us(e,t){return Zn(hs(e,t),De)}function ls(e,t,n){return n=n===re?1:Oc(n),Zn(hs(e,t),n)}function fs(e,t){var n=yp(e)?s:mf;return n(e,_o(t,3))}function ps(e,t){var n=yp(e)?c:gf;return n(e,_o(t,3))}function ds(e,t,n,r){e=zs(e)?e:Zc(e),n=n&&!r?Oc(n):0;var i=e.length;return n<0&&(n=Yl(i+n,0)),mc(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&O(e,t,n)>-1}function hs(e,t){var n=yp(e)?d:qr;return n(e,_o(t,3))}function ms(e,t,n,r){return null==e?[]:(yp(t)||(t=null==t?[]:[t]),n=r?re:n,yp(n)||(n=null==n?[]:[n]),Wr(e,t,n))}function gs(e,t,n){var r=yp(e)?m:P,i=arguments.length<3;return r(e,_o(t,4),n,i,mf)}function ys(e,t,n){var r=yp(e)?g:P,i=arguments.length<3;return r(e,_o(t,4),n,i,gf)}function vs(e,t){var n=yp(e)?l:Xn;return n(e,$s(_o(t,3)))}function bs(e){var t=yp(e)?In:ii;return t(e)}function Ss(e,t,n){t=(n?ko(e,t,n):t===re)?1:Oc(t);var r=yp(e)?Rn:oi;return r(e,t)}function _s(e){var t=yp(e)?Pn:si;return t(e)}function Os(e){if(null==e)return 0;if(zs(e))return mc(e)?X(e):e.length;var t=Rf(e);return t==Je||t==rt?e.size:Ur(e).length}function Ts(e,t,n){var r=yp(e)?y:ui;return n&&ko(e,t,n)&&(t=re),r(e,_o(t,3))}function Es(e,t){if("function"!=typeof t)throw new ll(se);return e=Oc(e),function(){if(--e<1)return t.apply(this,arguments)}}function ws(e,t,n){return t=n?re:t,t=e&&null==t?e.length:t,co(e,Te,re,re,re,re,t)}function Is(e,t){var n;if("function"!=typeof t)throw new ll(se);return e=Oc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=re),n}}function Rs(e,t,n){t=n?re:t;var r=co(e,be,re,re,re,re,re,t);return r.placeholder=Rs.placeholder,r}function Ps(e,t,n){t=n?re:t;var r=co(e,Se,re,re,re,re,re,t);return r.placeholder=Ps.placeholder,r}function js(e,t,n){function r(t){var n=p,r=d;return p=d=re,v=t,m=e.apply(r,n)}function i(e){return v=e,g=Af(s,t),b?r(e):m}function o(e){var n=e-y,r=e-v,i=t-n;return S?zl(i,h-r):i}function a(e){var n=e-y,r=e-v;return y===re||n>=t||n<0||S&&r>=h}function s(){var e=op();return a(e)?c(e):void(g=Af(s,o(e)))}function c(e){return g=re,_&&p?r(e):(p=d=re,m)}function u(){g!==re&&Of(g),v=0,p=y=d=g=re}function l(){return g===re?m:c(op())}function f(){var e=op(),n=a(e);if(p=arguments,d=this,y=e,n){if(g===re)return i(y);if(S)return g=Af(s,t),r(y)}return g===re&&(g=Af(s,t)),m}var p,d,h,m,g,y,v=0,b=!1,S=!1,_=!0;if("function"!=typeof e)throw new ll(se);return t=Ec(t)||0,ic(n)&&(b=!!n.leading,S="maxWait"in n,h=S?Yl(Ec(n.maxWait)||0,t):h,_="trailing"in n?!!n.trailing:_),f.cancel=u,f.flush=l,f}function As(e){return co(e,we)}function Cs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ll(se);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Cs.Cache||ln),n}function $s(e){if("function"!=typeof e)throw new ll(se);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ds(e){return Is(2,e)}function Ls(e,t){if("function"!=typeof e)throw new ll(se);return t=t===re?t:Oc(t),ri(e,t)}function ks(e,t){if("function"!=typeof e)throw new ll(se);return t=null==t?0:Yl(Oc(t),0),ri(function(n){var r=n[t],i=wi(n,0,t);return r&&h(i,r),o(e,this,i)})}function Ms(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ll(se);return ic(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),js(e,t,{leading:r,maxWait:t,trailing:i})}function xs(e){return ws(e,1)}function Fs(e,t){return fp(Ti(t),e)}function Us(){if(!arguments.length)return[];var e=arguments[0];return yp(e)?e:[e]}function Bs(e){return Fn(e,de)}function Ns(e,t){return t="function"==typeof t?t:re,Fn(e,de,t)}function qs(e){return Fn(e,fe|de)}function Hs(e,t){return t="function"==typeof t?t:re,Fn(e,fe|de,t)}function Vs(e,t){return null==t||Bn(e,t,Bc(t))}function Ys(e,t){return e===t||e!==e&&t!==t}function zs(e){return null!=e&&rc(e.length)&&!tc(e)}function Gs(e){return oc(e)&&zs(e)}function Ws(e){return e===!0||e===!1||oc(e)&&ur(e)==Ve}function Qs(e){return oc(e)&&1===e.nodeType&&!dc(e)}function Js(e){if(null==e)return!0;if(zs(e)&&(yp(e)||"string"==typeof e||"function"==typeof e.splice||bp(e)||Ep(e)||gp(e)))return!e.length;var t=Rf(e);if(t==Je||t==rt)return!e.size;if(Bo(e))return!Ur(e).length;for(var n in e)if(gl.call(e,n))return!1;return!0}function Ks(e,t){return Ar(e,t)}function Xs(e,t,n){n="function"==typeof n?n:re;var r=n?n(e,t):re;return r===re?Ar(e,t,re,n):!!r}function Zs(e){if(!oc(e))return!1;var t=ur(e);return t==Ge||t==ze||"string"==typeof e.message&&"string"==typeof e.name&&!dc(e)}function ec(e){return"number"==typeof e&&ql(e)}function tc(e){if(!ic(e))return!1;var t=ur(e);return t==We||t==Qe||t==He||t==tt}function nc(e){return"number"==typeof e&&e==Oc(e)}function rc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Le}function ic(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function oc(e){return null!=e&&"object"==typeof e}function ac(e,t){return e===t||Dr(e,t,To(t))}function sc(e,t,n){return n="function"==typeof n?n:re,Dr(e,t,To(t),n)}function cc(e){return pc(e)&&e!=+e}function uc(e){if(Pf(e))throw new il(ae);return Lr(e)}function lc(e){return null===e}function fc(e){return null==e}function pc(e){return"number"==typeof e||oc(e)&&ur(e)==Ke}function dc(e){if(!oc(e)||ur(e)!=Ze)return!1;var t=Rl(e);if(null===t)return!0;var n=gl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ml.call(n)==Sl}function hc(e){return nc(e)&&e>=-Le&&e<=Le}function mc(e){return"string"==typeof e||!yp(e)&&oc(e)&&ur(e)==it}function gc(e){return"symbol"==typeof e||oc(e)&&ur(e)==ot}function yc(e){return e===re}function vc(e){return oc(e)&&Rf(e)==st}function bc(e){return oc(e)&&ur(e)==ct}function Sc(e){if(!e)return[];if(zs(e))return mc(e)?Z(e):Mi(e);if($l&&e[$l])return H(e[$l]());var t=Rf(e),n=t==Je?V:t==rt?W:Zc;return n(e)}function _c(e){if(!e)return 0===e?e:0;if(e=Ec(e),e===De||e===-De){var t=e<0?-1:1;return t*ke}return e===e?e:0}function Oc(e){var t=_c(e),n=t%1;return t===t?n?t-n:t:0}function Tc(e){return e?xn(Oc(e),0,xe):0}function Ec(e){if("number"==typeof e)return e;if(gc(e))return Me;if(ic(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ic(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(kt,"");var n=zt.test(e);return n||Wt.test(e)?nr(e.slice(2),n?2:8):Yt.test(e)?Me:+e}function wc(e){return xi(e,Nc(e))}function Ic(e){return e?xn(Oc(e),-Le,Le):0===e?e:0}function Rc(e){return null==e?"":hi(e)}function Pc(e,t){var n=hf(e);return null==t?n:Dn(n,t)}function jc(e,t){return S(e,_o(t,3),er)}function Ac(e,t){return S(e,_o(t,3),rr)}function Cc(e,t){return null==e?e:yf(e,_o(t,3),Nc)}function $c(e,t){return null==e?e:vf(e,_o(t,3),Nc)}function Dc(e,t){return e&&er(e,_o(t,3))}function Lc(e,t){return e&&rr(e,_o(t,3))}function kc(e){return null==e?[]:ir(e,Bc(e))}function Mc(e){return null==e?[]:ir(e,Nc(e))}function xc(e,t,n){var r=null==e?re:ar(e,t);return r===re?n:r}function Fc(e,t){return null!=e&&Po(e,t,yr)}function Uc(e,t){return null!=e&&Po(e,t,_r)}function Bc(e){return zs(e)?wn(e):Ur(e)}function Nc(e){return zs(e)?wn(e,!0):Br(e)}function qc(e,t){var n={};return t=_o(t,3),er(e,function(e,r,i){kn(n,t(e,r,i),e)}),n}function Hc(e,t){var n={};return t=_o(t,3),er(e,function(e,r,i){kn(n,r,t(e,r,i))}),n}function Vc(e,t){return Yc(e,$s(_o(t)))}function Yc(e,t){if(null==e)return{};var n=d(vo(e),function(e){return[e]});return t=_o(t),Jr(e,n,function(e,n){return t(e,n[0])})}function zc(e,t,n){t=Ei(t,e);var r=-1,i=t.length;for(i||(i=1,e=re);++r<i;){var o=null==e?re:e[Zo(t[r])];o===re&&(r=i,o=n),e=tc(o)?o.call(e):o}return e}function Gc(e,t,n){return null==e?e:ai(e,t,n)}function Wc(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:ai(e,t,n,r)}function Qc(e,t,n){var r=yp(e),i=r||bp(e)||Ep(e);if(t=_o(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ic(e)&&tc(o)?hf(Rl(e)):{}}return(i?s:er)(e,function(e,r,i){return t(n,e,r,i)}),n}function Jc(e,t){return null==e||gi(e,t)}function Kc(e,t,n){return null==e?e:yi(e,t,Ti(n))}function Xc(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:yi(e,t,Ti(n),r)}function Zc(e){return null==e?[]:L(e,Bc(e))}function eu(e){return null==e?[]:L(e,Nc(e))}function tu(e,t,n){return n===re&&(n=t,t=re),n!==re&&(n=Ec(n),n=n===n?n:0),t!==re&&(t=Ec(t),t=t===t?t:0),xn(Ec(e),t,n)}function nu(e,t,n){return t=_c(t),n===re?(n=t,t=0):n=_c(n),e=Ec(e),Tr(e,t,n)}function ru(e,t,n){if(n&&"boolean"!=typeof n&&ko(e,t,n)&&(t=n=re),n===re&&("boolean"==typeof t?(n=t,t=re):"boolean"==typeof e&&(n=e,e=re)),e===re&&t===re?(e=0,t=1):(e=_c(e),t===re?(t=e,e=0):t=_c(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Ql();return zl(e+i*(t-e+tr("1e-"+((i+"").length-1))),t)}return ei(e,t)}function iu(e){return Jp(Rc(e).toLowerCase())}function ou(e){return e=Rc(e),e&&e.replace(Jt,vr).replace(qn,"")}function au(e,t,n){e=Rc(e),t=hi(t);var r=e.length;n=n===re?r:xn(Oc(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function su(e){return e=Rc(e),e&&It.test(e)?e.replace(Et,br):e}function cu(e){return e=Rc(e),e&&Lt.test(e)?e.replace(Dt,"\\$&"):e}function uu(e,t,n){e=Rc(e),t=Oc(t);var r=t?X(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return to(Ul(i),n)+e+to(Fl(i),n)}function lu(e,t,n){e=Rc(e),t=Oc(t);var r=t?X(e):0;return t&&r<t?e+to(t-r,n):e}function fu(e,t,n){e=Rc(e),t=Oc(t);var r=t?X(e):0;return t&&r<t?to(t-r,n)+e:e}function pu(e,t,n){return n||null==t?t=0:t&&(t=+t),Wl(Rc(e).replace(Mt,""),t||0)}function du(e,t,n){return t=(n?ko(e,t,n):t===re)?1:Oc(t),ni(Rc(e),t)}function hu(){var e=arguments,t=Rc(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function mu(e,t,n){return n&&"number"!=typeof n&&ko(e,t,n)&&(t=n=re),(n=n===re?xe:n>>>0)?(e=Rc(e),e&&("string"==typeof t||null!=t&&!Op(t))&&(t=hi(t),!t&&N(e))?wi(Z(e),0,n):e.split(t,n)):[]}function gu(e,t,n){return e=Rc(e),n=null==n?0:xn(Oc(n),0,e.length),t=hi(t),e.slice(n,n+t.length)==t}function yu(e,t,r){var i=n.templateSettings;r&&ko(e,t,r)&&(t=re),e=Rc(e),t=jp({},t,i,uo);var o,a,s=jp({},t.imports,i.imports,uo),c=Bc(s),u=L(s,c),l=0,f=t.interpolate||Kt,p="__p += '",d=cl((t.escape||Kt).source+"|"+f.source+"|"+(f===jt?Ht:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wn+"]")+"\n";e.replace(d,function(t,n,r,i,s,c){return r||(r=i),p+=e.slice(l,c).replace(Xt,U),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),p+="';\n";var m=t.variable;m||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(St,""):p).replace(_t,"$1").replace(Ot,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=Kp(function(){return ol(c,h+"return "+p).apply(re,u)});if(g.source=p,Zs(g))throw g;return g}function vu(e){return Rc(e).toLowerCase()}function bu(e){return Rc(e).toUpperCase()}function Su(e,t,n){if(e=Rc(e),e&&(n||t===re))return e.replace(kt,"");if(!e||!(t=hi(t)))return e;var r=Z(e),i=Z(t),o=M(r,i),a=x(r,i)+1;return wi(r,o,a).join("")}function _u(e,t,n){if(e=Rc(e),e&&(n||t===re))return e.replace(xt,"");if(!e||!(t=hi(t)))return e;var r=Z(e),i=x(r,Z(t))+1;return wi(r,0,i).join("")}function Ou(e,t,n){if(e=Rc(e),e&&(n||t===re))return e.replace(Mt,"");if(!e||!(t=hi(t)))return e;var r=Z(e),i=M(r,Z(t));return wi(r,i).join("")}function Tu(e,t){var n=Ie,r=Re;if(ic(t)){var i="separator"in t?t.separator:i;n="length"in t?Oc(t.length):n,r="omission"in t?hi(t.omission):r}e=Rc(e);var o=e.length;if(N(e)){var a=Z(e);o=a.length}if(n>=o)return e;var s=n-X(r);if(s<1)return r;var c=a?wi(a,0,s).join(""):e.slice(0,s);if(i===re)return c+r;if(a&&(s+=c.length-s),Op(i)){if(e.slice(s).search(i)){var u,l=c;for(i.global||(i=cl(i.source,Rc(Vt.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var f=u.index;c=c.slice(0,f===re?s:f)}}else if(e.indexOf(hi(i),s)!=s){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r}function Eu(e){return e=Rc(e),e&&wt.test(e)?e.replace(Tt,Sr):e}function wu(e,t,n){return e=Rc(e),t=n?re:t,t===re?q(e)?ne(e):b(e):e.match(t)||[]}function Iu(e){var t=null==e?0:e.length,n=_o();return e=t?d(e,function(e){if("function"!=typeof e[1])throw new ll(se);return[n(e[0]),e[1]]}):[],ri(function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Ru(e){return Un(Fn(e,fe))}function Pu(e){return function(){return e}}function ju(e,t){return null==e||e!==e?t:e}function Au(e){return e}function Cu(e){return Fr("function"==typeof e?e:Fn(e,fe))}function $u(e){return Hr(Fn(e,fe))}function Du(e,t){return Vr(e,Fn(t,fe))}function Lu(e,t,n){var r=Bc(t),i=ir(t,r);null!=n||ic(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ir(t,Bc(t)));var o=!(ic(n)&&"chain"in n&&!n.chain),a=tc(e);return s(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,h([this.value()],arguments))})}),e}function ku(){return or._===this&&(or._=_l),this}function Mu(){}function xu(e){return e=Oc(e),ri(function(t){return Gr(t,e)})}function Fu(e){return Mo(e)?I(Zo(e)):Kr(e)}function Uu(e){return function(t){return null==e?re:ar(e,t)}}function Bu(){return[]}function Nu(){return!1}function qu(){return{}}function Hu(){return""}function Vu(){return!0}function Yu(e,t){if(e=Oc(e),e<1||e>Le)return[];var n=xe,r=zl(e,xe);t=_o(t),e-=xe;for(var i=C(r,t);++n<e;)t(n);return i}function zu(e){return yp(e)?d(e,Zo):gc(e)?[e]:Mi($f(Rc(e)))}function Gu(e){var t=++yl;return Rc(e)+t}function Wu(e){return e&&e.length?zn(e,Au,lr):re}function Qu(e,t){return e&&e.length?zn(e,_o(t,2),lr):re}function Ju(e){return w(e,Au)}function Ku(e,t){return w(e,_o(t,2))}function Xu(e){return e&&e.length?zn(e,Au,Nr):re}function Zu(e,t){return e&&e.length?zn(e,_o(t,2),Nr):re}function el(e){return e&&e.length?A(e,Au):0}function tl(e,t){return e&&e.length?A(e,_o(t,2)):0}t=null==t?or:Or.defaults(or.Object(),t,Or.pick(or,Gn));var nl=t.Array,rl=t.Date,il=t.Error,ol=t.Function,al=t.Math,sl=t.Object,cl=t.RegExp,ul=t.String,ll=t.TypeError,fl=nl.prototype,pl=ol.prototype,dl=sl.prototype,hl=t["__core-js_shared__"],ml=pl.toString,gl=dl.hasOwnProperty,yl=0,vl=function(){var e=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bl=dl.toString,Sl=ml.call(sl),_l=or._,Ol=cl("^"+ml.call(gl).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tl=cr?t.Buffer:re,El=t.Symbol,wl=t.Uint8Array,Il=Tl?Tl.allocUnsafe:re,Rl=Y(sl.getPrototypeOf,sl),Pl=sl.create,jl=dl.propertyIsEnumerable,Al=fl.splice,Cl=El?El.isConcatSpreadable:re,$l=El?El.iterator:re,Dl=El?El.toStringTag:re,Ll=function(){try{var e=Eo(sl,"defineProperty");return e({},"",{}),e}catch(e){}}(),kl=t.clearTimeout!==or.clearTimeout&&t.clearTimeout,Ml=rl&&rl.now!==or.Date.now&&rl.now,xl=t.setTimeout!==or.setTimeout&&t.setTimeout,Fl=al.ceil,Ul=al.floor,Bl=sl.getOwnPropertySymbols,Nl=Tl?Tl.isBuffer:re,ql=t.isFinite,Hl=fl.join,Vl=Y(sl.keys,sl),Yl=al.max,zl=al.min,Gl=rl.now,Wl=t.parseInt,Ql=al.random,Jl=fl.reverse,Kl=Eo(t,"DataView"),Xl=Eo(t,"Map"),Zl=Eo(t,"Promise"),ef=Eo(t,"Set"),tf=Eo(t,"WeakMap"),nf=Eo(sl,"create"),rf=tf&&new tf,of={},af=ea(Kl),sf=ea(Xl),cf=ea(Zl),uf=ea(ef),lf=ea(tf),ff=El?El.prototype:re,pf=ff?ff.valueOf:re,df=ff?ff.toString:re,hf=function(){function e(){}return function(t){if(!ic(t))return{};if(Pl)return Pl(t);e.prototype=t;var n=new e;return e.prototype=re,n}}();n.templateSettings={escape:Rt,evaluate:Pt,interpolate:jt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=hf(r.prototype),i.prototype.constructor=i,v.prototype=hf(r.prototype),v.prototype.constructor=v,te.prototype.clear=Nt,te.prototype.delete=Zt,te.prototype.get=en,te.prototype.has=tn,te.prototype.set=nn,rn.prototype.clear=on,rn.prototype.delete=an,rn.prototype.get=sn,rn.prototype.has=cn,rn.prototype.set=un,ln.prototype.clear=fn,ln.prototype.delete=pn,ln.prototype.get=dn,ln.prototype.has=hn,ln.prototype.set=mn,gn.prototype.add=gn.prototype.push=yn,gn.prototype.has=vn,bn.prototype.clear=Sn,bn.prototype.delete=_n,bn.prototype.get=On,bn.prototype.has=Tn,bn.prototype.set=En;var mf=qi(er),gf=qi(rr,!0),yf=Hi(),vf=Hi(!0),bf=rf?function(e,t){return rf.set(e,t),e}:Au,Sf=Ll?function(e,t){return Ll(e,"toString",{configurable:!0,enumerable:!1,value:Pu(t),writable:!0})}:Au,_f=ri,Of=kl||function(e){return or.clearTimeout(e)},Tf=ef&&1/W(new ef([,-0]))[1]==De?function(e){return new ef(e)}:Mu,Ef=rf?function(e){return rf.get(e)}:Mu,wf=Bl?function(e){return null==e?[]:(e=sl(e),l(Bl(e),function(t){return jl.call(e,t)}))}:Bu,If=Bl?function(e){for(var t=[];e;)h(t,wf(e)),e=Rl(e);return t}:Bu,Rf=ur;(Kl&&Rf(new Kl(new ArrayBuffer(1)))!=lt||Xl&&Rf(new Xl)!=Je||Zl&&Rf(Zl.resolve())!=et||ef&&Rf(new ef)!=rt||tf&&Rf(new tf)!=st)&&(Rf=function(e){var t=ur(e),n=t==Ze?e.constructor:re,r=n?ea(n):"";if(r)switch(r){case af:return lt;case sf:return Je;case cf:return et;case uf:return rt;case lf:return st}return t});var Pf=hl?tc:Nu,jf=Ko(bf),Af=xl||function(e,t){return or.setTimeout(e,t)},Cf=Ko(Sf),$f=Ho(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($t,function(e,n,r,i){t.push(r?i.replace(qt,"$1"):n||e)}),t}),Df=ri(function(e,t){return Gs(e)?Vn(e,Zn(t,1,Gs,!0)):[]}),Lf=ri(function(e,t){var n=_a(t);return Gs(n)&&(n=re),Gs(e)?Vn(e,Zn(t,1,Gs,!0),_o(n,2)):[]}),kf=ri(function(e,t){var n=_a(t);return Gs(n)&&(n=re),Gs(e)?Vn(e,Zn(t,1,Gs,!0),re,n):[]}),Mf=ri(function(e){var t=d(e,Oi);return t.length&&t[0]===e[0]?Er(t):[]}),xf=ri(function(e){var t=_a(e),n=d(e,Oi);return t===_a(n)?t=re:n.pop(),n.length&&n[0]===e[0]?Er(n,_o(t,2)):[]}),Ff=ri(function(e){var t=_a(e),n=d(e,Oi);return t="function"==typeof t?t:re,t&&n.pop(),n.length&&n[0]===e[0]?Er(n,re,t):[]}),Uf=ri(Ea),Bf=go(function(e,t){var n=null==e?0:e.length,r=Mn(e,t);return Zr(e,d(t,function(e){return Lo(e,n)?+e:e}).sort($i)),r}),Nf=ri(function(e){return mi(Zn(e,1,Gs,!0))}),qf=ri(function(e){var t=_a(e);return Gs(t)&&(t=re),mi(Zn(e,1,Gs,!0),_o(t,2))}),Hf=ri(function(e){var t=_a(e);return t="function"==typeof t?t:re,mi(Zn(e,1,Gs,!0),re,t)}),Vf=ri(function(e,t){return Gs(e)?Vn(e,t):[]}),Yf=ri(function(e){return Si(l(e,Gs))}),zf=ri(function(e){var t=_a(e);return Gs(t)&&(t=re),Si(l(e,Gs),_o(t,2))}),Gf=ri(function(e){var t=_a(e);return t="function"==typeof t?t:re,Si(l(e,Gs),re,t)}),Wf=ri(za),Qf=ri(function(e){var t=e.length,n=t>1?e[t-1]:re;return n="function"==typeof n?(e.pop(),n):re,Ga(e,n)}),Jf=go(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Mn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof v&&Lo(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Xa,args:[o],thisArg:re}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(re),e})):this.thru(o)}),Kf=Bi(function(e,t,n){gl.call(e,n)?++e[n]:kn(e,n,1)}),Xf=Qi(fa),Zf=Qi(pa),ep=Bi(function(e,t,n){gl.call(e,n)?e[n].push(t):kn(e,n,[t])}),tp=ri(function(e,t,n){var r=-1,i="function"==typeof t,a=zs(e)?nl(e.length):[];return mf(e,function(e){a[++r]=i?o(t,e,n):Ir(e,t,n)}),a}),np=Bi(function(e,t,n){kn(e,n,t)}),rp=Bi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ip=ri(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ko(e,t[0],t[1])?t=[]:n>2&&ko(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,Zn(t,1),[])}),op=Ml||function(){return or.Date.now()},ap=ri(function(e,t,n){var r=ge;if(n.length){var i=z(n,So(ap));r|=_e}return co(e,r,t,n,i)}),sp=ri(function(e,t,n){var r=ge|ye;if(n.length){var i=z(n,So(sp));r|=_e}return co(t,r,e,n,i)}),cp=ri(function(e,t){return Hn(e,1,t)}),up=ri(function(e,t,n){return Hn(e,Ec(t)||0,n)});Cs.Cache=ln;var lp=_f(function(e,t){t=1==t.length&&yp(t[0])?d(t[0],D(_o())):d(Zn(t,1),D(_o()));var n=t.length;return ri(function(r){for(var i=-1,a=zl(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)})}),fp=ri(function(e,t){var n=z(t,So(fp));return co(e,_e,re,t,n)}),pp=ri(function(e,t){var n=z(t,So(pp));return co(e,Oe,re,t,n)}),dp=go(function(e,t){return co(e,Ee,re,re,re,t)}),hp=io(lr),mp=io(function(e,t){return e>=t}),gp=Rr(function(){return arguments}())?Rr:function(e){return oc(e)&&gl.call(e,"callee")&&!jl.call(e,"callee")},yp=nl.isArray,vp=fr?D(fr):Pr,bp=Nl||Nu,Sp=pr?D(pr):jr,_p=dr?D(dr):$r,Op=hr?D(hr):kr,Tp=mr?D(mr):Mr,Ep=gr?D(gr):xr,wp=io(Nr),Ip=io(function(e,t){return e<=t}),Rp=Ni(function(e,t){if(Bo(t)||zs(t))return void xi(t,Bc(t),e);for(var n in t)gl.call(t,n)&&An(e,n,t[n])}),Pp=Ni(function(e,t){xi(t,Nc(t),e)}),jp=Ni(function(e,t,n,r){xi(t,Nc(t),e,r)}),Ap=Ni(function(e,t,n,r){xi(t,Bc(t),e,r)}),Cp=go(Mn),$p=ri(function(e,t){e=sl(e);var n=-1,r=t.length,i=r>2?t[2]:re;for(i&&ko(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Nc(o),s=-1,c=a.length;++s<c;){var u=a[s],l=e[u];(l===re||Ys(l,dl[u])&&!gl.call(e,u))&&(e[u]=o[u])}return e}),Dp=ri(function(e){return e.push(re,lo),o(Fp,re,e)}),Lp=Xi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bl.call(t)),e[t]=n},Pu(Au)),kp=Xi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bl.call(t)),gl.call(e,t)?e[t].push(n):e[t]=[n]},_o),Mp=ri(Ir),xp=Ni(function(e,t,n){Yr(e,t,n)}),Fp=Ni(function(e,t,n,r){Yr(e,t,n,r)}),Up=go(function(e,t){var n={};if(null==e)return n;var r=!1;t=d(t,function(t){return t=Ei(t,e),r||(r=t.length>1),t}),xi(e,vo(e),n),r&&(n=Fn(n,fe|pe|de,fo));for(var i=t.length;i--;)gi(n,t[i]);return n}),Bp=go(function(e,t){return null==e?{}:Qr(e,t)}),Np=so(Bc),qp=so(Nc),Hp=zi(function(e,t,n){return t=t.toLowerCase(),e+(n?iu(t):t)}),Vp=zi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yp=zi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),zp=Yi("toLowerCase"),Gp=zi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Wp=zi(function(e,t,n){return e+(n?" ":"")+Jp(t)}),Qp=zi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Jp=Yi("toUpperCase"),Kp=ri(function(e,t){try{return o(e,re,t)}catch(e){return Zs(e)?e:new il(e)}}),Xp=go(function(e,t){return s(t,function(t){t=Zo(t),kn(e,t,ap(e[t],e))}),e}),Zp=Ji(),ed=Ji(!0),td=ri(function(e,t){return function(n){return Ir(n,e,t)}}),nd=ri(function(e,t){return function(n){return Ir(e,n,t)}}),rd=eo(d),id=eo(u),od=eo(y),ad=ro(),sd=ro(!0),cd=Zi(function(e,t){return e+t},0),ud=ao("ceil"),ld=Zi(function(e,t){return e/t},1),fd=ao("floor"),pd=Zi(function(e,t){return e*t},1),dd=ao("round"),hd=Zi(function(e,t){return e-t},0);return n.after=Es,n.ary=ws,n.assign=Rp,n.assignIn=Pp,n.assignInWith=jp,n.assignWith=Ap,n.at=Cp,n.before=Is,n.bind=ap,n.bindAll=Xp,n.bindKey=sp,n.castArray=Us,n.chain=Ja,n.chunk=ra,n.compact=ia,n.concat=oa,n.cond=Iu,n.conforms=Ru,n.constant=Pu,n.countBy=Kf,n.create=Pc,n.curry=Rs,n.curryRight=Ps,n.debounce=js,n.defaults=$p,n.defaultsDeep=Dp,n.defer=cp,n.delay=up,n.difference=Df,n.differenceBy=Lf,n.differenceWith=kf,n.drop=aa,n.dropRight=sa,n.dropRightWhile=ca,n.dropWhile=ua,n.fill=la,n.filter=ss,n.flatMap=cs,n.flatMapDeep=us,n.flatMapDepth=ls,n.flatten=da,n.flattenDeep=ha,n.flattenDepth=ma,n.flip=As,n.flow=Zp,
n.flowRight=ed,n.fromPairs=ga,n.functions=kc,n.functionsIn=Mc,n.groupBy=ep,n.initial=ba,n.intersection=Mf,n.intersectionBy=xf,n.intersectionWith=Ff,n.invert=Lp,n.invertBy=kp,n.invokeMap=tp,n.iteratee=Cu,n.keyBy=np,n.keys=Bc,n.keysIn=Nc,n.map=hs,n.mapKeys=qc,n.mapValues=Hc,n.matches=$u,n.matchesProperty=Du,n.memoize=Cs,n.merge=xp,n.mergeWith=Fp,n.method=td,n.methodOf=nd,n.mixin=Lu,n.negate=$s,n.nthArg=xu,n.omit=Up,n.omitBy=Vc,n.once=Ds,n.orderBy=ms,n.over=rd,n.overArgs=lp,n.overEvery=id,n.overSome=od,n.partial=fp,n.partialRight=pp,n.partition=rp,n.pick=Bp,n.pickBy=Yc,n.property=Fu,n.propertyOf=Uu,n.pull=Uf,n.pullAll=Ea,n.pullAllBy=wa,n.pullAllWith=Ia,n.pullAt=Bf,n.range=ad,n.rangeRight=sd,n.rearg=dp,n.reject=vs,n.remove=Ra,n.rest=Ls,n.reverse=Pa,n.sampleSize=Ss,n.set=Gc,n.setWith=Wc,n.shuffle=_s,n.slice=ja,n.sortBy=ip,n.sortedUniq=Ma,n.sortedUniqBy=xa,n.split=mu,n.spread=ks,n.tail=Fa,n.take=Ua,n.takeRight=Ba,n.takeRightWhile=Na,n.takeWhile=qa,n.tap=Ka,n.throttle=Ms,n.thru=Xa,n.toArray=Sc,n.toPairs=Np,n.toPairsIn=qp,n.toPath=zu,n.toPlainObject=wc,n.transform=Qc,n.unary=xs,n.union=Nf,n.unionBy=qf,n.unionWith=Hf,n.uniq=Ha,n.uniqBy=Va,n.uniqWith=Ya,n.unset=Jc,n.unzip=za,n.unzipWith=Ga,n.update=Kc,n.updateWith=Xc,n.values=Zc,n.valuesIn=eu,n.without=Vf,n.words=wu,n.wrap=Fs,n.xor=Yf,n.xorBy=zf,n.xorWith=Gf,n.zip=Wf,n.zipObject=Wa,n.zipObjectDeep=Qa,n.zipWith=Qf,n.entries=Np,n.entriesIn=qp,n.extend=Pp,n.extendWith=jp,Lu(n,n),n.add=cd,n.attempt=Kp,n.camelCase=Hp,n.capitalize=iu,n.ceil=ud,n.clamp=tu,n.clone=Bs,n.cloneDeep=qs,n.cloneDeepWith=Hs,n.cloneWith=Ns,n.conformsTo=Vs,n.deburr=ou,n.defaultTo=ju,n.divide=ld,n.endsWith=au,n.eq=Ys,n.escape=su,n.escapeRegExp=cu,n.every=as,n.find=Xf,n.findIndex=fa,n.findKey=jc,n.findLast=Zf,n.findLastIndex=pa,n.findLastKey=Ac,n.floor=fd,n.forEach=fs,n.forEachRight=ps,n.forIn=Cc,n.forInRight=$c,n.forOwn=Dc,n.forOwnRight=Lc,n.get=xc,n.gt=hp,n.gte=mp,n.has=Fc,n.hasIn=Uc,n.head=ya,n.identity=Au,n.includes=ds,n.indexOf=va,n.inRange=nu,n.invoke=Mp,n.isArguments=gp,n.isArray=yp,n.isArrayBuffer=vp,n.isArrayLike=zs,n.isArrayLikeObject=Gs,n.isBoolean=Ws,n.isBuffer=bp,n.isDate=Sp,n.isElement=Qs,n.isEmpty=Js,n.isEqual=Ks,n.isEqualWith=Xs,n.isError=Zs,n.isFinite=ec,n.isFunction=tc,n.isInteger=nc,n.isLength=rc,n.isMap=_p,n.isMatch=ac,n.isMatchWith=sc,n.isNaN=cc,n.isNative=uc,n.isNil=fc,n.isNull=lc,n.isNumber=pc,n.isObject=ic,n.isObjectLike=oc,n.isPlainObject=dc,n.isRegExp=Op,n.isSafeInteger=hc,n.isSet=Tp,n.isString=mc,n.isSymbol=gc,n.isTypedArray=Ep,n.isUndefined=yc,n.isWeakMap=vc,n.isWeakSet=bc,n.join=Sa,n.kebabCase=Vp,n.last=_a,n.lastIndexOf=Oa,n.lowerCase=Yp,n.lowerFirst=zp,n.lt=wp,n.lte=Ip,n.max=Wu,n.maxBy=Qu,n.mean=Ju,n.meanBy=Ku,n.min=Xu,n.minBy=Zu,n.stubArray=Bu,n.stubFalse=Nu,n.stubObject=qu,n.stubString=Hu,n.stubTrue=Vu,n.multiply=pd,n.nth=Ta,n.noConflict=ku,n.noop=Mu,n.now=op,n.pad=uu,n.padEnd=lu,n.padStart=fu,n.parseInt=pu,n.random=ru,n.reduce=gs,n.reduceRight=ys,n.repeat=du,n.replace=hu,n.result=zc,n.round=dd,n.runInContext=e,n.sample=bs,n.size=Os,n.snakeCase=Gp,n.some=Ts,n.sortedIndex=Aa,n.sortedIndexBy=Ca,n.sortedIndexOf=$a,n.sortedLastIndex=Da,n.sortedLastIndexBy=La,n.sortedLastIndexOf=ka,n.startCase=Wp,n.startsWith=gu,n.subtract=hd,n.sum=el,n.sumBy=tl,n.template=yu,n.times=Yu,n.toFinite=_c,n.toInteger=Oc,n.toLength=Tc,n.toLower=vu,n.toNumber=Ec,n.toSafeInteger=Ic,n.toString=Rc,n.toUpper=bu,n.trim=Su,n.trimEnd=_u,n.trimStart=Ou,n.truncate=Tu,n.unescape=Eu,n.uniqueId=Gu,n.upperCase=Qp,n.upperFirst=Jp,n.each=fs,n.eachRight=ps,n.first=ya,Lu(n,function(){var e={};return er(n,function(t,r){gl.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION=ie,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){v.prototype[e]=function(n){n=n===re?1:Yl(Oc(n),0);var r=this.__filtered__&&!t?new v(this):this.clone();return r.__filtered__?r.__takeCount__=zl(n,r.__takeCount__):r.__views__.push({size:zl(n,xe),type:e+(r.__dir__<0?"Right":"")}),r},v.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Ae||n==$e;v.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:_o(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");v.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");v.prototype[e]=function(){return this.__filtered__?new v(this):this[n](1)}}),v.prototype.compact=function(){return this.filter(Au)},v.prototype.find=function(e){return this.filter(e).head()},v.prototype.findLast=function(e){return this.reverse().find(e)},v.prototype.invokeMap=ri(function(e,t){return"function"==typeof e?new v(this):this.map(function(n){return Ir(n,e,t)})}),v.prototype.reject=function(e){return this.filter($s(_o(e)))},v.prototype.slice=function(e,t){e=Oc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new v(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==re&&(t=Oc(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},v.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},v.prototype.toArray=function(){return this.take(xe)},er(v.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,c=o?[1]:arguments,u=t instanceof v,l=c[0],f=u||yp(t),p=function(e){var t=a.apply(n,h([e],c));return o&&d?t[0]:t};f&&r&&"function"==typeof l&&1!=l.length&&(u=f=!1);var d=this.__chain__,m=!!this.__actions__.length,g=s&&!d,y=u&&!m;if(!s&&f){t=y?t:new v(this);var b=e.apply(t,c);return b.__actions__.push({func:Xa,args:[p],thisArg:re}),new i(b,d)}return g&&y?e.apply(this,c):(b=this.thru(p),g?o?b.value()[0]:b.value():b)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=fl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(yp(n)?n:[],e)}return this[r](function(n){return t.apply(yp(n)?n:[],e)})}}),er(v.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"",o=of[i]||(of[i]=[]);o.push({name:t,func:r})}}),of[Ki(re,ye).name]=[{name:"wrapper",func:re}],v.prototype.clone=R,v.prototype.reverse=J,v.prototype.value=ee,n.prototype.at=Jf,n.prototype.chain=Za,n.prototype.commit=es,n.prototype.next=ts,n.prototype.plant=rs,n.prototype.reverse=is,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=os,n.prototype.first=n.prototype.head,$l&&(n.prototype[$l]=ns),n},Or=_r();or._=Or,i=function(){return Or}.call(t,n,t,r),!(i!==re&&(r.exports=i))}).call(this)}).call(t,n(68),n(23)(e))},,function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(250),c=n(12),u=n(38),l=function(){function e(e,t,n,r){this.accountService=e,this.formBuilderService=t,this.dateUtils=n,this.$translate=r,this._formFields=[],this._form=[],this._formData={},this._uiTypes={TextField:c.FormBuilderEnums.UI_TYPE.TEXT,Date:c.FormBuilderEnums.UI_TYPE.DATE,TextArea:c.FormBuilderEnums.UI_TYPE.TEXT_AREA,Hidden:c.FormBuilderEnums.UI_TYPE.HIDDEN,ComboBox:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,ComboBoxMultipleNew:c.FormBuilderEnums.UI_TYPE.DROP_DOWN_MULTIPLE,Radio:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON},this._fieldType={String:"string",Date:"date",ComboBoxMultipleNew:"comboboxmultiplenew"}}return e.prototype.deleteFile=function(e,t){e.splice(t,1)},e.prototype.commit=function(e){return this.accountService.makeIlsRequest("submit_deposit",e)},e.prototype.validateForm=function(e,t){var n=[],r=!0;return e.title&&""!=e.title||0!=this._form.length||(r=!1),0!=this._form.length&&this._formFields.forEach(function(e){var n=t;n[e.name]&&n[e.name].$error&&n[e.name].$error.required&&(n[e.name].$dirty=!0,r=!1)}),e.saveAsDraft||e.depositFiles&&e.depositFiles.length||(r=!1,n.push("nui.deposit.validation.mandatoryFiles")),{isOk:r,errorMessages:n}},Object.defineProperty(e.prototype,"formFields",{get:function(){return this._formFields},set:function(e){this._formFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},set:function(e){this._form=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this._formData},set:function(e){this._formData=e},enumerable:!0,configurable:!0}),e.prototype.handleDynamicForm=function(e,t){var n=this;if(this._formFields=[],this._formData={},this._form=[],void 0!=e){var r=[],i=e.formfields.formfield;i.forEach(function(e){var i=t;r.push(n.parseField(e,i))}),this._formFields=r,this._form=r}},e.prototype.parseField=function(e,t){var n={};"Radio"==e.uitype&&(n={layout:"column"});var r={key:e.key,name:e.name,label:e.label,mandatory:e.mandatory,uiType:this._uiTypes[e.uitype],fieldType:this._fieldType[e.fieldtype],options:this.parseOptions(e.options),value:e.value,css:"deposit-dialog-container",style:n,tooltip:e.tooltip};return this._formData[r.name]=r.value,void 0!=t[r.name]&&(r.fieldType===c.FormBuilderEnums.FIELD_TYPE.DATE?this._formData[r.name]=this.dateUtils.convertPrimoDateStringToDateType(t[r.name]):this._formData[r.name]=t[r.name]),r},e.prototype.parseOptions=function(e){var t=[];return void 0!=e&&void 0!=e.option&&e.option.forEach(function(e){return t.push({label:e.value,value:e.key})}),t},e.prototype.isExceededMaxNoOfFiles=function(e){if(void 0==e.depositFiles||0==e.depositFiles.length)return!1;for(var t=0;t<e.depositFiles.length;t++)if(e.depositFiles[t].exceedNoOfFileLimit)return!0;return!1},e.prototype.isExceededMaxFileSize=function(e){if(void 0==e.depositFiles||0==e.depositFiles.length)return!1;for(var t=0;t<e.depositFiles.length;t++)if(e.depositFiles[t].exceedFileSizeLimit)return!0;return!1},e.prototype.isNotAllowedFileExtension=function(e){if(void 0==e.depositFiles||0==e.depositFiles.length)return!1;for(var t=0;t<e.depositFiles.length;t++)if(e.depositFiles[t].notAllowedFileExtension)return!0;return!1},e=r([a.Injectable(),o(3,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.AccountService&&s.AccountService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.FormBuilderService&&c.FormBuilderService)&&n||Object,"function"==typeof(l="undefined"!=typeof u.DateUtils&&u.DateUtils)&&l||Object,Object])],e);var t,n,l}();t.DepositFormService=l,t.default=[]},function(e,t,n){e.exports=n(433)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(434);var r=n(435);n(436),n(5),n(438);var i=n(0),o=n(474),a=n(5);r.bootstrapConfiguration().then(function(e){if(window.location.search.indexOf("noCustomization=true")>-1)return a.bootstrap(document.querySelector("primo-explore"),[i.bundle(o.PrimoExploreModule).name]);var t,n,r=[];if(e[0])try{t=a.module("centralCustom")}catch(e){}if(t&&r.push("centralCustom"),e[1])try{n=a.module("viewCustom")}catch(e){}return n&&r.push("viewCustom"),a.bootstrap(document.querySelector("primo-explore"),[i.bundle(o.PrimoExploreModule,r).name])})},function(e,t,n){var r;!function(i,o,a){"use strict";!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(50),n(51),n(52),n(54),n(55),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(68),n(70),n(72),n(74),n(77),n(78),n(79),n(83),n(86),n(87),n(88),n(89),n(91),n(92),n(93),n(94),n(95),n(97),n(99),n(100),n(101),n(103),n(104),n(105),n(107),n(108),n(109),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(126),n(130),n(131),n(132),n(133),n(137),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(158),n(159),n(161),n(162),n(163),n(167),n(168),n(169),n(170),n(171),n(173),n(174),n(175),n(176),n(179),n(181),n(182),n(183),n(185),n(187),n(189),n(190),n(191),n(193),n(194),n(195),n(196),n(203),n(206),n(207),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(231),n(234),n(235),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(258),n(259),n(261),n(262),n(263),n(264),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),e.exports=n(288)},function(e,t,n){var r=n(2),i=n(3),o=n(4),s=n(6),c=n(16),u=n(20).KEY,l=n(5),f=n(21),p=n(22),d=n(17),h=n(23),m=n(24),g=n(25),y=n(27),v=n(40),b=n(43),S=n(10),_=n(30),O=n(14),T=n(15),E=n(44),w=n(47),I=n(49),R=n(9),P=n(28),j=I.f,A=R.f,C=w.f,$=r.Symbol,D=r.JSON,L=D&&D.stringify,k="prototype",M=h("_hidden"),x=h("toPrimitive"),F={}.propertyIsEnumerable,U=f("symbol-registry"),B=f("symbols"),N=f("op-symbols"),q=Object[k],H="function"==typeof $,V=r.QObject,Y=!V||!V[k]||!V[k].findChild,z=o&&l(function(){return 7!=E(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=j(q,t);r&&delete q[t],A(e,t,n),r&&e!==q&&A(q,t,r)}:A,G=function(e){var t=B[e]=E($[k]);return t._k=e,t},W=H&&"symbol"==typeof $.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof $},Q=function(e,t,n){return e===q&&Q(N,t,n),S(e),t=O(t,!0),S(n),i(B,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=E(n,{enumerable:T(0,!1)})):(i(e,M)||A(e,M,T(1,{})),e[M][t]=!0),z(e,t,n)):A(e,t,n)},J=function(e,t){S(e);for(var n,r=v(t=_(t)),i=0,o=r.length;o>i;)Q(e,n=r[i++],t[n]);return e},K=function(e,t){return t===a?E(e):J(E(e),t)},X=function(e){var t=F.call(this,e=O(e,!0));return!(this===q&&i(B,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,M)&&this[M][e])||t)},Z=function(e,t){if(e=_(e),t=O(t,!0),e!==q||!i(B,t)||i(N,t)){var n=j(e,t);return!n||!i(B,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=C(_(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==M||t==u||r.push(t);return r},te=function(e){for(var t,n=e===q,r=C(n?N:_(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(q,t)||o.push(B[t]);return o};H||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:a),t=function(n){this===q&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),z(this,e,T(1,n))};return o&&Y&&z(q,e,{configurable:!0,set:t}),G(e)},c($[k],"toString",function(){return this._k}),I.f=Z,R.f=Q,n(48).f=w.f=ee,n(42).f=X,n(41).f=te,o&&!n(26)&&c(q,"propertyIsEnumerable",X,!0),m.f=function(e){return G(h(e))}),s(s.G+s.W+s.F*!H,{Symbol:$});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ne=P(h.store),re=0;ne.length>re;)g(ne[re++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=$(e)},keyFor:function(e){if(W(e))return y(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!H,"Object",{create:K,defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),D&&s(s.S+s.F*(!H||l(function(){var e=$();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function(e){if(e!==a&&!W(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,L.apply(D,r)}}}),$[k][x]||n(8)($[k],x,$[k].valueOf),p($,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof o&&(o=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(2),i=n(7),o=n(8),s=n(16),c=n(18),u="prototype",l=function(e,t,n){var f,p,d,h,m=e&l.F,g=e&l.G,y=e&l.S,v=e&l.P,b=e&l.B,S=g?r:y?r[t]||(r[t]={}):(r[t]||{})[u],_=g?i:i[t]||(i[t]={}),O=_[u]||(_[u]={});g&&(n=t);for(f in n)p=!m&&S&&S[f]!==a,d=(p?S:n)[f],h=b&&p?c(d,r):v&&"function"==typeof d?c(Function.call,d):d,S&&s(S,f,d,e&l.U),_[f]!=d&&o(_,f,h),v&&O[f]!=d&&(O[f]=d)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof i&&(i=n)},function(e,t,n){var r=n(9),i=n(15);e.exports=n(4)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(10),i=n(12),o=n(14),a=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(4)&&!n(5)(function(){return 7!=Object.defineProperty(n(13)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(11),i=n(2).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2),i=n(8),o=n(3),a=n(17)("src"),s="toString",c=Function[s],u=(""+c).split(s);n(7).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||c.call(this)})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(e===a?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),t===a)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(17)("meta"),i=n(11),o=n(3),a=n(9).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(5)(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},p=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},d=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&l(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},function(e,t,n){var r=n(2),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var r=n(9).f,i=n(3),o=n(23)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(21)("wks"),i=n(17),o=n(2).Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},function(e,t,n){t.f=n(23)},function(e,t,n){var r=n(2),i=n(7),o=n(26),a=n(24),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){e.exports=!1},function(e,t,n){var r=n(28),i=n(30);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===t)return n}},function(e,t,n){var r=n(29),i=n(39);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(3),i=n(30),o=n(34)(!1),a=n(38)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(31),i=n(33);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==a)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(30),i=n(35),o=n(37);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(36),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(36),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(21)("keys"),i=n(17);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(28),i=n(41),o=n(42);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(10),i=n(45),o=n(39),s=n(38)("IE_PROTO"),c=function(){},u="prototype",l=function(){var e,t=n(13)("iframe"),r=o.length,i="<",a=">";for(t.style.display="none",n(46).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),l=e.F;r--;)delete l[u][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(c[u]=r(e),n=new c,c[u]=null,n[s]=e):n=l(),t===a?n:i(n,t)}},function(e,t,n){var r=n(9),i=n(10),o=n(28);e.exports=n(4)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){e.exports=n(2).document&&document.documentElement},function(e,t,n){var r=n(30),i=n(48).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){var r=n(29),i=n(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(42),i=n(15),o=n(30),a=n(14),s=n(3),c=n(12),u=Object.getOwnPropertyDescriptor;t.f=n(4)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(6);r(r.S+r.F*!n(4),"Object",{defineProperty:n(9).f})},function(e,t,n){var r=n(6);r(r.S+r.F*!n(4),"Object",{defineProperties:n(45)})},function(e,t,n){var r=n(30),i=n(49).f;n(53)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(6),i=n(7),o=n(5);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(6);r(r.S,"Object",{create:n(44)})},function(e,t,n){var r=n(56),i=n(57);n(53)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(33);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(3),i=n(56),o=n(38)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(56),i=n(28);n(53)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(53)("getOwnPropertyNames",function(){return n(47).f})},function(e,t,n){var r=n(11),i=n(20).onFreeze;n(53)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(11),i=n(20).onFreeze;n(53)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(11),i=n(20).onFreeze;n(53)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(11);n(53)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(11);n(53)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(11);n(53)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(67)})},function(e,t,n){var r=n(28),i=n(41),o=n(42),a=n(56),s=n(31),c=Object.assign;e.exports=!c||n(5)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,l=i.f,f=o.f;c>u;)for(var p,d=s(arguments[u++]),h=l?r(d).concat(l(d)):r(d),m=h.length,g=0;m>g;)f.call(d,p=h[g++])&&(n[p]=d[p]);return n}:c},function(e,t,n){var r=n(6);r(r.S,"Object",{is:n(69)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(71).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(18)(Function.call,n(49).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):a),check:o}},function(e,t,n){var r=n(73),i={};i[n(23)("toStringTag")]="z",i+""!="[object z]"&&n(16)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(32),i=n(23)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,c;return e===a?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:o?r(t):"Object"==(c=r(t))&&"function"==typeof t.callee?"Arguments":c}},function(e,t,n){var r=n(6);r(r.P,"Function",{bind:n(75)})},function(e,t,n){var r=n(19),i=n(11),o=n(76),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=n===a;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(9).f,i=n(15),o=n(3),a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",u=Object.isExtensible||function(){return!0};c in a||n(4)&&r(a,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return o(e,c)||!u(e)||r(e,c,i(5,t)),t}catch(e){return""}}})},function(e,t,n){var r=n(11),i=n(57),o=n(23)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(2),i=n(3),o=n(32),a=n(80),s=n(14),c=n(5),u=n(48).f,l=n(49).f,f=n(9).f,p=n(81).trim,d="Number",h=r[d],m=h,g=h.prototype,y=o(n(44)(g))==d,v="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():p(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,l=c.length;u<l;u++)if(a=c.charCodeAt(u),a<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(y?c(function(){g.valueOf.call(n)}):o(n)!=d)?a(new m(b(t)),n,h):b(t)};for(var S,_=n(4)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;_.length>O;O++)i(m,S=_[O])&&!i(h,S)&&f(h,S,l(m,S));h.prototype=g,g.constructor=h,n(16)(r,d,h)}},function(e,t,n){var r=n(11),i=n(71).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(6),i=n(33),o=n(5),a=n(82),s="["+a+"]",c="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,n){var i={},s=o(function(){return!!a[e]()||c[e]()!=c}),u=i[e]=s?t(p):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},p=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(6),i=n(36),o=n(84),a=n(85),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",p=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call(f,7-n.length)+n}return t},m=function(e,t,n){return 0===t?n:t%2===1?m(e,t-1,n*e):m(e*e,t/2,n)},g=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(5)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,l),u=i(e),y="",v=f;if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(t=g(c*m(2,69,1))-69,n=t<0?c*m(2,-t,1):c/m(2,t,1),n*=4503599627370496,t=52-t,t>0){for(p(0,n),r=u;r>=7;)p(1e7,0),r-=7;for(p(m(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),p(1,1),d(2),v=h()}else p(0,n),p(1<<-t,0),v=h()+a.call(f,u);return u>0?(s=v.length,v=y+(s<=u?"0."+a.call(f,u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u))):v=y+v,v}})},function(e,t,n){var r=n(32);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(36),i=n(33);e.exports=function(e){var t=String(i(this)),n="",o=r(e);
if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){var r=n(6),i=n(5),o=n(84),s=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==s.call(1,a)})||!i(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return e===a?s.call(t):s.call(t,e)}})},function(e,t,n){var r=n(6);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(6),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(6);r(r.S,"Number",{isInteger:n(90)})},function(e,t,n){var r=n(11),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){var r=n(6);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(6),i=n(90),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(6);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(6);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(6),i=n(96);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(2).parseFloat,i=n(81).trim;e.exports=1/r(n(82)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(6),i=n(98);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(2).parseInt,i=n(81).trim,o=n(82),a=/^[\-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(6),i=n(98);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(6),i=n(96);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){var r=n(6),i=n(102),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(6),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(6),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(6),i=n(106);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var r=n(6);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(6),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(6),i=n(110);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(6),i=n(106),o=Math.pow,a=o(2,-52),s=o(2,-23),c=o(2,127)*(2-s),u=o(2,-126),l=function(e){return e+1/a-1/a};r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),o=i(e);return r<u?o*l(r/u/s)*u*s:(t=(1+s/a)*r,n=t-(t-r),n>c||n!=n?o*(1/0):o*n)}})},function(e,t,n){var r=n(6),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)n=i(arguments[a++]),c<n?(r=c/n,o=o*r*r+1,c=n):n>0?(r=n/c,o+=r*r):o+=n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,n){var r=n(6),i=Math.imul;r(r.S+r.F*n(5)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var r=n(6);r(r.S,"Math",{log1p:n(102)})},function(e,t,n){var r=n(6);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(6);r(r.S,"Math",{sign:n(106)})},function(e,t,n){var r=n(6),i=n(110),o=Math.exp;r(r.S+r.F*n(5)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(6),i=n(110),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(6);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(6),i=n(37),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(6),i=n(30),o=n(35);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){n(81)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){var r=n(6),i=n(125)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){var r=n(36),i=n(33);e.exports=function(e){return function(t,n){var o,s,c=String(i(t)),u=r(n),l=c.length;return u<0||u>=l?e?"":a:(o=c.charCodeAt(u),o<55296||o>56319||u+1===l||(s=c.charCodeAt(u+1))<56320||s>57343?e?c.charAt(u):o:e?c.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(e,t,n){var r=n(6),i=n(35),o=n(127),s="endsWith",c=""[s];r(r.P+r.F*n(129)(s),"String",{endsWith:function(e){var t=o(this,e,s),n=arguments.length>1?arguments[1]:a,r=i(t.length),u=n===a?r:Math.min(i(n),r),l=String(e);return c?c.call(t,l,u):t.slice(u-l.length,u)===l}})},function(e,t,n){var r=n(128),i=n(33);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(11),i=n(32),o=n(23)("match");e.exports=function(e){var t;return r(e)&&((t=e[o])!==a?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(23)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(6),i=n(127),o="includes";r(r.P+r.F*n(129)(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:a)}})},function(e,t,n){var r=n(6);r(r.P,"String",{repeat:n(85)})},function(e,t,n){var r=n(6),i=n(35),o=n(127),s="startsWith",c=""[s];r(r.P+r.F*n(129)(s),"String",{startsWith:function(e){var t=o(this,e,s),n=i(Math.min(arguments.length>1?arguments[1]:a,t.length)),r=String(e);return c?c.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(125)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:a,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(26),i=n(6),o=n(16),s=n(8),c=n(3),u=n(135),l=n(136),f=n(22),p=n(57),d=n(23)("iterator"),h=!([].keys&&"next"in[].keys()),m="@@iterator",g="keys",y="values",v=function(){return this};e.exports=function(e,t,n,b,S,_,O){l(n,t,b);var T,E,w,I=function(e){if(!h&&e in A)return A[e];switch(e){case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},R=t+" Iterator",P=S==y,j=!1,A=e.prototype,C=A[d]||A[m]||S&&A[S],$=C||I(S),D=S?P?I("entries"):$:a,L="Array"==t?A.entries||C:C;if(L&&(w=p(L.call(new e)),w!==Object.prototype&&(f(w,R,!0),r||c(w,d)||s(w,d,v))),P&&C&&C.name!==y&&(j=!0,$=function(){return C.call(this)}),r&&!O||!h&&!j&&A[d]||s(A,d,$),u[t]=$,u[R]=v,S)if(T={values:P?$:I(y),keys:_?$:I(g),entries:D},O)for(E in T)E in A||o(A,E,T[E]);else i(i.P+i.F*(h||j),t,T);return T}},function(e,t){e.exports={}},function(e,t,n){var r=n(44),i=n(15),o=n(22),a={};n(8)(a,n(23)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){n(138)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var r=n(6),i=n(5),o=n(33),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){n(138)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){n(138)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){n(138)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){n(138)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){n(138)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){n(138)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){n(138)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){n(138)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){n(138)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){n(138)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){n(138)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){n(138)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(6);r(r.S,"Array",{isArray:n(43)})},function(e,t,n){var r=n(18),i=n(6),o=n(56),s=n(153),c=n(154),u=n(35),l=n(155),f=n(156);i(i.S+i.F*!n(157)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,p,d=o(e),h="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:a,y=g!==a,v=0,b=f(d);if(y&&(g=r(g,m>2?arguments[2]:a,2)),b==a||h==Array&&c(b))for(t=u(d.length),n=new h(t);t>v;v++)l(n,v,y?g(d[v],v):d[v]);else for(p=b.call(d),n=new h;!(i=p.next()).done;v++)l(n,v,y?s(p,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw o!==a&&r(o.call(e)),t}}},function(e,t,n){var r=n(135),i=n(23)("iterator"),o=Array.prototype;e.exports=function(e){return e!==a&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(9),i=n(15);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(73),i=n(23)("iterator"),o=n(135);e.exports=n(7).getIteratorMethod=function(e){if(e!=a)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(23)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){var r=n(6),i=n(155);r(r.S+r.F*n(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){var r=n(6),i=n(30),o=[].join;r(r.P+r.F*(n(31)!=Object||!n(160)(o)),"Array",{join:function(e){return o.call(i(this),e===a?",":e)}})},function(e,t,n){var r=n(5);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){var r=n(6),i=n(46),o=n(32),s=n(37),c=n(35),u=[].slice;r(r.P+r.F*n(5)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=c(this.length),r=o(this);if(t=t===a?n:t,"Array"==r)return u.call(this,e,t);for(var i=s(e,n),l=s(t,n),f=c(l-i),p=Array(f),d=0;d<f;d++)p[d]="String"==r?this.charAt(i+d):this[i+d];return p}})},function(e,t,n){var r=n(6),i=n(19),o=n(56),s=n(5),c=[].sort,u=[1,2,3];r(r.P+r.F*(s(function(){u.sort(a)})||!s(function(){u.sort(null)})||!n(160)(c)),"Array",{sort:function(e){return e===a?c.call(o(this)):c.call(o(this),i(e))}})},function(e,t,n){var r=n(6),i=n(164)(0),o=n(160)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(18),i=n(31),o=n(56),s=n(35),c=n(165);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,f=4==e,p=6==e,d=5==e||p,h=t||c;return function(t,c,m){for(var g,y,v=o(t),b=i(v),S=r(c,m,3),_=s(b.length),O=0,T=n?h(t,_):u?h(t,0):a;_>O;O++)if((d||O in b)&&(g=b[O],y=S(g,O,v),e))if(n)T[O]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return O;case 2:T.push(g)}else if(f)return!1;return p?-1:l||f?f:T}}},function(e,t,n){var r=n(166);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(43),o=n(23)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=a),r(t)&&(t=t[o],null===t&&(t=a))),t===a?Array:t}},function(e,t,n){var r=n(6),i=n(164)(1);r(r.P+r.F*!n(160)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(164)(2);r(r.P+r.F*!n(160)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(164)(3);r(r.P+r.F*!n(160)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(164)(4);r(r.P+r.F*!n(160)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(172);r(r.P+r.F*!n(160)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var r=n(19),i=n(56),o=n(31),a=n(35);e.exports=function(e,t,n,s,c){r(t);var u=i(e),l=o(u),f=a(u.length),p=c?f-1:0,d=c?-1:1;if(n<2)for(;;){if(p in l){s=l[p],p+=d;break}if(p+=d,c?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;c?p>=0:f>p;p+=d)p in l&&(s=t(s,l[p],p,u));return s}},function(e,t,n){var r=n(6),i=n(172);r(r.P+r.F*!n(160)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){var r=n(6),i=n(34)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(160)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(30),o=n(36),a=n(35),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(160)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(6);r(r.P,"Array",{copyWithin:n(177)}),n(178)("copyWithin")},function(e,t,n){var r=n(56),i=n(37),o=n(35);e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),c=i(e,s),u=i(t,s),l=arguments.length>2?arguments[2]:a,f=Math.min((l===a?s:i(l,s))-u,s-c),p=1;for(u<c&&c<u+f&&(p=-1,u+=f-1,c+=f-1);f-- >0;)u in n?n[c]=n[u]:delete n[c],c+=p,u+=p;return n}},function(e,t,n){var r=n(23)("unscopables"),i=Array.prototype;i[r]==a&&n(8)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(6);r(r.P,"Array",{fill:n(180)}),n(178)("fill")},function(e,t,n){var r=n(56),i=n(37),o=n(35);e.exports=function(e){for(var t=r(this),n=o(t.length),s=arguments.length,c=i(s>1?arguments[1]:a,n),u=s>2?arguments[2]:a,l=u===a?n:i(u,n);l>c;)t[c++]=e;return t}},function(e,t,n){var r=n(6),i=n(164)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:a)}}),n(178)(o)},function(e,t,n){var r=n(6),i=n(164)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:a)}}),n(178)(o)},function(e,t,n){var r=n(178),i=n(184),o=n(135),s=n(30);e.exports=n(134)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=a,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(186)("Array")},function(e,t,n){var r=n(2),i=n(9),o=n(4),a=n(23)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(2),i=n(80),o=n(9).f,s=n(48).f,c=n(128),u=n(188),l=r.RegExp,f=l,p=l.prototype,d=/a/g,h=/a/g,m=new l(d)!==d;if(n(4)&&(!m||n(5)(function(){return h[n(23)("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")}))){l=function(e,t){var n=this instanceof l,r=c(e),o=t===a;return!n&&r&&e.constructor===l&&o?e:i(m?new f(r&&!o?e.source:e,t):f((r=e instanceof l)?e.source:e,r&&o?u.call(e):t),n?this:p,l)};for(var g=(function(e){e in l||o(l,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})}),y=s(f),v=0;y.length>v;)g(y[v++]);p.constructor=l,l.prototype=p,n(16)(r,"RegExp",l)}n(186)("RegExp")},function(e,t,n){var r=n(10);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){n(190);var r=n(10),i=n(188),o=n(4),s="toString",c=/./[s],u=function(e){n(16)(RegExp.prototype,s,e,!0)};n(5)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):a)}):c.name!=s&&u(function(){return c.call(this)})},function(e,t,n){n(4)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(188)})},function(e,t,n){n(192)("match",1,function(e,t,n){return[function(n){var r=e(this),i=n==a?a:n[t];return i!==a?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){var r=n(8),i=n(16),o=n(5),a=n(33),s=n(23);e.exports=function(e,t,n){var c=s(e),u=n(a,c,""[e]),l=u[0],f=u[1];o(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,l),r(RegExp.prototype,c,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,n){n(192)("replace",2,function(e,t,n){return[function(r,i){var o=e(this),s=r==a?a:r[t];return s!==a?s.call(r,o,i):n.call(String(o),r,i)},n]})},function(e,t,n){n(192)("search",1,function(e,t,n){return[function(n){var r=e(this),i=n==a?a:n[t];return i!==a?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(192)("split",2,function(e,t,r){var i=n(128),o=r,s=[].push,c="split",u="length",l="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[u]||2!="ab"[c](/(?:ab)*/)[u]||4!="."[c](/(.?)(.?)/)[u]||"."[c](/()()/)[u]>1||""[c](/.?/)[u]){var f=/()??/.exec("")[1]===a;r=function(e,t){var n=String(this);if(e===a&&0===t)return[];if(!i(e))return o.call(n,e,t);var r,c,p,d,h,m=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,v=t===a?4294967295:t>>>0,b=new RegExp(e.source,g+"g");for(f||(r=new RegExp("^"+b.source+"$(?!\\s)",g));(c=b.exec(n))&&(p=c.index+c[0][u],!(p>y&&(m.push(n.slice(y,c.index)),!f&&c[u]>1&&c[0].replace(r,function(){for(h=1;h<arguments[u]-2;h++)arguments[h]===a&&(c[h]=a)}),c[u]>1&&c.index<n[u]&&s.apply(m,c.slice(1)),d=c[0][u],y=p,m[u]>=v)));)b[l]===c.index&&b[l]++;return y===n[u]?!d&&b.test("")||m.push(""):m.push(n.slice(y)),m[u]>v?m.slice(0,v):m}}else"0"[c](a,0)[u]&&(r=function(e,t){return e===a&&0===t?[]:o.call(this,e,t)});return[function(n,i){var o=e(this),s=n==a?a:n[t];return s!==a?s.call(n,o,i):r.call(String(o),n,i)},r]})},function(e,t,n){var r,i,o,s=n(26),c=n(2),u=n(18),l=n(73),f=n(6),p=n(11),d=n(19),h=n(197),m=n(198),g=n(199),y=n(200).set,v=n(201)(),b="Promise",S=c.TypeError,_=c.process,O=c[b],_=c.process,T="process"==l(_),E=function(){},w=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(23)("species")]=function(e){e(E,E)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),I=function(e,t){return e===t||e===O&&t===o},R=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return I(O,e)?new j(e):new i(e)},j=i=function(e){var t,n;this.promise=new e(function(e,r){if(t!==a||n!==a)throw S("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},A=function(e){try{e()}catch(e){return{error:e}}},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(i||(2==e._h&&L(e),e._h=1),a===!0?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(S("Promise-chain cycle")):(o=R(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&$(e)})}},$=function(e){y.call(c,function(){var t,n,r,i=e._v;if(D(e)&&(t=A(function(){T?_.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=T||D(e)?2:1),e._a=a,t)throw t.error})},D=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!D(t.promise))return!1;return!0},L=function(e){y.call(c,function(){var t;T?_.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},k=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},M=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=R(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,u(M,r,1),u(k,r,1))}catch(e){k.call(r,e)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){k.call({_w:n,_d:!1},e)}}};w||(O=function(e){h(this,O,b,"_h"),d(e),r.call(this);try{e(u(M,this,1),u(k,this,1))}catch(e){k.call(this,e)}},r=function(e){this._c=[],this._a=a,this._s=0,this._d=!1,this._v=a,this._h=0,this._n=!1},r.prototype=n(202)(O.prototype,{then:function(e,t){var n=P(g(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?_.domain:a,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(e){return this.then(a,e)}}),j=function(){var e=new r;this.promise=e,this.resolve=u(M,e,1),this.reject=u(k,e,1)}),f(f.G+f.W+f.F*!w,{Promise:O}),n(22)(O,b),n(186)(b),o=n(7)[b],f(f.S+f.F*!w,b,{reject:function(e){var t=P(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(s||!w),b,{resolve:function(e){if(e instanceof O&&I(e.constructor,this))return e;var t=P(this),n=t.resolve;return n(e),t.promise}}),f(f.S+f.F*!(w&&n(157)(function(e){O.all(e).catch(E)})),b,{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=A(function(){var n=[],o=0,s=1;m(e,!1,function(e){var c=o++,u=!1;n.push(a),s++,t.resolve(e).then(function(e){u||(u=!0,n[c]=e,--s||r(n))},i)}),--s||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=A(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||r!==a&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(18),i=n(153),o=n(154),a=n(10),s=n(35),c=n(156),u={},l={},t=e.exports=function(e,t,n,f,p){var d,h,m,g,y=p?function(){return e}:c(e),v=r(n,f,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(d=s(e.length);d>b;b++)if(g=t?v(a(h=e[b])[0],h[1]):v(e[b]),g===u||g===l)return g}else for(m=y.call(e);!(h=m.next()).done;)if(g=i(m,v,h.value,t),g===u||g===l)return g};t.BREAK=u,t.RETURN=l},function(e,t,n){var r=n(10),i=n(19),o=n(23)("species");e.exports=function(e,t){var n,s=r(e).constructor;return s===a||(n=r(s)[o])==a?t:i(n)}},function(e,t,n){var r,i,o,a=n(18),s=n(76),c=n(46),u=n(13),l=n(2),f=l.process,p=l.setImmediate,d=l.clearImmediate,h=l.MessageChannel,m=0,g={},y="onreadystatechange",v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){v.call(e.data)};p&&d||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},d=function(e){delete g[e]},"process"==n(32)(f)?r=function(e){f.nextTick(a(v,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:p,clear:d}},function(e,t,n){var r=n(2),i=n(200).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,c=r.Promise,u="process"==n(32)(s);e.exports=function(){var e,t,n,l=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=a,r}}t=a,r&&r.enter()};if(u)n=function(){s.nextTick(l)};else if(o){var f=!0,p=document.createTextNode("");new o(l).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}else if(c&&c.resolve){var d=c.resolve();n=function(){d.then(l)}}else n=function(){i.call(r,l)};return function(r){var i={fn:r,next:a};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(204);e.exports=n(205)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:a)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(9).f,i=n(44),o=n(202),s=n(18),c=n(197),u=n(33),l=n(198),f=n(134),p=n(184),d=n(186),h=n(4),m=n(20).fastKey,g=h?"_s":"size",y=function(e,t){var n,r=m(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,f){var p=e(function(e,r){c(e,p,t,"_i"),e._i=i(null),e._f=a,e._l=a,e[g]=0,r!=a&&l(r,n,e[f],e)});return o(p.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=a),delete t[n.i];e._f=e._l=a,e[g]=0},delete:function(e){var t=this,n=y(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[g]--}return!!n},forEach:function(e){c(this,p,"forEach");for(var t,n=s(e,arguments.length>1?arguments[1]:a,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),h&&r(p.prototype,"size",{get:function(){return u(this[g])}}),p},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=m(t,!0),k:t,v:n,p:r=e._l,n:a,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){f(e,t,function(e,t){this._t=e,this._k=t,this._l=a},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?p(0,n.k):"values"==t?p(0,n.v):p(0,[n.k,n.v]):(e._t=a,p(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(2),i=n(6),o=n(16),s=n(202),c=n(20),u=n(198),l=n(197),f=n(11),p=n(5),d=n(157),h=n(22),m=n(80);e.exports=function(e,t,n,g,y,v){var b=r[e],S=b,_=y?"set":"add",O=S&&S.prototype,T={},E=function(e){var t=O[e];o(O,e,"delete"==e?function(e){return!(v&&!f(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!f(e)?a:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof S&&(v||O.forEach&&!p(function(){(new S).entries().next()}))){var w=new S,I=w[_](v?{}:-0,1)!=w,R=p(function(){w.has(1)}),P=d(function(e){new S(e)}),j=!v&&p(function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)});P||(S=t(function(t,n){l(t,S,e);var r=m(new b,t,S);return n!=a&&u(n,y,r[_],r),r}),S.prototype=O,O.constructor=S),(R||j)&&(E("delete"),E("has"),y&&E("get")),(j||I)&&E(_),v&&O.clear&&delete O.clear}else S=g.getConstructor(t,e,y,_),s(S.prototype,n),c.NEED=!0;return h(S,e),T[e]=S,i(i.G+i.W+i.F*(S!=b),T),v||g.setStrong(S,e,y),S}},function(e,t,n){var r=n(204);e.exports=n(205)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:a)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){var r,i=n(164)(0),o=n(16),s=n(20),c=n(67),u=n(208),l=n(11),f=s.getWeak,p=Object.isExtensible,d=u.ufstore,h={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:a)}},g={get:function(e){if(l(e)){var t=f(e);return t===!0?d(this).get(e):t?t[this._i]:a}},set:function(e,t){return u.def(this,e,t)}},y=e.exports=n(205)("WeakMap",m,g,u,!0,!0);7!=(new y).set((Object.freeze||Object)(h),7).get(h)&&(r=u.getConstructor(m),c(r.prototype,g),s.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];o(t,e,function(t,i){if(l(t)&&!p(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){var r=n(202),i=n(20).getWeak,o=n(10),s=n(11),c=n(197),u=n(198),l=n(164),f=n(3),p=l(5),d=l(6),h=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return p(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var l=e(function(e,r){c(e,l,t,"_i"),e._i=h++,e._l=a,r!=a&&u(r,n,e[o],e)});return r(l.prototype,{delete:function(e){if(!s(e))return!1;var t=i(e);return t===!0?m(this).delete(e):t&&f(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=i(e);return t===!0?m(this).has(e):t&&f(t,this._i)}}),l},def:function(e,t,n){var r=i(o(t),!0);return r===!0?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(208);n(205)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:a)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){var r=n(6),i=n(19),o=n(10),a=(n(2).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(5)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(6),i=n(44),o=n(19),a=n(10),s=n(11),c=n(5),u=n(75),l=(n(2).Reflect||{}).construct,f=c(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),p=!c(function(){l(function(){})});r(r.S+r.F*(f||p),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(p&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,d=i(s(c)?c:Object.prototype),h=Function.apply.call(e,d,t);return s(h)?h:d}})},function(e,t,n){var r=n(9),i=n(6),o=n(10),a=n(14);i(i.S+i.F*n(5)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(6),i=n(49).f,o=n(10);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(6),i=n(10),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(136)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:a,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,c,f=arguments.length<3?e:arguments[2];return l(e)===f?e[t]:(n=i.f(e,t))?s(n,"value")?n.value:n.get!==a?n.get.call(f):a:u(c=o(e))?r(c,t,f):void 0}var i=n(49),o=n(57),s=n(3),c=n(6),u=n(11),l=n(10);c(c.S,"Reflect",{get:r})},function(e,t,n){var r=n(49),i=n(6),o=n(10);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){
var r=n(6),i=n(57),o=n(10);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(6);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(6),i=n(10),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(6);r(r.S,"Reflect",{ownKeys:n(221)})},function(e,t,n){var r=n(48),i=n(41),o=n(10),a=n(2).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(6),i=n(10),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var u,d,h=arguments.length<4?e:arguments[3],m=o.f(f(e),t);if(!m){if(p(d=s(e)))return r(d,t,n,h);m=l(0)}return c(m,"value")?!(m.writable===!1||!p(h))&&(u=o.f(h,t)||l(0),u.value=n,i.f(h,t,u),!0):m.set!==a&&(m.set.call(h,n),!0)}var i=n(9),o=n(49),s=n(57),c=n(3),u=n(6),l=n(15),f=n(10),p=n(11);u(u.S,"Reflect",{set:r})},function(e,t,n){var r=n(6),i=n(71);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){var r=n(6);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){var r=n(6),i=n(56),o=n(14);r(r.P+r.F*n(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(6),i=n(5),o=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};r(r.P+r.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(e,t,n){var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(16)(r,o,function(){var e=s.call(this);return e===e?a.call(this):i})},function(e,t,n){var r=n(23)("toPrimitive"),i=Date.prototype;r in i||n(8)(i,r,n(230))},function(e,t,n){var r=n(10),i=n(14),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),e!=o)}},function(e,t,n){var r=n(6),i=n(232),o=n(233),s=n(10),c=n(37),u=n(35),l=n(11),f=n(2).ArrayBuffer,p=n(199),d=o.ArrayBuffer,h=o.DataView,m=i.ABV&&f.isView,g=d.prototype.slice,y=i.VIEW,v="ArrayBuffer";r(r.G+r.W+r.F*(f!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,v,{isView:function(e){return m&&m(e)||l(e)&&y in e}}),r(r.P+r.U+r.F*n(5)(function(){return!new d(2).slice(1,a).byteLength}),v,{slice:function(e,t){if(g!==a&&t===a)return g.call(s(this),e);for(var n=s(this).byteLength,r=c(e,n),i=c(t===a?n:t,n),o=new(p(this,d))(u(i-r)),l=new h(this),f=new h(o),m=0;r<i;)f.setUint8(m++,l.getUint8(r++));return o}}),n(186)(v)},function(e,t,n){for(var r,i=n(2),o=n(8),a=n(17),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,f=0,p=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<p;)(r=i[d[f++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},function(e,t,n){var r=n(2),i=n(4),o=n(26),s=n(232),c=n(8),u=n(202),l=n(5),f=n(197),p=n(36),d=n(35),h=n(48).f,m=n(9).f,g=n(180),y=n(22),v="ArrayBuffer",b="DataView",S="prototype",_="Wrong length!",O="Wrong index!",T=r[v],E=r[b],w=r.Math,I=r.RangeError,R=r.Infinity,P=T,j=w.abs,A=w.pow,C=w.floor,$=w.log,D=w.LN2,L="buffer",k="byteLength",M="byteOffset",x=i?"_b":L,F=i?"_l":k,U=i?"_o":M,B=function(e,t,n){var r,i,o,a=Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?A(2,-24)-A(2,-77):0,f=0,p=e<0||0===e&&1/e<0?1:0;for(e=j(e),e!=e||e===R?(i=e!=e?1:0,r=c):(r=C($(e)/D),e*(o=A(2,-r))<1&&(r--,o*=2),e+=r+u>=1?l/o:l*A(2,1-u),e*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*A(2,t),r+=u):(i=e*A(2,u-1)*A(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*p,a},N=function(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:u?-R:R;r+=A(2,t),l-=a}return(u?-1:1)*r*A(2,l-t)},q=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},H=function(e){return[255&e]},V=function(e){return[255&e,e>>8&255]},Y=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return B(e,52,8)},G=function(e){return B(e,23,4)},W=function(e,t,n){m(e[S],t,{get:function(){return this[n]}})},Q=function(e,t,n,r){var i=+n,o=p(i);if(i!=o||o<0||o+t>e[F])throw I(O);var a=e[x]._b,s=o+e[U],c=a.slice(s,s+t);return r?c:c.reverse()},J=function(e,t,n,r,i,o){var a=+n,s=p(a);if(a!=s||s<0||s+t>e[F])throw I(O);for(var c=e[x]._b,u=s+e[U],l=r(+i),f=0;f<t;f++)c[u+f]=l[o?f:t-f-1]},K=function(e,t){f(e,T,v);var n=+t,r=d(n);if(n!=r)throw I(_);return r};if(s.ABV){if(!l(function(){new T})||!l(function(){new T(.5)})){T=function(e){return new P(K(this,e))};for(var X,Z=T[S]=P[S],ee=h(P),te=0;ee.length>te;)(X=ee[te++])in T||c(T,X,P[X]);o||(Z.constructor=T)}var ne=new E(new T(2)),re=E[S].setInt8;ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||u(E[S],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else T=function(e){var t=K(this,e);this._b=g.call(Array(t),0),this[F]=t},E=function(e,t,n){f(this,E,b),f(e,T,b);var r=e[F],i=p(t);if(i<0||i>r)throw I("Wrong offset!");if(n=n===a?r-i:d(n),i+n>r)throw I(_);this[x]=e,this[U]=i,this[F]=n},i&&(W(T,k,"_l"),W(E,L,"_b"),W(E,k,"_l"),W(E,M,"_o")),u(E[S],{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return q(Q(this,4,e,arguments[1]))},getUint32:function(e){return q(Q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(Q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(Q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){J(this,1,e,H,t)},setUint8:function(e,t){J(this,1,e,H,t)},setInt16:function(e,t){J(this,2,e,V,t,arguments[2])},setUint16:function(e,t){J(this,2,e,V,t,arguments[2])},setInt32:function(e,t){J(this,4,e,Y,t,arguments[2])},setUint32:function(e,t){J(this,4,e,Y,t,arguments[2])},setFloat32:function(e,t){J(this,4,e,G,t,arguments[2])},setFloat64:function(e,t){J(this,8,e,z,t,arguments[2])}});y(T,v),y(E,b),c(E[S],s.VIEW,!0),t[v]=T,t[b]=E},function(e,t,n){var r=n(6);r(r.G+r.W+r.F*!n(232).ABV,{DataView:n(233).DataView})},function(e,t,n){n(236)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){if(n(4)){var r=n(26),i=n(2),o=n(5),s=n(6),c=n(232),u=n(233),l=n(18),f=n(197),p=n(15),d=n(8),h=n(202),m=n(36),g=n(35),y=n(37),v=n(14),b=n(3),S=n(69),_=n(73),O=n(11),T=n(56),E=n(154),w=n(44),I=n(57),R=n(48).f,P=n(156),j=n(17),A=n(23),C=n(164),$=n(34),D=n(199),L=n(183),k=n(135),M=n(157),x=n(186),F=n(180),U=n(177),B=n(9),N=n(49),q=B.f,H=N.f,V=i.RangeError,Y=i.TypeError,z=i.Uint8Array,G="ArrayBuffer",W="Shared"+G,Q="BYTES_PER_ELEMENT",J="prototype",K=Array[J],X=u.ArrayBuffer,Z=u.DataView,ee=C(0),te=C(2),ne=C(3),re=C(4),ie=C(5),oe=C(6),ae=$(!0),se=$(!1),ce=L.values,ue=L.keys,le=L.entries,fe=K.lastIndexOf,pe=K.reduce,de=K.reduceRight,he=K.join,me=K.sort,ge=K.slice,ye=K.toString,ve=K.toLocaleString,be=A("iterator"),Se=A("toStringTag"),_e=j("typed_constructor"),Oe=j("def_constructor"),Te=c.CONSTR,Ee=c.TYPED,we=c.VIEW,Ie="Wrong length!",Re=C(1,function(e,t){return De(D(e,e[Oe]),t)}),Pe=o(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),je=!!z&&!!z[J].set&&o(function(){new z(1).set({})}),Ae=function(e,t){if(e===a)throw Y(Ie);var n=+e,r=g(e);if(t&&!S(n,r))throw V(Ie);return r},Ce=function(e,t){var n=m(e);if(n<0||n%t)throw V("Wrong offset!");return n},$e=function(e){if(O(e)&&Ee in e)return e;throw Y(e+" is not a typed array!")},De=function(e,t){if(!(O(e)&&_e in e))throw Y("It is not a typed array constructor!");return new e(t)},Le=function(e,t){return ke(D(e,e[Oe]),t)},ke=function(e,t){for(var n=0,r=t.length,i=De(e,r);r>n;)i[n]=t[n++];return i},Me=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},xe=function(e){var t,n,r,i,o,s,c=T(e),u=arguments.length,f=u>1?arguments[1]:a,p=f!==a,d=P(c);if(d!=a&&!E(d)){for(s=d.call(c),r=[],t=0;!(o=s.next()).done;t++)r.push(o.value);c=r}for(p&&u>2&&(f=l(f,arguments[2],2)),t=0,n=g(c.length),i=De(this,n);n>t;t++)i[t]=p?f(c[t],t):c[t];return i},Fe=function(){for(var e=0,t=arguments.length,n=De(this,t);t>e;)n[e]=arguments[e++];return n},Ue=!!z&&o(function(){ve.call(new z(1))}),Be=function(){return ve.apply(Ue?ge.call($e(this)):$e(this),arguments)},Ne={copyWithin:function(e,t){return U.call($e(this),e,t,arguments.length>2?arguments[2]:a)},every:function(e){return re($e(this),e,arguments.length>1?arguments[1]:a)},fill:function(e){return F.apply($e(this),arguments)},filter:function(e){return Le(this,te($e(this),e,arguments.length>1?arguments[1]:a))},find:function(e){return ie($e(this),e,arguments.length>1?arguments[1]:a)},findIndex:function(e){return oe($e(this),e,arguments.length>1?arguments[1]:a)},forEach:function(e){ee($e(this),e,arguments.length>1?arguments[1]:a)},indexOf:function(e){return se($e(this),e,arguments.length>1?arguments[1]:a)},includes:function(e){return ae($e(this),e,arguments.length>1?arguments[1]:a)},join:function(e){return he.apply($e(this),arguments)},lastIndexOf:function(e){return fe.apply($e(this),arguments)},map:function(e){return Re($e(this),e,arguments.length>1?arguments[1]:a)},reduce:function(e){return pe.apply($e(this),arguments)},reduceRight:function(e){return de.apply($e(this),arguments)},reverse:function(){for(var e,t=this,n=$e(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return ne($e(this),e,arguments.length>1?arguments[1]:a)},sort:function(e){return me.call($e(this),e)},subarray:function(e,t){var n=$e(this),r=n.length,i=y(e,r);return new(D(n,n[Oe]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((t===a?r:y(t,r))-i))}},qe=function(e,t){return Le(this,ge.call($e(this),e,t))},He=function(e){$e(this);var t=Ce(arguments[1],1),n=this.length,r=T(e),i=g(r.length),o=0;if(i+t>n)throw V(Ie);for(;o<i;)this[t+o]=r[o++]},Ve={entries:function(){return le.call($e(this))},keys:function(){return ue.call($e(this))},values:function(){return ce.call($e(this))}},Ye=function(e,t){return O(e)&&e[Ee]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},ze=function(e,t){return Ye(e,t=v(t,!0))?p(2,e[t]):H(e,t)},Ge=function(e,t,n){return!(Ye(e,t=v(t,!0))&&O(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};Te||(N.f=ze,B.f=Ge),s(s.S+s.F*!Te,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Ge}),o(function(){ye.call({})})&&(ye=ve=function(){return he.call(this)});var We=h({},Ne);h(We,Ve),d(We,be,Ve.values),h(We,{slice:qe,set:He,constructor:function(){},toString:ye,toLocaleString:Be}),Me(We,"buffer","b"),Me(We,"byteOffset","o"),Me(We,"byteLength","l"),Me(We,"length","e"),q(We,Se,{get:function(){return this[Ee]}}),e.exports=function(e,t,n,u){u=!!u;var l=e+(u?"Clamped":"")+"Array",p="Uint8Array"!=l,h="get"+e,m="set"+e,y=i[l],v=y||{},b=y&&I(y),S=!y||!c.ABV,T={},E=y&&y[J],P=function(e,n){var r=e._d;return r.v[h](n*t+r.o,Pe)},j=function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[m](n*t+i.o,r,Pe)},A=function(e,t){q(e,t,{get:function(){return P(this,t)},set:function(e){return j(this,t,e)},enumerable:!0})};S?(y=n(function(e,n,r,i){f(e,y,l,"_d");var o,s,c,u,p=0,h=0;if(O(n)){if(!(n instanceof X||(u=_(n))==G||u==W))return Ee in n?ke(y,n):xe.call(y,n);o=n,h=Ce(r,t);var m=n.byteLength;if(i===a){if(m%t)throw V(Ie);if(s=m-h,s<0)throw V(Ie)}else if(s=g(i)*t,s+h>m)throw V(Ie);c=s/t}else c=Ae(n,!0),s=c*t,o=new X(s);for(d(e,"_d",{b:o,o:h,l:s,e:c,v:new Z(o)});p<c;)A(e,p++)}),E=y[J]=w(We),d(E,"constructor",y)):M(function(e){new y(null),new y(e)},!0)||(y=n(function(e,n,r,i){f(e,y,l);var o;return O(n)?n instanceof X||(o=_(n))==G||o==W?i!==a?new v(n,Ce(r,t),i):r!==a?new v(n,Ce(r,t)):new v(n):Ee in n?ke(y,n):xe.call(y,n):new v(Ae(n,p))}),ee(b!==Function.prototype?R(v).concat(R(b)):R(v),function(e){e in y||d(y,e,v[e])}),y[J]=E,r||(E.constructor=y));var C=E[be],$=!!C&&("values"==C.name||C.name==a),D=Ve.values;d(y,_e,!0),d(E,Ee,l),d(E,we,!0),d(E,Oe,y),(u?new y(1)[Se]==l:Se in E)||q(E,Se,{get:function(){return l}}),T[l]=y,s(s.G+s.W+s.F*(y!=v),T),s(s.S,l,{BYTES_PER_ELEMENT:t,from:xe,of:Fe}),Q in E||d(E,Q,t),s(s.P,l,Ne),x(l),s(s.P+s.F*je,l,{set:He}),s(s.P+s.F*!$,l,Ve),s(s.P+s.F*(E.toString!=ye),l,{toString:ye}),s(s.P+s.F*o(function(){new y(1).slice()}),l,{slice:qe}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:Be}),k[l]=$?C:D,r||$||d(E,be,D)}}else e.exports=function(){}},function(e,t,n){n(236)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(236)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(236)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(6),i=n(34)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:a)}}),n(178)("includes")},function(e,t,n){var r=n(6),i=n(125)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){var r=n(6),i=n(248);r(r.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:a,!0)}})},function(e,t,n){var r=n(35),i=n(85),o=n(33);e.exports=function(e,t,n,s){var c=String(o(e)),u=c.length,l=n===a?" ":String(n),f=r(t);if(f<=u||""==l)return c;var p=f-u,d=i.call(l,Math.ceil(p/l.length));return d.length>p&&(d=d.slice(0,p)),s?d+c:c+d}},function(e,t,n){var r=n(6),i=n(248);r(r.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:a,!1)}})},function(e,t,n){n(81)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(81)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){var r=n(6),i=n(33),o=n(35),a=n(128),s=n(188),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(136)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){n(25)("asyncIterator")},function(e,t,n){n(25)("observable")},function(e,t,n){var r=n(6),i=n(221),o=n(30),a=n(49),s=n(155);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=o(e),r=a.f,c=i(n),u={},l=0;c.length>l;)s(u,t=c[l++],r(n,t));return u}})},function(e,t,n){var r=n(6),i=n(257)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(28),i=n(30),o=n(42).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),c=s.length,u=0,l=[];c>u;)o.call(a,n=s[u++])&&l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t,n){var r=n(6),i=n(257)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){var r=n(6),i=n(56),o=n(19),a=n(9);n(4)&&r(r.P+n(260),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){e.exports=n(26)||!n(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(2)[e]})},function(e,t,n){var r=n(6),i=n(56),o=n(19),a=n(9);n(4)&&r(r.P+n(260),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(6),i=n(56),o=n(14),a=n(57),s=n(49).f;n(4)&&r(r.P+n(260),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.get;while(n=a(n))}})},function(e,t,n){var r=n(6),i=n(56),o=n(14),a=n(57),s=n(49).f;n(4)&&r(r.P+n(260),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.set;while(n=a(n))}})},function(e,t,n){var r=n(6);r(r.P+r.R,"Map",{toJSON:n(265)("Map")})},function(e,t,n){var r=n(73),i=n(266);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(198);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(6);r(r.P+r.R,"Set",{toJSON:n(265)("Set")})},function(e,t,n){var r=n(6);r(r.S,"System",{global:n(2)})},function(e,t,n){var r=n(6),i=n(32);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(6);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(6);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>16,c=i>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>16)+((o*c>>>0)+(u&n)>>16)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>>16,c=i>>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>>16)+((o*c>>>0)+(u&n)>>>16)}})},function(e,t,n){var r=n(275),i=n(10),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(203),i=n(6),o=n(21)("metadata"),s=o.store||(o.store=new(n(207))),c=function(e,t,n){var i=s.get(e);if(!i){if(!n)return a;s.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return a;i.set(t,o=new r)}return o},u=function(e,t,n){var r=c(t,n,!1);return r!==a&&r.has(e)},l=function(e,t,n){var r=c(t,n,!1);return r===a?a:r.get(e)},f=function(e,t,n,r){c(n,r,!0).set(e,t)},p=function(e,t){var n=c(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},d=function(e){return e===a||"symbol"==typeof e?e:String(e)},h=function(e){i(i.S,"Reflect",e)};e.exports={store:s,map:c,has:u,get:l,set:f,keys:p,key:d,exp:h}},function(e,t,n){var r=n(275),i=n(10),o=r.key,s=r.map,c=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?a:o(arguments[2]),r=s(i(t),n,!1);if(r===a||!r.delete(e))return!1;if(r.size)return!0;var u=c.get(t);return u.delete(n),!!u.size||c.delete(t)}})},function(e,t,n){var r=n(275),i=n(10),o=n(57),s=r.has,c=r.get,u=r.key,l=function(e,t,n){var r=s(e,t,n);if(r)return c(e,t,n);var i=o(t);return null!==i?l(e,i,n):a};r.exp({getMetadata:function(e,t){return l(e,i(t),arguments.length<3?a:u(arguments[2]))}})},function(e,t,n){var r=n(206),i=n(266),o=n(275),s=n(10),c=n(57),u=o.keys,l=o.key,f=function(e,t){var n=u(e,t),o=c(e);if(null===o)return n;var a=f(o,t);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(e){return f(s(e),arguments.length<2?a:l(arguments[1]))}})},function(e,t,n){var r=n(275),i=n(10),o=r.get,s=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?a:s(arguments[2]))}})},function(e,t,n){var r=n(275),i=n(10),o=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?a:s(arguments[1]))}})},function(e,t,n){var r=n(275),i=n(10),o=n(57),s=r.has,c=r.key,u=function(e,t,n){var r=s(e,t,n);if(r)return!0;var i=o(t);return null!==i&&u(e,i,n)};r.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?a:c(arguments[2]))}})},function(e,t,n){var r=n(275),i=n(10),o=r.has,s=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?a:s(arguments[2]))}})},function(e,t,n){var r=n(275),i=n(10),o=n(19),s=r.key,c=r.set;r.exp({metadata:function(e,t){return function(n,r){c(e,t,(r!==a?i:o)(n),s(r))}}})},function(e,t,n){var r=n(6),i=n(201)(),o=n(2).process,a="process"==n(32)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){var r=n(6),i=n(2),o=n(7),s=n(201)(),c=n(23)("observable"),u=n(19),l=n(10),f=n(197),p=n(202),d=n(8),h=n(198),m=h.RETURN,g=function(e){return null==e?a:u(e)},y=function(e){var t=e._c;t&&(e._c=a,t())},v=function(e){return e._o===a},b=function(e){v(e)||(e._o=a,y(e))},S=function(e,t){l(e),this._c=a,this._o=e,e=new _(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(t){return void e.error(t)}v(this)&&y(this)};S.prototype=p({},{unsubscribe:function(){b(this)}});var _=function(e){this._s=e};_.prototype=p({},{next:function(e){var t=this._s;if(!v(t)){var n=t._o;try{var r=g(n.next);if(r)return r.call(n,e)}catch(e){try{b(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var n=t._o;t._o=a;try{var r=g(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!v(t)){var n=t._o;t._o=a;try{var r=g(n.complete);e=r?r.call(n,e):a}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var O=function(e){f(this,O,"Observable","_f")._f=u(e)};p(O.prototype,{subscribe:function(e){return new S(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),p(O,{from:function(e){var t="function"==typeof this?this:O,n=g(l(e)[c]);if(n){var r=l(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(h(e,!1,function(e){if(t.next(e),n)return m})===m)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:O)(function(e){var t=!1;return s(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),d(O.prototype,c,function(){return this}),r(r.G,{Observable:O}),n(186)("Observable")},function(e,t,n){var r=n(6),i=n(200);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(183),i=n(16),o=n(2),a=n(8),s=n(135),c=n(23),u=c("iterator"),l=c("toStringTag"),f=s.Array,p=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var h,m=p[d],g=o[m],y=g&&g.prototype;if(y){y[u]||a(y,u,f),y[l]||a(y,l,m),s[m]=f;for(h in r)y[h]||i(y,h,r[h],!0)}}},function(e,t,n){var r=n(2),i=n(6),o=n(76),a=n(289),s=r.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),u=function(e){return c?function(t,n){return e(o(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};i(i.G+i.B+i.F*c,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(290),i=n(76),o=n(19);e.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),a=0,s=r._,c=!1;t>a;)(n[a]=arguments[a++])===s&&(c=!0);return function(){var r,o=this,a=arguments.length,u=0,l=0;if(!c&&!a)return i(e,n,o);if(r=n.slice(),c)for(;t>u;u++)r[u]===s&&(r[u]=arguments[l++]);for(;a>l;)r.push(arguments[l++]);return i(e,r,o)}}},function(e,t,n){e.exports=n(2)}]),"undefined"!=typeof e&&e.exports?e.exports=i:(r=function(){return i}.call(t,n,t,e),!(r!==a&&(e.exports=r)))}(1,1)},function(e,t){e.exports=bootstrap_app},function(e,t,n){(function(e,t){var n;!function(n){!function(e){function r(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}var i="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=r(n);"undefined"==typeof i.Reflect?i.Reflect=n:o=r(i.Reflect,o),e(o)}(function(t){function n(e,t,n,r){if(T(n)){if(!$(e))throw new TypeError;if(!L(t))throw new TypeError;return p(e,t)}if(!$(e))throw new TypeError;if(!I(t))throw new TypeError;if(!I(r)&&!T(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),n=C(n),d(e,t,n,r)}function r(e,t){function n(n,r){if(!I(n))throw new TypeError;if(!T(r)&&!k(r))throw new TypeError;b(e,t,n,r)}return n}function i(e,t,n,r){if(!I(n))throw new TypeError;return T(r)||(r=C(r)),b(e,t,n,r)}function o(e,t,n){if(!I(t))throw new TypeError;return T(n)||(n=C(n)),m(e,t,n)}function a(e,t,n){if(!I(t))throw new TypeError;return T(n)||(n=C(n)),g(e,t,n)}function s(e,t,n){if(!I(t))throw new TypeError;return T(n)||(n=C(n)),y(e,t,n)}function c(e,t,n){if(!I(t))throw new TypeError;return T(n)||(n=C(n)),v(e,t,n)}function u(e,t){if(!I(e))throw new TypeError;return T(t)||(t=C(t)),S(e,t)}function l(e,t){if(!I(e))throw new TypeError;return T(t)||(t=C(t)),_(e,t)}function f(e,t,n){if(!I(t))throw new TypeError;T(n)||(n=C(n));var r=h(t,n,!1);if(T(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=oe.get(t);return i.delete(n),i.size>0||(oe.delete(t),!0)}function p(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!T(i)&&!E(i)){if(!L(i))throw new TypeError;t=i}}return t}function d(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=e[i],a=o(t,n,r);if(!T(a)&&!E(a)){if(!I(a))throw new TypeError;r=a}}return r}function h(e,t,n){var r=oe.get(e);if(T(r)){if(!n)return;r=new ne,oe.set(e,r)}var i=r.get(t);if(T(i)){if(!n)return;i=new ne,r.set(t,i)}return i}function m(e,t,n){var r=g(e,t,n);if(r)return!0;var i=N(t);return!E(i)&&m(e,i,n)}function g(e,t,n){var r=h(t,n,!1);return!T(r)&&j(r.has(e))}function y(e,t,n){var r=g(e,t,n);if(r)return v(e,t,n);var i=N(t);return E(i)?void 0:y(e,i,n)}function v(e,t,n){var r=h(t,n,!1);if(!T(r))return r.get(e)}function b(e,t,n,r){var i=h(n,r,!0);i.set(e,t)}function S(e,t){var n=_(e,t),r=N(e);if(null===r)return n;var i=S(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new re,a=[],s=0,c=n;s<c.length;s++){var u=c[s],l=o.has(u);l||(o.add(u),a.push(u))}for(var f=0,p=i;f<p.length;f++){var u=p[f],l=o.has(u);l||(o.add(u),a.push(u))}return a}function _(e,t){var n=[],r=h(e,t,!1);if(T(r))return n;for(var i=r.keys(),o=x(i),a=0;;){var s=U(o);if(!s)return n.length=a,n;var c=F(s);try{n[a]=c}catch(e){try{B(o)}finally{throw e}}a++}}function O(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function T(e){return void 0===e}function E(e){return null===e}function w(e){return"symbol"==typeof e}function I(e){return"object"==typeof e?null!==e:"function"==typeof e}function R(e,t){switch(O(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var n=3===t?"string":5===t?"number":"default",r=M(e,W);if(void 0!==r){var i=r.call(e,n);if(I(i))throw new TypeError;return i}return P(e,"default"===n?"number":n)}function P(e,t){if("string"===t){var n=e.toString;if(D(n)){var r=n.call(e);if(!I(r))return r}var i=e.valueOf;if(D(i)){var r=i.call(e);if(!I(r))return r}}else{var i=e.valueOf;if(D(i)){var r=i.call(e);if(!I(r))return r}var o=e.toString;if(D(o)){var r=o.call(e);if(!I(r))return r}}throw new TypeError}function j(e){return!!e}function A(e){return""+e}function C(e){var t=R(e,3);return w(t)?t:A(t)}function $(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function D(e){return"function"==typeof e}function L(e){return"function"==typeof e}function k(e){switch(O(e)){case 3:return!0;case 4:return!0;default:return!1}}function M(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!D(n))throw new TypeError;return n}}function x(e){var t=M(e,Q);if(!D(t))throw new TypeError;var n=t.call(e);if(!I(n))throw new TypeError;return n}function F(e){return e.value}function U(e){var t=e.next();return!t.done&&t}function B(e){var t=e.return;t&&t.call(e)}function N(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===ee)return t;if(t!==ee)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i?t:i===e?t:i}function q(){function e(e,t){return e}function t(e,t){return t}function n(e,t){return[e,t]}var r={},i=[],o=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[Q]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var t=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:t,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:e,done:!0}},e}();return function(){function i(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._find(e,!1)>=0},i.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},i.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},i.prototype.delete=function(e){var t=this._find(e,!1);if(t>=0){for(var n=this._keys.length,i=t+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},i.prototype.keys=function(){return new o(this._keys,this._values,e)},i.prototype.values=function(){return new o(this._keys,this._values,t)},i.prototype.entries=function(){return new o(this._keys,this._values,n)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[Q]=function(){return this.entries()},i.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},i}()}function H(){return function(){function e(){this._map=new ne}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[Q]=function(){return this.keys()},e}()}function V(){function e(){var e;do e="@@WeakMap@@"+i();while(Z.has(a,e));return a[e]=!0,e}function t(e,t){if(!z.call(e,s)){if(!t)return;Object.defineProperty(e,s,{value:Z.create()})}return e[s]}function n(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function r(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):n(new Uint8Array(e),e):n(new Array(e),e);
}function i(){var e=r(o);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",n=0;n<o;++n){var i=e[n];4!==n&&6!==n&&8!==n||(t+="-"),i<16&&(t+="0"),t+=i.toString(16).toLowerCase()}return t}var o=16,a=Z.create(),s=e();return function(){function n(){this._key=e()}return n.prototype.has=function(e){var n=t(e,!1);return void 0!==n&&Z.has(n,this._key)},n.prototype.get=function(e){var n=t(e,!1);return void 0!==n?Z.get(n,this._key):void 0},n.prototype.set=function(e,n){var r=t(e,!0);return r[this._key]=n,this},n.prototype.delete=function(e){var n=t(e,!1);return void 0!==n&&delete n[this._key]},n.prototype.clear=function(){this._key=e()},n}()}function Y(e){return e.__=void 0,delete e.__,e}var z=Object.prototype.hasOwnProperty,G="function"==typeof Symbol,W=G&&"undefined"!=typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",Q=G&&"undefined"!=typeof Symbol.iterator?Symbol.iterator:"@@iterator",J="function"==typeof Object.create,K={__proto__:[]}instanceof Array,X=!J&&!K,Z={create:J?function(){return Y(Object.create(null))}:K?function(){return Y({__proto__:null})}:function(){return Y({})},has:X?function(e,t){return z.call(e,t)}:function(e,t){return t in e},get:X?function(e,t){return z.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},ee=Object.getPrototypeOf(Function),te="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,ne=te||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?q():Map,re=te||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?H():Set,ie=te||"function"!=typeof WeakMap?V():WeakMap,oe=new ie;t("decorate",n),t("metadata",r),t("defineMetadata",i),t("hasMetadata",o),t("hasOwnMetadata",a),t("getMetadata",s),t("getOwnMetadata",c),t("getMetadataKeys",u),t("getOwnMetadataKeys",l),t("deleteMetadata",f)})}(n||(n={}))}).call(t,n(437),n(68))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?h=d.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){!function(){"use strict";angular.module("angularLoad",[]).service("angularLoad",["$document","$q","$timeout",function(e,t,n){function r(e){var r={};return function(i){if("undefined"==typeof r[i]){var o=t.defer(),a=e(i);a.onload=a.onreadystatechange=function(e){a.readyState&&"complete"!==a.readyState&&"loaded"!==a.readyState||n(function(){o.resolve(e)})},a.onerror=function(e){n(function(){o.reject(e)})},r[i]=o.promise}return r[i]}}var i=e[0];this.loadScript=r(function(e){var t=i.createElement("script");return t.src=e,i.body.appendChild(t),t}),this.loadCSS=r(function(e){var t=i.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,i.head.appendChild(t),t})}])}()},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(262)),r(n(70));var i=n(263);t.OpaqueToken=i.OpaqueToken;var o=n(120);t.forwardRef=o.forwardRef;var a=n(97);t.provide=a.provide,t.getInjectableName=a.getInjectableName},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(441),o=function(){function e(e,t,n,r,i){this.annotations=e,this.parameters=t,this.factory=n,this.interfaces=r,this.propMetadata=i}return e}();t.ReflectionInfo=o;var a=function(e){function t(t){var n=e.call(this)||this;return n.reflectionCapabilities=t,n}return r(t,e),t.prototype.isReflectionEnabled=function(){return this.reflectionCapabilities.isReflectionEnabled()},t.prototype.parameters=function(e){return this.reflectionCapabilities.parameters(e)},t.prototype.rawParameters=function(e){return this.reflectionCapabilities.rawParameters(e)},t.prototype.registerParameters=function(e,t){this.reflectionCapabilities.registerParameters(e,t)},t.prototype.annotations=function(e){return this.reflectionCapabilities.annotations(e)},t.prototype.ownAnnotations=function(e){return this.reflectionCapabilities.ownAnnotations(e)},t.prototype.registerAnnotations=function(e,t){this.reflectionCapabilities.registerAnnotations(e,t)},t.prototype.propMetadata=function(e){return this.reflectionCapabilities.propMetadata(e)},t.prototype.ownPropMetadata=function(e){return this.reflectionCapabilities.ownPropMetadata(e)},t.prototype.registerPropMetadata=function(e,t){this.reflectionCapabilities.registerPropMetadata(e,t)},t.prototype.registerDowngradedNg2ComponentName=function(e,t){this.reflectionCapabilities.registerDowngradedNg2ComponentName(e,t)},t.prototype.downgradedNg2ComponentName=function(e){return this.reflectionCapabilities.downgradedNg2ComponentName(e)},t.prototype._getReflectionInfo=function(e){},t.prototype._containsReflectionInfo=function(e){},t}(i.ReflectorReader);t.Reflector=a},function(e,t,n){"use strict";var r=function(){function e(){}return e}();t.ReflectorReader=r},function(e,t,n){"use strict";function r(e){return i.isPresent(e)&&i.isPresent(e.getMetadata)}var i=n(13),o=n(40),a=i.global.Reflect;if(!r(a))throw'\n    Reflect.*metadata shim is required when using class decorators.\n    You can use one of: \n    - "reflect-metadata" (https://www.npmjs.com/package/reflect-metadata) \n    - "core-js/es7/reflect" (https://github.com/zloirock/core-js)\n  ';t.CLASS_META_KEY="annotations",t.PARAM_META_KEY="parameters",t.PARAM_REFLECT_META_KEY="design:paramtypes",t.PROP_META_KEY="propMetadata",t.DOWNGRADED_COMPONENT_NAME_KEY="downgradeComponentName";var s=function(){function e(e){void 0===e&&(e=i.global.Reflect),this._reflect=e}return e.prototype.isReflectionEnabled=function(){return!0},e.prototype.factory=function(e){switch(e.length){case 0:return function(){return new e};case 1:return function(t){return new e(t)};case 2:return function(t,n){return new e(t,n)};case 3:return function(t,n,r){return new e(t,n,r)};case 4:return function(t,n,r,i){return new e(t,n,r,i)};case 5:return function(t,n,r,i,o){return new e(t,n,r,i,o)};case 6:return function(t,n,r,i,o,a){return new e(t,n,r,i,o,a)};case 7:return function(t,n,r,i,o,a,s){return new e(t,n,r,i,o,a,s)};case 8:return function(t,n,r,i,o,a,s,c){return new e(t,n,r,i,o,a,s,c)};case 9:return function(t,n,r,i,o,a,s,c,u){return new e(t,n,r,i,o,a,s,c,u)};case 10:return function(t,n,r,i,o,a,s,c,u,l){return new e(t,n,r,i,o,a,s,c,u,l)};case 11:return function(t,n,r,i,o,a,s,c,u,l,f){return new e(t,n,r,i,o,a,s,c,u,l,f)};case 12:return function(t,n,r,i,o,a,s,c,u,l,f,p){return new e(t,n,r,i,o,a,s,c,u,l,f,p)};case 13:return function(t,n,r,i,o,a,s,c,u,l,f,p,d){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d)};case 14:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h)};case 15:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m)};case 16:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g)};case 17:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y)};case 18:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v)};case 19:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b)};case 20:return function(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b,S){return new e(t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b,S)}}throw new Error("Cannot create a factory for '"+i.stringify(e)+"' because its constructor has more than 20 arguments")},e.prototype._zipTypesAndAnnotations=function(e,t){var n;n="undefined"==typeof e?new Array(t.length):new Array(e.length);for(var r=0;r<n.length;r++)"undefined"==typeof e?n[r]=[]:e[r]!=Object?n[r]=[e[r]]:n[r]=[],i.isPresent(t)&&i.isPresent(t[r])&&(n[r]=n[r].concat(t[r]));return n},e.prototype.parameters=function(e){if(r(this._reflect)){var n=this._reflect.getMetadata(t.PARAM_META_KEY,e),a=this._reflect.getMetadata(t.PARAM_REFLECT_META_KEY,e);if(i.isPresent(a)||i.isPresent(n))return this._zipTypesAndAnnotations(a,n)}var s=new Array(e.length);return o.ListWrapper.fill(s,void 0),s},e.prototype.rawParameters=function(e){return this._reflect.getMetadata(t.PARAM_META_KEY,e)},e.prototype.registerParameters=function(e,n){this._reflect.defineMetadata(t.PARAM_META_KEY,e,n)},e.prototype.annotations=function(e){if(r(this._reflect)){var n=this._reflect.getMetadata(t.CLASS_META_KEY,e);if(i.isPresent(n))return n}return[]},e.prototype.ownAnnotations=function(e){return this._reflect.getOwnMetadata(t.CLASS_META_KEY,e)},e.prototype.registerAnnotations=function(e,n){this._reflect.defineMetadata(t.CLASS_META_KEY,e,n)},e.prototype.propMetadata=function(e){if(r(this._reflect)){var n=this._reflect.getMetadata(t.PROP_META_KEY,e);if(i.isPresent(n))return n}return{}},e.prototype.ownPropMetadata=function(e){return this._reflect.getOwnMetadata(t.PROP_META_KEY,e)},e.prototype.registerPropMetadata=function(e,n){this._reflect.defineMetadata(t.PROP_META_KEY,e,n)},e.prototype.registerDowngradedNg2ComponentName=function(e,n){this._reflect.defineMetadata(t.DOWNGRADED_COMPONENT_NAME_KEY,e,n)},e.prototype.downgradedNg2ComponentName=function(e){return this._reflect.getOwnMetadata(t.DOWNGRADED_COMPONENT_NAME_KEY,e)},e.prototype.interfaces=function(e){throw new Error("JavaScript does not support interfaces")},e.prototype.getter=function(e){return new Function("o","return o."+e+";")},e.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},e.prototype.method=function(e){var t="if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);";return new Function("o","args",t)},e}();t.ReflectionCapabilities=s},function(e,t,n){"use strict";var r=n(13),i=n(40),o=n(13),a=n(13),s=function(){function e(){this._allKeys=i.ListWrapper.create(),this._idCounter=0}return e.prototype.get=function(t){if(!o.isType(t))throw new Error("KeyRegistry#get:\n                        ================\n                        you'v tried to create a key for `"+t+"`\n                        creating and getting key tokens is avaialable only for Type");var n=""+a.getTypeName(t)+e._suffix+this._uniqueId();return this._allKeys.push(n),n},Object.defineProperty(e.prototype,"numberOfKeys",{get:function(){return i.ListWrapper.size(this._allKeys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allKeys",{get:function(){return i.ListWrapper.clone(this._allKeys)},enumerable:!0,configurable:!0}),e.prototype._reset=function(){i.ListWrapper.clear(this._allKeys),this._idCounter=0},e.prototype._uniqueId=function(e){var t=++this._idCounter;return""+r.baseToString(e)+t},e}();s._suffix="#",t.KeyRegistry=s,t.globalKeyRegistry=new s},function(e,t,n){"use strict";var r=n(13),i=n(445),o=function(){function e(e){this.pipeResolver=e}return e.prototype.createFromType=function(e){function t(t){var r=t.instantiate(e),i=r.transform.bind(r);return n.pure===!1&&(i.$stateful=!0),i}var n=this.pipeResolver.resolve(e);if(!r.isFunction(e.prototype.transform))throw new Error("@Pipe: must implement '#transform' method");return t.$inject=["$injector"],[n.name,t]},e}();t.PipeProvider=o,t.pipeProvider=new o(new i.PipeResolver)},function(e,t,n){"use strict";function r(e){return e instanceof a.PipeMetadata}var i=n(13),o=n(40),a=n(202),s=n(83),c=n(120),u=function(){function e(){}return e.prototype.resolve=function(e){var t=s.reflector.annotations(c.resolveForwardRef(e));if(i.isPresent(t)){var n=o.ListWrapper.find(t,r);if(i.isPresent(n))return n}throw new Error("No Pipe decorator found on "+i.stringify(e))},e}();t.PipeResolver=u},function(e,t,n){"use strict";var r=n(447),i=n(13),o=n(40),a=n(448),s=n(203),c=n(84),u=n(449),l=n(461),f=n(462),p=n(463),d=n(204),h=function(){function e(e){this.directiveResolver=e}return e.prototype.createFromType=function(t){function n(e,n,r,i,o){var a={$scope:e,$element:n,$attrs:r,$transclude:i};return u.directiveControllerFactory(this,t,o,a,f,d,s)}function r(){return g}var s=this.directiveResolver.resolve(t),l=i.resolveDirectiveNameFromSelector(s.selector),f=this.directiveResolver.getRequiredDirectivesMap(t),p=a.resolveImplementedLifeCycleHooks(t),d={restrict:"A",controller:n,link:{pre:function(){d._ngOnInitBound()},post:this._createLink(t,s,p)},require:this._createRequires(f,l),_ngOnInitBound:i.noop};if(n.$inject=["$scope","$element","$attrs","$transclude","$injector"],s instanceof c.ComponentMetadata){var h=this.directiveResolver.parseAssetUrl(s),m={restrict:"E",scope:{},bindToController:{},controllerAs:e._controllerAs,transclude:e._transclude};if(s.template&&s.templateUrl)throw new Error("cannot have both template and templateUrl");s.template&&(m.template=s.template),s.templateUrl&&(m.templateUrl=""+h+s.templateUrl),o.StringMapWrapper.assign(d,m)}i.isFunction(t.compile)&&(d.compile=function(e,n){var r=t.compile(e,n);return i.isJsObject(r)?r:this.link}),i.isFunction(t.link)&&(d.link=t.link);var g=this._createDDO(d,s.legacy);return o.StringMapWrapper.forEach(g,function(e,t){"$"===t.charAt(0)&&(r[t]=e,i.isFunction(g.controller)&&(g.controller[t]=e))}),i.isFunction(t.$canActivate)&&(r.$canActivate=t.$canActivate),[l,r]},e.prototype._createDDO=function(t,n){return i.assign({},e._ddoShell,t,n)},e.prototype._createRequires=function(e,t){return[t].concat(o.StringMapWrapper.values(e))},e.prototype._createLink=function(e,t,n){function r(e,r,i,c,u){var f=[],h=c[0],m=c.slice(1);p._setHostStaticAttributes(r,a.hostStatic),f.push.apply(f,p._setHostBindings(e,r,h,a.hostBindings)),p._setHostListeners(e,r,h,a.hostListeners);var g=l._getParentCheckNotifiers(h,m);f.push.apply(f,g),l._setupQuery(e,r,h,t.queries),o.StringMapWrapper.size(t.queries)?(h._ngOnChildrenChanged(s.ChildrenChangeHook.FromView,[g.forEach(function(e){return e()}),h.ngAfterViewInit&&h.ngAfterViewInit.bind(h),h.ngAfterViewChecked&&h.ngAfterViewChecked.bind(h)]),h._ngOnChildrenChanged(s.ChildrenChangeHook.FromContent,[g.forEach(function(e){return e()}),h.ngAfterContentInit&&h.ngAfterContentInit.bind(h),h.ngAfterContentChecked&&h.ngAfterContentChecked.bind(h)])):(g.forEach(function(e){return e()}),h.ngAfterViewInit&&h.ngAfterViewInit(),h.ngAfterContentInit&&h.ngAfterContentInit()),d._setupDestroyHandler(e,r,h,n.ngOnDestroy,f)}if((n.ngAfterContentChecked||n.ngAfterViewChecked)&&0===o.StringMapWrapper.size(t.queries))throw new Error("\n              Hooks Impl for "+i.stringify(e)+":\n              ===================================\n              You've implement AfterContentChecked/AfterViewChecked lifecycle, but @ViewChild(ren)/@ContentChild(ren) decorators are not used.\n              we cannot invoke After(Content|View)Checked without provided @Query decorators\n              ");if(t instanceof c.ComponentMetadata&&(n.ngAfterContentInit||n.ngAfterContentChecked)&&!o.StringMapWrapper.getValueFromPath(t,"legacy.transclude"))throw new Error("\n              Hooks Impl for "+i.stringify(e)+":\n              ===================================\n              You cannot implement AfterContentInit lifecycle, without allowed transclusion.\n              turn transclusion on within decorator like this: @Component({legacy:{transclude:true}})\n              ");o.StringMapWrapper.size(t.queries)&&(e.prototype._ngOnChildrenChanged=i.noop);var a=f._parseHost(t.host);return r},e}();h._ddoShell={require:[],controller:i.noop,link:{pre:i.noop,post:i.noop}},h._controllerAs="$ctrl",h._transclude=!1,t.DirectiveProvider=h,t.directiveProvider=new h(new r.DirectiveResolver)},function(e,t,n){"use strict";function r(e){return e instanceof c.DirectiveMetadata}function i(e,t,n){function r(e){return o.isType(p.resolveForwardRef(e))?f.getInjectableName(p.resolveForwardRef(e)):e}function i(){return b?"":y?"^":S?"^^":void 0}function s(e){if(e.length<2)return!1;if(2===e.length){var t=e.filter(function(e){return e instanceof l.InjectMetadata||o.isType(e)}).length;if(2===t)return!1}return!0}if(s(e)){var c=a.ListWrapper.find(e,function(e){return e instanceof l.InjectMetadata}),u=a.ListWrapper.find(e,o.isType),h=(c||{token:u}).token,m=void 0===h?void 0:h,g=c&&u?e.length-1:e.length;if(!m)throw new Error(d.getErrorMsg(n,"no Directive instance name provided within @Inject() or :DirectiveClass annotation missing"));var y=a.ListWrapper.findIndex(e,function(e){return e instanceof l.HostMetadata})!==-1,v=a.ListWrapper.findIndex(e,function(e){return e instanceof l.OptionalMetadata})!==-1,b=a.ListWrapper.findIndex(e,function(e){return e instanceof l.SelfMetadata})!==-1,S=a.ListWrapper.findIndex(e,function(e){return e instanceof l.SkipSelfMetadata})!==-1;if(v&&3!==g)throw new Error(d.getErrorMsg(n,"you cannot use @Optional() without related decorator for injecting Directives. use one of @Host|@Self()|@SkipSelf() + @Optional()"));if(b&&S)throw new Error(d.getErrorMsg(n,"you cannot provide both @Self() and @SkipSelf() with @Inject("+o.getFuncName(m)+") for Directive Injection"));if(y&&b||y&&S)throw new Error(d.getErrorMsg(n,"you cannot provide both @Host(),@SkipSelf() or @Host(),@Self() with @Inject("+o.getFuncName(m)+") for Directive Injections"));var _=i(),O=v?"?":"",T=""+O+_,E=r(m);return w={},w[E+"#"+t]=""+T+E,w;var w}}var o=n(13),a=n(40),s=n(83),c=n(84),u=n(162),l=n(70),f=n(97),p=n(120),d=n(264),h=/^(.+)\/.+\.js$/,m=function(){function e(){}return e.prototype.resolve=function(e){var t=this._getDirectiveMeta(e),n=s.reflector.propMetadata(e);return this._mergeWithPropertyMetadata(t,n)},e.prototype.getRequiredDirectivesMap=function(e){var t=(this._getDirectiveMeta(e),s.reflector.parameters(e));return o.isPresent(t)?t.reduce(function(t,n,r){var a=i(n,r,e);return o.isPresent(a)&&o.assign(t,a),t},{}):{}},e.prototype.parseAssetUrl=function(e){if(o.isBlank(e.moduleId))return"";var t=e.moduleId,n=t.match(h)||[],r=n[1],i=void 0===r?"":r;return i+"/"},e.prototype._getDirectiveMeta=function(e){var t=s.reflector.annotations(p.resolveForwardRef(e));if(o.isPresent(t)){var n=a.ListWrapper.find(t,r);if(o.isPresent(n))return n}throw new Error("No Directive annotation found on "+o.stringify(e))},e.prototype._mergeWithPropertyMetadata=function(e,t){var n=[],r=[],i=[],s={},l={};return a.StringMapWrapper.forEach(t,function(e,t){e.forEach(function(e){if(e instanceof c.InputMetadata&&(o.isPresent(e.bindingPropertyName)?n.push(t+": "+e.bindingPropertyName):n.push(t)),e instanceof c.AttrMetadata&&(o.isPresent(e.bindingPropertyName)?r.push(t+": "+e.bindingPropertyName):r.push(t)),e instanceof c.OutputMetadata&&(o.isPresent(e.bindingPropertyName)?i.push(t+": "+e.bindingPropertyName):i.push(t)),e instanceof c.HostBindingMetadata&&(o.isPresent(e.hostPropertyName)?s["["+e.hostPropertyName+"]"]=t:s["["+t+"]"]=t),e instanceof c.HostListenerMetadata){var a=o.isPresent(e.args)?e.args.join(", "):"";s["("+e.eventName+")"]=t+"("+a+")"}e instanceof u.ContentChildrenMetadata&&(l[t]=e),e instanceof u.ViewChildrenMetadata&&(l[t]=e),e instanceof u.ContentChildMetadata&&(l[t]=e),e instanceof u.ViewChildMetadata&&(l[t]=e)})}),this._merge(e,n,r,i,s,l)},e.prototype._merge=function(e,t,n,r,i,s){var u=o.isPresent(e.inputs)?a.ListWrapper.concat(e.inputs,t):t,l=o.isPresent(e.attrs)?a.ListWrapper.concat(e.attrs,n):n,f=o.isPresent(e.outputs)?a.ListWrapper.concat(e.outputs,r):r,p=o.isPresent(e.host)?a.StringMapWrapper.merge(e.host,i):i,d=o.isPresent(e.queries)?a.StringMapWrapper.merge(e.queries,s):s,h={selector:e.selector,inputs:u,attrs:l,outputs:f,host:p,queries:d,legacy:e.legacy};if(e instanceof c.ComponentMetadata){var m=a.StringMapWrapper.assign({},h,{moduleId:e.moduleId,template:e.template,templateUrl:e.templateUrl,changeDetection:o.isPresent(e.changeDetection)?e.changeDetection:1});return new c.ComponentMetadata(m)}return new c.DirectiveMetadata(h)},e}();t.DirectiveResolver=m},function(e,t,n){"use strict";function r(e,t){if(!(t instanceof o.Type))return!1;var n=t.prototype;switch(e){case a.LifecycleHooks.AfterContentInit:return!!n.ngAfterContentInit;case a.LifecycleHooks.AfterContentChecked:return!!n.ngAfterContentChecked;case a.LifecycleHooks.AfterViewInit:return!!n.ngAfterViewInit;case a.LifecycleHooks.AfterViewChecked:return!!n.ngAfterViewChecked;case a.LifecycleHooks.OnDestroy:return!!n.ngOnDestroy;case a.LifecycleHooks.OnInit:return!!n.ngOnInit;case a.LifecycleHooks.OnChanges:return!!n.ngOnChanges;case a.LifecycleHooks.DoCheck:return!!n.ngDoCheck;case a.LifecycleHooks._OnChildrenChanged:return!!n._ngOnChildrenChanged;default:return!1}}function i(e){return{ngOnInit:r(a.LifecycleHooks.OnInit,e),ngOnChanges:r(a.LifecycleHooks.OnChanges,e),ngDoCheck:r(a.LifecycleHooks.DoCheck,e),ngAfterContentInit:r(a.LifecycleHooks.AfterContentInit,e),ngAfterContentChecked:r(a.LifecycleHooks.AfterContentChecked,e),ngAfterViewInit:r(a.LifecycleHooks.AfterViewInit,e),ngAfterViewChecked:r(a.LifecycleHooks.AfterViewChecked,e),ngOnDestroy:r(a.LifecycleHooks.OnDestroy,e),_ngOnChildrenChanged:r(a.LifecycleHooks._OnChildrenChanged,e)}}var o=n(265),a=n(203);t.hasLifecycleHook=r,t.resolveImplementedLifeCycleHooks=i},function(e,t,n){"use strict";function r(e,t,n,r,h,m,g){function y(e){v.$on("$destroy",function(){return e})}var v=r.$scope,b=r.$element,S=r.$attrs,_={$parse:n.get("$parse"),$interpolate:n.get("$interpolate"),$rootScope:n.get("$rootScope")},O={changeDetectorRef:l.ChangeDetectorRef.create(v)},T=Object.create(t.prototype),E=f._createDirectiveBindings(!p.isAttrDirective(g),v,S,T,g,_),w=E.removeWatches,I=E.initialChanges;y(w),u.StringMapWrapper.size(h)&&(t.$inject=c(t.$inject,h));var R=s(h),P=o(T);return n.invoke(t,T,u.StringMapWrapper.assign(r,O,R)),u.StringMapWrapper.assign(T,P),d.isFunction(T.ngOnChanges)&&T.ngOnChanges(I),m._ngOnInitBound=function(){if(u.StringMapWrapper.size(h)){var e=a(h,b,t),s=o(T);n.invoke(t,T,u.StringMapWrapper.assign(r,O,e)),u.StringMapWrapper.assign(T,s)}if(d.isFunction(T.ngOnInit)&&T.ngOnInit(),d.isFunction(T.ngDoCheck)){var c=i(v,function(){return T.ngDoCheck()});y(c)}},T}function i(e,t){var n=!1,r=e.$watch(function(){n||(n=!0,e.$$postDigest(function(){n=!1,t()}))});return r}function o(e){var t={};return u.StringMapWrapper.forEach(e,function(n,r){e[r]&&(t[r]=n)}),t}function a(e,t,n){var r;if(d.isString(e)){var i=e.match(m.REQUIRE_PREFIX_REGEXP),o=e.substring(i[0].length),s=i[1]||i[3],c="?"===i[2];if("^^"===s&&(t=t.parent()),!r){var l="$"+o+"Controller";r=s?t.inheritedData(l):t.data(l)}if(!r&&!c)throw new Error("Directive/Controller '"+o+"', required by directive '"+d.getFuncName(n)+"', can't be found!")}else if(d.isArray(e)){r=[];for(var f=0,p=e.length;f<p;f++)r[f]=a(e[f],t,n)}else d.isJsObject(e)&&(r={},u.StringMapWrapper.forEach(e,function(e,i){r[i]=a(e,t,n)}));return r||null}function s(e){return u.StringMapWrapper.keys(e).reduce(function(e,t){return e[t]=void 0,e},{})}function c(e,t){var n=u.StringMapWrapper.keys(t);return e.slice().map(function(e){var t=n.filter(function(t){return h.StringWrapper.startsWith(t,e)})[0];if(t){var r=n.indexOf(t);n.splice(r,1)}return t||e})}var u=n(40),l=n(266),f=n(450),p=n(204),d=n(13),h=n(276),m=n(460);t.directiveControllerFactory=r,t.getRequiredControllers=a,t.getEmptyRequiredControllers=s,t.createNewInjectablesToMatchLocalDi=c},function(e,t,n){"use strict";function r(e,t,n,r,p,d){function h(e,t,n,i){if(void 0===i&&(i=!1),n){var a=T(n),s=r[e]=a(I);return L[e]=o.ChangeDetectionUtil.simpleChange(o.ChangeDetectionUtil.uninitialized,r[e]),I.$watch(a,function(t,n){if(n===t){if(n===s)return;n=s}v(e,t,n),r[e]=i?c.global.angular.copy(t):t},a.literal)}}function m(e,t,i){function o(e,t){return e===t||e!==e&&t!==t}if(i){var a,s=T(i),u=s.assign||function(){throw a=r[e]=s(I),new Error("nonassign,\n          Expression '"+n[t]+"' in attribute '"+t+"' used with directive '{2}' is non-assignable!")},l=s.literal?c.global.angular.equals:o,f=function(t){return l(t,r[e])||(l(t,a)?u(I,t=r[e]):r[e]=t),a=t};return f.$stateful=!0,a=r[e]=s(I),I.$watch(T(i,f),null,s.literal)}}function g(e,t,n){var i=n?T(n):c.noop;if(i!==c.noop){var o=new u.EventEmitter;o.wrapNgExpBindingToEmitter(function(e){return i(I,e)}),r[e]=o}}function y(e,t,i){var a=i,s=n.$observe(t,function(t){if(c.isString(t)||c.isBoolean(t)){var n=r[e];v(e,t,n),r[e]=t}});return n.$$observers[t].$$scope=I,c.isString(a)?r[e]=O(a)(I):c.isBoolean(a)&&(r[e]=a),L[e]=o.ChangeDetectionUtil.simpleChange(o.ChangeDetectionUtil.uninitialized,r[e]),s}function v(e,t,n){c.isFunction(r.ngOnChanges)&&t!==n&&(a.changesQueueService.onChangesQueue||(I.$$postDigest(a.changesQueueService.flushOnChangesQueue),a.changesQueueService.onChangesQueue=[]),_||(_={},a.changesQueueService.onChangesQueue.push(b)),_[e]&&(n=_[e].previousValue),_[e]=o.ChangeDetectionUtil.simpleChange(n,t))}function b(){r.ngOnChanges(_),_=void 0}function S(){for(var e=$.concat(D),t=0,n=e.length;t<n;++t)e[t]&&c.isFunction(e[t])&&e[t]()}var _,O=d.$interpolate,T=d.$parse,E=d.$rootScope,w=i.isComponentDirective(p)&&o.ChangeDetectionUtil.isOnPushChangeDetectionStrategy(p.changeDetection),I=e?t.$parent:t,R=p.inputs,P=void 0===R?[]:R,j=p.outputs,A=void 0===j?[]:j,C=f.setupFields(n,P,A),$=[],D=[],L={};return a.changesQueueService.buildFlushOnChanges(E),s.StringMapWrapper.forEach(C.inputs,function(t,n){var r=t.exp,i=t.attrName,o=t.mode,a=e&&o===l.BINDING_MODE.twoWay,s=a?m(n,i,r):h(n,i,r,w);$.push(s)}),s.StringMapWrapper.forEach(C.attrs,function(e,t){var n=e.attrName,r=e.exp,i=(e.mode,y(t,n,r));D.push(i)}),s.StringMapWrapper.forEach(C.outputs,function(e,t){var n=e.exp,r=e.attrName;e.mode;g(t,r,n)}),{initialChanges:L,removeWatches:S,_watchers:{watchers:$,observers:D}}}var i=n(204),o=n(267),a=n(451),s=n(40),c=n(13),u=n(268),l=n(275),f=n(459);t._createDirectiveBindings=r},function(e,t,n){"use strict";var r=n(13),i=10,o=i,a=function(){function e(){}return e.prototype.buildFlushOnChanges=function(e){function t(e){return r.isFunction(a.flushOnChangesQueue)?a.flushOnChangesQueue:(a.flushOnChangesQueue=n(e),a.flushOnChangesQueue)}function n(e){return function(){try{if(!--o)throw a.onChangesQueue=void 0,new Error("infchng, "+i+" ngOnChanges() iterations reached. Aborting!\n");e.$apply(function(){for(var e=0,t=a.onChangesQueue.length;e<t;++e)a.onChangesQueue[e]();a.onChangesQueue=void 0})}finally{o++}}}var a=this;t(e)},e}();t.ChangesQueue=a,t.changesQueueService=new a},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(99),o=n(205),a=n(273);t.toSubscriber=r},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(272);t.tryCatch=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(t,e),t}(Error);t.UnsubscriptionError=i},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)}function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:o.noop}var o=n(456);t.pipe=r,t.pipeFromArray=i},function(e,t,n){"use strict";function r(){}t.noop=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ObjectUnsubscribedError=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(163),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";function r(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]);var r=c(i(t),e),o=r.inputs,a=r.attrs,s=u(i(n),e).outputs;return{inputs:o,attrs:a,outputs:s}}function i(e){var t=[];if(!e)return t;for(var n=0,r=e;n<r.length;n++){var i=r[n],c=i.split(":"),u=c[0].trim(),l=(c[1]||c[0]).trim(),f=a(l),p=s(l,u,f),d=o(l,f);t.push({prop:u,attr:p,bracketAttr:"["+p+"]",parenAttr:"("+p+")",bracketParenAttr:"[("+p+")]",type:d,typeByTemplate:!f})}return t}function o(e,t){return t?e.charAt(0):""}function a(e){return f.ListWrapper.contains([p.BINDING_MODE.attr,p.BINDING_MODE.oneWay,p.BINDING_MODE.twoWay],e.charAt(0))}function s(e,t,n){return n?e.length>1?e.substring(1):t:e}function c(e,t){for(var n={},r={},i=0,o=e;i<o.length;i++){var a=o[i];if(a.typeByTemplate)t.hasOwnProperty(a.attr)?n[a.prop]={mode:p.BINDING_MODE.attr,exp:t[a.attr],attrName:a.attr}:t.hasOwnProperty(a.bracketAttr)?r[a.prop]={mode:p.BINDING_MODE.oneWay,exp:t[a.bracketAttr],attrName:a.bracketAttr}:t.hasOwnProperty(a.bracketParenAttr)&&(r[a.prop]={mode:p.BINDING_MODE.twoWay,exp:t[a.bracketParenAttr],attrName:a.bracketParenAttr});else if(t.hasOwnProperty(a.attr)){var s={mode:a.type,exp:t[a.attr],attrName:a.attr};a.type===p.BINDING_MODE.attr?n[a.prop]=s:r[a.prop]=s}}return{inputs:r,attrs:n}}function u(e,t){for(var n={},r=0;r<e.length;r+=1){var i=e[r],o={mode:p.BINDING_MODE.output,exp:void 0,attrName:""};t.hasOwnProperty(i.attr)?n[i.prop]=f.StringMapWrapper.assign({},o,{exp:t[i.attr],attrName:i.attr}):t.hasOwnProperty(i.parenAttr)&&(n[i.prop]=f.StringMapWrapper.assign({},o,{exp:t[i.parenAttr],attrName:i.parenAttr}))}return{outputs:n}}function l(e){function t(e,t,n){return void 0===n&&(n=[]),e.reduce(function(e,r){var i=r.split(c).map(function(e){return e.trim()}),o=i[0],a=i[1],s=void 0===a?"":a,u=s.match(p.INPUT_MODE_REGEX),l=u||[],f=l[1],d=void 0===f?t:f,h=l[2],m=void 0===h?"":h,g=l[3],y=void 0===g?"":g;return n.indexOf(d)!==-1?e:(t===p.BINDING_MODE.output||u&&u[1]||console.warn("\n        You need to explicitly provide type of binding(=,<,@) within your <code>'@Input() "+o+";</code>.\n        Next version 2.0 will create binding by parsing template if you provide '@Input()' without binding type.\n        "),
e[o]={mode:d,alias:y,optional:m===p.BINDING_MODE.optional||!0},e)},{})}var n=e.inputs,r=void 0===n?[]:n,i=e.outputs,o=void 0===i?[]:i,a=e.attrs,s=void 0===a?[]:a,c=":";return{inputs:t(r,p.BINDING_MODE.twoWay,[p.BINDING_MODE.attr]),outputs:t(o,p.BINDING_MODE.output),attrs:f.StringMapWrapper.merge(t(s,p.BINDING_MODE.attr),t(r,p.BINDING_MODE.twoWay,[p.BINDING_MODE.oneWay,p.BINDING_MODE.twoWay]))}}var f=n(40),p=n(275);t.setupFields=r,t._parseFields=i,t._setupInputs=c,t._setupOutputs=u,t._parseBindings=l},function(e,t,n){"use strict";t.REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/},function(e,t,n){"use strict";function r(e,t,n,r){function o(e,t,n){function r(e,t,n,r){return i(e,t,n,r.selector,s.view,!0)}function o(e,t,n,r){return i(e,t,n,r.selector,s.content,!0)}function a(e,t,n,r){return i(e,t,n,r.selector,s.view)}function c(e,t,n,r){return i(e,t,n,r.selector,s.content)}var u=(l={},l[s.view]=[],l[s.content]=[],l);return f.StringMapWrapper.forEach(n,function(n,i){n instanceof g.ViewChildMetadata&&u[s.view].push(r(e,t,i,n)),n instanceof g.ViewChildrenMetadata&&u[s.view].push(a(e,t,i,n)),n instanceof g.ContentChildMetadata&&u[s.content].push(o(e,t,i,n)),n instanceof g.ContentChildrenMetadata&&u[s.content].push(c(e,t,i,n))}),u;var l}var a=Object.freeze({view:"__readViewChildrenOrderScheduled",content:"__readContentChildrenOrderScheduled"}),s=Object.freeze({view:"view",content:"content"});if(0!==f.StringMapWrapper.size(r)){var c=o(t,n,r);n.__readContentChildrenOrderScheduled=!1,n.__readViewChildrenOrderScheduled=!1;var u=function(t,r,i){void 0===r&&(r=[]),void 0===i&&(i=c);var o="",u="";if(t===p.ChildrenChangeHook.FromView)o=a.view,u=s.view;else{if(t!==p.ChildrenChangeHook.FromContent)throw new Error("_ngOnChildrenChanged: queryType("+t+") must be one of FromView|FromContent");u=s.content,o=a.content}n[o]||(n[o]=!0,e.$evalAsync(function(){n[o]=!1,i[u].forEach(function(e){return e()}),r.forEach(function(e){l.isFunction(e)&&e()})}))};n._ngOnChildrenChanged=u.bind(n)}}function i(e,t,n,r,i,s){function c(){if(s){t[n]=null;var a=o(e,p,i,s),c=l.isString(r)?a:u(a,d);t[n]=c}else{t[n]=[];var f=o(e,p,i);if(l.isString(r))return void(t[n]=f);for(var h=0;h<f.length;h++)t[n].push(u(f.eq(h),d))}}void 0===s&&(s=!1);var f=a(r),p=f.selector,d=f.childCtrlName;return c}function o(e,t,n,r){void 0===r&&(r=!1);var i="";"view"===n&&(i=":not(ng-transclude):not([ng-transclude]) > "+t),"content"===n&&(i="ng-transclude "+t+", [ng-transclude] "+t);var o=r?"querySelector":"querySelectorAll";return l.global.angular.element(e[0][o](i))}function a(e){var t=s(e),n=h.getInjectableName(e);return{selector:t,childCtrlName:n}}function s(e){if(l.isString(e))return e;if(l.isType(e)){var t=d.reflector.annotations(e)[0];if(t instanceof m.DirectiveMetadata)return t.selector}throw new Error("cannot query for non Directive/Component type "+l.getFuncName(e))}function c(e,t){var n=t.reduce(function(t,n){if(!l.isJsObject(n))return t;var r=n.constructor;if(!l.isType(r))return t;var i=d.reflector.propMetadata(r);if(!f.StringMapWrapper.size(i))return t;var o=[];return f.StringMapWrapper.forEach(i,function(t){t.filter(function(t){return!!(t instanceof g.QueryMetadata&&l.isType(t.selector))&&e instanceof t.selector}).forEach(function(e){e.isViewQuery||o.push(function(){return n._ngOnChildrenChanged(p.ChildrenChangeHook.FromContent,[n.ngAfterContentChecked.bind(n)])}),e.isViewQuery&&o.push(function(){return n._ngOnChildrenChanged(p.ChildrenChangeHook.FromView,[n.ngAfterViewChecked.bind(n)])})})}),t.concat(o)},[]);return f.ListWrapper.size(n)?n:[l.noop]}function u(e,t){return e?e.controller(t):null}var l=n(13),f=n(40),p=n(203),d=n(83),h=n(97),m=n(84),g=n(162);t._setupQuery=r,t._resolveChildrenFactory=i,t._getChildElements=o,t._getSelectorAndCtrlName=a,t._getSelector=s,t._getParentCheckNotifiers=c,t.getControllerOnElement=u},function(e,t,n){"use strict";function r(e){function t(e){return a.test(e)}function n(e){return s.test(e)}function r(e){return!(t(e)||n(e))}function l(e){return e.replace(/\[|\]|\(|\)/g,"")}function f(e){var t=Object.keys(e)[0],n=e[t],r=/^(\w+)\(([$\w.\s,]*)\)$/.exec(n),i=r[1],o=r[2],a=[i].concat(o.split(",").filter(function(e){return Boolean(e)}).map(function(e){return e.trim()}));return s={},s[t.replace(/\s/g,"")]=a,s;var s}if(i.isPresent(e)){var p={},d=[],h={};o.StringMapWrapper.forEach(e,function(e,o){var a=(s={},s[l(o)]=e,s);if(r(o))return void i.assign(p,a);if(t(o))return void d.push(a);n(o)&&i.assign(h,f(a));var s});var m=d.reduce(function(e,t){var n=Object.keys(t)[0],r=t[n];return c.test(n)?(e.classes[n.replace(c,"")]=r,e):u.test(n)?(e.attributes[n.replace(u,"")]=r,e):(i.assign(e.properties,t),e)},{classes:{},attributes:{},properties:{}});return{hostStatic:p,hostBindings:m,hostListeners:h}}}var i=n(13),o=n(40),a=/^\[.*\]$/,s=/^\(.*\)$/,c=/^class./,u=/^attr./;t._parseHost=r},function(e,t,n){"use strict";function r(e,t){e.attr(t)}function i(e,t,n,r){function i(r,i){var o=[];return l.StringMapWrapper.forEach(i[r],function(i,a){o.push(e.$watch(function(){return n[i]},function(e){"classes"===r&&t.toggleClass(a,e),"attributes"===r&&t.attr(a,e),"properties"===r&&l.StringMapWrapper.setValueInPath(t[0],a,e)}))}),o}return i("classes",r).concat(i("attributes",r),i("properties",r))}function o(e,t,n,r){function i(r,i){function o(t){var r=a(t,u);e.$apply(function(){var e=n[s].apply(n,r);e===!1&&t.preventDefault()})}var s=r[0],u=r.slice(1),l=c(i,t),f=l.event,p=l.target;p.on(f,o),p!==t&&e.$on("$destroy",function(){return p.off(f,o)})}l.StringMapWrapper.forEach(r,i)}function a(e,t){var n="$event";return t.reduce(function(t,r){if(!f.StringWrapper.startsWith(r,n))throw new Error("\n              only $event.* is supported. Please provide correct listener parameter @example: $event,$event.target\n              ");return r===n?t.concat([e]):t.concat([l.StringMapWrapper.getValueFromPath(e,r.replace(n,""))])},[])}function s(e,t){var n=["document","window","body"],r=e.get("$document");if("document"===t)return r;if("window"===t)return u.global.angular.element(e.get("$"+t));if("body"===t)return u.global.angular.element(r[0][t]);throw new Error("unsupported global target '"+t+"', only '"+n+"' are supported")}function c(e,t){var n=e.split(/\s*:\s*/);if(2===n.length){var r=n[0],i=n[1];return{event:i,target:s(t.injector(),r)}}return{event:e,target:t}}var u=n(13),l=n(40),f=n(276);t._setHostStaticAttributes=r,t._setHostBindings=i,t._setHostListeners=o,t._getHostListenerCbParams=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(161));var i=n(465);t.bundle=i.bundle},function(e,t,n){"use strict";function r(e,t,n){void 0===t&&(t=[]);var r=a.reflector.downgradedNg2ComponentName(e);if(r){var i=n||o.global.angular.module(r,[]);return i.directive(r,e),i}var c=s.getInjectableName(e),l=n||o.global.angular.module(c,[]),f=a.reflector.annotations(e),p=f[0],d=p.providers,h=void 0===d?[]:d,m=p.viewProviders,g=void 0===m?[]:m,y=s.provide(e),v=y[0],b=y[1],S=u._getAngular1ModuleMetadataByType(e),_=S.providerName,O=S.providerMethod,T=S.moduleMethod;return u._isTypeRegistered(v,l,_,O)?l:(l[T](v,b),u._normalizeProviders(l,h),u._normalizeProviders(l,g),u._normalizeProviders(l,t),l)}function i(e,t,n){void 0===t&&(t=[]);var f=s.getInjectableName(e),p=n||o.global.angular.module(f,[]),d=a.reflector.annotations(e),h=d[0];if(!c.isNgModule(h))throw new Error("bundle() requires a decorated NgModule as its first argument");var m=h.declarations,g=void 0===m?[]:m,y=h.providers,v=void 0===y?[]:y,b=h.imports,S=void 0===b?[]:b;l.ListWrapper.flattenDeep(g).forEach(function(e){r(e,[],p)}),u._normalizeProviders(p,v);var _=S.filter(function(e){if(!o.isFunction(e))return!0;a.reflector.annotations(e);return!c.isNgModule(h)});u._normalizeProviders(p,_);var O=S.filter(function(e){if(!o.isFunction(e))return!1;a.reflector.annotations(e);return c.isNgModule(h)});return O.forEach(function(e){i(e,[],p)}),u._normalizeProviders(p,t),p}var o=n(13),a=n(83),s=n(97),c=n(121),u=n(466),l=n(40);t.bundle=i},function(e,t,n){"use strict";function r(e){var t=e.token;if(c.isPresent(e.useValue)){var n=l.provide(t,{useValue:e.useValue}),r=n[0],i=n[1],o="value";return{method:o,name:r,value:i}}if(e.useFactory){var a=l.provide(t,{useFactory:e.useFactory,deps:e.dependencies}),s=a[0],i=a[1],o="factory";return{method:o,name:s,value:i}}if(e.useClass){var u=l.provide(t,{useClass:e.useClass}),f=u[0],i=u[1],o="service";return{method:o,name:f,value:i}}if(e.useExisting){var p=l.provide(e.useExisting),i=(p[0],p[1]),o="factory";throw new Error("useExisting is unimplemented")}throw new Error("invalid provider type! please specify one of: [useValue,useFactory,useClass]")}function i(e){var t=u.reflector.annotations(e)[0];if(c.isBlank(t)){if(c.isType(e))return{providerName:"$injector",providerMethod:"invoke",moduleMethod:"config"};throw new Error("\n        cannot get injectable name token from none decorated class "+c.getFuncName(e)+"\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\n      ")}return f.isPipe(t)?{providerName:"$filterProvider",providerMethod:"register",moduleMethod:"filter"}:f.isDirectiveLike(t)?{providerName:"$compileProvider",providerMethod:"directive",moduleMethod:"directive"}:f.isService(t)?{providerName:"$provide",providerMethod:"service",moduleMethod:"service"}:void 0}function o(e,t){return t.forEach(function(t){if(c.isString(t))return void e.requires.push(t);if(f.isProviderLiteral(t)){var n=f.createProvider(t),s=r(n),u=s.method,p=s.name,d=s.value;return void(a(p,e,"$provide",u)||e[u](p,d))}if(c.isType(t)){var h=l.provide(t),m=h[0],d=h[1],g=i(t),y=g.providerName,v=g.providerMethod,b=g.moduleMethod;return c.isType(m)?void e.config(m):void(a(m,e,y,v)||e[b](m,d))}if(!c.isArray(t))throw new Error("InvalidProviderError("+t+")");o(e,t)}),e}function a(e,t,n,r){var i=t._invokeQueue,o=i.filter(function(e){var t=e[0],i=e[1];return t===n&&i===r}).map(function(e){var t=(e[0],e[1],e[2]);return t});return o.some(function(t){var n=t[0];t[1];return e===n})}function s(e,t,n){var r=n.moduleMethod,i=n.name,o=n.value,a=u.reflector.annotations(t)[0];c.isBlank(a)||(f.isDirective(a)?(e[r](i,o),e[r]("["+i+"]",o),e[r]("("+i+")",o)):e[r](i,o))}var c=n(13),u=n(83),l=n(97),f=n(121);t.resolveReflectiveProvider=r,t._getAngular1ModuleMetadataByType=i,t._normalizeProviders=o,t._isTypeRegistered=a,t._registerTypeProvider=s},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(468)),r(n(162)),r(n(84))},function(e,t,n){"use strict";var r=n(161),i=n(162),o=n(84);t.Component=r.makeDecorator(o.ComponentMetadata),t.Directive=r.makeDecorator(o.DirectiveMetadata),t.ContentChildren=r.makePropDecorator(i.ContentChildrenMetadata),t.ContentChild=r.makePropDecorator(i.ContentChildMetadata),t.ViewChildren=r.makePropDecorator(i.ViewChildrenMetadata),t.ViewChild=r.makePropDecorator(i.ViewChildMetadata),t.Input=r.makePropDecorator(o.InputMetadata),t.Attr=r.makePropDecorator(o.AttrMetadata),t.Output=r.makePropDecorator(o.OutputMetadata),t.HostBinding=r.makePropDecorator(o.HostBindingMetadata),t.HostListener=r.makePropDecorator(o.HostListenerMetadata),t.NgModule=r.makeDecorator(o.NgModuleMetadata)},function(e,t,n){"use strict";var r=n(470);t.Pipe=r.Pipe},function(e,t,n){"use strict";var r=n(161),i=n(202);t.Pipe=r.makeDecorator(i.PipeMetadata)},function(e,t,n){"use strict";var r=n(267);t.SimpleChange=r.SimpleChange;var i=n(472);t.ChangeDetectionStrategy=i.ChangeDetectionStrategy;var o=n(266);t.ChangeDetectorRef=o.ChangeDetectorRef},function(e,t,n){"use strict";function r(e){return o.isBlank(e)||1===e}var i,o=n(13);!function(e){e[e.NeverChecked=0]="NeverChecked",e[e.CheckedBefore=1]="CheckedBefore",e[e.Errored=2]="Errored"}(i=t.ChangeDetectorState||(t.ChangeDetectorState={}));var a;!function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(a=t.ChangeDetectionStrategy||(t.ChangeDetectionStrategy={})),t.CHANGE_DETECTION_STRATEGY_VALUES=[0,1],t.CHANGE_DETECTOR_STATE_VALUES=[0,1,2],t.isDefaultChangeDetectionStrategy=r},function(e,t,n){"use strict";var r=n(265);t.Type=r.Type;var i=n(268);t.EventEmitter=i.EventEmitter},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(122),a=n(41),s=n(475),c=n(639),u=n(640),l=n(137),f=n(641),p=n(649),d=n(651),h=n(653),m=n(800),g=n(801),y=n(810),v=n(819),b=n(823),S=n(251),_=n(831),O=n(833),T=n(835),E=n(837),w=n(839),I=n(840),R=n(402),P=n(867),j=n(868),A=n(870),C=n(872),$=n(879),D=n(881),L=n(884),k=n(890),M=n(390),x=n(892),F=n(409),U=n(901),B=n(143),N=n(906),q=n(315),H=n(907),V=n(908),Y=n(909),z=n(22),G=n(28),W=n(911),Q=n(48),J=n(152),K=n(94),X=n(56),Z=n(912),ee=n(913),te=n(914),ne=n(93),re=n(193),ie=n(86),oe=n(915),ae=n(916),se=n(135),ce=n(917),ue=n(929),le=n(930),fe=n(931),pe=n(932),de=n(186),he=n(196),me=n(935),ge=n(365),ye=function(){function e(){}return e=r([i.NgModule({declarations:[P.PrimoExplore,s.PrimoExploreMain,c.LoginIframe,u.PrmSilentLogin,N.PrmSilentLoginAlertToast,H.PrmTimeoutToast,Y.PrmAlertBar,W.PrmSaveToFavoritesButton,Z.PrmRecordCollectionPaths,te.PrmCollectionNavigationBreadcrumbs,ee.PrmCollectionNavigationBreadcrumbsItem,ae.PrmSearchResultThumbnailContainer,ue.PrmBackToSearchResultsButton,le.PrimoExploreFooter,fe.PrimoIcpLicenseFooter],providers:[se.FullViewModuleLoaderService,o.PrimoExploreService,B.LoginIframeService,l.SilentLoginService,q.TimeoutToastService,z.JournalsService,G.DatabasesService,Q.FavoritesService,J.SearchHistoryService,K.SavedQueriesService,X.CollectionDiscoveryService,ne.FullViewService,ge.PrimoExploreFooterService,re.FullViewLinksService,ie.LocationService,de.CMIntegrationService,he.TranslationService,me.OrganizationsService],imports:["primo-explore.infra",V,U.BrowseSearchModule,pe.ChaptersAndReviewsModule,d.IconModule,g.InfraMetadata,v.ModelModule,m.NddModule,p.PrimolyticsModule,h.SearchModule,y.SecurityModule,S,_,O,T,E,a,I.default.name,R.default.name,w,j.SpinnerModule,C.BlankIllModule,$.PurchaseRequestModule,A.SourceRecordModule,F.bundle("primo-explore.ngForwardHack",x.NgForwardHack).name,D.CitationLinkerModule,f.TagsModule,L.DepositFormModule,k.DepositsLinkModule,M.PersonalizeResultsButtonModule,b.NewspapersModule,oe.default.name,ce.OpacModule]})],e)}();t.PrimoExploreModule=ye},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(14),u=n(4),l=n(22),f=n(156),p=n(11),d=n(2),h=n(28),m=n(30),g=n(56),y=n(16),v=n(115),b=function(){function e(e,t,n,r,i,o,a,c,u,l,f,p,d){this.$state=e,this.searchFieldsService=t,this.skipToService=n,this.searchService=r,this.journalsService=i,this.databasesService=o,this.orgListService=a,this.configurationUtil=c,this.$stateParams=u,this.alertService=l,this.$location=f,this.collectionDiscoveryService=p,this.newspapersService=d,this.vid=s.getVid(),this.borInfoAlert=l.create(m.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return e.prototype.onSearchBarSearchEvent=function(e){var t={query:e.mainSearchField,search_scope:e.scopeField,featured_scope:e.featuredScopeField,vid:this.vid,tab:e.tab,mode:e.mode,facet:e.facet,mfacet:e.mfacet,pfilter:e.pfilter,journals:e.journals,databases:e.databases,organization:e.organization,organizationPath:e.organizationPath,sortby:e.sortby,offset:0,conVoc:void 0,issn:e.issn,fromDate:e.fromDate};this.searchFieldsService.searchParams=t;var n=u.STATE_NAMES.SEARCH;return(this.journalsService.isJournalSearch()||this.journalsService.returnToJournalsSearch())&&(n=u.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(n=u.STATE_NAMES.DB_SEARCH),this.isNewspapersSearch&&(n=u.STATE_NAMES.NEWSPAPERS),this.orgListService.isOrgListSearch()&&t.organization&&(n=u.STATE_NAMES.ORGANIZATION_LIST),this.$state.go(n,t,{reload:n})},e.prototype.hasSearchResults=function(){var e=this.searchService.getResultObject().data;return Array.isArray(e)&&e.length>0},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.$state.is(u.STATE_NAMES.COLLECTION_DISCOVERY)?this.collectionDiscoveryService.searchInProgress:this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.showSearchBar=function(){return this.$state.current.name!==u.STATE_NAMES.CITATION_TRAILS&&this.$state.current.name!==u.STATE_NAMES.CITATION_LINKER&&this.$state.current.name!==u.STATE_NAMES.COLLECTION_DISCOVERY},e.prototype.allowSearch=function(){return!this.configurationUtil.isSuprima()||this.$state.current.name!==u.STATE_NAMES.SEARCH||this.configurationUtil.getSummonOverAlma()!==!0||void 0!==this.$state.params.browseScope},e.prototype.showStatName=function(){return this.$state.current.name===u.STATE_NAMES.SEARCH&&this.hasSearchResults()?"nui.aria.page.searchResults":this.$state.current.name===u.STATE_NAMES.SEARCH?"nui.aria.page.search":this.$state.current.name===u.STATE_NAMES.FAVORITES?"nui.aria.page.favorites":this.$state.current.name===u.STATE_NAMES.CITATION_TRAILS?"nui.aria.page.citation":this.$state.current.name===u.STATE_NAMES.BROWSE_SEARCH?"nui.aria.page.browsePage":this.$state.current.name===u.STATE_NAMES.DB_SEARCH?"nui.aria.page.dbSearch":this.$state.current.name===u.STATE_NAMES.DB_FULL_DISPLAY?"nui.aria.page.dbSearchFullDis ":this.$state.current.name===u.STATE_NAMES.JOURNAL_SEARCH?"nui.aria.page.journal ":this.$state.current.name===u.STATE_NAMES.JOURNAL_FULL_DISPLAY?"nui.aria.page.jurnalFullDis":void 0},Object.defineProperty(e.prototype,"isJournalsSearch",{get:function(){return this.journalsService.isJournalSearch()||this.$state.current.name===u.STATE_NAMES.FAVORITES&&this.journalsService.returnToJournalsSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDBSearch",{get:function(){return this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOrgListSearch",{get:function(){return this.orgListService.isOrgListSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.isJournalsSearch||this.isDBSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showBroseSearchBar",{get:function(){return!(!this.isBrowseMode&&"exploreMain.browseSearch"!=this.$state.current.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showChaptersAndReviews",{get:function(){return"exploreMain.chapters"==this.$state.current.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPerformanceMonitor",{get:function(){return"true"===this.$stateParams.show_performance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollectionDiscoveryFocused",{get:function(){return this.$state.current.name===u.STATE_NAMES.COLLECTION_DISCOVERY&&this.$stateParams.collectionId},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e.prototype.isCitationLinker=function(){return this.$state.current.name===u.STATE_NAMES.CITATION_LINKER},e.prototype.isCollectionDiscovery=function(){return this.$state.current.name===u.STATE_NAMES.COLLECTION_DISCOVERY},e.prototype.isCitationtrails=function(){return this.$state.current.name===u.STATE_NAMES.CITATION_TRAILS},e.prototype.isFavorites=function(){return this.$state.current.name===u.STATE_NAMES.FAVORITES},Object.defineProperty(e.prototype,"isNewspapersSearch",{get:function(){return this.newspapersService.isNewspapersSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameFromSearch",{get:function(){return this.newspapersService.cameFromSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameFromFeaturedSearch",{get:function(){return this.newspapersService.cameFromFeaturedSearch},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-explore-main",templateUrl:"components/primoExplore/primo-explore-main.html"}),o(0,a.Inject("$state")),o(8,a.Inject("$stateParams")),o(10,a.Inject("$location")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&t||Object,"function"==typeof(n="undefined"!=typeof f.SkipToService&&f.SkipToService)&&n||Object,"function"==typeof(b="undefined"!=typeof p.SearchService&&p.SearchService)&&b||Object,"function"==typeof(S="undefined"!=typeof l.JournalsService&&l.JournalsService)&&S||Object,"function"==typeof(_="undefined"!=typeof h.DatabasesService&&h.DatabasesService)&&_||Object,"function"==typeof(O="undefined"!=typeof v.OrgListCategorizeService&&v.OrgListCategorizeService)&&O||Object,"function"==typeof(T="undefined"!=typeof d.ConfigurationUtil&&d.ConfigurationUtil)&&T||Object,Object,"function"==typeof(E="undefined"!=typeof m.AlertFactory&&m.AlertFactory)&&E||Object,Object,"function"==typeof(w="undefined"!=typeof g.CollectionDiscoveryService&&g.CollectionDiscoveryService)&&w||Object,"function"==typeof(I="undefined"!=typeof y.NewspapersService&&y.NewspapersService)&&I||Object])],e);var t,n,b,S,_,O,T,E,w,I}();t.PrimoExploreMain=b},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(477),o=n(166),a=n(209);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(478),o=n(485),a=n(486),s=n(487),c=n(488);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(165);e.exports=r},function(e,t,n){function r(e){if(!a(e)||o(e))return!1;var t=i(e)?h:u;return t.test(s(e))}var i=n(208),o=n(482),a=n(31),s=n(278),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,p=l.toString,d=f.hasOwnProperty,h=RegExp("^"+p.call(d).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[c]=n:delete e[c]),i}var i=n(100),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,c=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e){return!!o&&o in e}var i=n(483),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(52),i=r["__core-js_shared__"];e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var i=n(165),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}var i=n(165),o=Object.prototype,a=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?o:t,this}var i=n(165),o="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():a.call(t,n,1),--this.size,!0}var i=n(167),o=Array.prototype,a=o.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(167);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(167);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(167);e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(168);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(168);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(168);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(168);e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t){function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){var r=n(280),i=n(504),o=n(212),a=1/0,s=r&&1/o(new r([,-0]))[1]==a?function(e){return new r(e)}:i;e.exports=s},function(e,t){function n(){}e.exports=n},function(e,t){function n(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}e.exports=n},function(e,t,n){function r(e,t,n,r){return i(e,function(e,i,o){t(r,e,n(e),o)}),r}var i=n(126);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(n(o[c],c,o)===!1)break}return t}}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(72),o=n(53),a="[object Arguments]";e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){return a(e)&&o(e.length)&&!!C[i(e)]}var i=n(72),o=n(214),a=n(53),s="[object Arguments]",c="[object Array]",u="[object Boolean]",l="[object Date]",f="[object Error]",p="[object Function]",d="[object Map]",h="[object Number]",m="[object Object]",g="[object RegExp]",y="[object Set]",v="[object String]",b="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",O="[object Float32Array]",T="[object Float64Array]",E="[object Int8Array]",w="[object Int16Array]",I="[object Int32Array]",R="[object Uint8Array]",P="[object Uint8ClampedArray]",j="[object Uint16Array]",A="[object Uint32Array]",C={};C[O]=C[T]=C[E]=C[w]=C[I]=C[R]=C[P]=C[j]=C[A]=!0,C[s]=C[c]=C[S]=C[u]=C[_]=C[l]=C[f]=C[p]=C[d]=C[h]=C[m]=C[g]=C[y]=C[v]=C[b]=!1,e.exports=r},function(e,t,n){var r=n(286),i=r(Object.keys,Object);e.exports=i},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&r(s[a],a,s)!==!1;);return n}}var i=n(58);e.exports=r},function(e,t,n){function r(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=n(287),o=n(295),a=n(297);e.exports=r},function(e,t,n){function r(){this.__data__=new i,this.size=0}var i=n(166);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var i=n(166),o=n(209),a=n(207),s=200;e.exports=r},function(e,t,n){function r(e,t,n,r,g,v){var b=u(e),S=u(t),_=b?h:c(e),O=S?h:c(t);_=_==d?m:_,O=O==d?m:O;var T=_==m,E=O==m,w=_==O;if(w&&l(e)){if(!l(t))return!1;b=!0,T=!1}if(w&&!T)return v||(v=new i),b||f(e)?o(e,t,n,r,g,v):a(e,t,_,n,r,g,v);if(!(n&p)){var I=T&&y.call(e,"__wrapped__"),R=E&&y.call(t,"__wrapped__");if(I||R){var P=I?e.value():e,j=R?t.value():t;return v||(v=new i),g(P,j,n,r,v)}}return!!w&&(v||(v=new i),s(e,t,n,r,g,v))}var i=n(173),o=n(288),a=n(521),s=n(523),c=n(131),u=n(15),l=n(128),f=n(171),p=1,d="[object Arguments]",h="[object Array]",m="[object Object]",g=Object.prototype,y=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,i,T,w){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!T(new o(e),new o(t)));case p:case d:case g:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case m:var I=c;case v:var R=r&l;if(I||(I=u),e.size!=t.size&&!R)return!1;var P=w.get(e);if(P)return P==t;r|=f,w.set(e,t);var j=s(I(e),I(t),r,i,T,w);return w.delete(e),j;case S:if(E)return E.call(e)==E.call(t)}return!1}var i=n(100),o=n(290),a=n(123),s=n(288),c=n(522),u=n(212),l=1,f=2,p="[object Boolean]",d="[object Date]",h="[object Error]",m="[object Map]",g="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",O="[object DataView]",T=i?i.prototype:void 0,E=T?T.valueOf:void 0;e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){function r(e,t,n,r,a,c){var u=n&o,l=i(e),f=l.length,p=i(t),d=p.length;if(f!=d&&!u)return!1;for(var h=f;h--;){var m=l[h];if(!(u?m in t:s.call(t,m)))return!1}var g=c.get(e);if(g&&c.get(t))return g==t;var y=!0;c.set(e,t),c.set(t,e);for(var v=u;++h<f;){m=l[h];var b=e[m],S=t[m];if(r)var _=u?r(S,b,m,t,e,c):r(b,S,m,e,t,c);if(!(void 0===_?b===S||a(b,S,n,r,c):_)){y=!1;break}v||(v="constructor"==m)}if(y&&!v){var O=e.constructor,T=t.constructor;O!=T&&"constructor"in e&&"constructor"in t&&!("function"==typeof O&&O instanceof O&&"function"==typeof T&&T instanceof T)&&(y=!1)}return c.delete(e),c.delete(t),y}var i=n(291),o=1,a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(85),i=n(52),o=r(i,"DataView");e.exports=o},function(e,t,n){var r=n(85),i=n(52),o=r(i,"Promise");e.exports=o},function(e,t,n){var r=n(85),i=n(52),o=r(i,"WeakMap");e.exports=o},function(e,t,n){function r(e,t){return s(e)&&c(t)?u(l(e),t):function(n){var r=o(n,e);return void 0===r&&r===t?a(n,e):i(t,r,f|p)}}var i=n(215),o=n(3),a=n(530),s=n(217),c=n(296),u=n(297),l=n(103),f=1,p=2;e.exports=r},function(e,t,n){var r=n(529),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}var i=n(132),o=500;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&o(e,t,i)}var i=n(531),o=n(298);e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e){return a(e)?i(s(e)):o(e)}var i=n(299),o=n(533),a=n(217),s=n(103);e.exports=r},function(e,t,n){function r(e){return function(t){return i(t,e)}}var i=n(174);e.exports=r},function(e,t,n){function r(e,t){return e&&i(t,o(t),e)}var i=n(75),o=n(57);e.exports=r},function(e,t,n){function r(e,t){return e&&i(t,o(t),e)}var i=n(75),o=n(134);
e.exports=r},function(e,t,n){function r(e){if(!i(e))return a(e);var t=o(e),n=[];for(var r in e)("constructor"!=r||!t&&c.call(e,r))&&n.push(r);return n}var i=n(31),o=n(130),a=n(537),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){function r(e,t){return i(e,o(e),t)}var i=n(75),o=n(216);e.exports=r},function(e,t,n){function r(e,t){return i(e,o(e),t)}var i=n(75),o=n(302);e.exports=r},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case y:return i(e);case u:case l:return new r((+e));case v:return o(e,n);case b:case S:case _:case O:case T:case E:case w:case I:case R:return c(e,n);case f:return new r;case p:case m:return new r(e);case d:return a(e);case h:return new r;case g:return s(e)}}var i=n(221),o=n(542),a=n(543),s=n(544),c=n(303),u="[object Boolean]",l="[object Date]",f="[object Map]",p="[object Number]",d="[object RegExp]",h="[object Set]",m="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",S="[object Float64Array]",_="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",E="[object Uint8Array]",w="[object Uint8ClampedArray]",I="[object Uint16Array]",R="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i=n(221);e.exports=r},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e){return a?Object(a.call(e)):{}}var i=n(100),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;e.exports=r},function(e,t,n){var r=n(31),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(547),i=n(73),o=n(172),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(131),o=n(53),a="[object Map]";e.exports=r},function(e,t,n){var r=n(549),i=n(73),o=n(172),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(131),o=n(53),a="[object Set]";e.exports=r},function(e,t,n){"use strict";function r(e,t){function n(e){var t=a(e),n=window.appConfig["scopes-context-map"],r=n?n[e]:"L",i="";if("true"===l&&("B"===r||"L"===r)){for(var o=/scope:\((.*?)\)/g,s=o.exec(t);null!=s;)i+=c+s[1].replace(/"/g,"").replace(/\s+/g,"#")+" OR ",s=o.exec(t);i.length>4&&(i=i.slice(0,-4))}0==i.length&&(i=c),"B"===r&&(r="L OR C");var u={facet:"off",fq:"scope:("+i+")+AND+context:("+r+")",rows:"6",wt:"json"};return u}function r(){try{return t.findByProperties(t.tables.AUTO_COMPLETE_CONFIG,{target:s})[0].source1}catch(e){return""}}function i(e){return window.appConfig["primo-view"]["auto-complete-enabled-map"][e]||!1}function o(){try{return t.findByProperties(t.tables.AUTO_COMPLETE_CONFIG,{target:s})[0].source3||!1}catch(e){return!1}}function a(e){var t=window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e});return t&&t.length>0?t[0].locations:""}var s=f.getInstitutionCode(),c=r(),u=f.getAutocompleteUrl(),l=o();return{isEnabled:i,url:u,getDefaultParams:n}}function i(){var e={icon:"lib/material-design-icons/action/svg/production/ic_info_outline_24px.svg",label:"Details",tabContent:"details-pane"},t={icon:"lib/material-design-icons/action/svg/production/ic_explore_24px.svg",label:"Locations",tabContent:"locations-pane"},n=[e,t];return n}function o(){var e=[{link:"custom/img/HVD/harvard1.jpg",type:"default"},{link:"custom/img/HVD/harvard2.jpg",type:"default"},{link:"custom/img/HVD/harvard3.jpg",type:"default"},{link:"custom/img/HVD/harvard4.jpg",type:"default"},{link:"custom/img/HVD/harvard5.jpg",type:"default"},{link:"custom/img/HVD/harvard6.jpg",type:"default"},{link:"custom/img/HVD/harvard7.jpg",type:"default"},{link:"custom/img/HVD/harvard8.jpg",type:"default"},{link:"custom/img/HVD/harvard9.jpg",type:"default"}];return e}function a(){function e(e){var t="default_tab",n=window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e});return n&&n.length>0?n[0]["tab-id-for-scope-matching"]||t:t}return{getTab:e}}function s(){return"suprima"===f.getBackendSystem()?"primaws/suprimaLogout":"primo_library/libweb/primoExploreLogin"}Object.defineProperty(t,"__esModule",{value:!0}),window.appConfig=window.appConfig||{};var c=n(5),u=n(0),l=n(9),f=n(1),e=c.module("appConfig");e.constant("limit","14").constant("loginEndpoint",s()).constant("imagesBarLimit","25").constant("itemTabs",i).constant("imagesBarFillers",o).constant("primoDateFormat","yyyy-MM-dd").constant("displayDateFormat","MM/dd/yyyy").constant("accountListBulkSize","10");var p="/primaws/rest",d={resourceRecommenderUrl:p+"/pub/resourceRecommender",deliveryBaseURL:p+"/priv/delivery/representationInfo",officeFileURL:p+"/priv/delivery/officeFile",updateStatistics:p+"/priv/delivery/updateStatistics",referenceEntryUrl:p+"/priv/externalServices/referenceEntry",myAccountBaseURL:p+"/priv/myaccount",userSettingsBaseURL:p+"/priv/usersettings",favoritesBaseURL:p+"/priv/favorites",bestOfferURL:p+"/pub/ngrs/bestoffer/physical",ngrsCreateBorrowingRequestURL:p+"/pub/ngrs/bestoffer/borrowingrequest",primaPickupLocationBaseUrl:p+"/pub/ngrs/bestoffer/pickupLocation",moreOptionBaseUrl:p+"/pub/ngrs/bestoffer/moreResult",primaEmailUrl:p+"/pub/ngrs/bestoffer/email",gtiURL:p+"/pub/ngrs/gti",requestStatusMapURL:p+"/pub/ngrs/requestStatusMap",ngrsResourceSharingServiceEnabledURL:p+"/pub/ngrs/ngrsResourceSharingServiceEnabled",datesMapURL:p+"/pub/ngrs/datesMap",tagsBaseURL:p+"/priv/tags",tagsSearchBaseURL:p+"/priv/tags/searchTags?tagTerm=",pnxBaseURL:p+"/pub/pnxs",deliveryURL:p+"/pub/delivery",getFacetsBaseURL:p+"/pub/facets",pushToBaseURL:p+"/pub/pushto",actionsBaseURL:p+"/pub/actions",opacBaseUrl:p+"/priv/ILSServices/titleServices",openUrl:p+"/pub/openurl",ILSServicesBaseURL:p+"/priv/ILSServices",prepareElectorincRTA:p+"/pub/edelivery",calculatePhysicalServiceId:p+"/pub/getPhysicalService",translationsUrl:p+"/pub/translations",bxUrl:p+"/pub/bx/recId",thumbUrl:p+"/v1/syndetics-thumb",browse:p+"/pub/browse",saveSearchURL:p+"/priv/savedSearches",snippetURL:p+"/pub/snippets",savedQueries:p+"/v1/savedSearches",citationTrails:p+"/pub/citation-trails",citationTrailsSeedsInfo:p+"/pub/citation-trails/seeds-info",timesCited:p+"/pub/timesCited",sourceRecord:p+"/pub/sourceRecord",scopeListBaseURL:p+"/v1/configuration",calculatePcDelivery:p+"/pub/pcDelivery",journalsAutocomplete:p+"/pub/journals/autocomplete",loginJwtCache:p+"/pub/loginJwtCache",rss:p+"/priv/savedSearches/addRss",memberPnx:p+"/priv/nz/pnx",showPnxInXmlUrl:p+"/pub/pnxs/xml",dbCategoriesBaseURL:p+"/pub/restDlf/categories",directLink:p+"/pub/directLink",relateditems:p+"/v1/relatedItems",orgListEsploroUrl:p+"/pub/restDlf/orgList"},h="/primo_library/libweb/webservices/rest",m={resourceRecommenderUrl:h+"/v1/resourceRecommender",deliveryBaseURL:h+"/v1/delivery/representationInfo",updateStatistics:h+"/priv/delivery/updateStatistics",officeFileURL:h+"/priv/delivery/officeFile",referenceEntryUrl:h+"/v1/externalServices/referenceEntry",myAccountBaseURL:h+"/v1/myaccount",dbCategoriesBaseURL:h+"/v1/categories",userSettingsBaseURL:h+"/v1/usersettings",favoritesBaseURL:h+"/v1/favorites",tagsBaseURL:h+"/v1/tags",tagsSearchBaseURL:h+"/v1/tags/searchTags?tagTerm=",pnxBaseURL:h+"/primo-explore/v1/pnxs",pushToBaseURL:h+"/v1/pushto",actionsBaseURL:h+"/v1/actions",opacBaseUrl:h+"/v1/ILSServices/services",openUrl:h+"/v1/openurl",ILSServicesBaseURL:h+"/v1/ILSServices",translationsUrl:h+"/v1/translations",bxUrl:h+"/v1/bx/recId",thumbUrl:h+"/v1/syndetics-thumb",browse:h+"/v1/browse",saveSearchURL:h+"/v1/savedSearches",snippetURL:h+"/v1/snippet",savedQueries:h+"/v1/savedSearches",citationTrails:h+"/v1/citation-trails",citationTrailsSeedsInfo:h+"/v1/citation-trails/seeds-info",timesCited:h+"/timesCited",sourceRecord:h+"/v1/sourceRecord",scopeListBaseURL:h+"/v1/configuration",journalsAutocomplete:h+"/pub/journals/autocomplete",loginJwtCache:h+"/v1/loginJwtCache",showPnxInXmlUrl:h+"/primo-explore/v1/pnxs/xml",rss:"/primo_library/libweb/action/../newRss",relateditems:h+"/v1/relatedItems"};e.constant("restBaseURLs","suprima"===f.getBackendSystem()?d:m),e.factory("autoCompleteConfig",r).factory("configurationService",a),r.$inject=["$stateParams",u.getInjectableName(l.MappingTablesCache)]},function(e,t,n){"use strict";function r(){return i()[0]}function i(){return[{type:"svg",id:"mdIcons",displayName:"Material Icons (Default)",link:"https://www.google.com/design/icons/",sets:[{set:"alert",file:"img/svg/svg-sprite-alert.svg",size:48},{set:"image",file:"img/svg/svg-sprite-image.svg",size:48},{set:"action",file:"img/svg/svg-sprite-action.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"communication",file:"img/svg/svg-sprite-communication.svg",size:48},{set:"editor",file:"img/svg/svg-sprite-editor.svg",size:48},{set:"navigation",file:"img/svg/svg-sprite-navigation.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"av",file:"img/svg/svg-sprite-av.svg",size:48},{set:"file",file:"img/svg/svg-sprite-file.svg",size:48},{set:"hardware",file:"img/svg/svg-sprite-hardware.svg",size:48},{set:"maps",file:"img/svg/svg-sprite-maps.svg",size:48},{set:"notifications",file:"img/svg/svg-sprite-notification.svg",size:48},{set:"primo-ui",file:"img/svg/svg-primo-ui.svg",size:48},{set:"primo-actions",file:"img/svg/svg-primo-actions.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"social",file:"img/svg/svg-sprite-social.svg",size:48}]},{type:"svg",id:"iconics",displayName:"Iconic Open",link:"https://useiconic.com/open",sets:[{set:"iconic",file:"path/to/iconic/svg.file",size:16}]},{type:"font",id:"fontawesome",displayName:"FontAwesome",link:"http://fortawesome.github.io/Font-Awesome/icons/",sets:[{set:"fa",file:"fontawesome",size:""}]}]}function o(){var e={mdIcons:{backToTop:{type:"svg",iconSet:"navigation",icon:"ic_arrow_upward_24px"}}};return e[r().id]}function a(){var e={mdIcons:{arrowRight:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},externalLink:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"},onlineMaterial:{type:"svg",iconSet:"primo-ui",icon:"link"},physicalMaterial:{type:"svg",iconSet:"primo-ui",icon:"book-open"},helpCircle:{type:"svg",iconSet:"primo-ui",icon:"help-circle-outline"}},fontawesome:{},iconics:{}};return e[r().id]}function s(){var e={mdIcons:{frbrMultipleIcon:{type:"svg",iconSet:"primo-ui",icon:"multiple-items"},frbrMultipleLinkArrow:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},externaLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"}},fontawesome:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}},iconics:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}}};return e[r().id]}function c(){var e={mdIcons:{peerreviewed:{type:"svg",iconSet:"primo-ui",icon:"peer-reviewed"},openaccess:{type:"svg",iconSet:"primo-ui",icon:"open-access"},course:{type:"svg",iconSet:"primo-ui",icon:"mdi-teach"}},fontawesome:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}},iconics:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}}};return e[r().id]}function u(){var e={mdIcons:{expandIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-down"},goToStartIcon:{type:"svg",iconSet:"primo-ui",icon:"double-chevron-up"},expandAllIcon:{type:"svg",iconSet:"primo-ui",icon:"expand-list"},collapseAllIcon:{type:"svg",iconSet:"primo-ui",icon:"collapse-list"},externalLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"},editIcon:{type:"svg",iconSet:"primo-ui",icon:"pencil"},discardChangesIcon:{type:"svg",iconSet:"primo-ui",icon:"trash"},saveChangesIcon:{type:"svg",iconSet:"primo-ui",icon:"save"},renewLoanIcon:{type:"svg",iconSet:"primo-ui",icon:"restore"},notRenewableIcon:{type:"svg",iconSet:"primo-ui",icon:"lock"},removeIcon:{type:"svg",iconSet:"primo-ui",icon:"close"},timerIcon:{type:"svg",iconSet:"primo-ui",icon:"timer"},fineAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"error"},requestsAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"bell"},messagesAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"flag"},arrowRightIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},backToSearch:{type:"svg",iconSet:"primo-ui",icon:"back-to-search"},emoticonCool:{type:"svg",iconSet:"primo-ui",icon:"emoticon-cool"},beach:{type:"svg",iconSet:"primo-ui",icon:"beach"},sun:{type:"svg",iconSet:"primo-ui",icon:"sun"},beer:{type:"svg",iconSet:"primo-ui",icon:"beer"}},fontawesome:{firstPromoted:{type:"fa",icon:"fa-quote-left"},secondPromoted:{type:"fa",icon:"fa-envelope-o"},thirdPromoted:{type:"fa",icon:"fa-star"},moreActions:{type:"fa",icon:"fa-ellipsis-h"}},iconics:{firstPromoted:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},secondPromoted:{type:"svg",iconSet:"iconic",icon:"envelope-open"},thirdPromoted:{type:"svg",iconSet:"iconic",icon:"bookmark"},moreActions:{type:"svg",iconSet:"iconic",icon:"ellipses"}}};return e[r().id]}function l(){var e={mdIcons:{peerreviewed:{type:"svg",iconSet:"primo-ui",icon:"peer-reviewed"},openaccess:{type:"svg",iconSet:"primo-ui",icon:"open-access"},course:{type:"svg",iconSet:"primo-ui",icon:"mdi-teach"},firstPromoted:{type:"svg",iconSet:"primo-actions",icon:"citation"},secondPromoted:{type:"svg",iconSet:"primo-actions",icon:"email"},thirdPromoted:{type:"svg",iconSet:"action",icon:"ic_bookmark_outline_24px"},pin:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},unPin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},citationTrailsIn:{type:"svg",iconSet:"primo-ui",icon:"citedBy"},citationTrailsThis:{type:"svg",iconSet:"primo-ui",icon:"citing"},citationTrailsListLeftBtn:{type:"svg",iconSet:"primo-ui",icon:"LeftArrow"},citationTrailsListRightBtn:{type:"svg",iconSet:"primo-ui",icon:"RightArrow"},moreActions:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},closeActions:{type:"svg",iconSet:"primo-ui",icon:"close"},email:{type:"svg",iconSet:"primo-actions",icon:"email"},citations:{type:"svg",iconSet:"primo-actions",icon:"citation"},chapters:{type:"svg",iconSet:"primo-ui",icon:"chapters"},reviews:{type:"svg",iconSet:"primo-ui",icon:"reviews"},fileTree:{type:"svg",iconSet:"primo-ui",icon:"fileTree"},voiceSearch:{type:"svg",iconSet:"primo-ui",icon:"voiceSearch"},facetsFilter:{type:"svg",iconSet:"primo-ui",icon:"facetsFilter"},personalizeResults:{type:"svg",iconSet:"primo-ui",icon:"personalizeResults"},multipleSelection:{type:"svg",iconSet:"primo-ui",icon:"multipleSelection"},permalink:{type:"svg",iconSet:"primo-actions",icon:"permalink"},print:{type:"svg",iconSet:"primo-actions",icon:"print"},delicious:{type:"svg",iconSet:"primo-actions",icon:"delicious"},endnote:{type:"svg",iconSet:"primo-actions",icon:"endnote"},mendeley:{type:"svg",iconSet:"primo-actions",icon:"mendeley"},easybib:{type:"svg",iconSet:"primo-actions",icon:"easybib"},refworks:{type:"svg",iconSet:"primo-actions",icon:"refworks"},ris:{type:"svg",iconSet:"primo-actions",icon:"ris"},bibtex:{type:"svg",iconSet:"primo-actions",icon:"ris"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"}},fontawesome:{firstPromoted:{type:"fa",icon:"fa-quote-left"},secondPromoted:{type:"fa",icon:"fa-envelope-o"},thirdPromoted:{type:"fa",icon:"fa-star"},moreActions:{type:"fa",icon:"fa-ellipsis-h"}},iconics:{firstPromoted:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},secondPromoted:{type:"svg",iconSet:"iconic",icon:"envelope-open"},thirdPromoted:{type:"svg",iconSet:"iconic",icon:"bookmark"},moreActions:{type:"svg",iconSet:"iconic",icon:"ellipses"}}};return e[r().id]}function f(){var e={mdIcons:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"],fontawesome:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"],iconics:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"]};return e[r().id]}function p(){var e={mdIcons:{email:{type:"svg",iconSet:"primo-actions",icon:"email"},citations:{type:"svg",iconSet:"primo-actions",icon:"citation"},permalink:{type:"svg",iconSet:"primo-actions",icon:"permalink"},print:{type:"svg",iconSet:"primo-actions",icon:"print"},info:{type:"svg",iconSet:"primo-actions",icon:"info"},delicious:{type:"svg",iconSet:"primo-actions",icon:"delicious"},endnote:{type:"svg",iconSet:"primo-actions",icon:"endnote"},mendeley:{type:"svg",iconSet:"primo-actions",icon:"mendeley"},easybib:{type:"svg",iconSet:"primo-actions",icon:"easybib"},refworks:{type:"svg",iconSet:"primo-actions",icon:"refworks"},ris:{type:"svg",iconSet:"primo-actions",icon:"ris"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"},delicious:{type:"fa",icon:"fa-delicious"},endnote:{type:"fa",icon:"fa-file-o"},easybib:{type:"fa",icon:"fa-book"},refworks:{type:"fa",icon:"fa-file-text-o"},ris:{type:"fa",icon:"fa-share-square-o"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"},delicious:{type:"svg",iconSet:"iconic",icon:"box"},endnote:{type:"svg",iconSet:"iconic",icon:"briefcase"},easybib:{type:"svg",iconSet:"iconic",icon:"book"},refworks:{type:"svg",iconSet:"iconic",icon:"comment-square"},ris:{type:"svg",iconSet:"iconic",icon:"external-link"}}};return e[r().id]}function d(){var e={mdIcons:{user:{type:"svg",iconSet:"action",icon:"ic_supervisor_account_24px"},avatar:{type:"svg",iconSet:"action",icon:"ic_face_24px"},language:{type:"svg",iconSet:"action",icon:"ic_language_24px"},settings:{type:"svg",iconSet:"maps",icon:"ic_local_library_24px"},signin:{type:"svg",iconSet:"primo-ui",icon:"sign-in"},signout:{type:"svg",iconSet:"primo-ui",icon:"sign-out"},searchMode:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},eshelfMode:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},library:{type:"svg",iconSet:"primo-ui",icon:"account-card-details"},hamburger:{type:"svg",iconSet:"primo-ui",icon:"hamburger"},more:{type:"svg",iconSet:"primo-ui",icon:"dots-horizontal"}},fontawesome:{user:{type:"svg",iconSet:"action",icon:"ic_supervisor_account_24px"},language:{type:"svg",iconSet:"action",icon:"ic_language_24px"},settings:{type:"svg",iconSet:"maps",icon:"ic_local_library_24px"},signout:{type:"svg",iconSet:"primo-ui",icon:"prm-power"},searchMode:{type:"svg",iconSet:"action",icon:"ic_search_24px"},eshelfMode:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[r().id]}function h(){var e={mdIcons:{rightArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_right_24px"},leftArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_left_24px"},listView:{type:"svg",iconSet:"action",icon:"ic_view_list_24px"},gridView:{type:"svg",iconSet:"action",icon:"ic_view_quilt_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[r().id]}function m(){var e={mdIcons:{alert:{type:"svg",iconSet:"primo-ui",icon:"bell-outline"},notAlert:{type:"svg",iconSet:"primo-ui",icon:"mdi-bell-off"},rss:{type:"svg",iconSet:"primo-ui",icon:"rss"},unpin:{type:"svg",iconSet:"primo-ui",icon:"pin-off"}}};return e[r().id]}function g(){var e={mdIcons:{gridViewIcon:{type:"svg",iconSet:"action",icon:"ic_view_module_24px"},GalleryViewIcon:{type:"svg",iconSet:"action",icon:"ic_dashboard_24px"},HeaderHomeIcon:{type:"svg",iconSet:"action",icon:"ic_home_24px"}}};return e[r().id]}function y(){var e={mdIcons:{remove:{type:"svg",iconSet:"action",icon:"ic_delete_24px"},alert:{type:"svg",iconSet:"primo-ui",icon:"bell-outline"},notAlert:{type:"svg",iconSet:"primo-ui",icon:"mdi-bell-off"},rss:{type:"svg",iconSet:"primo-ui",icon:"rss"},pin:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},unpin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},searchHistoryIcon:{type:"svg",iconSet:"primo-ui",icon:"restore"}}};return e[r().id]}function v(){var e={mdIcons:{searchTextBox:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},searchHistoryIcon:{type:"svg",iconSet:"primo-ui",icon:"tag-outline"},toggleListIcon:{type:"svg",iconSet:"primo-ui",icon:"toggle-list"},toggleItemsIcon:{type:"svg",iconSet:"primo-ui",icon:"toggle-items"},editIcon:{type:"svg",iconSet:"primo-ui",icon:"pencil"},remove:{type:"svg",iconSet:"primo-ui",icon:"remove"},persistent:{type:"svg",iconSet:"primo-ui",icon:"persistent"},removePersistent:{type:"svg",iconSet:"primo-ui",icon:"remove-persistent"}}};return e[r().id]}function b(){var e={mdIcons:{rightArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_right_24px"},leftArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_left_24px"},expandIcon:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_down_24px"},expandAllIcon:{type:"svg",iconSet:"primo-ui",icon:"expand-list"},collapseAllIcon:{type:"svg",iconSet:"primo-ui",icon:"collapse-list"},filter:{type:"svg",iconSet:"primo-ui",icon:"filter"},filterOut:{type:"svg",iconSet:"primo-ui",icon:"filterOut"},close:{type:"svg",iconSet:"primo-ui",icon:"close"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"},locate:{type:"svg",iconSet:"maps",icon:"ic_place_24px"},relatedArrow:{type:"svg",iconSet:"primo-ui",icon:"keyboard-return"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[r().id]}function S(){var e={mdIcons:{addLabelTop:{type:"svg",iconSet:"notifications",icon:"ic_more_24px"},addLabelRecord:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},removeLabel:{type:"svg",iconSet:"navigation",icon:"ic_close_24px"},addLabel:{type:"svg",iconSet:"content",icon:"ic_add_24px"},favoriteActionsList:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},pin:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},unPin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},labelChecked:{type:"svg",iconSet:"navigation",icon:"ic_check_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[r().id]}function _(){var e={mdIcons:{searchTextBox:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},filter:{type:"svg",iconSet:"primo-ui",icon:"filter"},filterClose:{type:"svg",iconSet:"primo-ui",icon:"filterOut"}},fontawesome:{searchTextBox:{type:"fa",icon:"fa-search"},filter:{type:"fa",icon:"fa-search"},filterClose:{type:"fa",icon:"fa-search"}},iconics:{searchTextBox:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"},filter:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"},filterClose:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"}}};return e[r().id]}function O(){var e={mdIcons:{externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"},backIcon:{type:"svg",iconSet:"navigation",icon:"ic_chevron_left_24px"},errorIcon:{type:"svg",iconSet:"alert",icon:"ic_error_24px"},gotoLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"}}};return e[r().id]}function T(){var e={mdIcons:{authNote:{type:"svg",iconSet:"primo-ui",icon:"auth_note"},publicNote:{type:"svg",iconSet:"primo-ui",icon:"public_note"},lock:{type:"svg",iconSet:"primo-ui",icon:"lock_icon"}}};return e[r().id]}function E(){var e={mdIcons:{crossRef:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_backspace_24px"}}};return e[r().id]}function w(){var e={mdIcons:{excludeFacet:{type:"svg",iconSet:"primo-ui",icon:"exclude-facet"},includeFacet:{type:"svg",iconSet:"primo-ui",icon:"include-facet"}}};return e[r().id]}function I(){var e={mdIcons:{signInToViewPermalimk:{type:"svg",iconSet:"primo-ui",icon:"sign-in-permalink"}}};return e[r().id]}function R(){var e={mdIcons:{errorNoResults:{type:"svg",iconSet:"primo-ui",icon:"error-no-results"},errorAttention:{type:"svg",iconSet:"primo-ui",icon:"error-attention"}}};return e[r().id]}var P=n(5),j=P.module("appConfig");j.constant("featuredActionsIcons",l()).constant("scopesIcons",f()).constant("actionIcons",p()).constant("searchBoxIcons",_()).constant("iconSets",i()).constant("selectedIconSet",r()).constant("topBarIcons",d()).constant("collectionIcons",h()).constant("opacLocations",b()).constant("favoritesIcons",S()).constant("accountIcons",u()).constant("searchResultsIcons",s()).constant("availabilityLineIcons",a()).constant("loginIcons",O()).constant("backToTopIcon",o()).constant("savedSearches",m()).constant("searchHistory",y()).constant("viewItIcons",T()).constant("tagsIcons",v()).constant("browseIcons",E()).constant("journalLineIcons",c()).constant("facetsIcons",w()).constant("signInIcon",I()).constant("collectionDiscoveryIcons",g()).constant("errorMessageIcons",R())},function(e,t,n){function r(e,t,n){return null==e?e:i(e,t,n)}var i=n(306);e.exports=r},function(e,t,n){function r(e){return function(t,n,r){var s=Object(t);if(!o(t)){var c=i(n,3);t=a(t),n=function(e){return c(s[e],e,s)}}var u=e(t,n,r);return u>-1?s[c?t[u]:u]:void 0}}var i=n(36),o=n(58),a=n(57);e.exports=r},function(e,t){function n(e,t){return null!=e&&i.call(e,t)}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e){return a(e)||o(e)||!!(s&&e&&e[s])}var i=n(100),o=n(127),a=n(15),s=i?i.isConcatSpreadable:void 0;e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:i}var i=n(74);e.exports=r},function(e,t,n){function r(e){return e&&e.length?i(e,a,o):void 0}var i=n(311),o=n(558),a=n(74);e.exports=r},function(e,t){function n(e,t){return e>t}e.exports=n},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(561),i=n(281),o=n(74),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.dismissed=t,this._htmlMsg=null,this._alwaysOn=!1}return e.prototype.show=function(e,t){void 0===t&&(t=!1),this._htmlMsg=e,this._alwaysOn=t},e.prototype.hide=function(){this._htmlMsg=null},e.prototype.getMsgHtml=function(){return this._htmlMsg},e.prototype.getType=function(){return this.type},e.prototype.isDissmissed=function(){return this.dismissed[this.type]},e.prototype.getAlwaysOn=function(){return this._alwaysOn},e}();t.GeneralAlertMsg=r},function(e,t,n){!function(){var t=n(565),r=n(314).utf8,i=n(566),o=n(314).bin,a=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=t.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[c>>>5]|=128<<c%32,s[(c+64>>>9<<4)+14]=c;for(var h=a._ff,m=a._gg,g=a._hh,y=a._ii,d=0;d<s.length;d+=16){var v=u,b=l,S=f,_=p;u=h(u,l,f,p,s[d+0],7,-680876936),p=h(p,u,l,f,s[d+1],12,-389564586),f=h(f,p,u,l,s[d+2],17,606105819),l=h(l,f,p,u,s[d+3],22,-1044525330),u=h(u,l,f,p,s[d+4],7,-176418897),p=h(p,u,l,f,s[d+5],12,1200080426),f=h(f,p,u,l,s[d+6],17,-1473231341),l=h(l,f,p,u,s[d+7],22,-45705983),u=h(u,l,f,p,s[d+8],7,1770035416),p=h(p,u,l,f,s[d+9],12,-1958414417),f=h(f,p,u,l,s[d+10],17,-42063),l=h(l,f,p,u,s[d+11],22,-1990404162),u=h(u,l,f,p,s[d+12],7,1804603682),p=h(p,u,l,f,s[d+13],12,-40341101),f=h(f,p,u,l,s[d+14],17,-1502002290),l=h(l,f,p,u,s[d+15],22,1236535329),u=m(u,l,f,p,s[d+1],5,-165796510),p=m(p,u,l,f,s[d+6],9,-1069501632),f=m(f,p,u,l,s[d+11],14,643717713),l=m(l,f,p,u,s[d+0],20,-373897302),u=m(u,l,f,p,s[d+5],5,-701558691),p=m(p,u,l,f,s[d+10],9,38016083),f=m(f,p,u,l,s[d+15],14,-660478335),l=m(l,f,p,u,s[d+4],20,-405537848),u=m(u,l,f,p,s[d+9],5,568446438),p=m(p,u,l,f,s[d+14],9,-1019803690),f=m(f,p,u,l,s[d+3],14,-187363961),l=m(l,f,p,u,s[d+8],20,1163531501),u=m(u,l,f,p,s[d+13],5,-1444681467),p=m(p,u,l,f,s[d+2],9,-51403784),f=m(f,p,u,l,s[d+7],14,1735328473),l=m(l,f,p,u,s[d+12],20,-1926607734),u=g(u,l,f,p,s[d+5],4,-378558),p=g(p,u,l,f,s[d+8],11,-2022574463),f=g(f,p,u,l,s[d+11],16,1839030562),l=g(l,f,p,u,s[d+14],23,-35309556),u=g(u,l,f,p,s[d+1],4,-1530992060),p=g(p,u,l,f,s[d+4],11,1272893353),f=g(f,p,u,l,s[d+7],16,-155497632),l=g(l,f,p,u,s[d+10],23,-1094730640),u=g(u,l,f,p,s[d+13],4,681279174),p=g(p,u,l,f,s[d+0],11,-358537222),f=g(f,p,u,l,s[d+3],16,-722521979),l=g(l,f,p,u,s[d+6],23,76029189),u=g(u,l,f,p,s[d+9],4,-640364487),p=g(p,u,l,f,s[d+12],11,-421815835),f=g(f,p,u,l,s[d+15],16,530742520),l=g(l,f,p,u,s[d+2],23,-995338651),u=y(u,l,f,p,s[d+0],6,-198630844),p=y(p,u,l,f,s[d+7],10,1126891415),f=y(f,p,u,l,s[d+14],15,-1416354905),l=y(l,f,p,u,s[d+5],21,-57434055),u=y(u,l,f,p,s[d+12],6,1700485571),p=y(p,u,l,f,s[d+3],10,-1894986606),f=y(f,p,u,l,s[d+10],15,-1051523),l=y(l,f,p,u,s[d+1],21,-2054922799),u=y(u,l,f,p,s[d+8],6,1873313359),p=y(p,u,l,f,s[d+15],10,-30611744),
f=y(f,p,u,l,s[d+6],15,-1560198380),l=y(l,f,p,u,s[d+13],21,1309151649),u=y(u,l,f,p,s[d+4],6,-145523070),p=y(p,u,l,f,s[d+11],10,-1120210379),f=y(f,p,u,l,s[d+2],15,718787259),l=y(l,f,p,u,s[d+9],21,-343485551),u=u+v>>>0,l=l+b>>>0,f=f+S>>>0,p=p+_>>>0}return t.endian([u,l,f,p])};a._ff=function(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,r,i,o,a){var s=e+(t^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(a(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){function r(e){return"string"==typeof e||!o(e)&&a(e)&&i(e)==s}var i=n(72),o=n(15),a=n(53),s="[object String]";e.exports=r},function(e,t,n){function r(e){return null==e?[]:i(e,o(e))}var i=n(569),o=n(57);e.exports=r},function(e,t,n){function r(e,t){return i(t,function(t){return e[t]})}var i=n(59);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2),s=n(170),c=function(){function e(e){this.configurationUtil=e}return e.prototype.transform=function(e){if(!this.configurationUtil.isSuprima())return e;var t=/(.+)–(.+)–(.+)/,n=s(e,function(e){if("location_code"===e.name){var n=t.exec(e.value);return n?n[2]+e.label:"ungrouped"}return"ungrouped"});e=[];for(var r in n)if("ungrouped"===r)e=e.concat(n[r]);else if(n[r].length>1){var i=n[r][0];i.mergedFacets=n[r].slice(1),e.push(i)}else e=e.concat(n[r]);return e},e=r([o.Injectable(),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ConfigurationUtil&&a.ConfigurationUtil)&&t||Object])],e);var t}();t.ActiveFacetsMergeLocationFacetsWithinSingleLibraryService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=n(2),l=n(170),f=function(){function e(e,t){this.$translate=e,this.configurationUtil=t}return e.prototype.transform=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,o,a,c=this;return s(this,function(s){switch(s.label){case 0:return this.configurationUtil.isSuprima()?(t=e.filter(function(e){return"location_code"===e.name}),t.length>0?(t=t[0],n=t.values,r=/(.+)–(.+)–(.+)/,[4,this.$translate.onReady()]):[3,2]):[2,e];case 1:s.sent(),i=l(n,function(e){var t=r.exec(e.value);return t?t[2]+c.$translate.instant("facets.facet.facet_location_code."+e.value):"ungrouped"}),t.values=[];for(o in i)"ungrouped"===o?t.values=t.values.concat(i[o]):i[o].length>1?(a=i[o][0],a.count=i[o].reduce(function(e,t){return e+parseInt(t.count)},0),a.mergedFacets=i[o].slice(1),t.values.push(a)):t.values=t.values.concat(i[o]);s.label=2;case 2:return[2,e]}})})},e=r([c.Injectable(),o(0,c.Inject("$translate")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&t||Object])],e);var t}();t.InactiveFacetsMergeLocationFacetsWithinSingleLibraryService=f},function(e,t,n){function r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==c){var c=a;o(a)?s.call(e,a,1):i(e,a)}}return e}var i=n(320),o=n(129),a=Array.prototype,s=a.splice;e.exports=r},function(e,t,n){function r(e,t){return t.length<2?e:i(e,o(t,0,-1))}var i=n(174),o=n(105);e.exports=r},function(e,t,n){function r(e,t){var n;return i(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}var i=n(126);e.exports=r},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t,n){function r(e,t,n){for(var r=-1,o=e.criteria,a=t.criteria,s=o.length,c=n.length;++r<s;){var u=i(o[r],a[r]);if(u){if(r>=c)return u;var l=n[r];return u*("desc"==l?-1:1)}}return e.index-t.index}var i=n(577);e.exports=r},function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e===e,a=i(e),s=void 0!==t,c=null===t,u=t===t,l=i(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}var i=n(102);e.exports=r},function(e,t,n){function r(e,t,n){return e&&e.length&&t&&t.length?i(e,t,void 0,n):e}var i=n(579);e.exports=r},function(e,t,n){function r(e,t,n,r){var u=r?a:o,f=-1,p=t.length,d=e;for(e===t&&(t=c(t)),n&&(d=i(e,s(n)));++f<p;)for(var h=0,m=t[f],g=n?n(m):m;(h=u(d,g,h,r))>-1;)d!==e&&l.call(d,h,1),l.call(e,h,1);return e}var i=n(59),o=n(124),a=n(580),s=n(73),c=n(192),u=Array.prototype,l=u.splice;e.exports=r},function(e,t){function n(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}e.exports=n},function(e,t,n){function r(e){return i(e)?void 0:e}var i=n(324);e.exports=r},function(e,t,n){function r(e){return a(o(e,void 0,i),e+"")}var i=n(24),o=n(312),a=n(313);e.exports=r},function(e,t,n){var r=n(325),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=r(i);e.exports=o},function(e,t){function n(e){if("function"!=typeof e)throw new TypeError(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var r="Expected a function";e.exports=n},function(e,t,n){function r(e,t,n){for(var r=-1,s=t.length,c={};++r<s;){var u=t[r],l=i(e,u);n(l,u)&&o(c,a(u,e),l)}return c}var i=n(174),o=n(306),a=n(101);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=n?a:o,f=e[0].length,p=e.length,d=p,h=Array(p),m=1/0,g=[];d--;){var y=e[d];d&&t&&(y=s(y,c(t))),m=l(y.length,m),h[d]=!n&&(t||f>=120&&y.length>=120)?new i(d&&y):void 0}y=e[0];var v=-1,b=h[0];e:for(;++v<f&&g.length<m;){var S=y[v],_=t?t(S):S;if(S=n||0!==S?S:0,!(b?u(b,_):r(g,_,n))){for(d=p;--d;){var O=h[d];if(!(O?u(O,_):r(e[d],_,n)))continue e}b&&b.push(_),g.push(S)}}return g}var i=n(164),o=n(210),a=n(211),s=n(59),c=n(73),u=n(169),l=Math.min;e.exports=r},function(e,t,n){function r(e){return i(e)?e:[]}var i=n(136);e.exports=r},function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=n(126);e.exports=r},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){function r(e,t,n){if(e=c(e),e&&(n||void 0===t))return e.replace(u,"");if(!e||!(t=i(t)))return e;var r=s(e),l=a(r,s(t))+1;return o(r,0,l).join("")}var i=n(133),o=n(198),a=n(591),s=n(199),c=n(61),u=/\s+$/;e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--&&i(t,e[n],0)>-1;);return n}var i=n(124);e.exports=r},function(e,t){function n(e){return e.split("")}e.exports=n},function(e,t){function n(e){return e.match(O)||[]}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,c="\\ufe0e\\ufe0f",u="["+r+"]",l="["+s+"]",f="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+f+")",d="[^"+r+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=p+"?",v="["+c+"]?",b="(?:"+g+"(?:"+[d,h,m].join("|")+")"+v+y+")*",S=v+y+b,_="(?:"+[d+l+"?",l,h,m,u].join("|")+")",O=RegExp(f+"(?="+f+")|"+_+S,"g");e.exports=n},function(e,t,n){"use strict";var r=n(35),i=n(595);r.Observable.defer=i.defer},function(e,t,n){"use strict";var r=n(596);t.defer=r.DeferObservable.create},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(35),o=n(333),a=n(334),s=function(e){function t(t){e.call(this),this.observableFactory=t}return r(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new c(e,this.observableFactory)},t}(i.Observable);t.DeferObservable=s;var c=function(e){function t(t,n){e.call(this,t),this.factory=n,this.tryDefer()}return r(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},t}(a.OuterSubscriber)},function(e,t,n){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=r},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(71);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(99),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(35),i=n(602);r.Observable.interval=i.interval},function(e,t,n){"use strict";var r=n(603);t.interval=r.IntervalObservable.create},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(604),o=n(35),a=n(605),s=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=a.async),e.call(this),this.period=t,this.scheduler=n,(!i.isNumeric(t)||t<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=a.async)}return r(t,e),t.create=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=a.async),new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.subscriber,r=e.period;n.next(t),n.closed||(e.index+=1,this.schedule(e,r))},t.prototype._subscribe=function(e){var n=0,r=this.period,i=this.scheduler;e.add(i.schedule(t.dispatch,r,{index:n,subscriber:e,period:r}))},t}(o.Observable);t.IntervalObservable=s},function(e,t,n){"use strict";function r(e){return!i.isArray(e)&&e-parseFloat(e)+1>=0}var i=n(270);t.isNumeric=r},function(e,t,n){"use strict";var r=n(335),i=n(336);t.async=new i.AsyncScheduler(r.AsyncAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(163),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=r},function(e,t,n){"use strict";var r=n(35),i=n(609);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){return i.map(e,t)(this)}var i=n(610);t.map=r},function(e,t,n){"use strict";function r(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(99);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(35),i=n(612);r.Observable.prototype.takeWhile=i.takeWhile},function(e,t,n){"use strict";function r(e){return i.takeWhile(e)(this)}var i=n(613);t.takeWhile=r},function(e,t,n){"use strict";function r(e){return function(t){return t.lift(new a(e))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(99);t.takeWhile=r;var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(615),i=n(617);t.animationFrame=new i.AnimationFrameScheduler(r.AnimationFrameAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(335),o=n(616),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=o.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.recycleAsyncId.call(this,t,n,r):void(0===t.actions.length&&(o.AnimationFrame.cancelAnimationFrame(n),t.scheduled=void 0))},t}(i.AsyncAction);t.AnimationFrameAction=a},function(e,t,n){"use strict";var r=n(71),i=function(){function e(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}return e}();t.RequestAnimationFrameDefinition=i,t.AnimationFrame=new i(r.root)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(336),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do if(t=e.execute(e.state,e.delay))break;while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(i.AsyncScheduler);t.AnimationFrameScheduler=o},function(e,t,n){n(619),e.exports="ngAnimate"},function(e,t){!function(e,t){"use strict";function n(e,t,n){if(!e)throw me("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function r(e,t){return e||t?e?t?(Q(e)&&(e=e.join(" ")),Q(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function i(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,n){var r="";return e=Q(e)?e:e&&ee(e)&&e.length?e.split(/\s+/):[],W(e,function(e,i){e&&e.length>0&&(r+=i>0?" ":"",r+=n?t+e:e+t)}),r}function a(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function s(e){if(e instanceof ne)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===x)return e;break;default:return ne(c(e))}if(e.nodeType===x)return ne(e)}function c(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===x)return n}}function u(e,t,n){W(t,function(t){e.addClass(t,n)})}function l(e,t,n){W(t,function(t){e.removeClass(t,n)})}function f(e){return function(t,n){n.addClass&&(u(e,t,n.addClass),n.addClass=null),n.removeClass&&(l(e,t,n.removeClass),n.removeClass=null)}}function p(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||re;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=re},e.$$prepared=!0}return e}function d(e,t){h(e,t),m(e,t)}function h(e,t){t.from&&(e.css(t.from),t.from=null)}function m(e,t){t.to&&(e.css(t.to),t.to=null)}function g(e,t,n){var r=t.options||{},i=n.options||{},o=(r.addClass||"")+" "+(i.addClass||""),a=(r.removeClass||"")+" "+(i.removeClass||""),s=y(e.attr("class"),o,a);i.preparationClasses&&(r.preparationClasses=E(i.preparationClasses,r.preparationClasses),delete i.preparationClasses);var c=r.domOperation!==re?r.domOperation:null;return G(r,i),c&&(r.domOperation=c),s.addClass?r.addClass=s.addClass:r.addClass=null,s.removeClass?r.removeClass=s.removeClass:r.removeClass=null,t.addClass=r.addClass,t.removeClass=r.removeClass,r}function y(e,t,n){function r(e){ee(e)&&(e=e.split(" "));var t={};return W(e,function(e){e.length&&(t[e]=!0)}),t}var i=1,o=-1,a={};e=r(e),t=r(t),W(t,function(e,t){a[t]=i}),n=r(n),W(n,function(e,t){a[t]=a[t]===i?null:o});var s={addClass:"",removeClass:""};return W(a,function(t,n){var r,a;t===i?(r="addClass",a=!e[n]||e[n+U]):t===o&&(r="removeClass",a=e[n]||e[n+F]),a&&(s[r].length&&(s[r]+=" "),s[r]+=n)}),s}function v(e){return e instanceof ne?e[0]:e}function b(e,t,n){var r="";t&&(r=o(t,B,!0)),n.addClass&&(r=E(r,o(n.addClass,F))),n.removeClass&&(r=E(r,o(n.removeClass,U))),r.length&&(n.preparationClasses=r,e.addClass(r))}function S(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function _(e,t){var n=t?"-"+t+"s":"";return T(e,[de,n]),[de,n]}function O(e,t){var n=t?"paused":"",r=k+ue;return T(e,[r,n]),[r,n]}function T(e,t){var n=t[0],r=t[1];e.style[n]=r}function E(e,t){return e?t?e+" "+t:e:t}function w(e){return[pe,e+"s"]}function I(e,t){var n=t?fe:de;return[n,e+"s"]}function R(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};return W(n,function(e,t){var n=i[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=P(n)),0===n&&(n=null),r[t]=n}}),r}function P(e){var t=0,n=e.split(/\s*,\s*/);return W(n,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function j(e){return 0===e||null!=e}function A(e,t){var n=D,r=e+"s";return t?n+=ie:r+=" linear all",[n,r]}function C(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function $(e,t,n){W(n,function(n){e[n]=J(e[n])?e[n]:t.style.getPropertyValue(n)})}var D,L,k,M,x=1,F="-add",U="-remove",B="ng-",N="-active",q="-prepare",H="ng-animate",V="$$ngAnimateChildren",Y="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(Y="-webkit-",D="WebkitTransition",L="webkitTransitionEnd transitionend"):(D="transition",L="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(Y="-webkit-",k="WebkitAnimation",M="webkitAnimationEnd animationend"):(k="animation",M="animationend");var z,G,W,Q,J,K,X,Z,ee,te,ne,re,ie="Duration",oe="Property",ae="Delay",se="TimingFunction",ce="IterationCount",ue="PlayState",le=9999,fe=k+ae,pe=k+ie,de=D+ae,he=D+ie,me=t.$$minErr("ng"),ge=["$$rAF",function(e){function t(e){r=r.concat(e),n()}function n(){if(r.length){for(var t=r.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||n()})}}var r,i;return r=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),n()})},t}],ye=["$interpolate",function(e){return{link:function(t,n,r){function i(e){e="on"===e||"true"===e,n.data(V,e)}var o=r.ngAnimateChildren;ee(o)&&0===o.length?n.data(V,!0):(i(e(o)(t)),r.$observe("ngAnimateChildren",i))}}}],ve="$$animateCss",be=1e3,Se=3,_e=1.5,Oe={transitionDuration:he,transitionDelay:de,transitionProperty:D+oe,animationDuration:pe,animationDelay:fe,animationIterationCount:k+ce},Te={transitionDuration:he,transitionDelay:de,animationDuration:pe,animationDelay:fe},Ee=["$animateProvider",function(e){var t=C(),n=C();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,r,s,c,u,l,g,y){function b(e,t){var n="$$ngAnimateParentKey",r=e.parentNode,i=r[n]||(r[n]=++q);return i+"-"+e.getAttribute("class")+"-"+t}function S(n,r,i,o){var a=t.get(i);return a||(a=R(e,n,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(i,a),a}function E(i,a,s,c){var u;if(t.count(s)>0&&(u=n.get(s),!u)){var l=o(a,"-stagger");r.addClass(i,l),u=R(e,i,c),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),r.removeClass(i,l),n.put(s,u)}return u||{}}function P(e){H.push(e),g.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=u(),r=0;r<H.length;r++)H[r](e);H.length=0})}function C(e,t,n){var r=S(e,t,n,Oe),i=r.animationDelay,o=r.transitionDelay;return r.maxDelay=i&&o?Math.max(i,o):i||o,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}var x=f(r),q=0,H=[];return function(e,n){function u(){g()}function f(){g(!0)}function g(t){if(!(J||X&&K)){J=!0,K=!1,V.$$skipPreparationClasses||r.removeClass(e,Oe),r.removeClass(e,we),O(G,!1),_(G,!1),W(ue,function(e){G.style[e[0]]=""}),x(e,V),d(e,V),Object.keys(Y).length&&W(Y,function(e,t){e?G.style.setProperty(t,e):G.style.removeProperty(t)}),V.onDone&&V.onDone(),de&&de.length&&e.off(de.join(" "),q);var n=e.data(ve);n&&(c.cancel(n[0].timer),e.removeData(ve)),Z&&Z.complete(!t)}}function S(e){Ue.blockTransition&&_(G,e),Ue.blockKeyframeAnimation&&O(G,!!e)}function R(){return Z=new s({end:u,cancel:f}),P(re),g(),{$$willAnimate:!1,start:function(){return Z},end:u}}function q(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target===G){var n=t.$manualTimeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(Se));Math.max(n-ce,0)>=ne&&r>=ie&&(X=!0,g())}}function H(){function t(){if(!J){if(S(!1),W(ue,function(e){var t=e[0],n=e[1];G.style[t]=n}),x(e,V),r.addClass(e,we),Ue.recalculateTimingStyles){if(Ee=G.getAttribute("class")+" "+Oe,Pe=b(G,Ee),xe=C(G,Ee,Pe),Fe=xe.maxDelay,te=Math.max(Fe,0),ie=xe.maxDuration,0===ie)return void g();Ue.hasTransitions=xe.transitionDuration>0,Ue.hasAnimations=xe.animationDuration>0}if(Ue.applyAnimationDelay&&(Fe="boolean"!=typeof V.delay&&j(V.delay)?parseFloat(V.delay):Fe,te=Math.max(Fe,0),xe.animationDelay=Fe,Be=I(Fe,!0),ue.push(Be),G.style[Be[0]]=Be[1]),ne=te*be,ae=ie*be,V.easing){var t,i=V.easing;Ue.hasTransitions&&(t=D+se,ue.push([t,i]),G.style[t]=i),Ue.hasAnimations&&(t=k+se,ue.push([t,i]),G.style[t]=i)}xe.transitionDuration&&de.push(L),xe.animationDuration&&de.push(M),ce=Date.now();var o=ne+_e*ae,a=ce+o,s=e.data(ve)||[],u=!0;if(s.length){var l=s[0];u=a>l.expectedEndTime,u?c.cancel(l.timer):s.push(g)}if(u){var f=c(n,o,!1);s[0]={timer:f,expectedEndTime:a},s.push(g),e.data(ve,s)}de.length&&e.on(de.join(" "),q),V.to&&(V.cleanupStyles&&$(Y,G,Object.keys(V.to)),m(e,V))}}function n(){var t=e.data(ve);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(ve)}}if(!J){if(!G.parentNode)return void g();var i=function(e){if(X)K&&e&&(K=!1,g());else if(K=!e,xe.animationDuration){var t=O(G,K);K?ue.push(t):a(ue,t)}},o=ke>0&&(xe.transitionDuration&&0===je.transitionDuration||xe.animationDuration&&0===je.animationDuration)&&Math.max(je.animationDelay,je.transitionDelay);o?c(t,Math.floor(o*ke*be),!1):t(),ee.resume=function(){i(!0)},ee.pause=function(){i(!1)}}}var V=n||{};V.$$prepared||(V=p(z(V)));var Y={},G=v(e);if(!G||!G.parentNode||!y.enabled())return R();var J,K,X,Z,ee,te,ne,ie,ae,ce,ue=[],fe=e.attr("class"),pe=i(V),de=[];if(0===V.duration||!l.animations&&!l.transitions)return R();var he=V.event&&Q(V.event)?V.event.join(" "):V.event,me=he&&V.structural,ge="",ye="";me?ge=o(he,B,!0):he&&(ge=he),V.addClass&&(ye+=o(V.addClass,F)),V.removeClass&&(ye.length&&(ye+=" "),ye+=o(V.removeClass,U)),V.applyClassesEarly&&ye.length&&x(e,V);var Oe=[ge,ye].join(" ").trim(),Ee=fe+" "+Oe,we=o(Oe,N),Ie=pe.to&&Object.keys(pe.to).length>0,Re=(V.keyframeStyle||"").length>0;if(!Re&&!Ie&&!Oe)return R();var Pe,je;if(V.stagger>0){var Ae=parseFloat(V.stagger);je={transitionDelay:Ae,animationDelay:Ae,transitionDuration:0,animationDuration:0}}else Pe=b(G,Ee),je=E(G,Oe,Pe,Te);V.$$skipPreparationClasses||r.addClass(e,Oe);var Ce;if(V.transitionStyle){var $e=[D,V.transitionStyle];T(G,$e),ue.push($e)}if(V.duration>=0){Ce=G.style[D].length>0;var De=A(V.duration,Ce);T(G,De),ue.push(De)}if(V.keyframeStyle){var Le=[k,V.keyframeStyle];T(G,Le),ue.push(Le)}var ke=je?V.staggerIndex>=0?V.staggerIndex:t.count(Pe):0,Me=0===ke;Me&&!V.skipBlocking&&_(G,le);var xe=C(G,Ee,Pe),Fe=xe.maxDelay;te=Math.max(Fe,0),ie=xe.maxDuration;var Ue={};if(Ue.hasTransitions=xe.transitionDuration>0,Ue.hasAnimations=xe.animationDuration>0,Ue.hasTransitionAll=Ue.hasTransitions&&"all"===xe.transitionProperty,Ue.applyTransitionDuration=Ie&&(Ue.hasTransitions&&!Ue.hasTransitionAll||Ue.hasAnimations&&!Ue.hasTransitions),Ue.applyAnimationDuration=V.duration&&Ue.hasAnimations,Ue.applyTransitionDelay=j(V.delay)&&(Ue.applyTransitionDuration||Ue.hasTransitions),Ue.applyAnimationDelay=j(V.delay)&&Ue.hasAnimations,Ue.recalculateTimingStyles=ye.length>0,(Ue.applyTransitionDuration||Ue.applyAnimationDuration)&&(ie=V.duration?parseFloat(V.duration):ie,Ue.applyTransitionDuration&&(Ue.hasTransitions=!0,xe.transitionDuration=ie,Ce=G.style[D+oe].length>0,ue.push(A(ie,Ce))),Ue.applyAnimationDuration&&(Ue.hasAnimations=!0,xe.animationDuration=ie,ue.push(w(ie)))),0===ie&&!Ue.recalculateTimingStyles)return R();if(null!=V.delay){var Be;"boolean"!=typeof V.delay&&(Be=parseFloat(V.delay),te=Math.max(Be,0)),Ue.applyTransitionDelay&&ue.push(I(Be)),Ue.applyAnimationDelay&&ue.push(I(Be,!0))}return null==V.duration&&xe.transitionDuration>0&&(Ue.recalculateTimingStyles=Ue.recalculateTimingStyles||Me),ne=te*be,ae=ie*be,V.skipBlocking||(Ue.blockTransition=xe.transitionDuration>0,Ue.blockKeyframeAnimation=xe.animationDuration>0&&je.animationDelay>0&&0===je.animationDuration),V.from&&(V.cleanupStyles&&$(Y,G,Object.keys(V.from)),h(e,V)),Ue.blockTransition||Ue.blockKeyframeAnimation?S(ie):V.skipBlocking||_(G,!1),{$$willAnimate:!0,end:u,start:function(){if(!J)return ee={end:u,cancel:f,resume:null,pause:null},Z=new s(ee),P(H),Z}}}}]}],we=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var n="ng-animate-shim",r="ng-anchor",i="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,a,s,c,u,l,f){function p(e){return e.replace(/\bng-\S+\b/g,"")}function d(e,t){return ee(e)&&(e=e.split(" ")),ee(t)&&(t=t.split(" ")),e.filter(function(e){return t.indexOf(e)===-1}).join(" ")}function h(t,a,c){function u(e){var t={},n=v(e).getBoundingClientRect();return W(["width","height","top","left"],function(e){
var r=n[e];switch(e){case"top":r+=y.scrollTop;break;case"left":r+=y.scrollLeft}t[e]=Math.floor(r)+"px"}),t}function l(){var t=e(g,{addClass:i,delay:!0,from:u(a)});return t.$$willAnimate?t:null}function f(e){return e.attr("class")||""}function h(){var t=p(f(c)),n=d(t,b),r=d(b,t),a=e(g,{to:u(c),addClass:o+" "+n,removeClass:i+" "+r,delay:!0});return a.$$willAnimate?a:null}function m(){g.remove(),a.removeClass(n),c.removeClass(n)}var g=ne(v(a).cloneNode(!0)),b=p(f(g));a.addClass(n),c.addClass(n),g.addClass(r),S.append(g);var _,O=l();if(!O&&(_=h(),!_))return m();var T=O||_;return{start:function(){function e(){n&&n.end()}var t,n=T.start();return n.done(function(){return n=null,!_&&(_=h())?(n=_.start(),n.done(function(){n=null,m(),t.complete()}),n):(m(),void t.complete())}),t=new s({end:e,cancel:e})}}}function m(e,t,n,r){var i=g(e,re),o=g(t,re),a=[];if(W(r,function(e){var t=e.out,r=e.in,i=h(n,t,r);i&&a.push(i)}),i||o||0!==a.length)return{start:function(){function e(){W(t,function(e){e.end()})}var t=[];i&&t.push(i.start()),o&&t.push(o.start()),W(a,function(e){t.push(e.start())});var n=new s({end:e,cancel:e});return s.all(t,function(e){n.complete(e)}),n}}}function g(t){var n=t.element,r=t.options||{};t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=E(r.event,r.preparationClasses));var i=e(n,r);return i.$$willAnimate?i:null}if(!u.animations&&!u.transitions)return re;var y=f[0].body,b=v(c),S=ne(t(b)||y.contains(b)?b:y);return function(e){return e.from&&e.to?m(e.from,e.to,e.classes,e.anchors):g(e)}}]}],Ie=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){function i(n){n=Q(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(r.push(t.get(s)),i[a]=!0)}return r}var o=f(r);return function(e,t,r,a){function s(){a.domOperation(),o(e,a)}function c(){h=!0,s(),d(e,a)}function u(e,t,r,i,o){var a;switch(r){case"animate":a=[t,i.from,i.to,o];break;case"setClass":a=[t,y,v,o];break;case"addClass":a=[t,y,o];break;case"removeClass":a=[t,v,o];break;default:a=[t,o]}a.push(i);var s=e.apply(e,a);if(s)if(X(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(X(s))return s;return re}function l(e,t,r,i,o){var a=[];return W(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,c=function(e){a||(a=!0,(o||re)(e),i.complete(!e))};return i=new n({end:function(){c()},cancel:function(){c(!0)}}),o=u(s,e,t,r,function(e){var t=e===!1;c(t)}),i})}),a}function f(e,t,r,i,o){var a=l(e,t,r,i,o);if(0===a.length){var s,c;"beforeSetClass"===o?(s=l(e,"removeClass",r,i,"beforeRemoveClass"),c=l(e,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(s=l(e,"removeClass",r,i,"removeClass"),c=l(e,"addClass",r,i,"addClass")),s&&(a=a.concat(s)),c&&(a=a.concat(c))}if(0!==a.length)return function(e){var t=[];return a.length&&W(a,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){W(t,function(t){e?t.cancel():t.end()})}}}var h=!1;3===arguments.length&&Z(r)&&(a=r,r=null),a=p(a),r||(r=e.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var m,g,y=a.addClass,v=a.removeClass,b=i(r);if(b.length){var S,_;"leave"===t?(_="leave",S="afterLeave"):(_="before"+t.charAt(0).toUpperCase()+t.substr(1),S=t),"enter"!==t&&"move"!==t&&(m=f(e,t,a,b,_)),g=f(e,t,a,b,S)}if(m||g){var O;return{$$willAnimate:!0,end:function(){return O?O.end():(c(),O=new n,O.complete(!0)),O},start:function(){function e(e){c(e),O.complete(e)}function t(t){h||((r||re)(t),e(t))}if(O)return O;O=new n;var r,i=[];return m&&i.push(function(e){r=m(e)}),i.length?i.push(function(e){s(),e(!0)}):s(),g&&i.push(function(e){r=g(e)}),O.setHost({end:function(){t()},cancel:function(){t(!0)}}),n.chain(i,e),O}}}}}]}],Re=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){var n=t.element,r=t.event,i=t.options,o=t.classes;return e(n,r,o,i)}return function(e){if(e.from&&e.to){var r=n(e.from),i=n(e.to);if(!r&&!i)return;return{start:function(){function e(){return function(){W(o,function(e){e.end()})}}function n(e){a.complete(e)}var o=[];r&&o.push(r.start()),i&&o.push(i.start()),t.all(o,n);var a=new t({end:e(),cancel:e()});return a}}}return n(e)}}]}],Pe="data-ng-animate",je="$ngAnimatePin",Ae=["$animateProvider",function(t){function r(e){if(!e)return null;var t=e.split(h),n=Object.create(null);return W(t,function(e){n[e]=!0}),n}function i(e,t){if(e&&t){var n=r(t);return e.split(h).some(function(e){return n[e]})}}function o(e,t,n){return m[e].some(function(e){return e(t,n)})}function a(e,t){var n=(e.addClass||"").length>0,r=(e.removeClass||"").length>0;return t?n&&r:n||r}var u=1,l=2,h=" ",m=this.rules={skip:[],cancel:[],join:[]};m.join.push(function(e,t){return!e.structural&&a(e)}),m.skip.push(function(e,t){return!e.structural&&!a(e)}),m.skip.push(function(e,t){return"leave"===t.event&&e.structural}),m.skip.push(function(e,t){return t.structural&&t.state===l&&!e.structural}),m.cancel.push(function(e,t){return t.structural&&e.structural}),m.cancel.push(function(e,t){return t.state===l&&e.structural}),m.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,r=e.removeClass,o=t.addClass,a=t.removeClass;return!(te(n)&&te(r)||te(o)&&te(a))&&(i(n,a)||i(r,o))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,i,h,m,y,_,O,T,E,w,I){function R(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0,t()})}}function P(e,t){return g(e,t,{})}function j(e,t,n){var r=[],i=q[n];return i&&W(i,function(i){ae.call(i.node,t)?r.push(i.callback):"leave"===n&&ae.call(i.node,e)&&r.push(i.callback)}),r}function A(e,t,n){var r=c(t);return e.filter(function(e){var t=e.node===r&&(!n||e.callback===n);return!t})}function C(e,t){"close"!==e||t.parentNode||se.off(t)}function $(e,t,n){function c(e,t,n,i){w(function(){var e=j(T,y,t);e.length?r(function(){W(e,function(e){e(m,n,i)}),C(n,y)}):C(n,y)}),e.progress(t,n,i)}function f(e){S(m,h),oe(m,h),d(m,h),h.domOperation(),E.complete(!e)}var h=z(n),m=s(e),y=v(m),T=y&&y.parentNode;h=p(h);var E=new O,w=R();if(Q(h.addClass)&&(h.addClass=h.addClass.join(" ")),h.addClass&&!ee(h.addClass)&&(h.addClass=null),Q(h.removeClass)&&(h.removeClass=h.removeClass.join(" ")),h.removeClass&&!ee(h.removeClass)&&(h.removeClass=null),h.from&&!Z(h.from)&&(h.from=null),h.to&&!Z(h.to)&&(h.to=null),!(B&&y&&re(y,t,n)&&ie(y,h)))return f(),E;var A=["enter","move","leave"].indexOf(t)>=0,$=I(),x=$||U.get(y),N=!x&&F.get(y)||{},q=!!N.state;if(x||q&&N.state===u||(x=!k(y,T,t)),x)return $&&c(E,t,"start"),f(),$&&c(E,t,"close"),E;A&&D(y);var H={structural:A,element:m,event:t,addClass:h.addClass,removeClass:h.removeClass,close:f,options:h,runner:E};if(q){var V=o("skip",H,N);if(V)return N.state===l?(f(),E):(g(m,N,H),N.runner);var Y=o("cancel",H,N);if(Y)if(N.state===l)N.runner.end();else{if(!N.structural)return g(m,N,H),N.runner;N.close()}else{var G=o("join",H,N);if(G){if(N.state!==l)return b(m,A?t:null,h),t=H.event=N.event,h=g(m,N,H),N.runner;P(m,H)}}}else P(m,H);var J=H.structural;if(J||(J="animate"===H.event&&Object.keys(H.options.to||{}).length>0||a(H)),!J)return f(),L(y),E;var K=(N.counter||0)+1;return H.counter=K,M(y,u,H),i.$$postDigest(function(){m=s(e);var n=F.get(y),r=!n;n=n||{};var i=m.parent()||[],o=i.length>0&&("animate"===n.event||n.structural||a(n));if(r||n.counter!==K||!o)return r&&(oe(m,h),d(m,h)),(r||A&&n.event!==t)&&(h.domOperation(),E.end()),void(o||L(y));t=!n.structural&&a(n,!0)?"setClass":n.event,M(y,l);var u=_(m,t,n.options);E.setHost(u),c(E,t,"start",{}),u.done(function(e){f(!e);var n=F.get(y);n&&n.counter===K&&L(y),c(E,t,"close",{})})}),E}function D(e){var t=e.querySelectorAll("["+Pe+"]");W(t,function(e){var t=parseInt(e.getAttribute(Pe),10),n=F.get(e);if(n)switch(t){case l:n.runner.end();case u:F.delete(e)}})}function L(e){e.removeAttribute(Pe),F.delete(e)}function k(e,t,n){var r,i=m[0].body,o=v(h),a=e===i||"HTML"===e.nodeName,s=e===o,c=!1,u=U.get(e),l=ne.data(e,je);for(l&&(t=v(l));t&&(s||(s=t===o),t.nodeType===x);){var f=F.get(t)||{};if(!c){var p=U.get(t);if(p===!0&&u!==!1){u=!0;break}p===!1&&(u=!1),c=f.structural}if(te(r)||r===!0){var d=ne.data(t,V);J(d)&&(r=d)}if(c&&r===!1)break;if(a||(a=t===i),a&&s)break;t=s||!(l=ne.data(t,je))?t.parentNode:v(l)}var g=(!c||r)&&u!==!0;return g&&s&&a}function M(e,t,n){n=n||{},n.state=t,e.setAttribute(Pe,t);var r=F.get(e),i=r?G(r,n):n;F.set(e,i)}var F=new y,U=new y,B=null,N=i.$watch(function(){return 0===T.totalPendingRequests},function(e){e&&(N(),i.$$postDigest(function(){i.$$postDigest(function(){null===B&&(B=!0)})}))}),q=Object.create(null),H=t.customFilter(),Y=t.classNameFilter(),X=function(){return!0},re=H||X,ie=Y?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return Y.test(n)}:X,oe=f(E),ae=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},se={on:function(e,t,n){var r=c(t);q[e]=q[e]||[],q[e].push({node:r,callback:n}),ne(t).on("$destroy",function(){var i=F.get(r);i||se.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||ee(arguments[0])){var r=q[e];r&&(q[e]=1===arguments.length?null:A(r,t,n))}else{t=arguments[0];for(var i in q)q[i]=A(q[i],t)}},pin:function(e,t){n(K(e),"element","not an element"),n(K(t),"parentElement","not an element"),e.data(je,t)},push:function(e,t,n,r){return n=n||{},n.domOperation=r,$(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!B;else{var r=K(e);if(r){var i=v(e);1===n?t=!U.get(i):U.set(i,!t)}else t=B=!!e}return t}};return se}]}],Ce=["$animateProvider",function(e){function t(e,t){e.data(s,t)}function n(e){e.removeData(s)}function i(e){return e.data(s)}var o="ng-animate-ref",a=this.drivers=[],s="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,s,c,u,l,h){function m(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,r=n.parentNode;o.set(n,e);for(var a;r;){if(a=o.get(r)){a.processed||(a=t(a));break}r=r.parentNode}return(a||i).children.push(e),e}function n(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);var i=r.length,o=0,a=[];for(t=0;t<r.length;t++){var s=r[t];i<=0&&(i=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,r.push(e)}),i--}return a.length&&n.push(a),n}var r,i={children:[]},o=new l;for(r=0;r<e.length;r++){var a=e[r];o.set(a.domNode,e[r]={domNode:a.domNode,fn:a.fn,children:[]})}for(r=0;r<e.length;r++)t(e[r]);return n(i)}var g=[],y=f(e);return function(l,f,b){function S(e){var t="["+o+"]",n=e.hasAttribute(o)?[e]:e.querySelectorAll(t),r=[];return W(n,function(e){var t=e.getAttribute(o);t&&t.length&&r.push(e)}),r}function _(e){var t=[],n={};W(e,function(e,r){var i=e.element,a=v(i),s=e.event,c=["enter","move"].indexOf(s)>=0,u=e.structural?S(a):[];if(u.length){var l=c?"to":"from";W(u,function(e){var t=e.getAttribute(o);n[t]=n[t]||{},n[t][l]={animationID:r,element:ne(e)}})}else t.push(e)});var r={},i={};return W(n,function(n,o){var a=n.from,s=n.to;if(!a||!s){var c=a?a.animationID:s.animationID,u=c.toString();return void(r[u]||(r[u]=!0,t.push(e[c])))}var l=e[a.animationID],f=e[s.animationID],p=a.animationID.toString();if(!i[p]){var d=i[p]={structural:!0,beforeStart:function(){l.beforeStart(),f.beforeStart()},close:function(){l.close(),f.close()},classes:O(l.classes,f.classes),from:l,to:f,anchors:[]};d.classes.length?t.push(d):(t.push(l),t.push(f))}i[p].anchors.push({out:a.element,in:s.element})}),t}function O(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){n.push(i);break}}return n.join(" ")}function T(e){for(var t=a.length-1;t>=0;t--){var n=a[t],r=c.get(n),i=r(e);if(i)return i}}function E(){l.addClass(H),C&&e.addClass(l,C),$&&(e.removeClass(l,$),$=null)}function w(e,t){function n(e){var n=i(e);n&&n.setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function I(){var e=i(l);!e||"leave"===f&&b.$$domOperationFired||e.end()}function R(t){l.off("$destroy",I),n(l),y(l,b),d(l,b),b.domOperation(),C&&e.removeClass(l,C),l.removeClass(H),j.complete(!t)}b=p(b);var P=["enter","move","leave"].indexOf(f)>=0,j=new u({end:function(){R()},cancel:function(){R(!0)}});if(!a.length)return R(),j;t(l,j);var A=r(l.attr("class"),r(b.addClass,b.removeClass)),C=b.tempClasses;C&&(A+=" "+C,b.tempClasses=null);var $;return P&&($="ng-"+f+q,e.addClass(l,$)),g.push({element:l,classes:A,event:f,structural:P,options:b,beforeStart:E,close:R}),l.on("$destroy",I),g.length>1?j:(s.$$postDigest(function(){var e=[];W(g,function(t){i(t.element)?e.push(t):t.close()}),g.length=0;var t=_(e),n=[];W(t,function(e){n.push({domNode:v(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close,r=e.anchors?e.from.element||e.to.element:e.element;if(i(r)){var o=T(e);o&&(t=o.start)}if(t){var a=t();a.done(function(e){n(!e)}),w(e,a)}else n()}})}),h(m(n))}),j)}}]}],$e=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,r,i,o){var a,s;t.$watchCollection(r.ngAnimateSwap||r.for,function(r){a&&e.leave(a),s&&(s.$destroy(),s=null),(r||0===r)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,n)}))})}}}];t.module("ngAnimate",[],function(){re=t.noop,z=t.copy,G=t.extend,ne=t.element,W=t.forEach,Q=t.isArray,ee=t.isString,Z=t.isObject,te=t.isUndefined,J=t.isDefined,X=t.isFunction,K=t.isElement}).info({angularVersion:"1.6.10"}).directive("ngAnimateSwap",$e).directive("ngAnimateChildren",ye).factory("$$rAFScheduler",ge).provider("$$animateQueue",Ae).provider("$$animation",Ce).provider("$animateCss",Ee).provider("$$animateCssDriver",we).provider("$$animateJs",Ie).provider("$$animateJsDriver",Re)}(window,window.angular)},function(e,t,n){n(621),e.exports="ngAria"},function(e,t){!function(e,t){"use strict";function n(){function e(e,t,r,i){return function(a,s,c){var u=c.$normalize(t);!n[u]||o(s,r)||c[u]||a.$watch(c[e],function(e){e=i?!e:!!e,s.attr(t,e)})}}var n={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(e){n=t.extend(n,e)},this.$get=function(){return{config:function(e){return n[e]},$$watchExpr:e}}}var r=t.module("ngAria",["ng"]).info({angularVersion:"1.6.10"}).provider("$aria",n),i=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],o=function(e,t){if(t.indexOf(e[0].nodeName)!==-1)return!0};r.directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(e){return e.$$watchExpr("ngValue","aria-checked",i,!1)}]).directive("ngChecked",["$aria",function(e){return e.$$watchExpr("ngChecked","aria-checked",i,!1)}]).directive("ngReadonly",["$aria",function(e){return e.$$watchExpr("ngReadonly","aria-readonly",i,!1)}]).directive("ngRequired",["$aria",function(e){return e.$$watchExpr("ngRequired","aria-required",i,!1)}]).directive("ngModel",["$aria",function(e){function t(t,n,r,a){return e.config(n)&&!r.attr(t)&&(a||!o(r,i))}function n(e,t){return!t.attr("role")&&t.attr("type")===e&&!o(t,i)}function r(e,t){var n=e.type,r=e.role;return"checkbox"===(n||r)||"menuitemcheckbox"===r?"checkbox":"radio"===(n||r)||"menuitemradio"===r?"radio":"range"===n||"progressbar"===r||"slider"===r?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(i,o){var a=r(o,i);return{post:function(r,i,o,s){function c(){return s.$modelValue}function u(e){var t=o.value==s.$viewValue;i.attr("aria-checked",t)}function l(){i.attr("aria-checked",!s.$isEmpty(s.$viewValue))}var f=t("tabindex","tabindex",i,!1);switch(a){case"radio":case"checkbox":n(a,i)&&i.attr("role",a),t("aria-checked","ariaChecked",i,!1)&&r.$watch(c,"radio"===a?u:l),f&&i.attr("tabindex",0);break;case"range":if(n(a,i)&&i.attr("role","slider"),e.config("ariaValue")){var p=!i.attr("aria-valuemin")&&(o.hasOwnProperty("min")||o.hasOwnProperty("ngMin")),d=!i.attr("aria-valuemax")&&(o.hasOwnProperty("max")||o.hasOwnProperty("ngMax")),h=!i.attr("aria-valuenow");p&&o.$observe("min",function(e){i.attr("aria-valuemin",e)}),d&&o.$observe("max",function(e){i.attr("aria-valuemax",e)}),h&&r.$watch(c,function(e){i.attr("aria-valuenow",e)})}f&&i.attr("tabindex",0)}!o.hasOwnProperty("ngRequired")&&s.$validators.required&&t("aria-required","ariaRequired",i,!1)&&o.$observe("required",function(){i.attr("aria-required",!!o.required)}),t("aria-invalid","ariaInvalid",i,!0)&&r.$watch(function(){return s.$invalid},function(e){i.attr("aria-invalid",!!e)})}}}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled",i,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t,n,r){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(e,t){return{restrict:"A",compile:function(n,r){var a=t(r.ngClick);return function(t,n,r){o(n,i)||(e.config("bindRoleForClick")&&!n.attr("role")&&n.attr("role","button"),e.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0),!e.config("bindKeydown")||r.ngKeydown||r.ngKeypress||r.ngKeyup||n.on("keydown",function(e){function n(){a(t,{$event:e})}var r=e.which||e.keyCode;32!==r&&13!==r||t.$apply(n)}))}}}}]).directive("ngDblclick",["$aria",function(e){return function(t,n,r){!e.config("tabindex")||n.attr("tabindex")||o(n,i)||n.attr("tabindex",0)}}])}(window,window.angular)},function(e,t){!function(e,t,n){"use strict";!function(){t.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.layout","material.core.theming.palette","material.core.theming","material.core.animate","material.components.autocomplete","material.components.backdrop","material.components.button","material.components.bottomSheet","material.components.card","material.components.checkbox","material.components.chips","material.components.colors","material.components.content","material.components.datepicker","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabShared","material.components.fabSpeedDial","material.components.fabToolbar","material.components.fabTrigger","material.components.gridList","material.components.icon","material.components.list","material.components.input","material.components.menuBar","material.components.menu","material.components.navBar","material.components.panel","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.sidenav","material.components.select","material.components.slider","material.components.showHide","material.components.swipe","material.components.sticky","material.components.switch","material.components.subheader","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.virtualRepeat","material.components.whiteframe"])}(),function(){function e(e,t){if(t.has("$swipe")){var n="You are using the ngTouch module. \nAngular Material already has mobile click, tap, and swipe support... \nngTouch is not supported with Angular Material!";e.warn(n)}}function n(e,t){e.decorator("$$rAF",["$delegate",r]),t.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("deep-orange").backgroundPalette("grey")}function r(e){return e.throttle=function(t){var n,r,i,o;return function(){n=arguments,o=this,i=t,r||(r=!0,e(function(){i.apply(o,Array.prototype.slice.call(n)),r=!1}))}},e}t.module("material.core",["ngAnimate","material.core.animate","material.core.layout","material.core.gestures","material.core.theming"]).config(n).run(e),e.$inject=["$log","$injector"],n.$inject=["$provide","$mdThemingProvider"],r.$inject=["$delegate"]}(),function(){function e(){return{restrict:"A",link:n}}function n(e,t,n){var r=n.mdAutoFocus||n.mdAutofocus||n.mdSidenavFocus;e.$watch(r,function(e){t.toggleClass("_md-autofocus",e)})}t.module("material.core").directive("mdAutofocus",e).directive("mdAutoFocus",e).directive("mdSidenavFocus",e)}(),function(){function e(){function e(e){var t="#"===e[0]?e.substr(1):e,n=t.length/3,r=t.substr(0,n),i=t.substr(n,n),o=t.substr(2*n);return 1===n&&(r+=r,i+=i,o+=o),"rgba("+parseInt(r,16)+","+parseInt(i,16)+","+parseInt(o,16)+",0.1)"}function t(e){e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);var t=e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):"";return t.toUpperCase()}function n(e){return e.replace(")",", 0.1)").replace("(","a(")}function r(e){return e?e.replace("rgba","rgb").replace(/,[^\),]+\)/,")"):"rgb(0,0,0)"}return{rgbaToHex:t,hexToRgba:e,rgbToRgba:n,rgbaToRgb:r}}t.module("material.core").factory("$mdColorUtil",e)}(),function(){function e(e){function n(e){var t=o+"-"+e,n=i(t),a=n.charAt(0).toLowerCase()+n.substring(1);return r(e)?e:r(n)?n:r(a)?a:e}function r(e){return t.isDefined(c.style[e])}function i(e){return e.replace(s,function(e,t,n,r){return r?n.toUpperCase():n})}var o=e.vendorPrefix,a=/webkit/i.test(o),s=/([:\-_]+(.))/g,c=document.createElement("div");return{KEY_CODE:{COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(a?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(a?" webkitAnimationEnd":""),TRANSFORM:n("transform"),TRANSFORM_ORIGIN:n("transformOrigin"),TRANSITION:n("transition"),TRANSITION_DURATION:n("transitionDuration"),ANIMATION_PLAY_STATE:n("animationPlayState"),ANIMATION_DURATION:n("animationDuration"),ANIMATION_NAME:n("animationName"),ANIMATION_TIMING:n("animationTimingFunction"),ANIMATION_DIRECTION:n("animationDirection")},MEDIA:{xs:"(max-width: 599px)","gt-xs":"(min-width: 600px)",sm:"(min-width: 600px) and (max-width: 959px)","gt-sm":"(min-width: 960px)",md:"(min-width: 960px) and (max-width: 1279px)","gt-md":"(min-width: 1280px)",lg:"(min-width: 1280px) and (max-width: 1919px)","gt-lg":"(min-width: 1920px)",xl:"(min-width: 1920px)",landscape:"(orientation: landscape)",portrait:"(orientation: portrait)",print:"print"},MEDIA_PRIORITY:["xl","gt-lg","lg","gt-md","md","gt-sm","sm","gt-xs","xs","landscape","portrait","print"]}}t.module("material.core").factory("$mdConstant",e),e.$inject=["$sniffer"]}(),function(){function e(e,n){function r(){return[].concat(v)}function i(){return v.length}function o(e){return v.length&&e>-1&&e<v.length}function a(e){return!!e&&o(p(e)+1)}function s(e){return!!e&&o(p(e)-1)}function c(e){return o(e)?v[e]:null}function u(e,t){return v.filter(function(n){return n[e]===t})}function l(e,n){return e?(t.isNumber(n)||(n=v.length),v.splice(n,0,e),p(e)):-1}function f(e){d(e)&&v.splice(p(e),1)}function p(e){return v.indexOf(e)}function d(e){return e&&p(e)>-1}function h(){return v.length?v[0]:null}function m(){return v.length?v[v.length-1]:null}function g(e,r,i,a){i=i||y;for(var s=p(r);;){if(!o(s))return null;var c=s+(e?-1:1),u=null;if(o(c)?u=v[c]:n&&(u=e?m():h(),c=p(u)),null===u||c===a)return null;if(i(u))return u;t.isUndefined(a)&&(a=c),s=c}}var y=function(){return!0};e&&!t.isArray(e)&&(e=Array.prototype.slice.call(e)),n=!!n;var v=e||[];return{items:r,count:i,inRange:o,contains:d,indexOf:p,itemAt:c,findBy:u,add:l,remove:f,first:h,last:m,next:t.bind(null,g,!1),previous:t.bind(null,g,!0),hasPrevious:s,hasNext:a}}t.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.iterator=e,t}])}])}(),function(){function e(e,n,r){function i(e){var n=p[e];t.isUndefined(n)&&(n=p[e]=o(e));var r=h[n];return t.isUndefined(r)&&(r=a(n)),r}function o(t){return e.MEDIA[t]||("("!==t.charAt(0)?"("+t+")":t)}function a(e){var t=d[e];return t||(t=d[e]=r.matchMedia(e)),t.addListener(s),h[t.media]=!!t.matches}function s(e){n.$evalAsync(function(){h[e.media]=!!e.matches})}function c(e){return d[e]}function u(t,n){for(var r=0;r<e.MEDIA_PRIORITY.length;r++){var i=e.MEDIA_PRIORITY[r];if(d[p[i]].matches){var o=f(t,n+"-"+i);if(t[o])return t[o]}}return t[f(t,n)]}function l(n,r,i){var o=[];return n.forEach(function(n){var a=f(r,n);t.isDefined(r[a])&&o.push(r.$observe(a,t.bind(void 0,i,null)));for(var s in e.MEDIA)a=f(r,n+"-"+s),t.isDefined(r[a])&&o.push(r.$observe(a,t.bind(void 0,i,s)))}),function(){o.forEach(function(e){e()})}}function f(e,t){return m[t]||(m[t]=e.$normalize(t))}var p={},d={},h={},m={};return i.getResponsiveAttribute=u,i.getQuery=c,i.watchResponsiveAttributes=l,i}t.module("material.core").factory("$mdMedia",e),e.$inject=["$mdConstant","$rootScope","$window"]}(),function(){function e(e,n){function r(e){return e=t.isArray(e)?e:[e],e.forEach(function(t){a.forEach(function(n){e.push(n+"-"+t)})}),e}function i(e){return e=t.isArray(e)?e:[e],r(e).map(function(e){return"["+e+"]"}).join(",")}function o(e,t){e=e[0]||e;for(var n=r(t),i=0;i<n.length;i++)if(e.hasAttribute(n[i]))return!0;return!1}var a=["data","x"];return e?n?i(e):r(e):{buildList:r,buildSelector:i,hasAttribute:o}}t.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.prefixer=e,t}])}])}(),function(){function r(r,o,a,s,c,u,l,f,p){function d(e){return e[0]||e}var h=u.startSymbol(),m=u.endSymbol(),g="{{"===h&&"}}"===m,y=function(e,n,r){var i=!1;if(e&&e.length){var o=p.getComputedStyle(e[0]);i=t.isDefined(o[n])&&(!r||o[n]==r)}return i},v={dom:{},now:e.performance?t.bind(e.performance,e.performance.now):Date.now||function(){return(new Date).getTime()},bidi:function(e,n,i,o){function a(e){return e?s(e)?e:e+"px":"0"}function s(e){return String(e).indexOf("px")>-1}var c=!("rtl"==r[0].dir||"rtl"==r[0].body.dir);return 0==arguments.length?c?"ltr":"rtl":void(c&&t.isDefined(i)?t.element(e).css(n,a(i)):!c&&t.isDefined(o)&&t.element(e).css(n,a(o)))},clientRect:function(e,t,n){var r=d(e);t=d(t||r.offsetParent||document.body);var i=r.getBoundingClientRect(),o=n?t.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:i.left-o.left,top:i.top-o.top,width:i.width,height:i.height}},offsetRect:function(e,t){return v.clientRect(e,t,!0)},nodesToArray:function(e){e=e||[];for(var t=[],n=0;n<e.length;++n)t.push(e.item(n));return t},scrollTop:function(e){e=t.element(e||r[0].body);var i=e[0]==r[0].body?r[0].body:n,o=i?i.scrollTop+i.parentElement.scrollTop:0;return o||Math.abs(e[0].getBoundingClientRect().top)},findFocusTarget:function(e,n){function r(e,n){var r,i=e[0].querySelectorAll(n);return i&&i.length&&i.length&&t.forEach(i,function(e){e=t.element(e);var n=e.hasClass("_md-autofocus");n&&(r=e)}),r}var i,o=this.prefixer("md-autofocus",!0);return i=r(e,n||o),i||n==o||(i=r(e,this.prefixer("md-auto-focus",!0)),i||(i=r(e,o))),i},disableScrollAround:function(e,n){function i(e){function n(e){e.preventDefault()}e=t.element(e||s)[0];var r=t.element('<div class="md-scroll-mask">  <div class="md-scroll-mask-bar"></div></div>');return e.appendChild(r[0]),r.on("wheel",n),r.on("touchmove",n),function(){r.off("wheel"),r.off("touchmove"),r[0].parentNode.removeChild(r[0]),delete v.disableScrollAround._enableScrolling}}function o(){var e=s.parentNode,t=e.style.cssText||"",n=s.style.cssText||"",r=v.scrollTop(s),i=s.clientWidth,o=s.scrollHeight>s.clientHeight+1;return o&&a(s,{position:"fixed",width:"100%",top:-r+"px"}),s.clientWidth<i&&(s.style.overflow="hidden"),o&&(document.documentElement.style.overflowY="scroll"),function(){s.style.cssText=n,e.style.cssText=t,s.scrollTop=r,e.scrollTop=r}}function a(e,t){for(var n in t)e.style[n]=t[n]}if(v.disableScrollAround._count=v.disableScrollAround._count||0,++v.disableScrollAround._count,v.disableScrollAround._enableScrolling)return v.disableScrollAround._enableScrolling;var s=r[0].body,c=o(),u=i(n);return v.disableScrollAround._enableScrolling=function(){--v.disableScrollAround._count||(c(),u(),delete v.disableScrollAround._enableScrolling),v.disableScrollAround._count=v.disableScrollAround._count<0?0:v.disableScrollAround._count}},enableScrolling:function(){var e=this.disableScrollAround._enableScrolling;e&&e()},floatingScrollbars:function(){if(this.floatingScrollbars.cached===n){var e=t.element("<div><div></div></div>").css({width:"100%","z-index":-1,position:"absolute",height:"35px","overflow-y":"scroll"});e.children().css("height","60px"),r[0].body.appendChild(e[0]),this.floatingScrollbars.cached=e[0].offsetWidth==e[0].childNodes[0].offsetWidth,e.remove()}return this.floatingScrollbars.cached},forceFocus:function(t){var n=t[0]||t;document.addEventListener("click",function e(t){t.target===n&&t.$focus&&(n.focus(),t.stopImmediatePropagation(),t.preventDefault(),n.removeEventListener("click",e))},!0);var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!1,!0,e,{},0,0,0,0,!1,!1,!1,!1,0,null),r.$material=!0,r.$focus=!0,n.dispatchEvent(r)},createBackdrop:function(e,t){return a(v.supplant('<md-backdrop class="{0}">',[t]))(e)},supplant:function(e,t,n){return n=n||/\{([^\{\}]*)\}/g,e.replace(n,function(e,n){var r=n.split("."),i=t;try{for(var o in r)r.hasOwnProperty(o)&&(i=i[r[o]])}catch(t){i=e}return"string"==typeof i||"number"==typeof i?i:e})},fakeNgModel:function(){return{$fake:!0,$setTouched:t.noop,$setViewValue:function(e){this.$viewValue=e,this.$render(e),this.$viewChangeListeners.forEach(function(e){e()})},$isEmpty:function(e){return 0===(""+e).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:t.noop}},debounce:function(e,t,r,i){var a;return function(){var s=r,c=Array.prototype.slice.call(arguments);o.cancel(a),a=o(function(){a=n,e.apply(s,c)},t||10,i)}},throttle:function(e,t){var n;return function(){var r=this,i=arguments,o=v.now();(!n||o-n>t)&&(e.apply(r,i),n=o)}},time:function(e){var t=v.now();return e(),v.now()-t},valueOnUse:function(e,t,n){var r=null,i=Array.prototype.slice.call(arguments),o=i.length>3?i.slice(3):[];Object.defineProperty(e,t,{get:function(){return null===r&&(r=n.apply(e,o)),r}})},nextUid:function(){return""+i++},disconnectScope:function(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,n=t.$parent;t.$$disconnected=!1,t.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=t,n.$$childTail=t):n.$$childHead=n.$$childTail=t}},getClosest:function(e,n,r){if(e instanceof t.element&&(e=e[0]),n=n.toUpperCase(),r&&(e=e.parentNode),!e)return null;do if(e.nodeName===n)return e;while(e=e.parentNode);return null},elementContains:function(n,r){var i=e.Node&&e.Node.prototype&&Node.prototype.contains,o=i?t.bind(n,n.contains):t.bind(n,function(e){return n===r||!!(16&this.compareDocumentPosition(e))});return o(r)},extractElementByName:function(e,n,r,i){function o(e){return a(e)||(r?s(e):null)}function a(e){if(e)for(var t=0,r=e.length;t<r;t++)if(e[t].nodeName.toLowerCase()===n)return e[t];return null}function s(e){var t;if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];if(!t)for(var a=0,s=i.childNodes.length;a<s;a++)t=t||o([i.childNodes[a]])}return t}var c=o(e);return!c&&i&&l.warn(v.supplant("Unable to find node '{0}' in element '{1}'.",[n,e[0].outerHTML])),t.element(c||e)},initOptionalProperties:function(e,n,r){r=r||{},t.forEach(e.$$isolateBindings,function(i,o){if(i.optional&&t.isUndefined(e[o])){var a=t.isDefined(n[i.attrName]);
e[o]=t.isDefined(r[o])?r[o]:a}})},nextTick:function(e,t,n){function r(){var e=i.queue,t=i.digest;i.queue=[],i.timeout=null,i.digest=!1,e.forEach(function(e){var t=e.scope&&e.scope.$$destroyed;t||e.callback()}),t&&s.$digest()}var i=v.nextTick,a=i.timeout,c=i.queue||[];return c.push({scope:n,callback:e}),null==t&&(t=!0),i.digest=i.digest||t,i.queue=c,a||(i.timeout=o(r,0,!1))},processTemplate:function(e){return g?e:e&&t.isString(e)?e.replace(/\{\{/g,h).replace(/}}/g,m):e},getParentWithPointerEvents:function(e){for(var t=e.parent();y(t,"pointer-events","none");)t=t.parent();return t},getNearestContentElement:function(e){for(var t=e.parent()[0];t&&t!==f[0]&&t!==document.body&&"MD-CONTENT"!==t.nodeName.toUpperCase();)t=t.parentNode;return t},parseAttributeBoolean:function(e,t){return""===e||!!e&&(t===!1||"false"!==e&&"0"!==e)},hasComputedStyle:y};return v.dom.animator=c(v),v}var i=0;t.module("material.core").factory("$mdUtil",r),r.$inject=["$document","$timeout","$compile","$rootScope","$$mdAnimate","$interpolate","$log","$rootElement","$window"],t.element.prototype.focus=t.element.prototype.focus||function(){return this.length&&this[0].focus(),this},t.element.prototype.blur=t.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){function e(e,n,r,i){function o(e,n,r){var i=t.element(e)[0]||e;!i||i.hasAttribute(n)&&0!==i.getAttribute(n).length||u(i,n)||(r=t.isString(r)?r.trim():"",r.length&&e.attr(n,r))}function a(t,n,r){e(function(){o(t,n,r())})}function s(e,t){var n=c(e)||"",r=n.indexOf(i.startSymbol())>-1;r?a(e,t,function(){return c(e)}):o(e,t,n)}function c(e){function t(t){for(;t.parentNode&&(t=t.parentNode)!==e;)if(t.getAttribute&&"true"===t.getAttribute("aria-hidden"))return!0}e=e[0]||e;for(var n,r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i="";n=r.nextNode();)t(n)||(i+=n.textContent);return i.trim()||""}function u(e,t){function n(e){var t=e.currentStyle?e.currentStyle:r.getComputedStyle(e);return"none"===t.display}var i=e.hasChildNodes(),o=!1;if(i)for(var a=e.childNodes,s=0;s<a.length;s++){var c=a[s];1===c.nodeType&&c.hasAttribute(t)&&(n(c)||(o=!0))}return o}return{expect:o,expectAsync:a,expectWithText:s}}t.module("material.core").service("$mdAria",e),e.$inject=["$$rAF","$log","$window","$interpolate"]}(),function(){function e(e,n,r,i,o){this.compile=function(a){var s=a.templateUrl,c=a.template||"",u=a.controller,l=a.controllerAs,f=t.extend({},a.resolve||{}),p=t.extend({},a.locals||{}),d=a.transformTemplate||t.identity,h=a.bindToController;return t.forEach(f,function(e,n){t.isString(e)?f[n]=r.get(e):f[n]=r.invoke(e)}),t.extend(f,p),s?f.$template=n(s).then(function(e){return e}):f.$template=e.when(c),e.all(f).then(function(e){var n,r=d(e.$template,a),s=a.element||t.element("<div>").html(r.trim()).contents(),c=i(s);return n={locals:e,element:s,link:function(r){if(e.$scope=r,u){var i=o(u,e,!0);h&&t.extend(i.instance,e);var a=i();s.data("$ngControllerController",a),s.children().data("$ngControllerController",a),l&&(r[l]=a),n.controller=a}return c(r)}}})}}t.module("material.core").service("$mdCompiler",e),e.$inject=["$q","$templateRequest","$injector","$compile","$controller"]}(),function(){function n(){}function r(n,r,i){function o(e){return function(t,n){n.distance<this.state.options.maxDistance&&this.dispatchEvent(t,e,n)}}function a(e,t,n){var r=h[t.replace(/^\$md./,"")];if(!r)throw new Error("Failed to register element with handler "+t+". Available handlers: "+Object.keys(h).join(", "));return r.registerElement(e,n)}function c(e,r){var i=new n(e);return t.extend(i,r),h[e]=i,g}var u=navigator.userAgent||navigator.vendor||e.opera,f=u.match(/ipad|iphone|ipod/i),p=u.match(/android/i),d="undefined"!=typeof e.jQuery&&t.element===e.jQuery,g={handler:c,register:a,isHijackingClicks:(f||p)&&!d&&!m};if(g.isHijackingClicks){var y=6;g.handler("click",{options:{maxDistance:y},onEnd:o("click")}),g.handler("focus",{options:{maxDistance:y},onEnd:function(e,t){function n(e){var t=["INPUT","SELECT","BUTTON","TEXTAREA","VIDEO","AUDIO"];return"-1"!=e.getAttribute("tabindex")&&!e.hasAttribute("DISABLED")&&(e.hasAttribute("tabindex")||e.hasAttribute("href")||t.indexOf(e.nodeName)!=-1)}t.distance<this.state.options.maxDistance&&n(e.target)&&(this.dispatchEvent(e,"focus",t),e.target.focus())}}),g.handler("mouseup",{options:{maxDistance:y},onEnd:o("mouseup")}),g.handler("mousedown",{onStart:function(e){this.dispatchEvent(e,"mousedown")}})}return g.handler("press",{onStart:function(e,t){this.dispatchEvent(e,"$md.pressdown")},onEnd:function(e,t){this.dispatchEvent(e,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){i.cancel(this.state.timeout)},onStart:function(e,n){return this.state.registeredParent?(this.state.pos={x:n.x,y:n.y},void(this.state.timeout=i(t.bind(this,function(){this.dispatchEvent(e,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(e,t){e.preventDefault();var n=this.state.pos.x-t.x,r=this.state.pos.y-t.y;Math.sqrt(n*n+r*r)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onStart:function(e){this.state.registeredParent||this.cancel()},onMove:function(e,t){var n,r;e.preventDefault(),this.state.dragPointer?this.dispatchDragMove(e):(this.state.options.horizontal?(n=Math.abs(t.distanceX)>this.state.options.minDistance,r=Math.abs(t.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(n=Math.abs(t.distanceY)>this.state.options.minDistance,r=Math.abs(t.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),n?(this.state.dragPointer=s(e),l(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragstart",this.state.dragPointer)):r&&this.cancel())},dispatchDragMove:r.throttle(function(e){this.state.isRunning&&(l(e,this.state.dragPointer),this.dispatchEvent(e,"$md.drag",this.state.dragPointer))}),onEnd:function(e,t){this.state.dragPointer&&(l(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(e,t){var n;Math.abs(t.velocityX)>this.state.options.minVelocity&&Math.abs(t.distanceX)>this.state.options.minDistance?(n="left"==t.directionX?"$md.swipeleft":"$md.swiperight",this.dispatchEvent(e,n)):Math.abs(t.velocityY)>this.state.options.minVelocity&&Math.abs(t.distanceY)>this.state.options.minDistance&&(n="up"==t.directionY?"$md.swipeup":"$md.swipedown",this.dispatchEvent(e,n))}})}function i(e){this.name=e,this.state={}}function o(){function n(e,n,r){r=r||p;var i=new t.element.Event(n);i.$material=!0,i.pointer=r,i.srcEvent=e,t.extend(i,{clientX:r.x,clientY:r.y,screenX:r.x,screenY:r.y,pageX:r.x,pageY:r.y,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}),t.element(r.target).trigger(i)}function r(t,n,r){r=r||p;var i;"click"===n||"mouseup"==n||"mousedown"==n?(i=document.createEvent("MouseEvents"),i.initMouseEvent(n,!0,!0,e,t.detail,r.x,r.y,r.x,r.y,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget||null)):(i=document.createEvent("CustomEvent"),i.initCustomEvent(n,!0,!0,{})),i.$material=!0,i.pointer=r,i.srcEvent=t,r.target.dispatchEvent(i)}var o="undefined"!=typeof e.jQuery&&t.element===e.jQuery;return i.prototype={options:{},dispatchEvent:o?n:r,onStart:t.noop,onMove:t.noop,onEnd:t.noop,onCancel:t.noop,start:function(e,n){if(!this.state.isRunning){var r=this.getNearestParent(e.target),i=r&&r.$mdGesture[this.name]||{};this.state={isRunning:!0,options:t.extend({},this.options,i),registeredParent:r},this.onStart(e,n)}},move:function(e,t){this.state.isRunning&&this.onMove(e,t)},end:function(e,t){this.state.isRunning&&(this.onEnd(e,t),this.state.isRunning=!1)},cancel:function(e,t){this.onCancel(e,t),this.state={}},getNearestParent:function(e){for(var t=e;t;){if((t.$mdGesture||{})[this.name])return t;t=t.parentNode}return null},registerElement:function(e,t){function n(){delete e[0].$mdGesture[r.name],e.off("$destroy",n)}var r=this;return e[0].$mdGesture=e[0].$mdGesture||{},e[0].$mdGesture[this.name]=t||{},e.on("$destroy",n),n}},i}function a(e,n){function r(e){var t=!e.clientX&&!e.clientY;t||e.$material||e.isIonicTap||u(e)||(e.preventDefault(),e.stopPropagation())}function i(e){var t=0===e.clientX&&0===e.clientY;t||e.$material||e.isIonicTap||u(e)?(g=null,"label"==e.target.tagName.toLowerCase()&&(g={x:e.x,y:e.y})):(e.preventDefault(),e.stopPropagation(),g=null)}function o(e,t){var r;for(var i in h)r=h[i],r instanceof n&&("start"===e&&r.cancel(),r[e](t,p))}function a(e){if(!p){var t=+Date.now();d&&!c(e,d)&&t-d.endTime<1500||(p=s(e),o("start",e))}}function f(e){p&&c(e,p)&&(l(e,p),o("move",e))}function m(e){p&&c(e,p)&&(l(e,p),p.endTime=+Date.now(),o("end",e),d=p,p=null)}document.contains||(document.contains=function(e){return document.body.contains(e)}),!y&&e.isHijackingClicks&&(document.addEventListener("click",i,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("focus",r,!0),y=!0);var v="mousedown touchstart pointerdown",b="mousemove touchmove pointermove",S="mouseup mouseleave touchend touchcancel pointerup pointercancel";t.element(document).on(v,a).on(b,f).on(S,m).on("$$mdGestureReset",function(){d=p=null})}function s(e){var t=f(e),n={startTime:+Date.now(),target:e.target,type:e.type.charAt(0)};return n.startX=n.x=t.pageX,n.startY=n.y=t.pageY,n}function c(e,t){return e&&t&&e.type.charAt(0)===t.type}function u(e){return g&&g.x==e.x&&g.y==e.y}function l(e,t){var n=f(e),r=t.x=n.pageX,i=t.y=n.pageY;t.distanceX=r-t.startX,t.distanceY=i-t.startY,t.distance=Math.sqrt(t.distanceX*t.distanceX+t.distanceY*t.distanceY),t.directionX=t.distanceX>0?"right":t.distanceX<0?"left":"",t.directionY=t.distanceY>0?"down":t.distanceY<0?"up":"",t.duration=+Date.now()-t.startTime,t.velocityX=t.distanceX/t.duration,t.velocityY=t.distanceY/t.duration}function f(e){return e=e.originalEvent||e,e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e}var p,d,h={},m=!1,g=null,y=!1;t.module("material.core.gestures",[]).provider("$mdGesture",n).factory("$$MdGestureHandler",o).run(a),n.prototype={skipClickHijack:function(){return m=!0},$get:["$$MdGestureHandler","$$rAF","$timeout",function(e,t,n){return new r(e,t,n)}]},r.$inject=["$$MdGestureHandler","$$rAF","$timeout"],a.$inject=["$mdGesture","$$MdGestureHandler"]}(),function(){function e(){function e(e){function n(e){return c.optionsFactory=e.options,c.methods=(e.methods||[]).concat(a),u}function r(e,t){return s[e]=t,u}function i(t,n){if(n=n||{},n.methods=n.methods||[],n.options=n.options||function(){return{}},/^cancel|hide|show$/.test(t))throw new Error("Preset '"+t+"' in "+e+" is reserved!");if(n.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+e+" is reserved!");return c.presets[t]={methods:n.methods.concat(a),optionsFactory:n.options,argOption:n.argOption},u}function o(n,r){function i(e){return e=e||{},e._options&&(e=e._options),f.show(t.extend({},l,e))}function o(e){return f.destroy(e)}function a(t,n){var i={};return i[e]=p,r.invoke(t||function(){return n},{},i)}var u,l,f=n(),p={hide:f.hide,cancel:f.cancel,show:i,destroy:o};return u=c.methods||[],l=a(c.optionsFactory,{}),t.forEach(s,function(e,t){p[t]=e}),t.forEach(c.presets,function(e,n){function r(e){this._options=t.extend({},i,e)}var i=a(e.optionsFactory,{}),o=(e.methods||[]).concat(u);if(t.extend(i,{$type:n}),t.forEach(o,function(e){r.prototype[e]=function(t){return this._options[e]=t,this}}),e.argOption){var s="show"+n.charAt(0).toUpperCase()+n.slice(1);p[s]=function(e){var t=p[n](e);return p.show(t)}}p[n]=function(n){return arguments.length&&e.argOption&&!t.isObject(n)&&!t.isArray(n)?(new r)[e.argOption](n):new r(n)}}),p}var a=["onHide","onShow","onRemove"],s={},c={presets:{}},u={setDefaults:n,addPreset:i,addMethod:r,$get:o};return u.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),o.$inject=["$$interimElement","$injector"],u}function r(e,r,i,o,a,s,c,u,l,f,p){return function(){function d(e){e=e||{};var t=new y(e||{}),n=!e.skipHide&&S.length?v.cancel():r.when(!0);return n.finally(function(){S.push(t),t.show().catch(function(e){return e})}),t.deferred.promise}function h(e,t){function i(n){return n.remove(e,!1,t||{}).catch(function(e){return e}),n.deferred.promise}if(!S.length)return r.when(e);if(t=t||{},t.closeAll){var o=r.all(S.reverse().map(i));return S=[],o}if(t.closeTo!==n)return r.all(S.splice(t.closeTo).map(i));var a=S.pop();return i(a)}function m(e,n){var i=S.pop();return i?(i.remove(e,!0,n||{}).catch(function(e){return e}),i.deferred.promise.catch(t.noop)):r.when(e)}function g(e){var n=e?null:S.shift(),i=t.element(e).length?t.element(e)[0].parentNode:null;if(i){var o=S.filter(function(e){var t=e.options.element[0];return t===i});o.length>0&&(n=o[0],S.splice(S.indexOf(n),1))}return n?n.remove(b,!1,{$destroy:!0}):r.when(b)}function y(p){function d(){return r(function(e,t){function n(e){T.deferred.reject(e),t(e)}g(p).then(function(t){E=y(t,p),w=_(E,p,t.controller).then(e,n)},n)})}function h(e,n,i){function o(e){T.deferred.resolve(e)}function a(e){T.deferred.reject(e)}return E?(p=t.extend(p||{},i||{}),p.cancelAutoHide&&p.cancelAutoHide(),p.element.triggerHandler("$mdInterimElementRemove"),p.$destroy===!0?O(p.element,p).then(function(){n&&a(e)||o(e)}):(r.when(w).finally(function(){O(p.element,p).then(function(){n&&a(e)||o(e)},a)}),T.deferred.promise)):r.when(!1)}function m(e){return e=e||{},e.template&&(e.template=u.processTemplate(e.template)),t.extend({preserveScope:!1,cancelAutoHide:t.noop,scope:e.scope||o.$new(e.isolateScope),onShow:function(e,t,n){return c.enter(t,n.parent)},onRemove:function(e,t){return t&&c.leave(t)||r.when()}},e)}function g(e){var t=e.skipCompile?null:l.compile(e);return t||r(function(t){t({locals:{},link:function(){return e.element}})})}function y(e,n){t.extend(e.locals,n);var r=e.link(n.scope);return n.element=r,n.parent=b(r,n),n.themable&&f(r),r}function b(n,r){var i=r.parent;if(i=t.isFunction(i)?i(r.scope,n,r):t.isString(i)?t.element(e[0].querySelector(i)):t.element(i),!(i||{}).length){var o;return s[0]&&s[0].querySelector&&(o=s[0].querySelector(":not(svg) > body")),o||(o=s[0]),"#comment"==o.nodeName&&(o=e[0].body),t.element(o)}return i}function S(){var e,r=t.noop;p.hideDelay&&(e=a(v.hide,p.hideDelay),r=function(){a.cancel(e)}),p.cancelAutoHide=function(){r(),p.cancelAutoHide=n}}function _(e,n,i){var o=n.onShowing||t.noop,a=n.onComplete||t.noop;return o(n.scope,e,n,i),r(function(t,o){try{r.when(n.onShow(n.scope,e,n,i)).then(function(){a(n.scope,e,n),S(),t(e)},o)}catch(e){o(e.message)}})}function O(e,n){var r=n.onRemoving||t.noop;return i(function(t,o){try{var a=i.when(n.onRemove(n.scope,e,n)||!0);r(e,a),1==n.$destroy?t(e):a.then(function(){!n.preserveScope&&n.scope&&n.scope.$destroy(),t(e)},o)}catch(e){o(e)}})}var T,E,w=r.when(!0);return p=m(p),T={options:p,deferred:r.defer(),show:d,remove:h}}var v,b=!1,S=[];return v={show:d,hide:h,cancel:m,destroy:g,$injector_:p}}}return e.$get=r,r.$inject=["$document","$q","$$q","$rootScope","$timeout","$rootElement","$animate","$mdUtil","$mdCompiler","$mdTheming","$injector"],e}t.module("material.core").provider("$$interimElement",e)}(),function(){!function(){function e(e){function a(e){return e.replace(c,"").replace(u,function(e,t,n,r){return r?n.toUpperCase():n})}var c=/^((?:x|data)[\:\-_])/i,u=/([\:\-\_]+(.))/g,l=["","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","print"],f=["layout","flex","flex-order","flex-offset","layout-align"],p=["show","hide","layout-padding","layout-margin"];t.forEach(l,function(n){t.forEach(f,function(t){var r=n?t+"-"+n:t;e.directive(a(r),i(r))}),t.forEach(p,function(t){var r=n?t+"-"+n:t;e.directive(a(r),o(r))})}),e.directive("mdLayoutCss",n).directive("ngCloak",r("ng-cloak")).directive("layoutWrap",o("layout-wrap")).directive("layoutNowrap",o("layout-nowrap")).directive("layoutNoWrap",o("layout-no-wrap")).directive("layoutFill",o("layout-fill")).directive("layoutLtMd",s("layout-lt-md",!0)).directive("layoutLtLg",s("layout-lt-lg",!0)).directive("flexLtMd",s("flex-lt-md",!0)).directive("flexLtLg",s("flex-lt-lg",!0)).directive("layoutAlignLtMd",s("layout-align-lt-md")).directive("layoutAlignLtLg",s("layout-align-lt-lg")).directive("flexOrderLtMd",s("flex-order-lt-md")).directive("flexOrderLtLg",s("flex-order-lt-lg")).directive("offsetLtMd",s("flex-offset-lt-md")).directive("offsetLtLg",s("flex-offset-lt-lg")).directive("hideLtMd",s("hide-lt-md")).directive("hideLtLg",s("hide-lt-lg")).directive("showLtMd",s("show-lt-md")).directive("showLtLg",s("show-lt-lg"))}function n(){return{restrict:"A",priority:"900",compile:function(e,n){return E.enabled=!1,t.noop}}}function r(e){return["$timeout",function(n){return{restrict:"A",priority:-10,compile:function(r){return E.enabled?(r.addClass(e),function(t,r){n(function(){r.removeClass(e)},10,!1)}):t.noop}}}]}function i(e){function n(t,n,r){var i=a(n,e,r),o=r.$observe(r.$normalize(e),i);i(p(e,r,"")),t.$on("$destroy",function(){o()})}return["$mdUtil","$interpolate","$log",function(r,i,o){return m=r,g=i,y=o,{restrict:"A",compile:function(r,i){var o;return E.enabled&&(c(e,i,r,y),u(e,p(e,i,""),l(r,e,i)),o=n),o||t.noop}}}]}function o(e){function n(t,n){n.addClass(e)}return["$mdUtil","$interpolate","$log",function(r,i,o){return m=r,g=i,y=o,{restrict:"A",compile:function(r,i){var o;return E.enabled&&(u(e,p(e,i,""),l(r,e,i)),n(null,r),o=n),o||t.noop}}}]}function a(e,n){var r;return function(i){var o=u(n,i||"");t.isDefined(o)&&(r&&e.removeClass(r),r=o?n+"-"+o.replace(b,"-"):n,e.addClass(r))}}function s(e){var n=e.split("-");return["$log",function(r){return r.warn(e+"has been deprecated. Please use a `"+n[0]+"-gt-<xxx>` variant."),t.noop}]}function c(e,t,n,r){var i,o,a,s=n[0].nodeName.toLowerCase();switch(e.replace(v,"")){case"flex":"md-button"!=s&&"fieldset"!=s||(o="<"+s+" "+e+"></"+s+">",a="https://github.com/philipwalton/flexbugs#9-some-html-elements-cant-be-flex-containers",i="Markup '{0}' may not work as expected in IE Browsers. Consult '{1}' for details.",r.warn(m.supplant(i,[o,a])))}}function u(e,n,r){var i=n;if(!f(n)){switch(e.replace(v,"")){case"layout":d(n,_)||(n=_[0]);break;case"flex":d(n,S)||isNaN(n)&&(n="");break;case"flex-offset":case"flex-order":n&&!isNaN(+n)||(n="0");break;case"layout-align":var o=h(n);n=m.supplant("{main}-{cross}",o);break;case"layout-padding":case"layout-margin":case"layout-fill":case"layout-wrap":case"layout-nowrap":case"layout-nowrap":n=""}n!=i&&(r||t.noop)(n)}return n}function l(e,t,n){return function(e){f(e)||(n[n.$normalize(t)]=e)}}function f(e){return(e||"").indexOf(g.startSymbol())>-1}function p(e,t,n){var r=t.$normalize(e);return t[r]?t[r].replace(b,"-"):n||null}function d(e,t,n){e=n&&e?e.replace(b,n):e;var r=!1;return e&&t.forEach(function(t){t=n?t.replace(b,n):t,r=r||t===e}),r}function h(e){var t,n={main:"start",cross:"stretch"};return e=e||"",0!=e.indexOf("-")&&0!=e.indexOf(" ")||(e="none"+e),t=e.toLowerCase().trim().replace(b,"-").split("-"),t.length&&"space"===t[0]&&(t=[t[0]+"-"+t[1],t[2]]),t.length>0&&(n.main=t[0]||n.main),t.length>1&&(n.cross=t[1]||n.cross),O.indexOf(n.main)<0&&(n.main="start"),T.indexOf(n.cross)<0&&(n.cross="stretch"),n}var m,g,y,v=/(-gt)?-(sm|md|lg|print)/g,b=/\s+/g,S=["grow","initial","auto","none","noshrink","nogrow"],_=["row","column"],O=["","start","center","end","stretch","space-around","space-between"],T=["","start","center","end","stretch"],E={enabled:!0,breakpoints:[]};e(t.module("material.core.layout",["ng"]))}()}(),function(){function e(e,r){function i(e){return e&&""!==e}var o,a=[],s={};return o={notFoundError:function(t,n){e.error((n||"")+"No instance found for handle",t)},getInstances:function(){return a},get:function(e){if(!i(e))return null;var t,n,r;for(t=0,n=a.length;t<n;t++)if(r=a[t],r.$$mdHandle===e)return r;return null},register:function(e,n){function r(){var t=a.indexOf(e);t!==-1&&a.splice(t,1)}function i(){var t=s[n];t&&(t.forEach(function(t){t.resolve(e)}),delete s[n])}return n?(e.$$mdHandle=n,a.push(e),i(),r):t.noop},when:function(e){if(i(e)){var t=r.defer(),a=o.get(e);return a?t.resolve(a):(s[e]===n&&(s[e]=[]),s[e].push(t)),t.promise}return r.reject("Invalid `md-component-id` value.")}}}t.module("material.core").factory("$mdComponentRegistry",e),e.$inject=["$log","$q"]}(),function(){!function(){function e(e){function n(e){return e.hasClass("md-icon-button")?{isMenuItem:e.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:e.hasClass("md-menu-item"),dimBackground:!0}}return{attach:function(r,i,o){return o=t.extend(n(i),o),e.attach(r,i,o)}}}t.module("material.core").factory("$mdButtonInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function n(n,r,i){return e.attach(n,r,t.extend({center:!0,dimBackground:!1,fitRipple:!0},i))}return{attach:n}}t.module("material.core").factory("$mdCheckboxInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function n(n,r,i){return e.attach(n,r,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},i))}return{attach:n}}t.module("material.core").factory("$mdListInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){function e(e,n){return{controller:t.noop,link:function(t,r,i){i.hasOwnProperty("mdInkRippleCheckbox")?n.attach(t,r):e.attach(t,r)}}}function n(){function e(){n=!0}var n=!1;return{disableInkRipple:e,$get:["$injector",function(e){function i(i,o,a){return n||o.controller("mdNoInk")?t.noop:e.instantiate(r,{$scope:i,$element:o,rippleOptions:a})}return{attach:i}}]}}function r(e,n,r,i,o,a,s){this.$window=i,this.$timeout=o,this.$mdUtil=a,this.$mdColorUtil=s,this.$scope=e,this.$element=n,this.options=r,this.mousedown=!1,this.ripples=[],this.timeout=null,this.lastRipple=null,a.valueOnUse(this,"container",this.createContainer),this.$element.addClass("md-ink-ripple"),(n.controller("mdInkRipple")||{}).createRipple=t.bind(this,this.createRipple),(n.controller("mdInkRipple")||{}).setColor=t.bind(this,this.color),this.bindEvents()}function i(e,n){(e.mousedown||e.lastRipple)&&(e.mousedown=!1,e.$mdUtil.nextTick(t.bind(e,n),!1))}function o(){return{controller:t.noop}}t.module("material.core").provider("$mdInkRipple",n).directive("mdInkRipple",e).directive("mdNoInk",o).directive("mdNoBar",o).directive("mdNoStretch",o);var a=450;e.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],r.$inject=["$scope","$element","rippleOptions","$window","$timeout","$mdUtil","$mdColorUtil"],r.prototype.color=function(e){function n(){var e=r.options&&r.options.colorElement?r.options.colorElement:[],t=e.length?e[0]:r.$element[0];return t?r.$window.getComputedStyle(t).color:"rgb(0,0,0)"}var r=this;return t.isDefined(e)&&(r._color=r._parseColor(e)),r._color||r._parseColor(r.inkRipple())||r._parseColor(n())},r.prototype.calculateColor=function(){return this.color()},r.prototype._parseColor=function(e,t){t=t||1;var n=this.$mdColorUtil;if(e)return 0===e.indexOf("rgba")?e.replace(/\d?\.?\d*\s*\)\s*$/,(.1*t).toString()+")"):0===e.indexOf("rgb")?n.rgbToRgba(e):0===e.indexOf("#")?n.hexToRgba(e):void 0},r.prototype.bindEvents=function(){this.$element.on("mousedown",t.bind(this,this.handleMousedown)),this.$element.on("mouseup touchend",t.bind(this,this.handleMouseup)),this.$element.on("mouseleave",t.bind(this,this.handleMouseup)),this.$element.on("touchmove",t.bind(this,this.handleTouchmove))},r.prototype.handleMousedown=function(e){if(!this.mousedown)if(e.hasOwnProperty("originalEvent")&&(e=e.originalEvent),this.mousedown=!0,this.options.center)this.createRipple(this.container.prop("clientWidth")/2,this.container.prop("clientWidth")/2);else if(e.srcElement!==this.$element[0]){var t=this.$element[0].getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;this.createRipple(n,r)}else this.createRipple(e.offsetX,e.offsetY)},r.prototype.handleMouseup=function(){i(this,this.clearRipples)},r.prototype.handleTouchmove=function(){i(this,this.deleteRipples)},r.prototype.deleteRipples=function(){for(var e=0;e<this.ripples.length;e++)this.ripples[e].remove()},r.prototype.clearRipples=function(){for(var e=0;e<this.ripples.length;e++)this.fadeInComplete(this.ripples[e])},r.prototype.createContainer=function(){var e=t.element('<div class="md-ripple-container"></div>');return this.$element.append(e),e},r.prototype.clearTimeout=function(){this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},r.prototype.isRippleAllowed=function(){var e=this.$element[0];do{if(!e.tagName||"BODY"===e.tagName)break;if(e&&t.isFunction(e.hasAttribute)){if(e.hasAttribute("disabled"))return!1;if("false"===this.inkRipple()||"0"===this.inkRipple())return!1}}while(e=e.parentNode);return!0},r.prototype.inkRipple=function(){return this.$element.attr("md-ink-ripple")},r.prototype.createRipple=function(e,n){function r(e,t,n){return e?Math.max(t,n):Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}if(this.isRippleAllowed()){var i=this,o=i.$mdColorUtil,s=t.element('<div class="md-ripple"></div>'),c=this.$element.prop("clientWidth"),u=this.$element.prop("clientHeight"),l=2*Math.max(Math.abs(c-e),e),f=2*Math.max(Math.abs(u-n),n),p=r(this.options.fitRipple,l,f),d=this.calculateColor();s.css({left:e+"px",top:n+"px",background:"black",width:p+"px",height:p+"px",backgroundColor:o.rgbaToRgb(d),borderColor:o.rgbaToRgb(d)}),this.lastRipple=s,this.clearTimeout(),this.timeout=this.$timeout(function(){i.clearTimeout(),i.mousedown||i.fadeInComplete(s)},.35*a,!1),this.options.dimBackground&&this.container.css({backgroundColor:d}),this.container.append(s),this.ripples.push(s),s.addClass("md-ripple-placed"),this.$mdUtil.nextTick(function(){s.addClass("md-ripple-scaled md-ripple-active"),i.$timeout(function(){i.clearRipples()},a,!1)},!1)}},r.prototype.fadeInComplete=function(e){this.lastRipple===e?this.timeout||this.mousedown||this.removeRipple(e):this.removeRipple(e)},r.prototype.removeRipple=function(e){var t=this,n=this.ripples.indexOf(e);n<0||(this.ripples.splice(this.ripples.indexOf(e),1),e.removeClass("md-ripple-active"),0===this.ripples.length&&this.container.css({backgroundColor:""}),this.$timeout(function(){t.fadeOutComplete(e)},a,!1))},r.prototype.fadeOutComplete=function(e){e.remove(),this.lastRipple=null}}(),function(){!function(){function e(e){function n(n,r,i){return e.attach(n,r,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},i))}return{attach:n}}t.module("material.core").factory("$mdTabInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){t.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100",contrastStrongLightColors:"400 500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A700",contrastStrongLightColors:"600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",
600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A200 A400 A700"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200",contrastStrongLightColors:"400 500 700"}})}(),function(){function e(e){function r(e,t){return t=t||{},f[e]=a(e,t),y}function i(e,n){return a(e,t.extend({},f[e]||{},n))}function a(e,t){var n=E.filter(function(e){return!t[e]});if(n.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",n.join(", ")).replace("%2",e));return t}function c(e,n){if(v[e])return v[e];n=n||"default";var r="string"==typeof n?v[n]:n,i=new u(e);return r&&t.forEach(r.colors,function(e,n){i.colors[n]={name:e.name,hues:t.extend({},e.hues)}}),v[e]=i,i}function u(e){function n(e){if(e=0===arguments.length||!!e,e!==r.isDark){r.isDark=e,r.foregroundPalette=r.isDark?h:d,r.foregroundShadow=r.isDark?m:g;var n=r.isDark?T:O,i=r.isDark?O:T;return t.forEach(n,function(e,t){var n=r.colors[t],o=i[t];if(n)for(var a in n.hues)n.hues[a]===o[a]&&(n.hues[a]=e[a])}),r}}var r=this;r.name=e,r.colors={},r.dark=n,n(!1),S.forEach(function(e){var n=(r.isDark?T:O)[e];r[e+"Palette"]=function(i,o){var a=r.colors[e]={name:i,hues:t.extend({},n,o)};return Object.keys(a.hues).forEach(function(e){if(!n[e])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",e).replace("%2",r.name).replace("%3",i).replace("%4",Object.keys(n).join(", ")))}),Object.keys(a.hues).map(function(e){return a.hues[e]}).forEach(function(t){if(E.indexOf(t)==-1)throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",t).replace("%2",r.name).replace("%3",e).replace("%4",i).replace("%5",E.join(", ")))}),r},r[e+"Color"]=function(){var t=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+e+"Color() has been deprecated. Use $mdThemingProviderTheme."+e+"Palette() instead."),r[e+"Palette"].apply(r,t)}})}function p(e,r){function i(e){return e===n||""===e||a.THEMES[e]!==n}function o(n,o){function a(){return c=o.controller("mdTheme")||n.data("$mdThemeController"),c&&c.$mdTheme||("default"==b?"":b)}function s(e){if(e){i(e)||r.warn("Attempted to use unregistered theme '"+e+"'. Register it with $mdThemingProvider.theme().");var t=n.data("$mdThemeName");t&&n.removeClass("md-"+t+"-theme"),n.addClass("md-"+e+"-theme"),n.data("$mdThemeName",e),c&&n.data("$mdThemeController",c)}}var c=o.controller("mdTheme"),u=n.attr("md-theme-watch"),l=(_||t.isDefined(u))&&"false"!=u;s(a()),n.on("$destroy",l?e.$watch(a,s):t.noop)}var a=function(t,r){r===n&&(r=t,t=n),t===n&&(t=e),a.inherit(r,r)};return a.THEMES=t.extend({},v),a.PALETTES=t.extend({},f),a.inherit=o,a.registered=i,a.defaultTheme=function(){return b},a.generateTheme=function(e){s(v[e],e,I)},a}f={};var y,v={},b="default",_=!1;return t.extend(f,e),p.$inject=["$rootScope","$log"],y={definePalette:r,extendPalette:i,theme:c,disableTheming:function(){R=!0},setNonce:function(e){I=e},setDefaultTheme:function(e){b=e},alwaysWatchTheme:function(e){_=e},generateThemesOnDemand:function(e){w=e},$get:p,_LIGHT_DEFAULT_HUES:O,_DARK_DEFAULT_HUES:T,_PALETTES:f,_THEMES:v,_parseRules:o,_rgba:l}}function r(e,n,r){return{priority:100,link:{pre:function(i,o,a){var s=[],c={registerChanges:function(e,n){return n&&(e=t.bind(n,e)),s.push(e),function(){var t=s.indexOf(e);t>-1&&s.splice(t,1)}},$setTheme:function(t){e.registered(t)||r.warn("attempted to use unregistered theme '"+t+"'"),c.$mdTheme=t,s.forEach(function(e){e()})}};o.data("$mdThemeController",c),c.$setTheme(n(a.mdTheme)(i)),a.$observe("mdTheme",c.$setTheme)}}}}function i(e){return e}function o(e,n,r){c(e,n),r=r.replace(/THEME_NAME/g,e.name);var i=[],o=e.colors[n],a=new RegExp(".md-"+e.name+"-theme","g"),s=new RegExp("('|\")?{{\\s*("+n+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),u=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow|default)-?(\d\.?\d*)?(contrast)?\s*\}\}'?"?/g,p=f[o.name];return r=r.replace(u,function(t,n,r,i,o){return"foreground"===n?"shadow"==r?e.foregroundShadow:e.foregroundPalette[r]||e.foregroundPalette[1]:(0!==r.indexOf("hue")&&"default"!==r||(r=e.colors[n].hues[r]),l((f[e.colors[n].name][r]||"")[o?"contrast":"value"],i))}),t.forEach(o.hues,function(t,n){var o=r.replace(s,function(e,n,r,i,o){return l(p[t]["color"===i?"value":"contrast"],o)});if("default"!==n&&(o=o.replace(a,".md-"+e.name+"-theme.md-"+n)),"default"==e.name){var c=/((?:(?:(?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)+) )?)((?:(?:\w|\.|-)+)?)\.md-default-theme((?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)/g;o=o.replace(c,function(e,t,n,r){return e+", "+t+n+r})}i.push(o)}),i}function a(e,n){function r(e,n){var r=e.contrastDefaultColor,i=e.contrastLightColors||[],o=e.contrastStrongLightColors||[],a=e.contrastDarkColors||[];"string"==typeof i&&(i=i.split(" ")),"string"==typeof o&&(o=o.split(" ")),"string"==typeof a&&(a=a.split(" ")),delete e.contrastDefaultColor,delete e.contrastLightColors,delete e.contrastStrongLightColors,delete e.contrastDarkColors,t.forEach(e,function(n,s){function c(){return"light"===r?a.indexOf(s)>-1?y:o.indexOf(s)>-1?b:v:i.indexOf(s)>-1?o.indexOf(s)>-1?b:v:y}if(!t.isObject(n)){var l=u(n);if(!l)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",n).replace("%2",e.name).replace("%3",s));e[s]={value:l,contrast:c()}}})}var i=document.head,o=i?i.firstElementChild:null,a=!R&&e.has("$MD_THEME_CSS")?e.get("$MD_THEME_CSS"):"";if(o&&0!==a.length){t.forEach(f,r);var c=a.split(/\}(?!(\}|'|"|;))/).filter(function(e){return e&&e.length}).map(function(e){return e.trim()+"}"}),l=new RegExp("md-("+S.join("|")+")","g");S.forEach(function(e){P[e]=""}),c.forEach(function(e){for(var t,n=(e.match(l),0);t=S[n];n++)if(e.indexOf(".md-"+t)>-1)return P[t]+=e;for(n=0;t=S[n];n++)if(e.indexOf(t)>-1)return P[t]+=e;return P[_]+=e}),w||t.forEach(n.THEMES,function(e){p[e.name]||"default"!==n.defaultTheme()&&"default"===e.name||s(e,e.name,I)})}}function s(e,t,n){var r=document.head,i=r?r.firstElementChild:null;p[t]||(S.forEach(function(t){for(var a=o(e,t,P[t]);a.length;){var s=a.shift();if(s){var c=document.createElement("style");c.setAttribute("md-theme-style",""),n&&c.setAttribute("nonce",n),c.appendChild(document.createTextNode(s)),r.insertBefore(c,i)}}}),p[e.name]=!0)}function c(e,t){if(!f[(e.colors[t]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",e.name).replace("%2",t).replace("%3",Object.keys(f).join(", ")))}function u(e){if(t.isArray(e)&&3==e.length)return e;if(/^rgb/.test(e))return e.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(e,t){return 3==t?parseFloat(e,10):parseInt(e,10)});if("#"==e.charAt(0)&&(e=e.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(e)){var n=e.length/3,r=e.substr(0,n),i=e.substr(n,n),o=e.substr(2*n);return 1===n&&(r+=r,i+=i,o+=o),[parseInt(r,16),parseInt(i,16),parseInt(o,16)]}}function l(e,n){return e?(4==e.length&&(e=t.copy(e),n?e.pop():n=e.pop()),n&&("number"==typeof n||"string"==typeof n&&n.length)?"rgba("+e.join(",")+","+n+")":"rgb("+e.join(",")+")"):"rgb('0,0,0')"}t.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",r).directive("mdThemable",i).provider("$mdTheming",e).run(a);var f,p={},d={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.38)",4:"rgba(0,0,0,0.12)"},h={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.5)",4:"rgba(255,255,255,0.12)"},m="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",g="",y=u("rgba(0,0,0,0.87)"),v=u("rgba(255,255,255,0.87)"),b=u("rgb(255,255,255)"),S=["primary","accent","warn","background"],_="primary",O={accent:{default:"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{default:"50","hue-1":"A100","hue-2":"100","hue-3":"300"}},T={background:{default:"A400","hue-1":"800","hue-2":"900","hue-3":"A200"}};S.forEach(function(e){var t={default:"500","hue-1":"300","hue-2":"800","hue-3":"A100"};O[e]||(O[e]=t),T[e]||(T[e]=t)});var E=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],w=!1,I=null,R=!1;e.$inject=["$mdColorPalette"],r.$inject=["$mdTheming","$interpolate","$log"],i.$inject=["$mdTheming"];var P={};a.$inject=["$injector","$mdTheming"]}(),function(){function n(n,r,i,o,a){var s;return s={translate3d:function(e,t,n,r){function i(n){return a(e,{to:n||t,addClass:r.transitionOutClass,removeClass:r.transitionInClass}).start()}return a(e,{from:t,to:n,addClass:r.transitionInClass,removeClass:r.transitionOutClass}).start().then(function(){return i})},waitTransitionEnd:function(t,n){var a=3e3;return r(function(r,s){function c(e){e&&e.target!==t[0]||(e&&i.cancel(l),t.off(o.CSS.TRANSITIONEND,c),r())}function u(n){return n=n||e.getComputedStyle(t[0]),"0s"==n.transitionDuration||!n.transition&&!n.transitionProperty}n=n||{},u(n.cachedTransitionStyles)&&(a=0);var l=i(c,n.timeout||a);t.on(o.CSS.TRANSITIONEND,c)})},calculateTransformValues:function(e,t){function n(){var t=e?e.parent():null,n=t?t.parent():null;return n?s.clientRect(n):null}var r=t.element,i=t.bounds;if(r||i){var o=r?s.clientRect(r)||n():s.copyRect(i),a=s.copyRect(e[0].getBoundingClientRect()),c=s.centerPointFor(a),u=s.centerPointFor(o);return{centerX:u.x-c.x,centerY:u.y-c.y,scaleX:Math.round(100*Math.min(.5,o.width/a.width))/100,scaleY:Math.round(100*Math.min(.5,o.height/a.height))/100}}return{centerX:0,centerY:0,scaleX:.5,scaleY:.5}},calculateZoomToOrigin:function(e,r){var i="translate3d( {centerX}px, {centerY}px, 0 ) scale( {scaleX}, {scaleY} )",o=t.bind(null,n.supplant,i);return o(s.calculateTransformValues(e,r))},calculateSlideToOrigin:function(e,r){var i="translate3d( {centerX}px, {centerY}px, 0 )",o=t.bind(null,n.supplant,i);return o(s.calculateTransformValues(e,r))},toCss:function(e){function n(e,n,i){t.forEach(n.split(" "),function(e){r[e]=i})}var r={},i="left top right bottom width height x y min-width min-height max-width max-height";return t.forEach(e,function(e,a){if(!t.isUndefined(e))if(i.indexOf(a)>=0)r[a]=e+"px";else switch(a){case"transition":n(a,o.CSS.TRANSITION,e);break;case"transform":n(a,o.CSS.TRANSFORM,e);break;case"transformOrigin":n(a,o.CSS.TRANSFORM_ORIGIN,e)}}),r},toTransformCss:function(e,n,r){var i={};return t.forEach(o.CSS.TRANSFORM.split(" "),function(t){i[t]=e}),n&&(r=r||"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important",i.transition=r),i},copyRect:function(e,n){return e?(n=n||{},t.forEach("left top right bottom width height".split(" "),function(t){n[t]=Math.round(e[t])}),n.width=n.width||n.right-n.left,n.height=n.height||n.bottom-n.top,n):null},clientRect:function(e){var n=t.element(e)[0].getBoundingClientRect(),r=function(e){return e&&e.width>0&&e.height>0};return r(n)?s.copyRect(n):null},centerPointFor:function(e){return e?{x:Math.round(e.left+e.width/2),y:Math.round(e.top+e.height/2)}:{x:0,y:0}}}}t.module("material.core").factory("$$mdAnimate",["$q","$timeout","$mdConstant","$animateCss",function(e,t,r,i){return function(o){return n(o,e,t,r,i)}}])}(),function(){t.version.minor>=4?t.module("material.core.animate",[]):!function(){function e(e){return e.replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()})}var n=t.forEach,r=t.isDefined(document.documentElement.style.WebkitAppearance),i=r?"-webkit-":"",o=(r?"webkitTransitionEnd ":"")+"transitionend",a=(r?"webkitAnimationEnd ":"")+"animationend",s=["$document",function(e){return function(){return e[0].body.clientWidth+1}}],c=["$$rAF",function(e){return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}],u=["$q","$$rAFMutex",function(e,r){function i(e){this.setHost(e),this._doneCallbacks=[],this._runInAnimationFrame=r(),this._state=0}var o=0,a=1,s=2;return i.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===s?e():this._doneCallbacks.push(e)},progress:t.noop,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===o&&(t._state=a,t._runInAnimationFrame(function(){t._resolve(e)}))},_resolve:function(e){this._state!==s&&(n(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=s)}},i}];t.module("material.core.animate",[]).factory("$$forceReflow",s).factory("$$AnimateRunner",u).factory("$$rAFMutex",c).factory("$animateCss",["$window","$$rAF","$$AnimateRunner","$$forceReflow","$$jqLite","$timeout","$animate",function(t,s,c,u,l,f,p){function d(r,s){var u=[],l=_(r),d=l&&p.enabled(),g=!1,T=!1;d&&(s.transitionStyle&&u.push([i+"transition",s.transitionStyle]),s.keyframeStyle&&u.push([i+"animation",s.keyframeStyle]),s.delay&&u.push([i+"transition-delay",s.delay+"s"]),s.duration&&u.push([i+"transition-duration",s.duration+"s"]),g=s.keyframeStyle||s.to&&(s.duration>0||s.transitionStyle),T=!!s.addClass||!!s.removeClass,O(r,!0));var E=d&&(g||T);b(r,s);var w,I,R=!1;return{close:t.close,start:function(){function t(){if(!R)return R=!0,w&&I&&r.off(w,I),h(r,s),v(r,s),n(u,function(t){l.style[e(t[0])]=""}),p.complete(!0),p}var p=new c;return y(function(){if(O(r,!1),!E)return t();n(u,function(t){var n=t[0],r=t[1];l.style[e(n)]=r}),h(r,s);var c=m(r);if(0===c.duration)return t();var p=[];s.easing&&(c.transitionDuration&&p.push([i+"transition-timing-function",s.easing]),c.animationDuration&&p.push([i+"animation-timing-function",s.easing])),s.delay&&c.animationDelay&&p.push([i+"animation-delay",s.delay+"s"]),s.duration&&c.animationDuration&&p.push([i+"animation-duration",s.duration+"s"]),n(p,function(t){var n=t[0],r=t[1];l.style[e(n)]=r,u.push(t)});var d=c.delay,g=1e3*d,y=c.duration,v=1e3*y,b=Date.now();w=[],c.transitionDuration&&w.push(o),c.animationDuration&&w.push(a),w=w.join(" "),I=function(e){e.stopPropagation();var n=e.originalEvent||e,r=n.timeStamp||Date.now(),i=parseFloat(n.elapsedTime.toFixed(3));Math.max(r-b,0)>=g&&i>=y&&t()},r.on(w,I),S(r,s),f(t,g+1.5*v,!1)}),p}}}function h(e,t){t.addClass&&(l.addClass(e,t.addClass),t.addClass=null),t.removeClass&&(l.removeClass(e,t.removeClass),t.removeClass=null)}function m(e){function n(e){return r?"Webkit"+e.charAt(0).toUpperCase()+e.substr(1):e}var i=_(e),o=t.getComputedStyle(i),a=g(o[n("transitionDuration")]),s=g(o[n("animationDuration")]),c=g(o[n("transitionDelay")]),u=g(o[n("animationDelay")]);s*=parseInt(o[n("animationIterationCount")],10)||1;var l=Math.max(s,a),f=Math.max(u,c);return{duration:l,delay:f,animationDuration:s,transitionDuration:a,animationDelay:u,transitionDelay:c}}function g(e){var t=0,r=(e||"").split(/\s*,\s*/);return n(r,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function y(e){T&&T(),E.push(e),T=s(function(){T=null;for(var e=u(),t=0;t<E.length;t++)E[t](e);E.length=0})}function v(e,t){b(e,t),S(e,t)}function b(e,t){t.from&&(e.css(t.from),t.from=null)}function S(e,t){t.to&&(e.css(t.to),t.to=null)}function _(e){for(var t=0;t<e.length;t++)if(1===e[t].nodeType)return e[t]}function O(t,n){var r=_(t),o=e(i+"transition-delay");r.style[o]=n?"-9999s":""}var T,E=[];return d}])}()}(),function(){t.module("material.components.autocomplete",["material.core","material.components.icon","material.components.virtualRepeat"])}(),function(){t.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",["$mdTheming","$mdUtil","$animate","$rootElement","$window","$log","$$rAF","$document",function(e,t,n,r,i,o,a,s){function c(t,c,l){n.pin&&n.pin(c,r),a(function(){var t=i.getComputedStyle(s[0].body);if("fixed"==t.position){var n=parseInt(t.height,10)+Math.abs(parseInt(t.top,10));c.css({height:n+"px"})}var r=c.parent()[0];if(r){"BODY"==r.nodeName&&c.css({position:"fixed"});var a=i.getComputedStyle(r);"static"==a.position&&o.warn(u)}c.parent().length&&e.inherit(c,c.parent())})}var u="<md-backdrop> may not work properly in a scrolled, static-positioned parent container.";return{restrict:"E",link:c}}])}(),function(){function e(e){return{restrict:"E",link:function(t,n){e(n)}}}function n(e,n,r,i){function o(e){return t.isDefined(e.href)||t.isDefined(e.ngHref)||t.isDefined(e.ngLink)||t.isDefined(e.uiSref)}function a(e,t){if(o(t))return'<a class="md-button" ng-transclude></a>';var n="undefined"==typeof t.type?"button":t.type;return'<button class="md-button" type="'+n+'" ng-transclude></button>'}function s(a,s,c){n(s),e.attach(a,s),r.expectWithText(s,"aria-label"),o(c)&&t.isDefined(c.ngDisabled)&&a.$watch(c.ngDisabled,function(e){s.attr("tabindex",e?-1:0)}),s.on("click",function(e){c.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),t.isDefined(c.mdNoFocusStyle)||(a.mouseActive=!1,s.on("mousedown",function(){a.mouseActive=!0,i(function(){a.mouseActive=!1},100)}).on("focus",function(){a.mouseActive===!1&&s.addClass("md-focused")}).on("blur",function(e){s.removeClass("md-focused")}))}return{restrict:"EA",replace:!0,transclude:!0,template:a,link:s}}t.module("material.components.button",["material.core"]).directive("mdButton",n).directive("a",e),e.$inject=["$mdTheming"],n.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$timeout"]}(),function(){function e(e){return{restrict:"E",link:function(t,n){n.addClass("_md"),t.$on("$destroy",function(){e.destroy()})}}}function n(e){function n(e,n,o,a,s,c,u){function l(r,i,u,l){i=o.extractElementByName(i,"md-bottom-sheet"),i.attr("tabindex","-1"),u.disableBackdrop||(d=o.createBackdrop(r,"_md-bottom-sheet-backdrop md-opaque"),d[0].tabIndex=-1,u.clickOutsideToClose&&d.on("click",function(){o.nextTick(s.cancel,!0)}),a.inherit(d,u.parent),e.enter(d,u.parent,null));var f=new p(i,u.parent);return u.bottomSheet=f,a.inherit(f.element,u.parent),u.disableParentScroll&&(u.restoreScroll=o.disableScrollAround(f.element,u.parent)),e.enter(f.element,u.parent,d).then(function(){var e=o.findFocusTarget(i)||t.element(i[0].querySelector("button")||i[0].querySelector("a")||i[0].querySelector(o.prefixer("ng-click",!0)))||d;u.escapeToClose&&(u.rootElementKeyupCallback=function(e){e.keyCode===n.KEY_CODE.ESCAPE&&o.nextTick(s.cancel,!0)},c.on("keyup",u.rootElementKeyupCallback),e&&e.focus())})}function f(t,n,r){var i=r.bottomSheet;return r.disableBackdrop||e.leave(d),e.leave(i.element).then(function(){r.disableParentScroll&&(r.restoreScroll(),delete r.restoreScroll),i.cleanup()})}function p(e,t){function a(t){e.css(n.CSS.TRANSITION_DURATION,"0ms")}function c(t){var r=t.pointer.distanceY;r<5&&(r=Math.max(-i,r/2)),e.css(n.CSS.TRANSFORM,"translate3d(0,"+(i+r)+"px,0)")}function l(t){if(t.pointer.distanceY>0&&(t.pointer.distanceY>20||Math.abs(t.pointer.velocityY)>r)){var i=e.prop("offsetHeight")-t.pointer.distanceY,a=Math.min(i/t.pointer.velocityY*.75,500);e.css(n.CSS.TRANSITION_DURATION,a+"ms"),o.nextTick(s.cancel,!0)}else e.css(n.CSS.TRANSITION_DURATION,""),e.css(n.CSS.TRANSFORM,"")}var f=u.register(t,"drag",{horizontal:!1});return t.on("$md.dragstart",a).on("$md.drag",c).on("$md.dragend",l),{element:e,cleanup:function(){f(),t.off("$md.dragstart",a),t.off("$md.drag",c),t.off("$md.dragend",l)}}}var d;return{themable:!0,onShow:l,onRemove:f,disableBackdrop:!1,escapeToClose:!0,clickOutsideToClose:!0,disableParentScroll:!0}}var r=.5,i=80;return n.$inject=["$animate","$mdConstant","$mdUtil","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture"],e("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","clickOutsideToClose"],options:n})}t.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",e).provider("$mdBottomSheet",n),e.$inject=["$mdBottomSheet"],n.$inject=["$$interimElementProvider"]}(),function(){function e(e){return{restrict:"E",link:function(t,n,r){n.addClass("_md"),e(n)}}}t.module("material.components.card",["material.core"]).directive("mdCard",e),e.$inject=["$mdTheming"]}(),function(){function e(e,n,r,i,o,a){function s(s,u){var l=s.children(),f=o.parseAttributeBoolean(u.mdIndeterminate);return u.$set("tabindex",u.tabindex||"0"),u.$set("type","checkbox"),u.$set("role",u.type),s.on("click",function(e){this.hasAttribute("disabled")&&e.stopImmediatePropagation()}),l.on("focus",function(){s.focus()}),function(s,u,l,p){function d(e,t,n){l[e]&&s.$watch(l[e],function(e){n[e]&&u.attr(t,n[e])})}function h(e){var t=e.which||e.keyCode;t!==r.KEY_CODE.SPACE&&t!==r.KEY_CODE.ENTER||(e.preventDefault(),u.hasClass("md-focused")||u.addClass("md-focused"),m(e))}function m(e){u[0].hasAttribute("disabled")||s.$apply(function(){var t=l.ngChecked?l.checked:!p.$viewValue;p.$setViewValue(t,e&&e.type),p.$render()})}function g(){p.$viewValue&&!v?u.addClass(c):u.removeClass(c)}function y(e){v=e!==!1,v&&u.attr("aria-checked","mixed"),u.toggleClass("md-indeterminate",v)}var v;p=p||o.fakeNgModel(),i(u),f&&(y(),s.$watch(l.mdIndeterminate,y)),l.ngChecked&&s.$watch(s.$eval.bind(s,l.ngChecked),p.$setViewValue.bind(p)),d("ngDisabled","tabindex",{true:"-1",false:l.tabindex}),n.expectWithText(u,"aria-label"),e.link.pre(s,{on:t.noop,0:{}},l,[p]),s.mouseActive=!1,u.on("click",m).on("keypress",h).on("mousedown",function(){s.mouseActive=!0,a(function(){s.mouseActive=!1},100)}).on("focus",function(){s.mouseActive===!1&&u.addClass("md-focused")}).on("blur",function(){u.removeClass("md-focused")}),p.$render=g}}e=e[0];var c="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",priority:210,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-icon"></div></div><div ng-transclude class="_md-label"></div>',compile:s}}t.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",e),e.$inject=["inputDirective","$mdAria","$mdConstant","$mdTheming","$mdUtil","$timeout"]}(),function(){t.module("material.components.chips",["material.core","material.components.autocomplete"])}(),function(){!function(){function e(e,n,r){function i(e,t){try{e.css(c(t))}catch(e){r.error(e.message)}}function a(e){var t=l(e);return s(t)}function s(t,r){r=r||!1;var i=e.PALETTES[t.palette][t.hue];return i=r?i.contrast:i.value,n.supplant("rgba( {0}, {1}, {2}, {3} )",[i[0],i[1],i[2],i[3]||t.opacity])}function c(e){var n={},r=e.hasOwnProperty("color");return t.forEach(e,function(e,t){var i=l(e),o=t.indexOf("background")>-1;n[t]=s(i),o&&!r&&(n.color=s(i,!0))}),n}function u(n){return t.isDefined(e.THEMES[n.split("-")[0]])}function l(n){var r=n.split("-"),i=t.isDefined(e.THEMES[r[0]]),o=i?r.splice(0,1)[0]:e.defaultTheme();return{theme:o,palette:f(r,o),hue:p(r,o),opacity:r[2]||1}}function f(t,r){var i=t.length>1&&o.indexOf(t[1])!==-1,a=t[0].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(i&&(a=t[0]+"-"+t.splice(1,1)),o.indexOf(a)===-1){var s=e.THEMES[r].colors[a];if(!s)throw new Error(n.supplant("mdColors: couldn't find '{palette}' in the palettes.",{palette:a}));a=s.name}return a}function p(t,r){var i=e.THEMES[r].colors;if("hue"===t[1]){var o=parseInt(t.splice(2,1)[0],10);if(o<1||o>3)throw new Error(n.supplant("mdColors: 'hue-{hueNumber}' is not a valid hue, can be only 'hue-1', 'hue-2' and 'hue-3'",{hueNumber:o}));if(t[1]="hue-"+o,!(t[0]in i))throw new Error(n.supplant("mdColors: 'hue-x' can only be used with [{availableThemes}], but was used with '{usedTheme}'",{availableThemes:Object.keys(i).join(", "),usedTheme:t[0]}));return i[t[0]].hues[t[1]]}return t[1]||i[t[0]in i?t[0]:"primary"].hues.default}return o=o||Object.keys(e.PALETTES),{applyThemeColors:i,getThemeColor:a,hasTheme:u}}function r(e,n,r,o){return{restrict:"A",require:["^?mdTheme"],compile:function(a,s){function c(){var e=s.mdColors,r=e.indexOf("::")>-1,o=!!r||i.test(s.mdColors);s.mdColors=e.replace("::","");var a=t.isDefined(s.mdColorsWatch);return!r&&!o&&(!a||n.parseAttributeBoolean(s.mdColorsWatch))}var u=c();return function(n,i,a,s){var c=s[0],l=function(t){var r=o(a.mdColors)(n);return c&&Object.keys(r).forEach(function(n){var i=r[n];e.hasTheme(i)||(r[n]=(t||c.$mdTheme)+"-"+i)}),r},f=t.noop;c&&(f=c.registerChanges(function(t){e.applyThemeColors(i,l(t))})),n.$on("destroy",function(){f()});try{u?n.$watch(l,t.bind(this,e.applyThemeColors,i),!0):e.applyThemeColors(i,l())}catch(e){r.error(e.message)}}}}}var i=/^{((\s|,)*?["'a-zA-Z-]+?\s*?:\s*?('|")[a-zA-Z0-9-.]*('|"))+\s*}$/,o=n;t.module("material.components.colors",["material.core"]).directive("mdColors",r).service("$mdColors",e),e.$inject=["$mdTheming","$mdUtil","$log"],r.$inject=["$mdColors","$mdUtil","$log","$parse"]}()}(),function(){function e(e){function t(e,t){this.$scope=e,this.$element=t}return{restrict:"E",controller:["$scope","$element",t],link:function(t,r){r.addClass("_md"),e(r),t.$broadcast("$mdContentLoaded",r),n(r[0])}}}function n(e){t.element(e).on("$md.pressdown",function(t){"t"===t.pointer.type&&(t.$materialScrollFixed||(t.$materialScrollFixed=!0,0===e.scrollTop?e.scrollTop=1:e.scrollHeight===e.scrollTop+e.offsetHeight&&(e.scrollTop-=1)))})}t.module("material.components.content",["material.core"]).directive("mdContent",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(){return{template:function(e,t){var n=t.hasOwnProperty("ngIf")?"":'ng-if="calendarCtrl.isInitialized"',r='<div ng-switch="calendarCtrl.currentView" '+n+'><md-calendar-year ng-switch-when="year"></md-calendar-year><md-calendar-month ng-switch-default></md-calendar-month></div>';return r},scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",dateFilter:"=mdDateFilter",_currentView:"@mdCurrentView"},require:["ngModel","mdCalendar"],controller:n,controllerAs:"calendarCtrl",bindToController:!0,link:function(e,t,n,r){var i=r[0],o=r[1];o.configureNgModel(i)}}}function n(e,n,r,o,a,s,c,u){s(e),this.$element=e,this.$scope=n,this.dateUtil=r,this.$mdUtil=o,this.keyCode=a.KEY_CODE,this.$$rAF=c,this.today=this.dateUtil.createDateAtMidnight(),this.ngModelCtrl=null,this.currentView=this._currentView||"month",this.SELECTED_DATE_CLASS="md-calendar-selected-date",this.TODAY_CLASS="md-calendar-date-today",this.FOCUSED_DATE_CLASS="md-focus",this.id=i++,this.displayDate=null,this.selectedDate=null,this.isInitialized=!1,this.width=0,this.scrollbarWidth=0,u.tabindex||e.attr("tabindex","-1"),e.on("keydown",t.bind(this,this.handleKeyEvent))}t.module("material.components.datepicker",["material.core","material.components.icon","material.components.virtualRepeat"]).directive("mdCalendar",e);var r=340,i=0;n.$inject=["$element","$scope","$$mdDateUtil","$mdUtil","$mdConstant","$mdTheming","$$rAF","$attrs"],n.prototype.configureNgModel=function(e){var t=this;t.ngModelCtrl=e,t.$mdUtil.nextTick(function(){t.isInitialized=!0}),e.$render=function(){var e=this.$viewValue;t.$scope.$broadcast("md-calendar-parent-changed",e),t.selectedDate||(t.selectedDate=e),t.displayDate||(t.displayDate=t.selectedDate||t.today)}},n.prototype.setNgModelValue=function(e){var t=this.dateUtil.createDateAtMidnight(e);return this.focus(t),this.$scope.$emit("md-calendar-change",t),this.ngModelCtrl.$setViewValue(t),this.ngModelCtrl.$render(),t},n.prototype.setCurrentView=function(e,n){var r=this;r.$mdUtil.nextTick(function(){r.currentView=e,n&&(r.displayDate=t.isDate(n)?n:new Date(n))})},n.prototype.focus=function(e){if(this.dateUtil.isValidDate(e)){var t=this.$element[0].querySelector(".md-focus");t&&t.classList.remove(this.FOCUSED_DATE_CLASS);var n=this.getDateId(e,this.currentView),r=document.getElementById(n);r&&(r.classList.add(this.FOCUSED_DATE_CLASS),r.focus(),this.displayDate=e)}else{var i=this.$element[0].querySelector("[ng-switch]");i&&i.focus()}},n.prototype.getActionFromKeyEvent=function(e){var t=this.keyCode;switch(e.which){case t.ENTER:return"select";case t.RIGHT_ARROW:return"move-right";case t.LEFT_ARROW:return"move-left";case t.DOWN_ARROW:return e.metaKey?"move-page-down":"move-row-down";case t.UP_ARROW:return e.metaKey?"move-page-up":"move-row-up";case t.PAGE_DOWN:return"move-page-down";case t.PAGE_UP:return"move-page-up";case t.HOME:return"start";case t.END:return"end";default:return null}},n.prototype.handleKeyEvent=function(e){var t=this;this.$scope.$apply(function(){if(e.which==t.keyCode.ESCAPE||e.which==t.keyCode.TAB)return t.$scope.$emit("md-calendar-close"),void(e.which==t.keyCode.TAB&&e.preventDefault());var n=t.getActionFromKeyEvent(e);n&&(e.preventDefault(),e.stopPropagation(),t.$scope.$broadcast("md-calendar-parent-action",n))})},n.prototype.hideVerticalScrollbar=function(e){function t(){var t=n.width||r,i=n.scrollbarWidth,a=e.calendarScroller;o.style.width=t+"px",a.style.width=t+i+"px",a.style.paddingRight=i+"px"}var n=this,i=e.$element[0],o=i.querySelector(".md-calendar-scroll-mask");n.width>0?t():n.$$rAF(function(){var r=e.calendarScroller;n.scrollbarWidth=r.offsetWidth-r.clientWidth,n.width=i.querySelector("table").offsetWidth,t()})},n.prototype.getDateId=function(e,t){if(!t)throw new Error("A namespace for the date id has to be specified.");return["md",this.id,t,e.getFullYear(),e.getMonth(),e.getDate()].join("-")},n.prototype.updateVirtualRepeat=function(){var e=this.$scope,t=e.$on("$md-resize-enable",function(){e.$$phase||e.$apply(),t()})}}()}(),function(){!function(){function e(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table><div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container" md-offset-size="'+(i-r)+'"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-month-body role="rowgroup" md-virtual-repeat="i in monthCtrl.items" md-month-offset="$index" class="md-calendar-month" md-start-index="monthCtrl.getSelectedMonthIndex()" md-item-size="'+r+'"></tbody></table></md-virtual-repeat-container></div>',require:["^^mdCalendar","mdCalendarMonth"],controller:n,controllerAs:"monthCtrl",bindToController:!0,link:function(e,t,n,r){var i=r[0],o=r[1];o.initialize(i)}}}function n(e,t,n,r,i,o){this.$element=e,this.$scope=t,this.$animate=n,this.$q=r,this.dateUtil=i,this.dateLocale=o,this.calendarScroller=e[0].querySelector(".md-virtual-repeat-scroller"),this.firstRenderableDate=null,this.isInitialized=!1,this.isMonthTransitionInProgress=!1;var a=this;this.cellClickHandler=function(){var e=i.getTimestampFromNode(this);a.$scope.$apply(function(){a.calendarCtrl.setNgModelValue(e)})},this.headerClickHandler=function(){a.calendarCtrl.setCurrentView("year",i.getTimestampFromNode(this))}}t.module("material.components.datepicker").directive("mdCalendarMonth",e);var r=265,i=45;n.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$mdDateLocale"],n.prototype.initialize=function(e){var t=e.minDate,n=e.maxDate;if(this.calendarCtrl=e,this.items={length:2e3},n&&t){var r=this.dateUtil.getMonthDistance(t,n)+1;r=Math.max(r,1),r+=1,this.items.length=r}if(this.firstRenderableDate=this.dateUtil.incrementMonths(e.today,-this.items.length/2),t&&t>this.firstRenderableDate)this.firstRenderableDate=t;else if(n){this.items.length-2;this.firstRenderableDate=this.dateUtil.incrementMonths(n,-(this.items.length-2))}this.attachScopeListeners(),e.updateVirtualRepeat(),e.ngModelCtrl&&e.ngModelCtrl.$render()},n.prototype.getSelectedMonthIndex=function(){var e=this.calendarCtrl;return this.dateUtil.getMonthDistance(this.firstRenderableDate,e.displayDate||e.selectedDate||e.today)},n.prototype.changeSelectedDate=function(e){var t=this,n=t.calendarCtrl,r=n.selectedDate;n.selectedDate=e,this.changeDisplayDate(e).then(function(){var t=n.SELECTED_DATE_CLASS,i="month";
if(r){var o=document.getElementById(n.getDateId(r,i));o&&(o.classList.remove(t),o.setAttribute("aria-selected","false"))}if(e){var a=document.getElementById(n.getDateId(e,i));a&&(a.classList.add(t),a.setAttribute("aria-selected","true"))}})},n.prototype.changeDisplayDate=function(e){if(!this.isInitialized)return this.buildWeekHeader(),this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(!this.dateUtil.isValidDate(e)||this.isMonthTransitionInProgress)return this.$q.when();this.isMonthTransitionInProgress=!0;var t=this.animateDateChange(e);this.calendarCtrl.displayDate=e;var n=this;return t.then(function(){n.isMonthTransitionInProgress=!1}),t},n.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var t=this.dateUtil.getMonthDistance(this.firstRenderableDate,e);this.calendarScroller.scrollTop=t*r}return this.$q.when()},n.prototype.buildWeekHeader=function(){for(var e=this.dateLocale.firstDayOfWeek,t=this.dateLocale.shortDays,n=document.createElement("tr"),r=0;r<7;r++){var i=document.createElement("th");i.textContent=t[(r+e)%7],n.appendChild(i)}this.$element.find("thead").append(n)},n.prototype.attachScopeListeners=function(){var e=this;e.$scope.$on("md-calendar-parent-changed",function(t,n){e.changeSelectedDate(n)}),e.$scope.$on("md-calendar-parent-action",t.bind(this,this.handleKeyEvent))},n.prototype.handleKeyEvent=function(e,t){var n=this.calendarCtrl,r=n.displayDate;if("select"===t)n.setNgModelValue(r);else{var i=null,o=this.dateUtil;switch(t){case"move-right":i=o.incrementDays(r,1);break;case"move-left":i=o.incrementDays(r,-1);break;case"move-page-down":i=o.incrementMonths(r,1);break;case"move-page-up":i=o.incrementMonths(r,-1);break;case"move-row-down":i=o.incrementDays(r,7);break;case"move-row-up":i=o.incrementDays(r,-7);break;case"start":i=o.getFirstDateOfMonth(r);break;case"end":i=o.getLastDateOfMonth(r)}i&&(i=this.dateUtil.clampDate(i,n.minDate,n.maxDate),this.changeDisplayDate(i).then(function(){n.focus(i)}))}}}()}(),function(){!function(){function e(e,t){var r=e('<md-icon md-svg-src="'+t.mdTabsArrow+'"></md-icon>')({})[0];return{require:["^^mdCalendar","^^mdCalendarMonth","mdCalendarMonthBody"],scope:{offset:"=mdMonthOffset"},controller:n,controllerAs:"mdMonthBodyCtrl",bindToController:!0,link:function(e,t,n,i){var o=i[0],a=i[1],s=i[2];s.calendarCtrl=o,s.monthCtrl=a,s.arrowIcon=r.cloneNode(!0),e.$watch(function(){return s.offset},function(e,t){e!==t&&s.generateContent()})}}}function n(e,t,n){this.$element=e,this.dateUtil=t,this.dateLocale=n,this.monthCtrl=null,this.calendarCtrl=null,this.offset=null,this.focusAfterAppend=null}t.module("material.components.datepicker").directive("mdCalendarMonthBody",e),e.$inject=["$compile","$$mdSvgRegistry"],n.$inject=["$element","$$mdDateUtil","$mdDateLocale"],n.prototype.generateContent=function(){var e=this.dateUtil.incrementMonths(this.monthCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForMonth(e)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},n.prototype.buildDateCell=function(e){var t=this.monthCtrl,n=this.calendarCtrl,r=document.createElement("td");if(r.tabIndex=-1,r.classList.add("md-calendar-date"),r.setAttribute("role","gridcell"),e){r.setAttribute("tabindex","-1"),r.setAttribute("aria-label",this.dateLocale.longDateFormatter(e)),r.id=n.getDateId(e,"month"),r.setAttribute("data-timestamp",e.getTime()),this.dateUtil.isSameDay(e,n.today)&&r.classList.add(n.TODAY_CLASS),this.dateUtil.isValidDate(n.selectedDate)&&this.dateUtil.isSameDay(e,n.selectedDate)&&(r.classList.add(n.SELECTED_DATE_CLASS),r.setAttribute("aria-selected","true"));var i=this.dateLocale.dates[e.getDate()];if(this.isDateEnabled(e)){var o=document.createElement("span");o.classList.add("md-calendar-date-selection-indicator"),o.textContent=i,r.appendChild(o),r.addEventListener("click",t.cellClickHandler),n.displayDate&&this.dateUtil.isSameDay(e,n.displayDate)&&(this.focusAfterAppend=r)}else r.classList.add("md-calendar-date-disabled"),r.textContent=i}return r},n.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!t.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(e))},n.prototype.buildDateRow=function(e){var t=document.createElement("tr");return t.setAttribute("role","row"),t.setAttribute("aria-label",this.dateLocale.weekNumberFormatter(e)),t},n.prototype.buildCalendarForMonth=function(e){var t=this.dateUtil.isValidDate(e)?e:new Date,n=this.dateUtil.getFirstDateOfMonth(t),r=this.getLocaleDay_(n),i=this.dateUtil.getNumberOfDaysInMonth(t),o=document.createDocumentFragment(),a=1,s=this.buildDateRow(a);o.appendChild(s);var c=this.offset===this.monthCtrl.items.length-1,u=0,l=document.createElement("td"),f=document.createElement("span");if(f.textContent=this.dateLocale.monthHeaderFormatter(t),l.appendChild(f),l.classList.add("md-calendar-month-label"),this.calendarCtrl.maxDate&&n>this.calendarCtrl.maxDate?l.classList.add("md-calendar-month-label-disabled"):(l.addEventListener("click",this.monthCtrl.headerClickHandler),l.setAttribute("data-timestamp",n.getTime()),l.setAttribute("aria-label",this.dateLocale.monthFormatter(t)),l.appendChild(this.arrowIcon.cloneNode(!0))),r<=2){l.setAttribute("colspan","7");var p=this.buildDateRow();if(p.appendChild(l),o.insertBefore(p,s),c)return o}else u=3,l.setAttribute("colspan","3"),s.appendChild(l);for(var d=u;d<r;d++)s.appendChild(this.buildDateCell());for(var h=r,m=n,g=1;g<=i;g++){if(7===h){if(c)return o;h=0,a++,s=this.buildDateRow(a),o.appendChild(s)}m.setDate(g);var y=this.buildDateCell(m);s.appendChild(y),h++}for(;s.childNodes.length<7;)s.appendChild(this.buildDateCell());for(;o.childNodes.length<6;){for(var v=this.buildDateRow(),b=0;b<7;b++)v.appendChild(this.buildDateCell());o.appendChild(v)}return o},n.prototype.getLocaleDay_=function(e){return(e.getDay()+(7-this.dateLocale.firstDayOfWeek))%7}}()}(),function(){!function(){function e(){return{template:'<div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-year-body role="rowgroup" md-virtual-repeat="i in yearCtrl.items" md-year-offset="$index" class="md-calendar-year" md-start-index="yearCtrl.getFocusedYearIndex()" md-item-size="'+r+'"></tbody></table></md-virtual-repeat-container></div>',require:["^^mdCalendar","mdCalendarYear"],controller:n,controllerAs:"yearCtrl",bindToController:!0,link:function(e,t,n,r){var i=r[0],o=r[1];o.initialize(i)}}}function n(e,t,n,r,i){this.$element=e,this.$scope=t,this.$animate=n,this.$q=r,this.dateUtil=i,this.calendarScroller=e[0].querySelector(".md-virtual-repeat-scroller"),this.firstRenderableDate=null,this.isInitialized=!1,this.isMonthTransitionInProgress=!1;var o=this;this.cellClickHandler=function(){o.calendarCtrl.setCurrentView("month",i.getTimestampFromNode(this))}}t.module("material.components.datepicker").directive("mdCalendarYear",e);var r=88;n.$inject=["$element","$scope","$animate","$q","$$mdDateUtil"],n.prototype.initialize=function(e){var t=e.minDate,n=e.maxDate;if(this.calendarCtrl=e,this.items={length:400},this.firstRenderableDate=this.dateUtil.incrementYears(e.today,-(this.items.length/2)),t&&t>this.firstRenderableDate?this.firstRenderableDate=t:n&&(this.firstRenderableDate=this.dateUtil.incrementMonths(n,-(this.items.length-1))),n&&t){var r=this.dateUtil.getYearDistance(this.firstRenderableDate,n)+1;this.items.length=Math.max(r,1)}this.attachScopeListeners(),e.updateVirtualRepeat(),e.ngModelCtrl&&e.ngModelCtrl.$render()},n.prototype.getFocusedYearIndex=function(){var e=this.calendarCtrl;return this.dateUtil.getYearDistance(this.firstRenderableDate,e.displayDate||e.selectedDate||e.today)},n.prototype.changeDate=function(e){if(!this.isInitialized)return this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(this.dateUtil.isValidDate(e)&&!this.isMonthTransitionInProgress){var t=this,n=this.animateDateChange(e);return t.isMonthTransitionInProgress=!0,t.calendarCtrl.displayDate=e,n.then(function(){t.isMonthTransitionInProgress=!1})}},n.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var t=this.dateUtil.getYearDistance(this.firstRenderableDate,e);this.calendarScroller.scrollTop=t*r}return this.$q.when()},n.prototype.handleKeyEvent=function(e,t){var n=this.calendarCtrl,r=n.displayDate;if("select"===t)this.changeDate(r).then(function(){n.setCurrentView("month",r),n.focus(r)});else{var i=null,o=this.dateUtil;switch(t){case"move-right":i=o.incrementMonths(r,1);break;case"move-left":i=o.incrementMonths(r,-1);break;case"move-row-down":i=o.incrementMonths(r,6);break;case"move-row-up":i=o.incrementMonths(r,-6)}if(i){var a=n.minDate?o.incrementMonths(o.getFirstDateOfMonth(n.minDate),1):null,s=n.maxDate?o.getFirstDateOfMonth(n.maxDate):null;i=o.getFirstDateOfMonth(this.dateUtil.clampDate(i,a,s)),this.changeDate(i).then(function(){n.focus(i)})}}},n.prototype.attachScopeListeners=function(){var e=this;e.$scope.$on("md-calendar-parent-changed",function(t,n){e.changeDate(n)}),e.$scope.$on("md-calendar-parent-action",t.bind(e,e.handleKeyEvent))}}()}(),function(){!function(){function e(){return{require:["^^mdCalendar","^^mdCalendarYear","mdCalendarYearBody"],scope:{offset:"=mdYearOffset"},controller:n,controllerAs:"mdYearBodyCtrl",bindToController:!0,link:function(e,t,n,r){var i=r[0],o=r[1],a=r[2];a.calendarCtrl=i,a.yearCtrl=o,e.$watch(function(){return a.offset},function(e,t){e!==t&&a.generateContent()})}}}function n(e,t,n){this.$element=e,this.dateUtil=t,this.dateLocale=n,this.calendarCtrl=null,this.yearCtrl=null,this.offset=null,this.focusAfterAppend=null}t.module("material.components.datepicker").directive("mdCalendarYearBody",e),n.$inject=["$element","$$mdDateUtil","$mdDateLocale"],n.prototype.generateContent=function(){var e=this.dateUtil.incrementYears(this.yearCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForYear(e)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},n.prototype.buildMonthCell=function(e,t){var n=this.calendarCtrl,r=this.yearCtrl,i=this.buildBlankCell(),o=new Date(e,t,1);i.setAttribute("aria-label",this.dateLocale.monthFormatter(o)),i.id=n.getDateId(o,"year"),i.setAttribute("data-timestamp",o.getTime()),this.dateUtil.isSameMonthAndYear(o,n.today)&&i.classList.add(n.TODAY_CLASS),this.dateUtil.isValidDate(n.selectedDate)&&this.dateUtil.isSameMonthAndYear(o,n.selectedDate)&&(i.classList.add(n.SELECTED_DATE_CLASS),i.setAttribute("aria-selected","true"));var a=this.dateLocale.shortMonths[t];if(this.dateUtil.isMonthWithinRange(o,n.minDate,n.maxDate)){var s=document.createElement("span");s.classList.add("md-calendar-date-selection-indicator"),s.textContent=a,i.appendChild(s),i.addEventListener("click",r.cellClickHandler),n.displayDate&&this.dateUtil.isSameMonthAndYear(o,n.displayDate)&&(this.focusAfterAppend=i)}else i.classList.add("md-calendar-date-disabled"),i.textContent=a;return i},n.prototype.buildBlankCell=function(){var e=document.createElement("td");return e.tabIndex=-1,e.classList.add("md-calendar-date"),e.setAttribute("role","gridcell"),e.setAttribute("tabindex","-1"),e},n.prototype.buildCalendarForYear=function(e){var t,n=e.getFullYear(),r=document.createDocumentFragment(),i=document.createElement("tr"),o=document.createElement("td");for(o.className="md-calendar-month-label",o.textContent=n,i.appendChild(o),t=0;t<6;t++)i.appendChild(this.buildMonthCell(n,t));r.appendChild(i);var a=document.createElement("tr");for(a.appendChild(this.buildBlankCell()),t=6;t<12;t++)a.appendChild(this.buildMonthCell(n,t));return r.appendChild(a),r}}()}(),function(){!function(){t.module("material.components.datepicker").config(["$provide",function(e){function t(){this.months=null,this.shortMonths=null,this.days=null,this.shortDays=null,this.dates=null,this.firstDayOfWeek=0,this.formatDate=null,this.parseDate=null,this.monthHeaderFormatter=null,this.weekNumberFormatter=null,this.longDateFormatter=null,this.msgCalendar="",this.msgOpenCalendar=""}t.prototype.$get=function(e,t){function n(e){if(!e)return"";var n=e.toLocaleTimeString(),r=e;return 0!=e.getHours()||n.indexOf("11:")===-1&&n.indexOf("23:")===-1||(r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),1,0,0)),t("date")(r,"M/d/yyyy")}function r(e){return new Date(e)}function i(e){e=e.trim();var t=/^(([a-zA-Z]{3,}|[0-9]{1,4})([ \.,]+|[\/\-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/;return t.test(e)}function o(e){return h.shortMonths[e.getMonth()]+" "+e.getFullYear()}function a(e){return h.months[e.getMonth()]+" "+e.getFullYear()}function s(e){return"Week "+e}function c(e){return[h.days[e.getDay()],h.months[e.getMonth()],h.dates[e.getDate()],e.getFullYear()].join(" ")}for(var u=e.DATETIME_FORMATS.SHORTDAY.map(function(e){return e.substring(0,1)}),l=Array(32),f=1;f<=31;f++)l[f]=f;var p="Calendar",d="Open calendar",h={months:this.months||e.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||e.DATETIME_FORMATS.SHORTMONTH,days:this.days||e.DATETIME_FORMATS.DAY,shortDays:this.shortDays||u,dates:this.dates||l,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||n,parseDate:this.parseDate||r,isDateComplete:this.isDateComplete||i,monthHeaderFormatter:this.monthHeaderFormatter||o,monthFormatter:this.monthFormatter||a,weekNumberFormatter:this.weekNumberFormatter||s,longDateFormatter:this.longDateFormatter||c,msgCalendar:this.msgCalendar||p,msgOpenCalendar:this.msgOpenCalendar||d};return h},t.prototype.$get.$inject=["$locale","$filter"],e.provider("$mdDateLocale",new t)}])}()}(),function(){!function(){function n(e,n,i){return{template:function(t,n){var r=n.mdHideIcons,i="all"===r||"calendar"===r?"":'<md-button class="md-datepicker-button md-icon-button" type="button" tabindex="-1" aria-hidden="true" ng-click="ctrl.openCalendarPane($event)"><md-icon class="md-datepicker-calendar-icon" aria-label="md-calendar" md-svg-src="'+e.mdCalendar+'"></md-icon></md-button>',o="all"===r||"triangle"===r?"":'<md-button type="button" md-no-ink class="md-datepicker-triangle-button md-icon-button" ng-click="ctrl.openCalendarPane($event)" aria-label="{{::ctrl.dateLocale.msgOpenCalendar}}"><div class="md-datepicker-expand-triangle"></div></md-button>';return""+i+'<div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}"><input class="md-datepicker-input" aria-haspopup="true" ng-focus="ctrl.setFocused(true)" ng-blur="ctrl.setFocused(false)">'+o+'</div><div class="md-datepicker-calendar-pane md-whiteframe-z1"><div class="md-datepicker-input-mask"><div class="md-datepicker-input-mask-opaque"></div></div><div class="md-datepicker-calendar"><md-calendar role="dialog" aria-label="{{::ctrl.dateLocale.msgCalendar}}" md-current-view="{{::ctrl.currentView}}"md-min-date="ctrl.minDate"md-max-date="ctrl.maxDate"md-date-filter="ctrl.dateFilter"ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen"></md-calendar></div></div>'},require:["ngModel","mdDatepicker","?^mdInputContainer","?^form"],scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",placeholder:"@mdPlaceholder",currentView:"@mdCurrentView",dateFilter:"=mdDateFilter",isOpen:"=?mdIsOpen",debounceInterval:"=mdDebounceInterval"},controller:r,controllerAs:"ctrl",bindToController:!0,link:function(e,r,o,a){var u=a[0],l=a[1],f=a[2],p=a[3],d=n.parseAttributeBoolean(o.mdNoAsterisk);if(l.configureNgModel(u,f),f){var h=r[0].querySelector(".md-errors-spacer");h&&r.after(t.element("<div>").append(h)),f.setHasPlaceholder(o.mdPlaceholder),f.input=r,f.element.addClass(s).toggleClass(c,"calendar"!==o.mdHideIcons&&"all"!==o.mdHideIcons),f.label?d||o.$observe("required",function(e){f.label.toggleClass("md-required",!!e)}):i.expect(r,"aria-label",o.mdPlaceholder),e.$watch(f.isErrorGetter||function(){return u.$invalid&&(u.$touched||p&&p.$submitted)},f.setInvalid)}else if(p)var m=e.$watch(function(){return p.$submitted},function(e){e&&(l.updateErrorState(),m())})}}}function r(e,n,r,i,o,a,s,c,u,l,f){this.$window=i,this.dateLocale=c,this.dateUtil=u,this.$mdConstant=o,this.$mdUtil=s,this.$$rAF=l,this.documentElement=t.element(document.documentElement),this.ngModelCtrl=null,this.inputElement=n[0].querySelector("input"),this.ngInputElement=t.element(this.inputElement),this.inputContainer=n[0].querySelector(".md-datepicker-input-container"),this.calendarPane=n[0].querySelector(".md-datepicker-calendar-pane"),this.calendarButton=n[0].querySelector(".md-datepicker-button"),this.inputMask=n[0].querySelector(".md-datepicker-input-mask-opaque"),this.$element=n,this.$attrs=r,this.$scope=e,this.date=null,this.isFocused=!1,this.isDisabled,this.setDisabled(n[0].disabled||t.isString(r.disabled)),this.isCalendarOpen=!1,this.openOnFocus=r.hasOwnProperty("mdOpenOnFocus"),this.mdInputContainer=null,this.calendarPaneOpenedFrom=null,this.calendarPane.id="md-date-pane"+s.nextUid(),this.bodyClickHandler=t.bind(this,this.handleBodyClick),this.windowEventName=f.isIos||f.isAndroid?"orientationchange":"resize",this.windowEventHandler=s.debounce(t.bind(this,this.closeCalendarPane),100),this.windowBlurHandler=t.bind(this,this.handleWindowBlur),r.tabindex||n.attr("tabindex","-1"),a(n),a(t.element(this.calendarPane)),this.installPropertyInterceptors(),this.attachChangeListeners(),this.attachInteractionListeners();var p=this;e.$on("$destroy",function(){p.detachCalendarPane()}),r.mdIsOpen&&e.$watch("ctrl.isOpen",function(e){e?p.openCalendarPane({target:p.inputElement}):p.closeCalendarPane()})}t.module("material.components.datepicker").directive("mdDatepicker",n),n.$inject=["$$mdSvgRegistry","$mdUtil","$mdAria"];var i=3,o="md-datepicker-invalid",a="md-datepicker-open",s="_md-datepicker-floating-label",c="_md-datepicker-has-calendar-icon",u=500,l=368,f=360;r.$inject=["$scope","$element","$attrs","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF","$mdGesture"],r.prototype.configureNgModel=function(e,n){this.ngModelCtrl=e,this.mdInputContainer=n;var r=this;e.$render=function(){var e=r.ngModelCtrl.$viewValue;if(e&&!(e instanceof Date))throw Error("The ng-model for md-datepicker must be a Date instance. Currently the model is a: "+typeof e);r.date=e,r.inputElement.value=r.dateLocale.formatDate(e),r.mdInputContainer&&r.mdInputContainer.setHasValue(!!e),r.resizeInputElement(),r.updateErrorState()},e.$viewChangeListeners.unshift(t.bind(this,this.updateErrorState))},r.prototype.attachChangeListeners=function(){var e=this;e.$scope.$on("md-calendar-change",function(t,n){e.ngModelCtrl.$setViewValue(n),e.date=n,e.inputElement.value=e.dateLocale.formatDate(n),e.mdInputContainer&&e.mdInputContainer.setHasValue(!!n),e.closeCalendarPane(),e.resizeInputElement(),e.updateErrorState()}),e.ngInputElement.on("input",t.bind(e,e.resizeInputElement));var n=t.isDefined(this.debounceInterval)?this.debounceInterval:u;e.ngInputElement.on("input",e.$mdUtil.debounce(e.handleInputEvent,n,e))},r.prototype.attachInteractionListeners=function(){var e=this,n=this.$scope,r=this.$mdConstant.KEY_CODE;e.ngInputElement.on("keydown",function(t){t.altKey&&t.keyCode==r.DOWN_ARROW&&(e.openCalendarPane(t),n.$digest())}),e.openOnFocus&&(e.ngInputElement.on("focus",t.bind(e,e.openCalendarPane)),t.element(e.$window).on("blur",e.windowBlurHandler),n.$on("$destroy",function(){t.element(e.$window).off("blur",e.windowBlurHandler)})),n.$on("md-calendar-close",function(){e.closeCalendarPane()})},r.prototype.installPropertyInterceptors=function(){var e=this;if(this.$attrs.ngDisabled){var t=this.$scope.$parent;t&&t.$watch(this.$attrs.ngDisabled,function(t){e.setDisabled(t)})}Object.defineProperty(this,"placeholder",{get:function(){return e.inputElement.placeholder},set:function(t){e.inputElement.placeholder=t||""}})},r.prototype.setDisabled=function(e){this.isDisabled=e,this.inputElement.disabled=e,this.calendarButton&&(this.calendarButton.disabled=e)},r.prototype.updateErrorState=function(e){var n=e||this.date;if(this.clearErrorState(),this.dateUtil.isValidDate(n)){if(n=this.dateUtil.createDateAtMidnight(n),this.dateUtil.isValidDate(this.minDate)){var r=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity("mindate",n>=r)}if(this.dateUtil.isValidDate(this.maxDate)){var i=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity("maxdate",n<=i)}t.isFunction(this.dateFilter)&&this.ngModelCtrl.$setValidity("filtered",this.dateFilter(n))}else this.ngModelCtrl.$setValidity("valid",null==n);this.ngModelCtrl.$valid||this.inputContainer.classList.add(o)},r.prototype.clearErrorState=function(){this.inputContainer.classList.remove(o),["mindate","maxdate","filtered","valid"].forEach(function(e){this.ngModelCtrl.$setValidity(e,!0)},this)},r.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+i},r.prototype.handleInputEvent=function(){var e=this.inputElement.value,t=e?this.dateLocale.parseDate(e):null;this.dateUtil.setDateTimeToMidnight(t);var n=""==e||this.dateUtil.isValidDate(t)&&this.dateLocale.isDateComplete(e)&&this.isDateEnabled(t);n&&(this.ngModelCtrl.$setViewValue(t),this.date=t),this.updateErrorState(t)},r.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.minDate,this.maxDate)&&(!t.isFunction(this.dateFilter)||this.dateFilter(e))},r.prototype.attachCalendarPane=function(){var e=this.calendarPane,n=document.body;e.style.transform="",this.$element.addClass(a),this.mdInputContainer&&this.mdInputContainer.element.addClass(a),t.element(n).addClass("md-datepicker-is-showing");var r=this.inputContainer.getBoundingClientRect(),i=n.getBoundingClientRect(),o=r.top-i.top,s=r.left-i.left,c=i.top<0&&0==document.body.scrollTop?-i.top:document.body.scrollTop,u=i.left<0&&0==document.body.scrollLeft?-i.left:document.body.scrollLeft,p=c+this.$window.innerHeight,d=u+this.$window.innerWidth;if(s+f>d){if(d-f>0)s=d-f;else{s=u;var h=this.$window.innerWidth/f;e.style.transform="scale("+h+")"}e.classList.add("md-datepicker-pos-adjusted")}o+l>p&&p-l>c&&(o=p-l,e.classList.add("md-datepicker-pos-adjusted")),e.style.left=s+"px",e.style.top=o+"px",document.body.appendChild(e),this.inputMask.style.left=r.width+"px",this.$$rAF(function(){e.classList.add("md-pane-open")})},r.prototype.detachCalendarPane=function(){this.$element.removeClass(a),this.mdInputContainer&&this.mdInputContainer.element.removeClass(a),t.element(document.body).removeClass("md-datepicker-is-showing"),this.calendarPane.classList.remove("md-pane-open"),this.calendarPane.classList.remove("md-datepicker-pos-adjusted"),this.isCalendarOpen&&this.$mdUtil.enableScrolling(),this.calendarPane.parentNode&&this.calendarPane.parentNode.removeChild(this.calendarPane)},r.prototype.openCalendarPane=function(t){if(!this.isCalendarOpen&&!this.isDisabled&&!this.inputFocusedOnWindowBlur){this.isCalendarOpen=this.isOpen=!0,this.calendarPaneOpenedFrom=t.target,this.$mdUtil.disableScrollAround(this.calendarPane),this.attachCalendarPane(),this.focusCalendar(),this.evalAttr("ngFocus");var n=this;this.$mdUtil.nextTick(function(){n.documentElement.on("click touchstart",n.bodyClickHandler)},!1),e.addEventListener(this.windowEventName,this.windowEventHandler)}},r.prototype.closeCalendarPane=function(){function t(){n.isCalendarOpen=n.isOpen=!1}if(this.isCalendarOpen){var n=this;n.detachCalendarPane(),n.ngModelCtrl.$setTouched(),n.evalAttr("ngBlur"),n.documentElement.off("click touchstart",n.bodyClickHandler),e.removeEventListener(n.windowEventName,n.windowEventHandler),n.calendarPaneOpenedFrom.focus(),n.calendarPaneOpenedFrom=null,n.openOnFocus?n.$mdUtil.nextTick(t):t()}},r.prototype.getCalendarCtrl=function(){return t.element(this.calendarPane.querySelector("md-calendar")).controller("mdCalendar")},r.prototype.focusCalendar=function(){var e=this;this.$mdUtil.nextTick(function(){e.getCalendarCtrl().focus()},!1)},r.prototype.setFocused=function(e){e||this.ngModelCtrl.$setTouched(),this.openOnFocus||this.evalAttr(e?"ngFocus":"ngBlur"),this.isFocused=e},r.prototype.handleBodyClick=function(e){if(this.isCalendarOpen){var t=this.$mdUtil.getClosest(e.target,"md-calendar");t||this.closeCalendarPane(),this.$scope.$digest()}},r.prototype.handleWindowBlur=function(){this.inputFocusedOnWindowBlur=document.activeElement===this.inputElement},r.prototype.evalAttr=function(e){this.$attrs[e]&&this.$scope.$parent.$eval(this.$attrs[e])}}()}(),function(){!function(){t.module("material.components.datepicker").factory("$$mdDateUtil",function(){function e(e){return new Date(e.getFullYear(),e.getMonth(),1)}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function r(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function i(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function o(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function a(e,t){return e.getDate()==t.getDate()&&o(e,t)}function s(e,t){var n=r(e);return o(n,t)}function c(e,t){var n=i(e);return o(t,n)}function u(e,t){return y((e.getTime()+t.getTime())/2)}function l(t){var n=e(t);return Math.floor((n.getDay()+t.getDate()-1)/7)}function f(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}function p(e,t){var r=new Date(e.getFullYear(),e.getMonth()+t,1),i=n(r);return i<e.getDate()?r.setDate(i):r.setDate(e.getDate()),r}function d(e,t){return 12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth())}function h(e){return new Date(e.getFullYear(),e.getMonth(),n(e))}function m(e){return null!=e&&e.getTime&&!isNaN(e.getTime())}function g(e){m(e)&&e.setHours(0,0,0,0)}function y(e){var n;return n=t.isUndefined(e)?new Date:new Date(e),g(n),n}function v(e,t,n){var r=y(e),i=m(t)?y(t):null,o=m(n)?y(n):null;return(!i||i<=r)&&(!o||o>=r)}function b(e,t){return p(e,12*t)}function S(e,t){return t.getFullYear()-e.getFullYear()}function _(e,t,n){var r=e;return t&&e<t&&(r=new Date(t.getTime())),n&&e>n&&(r=new Date(n.getTime())),r}function O(e){if(e&&e.hasAttribute("data-timestamp"))return Number(e.getAttribute("data-timestamp"))}function T(e,t,n){var r=e.getMonth(),i=e.getFullYear();return(!t||t.getFullYear()<i||t.getMonth()<=r)&&(!n||n.getFullYear()>i||n.getMonth()>=r)}return{getFirstDateOfMonth:e,getNumberOfDaysInMonth:n,getDateInNextMonth:r,getDateInPreviousMonth:i,isInNextMonth:s,isInPreviousMonth:c,getDateMidpoint:u,isSameMonthAndYear:o,getWeekOfMonth:l,incrementDays:f,incrementMonths:p,getLastDateOfMonth:h,isSameDay:a,getMonthDistance:d,isValidDate:m,setDateTimeToMidnight:g,createDateAtMidnight:y,isDateWithinRange:v,incrementYears:b,getYearDistance:S,clampDate:_,getTimestampFromNode:O,isMonthWithinRange:T}})}()}(),function(){function e(e,n,r){return{restrict:"E",link:function(i,o){o.addClass("_md"),n(o),e(function(){function e(){o.toggleClass("md-content-overflow",a.scrollHeight>a.clientHeight)}var n,a=o[0].querySelector("md-dialog-content");a&&(n=a.getElementsByTagName("img"),e(),t.element(n).on("load",e)),i.$on("$destroy",function(){r.destroy(o)})})}}}function r(e){function r(e,t,n){return{template:['<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}" ng-class="dialog.css">','  <md-dialog-content class="md-dialog-content" role="document" tabIndex="-1">','    <h2 class="md-title">{{ dialog.title }}</h2>','    <div ng-if="::dialog.mdHtmlContent" class="_md-dialog-content-body" ','        ng-bind-html="::dialog.mdHtmlContent"></div>','    <div ng-if="::!dialog.mdHtmlContent" class="_md-dialog-content-body">',"      <p>{{::dialog.mdTextContent}}</p>","    </div>",'    <md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container">','      <input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result"              placeholder="{{::dialog.placeholder}}">',"    </md-input-container>","  </md-dialog-content>","  <md-dialog-actions>",'    <md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"               ng-click="dialog.abort()" class="md-primary">',"      {{ dialog.cancel }}","    </md-button>",'    <md-button ng-click="dialog.hide()" class="md-primary" md-autofocus="dialog.$type===\'alert\'">',"      {{ dialog.ok }}","    </md-button>","  </md-dialog-actions>","</md-dialog>"].join("").replace(/\s\s+/g,""),controller:function(){var t="prompt"==this.$type;t&&this.initialValue&&(this.result=this.initialValue),this.hide=function(){e.hide(!t||this.result)},this.abort=function(){e.cancel()},this.keypress=function(t){t.keyCode===n.KEY_CODE.ENTER&&e.hide(this.result)}},controllerAs:"dialog",bindToController:!0,theme:t.defaultTheme()}}function i(e,r,i,s,c,u,l,f,p,d){function h(e,t,n,r){if(r){if(r.mdHtmlContent=r.htmlContent||n.htmlContent||"",r.mdTextContent=r.textContent||n.textContent||r.content||n.content||"",r.mdHtmlContent&&!d.has("$sanitize"))throw Error("The ngSanitize module must be loaded in order to use htmlContent.");if(r.mdHtmlContent&&r.mdTextContent)throw Error("md-dialog cannot have both `htmlContent` and `textContent`")}}function m(e,n,r,o){function a(){n[0].querySelector(".md-actions")&&p.warn("Using a class of md-actions is deprecated, please use <md-dialog-actions>.")}function s(){function e(){var e=n[0].querySelector(".dialog-close");if(!e){var r=n[0].querySelectorAll(".md-actions button, md-dialog-actions button");e=r[r.length-1]}return t.element(e)}if(r.focusOnOpen){var o=i.findFocusTarget(n)||e();o.focus()}}if(t.element(u[0].body).addClass("md-dialog-is-showing"),r.contentElement){var c=r.contentElement;t.isString(c)?(c=document.querySelector(c),r.elementInsertionSibling=c.nextElementSibling,r.elementInsertionParent=c.parentNode):(c=c[0]||c,document.contains(c)&&(r.elementInsertionSibling=c.nextElementSibling,r.elementInsertionParent=c.parentNode)),r.elementInsertionEntry=c,n=t.element(c)}return y(r),S(n.find("md-dialog"),r),b(e,n,r),T(n,r).then(function(){v(n,r),_(n,r),a(),s()})}function g(e,n,r){function i(){return E(n,r)}function s(){r.contentElement&&(r.reverseContainerStretch(),r.elementInsertionParent?r.elementInsertionSibling?r.elementInsertionParent.insertBefore(r.elementInsertionEntry,r.elementInsertionSibling):r.elementInsertionParent.appendChild(r.elementInsertionEntry):r.elementInsertionEntry.parentNode.removeChild(r.elementInsertionEntry))}function c(){t.element(u[0].body).removeClass("md-dialog-is-showing"),r.contentElement?s():n.remove(),r.$destroy||r.origin.focus()}return r.deactivateListeners(),r.unlockScreenReader(),r.hideBackdrop(r.$destroy),o&&o.parentNode&&o.parentNode.removeChild(o),a&&a.parentNode&&a.parentNode.removeChild(a),r.$destroy?c():i().then(c)}function y(e){function r(e,r){var i=t.element(e||{});if(i&&i.length){var o={top:0,left:0,height:0,width:0},a=t.isFunction(i[0].getBoundingClientRect);return t.extend(r||{},{element:a?i:n,bounds:a?i[0].getBoundingClientRect():t.extend({},o,i[0]),focus:t.bind(i,i.focus)})}}function i(e,n){return t.isString(e)&&(e=u[0].querySelector(e)),t.element(e||n)}e.origin=t.extend({element:null,bounds:null,focus:t.noop},e.origin||{}),e.parent=i(e.parent,f),e.closeTo=r(i(e.closeTo)),e.openFrom=r(i(e.openFrom)),e.targetEvent&&(e.origin=r(e.targetEvent.target,e.origin))}function v(n,r){var o=t.element(l),a=i.debounce(function(){O(n,r)},60),c=[],u=function(){var t="alert"==r.$type?e.hide:e.cancel;i.nextTick(t,!0)};if(r.escapeToClose){var f=r.parent,p=function(e){e.keyCode===s.KEY_CODE.ESCAPE&&(e.stopPropagation(),e.preventDefault(),u())};n.on("keydown",p),f.on("keydown",p),c.push(function(){n.off("keydown",p),f.off("keydown",p)})}if(o.on("resize",a),c.push(function(){o.off("resize",a)}),r.clickOutsideToClose){var d,h=n,m=function(e){d=e.target},g=function(e){d===h[0]&&e.target===h[0]&&(e.stopPropagation(),e.preventDefault(),u())};h.on("mousedown",m),h.on("mouseup",g),c.push(function(){h.off("mousedown",m),
h.off("mouseup",g)})}r.deactivateListeners=function(){c.forEach(function(e){e()}),r.deactivateListeners=null}}function b(e,t,n){n.disableParentScroll&&(n.restoreScroll=i.disableScrollAround(t,n.parent)),n.hasBackdrop&&(n.backdrop=i.createBackdrop(e,"_md-dialog-backdrop md-opaque"),c.enter(n.backdrop,n.parent)),n.hideBackdrop=function(e){n.backdrop&&(e?n.backdrop.remove():c.leave(n.backdrop)),n.disableParentScroll&&(n.restoreScroll(),delete n.restoreScroll),n.hideBackdrop=null}}function S(e,t){var n="alert"===t.$type?"alertdialog":"dialog",s=e.find("md-dialog-content"),c=e.attr("id"),u="dialogContent_"+(c||i.nextUid());e.attr({role:n,tabIndex:"-1"}),0===s.length&&(s=e,c&&(u=c)),s.attr("id",u),e.attr("aria-describedby",u),t.ariaLabel?r.expect(e,"aria-label",t.ariaLabel):r.expectAsync(e,"aria-label",function(){var e=s.text().split(/\s+/);return e.length>3&&(e=e.slice(0,3).concat("...")),e.join(" ")}),o=document.createElement("div"),o.classList.add("_md-dialog-focus-trap"),o.tabIndex=0,a=o.cloneNode(!1);var l=function(){e.focus()};o.addEventListener("focus",l),a.addEventListener("focus",l),e[0].parentNode.insertBefore(o,e[0]),e.after(a)}function _(e,t){function n(e){for(;e.parentNode;){if(e===document.body)return;for(var t=e.parentNode.children,i=0;i<t.length;i++)e===t[i]||w(t[i],["SCRIPT","STYLE"])||t[i].setAttribute("aria-hidden",r);n(e=e.parentNode)}}var r=!0;n(e[0]),t.unlockScreenReader=function(){r=!1,n(e[0]),t.unlockScreenReader=null}}function O(e,t){var n="fixed"==l.getComputedStyle(u[0].body).position,r=t.backdrop?l.getComputedStyle(t.backdrop[0]):null,o=r?Math.min(u[0].body.clientHeight,Math.ceil(Math.abs(parseInt(r.height,10)))):0,a={top:e.css("top"),height:e.css("height")};return e.css({top:(n?i.scrollTop(t.parent):0)+"px",height:o?o+"px":"100%"}),function(){e.css(a)}}function T(e,t){t.parent.append(e),t.reverseContainerStretch=O(e,t);var n=e.find("md-dialog"),r=i.dom.animator,o=r.calculateZoomToOrigin,a={transitionInClass:"_md-transition-in",transitionOutClass:"_md-transition-out"},s=r.toTransformCss(o(n,t.openFrom||t.origin)),c=r.toTransformCss("");return t.fullscreen&&n.addClass("md-dialog-fullscreen"),r.translate3d(n,s,c,a).then(function(e){return t.reverseAnimate=function(){return delete t.reverseAnimate,t.closeTo?(a={transitionInClass:"_md-transition-out",transitionOutClass:"_md-transition-in"},s=c,c=r.toTransformCss(o(n,t.closeTo)),r.translate3d(n,s,c,a)):e(c=r.toTransformCss(o(n,t.origin)))},t.clearAnimate=function(){return delete t.clearAnimate,r.translate3d(n,c,r.toTransformCss(""),{})},!0})}function E(e,t){return t.reverseAnimate().then(function(){t.contentElement&&t.clearAnimate()})}function w(e,t){if(t.indexOf(e.nodeName)!==-1)return!0}return{hasBackdrop:!0,isolateScope:!0,onShow:m,onShowing:h,onRemove:g,clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,contentElement:null,closeTo:null,openFrom:null,focusOnOpen:!0,disableParentScroll:!0,autoWrap:!0,fullscreen:!1,transformTemplate:function(e,t){function n(e){return t.autoWrap&&!/<\/md-dialog>/g.test(e)?"<md-dialog>"+(e||"")+"</md-dialog>":e||""}return'<div class="md-dialog-container" tabindex="-1">'+n(e)+"</div>"}}}var o,a;return r.$inject=["$mdDialog","$mdTheming","$mdConstant"],i.$inject=["$mdDialog","$mdAria","$mdUtil","$mdConstant","$animate","$document","$window","$rootElement","$log","$injector"],e("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","closeTo","openFrom","parent","fullscreen","contentElement"],options:i}).addPreset("alert",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","theme","css"],options:r}).addPreset("confirm",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","cancel","theme","css"],options:r}).addPreset("prompt",{methods:["title","htmlContent","textContent","initialValue","content","placeholder","ariaLabel","ok","cancel","theme","css"],options:r})}t.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",e).provider("$mdDialog",r),e.$inject=["$$rAF","$mdTheming","$mdDialog"],r.$inject=["$$interimElementProvider"]}(),function(){function e(e){return{restrict:"E",link:e}}t.module("material.components.divider",["material.core"]).directive("mdDivider",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(e){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],compile:function(t,n){var r=t.children(),i=e.prefixer().hasAttribute(r,"ng-repeat");i?r.addClass("md-fab-action-item"):r.wrap('<div class="md-fab-action-item">')}}}t.module("material.components.fabActions",["material.core"]).directive("mdFabActions",e),e.$inject=["$mdUtil"]}()}(),function(){!function(){function e(e,n,r,i,o,a){function s(){A.direction=A.direction||"down",A.isOpen=A.isOpen||!1,l(),n.addClass("_md-animations-waiting")}function c(){var r=["click","focusin","focusout"];t.forEach(r,function(e){n.on(e,u)}),e.$on("$destroy",function(){t.forEach(r,function(e){n.off(e,u)}),h()})}function u(e){"click"==e.type&&R(e),"focusout"!=e.type||$||($=a(function(){A.close()},100,!1)),"focusin"==e.type&&$&&(a.cancel($),$=null)}function l(){A.currentActionIndex=-1}function f(){e.$watch("vm.direction",function(e,t){r.removeClass(n,"md-"+t),r.addClass(n,"md-"+e),l()});var t,i;e.$watch("vm.isOpen",function(e){l(),t&&i||(t=P(),i=j()),e?d():h();var o=e?"md-is-open":"",a=e?"":"md-is-open";t.attr("aria-haspopup",!0),t.attr("aria-expanded",e),i.attr("aria-hidden",!e),r.setClass(n,o,a)})}function p(){n[0].scrollHeight>0?r.addClass(n,"_md-animations-ready").then(function(){n.removeClass("_md-animations-waiting")}):C<10&&(a(p,100),C+=1)}function d(){n.on("keydown",g),i.nextTick(function(){t.element(document).on("click touchend",m)})}function h(){n.off("keydown",g),t.element(document).off("click touchend",m)}function m(e){if(e.target){var t=i.getClosest(e.target,"md-fab-trigger"),n=i.getClosest(e.target,"md-fab-actions");t||n||A.close()}}function g(e){switch(e.which){case o.KEY_CODE.ESCAPE:return A.close(),e.preventDefault(),!1;case o.KEY_CODE.LEFT_ARROW:return _(e),!1;case o.KEY_CODE.UP_ARROW:return O(e),!1;case o.KEY_CODE.RIGHT_ARROW:return T(e),!1;case o.KEY_CODE.DOWN_ARROW:return E(e),!1}}function y(e){b(e,-1)}function v(e){b(e,1)}function b(e,n){var r=S();A.currentActionIndex=A.currentActionIndex+n,A.currentActionIndex=Math.min(r.length-1,A.currentActionIndex),A.currentActionIndex=Math.max(0,A.currentActionIndex);var i=t.element(r[A.currentActionIndex]).children()[0];t.element(i).attr("tabindex",0),i.focus(),e.preventDefault(),e.stopImmediatePropagation()}function S(){var e=j()[0].querySelectorAll(".md-fab-action-item");return t.forEach(e,function(e){t.element(t.element(e).children()[0]).attr("tabindex",-1)}),e}function _(e){"left"===A.direction?v(e):y(e)}function O(e){"down"===A.direction?y(e):v(e)}function T(e){"left"===A.direction?y(e):v(e)}function E(e){"up"===A.direction?y(e):v(e)}function w(e){return i.getClosest(e,"md-fab-trigger")}function I(e){return i.getClosest(e,"md-fab-actions")}function R(e){w(e.target)&&A.toggle(),I(e.target)&&A.close()}function P(){return n.find("md-fab-trigger")}function j(){return n.find("md-fab-actions")}var A=this;A.open=function(){e.$evalAsync("vm.isOpen = true")},A.close=function(){e.$evalAsync("vm.isOpen = false"),n.find("md-fab-trigger")[0].focus()},A.toggle=function(){e.$evalAsync("vm.isOpen = !vm.isOpen")},s(),c(),f();var C=0;p();var $}t.module("material.components.fabShared",["material.core"]).controller("MdFabController",e),e.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"]}()}(),function(){!function(){function n(){function e(e,t){t.prepend('<div class="_md-css-variables"></div>')}return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function r(n){function r(e){n(e,o,!1)}function i(n){if(!n.hasClass("_md-animations-waiting")||n.hasClass("_md-animations-ready")){var r=n[0],i=n.controller("mdFabSpeedDial"),o=r.querySelectorAll(".md-fab-action-item"),a=r.querySelector("md-fab-trigger"),s=r.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(s).zIndex);t.forEach(o,function(e,t){var n=e.style;n.transform=n.webkitTransform="",n.transitionDelay="",n.opacity=1,n.zIndex=o.length-t+c}),a.style.zIndex=c+o.length+1,i.isOpen||t.forEach(o,function(e,t){var n,r,o=e.style,s=(a.clientHeight-e.clientHeight)/2,c=(a.clientWidth-e.clientWidth)/2;switch(i.direction){case"up":n=e.scrollHeight*(t+1)+s,r="Y";break;case"down":n=-(e.scrollHeight*(t+1)+s),r="Y";break;case"left":n=e.scrollWidth*(t+1)+c,r="X";break;case"right":n=-(e.scrollWidth*(t+1)+c),r="X"}var u="translate"+r+"("+n+"px)";o.transform=o.webkitTransform=u})}}return{addClass:function(e,t,n){e.hasClass("md-fling")?(i(e),r(n)):n()},removeClass:function(e,t,n){i(e),r(n)}}}function i(n){function r(e){n(e,o,!1)}function i(n){var r=n[0],i=n.controller("mdFabSpeedDial"),o=r.querySelectorAll(".md-fab-action-item"),s=r.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(s).zIndex);t.forEach(o,function(e,t){var n=e.style,r=t*a;n.opacity=i.isOpen?1:0,n.transform=n.webkitTransform=i.isOpen?"scale(1)":"scale(0)",n.transitionDelay=(i.isOpen?r:o.length-r)+"ms",n.zIndex=o.length-t+c})}var a=65;return{addClass:function(e,t,n){i(e),r(n)},removeClass:function(e,t,n){i(e),r(n)}}}var o=300;t.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",n).animation(".md-fling",r).animation(".md-scale",i).service("mdFabSpeedDialFlingAnimation",r).service("mdFabSpeedDialScaleAnimation",i),r.$inject=["$timeout"],i.$inject=["$timeout"]}()}(),function(){!function(){function n(){function e(e,t,n){t.addClass("md-fab-toolbar"),t.find("md-fab-trigger").find("button").prepend('<div class="_md-fab-toolbar-background"></div>')}return{restrict:"E",transclude:!0,template:'<div class="_md-fab-toolbar-wrapper">  <div class="_md-fab-toolbar-content" ng-transclude></div></div>',scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function r(){function n(n,r,i){if(r){var o=n[0],a=n.controller("mdFabToolbar"),s=o.querySelector("._md-fab-toolbar-background"),c=o.querySelector("md-fab-trigger button"),u=o.querySelector("md-toolbar"),l=o.querySelector("md-fab-trigger button md-icon"),f=n.find("md-fab-actions").children();if(c&&s){var p=e.getComputedStyle(c).getPropertyValue("background-color"),d=o.offsetWidth,h=(o.offsetHeight,2*(d/c.offsetWidth));s.style.backgroundColor=p,s.style.borderRadius=d+"px",a.isOpen?(u.style.pointerEvents="inherit",s.style.width=c.offsetWidth+"px",s.style.height=c.offsetHeight+"px",s.style.transform="scale("+h+")",s.style.transitionDelay="0ms",l&&(l.style.transitionDelay=".3s"),t.forEach(f,function(e,t){e.style.transitionDelay=25*(f.length-t)+"ms"})):(u.style.pointerEvents="none",s.style.transform="scale(1)",s.style.top="0",n.hasClass("md-right")&&(s.style.left="0",s.style.right=null),n.hasClass("md-left")&&(s.style.right="0",s.style.left=null),s.style.transitionDelay="200ms",l&&(l.style.transitionDelay="0ms"),t.forEach(f,function(e,t){e.style.transitionDelay=200+25*t+"ms"}))}}}return{addClass:function(e,t,r){n(e,t,r),r()},removeClass:function(e,t,r){n(e,t,r),r()}}}t.module("material.components.fabToolbar",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabToolbar",n).animation(".md-fab-toolbar",r).service("mdFabToolbarAnimation",r)}()}(),function(){!function(){function e(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"]}}t.module("material.components.fabTrigger",["material.core"]).directive("mdFabTrigger",e)}()}(),function(){function e(e,r,i,o){function a(n,a,s,c){function u(){for(var e in r.MEDIA)o(e),o.getQuery(r.MEDIA[e]).addListener(T);return o.watchResponsiveAttributes(["md-cols","md-row-height","md-gutter"],s,f)}function l(){c.layoutDelegate=t.noop,E();for(var e in r.MEDIA)o.getQuery(r.MEDIA[e]).removeListener(T)}function f(e){null==e?c.invalidateLayout():o(e)&&c.invalidateLayout()}function p(e){var r=g(),o={tileSpans:y(r),colCount:v(),rowMode:_(),rowHeight:S(),gutter:b()};if(e||!t.equals(o,w)){var s=i(o.colCount,o.tileSpans,r).map(function(e,n){return{grid:{element:a,style:m(o.colCount,n,o.gutter,o.rowMode,o.rowHeight)},tiles:e.map(function(e,i){return{element:t.element(r[i]),style:h(e.position,e.spans,o.colCount,n,o.gutter,o.rowMode,o.rowHeight)}})}}).reflow().performance();n.mdOnLayout({$event:{performance:s}}),w=o}}function d(e){return I+e+R}function h(e,t,n,r,i,o,a){var s=1/n*100,c=(n-1)/n,u=P({share:s,gutterShare:c,gutter:i}),l={left:j({unit:u,offset:e.col,gutter:i}),width:A({unit:u,span:t.col,gutter:i}),paddingTop:"",marginTop:"",top:"",height:""};switch(o){case"fixed":l.top=j({unit:a,offset:e.row,gutter:i}),l.height=A({unit:a,span:t.row,gutter:i});break;case"ratio":var f=s/a,p=P({share:f,gutterShare:c,gutter:i});l.paddingTop=A({unit:p,span:t.row,gutter:i}),l.marginTop=j({unit:p,offset:e.row,gutter:i});break;case"fit":var d=(r-1)/r,f=1/r*100,p=P({share:f,gutterShare:d,gutter:i});l.top=j({unit:p,offset:e.row,gutter:i}),l.height=A({unit:p,span:t.row,gutter:i})}return l}function m(e,t,n,r,i){var o={};switch(r){case"fixed":o.height=A({unit:i,span:t,gutter:n}),o.paddingBottom="";break;case"ratio":var a=1===e?0:(e-1)/e,s=1/e*100,c=s*(1/i),u=P({share:c,gutterShare:a,gutter:n});o.height="",o.paddingBottom=A({unit:u,span:t,gutter:n});break;case"fit":}return o}function g(){return[].filter.call(a.children(),function(e){return"MD-GRID-TILE"==e.tagName&&!e.$$mdDestroyed})}function y(e){return[].map.call(e,function(e){var n=t.element(e).controller("mdGridTile");return{row:parseInt(o.getResponsiveAttribute(n.$attrs,"md-rowspan"),10)||1,col:parseInt(o.getResponsiveAttribute(n.$attrs,"md-colspan"),10)||1}})}function v(){var e=parseInt(o.getResponsiveAttribute(s,"md-cols"),10);if(isNaN(e))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return e}function b(){return O(o.getResponsiveAttribute(s,"md-gutter")||1)}function S(){var e=o.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";switch(_()){case"fixed":return O(e);case"ratio":var t=e.split(":");return parseFloat(t[0])/parseFloat(t[1]);case"fit":return 0}}function _(){var e=o.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";return"fit"==e?"fit":e.indexOf(":")!==-1?"ratio":"fixed"}function O(e){return/\D$/.test(e)?e:e+"px"}a.addClass("_md"),a.attr("role","list"),c.layoutDelegate=p;var T=t.bind(c,c.invalidateLayout),E=u();n.$on("$destroy",l);var w,I=e.startSymbol(),R=e.endSymbol(),P=e(d("share")+"% - ("+d("gutter")+" * "+d("gutterShare")+")"),j=e("calc(("+d("unit")+" + "+d("gutter")+") * "+d("offset")+")"),A=e("calc(("+d("unit")+") * "+d("span")+" + ("+d("span")+" - 1) * "+d("gutter")+")")}return{restrict:"E",controller:n,scope:{mdOnLayout:"&"},link:a}}function n(e){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=e.nextTick,this.layoutDelegate=t.noop}function r(e){function n(t,n){var r,a,s,c,u,l;return c=e.time(function(){a=i(t,n)}),r={layoutInfo:function(){return a},map:function(t){return u=e.time(function(){var e=r.layoutInfo();s=t(e.positioning,e.rowCount)}),r},reflow:function(t){return l=e.time(function(){var e=t||o;e(s.grid,s.tiles)}),r},performance:function(){return{tileCount:n.length,layoutTime:c,mapTime:u,reflowTime:l,totalTime:c+u+l}}}}function r(e,t){e.element.css(e.style),t.forEach(function(e){e.element.css(e.style)})}function i(e,t){function n(t,n){if(t.col>e)throw"md-grid-list: Tile at position "+n+" has a colspan ("+t.col+") that exceeds the column count ("+e+")";for(var a=0,l=0;l-a<t.col;)s>=e?r():(a=u.indexOf(0,s),a!==-1&&(l=o(a+1))!==-1?s=l+1:(a=l=0,r()));return i(a,t.col,t.row),s=a+t.col,{col:a,row:c}}function r(){s=0,c++,i(0,e,-1)}function i(e,t,n){for(var r=e;r<e+t;r++)u[r]=Math.max(u[r]+n,0)}function o(e){var t;for(t=e;t<u.length;t++)if(0!==u[t])return t;if(t===u.length)return t}function a(){for(var t=[],n=0;n<e;n++)t.push(0);return t}var s=0,c=0,u=a();return{positioning:t.map(function(e,t){return{spans:e,position:n(e,t)}}),rowCount:c+Math.max.apply(Math,u)}}var o=r;return n.animateWith=function(e){o=t.isFunction(e)?e:r},n}function i(e){function n(n,r,i,o){r.attr("role","listitem");var a=e.watchResponsiveAttributes(["md-colspan","md-rowspan"],i,t.bind(o,o.invalidateLayout));o.invalidateTiles(),n.$on("$destroy",function(){r[0].$$mdDestroyed=!0,a(),o.invalidateLayout()}),t.isDefined(n.$parent.$index)&&n.$watch(function(){return n.$parent.$index},function(e,t){e!==t&&o.invalidateTiles()})}return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(e){this.$attrs=e}],link:n}}function o(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}t.module("material.components.gridList",["material.core"]).directive("mdGridList",e).directive("mdGridTile",i).directive("mdGridTileFooter",o).directive("mdGridTileHeader",o).factory("$mdGridLayout",r),e.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"],n.$inject=["$mdUtil"],n.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(t.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}},r.$inject=["$mdUtil"],i.$inject=["$mdMedia"]}(),function(){t.module("material.components.icon",["material.core"])}(),function(){function e(e){return{restrict:"E",compile:function(t){return t[0].setAttribute("role","list"),e}}}function n(e,n,r,i){var o=["md-checkbox","md-switch"];return{restrict:"E",controller:"MdListController",compile:function(a,s){function c(){for(var e,t,n=["md-switch","md-checkbox"],r=0;t=n[r];++r)if((e=a.find(t)[0])&&!e.hasAttribute("aria-label")){var i=a.find("p")[0];if(!i)return;e.setAttribute("aria-label","Toggle "+i.textContent)}}function u(e){if("div"==e)S=t.element('<div class="_md-no-style _md-list-item-inner">'),S.append(a.contents()),a.addClass("_md-proxy-focus");else{S=t.element('<div class="md-button _md-no-style">   <div class="_md-list-item-inner"></div></div>');var n=t.element('<md-button class="_md-no-style"></md-button>');n[0].setAttribute("aria-label",a[0].textContent),p(a[0],n[0]),S.prepend(n),S.children().eq(1).append(a.contents()),a.addClass("_md-button-wrap")}a[0].setAttribute("tabindex","-1"),a.append(S)}function l(){var e=t.element('<div class="_md-secondary-container">');t.forEach(b,function(t){f(t,e)}),S.append(e)}function f(n,r){if(n&&!h(n)&&n.hasAttribute("ng-click")){e.expect(n,"aria-label");var i=t.element('<md-button class="md-secondary md-icon-button">');p(n,i[0]),n.setAttribute("tabindex","-1"),i.append(n),n=i[0]}n&&(!m(n)||!s.ngClick&&d(n))&&t.element(n).removeClass("md-secondary"),a.addClass("md-with-secondary"),r.append(n)}function p(e,n){var i=r.prefixer(["ng-if","ng-click","ng-dblclick","aria-label","ng-disabled","ui-sref","href","ng-href","target","ng-attr-ui-sref","ui-sref-opts"]);t.forEach(i,function(t){e.hasAttribute(t)&&(n.setAttribute(t,e.getAttribute(t)),e.removeAttribute(t))})}function d(e){return o.indexOf(e.nodeName.toLowerCase())!=-1}function h(e){var t=e.nodeName.toUpperCase();return"MD-BUTTON"==t||"BUTTON"==t}function m(e){for(var t=e.attributes,n=0;n<t.length;n++)if("ngClick"===s.$normalize(t[n].name))return!0;return!1}function g(e,a,s,c){function u(){p&&p.children&&!g&&t.forEach(o,function(e){t.forEach(p.querySelectorAll(e+":not(.md-secondary)"),function(e){f.push(e)})})}function l(){(1==f.length||g)&&(a.addClass("md-clickable"),g||c.attachRipple(e,t.element(a[0].querySelector("._md-no-style"))))}a.addClass("_md");var f=[],p=a[0].firstElementChild,d=a.hasClass("_md-button-wrap"),h=d?p.firstElementChild:p,g=h&&m(h);u(),l(),a.hasClass("_md-proxy-focus")&&f.length&&t.forEach(f,function(n){n=t.element(n),e.mouseActive=!1,n.on("mousedown",function(){e.mouseActive=!0,i(function(){e.mouseActive=!1},100)}).on("focus",function(){e.mouseActive===!1&&a.addClass("md-focused"),n.on("blur",function e(){a.removeClass("md-focused"),n.off("blur",e)})})});var y=function(e){if("INPUT"!=e.target.nodeName&&"TEXTAREA"!=e.target.nodeName&&!e.target.isContentEditable){var t=e.which||e.keyCode;t==n.KEY_CODE.SPACE&&h&&(h.click(),e.preventDefault(),e.stopPropagation())}};g||f.length||h&&h.addEventListener("keypress",y),a.off("click"),a.off("keypress"),1==f.length&&h&&a.children().eq(0).on("click",function(e){var n=r.getClosest(e.target,"BUTTON");!n&&h.contains(e.target)&&t.forEach(f,function(n){e.target===n||n.contains(e.target)||t.element(n).triggerHandler("click")})}),e.$on("$destroy",function(){h&&h.removeEventListener("keypress",y)})}var y,v,b=a[0].querySelectorAll(".md-secondary"),S=a;if(a[0].setAttribute("role","listitem"),s.ngClick||s.ngDblclick||s.ngHref||s.href||s.uiSref||s.ngAttrUiSref)u("button");else{for(var _,O=0;_=o[O];++O)if(v=a[0].querySelector(_)){y=!0;break}y?u("div"):a[0].querySelector("md-button:not(.md-secondary):not(.md-exclude)")||a.addClass("_md-no-proxy")}return l(),c(),g}}}function r(e,t,n){function r(e,t){var r={};n.attach(e,t,r)}var i=this;i.attachRipple=r}t.module("material.components.list",["material.core"]).controller("MdListController",r).directive("mdList",e).directive("mdListItem",n),e.$inject=["$mdTheming"],n.$inject=["$mdAria","$mdConstant","$mdUtil","$timeout"],r.$inject=["$scope","$element","$mdListInkRipple"]}(),function(){function n(e,t){function n(t,n){e(n);var r=n[0].querySelector(o),i=n[0].querySelector(a);r&&n.addClass("md-icon-left"),i&&n.addClass("md-icon-right")}function r(e,n,r,i){var o=this;o.isErrorGetter=r.mdIsError&&t(r.mdIsError),o.delegateClick=function(){o.input.focus()},o.element=n,o.setFocused=function(e){n.toggleClass("md-input-focused",!!e)},o.setHasValue=function(e){n.toggleClass("md-input-has-value",!!e)},o.setHasPlaceholder=function(e){n.toggleClass("md-input-has-placeholder",!!e)},o.setInvalid=function(e){e?i.addClass(n,"md-input-invalid"):i.removeClass(n,"md-input-invalid")},e.$watch(function(){return o.label&&o.input},function(e){e&&!o.label.attr("for")&&o.label.attr("for",o.input.attr("id"))})}var i=["INPUT","TEXTAREA","SELECT","MD-SELECT"],o=i.reduce(function(e,t){return e.concat(["md-icon ~ "+t,".md-icon ~ "+t])},[]).join(","),a=i.reduce(function(e,t){return e.concat([t+" ~ md-icon",t+" ~ .md-icon"])},[]).join(",");return r.$inject=["$scope","$element","$attrs","$animate"],{restrict:"E",link:n,controller:r}}function r(){return{restrict:"E",require:"^?mdInputContainer",link:function(e,t,n,r){!r||n.mdNoFloat||t.hasClass("_md-container-ignore")||(r.label=t,e.$on("$destroy",function(){r.label=null}))}}}function i(e,n,r,i,o){function a(a,s,c,u){function l(e){return h.setHasValue(!g.$isEmpty(e)),e}function f(){h.label&&c.$observe("required",function(e){h.label.toggleClass("md-required",e&&!v)})}function p(){h.setHasValue(s.val().length>0||(s[0].validity||{}).badInput)}function d(){function r(){s.attr("rows",1).css("height","auto").addClass("md-no-flex");var e=u();if(b||(b=s.css("padding",0).prop("offsetHeight"),s.css("padding",null)),y&&b&&(e=Math.max(e,b*y)),v&&b){var t=b*v;t<e?(s.attr("md-no-autogrow",""),e=t):s.removeAttr("md-no-autogrow")}b&&s.attr("rows",Math.round(e/b)),s.css("height",e+"px").removeClass("md-no-flex")}function u(){var e=S.offsetHeight,t=S.scrollHeight-e;return e+Math.max(t,0)}function l(t){return e.nextTick(r),t}function f(){if(d&&(d=!1,t.element(n).off("resize",r),s.attr("md-no-autogrow","").off("input",r),m)){var e=g.$formatters.indexOf(l);e>-1&&g.$formatters.splice(e,1)}}function p(){function e(e){e.preventDefault(),l=!0,p=e.clientY,d=parseFloat(s.css("height"))||s.prop("offsetHeight")}function n(e){l&&(e.preventDefault(),f(),m.addClass("md-input-resized"))}function r(e){l&&s.css("height",d+(e.pointer.y-p)+"px")}function i(e){l&&(l=!1,m.removeClass("md-input-resized"))}if(!c.hasOwnProperty("mdNoResize")){var u=t.element('<div class="md-resize-handle"></div>'),l=!1,p=null,d=0,m=h.element,g=o.register(u,"drag",{horizontal:!1});s.after(u),u.on("mousedown",e),m.on("$md.dragstart",n).on("$md.drag",r).on("$md.dragend",i),a.$on("$destroy",function(){u.off("mousedown",e).remove(),m.off("$md.dragstart",n).off("$md.drag",r).off("$md.dragend",i),g(),u=null,m=null,g=null})}}var d=!c.hasOwnProperty("mdNoAutogrow");if(p(),d){var y=c.hasOwnProperty("rows")?parseInt(c.rows):NaN,v=c.hasOwnProperty("maxRows")?parseInt(c.maxRows):NaN,b=null,S=s[0];if(i(function(){e.nextTick(r)},10,!1),s.on("input",r),m&&g.$formatters.push(l),y||s.attr("rows",1),t.element(n).on("resize",r),a.$on("$destroy",f),c.hasOwnProperty("mdDetectHidden")){var _=function(){var e=!1;return function(){var t=0===S.offsetHeight;t===!1&&e===!0&&r(),e=t}}();a.$watch(function(){return e.nextTick(_,!1),!0})}}}var h=u[0],m=!!u[1],g=u[1]||e.fakeNgModel(),y=t.isDefined(c.readonly),v=e.parseAttributeBoolean(c.mdNoAsterisk),b=s[0].tagName.toLowerCase();if(h){if("hidden"===c.type)return void s.attr("aria-hidden","true");if(h.input)throw new Error("<md-input-container> can only have *one* <input>, <textarea> or <md-select> child element!");h.input=s,f();var S=t.element('<div class="md-errors-spacer">');s.after(S),h.label||r.expect(s,"aria-label",s.attr("placeholder")),s.addClass("md-input"),s.attr("id")||s.attr("id","input_"+e.nextUid()),"input"===b&&"number"===c.type&&c.min&&c.max&&!c.step?s.attr("step","any"):"textarea"===b&&d(),m||p();var _=h.isErrorGetter||function(){return g.$invalid&&(g.$touched||O())},O=function(){var n=e.getClosest(s,"form"),r=n?t.element(n).controller("form"):null;return!!r&&r.$submitted};a.$watch(_,h.setInvalid),g.$parsers.push(l),g.$formatters.push(l),s.on("input",p),y||s.on("focus",function(t){e.nextTick(function(){h.setFocused(!0)})}).on("blur",function(t){e.nextTick(function(){h.setFocused(!1),p()})}),a.$on("$destroy",function(){h.setFocused(!1),h.setHasValue(!1),h.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:a}}function o(e,n){function r(r,i,o,a){function s(e){return u.parent?(u.text(String(i.val()||e||"").length+"/"+c),e):e}var c,u,l,f=a[0],p=a[1];n.nextTick(function(){l=t.element(p.element[0].querySelector(".md-errors-spacer")),u=t.element('<div class="md-char-counter">'),l.append(u),o.$set("ngTrim","false"),f.$formatters.push(s),f.$viewChangeListeners.push(s),i.on("input keydown keyup",function(){s()}),r.$watch(o.mdMaxlength,function(n){c=n,t.isNumber(n)&&n>0?(u.parent().length||e.enter(u,l),s()):e.leave(u)}),f.$validators["md-maxlength"]=function(e,n){return!t.isNumber(c)||c<0||(e||i.val()||n||"").length<=c}})}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:r}}function a(e){function t(e,t,n,r){if(r){var i=r.element.find("label"),o=r.element.attr("md-no-float");if(i&&i.length||""===o||e.$eval(o))return void r.setHasPlaceholder(!0);var a=n.placeholder;if(t.removeAttr("placeholder"),r.input&&"MD-SELECT"!=r.input[0].nodeName){var s='<label ng-click="delegateClick()">'+a+"</label>";r.element.addClass("md-icon-float"),r.element.prepend(s)}}}return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:t}}function s(e){function t(t,n,r){function i(){a=!0,e(function(){n[0].select(),a=!1},1,!1)}function o(e){a&&e.preventDefault()}if("INPUT"===n[0].nodeName||"TEXTAREA"===n[0].nodeName){var a=!1;n.on("focus",i).on("mouseup",o),t.$on("$destroy",function(){n.off("focus",i).off("mouseup",o)})}}return{restrict:"A",link:t}}function c(){function e(e,n,r,i){i&&(n.toggleClass("md-input-messages-animation",!0),n.toggleClass("md-auto-hide",!0),("false"==r.mdAutoHide||t(r))&&n.toggleClass("md-auto-hide",!1))}function t(e){return b.some(function(t){return e[t]})}return{restrict:"EA",link:e,require:"^^?mdInputContainer"}}function u(e){function t(t){function n(){for(var e=t[0];e=e.parentNode;)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return!0;return!1}function r(t){return!!e.getClosest(t,"md-input-container")}function i(e){e.toggleClass("md-input-message-animation",!0)}if(r(t))i(t);else if(n())return function(e,n){r(n)&&i(t)}}return{restrict:"EA",compile:t,priority:100}}function l(e,t){return{addClass:function(n,r,i){var o=v(n);"md-input-invalid"==r&&o.hasClass("md-auto-hide")?d(n,t,e).finally(i):i()}}}function f(e,t){return{enter:function(n,r){d(n,t,e).finally(r)},leave:function(n,r){h(n,t,e).finally(r)},addClass:function(n,r,i){"ng-hide"==r?h(n,t,e).finally(i):i()},removeClass:function(n,r,i){"ng-hide"==r?d(n,t,e).finally(i):i()}}}function p(e){return{enter:function(t,n){var r=v(t);return r.hasClass("md-auto-hide")?void n():m(t,e)},leave:function(t,n){return g(t,e)}}}function d(e,n,r){var i,o=[],a=v(e);return t.forEach(a.children(),function(e){i=m(t.element(e),n),o.push(i.start())}),r.all(o)}function h(e,n,r){var i,o=[],a=v(e);return t.forEach(a.children(),function(e){i=g(t.element(e),n),o.push(i.start())}),r.all(o)}function m(e,t){var n=e[0].offsetHeight;return t(e,{event:"enter",structural:!0,from:{opacity:0,"margin-top":-n+"px"},to:{opacity:1,"margin-top":"0"},duration:.3})}function g(t,n){var r=t[0].offsetHeight,i=e.getComputedStyle(t[0]);return 0==i.opacity?n(t,{}):n(t,{event:"leave",structural:!0,from:{opacity:1,"margin-top":0},to:{opacity:0,"margin-top":-r+"px"},duration:.3})}function y(e){var t=e.controller("mdInputContainer");return t.element}function v(e){var n=y(e);return t.element(n[0].querySelector(".md-input-messages-animation"))}t.module("material.components.input",["material.core"]).directive("mdInputContainer",n).directive("label",r).directive("input",i).directive("textarea",i).directive("mdMaxlength",o).directive("placeholder",a).directive("ngMessages",c).directive("ngMessage",u).directive("ngMessageExp",u).directive("mdSelectOnFocus",s).animation(".md-input-invalid",l).animation(".md-input-messages-animation",f).animation(".md-input-message-animation",p),n.$inject=["$mdTheming","$parse"],i.$inject=["$mdUtil","$window","$mdAria","$timeout","$mdGesture"],o.$inject=["$animate","$mdUtil"],a.$inject=["$log"],s.$inject=["$timeout"];var b=["ngIf","ngShow","ngHide","ngSwitchWhen","ngSwitchDefault"];u.$inject=["$mdUtil"],l.$inject=["$q","$animateCss"],f.$inject=["$q","$animateCss"],p.$inject=["$animateCss"]}(),function(){t.module("material.components.menuBar",["material.core","material.components.menu"])}(),function(){t.module("material.components.menu",["material.core","material.components.backdrop"])}(),function(){function e(e,n){return{restrict:"E",transclude:!0,controller:r,controllerAs:"ctrl",bindToController:!0,scope:{mdSelectedNavItem:"=?",mdNoInkBar:"=?",navBarAriaLabel:"@?"},template:'<div class="md-nav-bar"><nav role="navigation"><ul class="_md-nav-bar-list" ng-transclude role="listbox"tabindex="0"ng-focus="ctrl.onFocus()"ng-keydown="ctrl.onKeydown($event)"aria-label="{{ctrl.navBarAriaLabel}}"></ul></nav><md-nav-ink-bar ng-hide="ctrl.mdNoInkBar"></md-nav-ink-bar></div>',link:function(r,i,o,a){n(i),a.navBarAriaLabel||e.expectAsync(i,"aria-label",t.noop)}}}function r(e,t,n,r){this._$timeout=n,this._$scope=t,this._$mdConstant=r,this.mdSelectedNavItem,this.navBarAriaLabel,this._navBarEl=e[0],this._inkbar;var i=this,o=this._$scope.$watch(function(){return i._navBarEl.querySelectorAll("._md-nav-button").length},function(e){e>0&&(i._initTabs(),o())})}function i(e){return{restrict:"E",require:["mdNavItem","^mdNavBar"],controller:o,bindToController:!0,controllerAs:"ctrl",replace:!0,transclude:!0,template:function(e,t){var n,r,i,o=t.mdNavClick,a=t.mdNavHref,s=t.mdNavSref,c=t.srefOpts;if((o?1:0)+(a?1:0)+(s?1:0)>1)throw Error("Must not specify more than one of the md-nav-click, md-nav-href, or md-nav-sref attributes per nav-item directive.");
return o?n='ng-click="ctrl.mdNavClick()"':a?n='ng-href="{{ctrl.mdNavHref}}"':s&&(n='ui-sref="{{ctrl.mdNavSref}}"'),r=c?'ui-sref-opts="{{ctrl.srefOpts}}" ':"",n&&(i='<md-button class="_md-nav-button md-accent" ng-class="ctrl.getNgClassMap()" ng-blur="ctrl.setFocused(false)" tabindex="-1" '+r+n+'><span ng-transclude class="_md-nav-button-text"></span></md-button>'),'<li class="md-nav-item" role="option" aria-selected="{{ctrl.isSelected()}}">'+(i||"")+"</li>"},scope:{mdNavClick:"&?",mdNavHref:"@?",mdNavSref:"@?",srefOpts:"=?",name:"@"},link:function(n,r,i,o){e(function(){var e=o[0],i=o[1],a=t.element(r[0].querySelector("._md-nav-button"));e.name||(e.name=t.element(r[0].querySelector("._md-nav-button-text")).text().trim()),a.on("click",function(){i.mdSelectedNavItem=e.name,n.$apply()})})}}}function o(e){this._$element=e,this.mdNavClick,this.mdNavHref,this.mdNavSref,this.srefOpts,this.name,this._selected=!1,this._focused=!1}r.$inject=["$element","$scope","$timeout","$mdConstant"],i.$inject=["$$rAF"],o.$inject=["$element"],e.$inject=["$mdAria","$mdTheming"],t.module("material.components.navBar",["material.core"]).controller("MdNavBarController",r).directive("mdNavBar",e).controller("MdNavItemController",o).directive("mdNavItem",i),r.prototype._initTabs=function(){this._inkbar=t.element(this._navBarEl.querySelector("md-nav-ink-bar"));var e=this;this._$timeout(function(){e._updateTabs(e.mdSelectedNavItem,n)}),this._$scope.$watch("ctrl.mdSelectedNavItem",function(t,n){e._$timeout(function(){e._updateTabs(t,n)})})},r.prototype._updateTabs=function(e,t){var n=this,r=this._getTabs(),i=-1,o=-1,a=this._getTabByName(e),s=this._getTabByName(t);s&&(s.setSelected(!1),i=r.indexOf(s)),a&&(a.setSelected(!0),o=r.indexOf(a)),this._$timeout(function(){n._updateInkBarStyles(a,o,i)})},r.prototype._updateInkBarStyles=function(e,t,n){if(this._inkbar.toggleClass("_md-left",t<n).toggleClass("_md-right",t>n),this._inkbar.css({display:t<0?"none":""}),e){var r=e.getButtonEl(),i=r.offsetLeft;this._inkbar.css({left:i+"px",width:r.offsetWidth+"px"})}},r.prototype._getTabs=function(){var e=Array.prototype.slice.call(this._navBarEl.querySelectorAll(".md-nav-item"));return e.map(function(e){return t.element(e).controller("mdNavItem")})},r.prototype._getTabByName=function(e){return this._findTab(function(t){return t.getName()==e})},r.prototype._getSelectedTab=function(){return this._findTab(function(e){return e.isSelected()})},r.prototype.getFocusedTab=function(){return this._findTab(function(e){return e.hasFocus()})},r.prototype._findTab=function(e){for(var t=this._getTabs(),n=0;n<t.length;n++)if(e(t[n]))return t[n];return null},r.prototype.onFocus=function(){var e=this._getSelectedTab();e&&e.setFocused(!0)},r.prototype._moveFocus=function(e,t){e.setFocused(!1),t.setFocused(!0)},r.prototype.onKeydown=function(e){var t=this._$mdConstant.KEY_CODE,n=this._getTabs(),r=this.getFocusedTab();if(r){var i=n.indexOf(r);switch(e.keyCode){case t.UP_ARROW:case t.LEFT_ARROW:i>0&&this._moveFocus(r,n[i-1]);break;case t.DOWN_ARROW:case t.RIGHT_ARROW:i<n.length-1&&this._moveFocus(r,n[i+1]);break;case t.SPACE:case t.ENTER:this._$timeout(function(){r.getButtonEl().click()})}}},o.prototype.getNgClassMap=function(){return{"md-active":this._selected,"md-primary":this._selected,"md-unselected":!this._selected,"md-focused":this._focused}},o.prototype.getName=function(){return this.name},o.prototype.getButtonEl=function(){return this._$element[0].querySelector("._md-nav-button")},o.prototype.setSelected=function(e){this._selected=e},o.prototype.isSelected=function(){return this._selected},o.prototype.setFocused=function(e){this._focused=e,e&&this.getButtonEl().focus()},o.prototype.hasFocus=function(){return this._focused}}(),function(){function e(e,n,r,a){this._defaultConfigOptions={bindToController:!0,clickOutsideToClose:!1,disableParentScroll:!1,escapeToClose:!1,focusOnOpen:!0,fullscreen:!1,hasBackdrop:!1,transformTemplate:t.bind(this,this._wrapTemplate),trapFocus:!1,zIndex:s},this._config={},this._$rootElement=e,this._$rootScope=n,this._$injector=r,this._$window=a,this.animation=o.animation,this.xPosition=i.xPosition,this.yPosition=i.yPosition}function r(e,t){this._$q=t.get("$q"),this._$mdCompiler=t.get("$mdCompiler"),this._$mdConstant=t.get("$mdConstant"),this._$mdUtil=t.get("$mdUtil"),this._$rootScope=t.get("$rootScope"),this._$animate=t.get("$animate"),this._$mdPanel=t.get("$mdPanel"),this._$log=t.get("$log"),this._$window=t.get("$window"),this._$$rAF=t.get("$$rAF"),this.id=e.id,this.isAttached=!1,this._config=e,this._panelContainer,this._panelEl,this._removeListeners=[],this._topFocusTrap,this._bottomFocusTrap,this._backdropRef,this._restoreScroll=null}function i(e){this._$window=e,this._absolute=!1,this._relativeToEl,this._top="",this._bottom="",this._left="",this._right="",this._translateX=[],this._translateY=[],this._positions=[],this._actualPosition}function o(e){this._$mdUtil=e.get("$mdUtil"),this._openFrom,this._closeTo,this._animationClass=""}function a(e){var n=t.isString(e)?document.querySelector(e):e;return t.element(n)}t.module("material.components.panel",["material.core","material.components.backdrop"]).service("$mdPanel",e);var s=80,c="_md-panel-hidden",u=t.element('<div class="_md-panel-focus-trap" tabindex="0"></div>');e.$inject=["$rootElement","$rootScope","$injector","$window"],e.prototype.create=function(e){var n=e||{};this._config={scope:this._$rootScope.$new(!0),attachTo:this._$rootElement},t.extend(this._config,this._defaultConfigOptions,n);var i="panel_"+this._$injector.get("$mdUtil").nextUid(),o=t.extend({id:i},this._config);return new r(o,this._$injector)},e.prototype.open=function(e){var t=this.create(e);return t.open().then(function(){return t})},e.prototype.newPanelPosition=function(){return new i(this._$window)},e.prototype.newPanelAnimation=function(){return new o(this._$injector)},e.prototype._wrapTemplate=function(e){var t=e||"";return'<div class="md-panel-outer-wrapper">  <div class="md-panel" style="left: -9999px;">'+t+"</div></div>"},r.prototype.open=function(){var e=this;return this._$q(function(t,n){var r=e._done(t,e),i=e._simpleBind(e.show,e);e.attach().then(i).then(r).catch(n)})},r.prototype.close=function(){var e=this;return this._$q(function(t,n){var r=e._done(t,e),i=e._simpleBind(e.detach,e);e.hide().then(i).then(r).catch(n)})},r.prototype.attach=function(){if(this.isAttached&&this._panelEl)return this._$q.when(this);var e=this;return this._$q(function(n,r){var i=e._done(n,e),o=e._config.onDomAdded||t.noop,a=function(t){return e.isAttached=!0,e._addEventListeners(),t};e._$q.all([e._createBackdrop(),e._createPanel().then(a).catch(r)]).then(o).then(i).catch(r)})},r.prototype.detach=function(){if(!this.isAttached)return this._$q.when(this);var e=this,n=e._config.onDomRemoved||t.noop,r=function(){return e._removeEventListeners(),e._topFocusTrap&&e._topFocusTrap.parentNode&&e._topFocusTrap.parentNode.removeChild(e._topFocusTrap),e._bottomFocusTrap&&e._bottomFocusTrap.parentNode&&e._bottomFocusTrap.parentNode.removeChild(e._bottomFocusTrap),e._panelContainer.remove(),e.isAttached=!1,e._$q.when(e)};return this._restoreScroll&&(this._restoreScroll(),this._restoreScroll=null),this._$q(function(t,i){var o=e._done(t,e);e._$q.all([r(),!e._backdropRef||e._backdropRef.detach()]).then(n).then(o).catch(i)})},r.prototype.destroy=function(){this._config.locals=null},r.prototype.show=function(){if(!this._panelContainer)return this._$q(function(e,t){t("Panel does not exist yet. Call open() or attach().")});if(!this._panelContainer.hasClass(c))return this._$q.when(this);var e=this,n=function(){return e.removeClass(c),e._animateOpen()};return this._$q(function(r,i){var o=e._done(r,e),a=e._config.onOpenComplete||t.noop;e._$q.all([e._backdropRef?e._backdropRef.show():e,n().then(function(){e._focusOnOpen()},i)]).then(a).then(o).catch(i)})},r.prototype.hide=function(){if(!this._panelContainer)return this._$q(function(e,t){t("Panel does not exist yet. Call open() or attach().")});if(this._panelContainer.hasClass(c))return this._$q.when(this);var e=this;return this._$q(function(n,r){var i=e._done(n,e),o=e._config.onRemoving||t.noop,s=function(){var t=e._config.origin;t&&a(t).focus()},u=function(){e.addClass(c)};e._$q.all([e._backdropRef?e._backdropRef.hide():e,e._animateClose().then(o).then(u).then(s).catch(r)]).then(i,r)})},r.prototype.addClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.hasClass(e)||this._panelContainer.addClass(e)},r.prototype.removeClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.hasClass(e)&&this._panelContainer.removeClass(e)},r.prototype.toggleClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.toggleClass(e)},r.prototype._createPanel=function(){var e=this;return this._$q(function(n,r){e._config.locals||(e._config.locals={}),e._config.locals.mdPanelRef=e,e._$mdCompiler.compile(e._config).then(function(i){e._panelContainer=i.link(e._config.scope),a(e._config.attachTo).append(e._panelContainer),e._config.disableParentScroll&&(e._restoreScroll=e._$mdUtil.disableScrollAround(null,e._panelContainer)),e._panelEl=t.element(e._panelContainer[0].querySelector(".md-panel")),e._config.panelClass&&e._panelEl.addClass(e._config.panelClass),e._$animate.pin&&e._$animate.pin(e._panelContainer,a(e._config.attachTo)),e._configureTrapFocus(),e._addStyles().then(function(){n(e)},r)},r)})},r.prototype._addStyles=function(){var e=this;return this._$q(function(t){e._panelContainer.css("z-index",e._config.zIndex),e._panelEl.css("z-index",e._config.zIndex+1);var n=function(){e._panelEl.css("left",""),e._panelContainer.addClass(c),t(e)};if(e._config.fullscreen)return e._panelEl.addClass("_md-panel-fullscreen"),void n();var r=e._config.position;return r?void e._$rootScope.$$postDigest(function(){e._updatePosition(!0),t(e)}):void n()})},r.prototype._updatePosition=function(e){var t=this._config.position;if(t){t._setPanelPosition(this._panelEl),e&&this._panelContainer.addClass(c),this._panelEl.css("top",t.getTop()),this._panelEl.css("bottom",t.getBottom()),this._panelEl.css("left",t.getLeft()),this._panelEl.css("right",t.getRight());var n=this._$mdConstant.CSS.TRANSFORM;this._panelEl.css(n,t.getTransform())}},r.prototype._focusOnOpen=function(){if(this._config.focusOnOpen){var e=this;this._$rootScope.$$postDigest(function(){var t=e._$mdUtil.findFocusTarget(e._panelEl)||e._panelEl;t.focus()})}},r.prototype._createBackdrop=function(){if(this._config.hasBackdrop){if(!this._backdropRef){var e=this._$mdPanel.newPanelAnimation().openFrom(this._config.attachTo).withAnimation({open:"_md-opaque-enter",close:"_md-opaque-leave"}),t={animation:e,attachTo:this._config.attachTo,focusOnOpen:!1,panelClass:"_md-panel-backdrop",zIndex:this._config.zIndex-1};this._backdropRef=this._$mdPanel.create(t)}if(!this._backdropRef.isAttached)return this._backdropRef.attach()}},r.prototype._addEventListeners=function(){this._configureEscapeToClose(),this._configureClickOutsideToClose(),this._configureScrollListener()},r.prototype._removeEventListeners=function(){this._removeListeners&&this._removeListeners.forEach(function(e){e()}),this._removeListeners=null},r.prototype._configureEscapeToClose=function(){if(this._config.escapeToClose){var e=a(this._config.attachTo),t=this,n=function(e){e.keyCode===t._$mdConstant.KEY_CODE.ESCAPE&&(e.stopPropagation(),e.preventDefault(),t.close())};this._panelContainer.on("keydown",n),e.on("keydown",n),this._removeListeners.push(function(){t._panelContainer.off("keydown",n),e.off("keydown",n)})}},r.prototype._configureClickOutsideToClose=function(){if(this._config.clickOutsideToClose){var e,t=this._panelContainer,n=function(t){e=t.target},r=this,i=function(n){e===t[0]&&n.target===t[0]&&(n.stopPropagation(),n.preventDefault(),r.close())};t.on("mousedown",n),t.on("mouseup",i),this._removeListeners.push(function(){t.off("mousedown",n),t.off("mouseup",i)})}},r.prototype._configureScrollListener=function(){var e=t.bind(this,this._updatePosition),n=this._$$rAF.throttle(e),r=this,i=function(){r._config.disableParentScroll||n()};this._$window.addEventListener("scroll",i,!0),this._removeListeners.push(function(){r._$window.removeEventListener("scroll",i,!0)})},r.prototype._configureTrapFocus=function(){if(this._panelEl.attr("tabIndex","-1"),this._config.trapFocus){var e=this._panelEl;this._topFocusTrap=u.clone()[0],this._bottomFocusTrap=u.clone()[0];var t=function(){e.focus()};this._topFocusTrap.addEventListener("focus",t),this._bottomFocusTrap.addEventListener("focus",t),this._removeListeners.push(this._simpleBind(function(){this._topFocusTrap.removeEventListener("focus",t),this._bottomFocusTrap.removeEventListener("focus",t)},this)),e[0].parentNode.insertBefore(this._topFocusTrap,e[0]),e.after(this._bottomFocusTrap)}},r.prototype._animateOpen=function(){this.addClass("md-panel-is-showing");var e=this._config.animation;if(!e)return this.addClass("_md-panel-shown"),this._$q.when(this);var t=this;return this._$q(function(n){var r=t._done(n,t),i=function(){t._$log.warn("MdPanel Animations failed. Showing panel without animating."),r()};e.animateOpen(t._panelEl).then(r,i)})},r.prototype._animateClose=function(){var e=this._config.animation;if(!e)return this.removeClass("md-panel-is-showing"),this.removeClass("_md-panel-shown"),this._$q.when(this);var t=this;return this._$q(function(n){var r=function(){t.removeClass("md-panel-is-showing"),n(t)},i=function(){t._$log.warn("MdPanel Animations failed. Hiding panel without animating."),r()};e.animateClose(t._panelEl).then(r,i)})},r.prototype._simpleBind=function(e,t){return function(n){return e.apply(t,n)}},r.prototype._done=function(e,t){return function(){e(t)}},i.xPosition={CENTER:"center",ALIGN_START:"align-start",ALIGN_END:"align-end",OFFSET_START:"offset-start",OFFSET_END:"offset-end"},i.yPosition={CENTER:"center",ALIGN_TOPS:"align-tops",ALIGN_BOTTOMS:"align-bottoms",ABOVE:"above",BELOW:"below"},i.prototype.absolute=function(){return this._absolute=!0,this},i.prototype.top=function(e){return this._bottom="",this._top=e||"0",this},i.prototype.bottom=function(e){return this._top="",this._bottom=e||"0",this},i.prototype.left=function(e){return this._right="",this._left=e||"0",this},i.prototype.right=function(e){return this._left="",this._right=e||"0",this},i.prototype.centerHorizontally=function(){return this._left="50%",this._right="",this._translateX=["-50%"],this},i.prototype.centerVertically=function(){return this._top="50%",this._bottom="",this._translateY=["-50%"],this},i.prototype.center=function(){return this.centerHorizontally().centerVertically()},i.prototype.relativeTo=function(e){return this._absolute=!1,this._relativeToEl=a(e),this},i.prototype.addPanelPosition=function(e,t){if(!this._relativeToEl)throw new Error("addPanelPosition can only be used with relative positioning. Set relativeTo first.");return this._validateXPosition(e),this._validateYPosition(t),this._positions.push({x:e,y:t}),this},i.prototype._validateYPosition=function(e){if(null!=e){for(var t,n=Object.keys(i.yPosition),r=[],o=0;t=n[o];o++){var a=i.yPosition[t];if(r.push(a),a===e)return}throw new Error("Panel y position only accepts the following values:\n"+r.join(" | "))}},i.prototype._validateXPosition=function(e){if(null!=e){for(var t,n=Object.keys(i.xPosition),r=[],o=0;t=n[o];o++){var a=i.xPosition[t];if(r.push(a),a===e)return}throw new Error("Panel x Position only accepts the following values:\n"+r.join(" | "))}},i.prototype.withOffsetX=function(e){return this._translateX.push(e),this},i.prototype.withOffsetY=function(e){return this._translateY.push(e),this},i.prototype.getTop=function(){return this._top},i.prototype.getBottom=function(){return this._bottom},i.prototype.getLeft=function(){return this._left},i.prototype.getRight=function(){return this._right},i.prototype.getTransform=function(){var e=this._reduceTranslateValues("translateX",this._translateX),t=this._reduceTranslateValues("translateY",this._translateY);return(e+" "+t).trim()},i.prototype._isOnscreen=function(e){var t=parseInt(this.getLeft()),n=parseInt(this.getTop()),r=t+e[0].offsetWidth,i=n+e[0].offsetHeight;return t>=0&&n>=0&&i<=this._$window.innerHeight&&r<=this._$window.innerWidth},i.prototype.getActualPosition=function(){return this._actualPosition},i.prototype._reduceTranslateValues=function(e,t){return t.map(function(t){return e+"("+t+")"}).join(" ")},i.prototype._setPanelPosition=function(e){if(!this._absolute){if(this._actualPosition)return void this._calculatePanelPosition(e,this._actualPosition);for(var t=0;t<this._positions.length&&(this._actualPosition=this._positions[t],this._calculatePanelPosition(e,this._actualPosition),!this._isOnscreen(e));t++);}},i.prototype._calculatePanelPosition=function(e,t){var n=e[0].getBoundingClientRect(),r=n.width,o=n.height,a=this._relativeToEl[0].getBoundingClientRect(),s=a.left,c=a.right,u=a.width;switch(t.x){case i.xPosition.OFFSET_START:this._left=s-r+"px";break;case i.xPosition.ALIGN_END:this._left=c-r+"px";break;case i.xPosition.CENTER:var l=s+.5*u-.5*r;this._left=l+"px";break;case i.xPosition.ALIGN_START:this._left=s+"px";break;case i.xPosition.OFFSET_END:this._left=c+"px"}var f=a.top,p=a.bottom,d=a.height;switch(t.y){case i.yPosition.ABOVE:this._top=f-o+"px";break;case i.yPosition.ALIGN_BOTTOMS:this._top=p-o+"px";break;case i.yPosition.CENTER:var h=f+.5*d-.5*o;this._top=h+"px";break;case i.yPosition.ALIGN_TOPS:this._top=f+"px";break;case i.yPosition.BELOW:this._top=p+"px"}},o.animation={SLIDE:"md-panel-animate-slide",SCALE:"md-panel-animate-scale",FADE:"md-panel-animate-fade"},o.prototype.openFrom=function(e){return e=e.target?e.target:e,this._openFrom=this._getPanelAnimationTarget(e),this._closeTo||(this._closeTo=this._openFrom),this},o.prototype.closeTo=function(e){return this._closeTo=this._getPanelAnimationTarget(e),this},o.prototype._getPanelAnimationTarget=function(e){return t.isDefined(e.top)||t.isDefined(e.left)?{element:n,bounds:{top:e.top||0,left:e.left||0}}:this._getBoundingClientRect(a(e))},o.prototype.withAnimation=function(e){return this._animationClass=e,this},o.prototype.animateOpen=function(e){var n=this._$mdUtil.dom.animator;this._fixBounds(e);var r={},i=e[0].style.transform||"",a=n.toTransformCss(i),s=n.toTransformCss(i);switch(this._animationClass){case o.animation.SLIDE:e.css("opacity","1"),r={transitionInClass:"_md-panel-animate-enter"};var c=n.calculateSlideToOrigin(e,this._openFrom)||"";a=n.toTransformCss(c+" "+i);break;case o.animation.SCALE:r={transitionInClass:"_md-panel-animate-enter"};var u=n.calculateZoomToOrigin(e,this._openFrom)||"";a=n.toTransformCss(u+" "+i);break;case o.animation.FADE:r={transitionInClass:"_md-panel-animate-enter"};break;default:r=t.isString(this._animationClass)?{transitionInClass:this._animationClass}:{transitionInClass:this._animationClass.open,transitionOutClass:this._animationClass.close}}return n.translate3d(e,a,s,r)},o.prototype.animateClose=function(e){var n=this._$mdUtil.dom.animator,r={},i=e[0].style.transform||"",a=n.toTransformCss(i),s=n.toTransformCss(i);switch(this._animationClass){case o.animation.SLIDE:e.css("opacity","1"),r={transitionInClass:"_md-panel-animate-leave"};var c=n.calculateSlideToOrigin(e,this._closeTo)||"";s=n.toTransformCss(c+" "+i);break;case o.animation.SCALE:r={transitionInClass:"_md-panel-animate-scale-out _md-panel-animate-leave"};var u=n.calculateZoomToOrigin(e,this._closeTo)||"";s=n.toTransformCss(u+" "+i);break;case o.animation.FADE:r={transitionInClass:"_md-panel-animate-fade-out _md-panel-animate-leave"};break;default:r=t.isString(this._animationClass)?{transitionOutClass:this._animationClass}:{transitionInClass:this._animationClass.close,transitionOutClass:this._animationClass.open}}return n.translate3d(e,a,s,r)},o.prototype._fixBounds=function(e){var t=e[0].offsetWidth,n=e[0].offsetHeight;this._openFrom&&null==this._openFrom.bounds.height&&(this._openFrom.bounds.height=n),this._openFrom&&null==this._openFrom.bounds.width&&(this._openFrom.bounds.width=t),this._closeTo&&null==this._closeTo.bounds.height&&(this._closeTo.bounds.height=n),this._closeTo&&null==this._closeTo.bounds.width&&(this._closeTo.bounds.width=t)},o.prototype._getBoundingClientRect=function(e){if(e instanceof t.element)return{element:e,bounds:e[0].getBoundingClientRect()}}}(),function(){t.module("material.components.progressCircular",["material.core"])}(),function(){function e(e,n,r){function i(e,t,n){return e.attr("aria-valuemin",0),e.attr("aria-valuemax",100),e.attr("role","progressbar"),o}function o(r,i,o){function p(){o.$observe("value",function(e){var t=a(e);i.attr("aria-valuenow",t),h()!=l&&m(S,t)}),o.$observe("mdBufferValue",function(e){m(b,a(e))}),o.$observe("disabled",function(e){y=e===!0||e===!1?e:t.isDefined(e),i.toggleClass(f,!!y)}),o.$observe("mdMode",function(e){switch(g&&_.removeClass(g),e){case l:case u:case s:case c:_.addClass(g="_md-mode-"+e);break;default:_.addClass(g="_md-mode-"+c)}})}function d(){if(t.isUndefined(o.mdMode)){var e=t.isDefined(o.value),n=e?s:c;i.attr("md-mode",n),o.mdMode=n}}function h(){var e=(o.mdMode||"").trim();if(e)switch(e){case s:case c:case u:case l:break;default:e=c}return e}function m(e,r){if(!y&&h()){var i=n.supplant("translateX({0}%) scale({1},1)",[(r-100)/2,r/100]),o=v({transform:i});t.element(e).css(o)}}e(i);var g,y=o.hasOwnProperty("disabled"),v=n.dom.animator.toCss,b=t.element(i[0].querySelector("._md-bar1")),S=t.element(i[0].querySelector("._md-bar2")),_=t.element(i[0].querySelector("._md-container"));i.attr("md-mode",h()).toggleClass(f,y),d(),p()}function a(e){return Math.max(0,Math.min(e||0,100))}var s="determinate",c="indeterminate",u="buffer",l="query",f="_md-progress-linear-disabled";return{restrict:"E",template:'<div class="_md-container"><div class="_md-dashed"></div><div class="_md-bar _md-bar1"></div><div class="_md-bar _md-bar2"></div></div>',compile:i}}t.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",e),e.$inject=["$mdTheming","$mdUtil","$log"]}(),function(){function e(e,n,r,i){function o(o,a,s,c){function u(){a.hasClass("md-focused")||a.addClass("md-focused")}function l(r){var i=r.which||r.keyCode;if(i==n.KEY_CODE.ENTER||r.currentTarget==r.target)switch(i){case n.KEY_CODE.LEFT_ARROW:case n.KEY_CODE.UP_ARROW:r.preventDefault(),f.selectPrevious(),u();break;case n.KEY_CODE.RIGHT_ARROW:case n.KEY_CODE.DOWN_ARROW:r.preventDefault(),f.selectNext(),u();break;case n.KEY_CODE.ENTER:var o=t.element(e.getClosest(a[0],"form"));o.length>0&&o.triggerHandler("submit")}}a.addClass("_md"),r(a);var f=c[0],p=c[1]||e.fakeNgModel();f.init(p),o.mouseActive=!1,a.attr({role:"radiogroup",tabIndex:a.attr("tabindex")||"0"}).on("keydown",l).on("mousedown",function(e){o.mouseActive=!0,i(function(){o.mouseActive=!1},100)}).on("focus",function(){o.mouseActive===!1&&f.$element.addClass("md-focused")}).on("blur",function(){f.$element.removeClass("md-focused")})}function a(e){this._radioButtonRenderFns=[],this.$element=e}function s(){return{init:function(e){this._ngModelCtrl=e,this._ngModelCtrl.$render=t.bind(this,this.render)},add:function(e){this._radioButtonRenderFns.push(e)},remove:function(e){var t=this._radioButtonRenderFns.indexOf(e);t!==-1&&this._radioButtonRenderFns.splice(t,1)},render:function(){this._radioButtonRenderFns.forEach(function(e){e()})},setViewValue:function(e,t){this._ngModelCtrl.$setViewValue(e,t),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return c(this.$element,1)},selectPrevious:function(){return c(this.$element,-1)},setActiveDescendant:function(e){this.$element.attr("aria-activedescendant",e)}}}function c(n,r){var i=e.iterator(n[0].querySelectorAll("md-radio-button"),!0);if(i.count()){var o=function(e){return!t.element(e).attr("disabled")},a=n[0].querySelector("md-radio-button.md-checked"),s=i[r<0?"previous":"next"](a,o)||i.first();t.element(s).triggerHandler("click")}}return a.prototype=s(),{restrict:"E",controller:["$element",a],require:["mdRadioGroup","?ngModel"],link:{pre:o}}}function n(e,t,n){function r(r,o,a,s){function c(e){if(!s)throw"RadioGroupController not found.";s.add(l),a.$observe("value",l),o.on("click",u).on("$destroy",function(){s.remove(l)})}function u(e){o[0].hasAttribute("disabled")||r.$apply(function(){s.setViewValue(a.value,e&&e.type)})}function l(){function e(e){"MD-RADIO-GROUP"!=o.parent()[0].nodeName&&o.parent()[e?"addClass":"removeClass"](i)}var t=s.getViewValue()==a.value;t!==p&&(p=t,o.attr("aria-checked",t),t?(e(!0),o.addClass(i),s.setActiveDescendant(o.attr("id"))):(e(!1),o.removeClass(i)))}function f(n,r){function i(){return a.id||"radio_"+t.nextUid()}r.ariaId=i(),n.attr({id:r.ariaId,role:"radio","aria-checked":"false"}),e.expectWithText(n,"aria-label")}var p;n(o),f(o,r),c()}var i="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-off"></div><div class="_md-on"></div></div><div ng-transclude class="_md-label"></div>',link:r}}t.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",e).directive("mdRadioButton",n),e.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],n.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){function e(e,r,i,o){function a(e,n){var o=function(){return!1},a=function(){return i.when(r.supplant(u,[n||""]))};return t.extend({isLockedOpen:o,isOpen:o,toggle:a,open:a,close:a,then:function(e){return c(n).then(e||t.noop)}},e)}function s(t,i){var a=e.get(t);return a||i?a:(o.error(r.supplant(u,[t||""])),n)}function c(t){return e.when(t).catch(o.error)}var u="SideNav '{0}' is not available! Did you use md-component-id='{0}'?",l={find:s,waitFor:c};return function(e,n){if(t.isUndefined(e))return l;var r=n===!0,i=l.find(e,r);return!i&&r?l.waitFor(e):!i&&t.isUndefined(n)?a(l,e):i}}function r(){return{restrict:"A",require:"^mdSidenav",link:function(e,t,n,r){}}}function i(e,r,i,o,a,s,c,u,l,f){function p(s,p,d,h){function m(e,t){s.isLockedOpen=e,e===t?p.toggleClass("_md-locked-open",!!e):a[e?"addClass":"removeClass"](p,"_md-locked-open"),T&&T.toggleClass("_md-locked-open",!!e)}function g(e){var t=r.findFocusTarget(p)||r.findFocusTarget(p,"[md-sidenav-focus]")||p,n=p.parent();n[e?"on":"off"]("keydown",S),T&&T[e?"on":"off"]("click",_);var i=y(n,e);return e&&(w=f[0].activeElement),v(e),I=l.all([e&&T?a.enter(T,n):T?a.leave(T):l.when(!0),a[e?"removeClass":"addClass"](p,"_md-closed")]).then(function(){s.isOpen&&t&&t.focus(),i&&i()})}function y(e,t){var n=p[0],r=e[0].scrollTop;if(t&&r){E={top:n.style.top,bottom:n.style.bottom,height:n.style.height};var i={top:r+"px",bottom:"initial",height:e[0].clientHeight+"px"};p.css(i),T.css(i)}if(!t&&E)return function(){n.style.top=E.top,n.style.bottom=E.bottom,n.style.height=E.height,T[0].style.top=null,T[0].style.bottom=null,T[0].style.height=null,E=null}}function v(e){var r=p.parent();e&&!O?(O=r.css("overflow"),r.css("overflow","hidden")):t.isDefined(O)&&(r.css("overflow",O),O=n)}function b(e){return s.isOpen==e?l.when(!0):l(function(t){s.isOpen=e,r.nextTick(function(){I.then(function(e){s.isOpen||(w&&w.focus(),w=null),t(e)})})})}function S(e){var t=e.keyCode===i.KEY_CODE.ESCAPE;return t?_(e):l.when(!0)}function _(e){return e.preventDefault(),h.close()}var O,T,E,w=null,I=l.when(!0),R=c(d.mdIsLockedOpen),P=function(){return R(s.$parent,{$media:function(t){return u.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),e(t)},$mdMedia:e})};t.isDefined(d.mdDisableBackdrop)||(T=r.createBackdrop(s,"_md-sidenav-backdrop md-opaque ng-enter")),p.addClass("_md"),o(p),T&&o.inherit(T,p),p.on("$destroy",function(){T&&T.remove(),h.destroy()}),s.$on("$destroy",function(){T&&T.remove()}),s.$watch(P,m),s.$watch("isOpen",g),h.$toggleOpen=b}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(e){return e.addClass("_md-closed"),e.attr("tabIndex","-1"),p}}}function o(e,t,n,r,i){var o=this;o.isOpen=function(){return!!e.isOpen},o.isLockedOpen=function(){return!!e.isLockedOpen},o.open=function(){return o.$toggleOpen(!0)},o.close=function(){return o.$toggleOpen(!1)},o.toggle=function(){return o.$toggleOpen(!e.isOpen)},o.$toggleOpen=function(t){return i.when(e.isOpen=t)},o.destroy=r.register(o,n.mdComponentId)}t.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",e).directive("mdSidenav",i).directive("mdSidenavFocus",r).controller("$mdSidenavController",o),e.$inject=["$mdComponentRegistry","$mdUtil","$q","$log"],i.$inject=["$mdMedia","$mdUtil","$mdConstant","$mdTheming","$animate","$compile","$parse","$log","$q","$document"],o.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){function e(e,r,i,o,a,s){function c(a,c){var u=t.element("<md-select-value><span></span></md-select-value>");if(u.append('<span class="_md-select-icon" aria-hidden="true"></span>'),u.addClass("_md-select-value"),u[0].hasAttribute("id")||u.attr("id","select_value_label_"+r.nextUid()),a.find("md-content").length||a.append(t.element("<md-content>").append(a.contents())),c.mdOnOpen&&(a.find("md-content").prepend(t.element('<div> <md-progress-circular md-mode="indeterminate" ng-if="$$loadingAsyncDone === false" md-diameter="25px"></md-progress-circular></div>')),a.find("md-option").attr("ng-show","$$loadingAsyncDone")),c.name){var l=t.element('<select class="_md-visually-hidden">');l.attr({name:"."+c.name,"ng-model":c.ngModel,"aria-hidden":"true",tabindex:"-1"});var f=a.find("md-option");t.forEach(f,function(e){var n=t.element("<option>"+e.innerHTML+"</option>");e.hasAttribute("ng-value")?n.attr("ng-value",e.getAttribute("ng-value")):e.hasAttribute("value")&&n.attr("value",e.getAttribute("value")),l.append(n)}),a.parent().append(l)}var p=r.parseAttributeBoolean(c.multiple),d=p?"multiple":"",h='<div class="_md-select-menu-container" aria-hidden="true"><md-select-menu {0}>{1}</md-select-menu></div>';return h=r.supplant(h,[d,a.html()]),a.empty().append(u),a.append(h),c.tabindex||c.$set("tabindex",0),function(a,c,u,l){function f(){var e=c.attr("aria-label")||c.attr("placeholder");!e&&O&&O.label&&(e=O.label.text()),S=e,o.expect(c,"aria-label",e)}function d(){A&&($=$||A.find("md-select-menu").controller("mdSelectMenu"),T.setLabelText($.selectedLabels()))}function h(){if(S){var e=$.selectedLabels({mode:"aria"});c.attr("aria-label",e.length?S+": "+e:S)}}function m(){O&&O.setHasValue($.selectedLabels().length>0||(c[0].validity||{}).badInput)}function g(){if(A=t.element(c[0].querySelector("._md-select-menu-container")),C=a,u.mdContainerClass){var e=A[0].getAttribute("class")+" "+u.mdContainerClass;A[0].setAttribute("class",e)}$=A.find("md-select-menu").controller("mdSelectMenu"),$.init(E,u.ngModel),c.on("$destroy",function(){A.remove()})}function y(e){var n=[32,13,38,40];if(n.indexOf(e.keyCode)!=-1)e.preventDefault(),v(e);else if(e.keyCode<=90&&e.keyCode>=31){e.preventDefault();var r=$.optNodeForKeyboardSearch(e);if(!r)return;var i=t.element(r).controller("mdOption");$.isMultiple||$.deselect(Object.keys($.selected)[0]),$.select(i.hashKey,i.value),$.refreshViewValue()}}function v(){C.isOpen=!0,c.attr("aria-expanded","true"),e.show({scope:C,preserveScope:!0,skipCompile:!0,element:A,target:c[0],selectCtrl:T,preserveElement:!0,hasBackdrop:!0,loadingAsync:!!u.mdOnOpen&&(a.$eval(u.mdOnOpen)||!0)}).finally(function(){C.isOpen=!1,c.focus(),c.attr("aria-expanded","false"),E.$setTouched()})}var b,S,_=!0,O=l[0],T=l[1],E=l[2],w=l[3],I=c.find("md-select-value"),R=t.isDefined(u.readonly),P=r.parseAttributeBoolean(u.mdNoAsterisk);if(O){var j=O.isErrorGetter||function(){return E.$invalid&&E.$touched};if(O.input&&c.find("md-select-header").find("input")[0]!==O.input[0])throw new Error("<md-input-container> can only have *one* child <input>, <textarea> or <select> element!");
O.input=c,O.label||o.expect(c,"aria-label",c.attr("placeholder")),a.$watch(j,O.setInvalid)}var A,C,$;if(g(),i(c),u.name&&w){var D=c.parent()[0].querySelector('select[name=".'+u.name+'"]');r.nextTick(function(){var e=t.element(D).controller("ngModel");e&&w.$removeControl(e)})}w&&t.isDefined(u.multiple)&&r.nextTick(function(){var e=E.$modelValue||E.$viewValue;e&&w.$setPristine()});var L=E.$render;E.$render=function(){L(),d(),h(),m()},u.$observe("placeholder",E.$render),O&&O.label&&u.$observe("required",function(e){O.label.toggleClass("md-required",e&&!P)}),T.setLabelText=function(e){if(T.setIsPlaceholder(!e),u.mdSelectedText)e=s(u.mdSelectedText)(a);else{var t=u.placeholder||(O&&O.label?O.label.text():"");e=e||t||""}var n=I.children().eq(0);n.html(e)},T.setIsPlaceholder=function(e){e?(I.addClass("_md-select-placeholder"),O&&O.label&&O.label.addClass("_md-placeholder")):(I.removeClass("_md-select-placeholder"),O&&O.label&&O.label.removeClass("_md-placeholder"))},R||(c.on("focus",function(e){O&&O.element.hasClass("md-input-has-value")&&O.setFocused(!0)}),c.on("blur",function(e){_&&(_=!1,C.isOpen&&e.stopImmediatePropagation()),C.isOpen||(O&&O.setFocused(!1),m())})),T.triggerClose=function(){s(u.mdOnClose)(a)},a.$$postDigest(function(){f(),d(),h()}),a.$watch(function(){return $.selectedLabels()},d);var k;u.$observe("ngMultiple",function(e){k&&k();var t=s(e);k=a.$watch(function(){return t(a)},function(e,t){e===n&&t===n||(e?c.attr("multiple","multiple"):c.removeAttr("multiple"),c.attr("aria-multiselectable",e?"true":"false"),A&&($.setMultiple(e),L=E.$render,E.$render=function(){L(),d(),h(),m()},E.$render()))})}),u.$observe("disabled",function(e){t.isString(e)&&(e=!0),b!==n&&b===e||(b=e,e?c.attr({"aria-disabled":"true"}).removeAttr("tabindex").off("click",v).off("keydown",y):c.attr({tabindex:u.tabindex,"aria-disabled":"false"}).on("click",v).on("keydown",y))}),u.hasOwnProperty("disabled")||u.hasOwnProperty("ngDisabled")||(c.attr({"aria-disabled":"false"}),c.on("click",v),c.on("keydown",y));var M={role:"listbox","aria-expanded":"false","aria-multiselectable":p&&!u.ngMultiple?"true":"false"};c[0].hasAttribute("id")||(M.id="select_"+r.nextUid());var x="select_container_"+r.nextUid();A.attr("id",x),M["aria-owns"]=x,c.attr(M),a.$on("$destroy",function(){e.destroy().finally(function(){O&&(O.setFocused(!1),O.setHasValue(!1),O.input=null),E.$setTouched()})})}}return{restrict:"E",require:["^?mdInputContainer","mdSelect","ngModel","?^form"],compile:c,controller:function(){}}}function r(e,r,i){function o(e,n,o,a){function s(e){13!=e.keyCode&&32!=e.keyCode||c(e)}function c(n){var i=r.getClosest(n.target,"md-option"),o=i&&t.element(i).data("$mdOptionController");if(i&&o){if(i.hasAttribute("disabled"))return n.stopImmediatePropagation(),!1;var a=u.hashGetter(o.value),s=t.isDefined(u.selected[a]);e.$apply(function(){u.isMultiple?s?u.deselect(a):u.select(a,o.value):s||(u.deselect(Object.keys(u.selected)[0]),u.select(a,o.value)),u.refreshViewValue()})}}var u=a[0];n.addClass("_md"),i(n),n.on("click",c),n.on("keypress",s)}function a(i,o,a){function s(){var e=l.ngModel.$modelValue||l.ngModel.$viewValue||[];if(t.isArray(e)){var n=Object.keys(l.selected),r=e.map(l.hashGetter),i=n.filter(function(e){return r.indexOf(e)===-1});i.forEach(l.deselect),r.forEach(function(t,n){l.select(t,e[n])})}}function c(){var e=l.ngModel.$viewValue||l.ngModel.$modelValue;Object.keys(l.selected).forEach(l.deselect),l.select(l.hashGetter(e),e)}var l=this;l.isMultiple=t.isDefined(o.multiple),l.selected={},l.options={},i.$watchCollection(function(){return l.options},function(){l.ngModel.$render()});var f,p;l.setMultiple=function(e){function n(e,n){return t.isArray(e||n||[])}var r=l.ngModel;p=p||r.$isEmpty,l.isMultiple=e,f&&f(),l.isMultiple?(r.$validators["md-multiple"]=n,r.$render=s,i.$watchCollection(l.modelBinding,function(e){n(e)&&s(e),l.ngModel.$setPristine()}),r.$isEmpty=function(e){return!e||0===e.length}):(delete r.$validators["md-multiple"],r.$render=c)};var d,h,m,g="",y=300;l.optNodeForKeyboardSearch=function(e){d&&clearTimeout(d),d=setTimeout(function(){d=n,g="",m=n,h=n},y),g+=String.fromCharCode(e.keyCode);var r=new RegExp("^"+g,"i");h||(h=a.find("md-option"),m=new Array(h.length),t.forEach(h,function(e,t){m[t]=e.textContent.trim()}));for(var i=0;i<m.length;++i)if(r.test(m[i]))return h[i]},l.init=function(n,r){if(l.ngModel=n,l.modelBinding=r,l.ngModel.$isEmpty=function(e){return!l.options[e]},n.$options&&n.$options.trackBy){var o={},a=e(n.$options.trackBy);l.hashGetter=function(e,t){return o.$value=e,a(t||i,o)}}else l.hashGetter=function(e){return t.isObject(e)?"object_"+(e.$$mdSelectId||(e.$$mdSelectId=++u)):e};l.setMultiple(l.isMultiple)},l.selectedLabels=function(e){e=e||{};var t=e.mode||"html",n=r.nodesToArray(a[0].querySelectorAll("md-option[selected]"));if(n.length){var i;return"html"==t?i=function(e){var t=e.innerHTML,n=e.querySelector(".md-ripple-container");return n?t.replace(n.outerHTML,""):t}:"aria"==t&&(i=function(e){return e.hasAttribute("aria-label")?e.getAttribute("aria-label"):e.textContent}),n.map(i).join(", ")}return""},l.select=function(e,t){var n=l.options[e];n&&n.setSelected(!0),l.selected[e]=t},l.deselect=function(e){var t=l.options[e];t&&t.setSelected(!1),delete l.selected[e]},l.addOption=function(e,n){if(t.isDefined(l.options[e]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+n.value+'" found.');l.options[e]=n,t.isDefined(l.selected[e])&&(l.select(e,n.value),l.refreshViewValue())},l.removeOption=function(e){delete l.options[e]},l.refreshViewValue=function(){var e,n=[];for(var r in l.selected)(e=l.options[r])?n.push(e.value):n.push(l.selected[r]);var i=l.ngModel.$options&&l.ngModel.$options.trackBy,o=l.isMultiple?n:n[0],a=l.ngModel.$modelValue;(i?t.equals(a,o):a==o)||(l.ngModel.$setViewValue(o),l.ngModel.$render())}}return a.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu"],scope:!1,controller:a,link:{pre:o}}}function i(e,n){function r(e,n){return e.append(t.element('<div class="_md-text">').append(e.contents())),e.attr("tabindex",n.tabindex||"0"),i}function i(r,i,o,a){function s(e,t,n){if(!f.hashGetter)return void(n||r.$$postDigest(function(){s(e,t,!0)}));var i=f.hashGetter(t,r),o=f.hashGetter(e,r);u.hashKey=o,u.value=e,f.removeOption(i,u),f.addOption(o,u)}function c(){var e={role:"option","aria-selected":"false"};i[0].hasAttribute("id")||(e.id="select_option_"+n.nextUid()),i.attr(e)}var u=a[0],f=a[1];f.isMultiple&&(i.addClass("_md-checkbox-enabled"),i.prepend(l.clone())),t.isDefined(o.ngValue)?r.$watch(o.ngValue,s):t.isDefined(o.value)?s(o.value):r.$watch(function(){return i.text().trim()},s),o.$observe("disabled",function(e){e?i.attr("tabindex","-1"):i.attr("tabindex","0")}),r.$$postDigest(function(){o.$observe("selected",function(e){t.isDefined(e)&&("string"==typeof e&&(e=!0),e?(f.isMultiple||f.deselect(Object.keys(f.selected)[0]),f.select(u.hashKey,u.value)):f.deselect(u.hashKey),f.refreshViewValue())})}),e.attach(r,i),c(),r.$on("$destroy",function(){f.removeOption(u.hashKey,u)})}function o(e){this.selected=!1,this.setSelected=function(t){t&&!this.selected?e.attr({selected:"selected","aria-selected":"true"}):!t&&this.selected&&(e.removeAttr("selected"),e.attr("aria-selected","false")),this.selected=t}}return o.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:o,compile:r}}function o(){function e(e,n){function r(){return e.parent().find("md-select-header").length}function i(){var r=e.find("label");r.length||(r=t.element("<label>"),e.prepend(r)),r.addClass("_md-container-ignore"),n.label&&r.text(n.label)}r()||i()}return{restrict:"E",compile:e}}function a(){return{restrict:"E"}}function s(e){function r(e,r,u,l,f,p,d,h,m){function g(e,t,n){function r(){return d(t,{addClass:"_md-leave"}).start()}function i(){t.removeClass("_md-active"),t.attr("aria-hidden","true"),t[0].style.display="none",v(n),!n.$destroy&&n.restoreFocus&&n.target.focus()}return n=n||{},n.cleanupInteraction(),n.cleanupResizing(),n.hideBackdrop(),n.$destroy===!0?i():r().then(i)}function y(i,o,a){function s(e,t,n){return n.parent.append(t),f(function(e,n){try{d(t,{removeClass:"_md-leave",duration:0}).start().then(c).then(e)}catch(e){n(e)}})}function c(){return f(function(e){if(a.isRemoved)return f.reject(!1);var t=b(i,o,a);t.container.element.css(_.toCss(t.container.styles)),t.dropDown.element.css(_.toCss(t.dropDown.styles)),p(function(){o.addClass("_md-active"),t.dropDown.element.css(_.toCss({transform:""})),y(a.focusedNode),e()})})}function g(e,t,n){return n.disableParentScroll&&!u.getClosest(n.target,"MD-DIALOG")?n.restoreScroll=u.disableScrollAround(n.element,n.parent):n.disableParentScroll=!1,n.hasBackdrop&&(n.backdrop=u.createBackdrop(e,"_md-select-backdrop _md-click-catcher"),h.enter(n.backdrop,m[0].body,null,{duration:0})),function(){n.backdrop&&n.backdrop.remove(),n.disableParentScroll&&n.restoreScroll(),delete n.restoreScroll}}function y(e){e&&!e.hasAttribute("disabled")&&e.focus()}function v(e,n){var r=o.find("md-select-menu");if(!n.target)throw new Error(u.supplant(S,[n.target]));t.extend(n,{isRemoved:!1,target:t.element(n.target),parent:t.element(n.parent),selectEl:r,contentEl:o.find("md-content"),optionNodes:r[0].getElementsByTagName("md-option")})}function O(){var e=function(e,t,n){return function(){if(!n.isRemoved){var r=b(e,t,n),i=r.container,o=r.dropDown;i.element.css(_.toCss(i.styles)),o.element.css(_.toCss(o.styles))}}}(i,o,a),n=t.element(l);return n.on("resize",e),n.on("orientationchange",e),function(){n.off("resize",e),n.off("orientationchange",e)}}function T(){a.loadingAsync&&!a.isRemoved&&(i.$$loadingAsyncDone=!1,f.when(a.loadingAsync).then(function(){i.$$loadingAsyncDone=!0,delete a.loadingAsync}).then(function(){p(c)}))}function E(){function t(t){t.preventDefault(),t.stopPropagation(),a.restoreFocus=!1,u.nextTick(e.hide,!0)}function i(t){var n=r.KEY_CODE;switch(t.preventDefault(),t.stopPropagation(),t.keyCode){case n.UP_ARROW:return l();case n.DOWN_ARROW:return c();case n.SPACE:case n.ENTER:var i=u.getClosest(t.target,"md-option");i&&(p.triggerHandler({type:"click",target:i}),t.preventDefault()),f(t);break;case n.TAB:case n.ESCAPE:t.stopPropagation(),t.preventDefault(),a.restoreFocus=!0,u.nextTick(e.hide,!0);break;default:if(t.keyCode>=31&&t.keyCode<=90){var o=p.controller("mdSelectMenu").optNodeForKeyboardSearch(t);a.focusedNode=o||a.focusedNode,o&&o.focus()}}}function s(e){var t,r=u.nodesToArray(a.optionNodes),i=r.indexOf(a.focusedNode);do i===-1?i=0:"next"===e&&i<r.length-1?i++:"prev"===e&&i>0&&i--,t=r[i],t.hasAttribute("disabled")&&(t=n);while(!t&&i<r.length-1&&i>0);t&&t.focus(),a.focusedNode=t}function c(){s("next")}function l(){s("prev")}function f(t){function n(){var e=!1;if(t&&t.currentTarget.children.length>0){var n=t.currentTarget.children[0],r=n.scrollHeight>n.clientHeight;if(r&&n.children.length>0){var i=t.pageX-t.currentTarget.getBoundingClientRect().left;i>n.querySelector("md-option").offsetWidth&&(e=!0)}}return e}if(!(t&&"click"==t.type&&t.currentTarget!=p[0]||n())){var r=u.getClosest(t.target,"md-option");r&&r.hasAttribute&&!r.hasAttribute("disabled")&&(t.preventDefault(),t.stopPropagation(),d.isMultiple||(a.restoreFocus=!0,u.nextTick(function(){e.hide(d.ngModel.$viewValue)},!0)))}}if(!a.isRemoved){var p=a.selectEl,d=p.controller("mdSelectMenu")||{};return o.addClass("_md-clickable"),a.backdrop&&a.backdrop.on("click",t),p.on("keydown",i),p.on("click",f),function(){a.backdrop&&a.backdrop.off("click",t),p.off("keydown",i),p.off("click",f),o.removeClass("_md-clickable"),a.isRemoved=!0}}}return T(),v(i,a),a.hideBackdrop=g(i,o,a),s(i,o,a).then(function(e){return o.attr("aria-hidden","false"),a.alreadyOpen=!0,a.cleanupInteraction=E(),a.cleanupResizing=O(),e},a.hideBackdrop)}function v(e){var t=e.selectCtrl;if(t){var n=e.selectEl.controller("mdSelectMenu");t.setLabelText(n?n.selectedLabels():""),t.triggerClose()}}function b(e,n,r){var f,p=n[0],d=r.target[0].children[0],h=m[0].body,g=r.selectEl[0],y=r.contentEl[0],v=h.getBoundingClientRect(),b=d.getBoundingClientRect(),S=!1,_={left:v.left+c,top:c,bottom:v.height-c,right:v.width-c-(u.floatingScrollbars()?16:0)},O={top:b.top-_.top,left:b.left-_.left,right:_.right-(b.left+b.width),bottom:_.bottom-(b.top+b.height)},T=v.width-2*c,E=g.querySelector("md-option[selected]"),w=g.getElementsByTagName("md-option"),I=g.getElementsByTagName("md-optgroup"),R=s(n,y),P=i(r.loadingAsync);f=P?y.firstElementChild||y:E?E:I.length?I[0]:w.length?w[0]:y.firstElementChild||y,y.offsetWidth>T?y.style["max-width"]=T+"px":y.style.maxWidth=null,S&&(y.style["min-width"]=b.width+"px"),R&&g.classList.add("_md-overflow");var j=f;"MD-OPTGROUP"===(j.tagName||"").toUpperCase()&&(j=w[0]||y.firstElementChild||y,f=j),r.focusedNode=j,p.style.display="block";var A=g.getBoundingClientRect(),C=a(f);if(f){var $=l.getComputedStyle(f);C.paddingLeft=parseInt($.paddingLeft,10)||0,C.paddingRight=parseInt($.paddingRight,10)||0}if(R){var D=y.offsetHeight/2;y.scrollTop=C.top+C.height/2-D,O.top<D?y.scrollTop=Math.min(C.top,y.scrollTop+D-O.top):O.bottom<D&&(y.scrollTop=Math.max(C.top+C.height-A.height,y.scrollTop-D+O.bottom))}var L,k,M,x;S?(L=b.left,k=b.top+b.height,M="50% 0",k+A.height>_.bottom&&(k=b.top-A.height,M="50% 100%")):(L=b.left+C.left-C.paddingLeft+2,k=Math.floor(b.top+b.height/2-C.height/2-C.top+y.scrollTop)+2,M=C.left+b.width/2+"px "+(C.top+C.height/2-y.scrollTop)+"px 0px",x=Math.min(b.width+C.paddingLeft+C.paddingRight,T));var F=p.getBoundingClientRect(),U=Math.round(100*Math.min(b.width/A.width,1))/100,B=Math.round(100*Math.min(b.height/A.height,1))/100;return{container:{element:t.element(p),styles:{left:Math.floor(o(_.left,L,_.right-F.width)),top:Math.floor(o(_.top,k,_.bottom-F.height)),"min-width":x}},dropDown:{element:t.element(g),styles:{transformOrigin:M,transform:r.alreadyOpen?"":u.supplant("scale({0},{1})",[U,B])}}}}var S="$mdSelect.show() expected a target element in options.target but got '{0}'!",_=u.dom.animator;return{parent:"body",themable:!0,onShow:y,onRemove:g,hasBackdrop:!0,disableParentScroll:!0}}function i(e){return e&&t.isFunction(e.then)}function o(e,t,n){return Math.max(e,Math.min(t,n))}function a(e){return e?{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}:{left:0,top:0,width:0,height:0}}function s(e,t){var n=!1;try{var r=e[0].style.display;e[0].style.display="block",n=t.scrollHeight>t.offsetHeight,e[0].style.display=r}finally{}return n}return r.$inject=["$mdSelect","$mdConstant","$mdUtil","$window","$q","$$rAF","$animateCss","$animate","$document"],e("$mdSelect").setDefaults({methods:["target"],options:r})}var c=8,u=0,l=t.element('<div class="_md-container"><div class="_md-icon"></div></div>');t.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",e).directive("mdSelectMenu",r).directive("mdOption",i).directive("mdOptgroup",o).directive("mdSelectHeader",a).provider("$mdSelect",s),e.$inject=["$mdSelect","$mdUtil","$mdTheming","$mdAria","$compile","$parse"],r.$inject=["$parse","$mdUtil","$mdTheming"],i.$inject=["$mdButtonInkRipple","$mdUtil"],s.$inject=["$$interimElementProvider"]}(),function(){function e(){return{controller:function(){},compile:function(e){var r=e.find("md-slider");if(r){var i=r.attr("md-vertical");return i!==n&&e.attr("md-vertical",""),r.attr("flex")||r.attr("flex",""),function(e,n,r,i){function o(e){n.children().attr("disabled",e),n.find("input").attr("disabled",e)}n.addClass("_md");var a=t.noop;r.disabled?o(!0):r.ngDisabled&&(a=e.$watch(r.ngDisabled,function(e){o(e)})),e.$on("$destroy",function(){a()});var s;i.fitInputWidthToTextLength=function(e){var t=n[0].querySelector("md-input-container");if(t){var r=getComputedStyle(t),i=parseInt(r.minWidth),o=2*parseInt(r.padding);s=s||parseInt(r.maxWidth);var a=Math.max(s,i+o+i/2*e);t.style.maxWidth=a+"px"}}}}}}}function r(e,n,r,i,o,a,s,c,u,l){function f(e,n){var i=t.element(e[0].getElementsByClassName("_md-slider-wrapper")),o=n.tabindex||0;return i.attr("tabindex",o),(n.disabled||n.ngDisabled)&&i.attr("tabindex",-1),i.attr("role","slider"),r.expect(e,"aria-label"),p}function p(r,f,p,d){function h(){O(),j()}function m(e){ce=parseFloat(e),f.attr("aria-valuemin",e),h()}function g(e){ue=parseFloat(e),f.attr("aria-valuemax",e),h()}function y(e){le=parseFloat(e)}function v(e){fe=A(parseInt(e),0,6)}function b(){f.attr("aria-disabled",!!G())}function S(){if(ie&&!G()&&!t.isUndefined(le)){if(le<=0){var e="Slider step value must be greater than zero when in discrete mode";throw u.error(e),new Error(e)}var r=Math.floor((ue-ce)/le);pe||(pe=t.element("<canvas>").css("position","absolute"),Z.append(pe),de=pe[0].getContext("2d"));var i=T();!i||i.height||i.width||(O(),i=he),pe[0].width=i.width,pe[0].height=i.height;for(var o,a=0;a<=r;a++){var s=n.getComputedStyle(Z[0]);de.fillStyle=s.color||"black",o=Math.floor((re?i.height:i.width)*(a/r)),de.fillRect(re?0:o-1,re?o-1:0,re?i.width:2,re?2:i.height)}}}function _(){if(pe&&de){var e=T();de.clearRect(0,0,e.width,e.height)}}function O(){he=K[0].getBoundingClientRect()}function T(){return te(),he}function E(e){if(!G()){var t;(re?e.keyCode===o.KEY_CODE.DOWN_ARROW:e.keyCode===o.KEY_CODE.LEFT_ARROW)?t=-le:(re?e.keyCode===o.KEY_CODE.UP_ARROW:e.keyCode===o.KEY_CODE.RIGHT_ARROW)&&(t=le),t=oe?-t:t,t&&((e.metaKey||e.ctrlKey||e.altKey)&&(t*=4),e.preventDefault(),e.stopPropagation(),r.$evalAsync(function(){P(Y.$viewValue+t)}))}}function w(){S(),r.mouseActive=!0,ee.removeClass("md-focused"),l(function(){r.mouseActive=!1},100)}function I(){r.mouseActive===!1&&ee.addClass("md-focused")}function R(){ee.removeClass("md-focused"),f.removeClass("_md-active"),_()}function P(e){Y.$setViewValue(A(C(e)))}function j(){isNaN(Y.$viewValue)&&(Y.$viewValue=Y.$modelValue),Y.$viewValue=A(Y.$viewValue);var e=V(Y.$viewValue);r.modelValue=Y.$viewValue,f.attr("aria-valuenow",Y.$viewValue),$(e),Q.text(Y.$viewValue)}function A(e,n,r){if(t.isNumber(e))return n=t.isNumber(n)?n:ce,r=t.isNumber(r)?r:ue,Math.max(n,Math.min(r,e))}function C(e){if(t.isNumber(e)){var n=Math.round((e-ce)/le)*le+ce;return n=Math.round(n*Math.pow(10,fe))/Math.pow(10,fe),z&&z.fitInputWidthToTextLength&&i.debounce(function(){z.fitInputWidthToTextLength(n.toString().length)},100)(),n}}function $(e){e=N(e);var t=100*e+"%",n=oe?100*(1-e)+"%":t;J.css(re?"bottom":"left",t),X.css(re?"height":"width",n),f.toggleClass(oe?"_md-max":"_md-min",0===e),f.toggleClass(oe?"_md-min":"_md-max",1===e)}function D(e){if(!G()){f.addClass("_md-active"),f[0].focus(),O();var t=H(q(re?e.pointer.y:e.pointer.x)),n=A(C(t));r.$apply(function(){P(n),$(V(n))})}}function L(e){if(!G()){f.removeClass("_md-dragging");var t=H(q(re?e.pointer.y:e.pointer.x)),n=A(C(t));r.$apply(function(){P(n),j()})}}function k(e){G()||(me=!0,e.stopPropagation(),f.addClass("_md-dragging"),F(e))}function M(e){me&&(e.stopPropagation(),F(e))}function x(e){me&&(e.stopPropagation(),me=!1)}function F(e){ie?B(re?e.pointer.y:e.pointer.x):U(re?e.pointer.y:e.pointer.x)}function U(e){r.$evalAsync(function(){P(H(q(e)))})}function B(e){var t=H(q(e)),n=A(C(t));$(q(e)),Q.text(n)}function N(e){return Math.max(0,Math.min(e||0,1))}function q(e){var t=re?he.top:he.left,n=re?he.height:he.width,r=(e-t)/n;return Math.max(0,Math.min(1,re?1-r:r))}function H(e){var t=oe?1-e:e;return ce+t*(ue-ce)}function V(e){var t=(e-ce)/(ue-ce);return oe?1-t:t}a(f);var Y=d[0]||{$setViewValue:function(e){this.$viewValue=e,this.$viewChangeListeners.forEach(function(e){e()})},$parsers:[],$formatters:[],$viewChangeListeners:[]},z=d[1],G=(t.element(i.getClosest(f,"_md-slider-container",!0)),p.ngDisabled?t.bind(null,c(p.ngDisabled),r.$parent):function(){return f[0].hasAttribute("disabled")}),W=t.element(f[0].querySelector("._md-thumb")),Q=t.element(f[0].querySelector("._md-thumb-text")),J=W.parent(),K=t.element(f[0].querySelector("._md-track-container")),X=t.element(f[0].querySelector("._md-track-fill")),Z=t.element(f[0].querySelector("._md-track-ticks")),ee=t.element(f[0].getElementsByClassName("_md-slider-wrapper")),te=(t.element(f[0].getElementsByClassName("_md-slider-content")),i.throttle(O,5e3)),ne=3,re=t.isDefined(p.mdVertical),ie=t.isDefined(p.mdDiscrete),oe=t.isDefined(p.mdInvert);t.isDefined(p.min)?p.$observe("min",m):m(0),t.isDefined(p.max)?p.$observe("max",g):g(100),t.isDefined(p.step)?p.$observe("step",y):y(1),t.isDefined(p.round)?p.$observe("round",v):v(ne);var ae=t.noop;p.ngDisabled&&(ae=r.$parent.$watch(p.ngDisabled,b)),s.register(ee,"drag",{horizontal:!re}),r.mouseActive=!1,ee.on("keydown",E).on("mousedown",w).on("focus",I).on("blur",R).on("$md.pressdown",D).on("$md.pressup",L).on("$md.dragstart",k).on("$md.drag",M).on("$md.dragend",x),setTimeout(h,0);var se=e.throttle(h);t.element(n).on("resize",se),r.$on("$destroy",function(){t.element(n).off("resize",se)}),Y.$render=j,Y.$viewChangeListeners.push(j),Y.$formatters.push(A),Y.$formatters.push(C);var ce,ue,le,fe,pe,de,he={};O();var me=!1}return{scope:{},require:["?ngModel","?^mdSliderContainer"],template:'<div class="_md-slider-wrapper"><div class="_md-slider-content"><div class="_md-track-container"><div class="_md-track"></div><div class="_md-track _md-track-fill"></div><div class="_md-track-ticks"></div></div><div class="_md-thumb-container"><div class="_md-thumb"></div><div class="_md-focus-thumb"></div><div class="_md-focus-ring"></div><div class="_md-sign"><span class="_md-thumb-text"></span></div><div class="_md-disabled-thumb"></div></div></div></div>',compile:f}}t.module("material.components.slider",["material.core"]).directive("mdSlider",r).directive("mdSliderContainer",e),r.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse","$log","$timeout"]}(),function(){function n(t,n){return["$mdUtil",function(r){return{restrict:"A",multiElement:!0,link:function(i,o,a){var s=i.$on("$md-resize-enable",function(){s();var c=e.getComputedStyle(o[0]);i.$watch(a[t],function(e){if(!!e===n){r.nextTick(function(){i.$broadcast("$md-resize")});var t={cachedTransitionStyles:c};r.dom.animator.waitTransitionEnd(o,t).then(function(){i.$broadcast("$md-resize")})}})})}}}]}t.module("material.components.showHide",["material.core"]).directive("ngShow",n("ngShow",!0)).directive("ngHide",n("ngHide",!1))}(),function(){function e(e){function t(e){function t(t,i,o){var a=e(o[n]);i.on(r,function(e){t.$applyAsync(function(){a(t,{$event:e})})})}return{restrict:"A",link:t}}var n="md"+e,r="$md."+e.toLowerCase();return t.$inject=["$parse"],t}t.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",e("SwipeLeft")).directive("mdSwipeRight",e("SwipeRight")).directive("mdSwipeUp",e("SwipeUp")).directive("mdSwipeDown",e("SwipeDown"))}(),function(){function e(e,r,i,o,a){function s(e){function t(e,t){t.addClass("_md-sticky-clone");var n={element:e,clone:t};return m.items.push(n),o.nextTick(function(){d.prepend(n.clone)}),h(),function(){m.items.forEach(function(t,n){t.element[0]===e[0]&&(m.items.splice(n,1),t.clone.remove())}),h()}}function a(){m.items.forEach(s),m.items=m.items.sort(function(e,t){return e.top<t.top?-1:1});for(var e,t=d.prop("scrollTop"),n=m.items.length-1;n>=0;n--)if(t>m.items[n].top){e=m.items[n];break}l(e)}function s(e){var t=e.element[0];for(e.top=0,e.left=0,e.right=0;t&&t!==d[0];)e.top+=t.offsetTop,e.left+=t.offsetLeft,t.offsetParent&&(e.right+=t.offsetParent.offsetWidth-t.offsetWidth-t.offsetLeft),t=t.offsetParent;e.height=e.element.prop("offsetHeight");var r=o.floatingScrollbars()?"0":n;o.bidi(e.clone,"margin-left",e.left,r),o.bidi(e.clone,"margin-right",r,e.right)}function c(){var e=d.prop("scrollTop"),t=e>(c.prevScrollTop||0);if(c.prevScrollTop=e,0===e)return void l(null);if(t){if(m.next&&m.next.top<=e)return void l(m.next);if(m.current&&m.next&&m.next.top-e<=m.next.height)return void p(m.current,e+(m.next.top-m.next.height-e))}if(!t){if(m.current&&m.prev&&e<m.current.top)return void l(m.prev);if(m.next&&m.current&&e>=m.next.top-m.current.height)return void p(m.current,e+(m.next.top-e-m.current.height))}m.current&&p(m.current,e)}function l(e){if(m.current!==e){m.current&&(p(m.current,null),f(m.current,null)),e&&f(e,"active"),m.current=e;var t=m.items.indexOf(e);m.next=m.items[t+1],m.prev=m.items[t-1],f(m.next,"next"),f(m.prev,"prev")}}function f(e,t){e&&e.state!==t&&(e.state&&(e.clone.attr("sticky-prev-state",e.state),e.element.attr("sticky-prev-state",e.state)),e.clone.attr("sticky-state",t),e.element.attr("sticky-state",t),e.state=t)}function p(e,t){e&&(null===t||t===n?e.translateY&&(e.translateY=null,e.clone.css(r.CSS.TRANSFORM,"")):(e.translateY=t,o.bidi(e.clone,r.CSS.TRANSFORM,"translate3d("+e.left+"px,"+t+"px,0)","translateY("+t+"px)")))}var d=e.$element,h=i.throttle(a);u(d),d.on("$scrollstart",h),d.on("$scroll",c);var m;return m={prev:null,current:null,next:null,items:[],add:t,refreshElements:a}}function c(n){var r,i=t.element("<div>");e[0].body.appendChild(i[0]);for(var o=["sticky","-webkit-sticky"],a=0;a<o.length;++a)if(i.css({position:o[a],top:0,"z-index":2}),i.css("position")==o[a]){r=o[a];break}return i.remove(),r}function u(e){function t(){+o.now()-r>a?(n=!1,e.triggerHandler("$scrollend")):(e.triggerHandler("$scroll"),i.throttle(t))}var n,r,a=200;e.on("scroll touchmove",function(){n||(n=!0,i.throttle(t),e.triggerHandler("$scrollstart")),e.triggerHandler("$scroll"),r=+o.now()})}var l=c();return function(e,t,n){var r=t.controller("mdContent");if(r)if(l)t.css({position:l,top:0,"z-index":2});else{var i=r.$element.data("$$sticky");i||(i=s(r),r.$element.data("$$sticky",i));var o=n||a(t.clone())(e),c=i.add(t,o);e.$on("$destroy",c)}}}t.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",e),e.$inject=["$document","$mdConstant","$$rAF","$mdUtil","$compile"]}(),function(){function e(e,n,r,i,o,a){function s(e,s){var u=c.compile(e,s);return e.addClass("_md-dragging"),function(e,s,c,l){function f(t){m&&m(e)||(t.stopPropagation(),s.addClass("_md-dragging"),v={width:g.prop("offsetWidth")})}function p(e){if(v){e.stopPropagation(),e.srcEvent&&e.srcEvent.preventDefault();var t=e.pointer.distanceX/v.width,n=l.$viewValue?1+t:t;n=Math.max(0,Math.min(1,n)),g.css(r.CSS.TRANSFORM,"translate3d("+100*n+"%,0,0)"),v.translate=n}}function d(e){if(v){e.stopPropagation(),s.removeClass("_md-dragging"),g.css(r.CSS.TRANSFORM,"");var t=l.$viewValue?v.translate>.5:v.translate<.5;t&&h(!l.$viewValue),v=null}}function h(t){e.$apply(function(){l.$setViewValue(t),l.$render()})}l=l||n.fakeNgModel();var m=null;null!=c.disabled?m=function(){return!0}:c.ngDisabled&&(m=i(c.ngDisabled));var g=t.element(s[0].querySelector("._md-thumb-container")),y=t.element(s[0].querySelector("._md-container"));o(function(){s.removeClass("_md-dragging")}),u(e,s,c,l),m&&e.$watch(m,function(e){s.attr("tabindex",e?-1:0)}),a.register(y,"drag"),y.on("$md.dragstart",f).on("$md.drag",p).on("$md.dragend",d);var v}}var c=e[0];return{restrict:"E",priority:210,transclude:!0,template:'<div class="_md-container"><div class="_md-bar"></div><div class="_md-thumb-container"><div class="_md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="_md-label"></div>',require:"?ngModel",compile:s}}t.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",e),e.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){function e(e,n,r,i){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="md-subheader _md">  <div class="_md-subheader-inner">    <div class="_md-subheader-content"></div>  </div></div>',link:function(n,i,o,a,s){function c(e){return t.element(e[0].querySelector("._md-subheader-content"))}r(i),i.addClass("_md");var u=i[0].outerHTML;s(n,function(e){c(i).append(e)}),i.hasClass("md-no-sticky")||s(n,function(r){var o=t.element('<div class="_md-subheader-wrapper">'+u+"</div>");c(o).append(r),e(n,i,o)})}}}t.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",e),e.$inject=["$mdSticky","$compile","$mdTheming","$mdUtil"]}(),function(){t.module("material.components.tabs",["material.core","material.components.icon"])}(),function(){function e(e){return{restrict:"E",link:function(t,n){n.addClass("_md"),t.$on("$destroy",function(){e.destroy()})}}}function n(e){function n(e){i=e}function r(e,n,r,o){function a(t,a,s){i=s.textContent||s.content;var l=!o("gt-sm");return a=r.extractElementByName(a,"md-toast",!0),s.element=a,s.onSwipe=function(e,t){var i=e.type.replace("$md.",""),o=i.replace("swipe","");"down"===o&&s.position.indexOf("top")!=-1&&!l||"up"===o&&(s.position.indexOf("bottom")!=-1||l)||("left"!==o&&"right"!==o||!l)&&(a.addClass("_md-"+i),r.nextTick(n.cancel))},s.openClass=c(s.position),s.parent.addClass(s.openClass),r.hasComputedStyle(s.parent,"position","static")&&s.parent.css("position","relative"),a.on(u,s.onSwipe),a.addClass(l?"_md-bottom":s.position.split(" ").map(function(e){return"_md-"+e}).join(" ")),s.parent&&s.parent.addClass("_md-toast-animating"),e.enter(a,s.parent).then(function(){s.parent&&s.parent.removeClass("_md-toast-animating")})}function s(t,n,i){return n.off(u,i.onSwipe),i.parent&&i.parent.addClass("_md-toast-animating"),i.openClass&&i.parent.removeClass(i.openClass),(1==i.$destroy?n.remove():e.leave(n)).then(function(){i.parent&&i.parent.removeClass("_md-toast-animating"),r.hasComputedStyle(i.parent,"position","static")&&i.parent.css("position","")})}function c(e){return o("gt-xs")?"_md-toast-open-"+(e.indexOf("top")>-1?"top":"bottom"):"_md-toast-open-bottom"}var u="$md.swipeleft $md.swiperight $md.swipeup $md.swipedown";return{onShow:a,onRemove:s,position:"bottom left",themable:!0,hideDelay:3e3,autoWrap:!0,transformTemplate:function(e,n){var r=n.autoWrap&&e&&!/md-toast-content/g.test(e);if(r){var i=document.createElement("md-template");i.innerHTML=e;for(var o=0;o<i.children.length;o++)if("MD-TOAST"===i.children[o].nodeName){var a=t.element('<div class="md-toast-content">');a.append(t.element(i.children[o].childNodes)),i.children[o].appendChild(a[0])}return i.outerHTML}return e||""}}}var i,o="ok",a=e("$mdToast").setDefaults({methods:["position","hideDelay","capsule","parent","position"],options:r}).addPreset("simple",{argOption:"textContent",methods:["textContent","content","action","highlightAction","highlightClass","theme","parent"],options:["$mdToast","$mdTheming",function(e,t){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">  <div class="md-toast-content">    <span flex class="md-toast-text" role="alert" aria-relevant="all" aria-atomic="true">      {{ toast.content }}    </span>    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()"         ng-class="highlightClasses">      {{ toast.action }}    </md-button>  </div></md-toast>',controller:["$scope",function(t){var n=this;n.highlightAction&&(t.highlightClasses=["md-highlight",n.highlightClass]),t.$watch(function(){return i},function(){n.content=i}),this.resolve=function(){e.hide(o)}}],theme:t.defaultTheme(),controllerAs:"toast",bindToController:!0}}]}).addMethod("updateTextContent",n).addMethod("updateContent",n);return r.$inject=["$animate","$mdToast","$mdUtil","$mdMedia"],a}t.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",e).provider("$mdToast",n),e.$inject=["$mdToast"],n.$inject=["$$interimElementProvider"]}(),function(){function e(e,n,r,i,o){var a=t.bind(null,r.supplant,"translate3d(0,{0}px,0)");return{template:"",restrict:"E",link:function(s,c,u){function l(){function i(e){var t=c.parent().find("md-content");!m&&t.length&&l(null,t),e=s.$eval(e),e===!1?g():g=p()}function l(e,t){t&&c.parent()[0]===t.parent()[0]&&(m&&m.off("scroll",S),m=t,g=p())}function f(e){var t=e?e.target.scrollTop:v;_(),y=Math.min(h/b,Math.max(0,y+t-v)),c.css(n.CSS.TRANSFORM,a([-y*b])),m.css(n.CSS.TRANSFORM,a([(h-y)*b])),v=t,r.nextTick(function(){var e=c.hasClass("md-whiteframe-z1");e&&!y?o.removeClass(c,"md-whiteframe-z1"):!e&&y&&o.addClass(c,"md-whiteframe-z1");
})}function p(){return m?(m.on("scroll",S),m.attr("scroll-shrink","true"),r.nextTick(d,!1),function(){m.off("scroll",S),m.attr("scroll-shrink","false"),d()}):t.noop}function d(){h=c.prop("offsetHeight");var e=-h*b+"px";m.css({"margin-top":e,"margin-bottom":e}),f()}var h,m,g=t.noop,y=0,v=0,b=u.mdShrinkSpeedFactor||.5,S=e.throttle(f),_=r.debounce(d,5e3);s.$on("$mdContentLoaded",l),u.$observe("mdScrollShrink",i),u.ngShow&&s.$watch(u.ngShow,d),u.ngHide&&s.$watch(u.ngHide,d),s.$on("$destroy",g)}c.addClass("_md"),i(c),t.isDefined(u.mdScrollShrink)&&l()}}}t.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",e),e.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate"]}(),function(){function n(e,n,r,i,o,a,s,c,u,l){function f(f,h,m){function g(){f.delay=f.delay||p}function y(){var e="center top";switch(f.direction){case"left":e="right center";break;case"right":e="left center";break;case"top":e="center bottom";break;case"bottom":e="center top"}j.css("transform-origin",e)}function v(e){e?E():w()}function b(){if(h[0]&&"MutationObserver"in n){var e=new MutationObserver(function(e){e.forEach(function(e){"md-visible"===e.attributeName&&(f.visibleWatcher||(f.visibleWatcher=f.$watch("visible",v))),"md-direction"===e.attributeName&&I(f.direction)})});e.observe(h[0],{attributes:!0}),m.hasOwnProperty("mdVisible")&&(f.visibleWatcher=f.$watch("visible",v))}else f.visibleWatcher=f.$watch("visible",v),f.$watch("direction",I);var t=function(){f.$destroy()};h.one("$destroy",t),P.one("$destroy",t),f.$on("$destroy",function(){T(!1),h.remove(),e&&e.disconnect()}),h.text().indexOf(u.startSymbol())>-1&&f.$watch(function(){return h.text().trim()},S)}function S(e){if((e||!P.attr("aria-label"))&&!P.text().trim()){var t=e||h.text().trim(),n=u(t)(P.scope());P.attr("aria-label",n)}}function _(){h.detach(),h.attr("role","tooltip")}function O(){function t(){T(!1)}var r=!1;if(P[0]&&"MutationObserver"in n){var a=new MutationObserver(function(e){e.some(function(e){return"disabled"===e.attributeName&&P[0].disabled})&&o.nextTick(function(){T(!1)})});a.observe(P[0],{attributes:!0})}var s=function(){c=document.activeElement===P[0]},c=!1;l.register("scroll",t,!0),l.register("blur",s),l.register("resize",$),f.$on("$destroy",function(){l.deregister("scroll",t,!0),l.deregister("blur",s),l.deregister("resize",$),P.off("focus mouseenter touchstart",u).off("blur mouseleave touchend touchcancel",p).off("mousedown",d),p(),a&&a.disconnect()});var u=function(e){return"focus"===e.type&&c?void(c=!1):(P.on("blur mouseleave touchend touchcancel",p),void T(!0))},p=function(){var t=f.hasOwnProperty("autohide")?f.autohide:m.hasOwnProperty("mdAutohide");(t||r||i[0].activeElement!==P[0])&&(C&&(e.cancel(C),T.queued=!1,C=null),P.off("blur mouseleave touchend touchcancel",p),P.triggerHandler("blur"),T(!1)),r=!1},d=function(){r=!0};P.on("mousedown",d),P.on("focus mouseenter touchstart",u)}function T(t){T.queued&&T.value===!!t||!T.queued&&f.visible===!!t||(T.value=!!t,T.queued||(t?(T.queued=!0,C=e(function(){f.visible=T.value,T.queued=!1,C=null,f.visibleWatcher||v(f.visible)},f.delay)):o.nextTick(function(){f.visible=!1,f.visibleWatcher||v(!1)})))}function E(){if(h[0].textContent.trim()){if(h.css({top:0,left:0}),A.append(h),o.hasComputedStyle(h,"display","none"))return f.visible=!1,void h.detach();I(),t.forEach([h,j],function(e){s.addClass(e,"_md-show")})}}function w(){var e=[];t.forEach([h,j],function(t){t.parent()&&t.hasClass("_md-show")&&e.push(s.removeClass(t,"_md-show"))}),c.all(e).then(function(){f.visible||h.detach()})}function I(){f.visible&&(y(),R())}function R(){function e(e){var t={left:e.left,top:e.top};return t.left=Math.min(t.left,A.prop("scrollWidth")-n.width-d),t.left=Math.max(t.left,d),t.top=Math.min(t.top,A.prop("scrollHeight")-n.height-d),t.top=Math.max(t.top,d),t}function t(e){return"left"===e?{left:r.left-n.width-d,top:r.top+r.height/2-n.height/2}:"right"===e?{left:r.left+r.width+d,top:r.top+r.height/2-n.height/2}:"top"===e?{left:r.left+r.width/2-n.width/2,top:r.top-n.height-d}:{left:r.left+r.width/2-n.width/2,top:r.top+r.height+d}}var n=o.offsetRect(h,A),r=o.offsetRect(P,A),i=t(f.direction),a=h.prop("offsetParent");f.direction?i=e(i):a&&i.top>a.scrollHeight-n.height-d&&(i=e(t("top"))),h.css({left:i.left+"px",top:i.top+"px"})}a(h);var P=o.getParentWithPointerEvents(h),j=t.element(h[0].querySelector("._md-content")),A=t.element(document.body),C=null,$=r.throttle(function(){I()});s.pin&&s.pin(h,P),g(),_(),O(),y(),b(),S()}var p=0,d=8;return{restrict:"E",transclude:!0,priority:210,template:'<div class="_md-content _md" ng-transclude></div>',scope:{delay:"=?mdDelay",visible:"=?mdVisible",autohide:"=?mdAutohide",direction:"@?mdDirection"},compile:function(e,t){return t.mdDirection||t.$set("mdDirection","bottom"),f}}}function r(){function n(e){o[e.type]&&o[e.type].forEach(function(t){t.call(this,e)},this)}function r(t,r,i){var s=o[t]=o[t]||[];s.length||(i?e.addEventListener(t,n,!0):a.on(t,n)),s.indexOf(r)===-1&&s.push(r)}function i(t,r,i){var s=o[t],c=s?s.indexOf(r):-1;c>-1&&(s.splice(c,1),0===s.length&&(i?e.removeEventListener(t,n,!0):a.off(t,n)))}var o={},a=t.element(e);return{register:r,deregister:i}}t.module("material.components.tooltip",["material.core"]).directive("mdTooltip",n).service("$$mdTooltipRegistry",r),n.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$animate","$q","$interpolate","$$mdTooltipRegistry"]}(),function(){function e(){return{controller:r,template:n,compile:function(e,t){e.addClass("md-virtual-repeat-container").addClass(t.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function n(e){return'<div class="md-virtual-repeat-scroller"><div class="md-virtual-repeat-sizer"></div><div class="md-virtual-repeat-offsetter">'+e[0].innerHTML+"</div></div>"}function r(e,n,r,i,o,a,s,c){this.$rootScope=i,this.$scope=a,this.$element=s,this.$attrs=c,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.$attrs.mdTopIndex?(this.bindTopIndex=r(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),t.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,t.bind(this,function(e){e!==this.topIndex&&this.scrollToIndex(e)}))):this.topIndex=0,this.scroller=s[0].getElementsByClassName("md-virtual-repeat-scroller")[0],this.sizer=this.scroller.getElementsByClassName("md-virtual-repeat-sizer")[0],this.offsetter=this.scroller.getElementsByClassName("md-virtual-repeat-offsetter")[0];var u=t.bind(this,this.updateSize);e(t.bind(this,function(){u();var e=n.debounce(u,10,null,!1),r=t.element(o);this.size||e(),r.on("resize",e),a.$on("$destroy",function(){r.off("resize",e)}),a.$emit("$md-resize-enable"),a.$on("$md-resize",u)}))}function i(e){return{controller:o,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(t,n){var r=n.mdVirtualRepeat,i=r.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),o=i[1],a=e(i[2]),s=n.mdExtraName&&e(n.mdExtraName);return function(e,t,n,r,i){r[0].link_(r[1],i,o,a,s)}}}}function o(e,n,r,i,o,a,s,c){this.$scope=e,this.$element=n,this.$attrs=r,this.$browser=i,this.$document=o,this.$rootScope=a,this.$$rAF=s,this.onDemand=c.parseAttributeBoolean(r.mdOnDemand),this.browserCheckUrlChange=i.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=e.$eval(r.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=t.noop,this.blocks={},this.pooledBlocks=[],e.$on("$destroy",t.bind(this,this.cleanupBlocks_))}function a(e){if(!t.isFunction(e.getItemAtIndex)||!t.isFunction(e.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ");this.model=e}t.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",e).directive("mdVirtualRepeat",i);var s=1533917,c=3;r.$inject=["$$rAF","$mdUtil","$parse","$rootScope","$window","$scope","$element","$attrs"],r.prototype.register=function(e){this.repeater=e,t.element(this.scroller).on("scroll wheel touchmove touchend",t.bind(this,this.handleScroll_))},r.prototype.isHorizontal=function(){return this.horizontal},r.prototype.getSize=function(){return this.size},r.prototype.setSize_=function(e){var t=this.getDimensionName_();this.size=e,this.$element[0].style[t]=e+"px"},r.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},r.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.handleScroll_(),this.repeater&&this.repeater.containerUpdated())},r.prototype.getScrollSize=function(){return this.scrollSize},r.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},r.prototype.sizeScroller_=function(e){var t=this.getDimensionName_(),n=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",e<s)this.sizer.style[t]=e+"px";else{this.sizer.style[t]="auto",this.sizer.style[n]="auto";var r=Math.floor(e/s),i=document.createElement("div");i.style[t]="1533917px",i.style[n]="1px";for(var o=0;o<r;o++)this.sizer.appendChild(i.cloneNode(!1));i.style[t]=e-r*s+"px",this.sizer.appendChild(i)}},r.prototype.autoShrink_=function(e){var t=Math.max(e,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&t!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var n=this.originalSize||this.size;if(!n||t<n)this.originalSize||(this.originalSize=this.size),this.setSize_(t);else if(null!==this.originalSize){this.unsetSize_();var r=this.originalSize;this.originalSize=null,r||this.updateSize(),this.setSize_(r||this.size)}this.repeater.containerUpdated()}},r.prototype.setScrollSize=function(e){var t=e+this.offsetSize;this.scrollSize!==t&&(this.sizeScroller_(t),this.autoShrink_(t),this.scrollSize=t)},r.prototype.getScrollOffset=function(){return this.scrollOffset},r.prototype.scrollTo=function(e){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=e,this.handleScroll_()},r.prototype.scrollToIndex=function(e){var t=this.repeater.getItemSize(),n=this.repeater.itemsLength;e>n&&(e=n-1),this.scrollTo(t*e)},r.prototype.resetScroll=function(){this.scrollTo(0)},r.prototype.handleScroll_=function(){var e=t.element(document)[0],n="ltr"==this.$element[0].dir||"rtl"!=e.dir&&"rtl"!=e.body.dir;n||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var r=this.isHorizontal()?n?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(r===this.scrollOffset||r>this.scrollSize-this.size)){var i=this.repeater.getItemSize();if(i){var o=Math.max(0,Math.floor(r/i)-c),a=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||n?o*i:-(o*i))+"px)";if(this.scrollOffset=r,this.offsetter.style.webkitTransform=a,this.offsetter.style.transform=a,this.bindTopIndex){var s=Math.floor(r/i);s!==this.topIndex&&s<this.repeater.getItemCount()&&(this.topIndex=s,this.bindTopIndex.assign(this.$scope,s),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},i.$inject=["$parse"],o.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],o.Block,o.prototype.link_=function(e,n,r,i,o){this.container=e,this.transclude=n,this.repeatName=r,this.rawRepeatListExpression=i,this.extraName=o,this.sized=!1,this.repeatListExpression=t.bind(this,this.repeatListExpression_),this.container.register(this)},o.prototype.cleanupBlocks_=function(){t.forEach(this.pooledBlocks,function(e){e.element.remove()})},o.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var e=this.getBlock_(0);e.element[0].parentNode||this.parentNode.appendChild(e.element[0]),this.itemSize=e.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=e,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},o.prototype.repeatListExpression_=function(e){var t=this.rawRepeatListExpression(e);if(this.onDemand&&t){var n=new a(t);return n.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),n}return t},o.prototype.containerUpdated=function(){return this.itemSize?(this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e,t){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(e,t)}))),this.updateIndexes_(),void((this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof a&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items)))):(this.unwatchItemSize_&&this.unwatchItemSize_!==t.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e){e&&e.length&&this.$$rAF(t.bind(this,this.readItemSize_))})),void(this.$rootScope.$$phase||this.$scope.$digest()))},o.prototype.getItemSize=function(){return this.itemSize},o.prototype.getItemCount=function(){return this.itemsLength},o.prototype.virtualRepeatUpdate_=function(e,n){this.isVirtualRepeatUpdating_=!0;var r=e&&e.length||0,i=!1;if(this.items&&r<this.items.length&&0!==this.container.getScrollOffset())return this.items=e,void this.container.resetScroll();r!==this.itemsLength&&(i=!0,this.itemsLength=r),this.items=e,(e!==n||i)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,i&&this.container.setScrollSize(r*this.itemSize);var o,a=!1;this.isFirstRender&&(a=!0,this.isFirstRender=!1,o=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex,this.container.scrollToIndex(o)),Object.keys(this.blocks).forEach(function(e){var t=parseInt(e,10);(t<this.newStartIndex||t>=this.newEndIndex)&&this.poolBlock_(t)},this),this.$browser.$$checkUrlChange=t.noop;var s,c,u=[],l=[];for(s=this.newStartIndex;s<this.newEndIndex&&null==this.blocks[s];s++)c=this.getBlock_(s),this.updateBlock_(c,s),u.push(c);for(;null!=this.blocks[s];s++)this.updateBlock_(this.blocks[s],s);for(var f=s-1;s<this.newEndIndex;s++)c=this.getBlock_(s),this.updateBlock_(c,s),l.push(c);u.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(u),this.$element[0].nextSibling),l.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(l),this.blocks[f]&&this.blocks[f].element[0].nextSibling),a&&this.container.scrollToIndex(o),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isVirtualRepeatUpdating_=!1},o.prototype.getBlock_=function(e){if(this.pooledBlocks.length)return this.pooledBlocks.pop();var n;return this.transclude(t.bind(this,function(t,r){n={element:t,new:!0,scope:r},this.updateScope_(r,e),this.parentNode.appendChild(t[0])})),n},o.prototype.updateBlock_=function(e,t){this.blocks[t]=e,(e.new||e.scope.$index!==t||e.scope[this.repeatName]!==this.items[t])&&(e.new=!1,this.updateScope_(e.scope,t),this.$rootScope.$$phase||e.scope.$digest())},o.prototype.updateScope_=function(e,t){e.$index=t,e[this.repeatName]=this.items&&this.items[t],this.extraName&&(e[this.extraName(this.$scope)]=this.items[t])},o.prototype.poolBlock_=function(e){this.pooledBlocks.push(this.blocks[e]),this.parentNode.removeChild(this.blocks[e].element[0]),delete this.blocks[e]},o.prototype.domFragmentFromBlocks_=function(e){var t=this.$document[0].createDocumentFragment();return e.forEach(function(e){t.appendChild(e.element[0])}),t},o.prototype.updateIndexes_=function(){var e=this.items?this.items.length:0,t=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(e-t,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+t+c,this.newEndIndex=Math.min(e,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-c)},a.prototype.$$includeIndexes=function(e,t){for(var n=e;n<t;n++)this.hasOwnProperty(n)||(this[n]=this.model.getItemAtIndex(n));this.length=this.model.getLength()}}(),function(){function e(e){function t(t,a,s){var c="";s.$observe("mdWhiteframe",function(t){t=parseInt(t,10)||o,t!=n&&(t>i||t<r)&&(e.warn("md-whiteframe attribute value is invalid. It should be a number between "+r+" and "+i,a[0]),t=o);var u=t==n?"":"md-whiteframe-"+t+"dp";s.$updateClass(u,c),c=u})}var n=-1,r=1,i=24,o=4;return{link:t}}t.module("material.components.whiteframe",["material.core"]).directive("mdWhiteframe",e),e.$inject=["$log"]}(),function(){function e(e,r,s,c,u,l,f,p,d,h){function m(){s.initOptionalProperties(e,d,{searchText:null,selectedItem:null}),u(r),b(),s.nextTick(function(){_(),y(),v(),r.on("focus",v)})}function g(){function t(){var e=0,t=r.find("md-input-container");if(t.length){var n=t.find("input");e=t.prop("offsetHeight"),e-=n.prop("offsetTop"),e-=n.prop("offsetHeight"),e+=t.prop("offsetTop")}return e}function n(){var e=de.scrollContainer.getBoundingClientRect(),t={};e.right>f.right-o&&(t.left=u.right-e.width+"px"),de.$.scrollContainer.css(t)}if(!de)return s.nextTick(g,!1,e);var c,u=de.wrap.getBoundingClientRect(),l=de.snap.getBoundingClientRect(),f=de.root.getBoundingClientRect(),p=l.bottom-f.top,h=f.bottom-l.top,m=u.left-f.left,y=u.width,v=t();d.mdFloatingLabel&&(m+=a,y-=2*a),c={left:m+"px",minWidth:y+"px",maxWidth:Math.max(u.right-f.left,f.right-u.left)-o+"px"},p>h&&f.height-u.bottom-o<i?(c.top="auto",c.bottom=h+"px",c.maxHeight=Math.min(i,u.top-f.top-o)+"px"):(c.top=p-v+"px",c.bottom="auto",c.maxHeight=Math.min(i,f.bottom+s.scrollTop()-u.bottom-o)+"px"),de.$.scrollContainer.css(c),s.nextTick(n,!1)}function y(){de.$.root.length&&(u(de.$.scrollContainer),de.$.scrollContainer.detach(),de.$.root.append(de.$.scrollContainer),f.pin&&f.pin(de.$.scrollContainer,p))}function v(){e.autofocus&&de.input.focus()}function b(){var n=parseInt(e.delay,10)||0;d.$observe("disabled",function(e){le.isDisabled=s.parseAttributeBoolean(e,!1)}),d.$observe("required",function(e){le.isRequired=s.parseAttributeBoolean(e,!1)}),d.$observe("readonly",function(e){le.isReadonly=s.parseAttributeBoolean(e,!1)}),e.$watch("searchText",n?s.debounce(k,n):k),e.$watch("selectedItem",j),t.element(l).on("resize",g),e.$on("$destroy",S)}function S(){if(le.hidden||s.enableScrolling(),t.element(l).off("resize",g),de){var e="ul scroller scrollContainer input".split(" ");t.forEach(e,function(e){de.$[e].remove()})}}function _(){de={main:r[0],scrollContainer:r[0].getElementsByClassName("md-virtual-repeat-container")[0],scroller:r[0].getElementsByClassName("md-virtual-repeat-scroller")[0],ul:r.find("ul")[0],input:r.find("input")[0],wrap:r.find("md-autocomplete-wrap")[0],root:document.body},de.li=de.ul.getElementsByTagName("li"),de.snap=O(),de.$=T(de)}function O(){for(var e=r;e.length;e=e.parent())if(t.isDefined(e.attr("md-autocomplete-snap")))return e[0];return de.wrap}function T(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t.element(e[r]));return n}function E(n,r){!n&&r?(g(),de&&s.nextTick(function(){s.disableScrollAround(de.ul),Se=w(t.element(de.wrap))},!1,e)):n&&!r&&s.nextTick(function(){s.enableScrolling(),Se&&(Se(),Se=null)},!1,e)}function w(e){function t(e){e.preventDefault()}return e.on("wheel",t),e.on("touchmove",t),function(){e.off("wheel",t),e.off("touchmove",t)}}function I(){me=!0}function R(){ye||de.input.focus(),me=!1,le.hidden=Y()}function P(){de.input.focus()}function j(t,n){t&&N(t).then(function(r){e.searchText=r,$(t,n)}),t!==n&&A()}function A(){t.isFunction(e.itemChange)&&e.itemChange(q(e.selectedItem))}function C(){t.isFunction(e.textChange)&&e.textChange()}function $(e,t){ge.forEach(function(n){n(e,t)})}function D(e){ge.indexOf(e)==-1&&ge.push(e)}function L(e){var t=ge.indexOf(e);t!=-1&&ge.splice(t,1)}function k(t,n){le.index=H(),t!==n&&N(e.selectedItem).then(function(r){t!==r&&(e.selectedItem=null,t!==n&&C(),K()?ce():(le.matches=[],V(!1),ne()))})}function M(){ye=!1,me||(le.hidden=Y())}function x(e){e&&(me=!1,ye=!1),de.input.blur()}function F(n){ye=!0,t.isString(e.searchText)||(e.searchText=""),le.hidden=Y(),le.hidden||ce()}function U(t){switch(t.keyCode){case c.KEY_CODE.DOWN_ARROW:if(le.loading)return;t.stopPropagation(),t.preventDefault(),le.index=Math.min(le.index+1,le.matches.length-1),ie(),ne();break;case c.KEY_CODE.UP_ARROW:if(le.loading)return;t.stopPropagation(),t.preventDefault(),le.index=le.index<0?le.matches.length-1:Math.max(0,le.index-1),ie(),ne();break;case c.KEY_CODE.TAB:if(R(),le.hidden||le.loading||le.index<0||le.matches.length<1)return;Z(le.index);break;case c.KEY_CODE.ENTER:if(le.hidden||le.loading||le.index<0||le.matches.length<1)return;if(W())return;t.stopPropagation(),t.preventDefault(),Z(le.index);break;case c.KEY_CODE.ESCAPE:t.stopPropagation(),t.preventDefault(),e.searchText&&ee(),x(!0)}}function B(){return t.isNumber(e.minLength)?e.minLength:1}function N(t){function n(t){return t&&e.itemText?e.itemText(q(t)):null}return h.when(n(t)||t)}function q(e){if(!e)return n;var t={};return le.itemName&&(t[le.itemName]=e),t}function H(){return e.autoselect?0:-1}function V(e){le.loading!=e&&(le.loading=e),le.hidden=Y()}function Y(){return!(!le.loading||G())||(!!W()||(!ye||!z()))}function z(){return K()&&G()||se()}function G(){return!!le.matches.length}function W(){return!!le.scope.selectedItem}function Q(){return le.loading&&!W()}function J(){return N(le.matches[le.index])}function K(){return(e.searchText||"").length>=B()}function X(e,t,n){Object.defineProperty(le,e,{get:function(){return n},set:function(e){var r=n;n=e,t(e,r)}})}function Z(t){s.nextTick(function(){N(le.matches[t]).then(function(e){var t=de.$.input.controller("ngModel");t.$setViewValue(e),t.$render()}).finally(function(){e.selectedItem=le.matches[t],V(!1)})},!1)}function ee(t){V(!0),le.index=0,le.matches=[],e.searchText="";var n=document.createEvent("CustomEvent");n.initCustomEvent("input",!0,!0,{value:""}),de.input.dispatchEvent(n),de.input.blur(),e.searchText="",de.input.focus()}function te(n){function r(t){t&&(t=h.when(t),be++,V(!0),s.nextTick(function(){t.then(i).finally(function(){0===--be&&V(!1)})},!0,e))}function i(t){he[a]=t,(n||"")===(e.searchText||"")&&(le.matches=t,le.hidden=Y(),le.loading&&V(!1),e.selectOnMatch&&ue(),ne(),g())}var o=e.$parent.$eval(pe),a=n.toLowerCase(),c=t.isArray(o),u=!!o.then;c?i(o):u&&r(o)}function ne(){J().then(function(e){le.messages=[re(),e]})}function re(){if(ve===le.matches.length)return"";switch(ve=le.matches.length,le.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+le.matches.length+" matches available."}}function ie(){if(de.li[0]){var e=de.li[0].offsetHeight,t=e*le.index,n=t+e,r=de.scroller.clientHeight,i=de.scroller.scrollTop;t<i?ae(t):n>i+r&&ae(n-r)}}function oe(){return 0!==be}function ae(e){de.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(e)}function se(){var e=(le.scope.searchText||"").length;return le.hasNotFound&&!G()&&(!le.loading||oe())&&e>=B()&&(ye||me)&&!W()}function ce(){var t=e.searchText||"",n=t.toLowerCase();!e.noCache&&he[n]?(le.matches=he[n],ne(),V(!1)):te(t),le.hidden=Y()}function ue(){var t=e.searchText,n=le.matches,r=n[0];1===n.length&&N(r).then(function(n){var r=t==n;e.matchInsensitive&&!r&&(r=t.toLowerCase()==n.toLowerCase()),r&&Z(0)})}var le=this,fe=e.itemsExpr.split(/ in /i),pe=fe[1],de=null,he={},me=!1,ge=[],ye=!1,ve=0,be=0,Se=null;return X("hidden",E,!0),le.scope=e,le.parent=e.$parent,le.itemName=fe[0],le.matches=[],le.loading=!1,le.hidden=!0,le.index=null,le.messages=[],le.id=s.nextUid(),le.isDisabled=null,le.isRequired=null,le.isReadonly=null,le.hasNotFound=!1,le.keydown=U,le.blur=M,le.focus=F,le.clear=ee,le.select=Z,le.listEnter=I,le.listLeave=R,le.mouseUp=P,le.getCurrentDisplayValue=J,le.registerSelectedItemWatcher=D,le.unregisterSelectedItemWatcher=L,le.notFoundVisible=se,le.loadingIsVisible=Q,m()}t.module("material.components.autocomplete").controller("MdAutocompleteCtrl",e);var r=41,i=5.5*r,o=8,a=2;e.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q"]}(),function(){function e(e){return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",inputId:"@?mdInputId"},link:function(e,t,n,r){r.hasNotFound=!!t.attr("md-has-not-found")},template:function(t,n){function r(){var e=t.find("md-item-template").detach(),n=e.length?e.html():t.html();return e.length||t.empty(),"<md-autocomplete-parent-scope md-autocomplete-replace>"+n+"</md-autocomplete-parent-scope>"}function i(){var e=t.find("md-not-found").detach(),n=e.length?e.html():"";return n?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+n+"</li>":""}function o(){return n.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  '+(null!=u?'tabindex="'+u+'"':"")+'                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="$mdAutocompleteCtrl.isRequired"                  ng-readonly="$mdAutocompleteCtrl.isReadonly"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  '+(null!=n.mdNoAsterisk?'md-no-asterisk="'+n.mdNoAsterisk+'"':"")+'                  ng-focus="$mdAutocompleteCtrl.focus($event)"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  '+(null!=n.mdSelectOnFocus?'md-select-on-focus=""':"")+'                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  role="combobox"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+c+"</div>            </md-input-container>":'            <input flex type="search"                '+(null!=u?'tabindex="'+u+'"':"")+'                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus($event)"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                '+(null!=n.mdSelectOnFocus?'md-select-on-focus=""':"")+'                aria-label="{{placeholder}}"                aria-autocomplete="list"                role="combobox"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear($event)">              <md-icon md-svg-src="'+e.mdClose+'"></md-icon>              <span class="_md-visually-hidden">Clear</span>            </button>                '}var a=i(),s=r(),c=t.html(),u=n.tabindex;return a&&t.attr("md-has-not-found",!0),t.attr("tabindex","-1"),"        <md-autocomplete-wrap            layout=\"row\"            ng-class=\"{ 'md-whiteframe-z1': !floatingLabel, 'md-menu-showing': !$mdAutocompleteCtrl.hidden }\">          "+o()+'          <md-progress-linear              class="'+(n.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          <md-virtual-repeat-container              md-auto-shrink              md-auto-shrink-min="1"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-autocomplete-suggestions-container md-whiteframe-z1"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">            <ul class="md-autocomplete-suggestions"                ng-class="::menuClass"                id="ul-{{$mdAutocompleteCtrl.id}}">              <li md-virtual-repeat="item in $mdAutocompleteCtrl.matches"                  ng-class="{ selected: $index === $mdAutocompleteCtrl.index }"                  ng-click="$mdAutocompleteCtrl.select($index)"                  md-extra-name="$mdAutocompleteCtrl.itemName">                  '+s+"                  </li>"+a+'            </ul>          </md-virtual-repeat-container>        </md-autocomplete-wrap>        <aria-status            class="_md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages track by $index" ng-if="message">{{message}}</p>        </aria-status>'}}}t.module("material.components.autocomplete").directive("mdAutocomplete",e),e.$inject=["$$mdSvgRegistry"]}(),function(){function e(e,t){function n(e,n,r){return function(e,n,i){function o(n,r){c[r]=e[n],e.$watch(n,function(e){t.nextTick(function(){c[r]=e})})}function a(){var t=!1,n=!1;e.$watch(function(){n||t||(t=!0,e.$$postDigest(function(){n||c.$digest(),t=n=!1}))}),c.$watch(function(){n=!0})}var s=e.$mdAutocompleteCtrl,c=s.parent.$new(),u=s.itemName;o("$index","$index"),o("item",u),a(),r(c,function(e){n.after(e)})}}return{restrict:"AE",compile:n,terminal:!0,transclude:"element"}}t.module("material.components.autocomplete").directive("mdAutocompleteParentScope",e),e.$inject=["$compile","$mdUtil"]}(),function(){function e(e,n,r){function i(i,o){var s=null,c=null,u=r.mdHighlightFlags||"",l=e.$watch(function(e){return{term:i(e),unsafeText:o(e)}},function(e,r){null!==s&&e.unsafeText===r.unsafeText||(s=t.element("<div>").text(e.unsafeText).html()),null!==c&&e.term===r.term||(c=a(e.term,u)),n.html(s.replace(c,'<span class="highlight">$&</span>'))},!0);n.on("$destroy",l)}function o(e){
return e&&e.replace(/[\\\^\$\*\+\?\.\(\)\|\{}\[\]]/g,"\\$&")}function a(e,t){var n="",r="";return t.indexOf("^")>=0&&(n="^"),t.indexOf("$")>=0&&(r="$"),new RegExp(n+o(e)+r,t.replace(/[\$\^]/g,""))}this.init=i}t.module("material.components.autocomplete").controller("MdHighlightCtrl",e),e.$inject=["$scope","$element","$attrs"]}(),function(){function e(e,t){return{terminal:!0,controller:"MdHighlightCtrl",compile:function(n,r){var i=t(r.mdHighlightText),o=e(n.html());return function(e,t,n,r){r.init(i,o)}}}}t.module("material.components.autocomplete").directive("mdHighlightText",e),e.$inject=["$interpolate","$parse"]}(),function(){function r(e,t,r,i,o){this.$scope=e,this.$element=t,this.$mdConstant=r,this.$timeout=i,this.$mdUtil=o,this.isEditting=!1,this.parentController=n,this.enableChipEdit=!1}t.module("material.components.chips").controller("MdChipCtrl",r),r.$inject=["$scope","$element","$mdConstant","$timeout","$mdUtil"],r.prototype.init=function(e){this.parentController=e,this.enableChipEdit=this.parentController.enableChipEdit,this.enableChipEdit&&(this.$element.on("keydown",this.chipKeyDown.bind(this)),this.$element.on("mousedown",this.chipMouseDown.bind(this)),this.getChipContent().addClass("_md-chip-content-edit-is-enabled"))},r.prototype.getChipContent=function(){var e=this.$element[0].getElementsByClassName("_md-chip-content");return t.element(e[0])},r.prototype.getContentElement=function(){return t.element(this.getChipContent().children()[0])},r.prototype.getChipIndex=function(){return parseInt(this.$element.attr("index"))},r.prototype.goOutOfEditMode=function(){if(this.isEditting){this.isEditting=!1,this.$element.removeClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="false";var e=this.getChipIndex(),t=this.getContentElement().text();t?(this.parentController.updateChipContents(e,this.getContentElement().text()),this.$mdUtil.nextTick(function(){this.parentController.selectedChip===e&&this.parentController.focusChip(e)}.bind(this))):this.parentController.removeChipAndFocusInput(e)}},r.prototype.selectNodeContents=function(t){var n,r;document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(t),n.select()):e.getSelection&&(r=e.getSelection(),n=document.createRange(),n.selectNodeContents(t),r.removeAllRanges(),r.addRange(n))},r.prototype.goInEditMode=function(){this.isEditting=!0,this.$element.addClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="true",this.getChipContent().on("blur",function(){this.goOutOfEditMode()}.bind(this)),this.selectNodeContents(this.getChipContent()[0])},r.prototype.chipKeyDown=function(e){this.isEditting||e.keyCode!==this.$mdConstant.KEY_CODE.ENTER&&e.keyCode!==this.$mdConstant.KEY_CODE.SPACE?this.isEditting&&e.keyCode===this.$mdConstant.KEY_CODE.ENTER&&(e.preventDefault(),this.goOutOfEditMode()):(e.preventDefault(),this.goInEditMode())},r.prototype.chipMouseDown=function(){this.getChipIndex()==this.parentController.selectedChip&&this.enableChipEdit&&!this.isEditting&&this.goInEditMode()}}(),function(){function e(e,r){function i(n,i){return n.append(r.processTemplate(o)),function(n,r,i,o){var a=o.shift(),s=o.shift();e(r),a&&(s.init(a),t.element(r[0].querySelector("._md-chip-content")).on("blur",function(){a.resetSelectedChip(),a.$scope.$applyAsync()}))}}var o=r.processTemplate(n);return{restrict:"E",require:["^?mdChips","mdChip"],compile:i,controller:"MdChipCtrl"}}t.module("material.components.chips").directive("mdChip",e);var n='    <span ng-if="!$mdChipsCtrl.readonly" class="_md-visually-hidden">      {{$mdChipsCtrl.deleteHint}}    </span>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e){function t(t,n,r,i){n.on("click",function(e){t.$apply(function(){i.removeChip(t.$$replacedScope.$index)})}),e(function(){n.attr({tabindex:-1,"aria-hidden":!0}),n.find("button").attr("tabindex","-1")})}return{restrict:"A",require:"^mdChips",scope:!1,link:t}}t.module("material.components.chips").directive("mdChipRemove",e),e.$inject=["$timeout"]}(),function(){function e(e){function t(t,n,r){var i=t.$parent.$mdChipsCtrl,o=i.parent.$new(!1,i.parent);o.$$replacedScope=t,o.$chip=t.$chip,o.$index=t.$index,o.$mdChipsCtrl=i;var a=i.$scope.$eval(r.mdChipTransclude);n.html(a),e(n.contents())(o)}return{restrict:"EA",terminal:!0,link:t,scope:!1}}t.module("material.components.chips").directive("mdChipTransclude",e),e.$inject=["$compile"]}(),function(){function e(e,t,n,r,i,o){this.$timeout=i,this.$mdConstant=t,this.$scope=e,this.parent=e.$parent,this.$log=n,this.$element=r,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.hasAutocomplete=!1,this.enableChipEdit=o.parseAttributeBoolean(this.mdEnableChipEdit),this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useTransformChip=!1,this.useOnAdd=!1,this.useOnRemove=!1,this.useOnSelect=!1}t.module("material.components.chips").controller("MdChipsCtrl",e),e.$inject=["$scope","$mdConstant","$log","$element","$timeout","$mdUtil"],e.prototype.inputKeydown=function(e){var t=this.getChipBuffer();if(!(this.hasAutocomplete&&e.isDefaultPrevented&&e.isDefaultPrevented())){if(e.keyCode===this.$mdConstant.KEY_CODE.BACKSPACE){if(t)return;return e.preventDefault(),e.stopPropagation(),void(this.items.length&&this.selectAndFocusChipSafe(this.items.length-1))}if((!this.separatorKeys||this.separatorKeys.length<1)&&(this.separatorKeys=[this.$mdConstant.KEY_CODE.ENTER]),this.separatorKeys.indexOf(e.keyCode)!==-1){if(this.hasAutocomplete&&this.requireMatch||!t)return;if(e.preventDefault(),this.hasMaxChipsReached())return;this.appendChip(t.trim()),this.resetChipBuffer()}}},e.prototype.updateChipContents=function(e,t){e>=0&&e<this.items.length&&(this.items[e]=t,this.ngModelCtrl.$setDirty())},e.prototype.isEditingChip=function(){return!!this.$element[0].querySelector("._md-chip-editing")},e.prototype.chipKeydown=function(e){if(!this.getChipBuffer()&&!this.isEditingChip())switch(e.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;e.preventDefault(),this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:e.preventDefault(),this.selectedChip<0&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:e.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;e.preventDefault(),this.onFocus()}},e.prototype.getPlaceholder=function(){var e=this.items&&this.items.length&&(""==this.secondaryPlaceholder||this.secondaryPlaceholder);return e?this.secondaryPlaceholder:this.placeholder},e.prototype.removeAndSelectAdjacentChip=function(e){var n=this.getAdjacentChipIndex(e);this.removeChip(e),this.$timeout(t.bind(this,function(){this.selectAndFocusChipSafe(n)}))},e.prototype.resetSelectedChip=function(){this.selectedChip=-1},e.prototype.getAdjacentChipIndex=function(e){var t=this.items.length-1;return 0==t?-1:e==t?e-1:e},e.prototype.appendChip=function(e){if(this.useTransformChip&&this.transformChip){var n=this.transformChip({$chip:e});t.isDefined(n)&&(e=n)}if(t.isObject(e)){var r=this.items.some(function(n){return t.equals(e,n)});if(r)return}if(!(null==e||this.items.indexOf(e)+1)){var i=this.items.push(e);this.ngModelCtrl.$setDirty(),this.validateModel(),this.useOnAdd&&this.onAdd&&this.onAdd({$chip:e,$index:i})}},e.prototype.useTransformChipExpression=function(){this.useTransformChip=!0},e.prototype.useOnAddExpression=function(){this.useOnAdd=!0},e.prototype.useOnRemoveExpression=function(){this.useOnRemove=!0},e.prototype.useOnSelectExpression=function(){this.useOnSelect=!0},e.prototype.getChipBuffer=function(){return this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer},e.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},e.prototype.hasMaxChipsReached=function(){return t.isString(this.maxChips)&&(this.maxChips=parseInt(this.maxChips,10)||0),this.maxChips>0&&this.items.length>=this.maxChips},e.prototype.validateModel=function(){this.ngModelCtrl.$setValidity("md-max-chips",!this.hasMaxChipsReached())},e.prototype.removeChip=function(e){var t=this.items.splice(e,1);this.ngModelCtrl.$setDirty(),this.validateModel(),t&&t.length&&this.useOnRemove&&this.onRemove&&this.onRemove({$chip:t[0],$index:e})},e.prototype.removeChipAndFocusInput=function(e){this.removeChip(e),this.onFocus()},e.prototype.selectAndFocusChipSafe=function(e){return this.items.length?e===this.items.length?this.onFocus():(e=Math.max(e,0),e=Math.min(e,this.items.length-1),this.selectChip(e),void this.focusChip(e)):(this.selectChip(-1),void this.onFocus())},e.prototype.selectChip=function(e){e>=-1&&e<=this.items.length?(this.selectedChip=e,this.useOnSelect&&this.onSelect&&this.onSelect({$chip:this.items[this.selectedChip]})):this.$log.warn("Selected Chip index out of bounds; ignoring.")},e.prototype.selectAndFocusChip=function(e){this.selectChip(e),e!=-1&&this.focusChip(e)},e.prototype.focusChip=function(e){this.$element[0].querySelector('md-chip[index="'+e+'"] ._md-chip-content').focus()},e.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){t.items=t.ngModelCtrl.$viewValue}},e.prototype.onFocus=function(){var e=this.$element[0].querySelector("input");e&&e.focus(),this.resetSelectedChip()},e.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.resetSelectedChip()},e.prototype.onInputBlur=function(){this.inputHasFocus=!1},e.prototype.configureUserInput=function(e){this.userInputElement=e;var n=e.controller("ngModel");n!=this.ngModelCtrl&&(this.userInputNgModelCtrl=n);var r=this.$scope,i=this,o=function(e,n){r.$evalAsync(t.bind(i,n,e))};e.attr({tabindex:0}).on("keydown",function(e){o(e,i.inputKeydown)}).on("focus",function(e){o(e,i.onInputFocus)}).on("blur",function(e){o(e,i.onInputBlur)})},e.prototype.configureAutocomplete=function(e){e&&(this.hasAutocomplete=!0,e.registerSelectedItemWatcher(t.bind(this,function(e){if(e){if(this.hasMaxChipsReached())return;this.appendChip(e),this.resetChipBuffer()}})),this.$element.find("input").on("focus",t.bind(this,this.onInputFocus)).on("blur",t.bind(this,this.onInputBlur)))},e.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0}}(),function(){function e(e,t,a,s,c,u){function l(n,r){function i(e){if(r.ngModel){var t=o[0].querySelector(e);return t&&t.outerHTML}}var o=r.$mdUserTemplate;r.$mdUserTemplate=null;var l=i("md-chips>md-chip-template"),f=t.prefixer().buildList("md-chip-remove").map(function(e){return"md-chips>*["+e+"]"}).join(","),d=i(f)||p.remove,h=l||p.default,m=i("md-chips>md-autocomplete")||i("md-chips>input")||p.input,g=o.find("md-chip");return o[0].querySelector("md-chip-template>*[md-chip-remove]")&&s.warn("invalid placement of md-chip-remove within md-chip-template."),function(n,i,o,s){t.initOptionalProperties(n,r),e(i);var f=s[0];if(l&&(f.enableChipEdit=!1),f.chipContentsTemplate=h,f.chipRemoveTemplate=d,f.chipInputTemplate=m,f.mdCloseIcon=u.mdClose,i.attr({"aria-hidden":!0,tabindex:-1}).on("focus",function(){f.onFocus()}),r.ngModel&&(f.configureNgModel(i.controller("ngModel")),o.mdTransformChip&&f.useTransformChipExpression(),o.mdOnAppend&&f.useOnAppendExpression(),o.mdOnAdd&&f.useOnAddExpression(),o.mdOnRemove&&f.useOnRemoveExpression(),o.mdOnSelect&&f.useOnSelectExpression(),m!=p.input&&n.$watch("$mdChipsCtrl.readonly",function(e){e||t.nextTick(function(){0===m.indexOf("<md-autocomplete")&&f.configureAutocomplete(i.find("md-autocomplete").controller("mdAutocomplete")),f.configureUserInput(i.find("input"))})}),t.nextTick(function(){var e=i.find("input");e&&e.toggleClass("md-input",!0)})),g.length>0){var y=a(g.clone())(n.$parent);c(function(){i.find("md-chips-wrap").prepend(y)})}}}function f(){return{chips:t.processTemplate(n),input:t.processTemplate(r),default:t.processTemplate(i),remove:t.processTemplate(o)}}var p=f();return{template:function(e,t){return t.$mdUserTemplate=e.clone(),p.chips},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:l,scope:{readonly:"=readonly",placeholder:"@",mdEnableChipEdit:"@",secondaryPlaceholder:"@",maxChips:"@mdMaxChips",transformChip:"&mdTransformChip",onAppend:"&mdOnAppend",onAdd:"&mdOnAdd",onRemove:"&mdOnRemove",onSelect:"&mdOnSelect",deleteHint:"@",deleteButtonLabel:"@",separatorKeys:"=?mdSeparatorKeys",requireMatch:"=?mdRequireMatch"}}}t.module("material.components.chips").directive("mdChips",e);var n='      <md-chips-wrap          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus(), \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index, \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}">          <div class="_md-chip-content"              tabindex="-1"              aria-hidden="true"              ng-click="!$mdChipsCtrl.readonly && $mdChipsCtrl.focusChip($index)"              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div ng-if="!$mdChipsCtrl.readonly"               class="_md-chip-remove-container"               md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div class="_md-chip-input-container">          <div ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl"               md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',r='        <input            class="md-input"            tabindex="0"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            aria-label="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-trim="false"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',i="      <span>{{$chip}}</span>",o='      <button          class="_md-chip-remove"          ng-if="!$mdChipsCtrl.readonly"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"          type="button"          aria-hidden="true"          tabindex="-1">        <md-icon md-svg-src="{{ $mdChipsCtrl.mdCloseIcon }}"></md-icon>        <span class="_md-visually-hidden">          {{$mdChipsCtrl.deleteButtonLabel}}        </span>      </button>';e.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout","$$mdSvgRegistry"]}(),function(){function e(){this.selectedItem=null,this.searchText=""}t.module("material.components.chips").controller("MdContactChipsCtrl",e),e.prototype.queryContact=function(e){var n=this.contactQuery({$query:e});return this.filterSelected?n.filter(t.bind(this,this.filterSelectedContacts)):n},e.prototype.itemName=function(e){return e[this.contactName]},e.prototype.filterSelectedContacts=function(e){return this.contacts.indexOf(e)==-1}}(),function(){function e(e,t){function r(n,r){return function(n,i,o,a){t.initOptionalProperties(n,r),e(i),i.attr("tabindex","-1")}}return{template:function(e,t){return n},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:r,scope:{contactQuery:"&mdContacts",placeholder:"@",secondaryPlaceholder:"@",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",requireMatch:"=?mdRequireMatch",highlightFlags:"@?mdHighlightFlags"}}}t.module("material.components.chips").directive("mdContactChips",e);var n='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.itemName(item)"              md-no-cache="true"              md-autoselect              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}"                  ng-if="item[$mdContactChipsCtrl.contactImage]" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText"                    md-highlight-flags="{{$mdContactChipsCtrl.highlightFlags}}">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}"                  ng-if="$chip[$mdContactChipsCtrl.contactImage]" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e,t,n,r){function i(i,a,s){function c(){var e=a.parent();return!(!e.attr("aria-label")&&!e.text())||!(!e.parent().attr("aria-label")&&!e.parent().text())}function u(){s.mdSvgIcon||s.mdSvgSrc||(s.mdFontIcon&&a.addClass("md-font "+s.mdFontIcon),a.addClass(e.fontSet(s.mdFontSet)))}t(a),u();var l=a[0].getAttribute(s.$attr.mdSvgSrc),f=s.alt||s.mdFontIcon||s.mdSvgIcon||a.text(),p=s.$normalize(s.$attr.mdSvgIcon||s.$attr.mdSvgSrc||"");s["aria-label"]||(""===f||c()?a.text()||n.expect(a,"aria-hidden","true"):(n.expect(a,"aria-label",f),n.expect(a,"role","img"))),p&&s.$observe(p,function(t){o(t)||t!==l||(t=r.trustAsUrl(t)),a.empty(),t&&e(t).then(function(e){a.empty(),a.append(e)})})}function o(e){var t=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;return t.test(e)}return{restrict:"E",link:i}}t.module("material.components.icon").directive("mdIcon",["$mdIcon","$mdTheming","$mdAria","$sce",e])}(),function(){function n(){}function r(e,t){this.url=e,this.viewBoxSize=t||o.defaultViewBoxSize}function i(n,r,i,o,a,s){function c(e){if(e=e||"",t.isString(e)||(e=s.getTrustedUrl(e)),b[e])return i.when(l(b[e]));if(_.test(e)||O.test(e))return h(e).then(f(e));e.indexOf(":")==-1&&(e="$default:"+e);var r=n[e]?p:d;return r(e).then(f(e))}function u(e){var r=t.isUndefined(e)||!(e&&e.length);if(r)return n.defaultFontSet;var i=e;return t.forEach(n.fontSets,function(t){t.alias==e&&(i=t.fontSet||i)}),i}function l(e){var n=e.clone(),r="_cache"+a.nextUid();return n.id&&(n.id+=r),t.forEach(n.querySelectorAll("[id]"),function(e){e.id+=r}),n}function f(e){return function(t){return b[e]=m(t)?t:new g(t,n[e]),b[e].clone()}}function p(e){var t=n[e];return h(t.url).then(function(e){return new g(e,t)})}function d(e){function t(t){var n=e.slice(e.lastIndexOf(":")+1),i=t.querySelector("#"+n);return i?new g(i,s):r(e)}function r(e){var t="icon "+e+" not found";return o.warn(t),i.reject(t||e)}var a=e.substring(0,e.lastIndexOf(":"))||"$default",s=n[a];return s?h(s.url).then(t):r(e)}function h(n){function a(n){var r=O.exec(n),o=/base64/i.test(n),a=o?e.atob(r[2]):r[2];return i.when(t.element(a)[0])}function s(e){return i(function(n,i){var a=function(e){var n=t.isString(e)?e:e.message||e.data||e.statusText;o.warn(n),i(e)},s=function(r){S[e]||(S[e]=t.element("<div>").append(r)[0].querySelector("svg")),n(S[e])};r(e,!0).then(s,a)})}return O.test(n)?a(n):s(n)}function m(e){return t.isDefined(e.element)&&t.isDefined(e.config)}function g(e,n){e&&"svg"!=e.tagName&&(e=t.element('<svg xmlns="http://www.w3.org/2000/svg">').append(e.cloneNode(!0))[0]),e.getAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=e,this.config=n,this.prepare()}function y(){var e=this.config?this.config.viewBoxSize:n.defaultViewBoxSize;t.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+e+" "+e,focusable:!1},function(e,t){this.element.setAttribute(t,e)},this)}function v(){return this.element.cloneNode(!0)}var b={},S={},_=/[-\w@:%\+.~#?&\/\/=]{2,}\.[a-z]{2,4}\b(\/[-\w@:%\+.~#?&\/\/=]*)?/i,O=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;return g.prototype={clone:v,prepare:y},c.fontSet=u,c}t.module("material.components.icon").constant("$$mdSvgRegistry",{mdTabsArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4=",mdClose:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xOSA2LjQxbC0xLjQxLTEuNDEtNS41OSA1LjU5LTUuNTktNS41OS0xLjQxIDEuNDEgNS41OSA1LjU5LTUuNTkgNS41OSAxLjQxIDEuNDEgNS41OS01LjU5IDUuNTkgNS41OSAxLjQxLTEuNDEtNS41OS01LjU5eiIvPjwvZz48L3N2Zz4=",mdCancel:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xMiAyYy01LjUzIDAtMTAgNC40Ny0xMCAxMHM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTAtNC40Ny0xMC0xMC0xMHptNSAxMy41OWwtMS40MSAxLjQxLTMuNTktMy41OS0zLjU5IDMuNTktMS40MS0xLjQxIDMuNTktMy41OS0zLjU5LTMuNTkgMS40MS0xLjQxIDMuNTkgMy41OSAzLjU5LTMuNTkgMS40MSAxLjQxLTMuNTkgMy41OSAzLjU5IDMuNTl6Ii8+PC9nPjwvc3ZnPg==",mdMenu:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0zLDZIMjFWOEgzVjZNMywxMUgyMVYxM0gzVjExTTMsMTZIMjFWMThIM1YxNloiIC8+PC9zdmc+",mdToggleArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGQ9Ik0yNCAxNmwtMTIgMTIgMi44MyAyLjgzIDkuMTctOS4xNyA5LjE3IDkuMTcgMi44My0yLjgzeiIvPjxwYXRoIGQ9Ik0wIDBoNDh2NDhoLTQ4eiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==",mdCalendar:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgM2gtMVYxaC0ydjJIOFYxSDZ2Mkg1Yy0xLjExIDAtMS45OS45LTEuOTkgMkwzIDE5YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bTAgMTZINVY4aDE0djExek03IDEwaDV2NUg3eiIvPjwvc3ZnPg=="}).provider("$mdIcon",n);var o={defaultViewBoxSize:24,defaultFontSet:"material-icons",fontSets:[]};n.prototype={icon:function(e,t,n){return e.indexOf(":")==-1&&(e="$default:"+e),o[e]=new r(t,n),this},iconSet:function(e,t,n){return o[e]=new r(t,n),this},defaultIconSet:function(e,t){var n="$default";return o[n]||(o[n]=new r(e,t)),o[n].viewBoxSize=t||o.defaultViewBoxSize,this},defaultViewBoxSize:function(e){return o.defaultViewBoxSize=e,this},fontSet:function(e,t){return o.fontSets.push({alias:e,fontSet:t||e}),this},defaultFontSet:function(e){return o.defaultFontSet=e?e:"",this},defaultIconSize:function(e){return o.defaultIconSize=e,this},$get:["$templateRequest","$q","$log","$templateCache","$mdUtil","$sce",function(e,t,n,r,a,s){return i(o,e,t,n,a,s)}]},i.$inject=["config","$templateRequest","$q","$log","$mdUtil","$sce"]}(),function(){function e(e,n,i,o,a,s,c,u){this.$element=i,this.$attrs=o,this.$mdConstant=a,this.$mdUtil=c,this.$document=s,this.$scope=e,this.$rootScope=n,this.$timeout=u;var l=this;t.forEach(r,function(e){l[e]=t.bind(l,l[e])})}t.module("material.components.menuBar").controller("MenuBarController",e);var r=["handleKeyDown","handleMenuHover","scheduleOpenHoveredMenu","cancelScheduledOpen"];e.$inject=["$scope","$rootScope","$element","$attrs","$mdConstant","$document","$mdUtil","$timeout"],e.prototype.init=function(){var e=this.$element,t=this.$mdUtil,r=this.$scope,i=this,o=[];e.on("keydown",this.handleKeyDown),this.parentToolbar=t.getClosest(e,"MD-TOOLBAR"),o.push(this.$rootScope.$on("$mdMenuOpen",function(t,n){i.getMenus().indexOf(n[0])!=-1&&(e[0].classList.add("_md-open"),n[0].classList.add("_md-open"),i.currentlyOpenMenu=n.controller("mdMenu"),i.currentlyOpenMenu.registerContainerProxy(i.handleKeyDown),i.enableOpenOnHover())})),o.push(this.$rootScope.$on("$mdMenuClose",function(r,o,a){var s=i.getMenus();if(s.indexOf(o[0])!=-1&&(e[0].classList.remove("_md-open"),o[0].classList.remove("_md-open")),e[0].contains(o[0])){for(var c=o[0];c&&s.indexOf(c)==-1;)c=t.getClosest(c,"MD-MENU",!0);c&&(a.skipFocus||c.querySelector("button:not([disabled])").focus(),i.currentlyOpenMenu=n,i.disableOpenOnHover(),i.setKeyboardMode(!0))}})),r.$on("$destroy",function(){for(;o.length;)o.shift()()}),this.setKeyboardMode(!0)},e.prototype.setKeyboardMode=function(e){e?this.$element[0].classList.add("_md-keyboard-mode"):this.$element[0].classList.remove("_md-keyboard-mode")},e.prototype.enableOpenOnHover=function(){if(!this.openOnHoverEnabled){this.openOnHoverEnabled=!0;var e;(e=this.parentToolbar)&&(e.dataset.mdRestoreStyle=e.getAttribute("style"),e.style.position="relative",e.style.zIndex=100),t.element(this.getMenus()).on("mouseenter",this.handleMenuHover)}},e.prototype.handleMenuHover=function(e){this.setKeyboardMode(!1),this.openOnHoverEnabled&&this.scheduleOpenHoveredMenu(e)},e.prototype.disableOpenOnHover=function(){if(this.openOnHoverEnabled){this.openOnHoverEnabled=!1;var e;(e=this.parentToolbar)&&(e.style.cssText=e.dataset.mdRestoreStyle||""),t.element(this.getMenus()).off("mouseenter",this.handleMenuHover)}},e.prototype.scheduleOpenHoveredMenu=function(e){var n=t.element(e.currentTarget),r=n.controller("mdMenu");this.setKeyboardMode(!1),this.scheduleOpenMenu(r)},e.prototype.scheduleOpenMenu=function(e){var t=this,r=this.$timeout;e!=t.currentlyOpenMenu&&(r.cancel(t.pendingMenuOpen),t.pendingMenuOpen=r(function(){t.pendingMenuOpen=n,t.currentlyOpenMenu&&t.currentlyOpenMenu.close(!0,{closeAll:!0}),e.open()},200,!1))},e.prototype.handleKeyDown=function(e){var n=this.$mdConstant.KEY_CODE,r=this.currentlyOpenMenu,i=r&&r.isOpen;this.setKeyboardMode(!0);var o,a,s;switch(e.keyCode){case n.DOWN_ARROW:r?r.focusMenuContainer():this.openFocusedMenu(),o=!0;break;case n.UP_ARROW:r&&r.close(),o=!0;break;case n.LEFT_ARROW:a=this.focusMenu(-1),i&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),o=!0;break;case n.RIGHT_ARROW:a=this.focusMenu(1),i&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),o=!0}o&&(e&&e.preventDefault&&e.preventDefault(),e&&e.stopImmediatePropagation&&e.stopImmediatePropagation())},e.prototype.focusMenu=function(e){var t=this.getMenus(),n=this.getFocusedMenuIndex();n==-1&&(n=this.getOpenMenuIndex());var r=!1;if(n==-1?(n=0,r=!0):(e<0&&n>0||e>0&&n<t.length-e)&&(n+=e,r=!0),r)return t[n].querySelector("button").focus(),t[n]},e.prototype.openFocusedMenu=function(){var e=this.getFocusedMenu();e&&t.element(e).controller("mdMenu").open()},e.prototype.getMenus=function(){var e=this.$element;return this.$mdUtil.nodesToArray(e[0].children).filter(function(e){return"MD-MENU"==e.nodeName})},e.prototype.getFocusedMenu=function(){return this.getMenus()[this.getFocusedMenuIndex()]},e.prototype.getFocusedMenuIndex=function(){var e=this.$mdUtil,t=e.getClosest(this.$document[0].activeElement,"MD-MENU");if(!t)return-1;var n=this.getMenus().indexOf(t);return n},e.prototype.getOpenMenuIndex=function(){for(var e=this.getMenus(),t=0;t<e.length;++t)if(e[t].classList.contains("_md-open"))return t;return-1}}(),function(){function e(e,n){return{restrict:"E",require:"mdMenuBar",controller:"MenuBarController",compile:function(r,i){return i.ariaRole||r[0].setAttribute("role","menubar"),t.forEach(r[0].children,function(n){if("MD-MENU"==n.nodeName){n.hasAttribute("md-position-mode")||(n.setAttribute("md-position-mode","left bottom"),n.querySelector("button,a").setAttribute("role","menuitem"));var r=e.nodesToArray(n.querySelectorAll("md-menu-content"));t.forEach(r,function(e){e.classList.add("_md-menu-bar-menu"),e.classList.add("md-dense"),e.hasAttribute("width")||e.setAttribute("width",5)})}}),function(e,t,r,i){t.addClass("_md"),n(e,t),i.init()}}}}t.module("material.components.menuBar").directive("mdMenuBar",e),e.$inject=["$mdUtil","$mdTheming"]}(),function(){function e(){return{restrict:"E",compile:function(e,t){t.role||e[0].setAttribute("role","separator")}}}t.module("material.components.menuBar").directive("mdMenuDivider",e)}(),function(){function e(e,t,n){this.$element=t,this.$attrs=n,this.$scope=e}t.module("material.components.menuBar").controller("MenuItemController",e),e.$inject=["$scope","$element","$attrs"],e.prototype.init=function(e){var t=this.$element,n=this.$attrs;this.ngModel=e,"checkbox"!=n.type&&"radio"!=n.type||(this.mode=n.type,this.iconEl=t[0].children[0],this.buttonEl=t[0].children[1],e&&this.initClickListeners())},e.prototype.clearNgAria=function(){var e=this.$element[0],n=["role","tabindex","aria-invalid","aria-checked"];t.forEach(n,function(t){e.removeAttribute(t)})},e.prototype.initClickListeners=function(){function e(){if("radio"==s){var e=a.ngValue?o.$eval(a.ngValue):a.value;return i.$modelValue==e}return i.$modelValue}function n(e){e?u.off("click",l):u.on("click",l)}var r=this,i=this.ngModel,o=this.$scope,a=this.$attrs,s=(this.$element,this.mode);this.handleClick=t.bind(this,this.handleClick);var c=this.iconEl,u=t.element(this.buttonEl),l=this.handleClick;a.$observe("disabled",n),n(a.disabled),i.$render=function(){r.clearNgAria(),e()?(c.style.display="",u.attr("aria-checked","true")):(c.style.display="none",u.attr("aria-checked","false"))},o.$$postDigest(i.$render)},e.prototype.handleClick=function(e){var t,n=this.mode,r=this.ngModel,i=this.$attrs;"checkbox"==n?t=!r.$modelValue:"radio"==n&&(t=i.ngValue?this.$scope.$eval(i.ngValue):i.value),r.$setViewValue(t),r.$render()}}(),function(){function e(e){return{require:["mdMenuItem","?ngModel"],priority:210,compile:function(n,r){function i(e,r,i){i=i||n,i instanceof t.element&&(i=i[0]),i.hasAttribute(e)||i.setAttribute(e,r)}function o(e){if(n[0].hasAttribute(e)){var t=n[0].getAttribute(e);c[0].setAttribute(e,t),n[0].removeAttribute(e)}}function a(){return!!e.getClosest(n,"md-menu-bar",!0)}if(!a()||"checkbox"!=r.type&&"radio"!=r.type)i("role","menuitem",n[0].querySelector("md-button, button, a"));else{var s=n[0].textContent,c=t.element('<md-button type="button"></md-button>');c.html(s),c.attr("tabindex","0"),n.html(""),n.append(t.element('<md-icon md-svg-icon="check"></md-icon>')),n.append(c),n[0].classList.add("md-indent"),i("role","checkbox"==r.type?"menuitemcheckbox":"menuitemradio",c),t.forEach(["ng-disabled"],o)}return function(e,t,n,r){var i=r[0],o=r[1];i.init(o)}},controller:"MenuItemController"}}t.module("material.components.menuBar").directive("mdMenuItem",e),e.$inject=["$mdUtil"]}(),function(){function e(e,r,i,o,a,s,c,u){var l,f,p=a.prefixer(),d=this;this.nestLevel=parseInt(r.mdNestLevel,10)||0,this.init=function(n,r){r=r||{},l=n,f=i[0].querySelector(p.buildSelector(["ng-click","ng-mouseenter"])),f.setAttribute("aria-expanded","false"),this.isInMenuBar=r.isInMenuBar,this.nestedMenus=a.nodesToArray(l[0].querySelectorAll(".md-nested-menu")),l.on("$mdInterimElementRemove",function(){d.isOpen=!1,a.nextTick(function(){d.onIsOpenChanged(d.isOpen)})}),a.nextTick(function(){d.onIsOpenChanged(d.isOpen)});var s="menu_container_"+a.nextUid();l.attr("id",s),
t.element(f).attr({"aria-owns":s,"aria-haspopup":"true"}),o.$on("$destroy",this.disableHoverListener),l.on("$destroy",function(){e.destroy()})};var h,m,g=[];this.enableHoverListener=function(){g.push(c.$on("$mdMenuOpen",function(e,t){l[0].contains(t[0])&&(d.currentlyOpenMenu=t.controller("mdMenu"),d.isAlreadyOpening=!1,d.currentlyOpenMenu.registerContainerProxy(d.triggerContainerProxy.bind(d)))})),g.push(c.$on("$mdMenuClose",function(e,t){l[0].contains(t[0])&&(d.currentlyOpenMenu=n)})),m=t.element(a.nodesToArray(l[0].children[0].children)),m.on("mouseenter",d.handleMenuItemHover),m.on("mouseleave",d.handleMenuItemMouseLeave)},this.disableHoverListener=function(){for(;g.length;)g.shift()();m&&m.off("mouseenter",d.handleMenuItemHover),m&&m.off("mouseleave",d.handleMenuItemMouseLeave)},this.handleMenuItemHover=function(e){if(!d.isAlreadyOpening){var n=e.target.querySelector("md-menu")||a.getClosest(e.target,"MD-MENU");h=s(function(){if(n&&(n=t.element(n).controller("mdMenu")),d.currentlyOpenMenu&&d.currentlyOpenMenu!=n){var e=d.nestLevel+1;d.currentlyOpenMenu.close(!0,{closeTo:e}),d.isAlreadyOpening=!!n,n&&n.open()}else n&&!n.isOpen&&n.open&&(d.isAlreadyOpening=!!n,n&&n.open())},n?100:250);var r=e.currentTarget.querySelector(".md-button:not([disabled])");r&&r.focus()}},this.handleMenuItemMouseLeave=function(){h&&(s.cancel(h),h=n)},this.open=function(t){t&&t.stopPropagation(),t&&t.preventDefault(),d.isOpen||(d.enableHoverListener(),d.isOpen=!0,a.nextTick(function(){d.onIsOpenChanged(d.isOpen)}),f=f||(t?t.target:i[0]),f.setAttribute("aria-expanded","true"),o.$emit("$mdMenuOpen",i),e.show({scope:o,mdMenuCtrl:d,nestLevel:d.nestLevel,element:l,target:f,preserveElement:!0,parent:"body"}).finally(function(){f.setAttribute("aria-expanded","false"),d.disableHoverListener()}))},o.$mdOpenMenu=this.open,this.onIsOpenChanged=function(e){e?(l.attr("aria-hidden","false"),i[0].classList.add("_md-open"),t.forEach(d.nestedMenus,function(e){e.classList.remove("_md-open")})):(l.attr("aria-hidden","true"),i[0].classList.remove("_md-open")),o.$mdMenuIsOpen=d.isOpen},this.focusMenuContainer=function(){var e=l[0].querySelector(p.buildSelector(["md-menu-focus-target","md-autofocus"]));e||(e=l[0].querySelector(".md-button")),e.focus()},this.registerContainerProxy=function(e){this.containerProxy=e},this.triggerContainerProxy=function(e){this.containerProxy&&this.containerProxy(e)},this.destroy=function(){return d.isOpen?e.destroy():u.when(!1)},this.close=function(n,r){if(d.isOpen){d.isOpen=!1,a.nextTick(function(){d.onIsOpenChanged(d.isOpen)});var s=t.extend({},r,{skipFocus:n});if(o.$emit("$mdMenuClose",i,s),e.hide(null,r),!n){var c=d.restoreFocusTo||i.find("button")[0];c instanceof t.element&&(c=c[0]),c&&c.focus()}}},this.positionMode=function(){var e=(r.mdPositionMode||"target").split(" ");return 1==e.length&&e.push(e[0]),{left:e[0],top:e[1]}},this.offsets=function(){var e=(r.mdOffset||"0 0").split(" ").map(parseFloat);if(2==e.length)return{left:e[0],top:e[1]};if(1==e.length)return{top:e[0],left:e[0]};throw Error("Invalid offsets specified. Please follow format <x, y> or <n>")}}t.module("material.components.menu").controller("mdMenuCtrl",e),e.$inject=["$mdMenu","$attrs","$element","$scope","$mdUtil","$timeout","$rootScope","$q"]}(),function(){function e(e){function r(n){n.addClass("md-menu");var r=n.children()[0],a=e.prefixer();if(a.hasAttribute(r,"ng-click")||(r=r.querySelector(a.buildSelector(["ng-click","ng-mouseenter"]))||r),!r||"MD-BUTTON"!=r.nodeName&&"BUTTON"!=r.nodeName||r.hasAttribute("type")||r.setAttribute("type","button"),2!=n.children().length)throw Error(o+"Expected two children elements.");r&&r.setAttribute("aria-haspopup","true");var s=n[0].querySelectorAll("md-menu"),c=parseInt(n[0].getAttribute("md-nest-level"),10)||0;return s&&t.forEach(e.nodesToArray(s),function(e){e.hasAttribute("md-position-mode")||e.setAttribute("md-position-mode","cascade"),e.classList.add("_md-nested-menu"),e.setAttribute("md-nest-level",c+1)}),i}function i(e,r,i,o){var a=o[0],s=o[1]!=n,c=t.element('<div class="_md _md-open-menu-container md-whiteframe-z2"></div>'),u=r.children()[1];r.addClass("_md"),u.hasAttribute("role")||u.setAttribute("role","menu"),c.append(u),r.on("$destroy",function(){c.remove()}),r.append(c),c[0].style.display="none",a.init(c,{isInMenuBar:s})}var o="Invalid HTML for md-menu: ";return{restrict:"E",require:["mdMenu","?^mdMenuBar"],controller:"mdMenuCtrl",scope:!0,compile:r}}t.module("material.components.menu").directive("mdMenu",e),e.$inject=["$mdUtil"]}(),function(){function e(e){function r(e,r,a,s,c,u,l,f,p){function d(n,r,i){return i.nestLevel?t.noop:(i.disableParentScroll&&!e.getClosest(i.target,"MD-DIALOG")?i.restoreScroll=e.disableScrollAround(i.element,i.parent):i.disableParentScroll=!1,i.hasBackdrop&&(i.backdrop=e.createBackdrop(n,"_md-menu-backdrop _md-click-catcher"),p.enter(i.backdrop,s[0].body)),function(){i.backdrop&&i.backdrop.remove(),i.disableParentScroll&&i.restoreScroll()})}function h(e,t,n){function r(){return f(t,{addClass:"_md-leave"}).start()}function i(){t.removeClass("_md-active"),v(t,n),n.alreadyOpen=!1}return n.cleanupInteraction(),n.cleanupResizing(),n.hideBackdrop(),n.$destroy===!0?i():r().then(i)}function m(n,i,o){function s(){return o.parent.append(i),i[0].style.display="",u(function(e){var t=b(i,o);i.removeClass("_md-leave"),f(i,{addClass:"_md-active",from:_.toCss(t),to:_.toCss({transform:""})}).start().then(e)})}function p(){if(!o.target)throw Error("$mdMenu.show() expected a target to animate from in options.target");t.extend(o,{alreadyOpen:!1,isRemoved:!1,target:t.element(o.target),parent:t.element(o.parent),menuContentEl:t.element(i[0].querySelector("md-menu-content"))})}function h(){var e=function(e,t){return l.throttle(function(){if(!o.isRemoved){var n=b(e,t);e.css(_.toCss(n))}})}(i,o);return c.addEventListener("resize",e),c.addEventListener("orientationchange",e),function(){c.removeEventListener("resize",e),c.removeEventListener("orientationchange",e)}}function m(){function t(t){var n;switch(t.keyCode){case a.KEY_CODE.ESCAPE:o.mdMenuCtrl.close(!1,{closeAll:!0}),n=!0;break;case a.KEY_CODE.UP_ARROW:g(t,o.menuContentEl,o,-1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.DOWN_ARROW:g(t,o.menuContentEl,o,1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.LEFT_ARROW:o.nestLevel?o.mdMenuCtrl.close():o.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.RIGHT_ARROW:var r=e.getClosest(t.target,"MD-MENU");r&&r!=o.parent[0]?t.target.click():o.mdMenuCtrl.triggerContainerProxy(t),n=!0}n&&(t.preventDefault(),t.stopImmediatePropagation())}function r(e){e.preventDefault(),e.stopPropagation(),n.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})})}function s(t){function r(){n.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})})}function i(e,t){if(!e)return!1;for(var n,r=0;n=t[r];++r)if(S.hasAttribute(e,n))return!0;return!1}var a=t.target;do{if(a==o.menuContentEl[0])return;if((i(a,["ng-click","ng-href","ui-sref"])||"BUTTON"==a.nodeName||"MD-BUTTON"==a.nodeName)&&!i(a,["md-prevent-menu-close"])){var s=e.getClosest(a,"MD-MENU");a.hasAttribute("disabled")||s&&s!=o.parent[0]||r();break}}while(a=a.parentNode)}i.addClass("_md-clickable"),o.backdrop&&o.backdrop.on("click",r),o.menuContentEl.on("keydown",t),o.menuContentEl[0].addEventListener("click",s,!0);var c=o.menuContentEl[0].querySelector(S.buildSelector(["md-menu-focus-target","md-autofocus"]));if(!c){var u=o.menuContentEl[0].firstElementChild;c=u&&(u.querySelector(".md-button:not([disabled])")||u.firstElementChild)}return c&&c.focus(),function(){i.removeClass("_md-clickable"),o.backdrop&&o.backdrop.off("click",r),o.menuContentEl.off("keydown",t),o.menuContentEl[0].removeEventListener("click",s,!0)}}return p(o),r.inherit(o.menuContentEl,o.target),o.cleanupResizing=h(),o.hideBackdrop=d(n,i,o),s().then(function(e){return o.alreadyOpen=!0,o.cleanupInteraction=m(),e})}function g(t,n,r,i){for(var o,a=e.getClosest(t.target,"MD-MENU-ITEM"),s=e.nodesToArray(n[0].children),c=s.indexOf(a),u=c+i;u>=0&&u<s.length;u+=i){var l=s[u].querySelector(".md-button");if(o=y(l))break}return o}function y(e){if(e&&e.getAttribute("tabindex")!=-1)return e.focus(),s[0].activeElement==e}function v(e,t){t.preserveElement?i(e).style.display="none":i(e).parentNode===i(t.parent)&&i(t.parent).removeChild(i(e))}function b(t,r){function i(e){e.top=Math.max(Math.min(e.top,v.bottom-l.offsetHeight),v.top),e.left=Math.max(Math.min(e.left,v.right-l.offsetWidth),v.left)}function a(){for(var e=0;e<f.children.length;++e)if("none"!=c.getComputedStyle(f.children[e]).display)return f.children[e]}var u,l=t[0],f=t[0].firstElementChild,p=f.getBoundingClientRect(),d=s[0].body,h=d.getBoundingClientRect(),m=c.getComputedStyle(f),g=r.target[0].querySelector(S.buildSelector("md-menu-origin"))||r.target[0],y=g.getBoundingClientRect(),v={left:h.left+o,top:Math.max(h.top,0)+o,bottom:Math.max(h.bottom,Math.max(h.top,0)+h.height)-o,right:h.right-o},b={top:0,left:0,right:0,bottom:0},_={top:0,left:0,right:0,bottom:0},O=r.mdMenuCtrl.positionMode();"target"!=O.top&&"target"!=O.left&&"target-right"!=O.left||(u=a(),u&&(u=u.firstElementChild||u,u=u.querySelector(S.buildSelector("md-menu-align-target"))||u,b=u.getBoundingClientRect(),_={top:parseFloat(l.style.top||0),left:parseFloat(l.style.left||0)}));var T={},E="top ";switch(O.top){case"target":T.top=_.top+y.top-b.top;break;case"cascade":T.top=y.top-parseFloat(m.paddingTop)-g.style.top;break;case"bottom":T.top=y.top+y.height;break;default:throw new Error('Invalid target mode "'+O.top+'" specified for md-menu on Y axis.')}var w="rtl"==e.bidi();switch(O.left){case"target":T.left=_.left+y.left-b.left,E+=w?"right":"left";break;case"target-left":T.left=y.left,E+="left";break;case"target-right":T.left=y.right-p.width+(p.right-b.right),E+="right";break;case"cascade":var I=w?y.left-p.width<v.left:y.right+p.width<v.right;T.left=I?y.right-g.style.left:y.left-g.style.left-p.width,E+=I?"left":"right";break;case"left":w?(T.left=y.right-p.width,E+="right"):(T.left=y.left,E+="left");break;default:throw new Error('Invalid target mode "'+O.left+'" specified for md-menu on X axis.')}var R=r.mdMenuCtrl.offsets();T.top+=R.top,T.left+=R.left,i(T);var P=Math.round(100*Math.min(y.width/l.offsetWidth,1))/100,j=Math.round(100*Math.min(y.height/l.offsetHeight,1))/100;return{top:Math.round(T.top),left:Math.round(T.left),transform:r.alreadyOpen?n:e.supplant("scale({0},{1})",[P,j]),transformOrigin:E}}var S=e.prefixer(),_=e.dom.animator;return{parent:"body",onShow:m,onRemove:h,hasBackdrop:!0,disableParentScroll:!0,skipCompile:!0,preserveScope:!0,skipHide:!0,themable:!0}}function i(e){return e instanceof t.element&&(e=e[0]),e}var o=8;return r.$inject=["$mdUtil","$mdTheming","$mdConstant","$document","$window","$q","$$rAF","$animateCss","$animate"],e("$mdMenu").setDefaults({methods:["target"],options:r})}t.module("material.components.menu").provider("$mdMenu",e),e.$inject=["$$interimElementProvider"]}(),function(){function e(e,n,r,i,o,a){function s(a,s,u){function m(t,r,o,s,u){var l=++C,h=i.now(),m=r-t,g=f(a.mdDiameter),y=g-p(g),v=o||n.easeFn,b=s||n.duration;r===t?R.attr("d",c(r,g,y,u)):T=d(function n(r){var o=e.Math.max(0,e.Math.min((r||i.now())-h,b));R.attr("d",c(v(o,t,m,b),g,y,u)),l===C&&o<b&&(T=d(n))})}function S(){m(P,j,n.easeFnIndeterminate,n.durationIndeterminate,A),A=(A+j)%100;var e=P;P=-j,j=-e}function _(){E||(E=o(S,n.durationIndeterminate+50,0,!1),S(),s.addClass(b).removeAttr("aria-valuenow"))}function O(){E&&(o.cancel(E),E=null,s.removeClass(b))}var T,E,w=s[0],I=t.element(w.querySelector("svg")),R=t.element(w.querySelector("path")),P=n.startIndeterminate,j=n.endIndeterminate,A=0,C=0;r(s),s.toggleClass(v,u.hasOwnProperty("disabled")),a.mdMode===y&&_(),a.$on("$destroy",function(){O(),T&&h(T)}),a.$watchGroup(["value","mdMode",function(){var e=w.disabled;return e===!0||e===!1?e:t.isDefined(s.attr("disabled"))}],function(e,t){var n=e[1],r=e[2],i=t[2];if(r!==i&&s.toggleClass(v,!!r),r)O();else if(n!==g&&n!==y&&(n=y,u.$set("mdMode",n)),n===y)_();else{var o=l(e[0]);O(),s.attr("aria-valuenow",o),m(l(t[0]),o)}}),a.$watch("mdDiameter",function(e){var t=f(e),n=p(t),r=t/2+"px",i={width:t+"px",height:t+"px"};I[0].setAttribute("viewBox","0 0 "+t+" "+t),I.css(i).css("transform-origin",r+" "+r+" "+r),s.css(i),R.css("stroke-width",n+"px")})}function c(e,t,n,r){var i,o=3.5999,a=r||0,s=t/2,c=n/2,l=a*o,f=e*o,p=u(s,c,l),d=u(s,c,f+l),h=f<0?0:1;return i=f<0?f>=-180?0:1:f<=180?0:1,"M"+p+"A"+c+","+c+" 0 "+i+","+h+" "+d}function u(t,n,r){var i=(r-90)*m;return t+n*e.Math.cos(i)+","+(t+n*e.Math.sin(i))}function l(t){return e.Math.max(0,e.Math.min(t||0,100))}function f(e){var t=n.progressSize;if(e){var r=parseFloat(e);return e.lastIndexOf("%")===e.length-1&&(r=r/100*t),r}return t}function p(e){return n.strokeWidth/100*e}var d=e.requestAnimationFrame||t.noop,h=e.cancelAnimationFrame||t.noop,m=e.Math.PI/180,g="determinate",y="indeterminate",v="_md-progress-circular-disabled",b="_md-mode-indeterminate";return{restrict:"E",scope:{value:"@",mdDiameter:"@",mdMode:"@"},template:'<svg xmlns="http://www.w3.org/2000/svg"><path fill="none"/></svg>',compile:function(e,n){if(e.attr({"aria-valuemin":0,"aria-valuemax":100,role:"progressbar"}),t.isUndefined(n.mdMode)){var r=t.isDefined(n.value),i=r?g:y;n.$set("mdMode",i)}else n.$set("mdMode",n.mdMode.trim());return s}}}t.module("material.components.progressCircular").directive("mdProgressCircular",e),e.$inject=["$window","$mdProgressCircular","$mdTheming","$mdUtil","$interval","$log"]}(),function(){function e(){function e(e,t,n,r){return n*e/r+t}function n(e,t,n,r){var i=(e/=r)*e,o=i*e;return t+n*(6*o*i+-15*i*i+10*o)}var r={progressSize:50,strokeWidth:10,duration:100,easeFn:e,durationIndeterminate:500,startIndeterminate:3,endIndeterminate:80,easeFnIndeterminate:n,easingPresets:{linearEase:e,materialEase:n}};return{configure:function(e){return r=t.extend(r,e||{})},$get:function(){return r}}}t.module("material.components.progressCircular").provider("$mdProgressCircular",e)}(),function(){function e(){function e(e,r,i,o){if(o){var a=o.getTabElementIndex(r),s=n(r,"md-tab-body").remove(),c=n(r,"md-tab-label").remove(),u=o.insertTab({scope:e,parent:e.$parent,index:a,element:r,template:s.html(),label:c.html()},a);e.select=e.select||t.noop,e.deselect=e.deselect||t.noop,e.$watch("active",function(e){e&&o.select(u.getIndex(),!0)}),e.$watch("disabled",function(){o.refreshIndex()}),e.$watch(function(){return o.getTabElementIndex(r)},function(e){u.index=e,o.updateTabOrder()}),e.$on("$destroy",function(){o.removeTab(u)})}}function n(e,n){for(var r=e[0].children,i=0,o=r.length;i<o;i++){var a=r[i];if(a.tagName===n.toUpperCase())return t.element(a)}return t.element()}return{require:"^?mdTabs",terminal:!0,compile:function(r,i){var o=n(r,"md-tab-label"),a=n(r,"md-tab-body");if(0==o.length&&(o=t.element("<md-tab-label></md-tab-label>"),i.label?o.text(i.label):o.append(r.contents()),0==a.length)){var s=r.contents().detach();a=t.element("<md-tab-body></md-tab-body>"),a.append(s)}return r.append(o),a.html()&&r.append(a),e},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"}}}t.module("material.components.tabs").directive("mdTab",e)}(),function(){function e(){return{require:"^?mdTabs",link:function(e,t,n,r){r&&r.attachRipple(e,t)}}}t.module("material.components.tabs").directive("mdTabItem",e)}(),function(){function e(){return{terminal:!0}}t.module("material.components.tabs").directive("mdTabLabel",e)}(),function(){function e(e){return{restrict:"A",compile:function(t,n){var r=e(n.mdTabScroll,null,!0);return function(e,t){t.on("mousewheel",function(t){e.$apply(function(){r(e,{$event:t})})})}}}}t.module("material.components.tabs").directive("mdTabScroll",e),e.$inject=["$parse"]}(),function(){function e(e,r,i,o,a,s,c,u,l,f){function p(){le.selectedIndex=le.selectedIndex||0,d(),m(),h(),f(r),s.nextTick(function(){pe=U(),oe(),te(),ae(),le.tabs[le.selectedIndex]&&le.tabs[le.selectedIndex].scope.select(),me=!0,G()})}function d(){var e=u.$mdTabsTemplate,n=t.element(r[0].querySelector("md-tab-data"));n.html(e),l(n.contents())(le.parent),delete u.$mdTabsTemplate}function h(){t.element(i).on("resize",L),e.$on("$destroy",v)}function m(){e.$watch("$mdTabsCtrl.selectedIndex",I)}function g(e,t){var n=u.$normalize("md-"+e);t&&z(e,t),u.$observe(n,function(t){le[e]=t})}function y(e,t){function n(t){le[e]="false"!==t}var r=u.$normalize("md-"+e);t&&z(e,t),u.hasOwnProperty(r)&&n(u[r]),u.$observe(r,n)}function v(){he=!0,t.element(i).off("resize",L)}function b(e){var n=U();t.element(n.wrapper).toggleClass("md-stretch-tabs",q()),ae()}function S(e){le.shouldCenterTabs=H()}function _(e,n){if(e!==n){var r=U();t.forEach(r.tabs,function(t){t.style.maxWidth=e+"px"}),s.nextTick(le.updateInkBarStyles)}}function O(e,t){e!==t&&(le.maxTabWidth=K(),le.shouldCenterTabs=H(),s.nextTick(function(){le.maxTabWidth=K(),te(le.selectedIndex)}))}function T(e){r[e?"removeClass":"addClass"]("md-no-tab-content")}function E(n){var r=U(),i=le.shouldCenterTabs?"":"-"+n+"px";t.element(r.paging).css(o.CSS.TRANSFORM,"translate3d("+i+", 0, 0)"),e.$broadcast("$mdTabsPaginationChanged")}function w(e,t){e!==t&&U().tabs[e]&&(te(),ee())}function I(t,n){t!==n&&(le.selectedIndex=Y(t),le.lastSelectedIndex=n,le.updateInkBarStyles(),oe(),te(t),e.$broadcast("$mdTabsChanged"),le.tabs[n]&&le.tabs[n].scope.deselect(),le.tabs[t]&&le.tabs[t].scope.select())}function R(e){var t=r[0].getElementsByTagName("md-tab");return Array.prototype.indexOf.call(t,e[0])}function P(){P.watcher||(P.watcher=e.$watch(function(){s.nextTick(function(){P.watcher&&r.prop("offsetParent")&&(P.watcher(),P.watcher=null,L())},!1)}))}function j(e){switch(e.keyCode){case o.KEY_CODE.LEFT_ARROW:e.preventDefault(),Z(-1,!0);break;case o.KEY_CODE.RIGHT_ARROW:e.preventDefault(),Z(1,!0);break;case o.KEY_CODE.SPACE:case o.KEY_CODE.ENTER:e.preventDefault(),fe||A(le.focusIndex)}le.lastClick=!1}function A(e,t){fe||(le.focusIndex=le.selectedIndex=e),le.lastClick=!0,t&&le.noSelectClick||s.nextTick(function(){le.tabs[e].element.triggerHandler("click")},!1)}function C(e){le.shouldPaginate&&(e.preventDefault(),le.offsetLeft=ce(le.offsetLeft-e.wheelDelta))}function $(){var e,t,n=U(),r=n.canvas.clientWidth,i=r+le.offsetLeft;for(e=0;e<n.tabs.length&&(t=n.tabs[e],!(t.offsetLeft+t.offsetWidth>i));e++);le.offsetLeft=ce(t.offsetLeft)}function D(){var e,t,n=U();for(e=0;e<n.tabs.length&&(t=n.tabs[e],!(t.offsetLeft+t.offsetWidth>=le.offsetLeft));e++);le.offsetLeft=ce(t.offsetLeft+t.offsetWidth-n.canvas.clientWidth)}function L(){le.lastSelectedIndex=le.selectedIndex,le.offsetLeft=ce(le.offsetLeft),s.nextTick(function(){le.updateInkBarStyles(),G()})}function k(e){t.element(U().inkBar).toggleClass("ng-hide",e)}function M(e){r.toggleClass("md-dynamic-height",e)}function x(e){if(!he){var t=le.selectedIndex,n=le.tabs.splice(e.getIndex(),1)[0];ie(),le.selectedIndex===t&&(n.scope.deselect(),le.tabs[le.selectedIndex]&&le.tabs[le.selectedIndex].scope.select()),s.nextTick(function(){G(),le.offsetLeft=ce(le.offsetLeft)})}}function F(e,n){var r=me,i={getIndex:function(){return le.tabs.indexOf(o)},isActive:function(){return this.getIndex()===le.selectedIndex},isLeft:function(){return this.getIndex()<le.selectedIndex},isRight:function(){return this.getIndex()>le.selectedIndex},shouldRender:function(){return!le.noDisconnect||this.isActive()},hasFocus:function(){return!le.lastClick&&le.hasFocus&&this.getIndex()===le.focusIndex},id:s.nextUid()},o=t.extend(i,e);return t.isDefined(n)?le.tabs.splice(n,0,o):le.tabs.push(o),ne(),re(),s.nextTick(function(){G(),r&&le.autoselect&&s.nextTick(function(){s.nextTick(function(){A(le.tabs.indexOf(o))})})}),o}function U(){var e={},t=r[0];return e.wrapper=t.querySelector("md-tabs-wrapper"),e.canvas=e.wrapper.querySelector("md-tabs-canvas"),e.paging=e.canvas.querySelector("md-pagination-wrapper"),e.inkBar=e.paging.querySelector("md-ink-bar"),e.contents=t.querySelectorAll("md-tabs-content-wrapper > md-tab-content"),e.tabs=e.paging.querySelectorAll("md-tab-item"),e.dummies=e.canvas.querySelectorAll("md-dummy-tab"),e}function B(){return le.offsetLeft>0}function N(){var e=U(),t=e.tabs[e.tabs.length-1];return t&&t.offsetLeft+t.offsetWidth>e.canvas.clientWidth+le.offsetLeft}function q(){switch(le.stretchTabs){case"always":return!0;case"never":return!1;default:return!le.shouldPaginate&&i.matchMedia("(max-width: 600px)").matches}}function H(){return le.centerTabs&&!le.shouldPaginate}function V(){if(le.noPagination||!me)return!1;var e=r.prop("clientWidth");return t.forEach(U().dummies,function(t){e-=t.offsetWidth}),e<0}function Y(e){if(e===-1)return-1;var t,n,r=Math.max(le.tabs.length-e,e);for(t=0;t<=r;t++){if(n=le.tabs[e+t],n&&n.scope.disabled!==!0)return n.getIndex();if(n=le.tabs[e-t],n&&n.scope.disabled!==!0)return n.getIndex()}return e}function z(e,t,n){Object.defineProperty(le,e,{get:function(){return n},set:function(e){var r=n;n=e,t&&t(e,r)}})}function G(){W(),le.maxTabWidth=K(),le.shouldPaginate=V()}function W(){var e=U();q()?t.element(e.paging).css("width",""):t.element(e.paging).css("width",Q()+"px")}function Q(){return J(U().dummies)}function J(e){var n=0;return t.forEach(e,function(e){n+=Math.max(e.offsetWidth,e.getBoundingClientRect().width)}),Math.ceil(n)}function K(){return r.prop("clientWidth")}function X(){var e=le.tabs[le.selectedIndex],t=le.tabs[le.focusIndex];le.tabs=le.tabs.sort(function(e,t){return e.index-t.index}),le.selectedIndex=le.tabs.indexOf(e),le.focusIndex=le.tabs.indexOf(t)}function Z(e,t){var n,r=t?"focusIndex":"selectedIndex",i=le[r];for(n=i+e;le.tabs[n]&&le.tabs[n].scope.disabled;n+=e);le.tabs[n]&&(le[r]=n)}function ee(){U().dummies[le.focusIndex].focus()}function te(e){var t=U();if(null==e&&(e=le.focusIndex),t.tabs[e]&&!le.shouldCenterTabs){var n=t.tabs[e],r=n.offsetLeft,i=n.offsetWidth+r;le.offsetLeft=Math.max(le.offsetLeft,ce(i-t.canvas.clientWidth+64)),le.offsetLeft=Math.min(le.offsetLeft,ce(r))}}function ne(){de.forEach(function(e){s.nextTick(e)}),de=[]}function re(){var e=!1;t.forEach(le.tabs,function(t){t.template&&(e=!0)}),le.hasContent=e}function ie(){le.selectedIndex=Y(le.selectedIndex),le.focusIndex=Y(le.focusIndex)}function oe(){if(!le.dynamicHeight)return r.css("height","");if(!le.tabs.length)return de.push(oe);var e=U(),t=e.contents[le.selectedIndex],i=t?t.offsetHeight:0,o=e.wrapper.offsetHeight,a=i+o,u=r.prop("clientHeight");if(u!==a){"bottom"===r.attr("md-align-tabs")&&(u-=o,a-=o,r.attr("md-border-bottom")!==n&&++u),fe=!0;var l={height:u+"px"},f={height:a+"px"};r.css(l),c(r,{from:l,to:f,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){r.css({transition:"none",height:""}),s.nextTick(function(){r.css("transition","")}),fe=!1})}}function ae(){var e=U();if(!e.tabs[le.selectedIndex])return void t.element(e.inkBar).css({left:"auto",right:"auto"});if(!le.tabs.length)return de.push(le.updateInkBarStyles);if(!r.prop("offsetParent"))return P();var n=le.selectedIndex,i=e.paging.offsetWidth,o=e.tabs[n],a=o.offsetLeft,c=i-a-o.offsetWidth;if(le.shouldCenterTabs){var u=J(e.tabs);i>u&&s.nextTick(ae,!1)}se(),t.element(e.inkBar).css({left:a+"px",right:c+"px"})}function se(){var e=U(),n=le.selectedIndex,r=le.lastSelectedIndex,i=t.element(e.inkBar);t.isNumber(r)&&i.toggleClass("md-left",n<r).toggleClass("md-right",n>r)}function ce(e){var t=U();if(!t.tabs.length||!le.shouldPaginate)return 0;var n=t.tabs[t.tabs.length-1],r=n.offsetLeft+n.offsetWidth;return e=Math.max(0,e),e=Math.min(r-t.canvas.clientWidth,e)}function ue(e,n){var r=U(),i={colorElement:t.element(r.inkBar)};a.attach(e,n,i)}var le=this,fe=!1,pe=U(),de=[],he=!1,me=!1;g("stretchTabs",b),z("focusIndex",w,le.selectedIndex||0),z("offsetLeft",E,0),z("hasContent",T,!1),z("maxTabWidth",_,K()),z("shouldPaginate",O,!1),y("noInkBar",k),y("dynamicHeight",M),y("noPagination"),y("swipeContent"),y("noDisconnect"),y("autoselect"),y("noSelectClick"),y("centerTabs",S,!1),y("enableDisconnect"),le.scope=e,le.parent=e.$parent,le.tabs=[],le.lastSelectedIndex=null,le.hasFocus=!1,le.lastClick=!0,le.shouldCenterTabs=H(),le.updatePagination=s.debounce(G,100),le.redirectFocus=ee,le.attachRipple=ue,le.insertTab=F,le.removeTab=x,le.select=A,le.scroll=C,le.nextPage=$,le.previousPage=D,le.keydown=j,le.canPageForward=N,le.canPageBack=B,le.refreshIndex=ie,le.incrementIndex=Z,le.getTabElementIndex=R,le.updateInkBarStyles=s.debounce(ae,100),le.updateTabOrder=s.debounce(X,100),p()}t.module("material.components.tabs").controller("MdTabsController",e),e.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming"]}(),function(){function e(e){return{scope:{selectedIndex:"=?mdSelected"},template:function(t,n){return n.$mdTabsTemplate=t.html(),'<md-tabs-wrapper> <md-tab-data></md-tab-data> <md-prev-button tabindex="-1" role="button" aria-label="Previous Page" aria-disabled="{{!$mdTabsCtrl.canPageBack()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.previousPage()"> <md-icon md-svg-src="'+e.mdTabsArrow+'"></md-icon> </md-prev-button> <md-next-button tabindex="-1" role="button" aria-label="Next Page" aria-disabled="{{!$mdTabsCtrl.canPageForward()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.nextPage()"> <md-icon md-svg-src="'+e.mdTabsArrow+'"></md-icon> </md-next-button> <md-tabs-canvas tabindex="{{ $mdTabsCtrl.hasFocus ? -1 : 0 }}" aria-activedescendant="tab-item-{{$mdTabsCtrl.tabs[$mdTabsCtrl.focusIndex].id}}" ng-focus="$mdTabsCtrl.redirectFocus()" ng-class="{ \'md-paginated\': $mdTabsCtrl.shouldPaginate, \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" ng-keydown="$mdTabsCtrl.keydown($event)" role="tablist"> <md-pagination-wrapper ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" md-tab-scroll="$mdTabsCtrl.scroll($event)"> <md-tab-item tabindex="-1" class="md-tab" ng-repeat="tab in $mdTabsCtrl.tabs" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-click="$mdTabsCtrl.select(tab.getIndex())" ng-class="{ \'md-active\':    tab.isActive(), \'md-focused\':   tab.hasFocus(), \'md-disabled\':  tab.scope.disabled }" ng-disabled="tab.scope.disabled" md-swipe-left="$mdTabsCtrl.nextPage()" md-swipe-right="$mdTabsCtrl.previousPage()" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-tab-item> <md-ink-bar></md-ink-bar> </md-pagination-wrapper> <md-tabs-dummy-wrapper class="_md-visually-hidden md-dummy-wrapper"> <md-dummy-tab class="md-tab" tabindex="-1" id="tab-item-{{::tab.id}}" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-focus="$mdTabsCtrl.hasFocus = true" ng-blur="$mdTabsCtrl.hasFocus = false" ng-repeat="tab in $mdTabsCtrl.tabs" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-dummy-tab> </md-tabs-dummy-wrapper> </md-tabs-canvas> </md-tabs-wrapper> <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent && $mdTabsCtrl.selectedIndex >= 0" class="_md"> <md-tab-content id="tab-content-{{::tab.id}}" class="_md" role="tabpanel" aria-labelledby="tab-item-{{::tab.id}}" md-swipe-left="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(1)" md-swipe-right="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(-1)" ng-if="$mdTabsCtrl.hasContent" ng-repeat="(index, tab) in $mdTabsCtrl.tabs" ng-class="{ \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null, \'md-active\':        tab.isActive(), \'md-left\':          tab.isLeft(), \'md-right\':         tab.isRight(), \'md-no-scroll\':     $mdTabsCtrl.dynamicHeight }"> <div md-tabs-template="::tab.template" md-connected-if="tab.isActive()" md-scope="::tab.parent" ng-if="$mdTabsCtrl.enableDisconnect || tab.shouldRender()"></div> </md-tab-content> </md-tabs-content-wrapper>'},controller:"MdTabsController",controllerAs:"$mdTabsCtrl",bindToController:!0}}t.module("material.components.tabs").directive("mdTabs",e),e.$inject=["$$mdSvgRegistry"]}(),function(){function e(e){return{require:"^?mdTabs",link:function(e,t,n,r){if(r){var i=new MutationObserver(function(e){r.updatePagination(),r.updateInkBarStyles()}),o={childList:!0,subtree:!0};i.observe(t[0],o),e.$on("$destroy",function(){i&&i.disconnect()})}}}}t.module("material.components.tabs").directive("mdTabsDummyWrapper",e),e.$inject=["$mdUtil"]}(),function(){function e(e,t){function n(n,r,i,o){function a(){n.$watch("connected",function(e){e===!1?s():c()}),n.$on("$destroy",c)}function s(){o.enableDisconnect&&t.disconnectScope(u)}function c(){o.enableDisconnect&&t.reconnectScope(u)}if(o){var u=o.enableDisconnect?n.compileScope.$new():n.compileScope;return r.html(n.template),e(r.contents())(u),t.nextTick(a)}}return{restrict:"A",link:n,scope:{template:"=mdTabsTemplate",connected:"=?mdConnectedIf",compileScope:"=mdScope"},require:"^?mdTabs"}}t.module("material.components.tabs").directive("mdTabsTemplate",e),e.$inject=["$compile","$mdUtil"]}(),function(){t.module("material.core").constant("$MD_THEME_CSS","/*  Only used with Theme processes */html.md-THEME_NAME-theme, body.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-color}}'; }md-autocomplete.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  md-autocomplete.md-THEME_NAME-theme[disabled]:not([md-floating-label]) {    background: '{{background-100}}'; }  md-autocomplete.md-THEME_NAME-theme button md-icon path {    fill: '{{background-600}}'; }  md-autocomplete.md-THEME_NAME-theme button:after {    background: '{{background-600-0.3}}'; }.md-autocomplete-suggestions-container.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  .md-autocomplete-suggestions-container.md-THEME_NAME-theme li {    color: '{{background-900}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li .highlight {      color: '{{background-600}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li:hover, .md-autocomplete-suggestions-container.md-THEME_NAME-theme li.selected {      background: '{{background-200}}'; }md-backdrop {  background-color: '{{background-900-0.0}}'; }  md-backdrop.md-opaque.md-THEME_NAME-theme {    background-color: '{{background-900-1.0}}'; }.md-button.md-THEME_NAME-theme:not([disabled]):hover {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-focused {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover {  background-color: transparent; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-A700}}'; }.md-button.md-THEME_NAME-theme.md-primary {  color: '{{primary-color}}'; }  .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {    color: '{{primary-contrast}}';    background-color: '{{primary-color}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon {      color: '{{primary-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover {      background-color: '{{primary-600}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused {      background-color: '{{primary-600}}'; }  .md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon {    color: '{{primary-color}}'; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-A700}}'; }.md-button.md-THEME_NAME-theme.md-raised {  color: '{{background-900}}';  background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]) md-icon {    color: '{{background-900}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover {    background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused {    background-color: '{{background-200}}'; }.md-button.md-THEME_NAME-theme.md-warn {  color: '{{warn-color}}'; }  .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {    color: '{{warn-contrast}}';    background-color: '{{warn-color}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon {      color: '{{warn-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover {      background-color: '{{warn-600}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused {      background-color: '{{warn-600}}'; }  .md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon {    color: '{{warn-color}}'; }.md-button.md-THEME_NAME-theme.md-accent {  color: '{{accent-color}}'; }  .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {    color: '{{accent-contrast}}';    background-color: '{{accent-color}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon {      color: '{{accent-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover {      background-color: '{{accent-A700}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon {    color: '{{accent-color}}'; }.md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-accent[disabled], .md-button.md-THEME_NAME-theme.md-warn[disabled] {  color: '{{foreground-3}}';  cursor: default; }  .md-button.md-THEME_NAME-theme[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon {    color: '{{foreground-3}}'; }.md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {  background-color: '{{foreground-4}}'; }.md-button.md-THEME_NAME-theme[disabled] {  background-color: transparent; }._md a.md-THEME_NAME-theme:not(.md-button).md-primary {  color: '{{primary-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-primary:hover {    color: '{{primary-700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-accent {  color: '{{accent-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover {    color: '{{accent-700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-accent {  color: '{{accent-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover {    color: '{{accent-A700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-warn {  color: '{{warn-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-warn:hover {    color: '{{warn-700}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }md-card.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-hue-1}}';  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }  md-card.md-THEME_NAME-theme md-card-header md-card-avatar md-icon {    color: '{{background-color}}';    background-color: '{{foreground-3}}'; }  md-card.md-THEME_NAME-theme md-card-header md-card-header-text .md-subhead {    color: '{{foreground-2}}'; }  md-card.md-THEME_NAME-theme md-card-title md-card-title-text:not(:only-child) .md-subhead {    color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-A700}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked.md-focused ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon:after {  border-color: '{{accent-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon {  background-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-icon:after {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-label {  color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme .md-chips {  box-shadow: 0 1px '{{foreground-4}}'; }  md-chips.md-THEME_NAME-theme .md-chips.md-focused {    box-shadow: 0 2px '{{primary-color}}'; }  md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input {    color: '{{foreground-1}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-ms-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme md-chip {  background: '{{background-300}}';  color: '{{background-800}}'; }  md-chips.md-THEME_NAME-theme md-chip md-icon {    color: '{{background-700}}'; }  md-chips.md-THEME_NAME-theme md-chip.md-focused {    background: '{{primary-color}}';    color: '{{primary-contrast}}'; }    md-chips.md-THEME_NAME-theme md-chip.md-focused md-icon {      color: '{{primary-contrast}}'; }  md-chips.md-THEME_NAME-theme md-chip._md-chip-editing {    background: transparent;    color: '{{background-800}}'; }md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path {  fill: '{{background-500}}'; }.md-contact-suggestion span.md-contact-email {  color: '{{background-400}}'; }md-content.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-default}}'; }/** Theme styles for mdCalendar. */.md-calendar.md-THEME_NAME-theme {  background: '{{background-A100}}';  color: '{{background-A200-0.87}}'; }  .md-calendar.md-THEME_NAME-theme tr:last-child td {    border-bottom-color: '{{background-200}}'; }.md-THEME_NAME-theme .md-calendar-day-header {  background: '{{background-300}}';  color: '{{background-A200-0.87}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today .md-calendar-date-selection-indicator {  border: 1px solid '{{primary-500}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today.md-calendar-date-disabled {  color: '{{primary-500-0.6}}'; }.md-calendar-date.md-focus .md-THEME_NAME-theme .md-calendar-date-selection-indicator, .md-THEME_NAME-theme .md-calendar-date-selection-indicator:hover {  background: '{{background-300}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-selected-date .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date.md-focus.md-calendar-selected-date .md-calendar-date-selection-indicator {  background: '{{primary-500}}';  color: '{{primary-500-contrast}}';  border-color: transparent; }.md-THEME_NAME-theme .md-calendar-date-disabled,.md-THEME_NAME-theme .md-calendar-month-label-disabled {  color: '{{background-A200-0.435}}'; }/** Theme styles for mdDatepicker. */.md-THEME_NAME-theme .md-datepicker-input {  color: '{{foreground-1}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-input-container {  border-bottom-color: '{{foreground-4}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused {    border-bottom-color: '{{primary-color}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-invalid {    border-bottom-color: '{{warn-A700}}'; }.md-THEME_NAME-theme .md-datepicker-calendar-pane {  border-color: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button .md-datepicker-expand-triangle {  border-top-color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button:hover .md-datepicker-expand-triangle {  border-top-color: '{{foreground-2}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon {  fill: '{{primary-500}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-input-container,.md-THEME_NAME-theme .md-datepicker-input-mask-opaque {  background: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-calendar {  background: '{{background-A100}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-hue-1}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions, md-dialog.md-THEME_NAME-theme.md-content-overflow md-dialog-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }.layout-row > md-divider.md-THEME_NAME-theme,.layout-xs-row > md-divider.md-THEME_NAME-theme, .layout-gt-xs-row > md-divider.md-THEME_NAME-theme,.layout-sm-row > md-divider.md-THEME_NAME-theme, .layout-gt-sm-row > md-divider.md-THEME_NAME-theme,.layout-md-row > md-divider.md-THEME_NAME-theme, .layout-gt-md-row > md-divider.md-THEME_NAME-theme,.layout-lg-row > md-divider.md-THEME_NAME-theme, .layout-gt-lg-row > md-divider.md-THEME_NAME-theme,.layout-xl-row > md-divider.md-THEME_NAME-theme {  border-right-color: '{{foreground-4}}'; }md-icon.md-THEME_NAME-theme {  color: '{{foreground-2}}'; }  md-icon.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  md-icon.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  md-icon.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4 {  color: '{{foreground-1}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p {  color: '{{foreground-2}}'; }md-list.md-THEME_NAME-theme ._md-proxy-focus.md-focused div._md-no-style {  background-color: '{{background-100}}'; }md-list.md-THEME_NAME-theme md-list-item .md-avatar-icon {  background-color: '{{foreground-3}}';  color: '{{background-color}}'; }md-list.md-THEME_NAME-theme md-list-item > md-icon {  color: '{{foreground-2}}'; }  md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight {    color: '{{primary-color}}'; }    md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight.md-accent {      color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme > md-icon {  color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme label,md-input-container.md-THEME_NAME-theme ._md-placeholder {  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme label.md-required:after {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-focused):not(.md-input-invalid) label.md-required:after {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme .md-input-messages-animation, md-input-container.md-THEME_NAME-theme .md-input-message-animation {  color: '{{warn-A700}}'; }  md-input-container.md-THEME_NAME-theme .md-input-messages-animation .md-char-counter, md-input-container.md-THEME_NAME-theme .md-input-message-animation .md-char-counter {    color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input, md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-resized .md-input {  border-color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon {  color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input-message-animation, md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled],[disabled] md-input-container.md-THEME_NAME-theme .md-input {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-menu-bar.md-THEME_NAME-theme > button.md-button {  color: '{{foreground-2}}';  border-radius: 2px; }md-menu-bar.md-THEME_NAME-theme md-menu._md-open > button, md-menu-bar.md-THEME_NAME-theme md-menu > button:focus {  outline: none;  background: '{{background-200}}'; }md-menu-bar.md-THEME_NAME-theme._md-open:not(._md-keyboard-mode) md-menu:hover > button {  background-color: '{{ background-500-0.2}}'; }md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:hover,md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:focus {  background: transparent; }md-menu-content.md-THEME_NAME-theme .md-menu > .md-button:after {  color: '{{background-A200-0.54}}'; }md-menu-content.md-THEME_NAME-theme .md-menu._md-open > .md-button {  background-color: '{{ background-500-0.2}}'; }md-toolbar.md-THEME_NAME-theme.md-menu-toolbar {  background-color: '{{background-A100}}';  color: '{{background-A200}}'; }  md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler {    background-color: '{{primary-color}}';    color: '{{background-A100-0.87}}'; }    md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler md-icon {      color: '{{background-A100-0.87}}'; }md-menu-content.md-THEME_NAME-theme {  background-color: '{{background-A100}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-item {    color: '{{background-A200-0.87}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item md-icon {      color: '{{background-A200-0.54}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] {      color: '{{background-A200-0.25}}'; }      md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] md-icon {        color: '{{background-A200-0.25}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-divider {    background-color: '{{background-A200-0.11}}'; }md-nav-bar.md-THEME_NAME-theme .md-nav-bar {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-nav-bar.md-THEME_NAME-theme .md-button._md-nav-button.md-unselected {  color: '{{foreground-2}}'; }md-nav-bar.md-THEME_NAME-theme md-nav-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }.md-panel {  background-color: '{{background-900-0.0}}'; }  .md-panel._md-panel-backdrop.md-THEME_NAME-theme {    background-color: '{{background-900-1.0}}'; }md-progress-circular.md-THEME_NAME-theme path {  stroke: '{{primary-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-warn path {  stroke: '{{warn-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-accent path {  stroke: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme ._md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme ._md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-container {  background-color: '{{accent-A100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-dashed:before {  background: radial-gradient(\"{{warn-100}}\" 0%, \"{{warn-100}}\" 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-bar1 {  background-color: '{{accent-A100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-dashed:before {  background: radial-gradient(\"{{accent-A100}}\" 0%, \"{{accent-A100}}\" 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme ._md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme ._md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked ._md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme ._md-container .md-ripple {  color: '{{accent-A700}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-group.md-THEME_NAME-theme[disabled],md-radio-button.md-THEME_NAME-theme[disabled] {  color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-off,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-off {    border-color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-on,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-on {    border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme .md-checked .md-ink-ripple {  color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-primary .md-checked:not([disabled]) .md-ink-ripple, md-radio-group.md-THEME_NAME-theme .md-checked:not([disabled]).md-primary .md-ink-ripple {  color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme .md-checked.md-primary .md-ink-ripple {  color: '{{warn-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-primary .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-warn .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-warn ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-sidenav.md-THEME_NAME-theme, md-sidenav.md-THEME_NAME-theme md-content {  background-color: '{{background-hue-1}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  border-bottom-color: transparent;  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-select.md-THEME_NAME-theme ._md-select-value {  border-bottom-color: '{{foreground-4}}'; }  md-select.md-THEME_NAME-theme ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select.md-THEME_NAME-theme.ng-invalid.ng-dirty ._md-select-value {  color: '{{warn-A700}}' !important;  border-bottom-color: '{{warn-A700}}' !important; }md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value {  border-bottom-color: '{{primary-color}}';  color: '{{ foreground-1 }}'; }  md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value._md-select-placeholder {    color: '{{ foreground-1 }}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent ._md-select-value {  border-bottom-color: '{{accent-color}}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn ._md-select-value {  border-bottom-color: '{{warn-color}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  color: '{{foreground-3}}'; }  md-select.md-THEME_NAME-theme[disabled] ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select-menu.md-THEME_NAME-theme md-content {  background: '{{background-A100}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-optgroup {    color: '{{background-600-0.87}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-option {    color: '{{background-900-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[disabled] ._md-text {      color: '{{background-400-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):focus, md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):hover {      background: '{{background-200}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[selected] {      color: '{{primary-500}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected]:focus {        color: '{{primary-600}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent {        color: '{{accent-color}}'; }        md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent:focus {          color: '{{accent-A700}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-ripple {  color: '{{primary-600}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ripple {  color: '{{background-600}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ink-ripple {  color: '{{primary-color-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] ._md-icon {  background-color: '{{primary-color-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected].md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }._md-checkbox-enabled.md-THEME_NAME-theme md-option ._md-text {  color: '{{background-900-0.87}}'; }md-slider.md-THEME_NAME-theme ._md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme ._md-track-ticks {  color: '{{background-contrast}}'; }md-slider.md-THEME_NAME-theme ._md-focus-ring {  background-color: '{{accent-A200-0.2}}'; }md-slider.md-THEME_NAME-theme ._md-disabled-thumb {  border-color: '{{background-color}}';  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-thumb:after {  background-color: '{{background-color}}';  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-focus-ring {  background-color: '{{foreground-3-0.38}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-thumb:after {  background-color: '{{background-contrast}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme ._md-track._md-track-fill {  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb:after {  border-color: '{{accent-color}}';  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-sign {  background-color: '{{accent-color}}'; }  md-slider.md-THEME_NAME-theme ._md-sign:after {    border-top-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb-text {  color: '{{accent-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-focus-ring {  background-color: '{{warn-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-track._md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn ._md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-focus-ring {  background-color: '{{primary-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-track._md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary ._md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] ._md-thumb:after {  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled]:not(._md-min) ._md-thumb:after, md-slider.md-THEME_NAME-theme[disabled][md-discrete] ._md-thumb:after {  background-color: '{{foreground-3}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-disabled-thumb {  border-color: transparent;  background-color: transparent; }md-slider-container[disabled] > *:first-child:not(md-slider),md-slider-container[disabled] > *:last-child:not(md-slider) {  color: '{{foreground-3}}'; }md-switch.md-THEME_NAME-theme .md-ink-ripple {  color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme ._md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme ._md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-focused ._md-thumb:before {  background-color: '{{accent-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-ink-ripple {  color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused ._md-thumb:before {  background-color: '{{primary-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-ink-ripple {  color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused ._md-thumb:before {  background-color: '{{warn-color-0.26}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-bar {  background-color: '{{foreground-4}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-default}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme .md-paginator md-icon {  color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme .md-tab {  color: '{{foreground-2}}'; }  md-tabs.md-THEME_NAME-theme .md-tab[disabled], md-tabs.md-THEME_NAME-theme .md-tab[disabled] md-icon {    color: '{{foreground-3}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-active, md-tabs.md-THEME_NAME-theme .md-tab.md-active md-icon, md-tabs.md-THEME_NAME-theme .md-tab.md-focused, md-tabs.md-THEME_NAME-theme .md-tab.md-focused md-icon {    color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    background: '{{primary-color-0.1}}'; }  md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container {    color: '{{accent-A100}}'; }md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-A100}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-A100}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toast.md-THEME_NAME-theme .md-toast-content {  background-color: #323232;  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-toast-content .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight {      color: '{{accent-color}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-primary {        color: '{{primary-color}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-warn {        color: '{{warn-color}}'; }md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) md-icon {    color: '{{primary-contrast}}';    fill: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) .md-button[disabled] md-icon {    color: '{{primary-contrast-0.26}}';    fill: '{{primary-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-ink-ripple {      color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent md-icon {      color: '{{accent-contrast}}';      fill: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-button[disabled] md-icon {      color: '{{accent-contrast-0.26}}';      fill: '{{accent-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme ._md-content {    background-color: '{{foreground-2}}'; }");
}()}(window,window.angular),window.ngMaterial={version:{full:"1.1.0-rc.5"}}},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(72),o=n(53),a="[object RegExp]";e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=16384),this._maxSize=e,this._elements=[]}return e.prototype.push=function(e){return this.size!==this._maxSize&&(this._elements.push(e),!0)},e.prototype.clear=function(){return this._elements=[],!0},e.prototype.pop=function(){return this.isEmpty()?null:this._elements.pop()},e.prototype.peek=function(){return this.isEmpty()?null:this._elements[this.size-1]},e.prototype.isEmpty=function(){return 0===this.size},Object.defineProperty(e.prototype,"size",{get:function(){return this._elements.length},enumerable:!0,configurable:!0}),e}();t.Stack=r},function(e,t,n){var r=n(75),i=n(229),o=n(134),a=i(function(e,t){r(t,o(t),e)});e.exports=a},function(e,t,n){"use strict";var r=n(627);t.fromPromise=r.PromiseObservable.create},function(e,t,n){"use strict";function r(e){var t=e.value,n=e.subscriber;n.closed||(n.next(t),n.complete())}function i(e){var t=e.err,n=e.subscriber;n.closed||n.error(t)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(71),s=n(35),c=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return o(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,o=this.scheduler;if(null==o)this._isScalar?e.closed||(e.next(this.value),e.complete()):n.then(function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){a.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return o.schedule(r,0,{value:this.value,subscriber:e})}else n.then(function(n){t.value=n,t._isScalar=!0,e.closed||e.add(o.schedule(r,0,{value:n,subscriber:e}))},function(t){e.closed||e.add(o.schedule(i,0,{err:t,subscriber:e}))}).then(null,function(e){a.root.setTimeout(function(){throw e})})},t}(s.Observable);t.PromiseObservable=c},function(e,t,n){"use strict";var r=n(35),i=n(629);r.Observable.prototype.concatMap=i.concatMap},function(e,t,n){"use strict";function r(e,t){return i.concatMap(e,t)(this)}var i=n(630);t.concatMap=r},function(e,t,n){"use strict";function r(e,t){return i.mergeMap(e,t,1)}var i=n(631);t.concatMap=r},function(e,t,n){"use strict";function r(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof t&&(n=t,t=null),r.lift(new s(e,t,n))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(333),a=n(334);t.mergeMap=r;var s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=s;var c=function(e){function t(t,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(o.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);t.MergeMapSubscriber=c},function(e,t,n){function r(e){var t=null==e?0:e.length;return t?i(e,o):[]}var i=n(82),o=1/0;e.exports=r},function(e,t,n){"use strict";function r(e){return e.then(function(e){return{value:e,status:"resolved"}},function(e){return{error:e,status:"rejected"}})}Object.defineProperty(t,"__esModule",{value:!0}),t.reflect=r},function(e,t,n){var r=n(361),i=n(82),o=n(106),a=n(136),s=n(321),c=o(function(e,t){var n=s(t);return a(n)&&(n=void 0),a(e)?r(e,i(t,1,a,!0),void 0,n):[]});e.exports=c},function(e,t,n){function r(e,t){var n=d,r=h;if(s(t)){var g="separator"in t?t.separator:g;n="length"in t?f(t.length):n,r="omission"in t?i(t.omission):r}e=p(e);var y=e.length;if(a(e)){var v=l(e);y=v.length}if(n>=y)return e;var b=n-u(r);if(b<1)return r;var S=v?o(v,0,b).join(""):e.slice(0,b);if(void 0===g)return S+r;if(v&&(b+=S.length-b),c(g)){if(e.slice(b).search(g)){var _,O=S;for(g.global||(g=RegExp(g.source,p(m.exec(g))+"g")),g.lastIndex=0;_=g.exec(O);)var T=_.index;S=S.slice(0,void 0===T?b:T)}}else if(e.indexOf(i(g),b)!=b){var E=S.lastIndexOf(g);E>-1&&(S=S.slice(0,E))}return S+r}var i=n(133),o=n(198),a=n(158),s=n(31),c=n(341),u=n(636),l=n(199),f=n(76),p=n(61),d=30,h="...",m=/\w*$/;e.exports=r},function(e,t,n){function r(e){return o(e)?a(e):i(e)}var i=n(637),o=n(158),a=n(638);e.exports=r},function(e,t,n){var r=n(299),i=r("length");e.exports=i},function(e,t){function n(e){for(var t=O.lastIndex=0;O.test(e);)++t;return t}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,c="\\ufe0e\\ufe0f",u="["+r+"]",l="["+s+"]",f="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+f+")",d="[^"+r+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=p+"?",v="["+c+"]?",b="(?:"+g+"(?:"+[d,h,m].join("|")+")"+v+y+")*",S=v+y+b,_="(?:"+[d+l+"?",l,h,m,u].join("|")+")",O=RegExp(f+"(?="+f+")|"+_+S,"g");e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(44),s=n(17),c=n(143),u=n(137),l=function(){function e(e,t,n,r){this.loginService=e,this.storageUtil=t,this.loginIframeService=n,this.silentLoginService=r,this.tryAgain=this.loginIframeService.getTryAgain()||this.loginIframeService.trySilentLogin(),this.tryAgain&&this.getUrl()||this.silentLoginService.silentLoginEnd()}return e.prototype.getUrl=function(){return this.url=this.loginIframeService.getUrl(),this.url},e.prototype.getLoginUrls=function(){return this.loginIframeService.getLoginUrls()},e.prototype.isSilentIframeEnabled=function(){return console.log("try silent login: "+this.tryAgain),this.tryAgain},e=r([o.Component({selector:"prm-login-iframe",templateUrl:"components/primoExplore/login-iframe.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.LoginService&&a.LoginService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.StorageUtil&&s.StorageUtil)&&n||Object,"function"==typeof(l="undefined"!=typeof c.LoginIframeService&&c.LoginIframeService)&&l||Object,"function"==typeof(f="undefined"!=typeof u.SilentLoginService&&u.SilentLoginService)&&f||Object])],e);var t,n,l,f}();t.LoginIframe=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(143),c=n(7),u=n(10),l=n(46),f=n(137),p=function(){function e(e,t,n,r,i,o,a){this.$rootScope=e,this.loginIframeService=t,this.jwtUtilService=n,this.userSessionManagerService=r,this.personalizeResultsButtonService=i,this.sessionTimeoutService=o,this.silentLoginService=a,this.addEventListenerForJwt()}return e.prototype.ngOnInit=function(){},e.prototype.addEventListenerForJwt=function(){var e=this;window.addEventListener("message",function(t){e.receiveJwtFromIframe(t)},!1)},e.prototype.receiveJwtFromIframe=function(e){if("jwt_in_iframe"!==e.data.event_id)return console.log("got the wrong message,  event.data.event_id= "+e.data.event_id),void this.silentLoginService.silentLoginEnd();e.data.jwt&&this.userSessionManagerService.login(e.data.jwt);var t=this.jwtUtilService.getDecodedToken().userGroup;if(t&&"GUEST"!==t)this.jwtUtilService.backFromLoginIframe=!0,this.postLoginAction();else{var n=this.loginIframeService.advanceToNextUrl();this.jwtUtilService.backFromLoginIframe=!n}this.jwtUtilService.backFromLoginIframe&&this.silentLoginService.silentLoginInprogressPromise&&this.silentLoginService.silentLoginEnd(),this.$rootScope.$apply()},e.prototype.postLoginAction=function(){var e=this;this.sessionTimeoutService.startSession(!1),this.silentLoginService.silentLoginAppDelayTimer.then(function(){e.silentLoginService.showSilentLoginToast()}),this.userSessionManagerService.signInObservable.next(),this.$rootScope.$emit("silentLogin"),this.personalizeResultsButtonService.updatePersonalization(this.jwtUtilService.getDecodedToken().viewId)},e=r([a.Component({selector:"prm-silent-login",templateUrl:"components/primoExplore/silentLogin/silent-login.html"}),o(0,a.Inject("$rootScope")),o(5,a.Inject("SessionTimeoutService")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.LoginIframeService&&s.LoginIframeService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&n||Object,"function"==typeof(p="undefined"!=typeof u.UserSessionManagerService&&u.UserSessionManagerService)&&p||Object,"function"==typeof(d="undefined"!=typeof l.PersonalizeResultsButtonService&&l.PersonalizeResultsButtonService)&&d||Object,Object,"function"==typeof(h="undefined"!=typeof f.SilentLoginService&&f.SilentLoginService)&&h||Object])],e);var t,n,p,d,h}();t.PrmSilentLogin=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(118),a=n(642),s=n(643),c=n(645),u=n(647),l=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmTags],providers:[o.TagsService],imports:[s.TagsListModule,c.TagsSearchBarModule,u.TagsResultsModule]})],e)}();t.TagsModule=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(118),c=n(10),u=n(30),l=function(){function e(e,t,n,r){this.userSessionManagerService=e,this.tagsService=t,this.alertService=n,this.$location=r,this.tagsService.getTagsFromApi(),this.tagsService.isInSearch=!1,this.borInfoAlert=n.create(u.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return e.prototype.userLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.isInSearch=function(){return this.tagsService.isInSearch},Object.defineProperty(e.prototype,"popularTags",{get:function(){return this.tagsService.popularTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recentTags",{get:function(){return this.tagsService.recentTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myTags",{get:function(){return this.tagsService.myTags},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e=r([a.Component({selector:"prm-tags",templateUrl:"components/tags/tags.html"}),o(3,a.Inject("$location")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.UserSessionManagerService&&c.UserSessionManagerService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.TagsService&&s.TagsService)&&n||Object,"function"==typeof(l="undefined"!=typeof u.AlertFactory&&u.AlertFactory)&&l||Object,Object])],e);var t,n,l}();t.PrmTags=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(257),a=n(644),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmTagsList],providers:[o.TagsListService],imports:[]})],e)}();t.TagsListModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(257),c=n(1),u=n(118),l=n(10),f=n(26),p=n(44),d=n(6),h=n(96),m=n(80),g=n(5),y=function(){function e(e,t,n,r,i,o,a,s,c){this.userSessionManagerService=e,this.tagsListService=t,this.tagsService=n,this.loginService=r,this.primolyticsService=i,this.$state=o,this.$stateParams=a,this.$mdDialog=s,this.preFiltersService=c,this.validInputRegex="^[0-9A-Za-z_'-]+$",this.invalidInputRestResponse="The request sent by the client was syntactically incorrect.",this.editTagsMode=!1,this.isSearchTextValid=!0}return e.prototype.resultSearchUrl=function(e){var t=this.$stateParams.mode;this.preFiltersService.isPreFilterEnable(this.$stateParams.tab)||(t="advanced");var n="usertag,contains,";"suprima"===c.getBackendSystem()&&(n="user_tags,exact,"),n+=e,"advanced"===t&&(n+=",AND");var r={query:n,vid:c.getVid()};return t&&(r.mode=t),JSON.stringify(r)},e.prototype.closeDialog=function(){this.$mdDialog.hide()},Object.defineProperty(e.prototype,"autocompleteTagslist",{get:function(){return this.tagsService.myTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAllNonUserTags",{get:function(){return this.tagsService.showAllNonUserTags},enumerable:!0,configurable:!0}),e.prototype.showAllRecordNonUserTags=function(){return this.tagsService.showAllRecordNonUserTags()},e.prototype.editTags=function(){this.editTagsMode=!0},e.prototype.userLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.onTagRemove=function(e){this.tagsService.removeTag(this.item,e.tagName)},e.prototype.handleLoginClick=function(){this.loginService.handleLoginClick()},e.prototype.addTag=function(e){var t=this;e.tagName&&(e=e.tagName);var n=this.tagsService.addTag(this.item,e);n.then(function(e){return t.onSuccess()},function(e){return t.onError(e.data)})},e.prototype.searchTextChange=function(){this.searchText.length>0&&!this.isValidInput(this.searchText)?this.isSearchTextValid=!1:this.isSearchTextValid=!0},e.prototype.isValidInput=function(e){return!m(this.usertagslist,{tagName:e})&&!m(this.tagslist,{tagName:e})&&e.length<36&&e.length>0&&e.match(this.validInputRegex)},e.prototype.querySearch=function(e){var t=e?this.tagsService.myTags.filter(this.createFilterFor(this.searchText)):this.tagsService.myTags;return t},e.prototype.createFilterFor=function(e){if(e){var t=g.lowercase(e);return function(e){return 0===e.tagName.indexOf(t)}}return function(e){return!0}},e.prototype.onSuccess=function(){return this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid),this.isSearchTextValid=!0,null},e.prototype.onError=function(e){return this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid),e.indexOf(this.invalidInputRestResponse)!==-1&&(this.isSearchTextValid=!1),null},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof f.PrimoResponse&&f.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"tagslist",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"usertagslist",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"editable",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullDisplay",void 0),r([d.beacon({p:"tags",op:"deleteTag"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"onTagRemove",null),r([d.beacon({p:"tags",op:"addTags"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"onSuccess",null),e=r([a.Component({selector:"prm-tags-list",templateUrl:"components/tags/tagsList/tags-list.html"}),o(5,a.Inject("$state")),o(6,a.Inject("$stateParams")),o(7,a.Inject("$mdDialog")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&n||Object,"function"==typeof(y="undefined"!=typeof s.TagsListService&&s.TagsListService)&&y||Object,"function"==typeof(v="undefined"!=typeof u.TagsService&&u.TagsService)&&v||Object,"function"==typeof(b="undefined"!=typeof p.LoginService&&p.LoginService)&&b||Object,"function"==typeof(S="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&S||Object,Object,Object,Object,"function"==typeof(_="undefined"!=typeof h.PreFiltersService&&h.PreFiltersService)&&_||Object])],e);var t,n,y,v,b,S,_}();t.PrmTagsList=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(366),a=n(646),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmTagsSearchBar],providers:[o.TagsSearchBarService],imports:[]})],e)}();t.TagsSearchBarModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(366),c=n(118),u=n(8),l=n(1),f=n(9),p=function(){function e(e,t,n,r,i,o,a){var s=this;this.tagsService=e,this.tagsSearchBarService=t,this.$timeout=n,this.$scope=r,this.$element=i,this.mediaQueries=o,this.mtCache=a,this.focusOnSearchInput=!1,this.vid=l.getVid(),this.focusOnSearchInput=1===this.mtCache.getTable(this.mtCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===s.vid&&"focus_on_search_input"===e.source2&&"true"===e.target}).length}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.mainSearchField},function(t,n){e.$timeout(function(){e.removeAriaLabel("md-input-container input")},400)}),this.$timeout(function(){if(e.mediaQueries.gtmd&&e.focusOnSearchInput){var t=document.querySelector("#searchBarTags");t&&t.focus()}},0)},e.prototype.doTagsSearch=function(){0===this.mainSearchField.length?this.tagsService.isInSearch=!1:this.tagsService.isInSearch=!0,this.tagsService.doTagsSearch(this.mainSearchField)},e.prototype.removeAriaLabel=function(e){for(var t=this.$element[0].querySelectorAll(e),n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("aria-label")}},e=r([a.Component({selector:"prm-tags-search-bar",templateUrl:"components/tags/tagsSearchBar/tags-search-bar.html"}),o(2,a.Inject("$timeout")),o(3,a.Inject("$scope")),o(4,a.Inject("$element")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.TagsService&&c.TagsService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.TagsSearchBarService&&s.TagsSearchBarService)&&n||Object,Object,Object,Object,"function"==typeof(p="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&p||Object,"function"==typeof(d="undefined"!=typeof f.MappingTablesCache&&f.MappingTablesCache)&&d||Object])],e);var t,n,p,d}();t.PrmTagsSearchBar=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(367),a=n(648),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmTagsResults],providers:[o.TagsResultsService],imports:[]})],e)}();t.TagsResultsModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(367),s=n(0),c=n(118),u=n(4),l=n(1),f=n(2),p=function(){function e(e,t,n,r){this.tagsResultsService=e,this.tagsService=t,this.$state=n,this.configurationUtil=r,this.tagsResultsLimit=1e3}return Object.defineProperty(e.prototype,"tagsSearchResult",{get:function(){return this.tagsService.tagsSearchResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.tagsService.searchInProgress},enumerable:!0,configurable:!0}),e.prototype.resultSearchUrl=function(e){var t="usertag,contains,"+e+",AND";this.configurationUtil.isSuprima()&&(t="user_tags,exact,"+e+",AND");var n={mode:"advanced",query:t,vid:l.getVid()};return this.$state.href(u.STATE_NAMES.SEARCH,n)},e=r([s.Component({selector:"prm-tags-results",templateUrl:"components/tags/tagsResults/tags-results.html"}),o(2,s.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.TagsResultsService&&a.TagsResultsService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.TagsService&&c.TagsService)&&n||Object,Object,"function"==typeof(p="undefined"!=typeof f.ConfigurationUtil&&f.ConfigurationUtil)&&p||Object])],e);var t,n,p}();t.PrmTagsResults=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(6),a=n(650),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmPerformanceMonitor],providers:[o.PrimolyticsService],imports:[]})],e)}();t.PrimolyticsModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(11),c=n(2),u=function(){function e(e,t,n,r){var i=this;this.searchService=e,this.configurationUtil=t,this.$scope=n,this.$timeout=r,this.displayMonitor=!1,this.$scope.$watch(function(){return i.searchService.isSearchInProgress()},function(e){e?i.displayMonitor=!1:i.$timeout(function(){i.displayMonitor=!0},2e3)})}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"isSuprima",{get:function(){return this.configurationUtil.isSuprima()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalSearchTime",{get:function(){return window.appPerformance.timeStamps["search result displayed"]-window.appPerformance.timeStamps["search api send"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchApiTime",{get:function(){return window.appPerformance.timeStamps["after search api"]-window.appPerformance.timeStamps["search api send"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsRenderTime",{get:function(){return window.appPerformance.timeStamps["search result displayed"]-window.appPerformance.timeStamps["after search api"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalSearchServerTime",{get:function(){return window.appPerformance.serverTimeLog.BriefSearchDeltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchServerTime",{get:function(){return window.appPerformance.serverTimeLog.DoSearchPrimoResultDeltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deliveryManagerServerTime",{get:function(){return window.appPerformance.serverTimeLog.FullEndDMDataDeltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverTimeLog",{get:function(){return window.appPerformance.serverTimeLog},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedServerTimeLog",{get:function(){var e=window.appPerformance.serverTimeLog,t={COMBINED_SEARCH_TIME:{time:e.COMBINED_SEARCH_TIME,calls:{BUILD_BLEND_AND_CACHE_RESULTS:{time:e.BUILD_BLEND_AND_CACHE_RESULTS},BUILD_COMBINED_RESULTS_MAP:{time:e.BUILD_COMBINED_RESULTS_MAP},PRIMA_LOCAL_SEARCH_TOTAL:{time:e.PRIMA_LOCAL_SEARCH_TOTAL,calls:{PRIMA_LOCAL_INFO_FACETS_BUILD_DOCS_HIGHLIGHTS:{time:e.PRIMA_LOCAL_INFO_FACETS_BUILD_DOCS_HIGHLIGHTS},CALL_SOLR_GET_IDS_LIST:{time:e.CALL_SOLR_GET_IDS_LIST},BUILD_RESULTS_RETRIVE_FROM_DB:{time:e.BUILD_RESULTS_RETRIVE_FROM_DB,calls:{RETRIVE_FROM_DB_RECORDS:{time:e.RETRIVE_FROM_DB_RECORDS},RETRIVE_FROM_DB_COURSE_INFO:{time:e.RETRIVE_FROM_DB_COURSE_INFO},RETRIVE_FROM_DB_RELATIONS:{time:e.RETRIVE_FROM_DB_RELATIONS},RETRIVE_COLLECTION_DISCOVERY_INFO:{time:e.RETRIVE_COLLECTION_DISCOVERY_INFO}}},PRIMA_LOCAL_SEARCH_SET_AVALIABILITY:{time:e.PRIMA_LOCAL_SEARCH_SET_AVALIABILITY}}},PC_SEARCH_TIME_TOTAL:{time:e.PC_SEARCH_TIME_TOTAL,calls:{PC_SEARCH_CALL_TIME:{time:e.PC_SEARCH_CALL_TIME},PC_BUILD_JSON_AND_HIGLIGHTS:{time:e.PC_BUILD_JSON_AND_HIGLIGHTS}}},SUMMON_SEARCH_TIME_TOTAL:{time:e.SUMMON_SEARCH_TIME_TOTAL,calls:{SUMMON_CALL_SEARCH:{time:e.SUMMON_CALL_SEARCH},SUMMON_BUILD_RESULT_CONVERT_TO_JSON:{time:e.SUMMON_BUILD_RESULT_CONVERT_TO_JSON}}},WORLDCAT_SEARCH_TIME_TOTAL:{time:e.WORLDCAT_SEARCH_TIME_TOTAL,calls:{WORLDCAT_SEARCH_CALL_TIME:{time:e.WORLDCAT_SEARCH_CALL_TIME},WORLDCAT_BUILD_JSON_AND_HIGLIGHTS:{time:e.WORLDCAT_BUILD_JSON_AND_HIGLIGHTS}}}},PROCESS_COMBINED_RESULTS:{time:e.PROCESS_COMBINED_RESULTS},FEATURED_SEARCH_TIME:{time:e.FEATURED_SEARCH_TIME}}};return JSON.stringify(t,function(e,t){return""===e||"time"===e||"calls"===e||t&&void 0!==t.time?t:void 0},"\t")},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-performance-monitor",templateUrl:"components/analytics/performanceMonitor/performance-monitor.html"}),o(2,a.Inject("$scope")),o(3,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SearchService&&s.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object,Object,Object])],e);var t,n}();t.PrmPerformanceMonitor=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(652),a=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmIcon],providers:[]})],e)}();t.IconModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(89),c=(n(88),function(){function e(e,t){this.$element=e,this.$mdIcon=t,this.isCustom=!1}return e.prototype.ngOnInit=function(){var e=this;if(s.getViewSvg()){var t="custom-ui:"+this.iconDefinition;this.$mdIcon(t).then(function(t){t&&(e.isCustom=!0)}).catch(angular.noop)}this.prmAriaLabel="undefined"==typeof this.prmAriaLabel&&"undefined"==typeof this.ariaLabel?"icon-"+this.iconDefinition:this.prmAriaLabel||this.ariaLabel},e.prototype.isEmailMode=function(){return"email"===this.displayMode},r([a.Input(),i("design:type",String)],e.prototype,"class",void 0),r([a.Input(),i("design:type",String)],e.prototype,"iconType",void 0),r([a.Input(),i("design:type",String)],e.prototype,"iconDefinition",void 0),
r([a.Input(),i("design:type",String)],e.prototype,"svgIconSet",void 0),r([a.Input(),i("design:type",String)],e.prototype,"prmAriaLabel",void 0),r([a.Input(),i("design:type",String)],e.prototype,"ariaLabel",void 0),r([a.Input(),i("design:type",String)],e.prototype,"displayMode",void 0),e=r([a.Component({selector:"prm-icon",templateUrl:"components/icon/icon.html",legacy:{transclude:!0}}),o(0,a.Inject("$element")),o(1,a.Inject("$mdIcon")),i("design:paramtypes",[Object,Object])],e)}());t.PrmIcon=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(423),a=n(421),s=n(654),c=n(699),u=n(14),l=n(21),f=n(54),p=n(326),d=n(701),h=n(709),m=n(717),g=n(104),y=n(328),v=n(11),b=n(719),S=n(723),_=n(728),O=n(731),T=n(740),E=n(755),w=n(379),I=n(756),R=n(760),P=n(761),j=n(390),A=n(772),C=n(377),$=n(369),D=n(150),L=n(774),k=n(115),M=n(778),x=function(){function e(){}return e=r([i.NgModule({declarations:[E.PrmSearch,C.PrmSearchErrorMessage],providers:[w.AutoComplete,f.Cheetah,y.HighlightsService,g.RtaService,u.SearchFieldsService,p.SearchResultParser,v.SearchService,l.SearchStateService,$.DirectLinkService,D.DatabasesCategorizeService,k.OrgListCategorizeService,o.AlmaViewerService,a.RepresentationViewerService],imports:[S.CitationTrailsModule,A.ControlledVocabularyModule,_.DidUMeanModule,d.FacetModule,P.ResourceRecommenderModule,c.ReferenceEntryModule,h.SearchBarModule,m.PreFiltersModule,s.SearchResultModule,b.SearchSavedQueriesModule,O.StaticModule,T.TopbarModule,I.VirtualBrowseModule,R.BrowserStorageManagerModule,j.PersonalizeResultsButtonModule,M.NgrsModule,L.MoreLikeThisModule]})],e)}();t.SearchModule=x},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),n(368),n(144);var i=n(0),o=n(655),a=n(656),s=n(27),c=n(657),u=n(228),l=n(658),f=n(659),p=n(224),d=n(376),h=n(677),m=n(678),g=n(681),y=n(682),v=n(683),b=n(237),S=n(688),_=n(689),O=n(95),T=n(690),E=n(691),w=n(692),I=n(377),R=n(693),P=n(180),j=n(694),A=n(260),C=n(695),$=n(378),D=n(696),L=n(697),k=n(698),M=n(254),x=function(){function e(){}return e=r([i.NgModule({declarations:[c.PrmBriefResult,h.PrmBriefResultContainer,m.PrmNoSearchResult,v.PrmPageNavMenu,y.PrmSavedQueriesList,g.PrmSavedQueryFilter,o.PrmSearchResultAvailabilityLine,a.PrmSearchResultFrbrLine,C.PrmChaptersResultsLine,S.PrmSearchResultList,l.PrmSnippet,_.SearchResultSortBy,T.PrmTimesCited,j.PrmSearchResultJournalIndicationLine,w.PrmFeaturedResultItem,I.PrmSearchErrorMessage,R.PrmSearchExplain,E.PrmFeaturedResults,D.PrmSearchResultToolBar,k.PrmSearchResultAddToFavoritesMenu],providers:[s.BriefResultService,p.CitationTrailsService,u.SnippetService,d.UpFrontActionsService,b.PageNavMenuService,O.TimesCitedService,P.SearchErrorMessageService,A.SearchResultThumbnailContainerService,$.ChaptersResultsLineService,L.SearchResultAddToFavoritesMenuService,M.FavoritesEditLabelsMenuService],imports:[f.ActionsModule,"angular-inview","infinite-scroll"]})],e)}();t.SearchResultModule=x},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(2),u=n(33),l=n(56),f=n(4),p=n(20),d=n(369),h=n(42),m=n(9),g=n(77),y=n(3),v=[],b=function(){function e(e,t,n,r,i,o,s,c,u,l,p,d,h){var m=this;this.smoothScrollUtil=t,this.$timeout=n,this.primolyticsService=r,this.$element=i,this.$translate=o,this.configurationUtil=s,this.collectionDiscoveryService=c,this.$stateParams=u,this.changeLangService=l,this.directLinkService=p,this.templateUtil=d,this.mappingTablesCache=h,this.showTimer=!1,this.COLLECTION_DISCOVERY_STATE=f.STATE_NAMES.COLLECTION_DISCOVERY,this.isReversed=!1,this.openFullDisplayWithGetit1=new a.EventEmitter,this.openFullDisplayWithNgrs=new a.EventEmitter,this.availabilityLineIcons=e,this.locationReady=!1,this.configurationUtil.isSuprima()?this.$timeout(function(){m.showTimer=!0},2e3):this.showTimer=!0}return e.prototype.ngOnInit=function(){this.collectionDiscoveryData&&(this.isCollectionDiscoveryCollection="COLLECTION"===this.collectionDiscoveryData.type||"TOPCOLLECTION"===this.collectionDiscoveryData.type,this._collectionStateParams={collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:this.$stateParams.vid,lang:this.$stateParams.lang});var e=y(this.result,"delivery.availability")||v;this.originalFirstAvailability=e[0]},e.prototype.scrollToElementId=function(e){var t=e,n=document.getElementById(t);n||(t="links",n=document.getElementById(t)),n.classList.add("section-focused"),this.$timeout(function(){n.classList.remove("section-focused")},500),this.isOverlayFullView?this.smoothScrollUtil.scrollTo(t,"","sticky-scroll"):this.smoothScrollUtil.scrollTo(t,"","")},e.prototype.isEmailMode=function(){return"email"===this.displayMode},e.prototype.initLocation=function(){void 0!=this.result.delivery.bestlocation&&(this.result.delivery.bestlocation.pendingRender=!1,this.locationReady=!0,this.initOrg(),this.initLibraryCode(),this.initSubLocation())},e.prototype.availabilityLinks=function(){return this.result&&this.result.delivery&&this.result.delivery.availabilityLinks?this.result.delivery.availabilityLinks:v},e.prototype.availabilityLinksUrl=function(){return this.result&&this.result.delivery&&this.result.delivery.availabilityLinksUrl?this.result.delivery.availabilityLinksUrl:v},e.prototype.delCategories=function(){return y(this.result,"delivery.deliveryCategory")||v},Object.defineProperty(e.prototype,"displayedAvailability",{get:function(){return this.result&&this.result.delivery&&(this.result.delivery.availability&&this.result.delivery.availability.length>1&&this.isPhysical(1,this.result.delivery.availability[1])&&(this.result.delivery.availability.reverse(),this.result.delivery.availabilityLinks&&this.result.delivery.availabilityLinks.reverse(),this.result.delivery.availabilityLinksUrl&&this.result.delivery.availabilityLinksUrl.reverse(),this.result.delivery.deliveryCategory&&this.result.delivery.deliveryCategory.reverse(),this.result.delivery.serviceMode&&this.result.delivery.serviceMode.reverse(),this.isReversed=!0),this.isReversed&&y(this.result,"delivery.availability[0]")===this.originalFirstAvailability&&this.result.delivery.availability.reverse()),y(this.result,"delivery.availability")||v},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryCode",{get:function(){return this._libraryCode},set:function(e){this._libraryCode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subLocation",{get:function(){return this._subLocation},set:function(e){this._subLocation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"organization",{get:function(){return this._organization},set:function(e){this._organization=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumber",{get:function(){var e=this.result.delivery.bestlocation||{},t=e.callNumber||"";return t.length>0&&this.configurationUtil.isSuprima()?'<span class="availability-line-parenthesis">(</span>'+t+'<span class="availability-line-parenthesis">)</span>':t},set:function(e){this._callNumber=e},enumerable:!0,configurable:!0}),e.prototype.getTranslatedLine=function(e){var t=this.result.delivery.bestlocation||{},n=(t.callNumber||"",t.organization||""),r=t.libraryCode||"",i=t.subLocation||"",o={idx_0:this.$translate.instant(n),idx_1:this.$translate.instant(r),idx_2:this.$translate.instant(i),idx_3:t.callNumber,idx_4:this.$translate.instant(this.result.delivery.formatedDueDate||"")};this.result.delivery.formatedDueDate&&(e+=".tooltip.duedate");var a=this.$translate.instant(e,o);return a=g.decode(a)},e.prototype.getPlaceHolders=function(){this.locationReady&&!y(this.result,"delivery.bestlocation.pendingRender")||this.initLocation();var e=this.callNumber||"",t=this.organization||"",n=this.libraryCode||"",r=this.subLocation||"",i='<span class="best-location-library-code locations-link">'+n+"</span>",o='<span class="best-location-sub-location locations-link">'+r+"</span>",a='<span class="best-location-delivery locations-link">'+e+"</span>",s={idx_0:'<span class="best-location-organization locations-link">'+t+"</span>",idx_1:i+" "+o+" "+a,idx_2:'<span class="best-location-due-date">'+this.result.delivery.formatedDueDate+"</span>"};return s},e.prototype.initOrg=function(){var e=this,t=this.result.delivery.bestlocation||{},n=t.organization||"";this.$translate(n,[],"",n).then(function(t){e.organization=t})},e.prototype.initLibraryCode=function(){var e=this,t=this.result.delivery.bestlocation||{},n=t.libraryCode||"",r=t.organization;!this.configurationUtil.isSuprima()&&n?this.$translate(r+".library."+n,[],"",this.$translate.instant(n)).then(function(t){e.libraryCode=t}):this.$translate(n,[],"",n).then(function(t){e.libraryCode=t})},e.prototype.initSubLocation=function(){var e=this,t=this.result.delivery.bestlocation||{},n=t.subLocation||"",r=t.organization;!this.configurationUtil.isSuprima()&&n?(this.subLocation=n,this.$translate(n,[],"",n).then(function(t){e.$translate(r+".collection."+n,[],"",t).then(function(t){e.subLocation=t})})):this.$translate(n,[],"",n).then(function(t){e.subLocation=t})},e.prototype.showPhysicalItemTextCodes=function(){return this.result.delivery.physicalItemTextCodes},e.prototype.showDisplayOtherLocations=function(){return this.result.delivery.feDisplayOtherLocations},e.prototype.showDisplayLocation=function(){return!this.configurationUtil.isSuprima()&&this.result.delivery.displayLocation},e.prototype.handleAvailability=function(e,t){this.handleAvailabilityLine(e,t)},e.prototype.handleDueDate=function(e){return this.result.delivery.formatedDueDate&&(e+=".duedate"),this.handleNgrs(e)},e.prototype.handleNgrs=function(e){return this.isGlobalRapidoRecord()?"ngrs.get_it_for_me":this.isUnavailableRapidoRecord(e)?"ngrs."+e:e},e.prototype.isUnavailableRapidoRecord=function(e){return!(!this.isNgrs()||"unavailable"!==e&&"not_available"!==e)},e.prototype.isGlobalRapidoRecord=function(){if(!this.isNgrs())return!1;var e=y(this.result,"pnx.control.recordid");if(e&&e[0].match(/^alma.*/))return!1;var t=y(this.result,"pnx.control.rapidosourcerecordid");return!t},e.prototype.showOtherLibraries=function(e){return!(!this.isUnavailableRapidoRecord(e)&&!this.isGlobalRapidoRecord())},e.prototype.handleAvailabilityLine=function(e,t){if(this.doPrimoVEDirectLink(e)&&!this.isRefEntry)this.getAndOpenPrimoVEDirectLink();else if(this.isDirectLink(e)){var n=this.availabilityLinksUrl()[e];window.open(n,"_blank")}else this.isNgrs()?this.triggerFullViewOpenNgrs(e):this.triggerFullViewOpenGetIt1(e);this.result.beaconIsPhsical=this.isPhysical(e)},e.prototype.runCollectionDiscoveryBeacon=function(){},e.prototype.doPrimoVEDirectLink=function(e){return this.configurationUtil.isSuprima()&&"YES"===this.mappingTablesCache.findByProperties("direct linking config",{target:"enableDirectLinking"})[0].source1&&!(this.isFullView||this.isOverlayFullView)&&this.isOnline(e,this.displayedAvailability[e])},e.prototype.getAndOpenPrimoVEDirectLink=function(){var e=this,t=window.open("","_blank");this.directLinkService.getDirectLinkURL(this.result).then(function(n){n?t.location=n:t.location=e.templateUtil.getDeepLinkAbsPath(e.result)},function(n){t.location=e.templateUtil.getDeepLinkAbsPath(e.result)})},e.prototype.triggerFullViewOpenGetIt1=function(e){var t=0;if(2===this.result.delivery.availability.length&&(t=1-e),this.isFull())return this.scrollToElementId("getit_link1_"+t);var n={index:"getit_link1_"+t,target:this.$element[0]};getSelection().toString().length>0&&(getSelection().empty?getSelection().empty():getSelection().removeAllRanges&&getSelection().removeAllRanges()),this.openFullDisplayWithGetit1.emit(n)},e.prototype.triggerFullViewOpenNgrs=function(e){if("not_available"===this.result.delivery.availability[0]||"unavailable"===this.result.delivery.availability[0]){if(this.isFull())return this.scrollToElementId("ngrs");var t={index:"ngrs",target:this.$element[0]};this.openFullDisplayWithNgrs.emit(t)}else this.triggerFullViewOpenGetIt1(e)},e.prototype.isDirectLink=function(e){return this.availabilityLinks().length>0&&"directlink"===this.availabilityLinks()[e]&&!(this.configurationUtil.isSuprima()&&!this.isRefEntry)},e.prototype.isPhysical=function(e,t){var n=this.delCategories();return"Physical Item"===n[e]||"Microform"===n[e]||"Alma-P"===n[e]||"Remote Search Resource"===n[e]&&"worldcat"===t},e.prototype.isOnline=function(e,t){return!(this.isPhysical(e)||"Remote Search Resource"===this.delCategories()[e]&&"worldcat"===t)},e.prototype.isNgrs=function(){return window.appConfig["system-configuration"].ngrs_enabled},e.prototype.isFull=function(){return!(!this.isFullView||void 0===this.isFullView)},Object.defineProperty(e.prototype,"collectionStateParams",{get:function(){return this._collectionStateParams},enumerable:!0,configurable:!0}),e.prototype.showDedupOtherLocations=function(){return void 0!=y(this.result,"pnx.dedup")&&y(this.result,"pnx.display.availlibrary.length",0)>1},e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e.prototype.getNgrsStyle=function(){var e={};return this.isNgrs()&&(e={color:"green"}),e},r([a.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"result",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"collectionDiscoveryData",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"isRefEntry",void 0),r([a.Input(),i("design:type",String)],e.prototype,"displayMode",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"openFullDisplayWithGetit1",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"openFullDisplayWithNgrs",void 0),r([s.beacon({p:"brief",op:"availabilityStatement",item:"result"}),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],e.prototype,"handleAvailabilityLine",null),r([s.beacon({p:"brief",op:"linktoCollection"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runCollectionDiscoveryBeacon",null),e=r([a.Component({selector:"prm-search-result-availability-line",templateUrl:"components/search/searchResult/searchResultAvailability/searchResultAvailabilityLine.html"}),o(0,a.Inject("availabilityLineIcons")),o(2,a.Inject("$timeout")),o(4,a.Inject("$element")),o(5,a.Inject("$translate")),o(8,a.Inject("$stateParams")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof u.SmoothScrollUtil&&u.SmoothScrollUtil)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&n||Object,Object,Object,"function"==typeof(b="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&b||Object,"function"==typeof(S="undefined"!=typeof l.CollectionDiscoveryService&&l.CollectionDiscoveryService)&&S||Object,Object,"function"==typeof(_="undefined"!=typeof p.ChangeLangService&&p.ChangeLangService)&&_||Object,"function"==typeof(O="undefined"!=typeof d.DirectLinkService&&d.DirectLinkService)&&O||Object,"function"==typeof(T="undefined"!=typeof h.TemplateUtil&&h.TemplateUtil)&&T||Object,"function"==typeof(E="undefined"!=typeof m.MappingTablesCache&&m.MappingTablesCache)&&E||Object])],e);var t,n,b,S,_,O,T,E}();t.PrmSearchResultAvailabilityLine=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(55),c=n(11),u=n(78),l=n(109),f=n(6),p=n(14),d=n(2),h=(n(24),n(77),function(){function e(e,t,n,r,i,o,a,s,c,u,l){this.searchService=e,this.facetService=t,this.searchFieldsService=n,this.configurationUtil=r,this.pnxUtil=i,this.resultUtil=o,this.searchResultsIcons=a,this.primolyticsService=s,this.$stateParams=c,this.$state=u,this.$mdDialog=l}return e.prototype.getFrbrRecords=function(){var e="frbrgroupid,include,"+this.pnxUtil.getValue(this.result,"facets","frbrgroupid"),t=this.pnxUtil.getValue(this.result,"display","title");this.facetService.frbrSearch({facet:e,title:t},this.index),this.$mdDialog.hide()},e.prototype.getPlaceHolders=function(){var e=this.pnxUtil.getValue(this.result,"display","version");return{idx_0:'<span class="best-location-organization">'+e+"</span>"}},e.prototype.isPc=function(){return"PC"===this.result.context},e.prototype.isFrbrGeneric=function(){return this.resultUtil.isFrbr(this.result)&&1===this.searchService.getFrbrDisplay()},r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"result",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"index",void 0),r([f.beacon({p:"refine",op:"frbr",item:"result"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"getFrbrRecords",null),e=r([a.Component({selector:"prm-search-result-frbr-line",templateUrl:"components/search/searchResult/searchResultFrbr/searchResultFrbrLine.html"}),o(6,a.Inject("searchResultsIcons")),o(8,a.Inject("$stateParams")),o(9,a.Inject("$stateParams")),o(10,a.Inject("$mdDialog")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.SearchService&&c.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.FacetService&&s.FacetService)&&n||Object,"function"==typeof(h="undefined"!=typeof p.SearchFieldsService&&p.SearchFieldsService)&&h||Object,"function"==typeof(m="undefined"!=typeof d.ConfigurationUtil&&d.ConfigurationUtil)&&m||Object,"function"==typeof(g="undefined"!=typeof u.PnxUtil&&u.PnxUtil)&&g||Object,"function"==typeof(y="undefined"!=typeof l.ResultUtil&&l.ResultUtil)&&y||Object,Object,"function"==typeof(v="undefined"!=typeof f.PrimolyticsService&&f.PrimolyticsService)&&v||Object,Object,Object,Object])],e);var t,n,h,m,g,y,v}());t.PrmSearchResultFrbrLine=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(153),s=n(0),c=n(27),u=n(11),l=n(26),f=n(197),p=n(2),d=n(79),h=n(20),m=n(112),g=n(4),y=n(6),v=n(19),b=n(65),S=n(3),_=function(){function e(e,t,n,r,i,o,a,s,c,u){this.briefResultService=e,this.searchService=t,this.configurationUtil=n,this.filterInstitution=r,this.filterLanguage=i,this.fullViewPageService=o,this.primolyticsService=a,this.$state=s,this.$location=c,this.changeLangService=u,this.showItemType=!this.isServicesPageState(),this.isIe=v.isBrowserIE(),this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.combiningHalfMarksRegexp=new RegExp("(.[︠-︯].[︠-︯])","gi")}return e.prototype.ngOnInit=function(){this.lastId=-1,this.item.pnx=this.filterLanguage.fillterPnx(this.item.pnx);var e=this.getDisplayLines();this.firstLine=e.shift(),this.otherLines=e},e.prototype.getDisplayLines=function(){if(!this.item)return[];var e=this.item.pnx.display.source;return this.lines&&this.lastId===e||(this.lastId=e,this.lines=this.briefResultService.parseDisplayLines(this.item,this.isCollectionDiscoveryCollection)),this.lines},e.prototype.isServicesPageState=function(){return this.briefResultService.isServicePageState()},e.prototype.calcZoteroParams=function(){if(S(this.item,"delivery.link")){var e=b(this.item.delivery.link,function(e){return e.linkType.indexOf("openurl")>-1});if(e>-1){var t=this.item.delivery.link[e].linkURL;return f.encodeZoteroValue(t)}}},Object.defineProperty(e.prototype,"zoteroParamsString",{get:function(){return this.calcZoteroParams()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.getDisplayValFromVal=function(e,t,n){var r="",i={crsinfo:"$$V"};return void 0!==n&&void 0!==i[n]&&(e=e.replace(i[n],i[n]+";")),e.includes("$$")?(e.includes(";")?e.split(";").forEach(function(e,n){""===e.split("$$")[0]&&0===n||(r+=e.split("$$")[0]+t)}):r=e.split("$$")[0],r.endsWith(";")?r.substr(0,r.length-1):r):t&&e.endsWith(t.trim())&&0!=t.trim().length?e.substr(0,e.length-1):e},e.prototype.filterAndNormalize=function(e){return this.filterInstitution.filterAndNormalizeData(e,e)},e.prototype.isEmailMode=function(){return"email"===this.displayMode},e.prototype.getClassForIdentifier=function(){return this.configurationUtil.isSuprima()?this.$state.params.rft_dat&&this.$state.params.rft_dat.toLowerCase().indexOf("ie=")>-1?"identifier-in-brief-local":"identifier-in-brief-classic":""},Object.defineProperty(e.prototype,"logTimeStamp",{get:function(){return window.appPerformance.timeStamps["search result displayed"]=Date.now(),""},enumerable:!0,configurable:!0}),e.prototype.getResourceTypeForDisplay=function(){return 1===this.searchService.getFrbrDisplay()?"mediatype.multiplever":"mediatype."+this.item.pnx.display.type[0]},e.prototype.changeStringDirectionToRtl=function(e){return this.briefResultService.changeStringDirectionToRtl(e)},Object.defineProperty(e.prototype,"isFullViewOverlayOpen",{get:function(){return this.briefResultService.isFullViewOverlayOpen},enumerable:!0,configurable:!0}),e.prototype.getPnxInXmlUrl=function(){return this.briefResultService.ShowPnxInXmlUrl(this.item)},e.prototype.keydownSupport=function(e){var t=this.KEY_CODE;if(e.keyCode===t.ENTER)return e.stopPropagation(),this.deepLink},e.prototype.hl=function(e){if(this.highlights){var t=this.highlights[e];return t?t:this.highlights.termsUnion}return""},e.prototype.getTextDirection=function(e){return this.briefResultService.getTextDirection(e)},e.prototype.isChaptersAndReviewsState=function(){return this.$state.current.name==g.STATE_NAMES.CITATION_CHAPTERS},Object.defineProperty(e.prototype,"recordId",{get:function(){return this.item.pnx.control.recordid[0]},enumerable:!0,configurable:!0}),e.prototype.sendBeacon=function(){this.$state.current.name!==g.STATE_NAMES.SEARCH||this.$location.path().endsWith("/fulldisplay")||this.runBriefTitleBeaconCall()},e.prototype.runBriefTitleBeaconCall=function(){},r([s.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([s.Input(),i("design:type",Boolean)],e.prototype,"rtaInProgress",void 0),r([s.Input(),i("design:type",String)],e.prototype,"resourceTypeForDisplay",void 0),r([s.Input(),i("design:type",String)],e.prototype,"deepLink",void 0),r([s.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([s.Input(),i("design:type",Boolean)],e.prototype,"isCollectionDiscoveryCollection",void 0),r([s.Input(),i("design:type",String)],e.prototype,"displayMode",void 0),r([y.beacon({p:"brief",op:"title"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runBriefTitleBeaconCall",null),e=r([s.Component({providers:[],selector:"prm-brief-result",templateUrl:"components/search/briefResult/briefResult.html"}),o(7,s.Inject("$state")),o(8,s.Inject("$location")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.BriefResultService&&c.BriefResultService)&&n||Object,"function"==typeof(_="undefined"!=typeof u.SearchService&&u.SearchService)&&_||Object,"function"==typeof(O="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&O||Object,"function"==typeof(T="undefined"!=typeof d.FilterInstitution&&d.FilterInstitution)&&T||Object,"function"==typeof(E="undefined"!=typeof a.FilterLanguage&&a.FilterLanguage)&&E||Object,"function"==typeof(w="undefined"!=typeof m.FullViewPageService&&m.FullViewPageService)&&w||Object,"function"==typeof(I="undefined"!=typeof y.PrimolyticsService&&y.PrimolyticsService)&&I||Object,Object,Object,"function"==typeof(R="undefined"!=typeof h.ChangeLangService&&h.ChangeLangService)&&R||Object])],e);var t,n,_,O,T,E,w,I,R}();t.PrmBriefResult=_},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(228),c=n(11),u=n(26),l=n(2),f=function(){function e(e,t,n,r){this.snippetService=e,this.searchService=t,this.configurationUtil=n,this.actionIcons=r}return e.prototype.getSnippet=function(){var e=this.snippetService.snippets;if(e){var t=this.record.pnx.control.recordid;if(angular.isArray(t)&&(t=t[0]),e[t])return e[t].trim()}},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e.prototype.highlights=function(){if(this.isSuprima()){var e=this.snippetService.highlights;return e}var e=this.searchService.highlightsService.highlights;return e.termsUnion},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof u.PrimoResponse&&u.PrimoResponse).IDoc)&&t||Object)],e.prototype,"record",void 0),e=r([a.Component({directives:[],selector:"prm-snippet",templateUrl:"components/search/snippet/snippet.html"}),o(3,a.Inject("actionIcons")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.SnippetService&&s.SnippetService)&&n||Object,"function"==typeof(f="undefined"!=typeof c.SearchService&&c.SearchService)&&f||Object,"function"==typeof(p="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&p||Object,Object])],e);var t,n,f,p}();t.PrmSnippet=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(182),a=n(232),s=n(660),c=n(43),u=n(661),l=n(662),f=n(371),p=n(41),d=n(663),h=n(664),m=n(665),g=n(666),y=n(668),v=n(67),b=n(669),S=n(670),_=n(671),O=n(672),T=n(673),E=n(674),w=n(675),I=n(370),R=n(372),P=n(373),j=n(183),A=n(374),C=n(676),$=n(234),D=function(){function e(){}return e=r([i.NgModule({declarations:[u.PrmActionContainer,s.PrmActionList,g.PrmCitation,m.PrmCopyClipboardBtn,b.PrmEasybib,S.PrmEndnote,O.PrmExportRis,T.PrmExportBibtex,w.PrmLeganto,E.PrmMendeley,C.PrmMendeleyToast,h.PrmPermalink,l.PrmPrintItem,_.PrmRefworks,y.PrmSendEmail,v.PushtoService],providers:[o.ActionListService,a.PermalinkService,f.PrintItemService,I.EndNoteService,R.EasyBibService,P.RefWorksService,j.LegantoService,A.MendeleyService,$.MendeleyToastService],imports:[d.name,c.default.name,p]})],e)}();t.ActionsModule=D},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(182),c=n(6),u=n(8),l=n(26),f=n(2),p=n(145),d=n(19),h=n(183),m=n(4),g=n(20),y=n(27),v=function(){function e(e,t,n,r,i,o,s,c,u,l,f,p,d,h,m){var g=this;this.actionListService=e,this.briefResultService=t,this.actionIcons=n,this.$scope=r,this.primolyticsService=i,this.$state=o,this.$timeout=s,this.mediaQueries=c,this.$element=u,this.$translate=l,this.actionsIcons=f,this.configurationUtil=p,this.scrollService=d,this.changeLangService=h,this.legantoService=m,this.closeModal=new a.EventEmitter,this.tabPressed=new a.EventEmitter,this.expanded=!1,this.actionIconNamesMap={"E-mail":"email",Citation:"citations",Permalink:"permalink",Print:"print",EndNote:"endnote",EasyBib:"easybib",RefWorks:"refworks",RISPushTo:"ris",BibTeXPushTo:"ris",Mendeley:"mendeley",Leganto:"ris"},this.expandedAction="",this.expandableActions={"E-mail":!0,Citation:!0,Permalink:!0,Print:!1,EndNote:!1,EasyBib:!1,RefWorks:!1,RISPushTo:!0,BibTeXPushTo:!0,Leganto:!0,Mendeley:!1},this.getTabItemSize="never",this.showAction={Permalink:function(){return"MetaLib"!==g.item.context}},this.ACTION_ITEM_ID_PREFIX="actionListItem",this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46}}return e.prototype.getActionTranslate=function(e){var t="fulldisplay.command."+this.actionLabelNamesMap[e];return this.$translate.instant(t)},e.prototype.ngOnInit=function(){var e=this;this.$timeout(function(){e.actionButtonsElements=e.$element[0].querySelectorAll(".actions-names button"),e.watchAriaExpandedValue()},400),this.$timeout(function(){e.unfocusActionButtons2("md-nav-bar button"),e.unfocusActionButtons2("md-nav-bar nav")},400),this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:this.isServicesPage()?"link":"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo",BibTeXPushTo:"pushto.option.BibTeXPushTo",Mendeley:"pushto.option.Mendeley",Leganto:"pushto.option.Leganto"},this.activeAction=this.selectedAction&&"none"!==this.selectedAction?this.selectedAction:this.actionListService.requiredActionsList[0],
this.promiseActionNames={},this.actionInnerServices={Leganto:this.legantoService},this.$scope.$watch(function(){return e.expandedAction},function(){e.$timeout(function(){e.unfocusActionButtons()},400)})},e.prototype.ngAfterViewInit=function(){var e=this;this.isFullView||this.$timeout(function(){e.$timeout(function(){e.firstItem[0].querySelector("ul").focus()})},0,!1)},e.prototype.unfocusActionButtons2=function(e){var t=this.$element[0].querySelectorAll(e);if(this.$element)for(var n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("tabindex"),i.setAttribute("role","list")}},e.prototype.performAction=function(e){this.actionInnerServices[e]&&(this.actionInnerService=this.actionInnerServices[e]),"Citation"!==e&&(this.primolyticsService.doBeaconReport({p:"sendTo",op:e},this.item,this.primolyticsService.getTimestamp()),this.isSearchState()&&this.briefResultService.openedFromTopActionBar&&this.primolyticsService.doBeaconReport({p:"brief",op:"sendBulkTo"+e},this.item,this.primolyticsService.getTimestamp())),this.promiseActionNames[e]&&this.actionListService.onToggle[e]?this.performPromiseAction(e):(this.actionListService.onToggle[e]&&this.actionListService.onToggle[e](this.item,this.selectedIds),document.querySelector("#"+e).querySelector("button").focus(),this.selectedAction=e);for(var t=document.querySelectorAll("md-nav-bar li"),n=0,r=t;n<r.length;n++){var i=r[n];i.id===e?i.getElementsByTagName("button")[0].setAttribute("tabindex","0"):i.getElementsByTagName("button")[0].setAttribute("tabindex","-1")}this.expandedAction=this.expandableActions[e]?e:""},e.prototype.watchAriaExpandedValue=function(){for(var e=this,t=function(t){var r=t.parentElement,i=r.id;n.expandableActions[i]&&(t.setAttribute("aria-expanded",n.expandedAction==i),n.$scope.$watch(function(){return e.expandedAction},function(){t.setAttribute("aria-expanded",e.expandedAction==i)}))},n=this,r=0,i=this.actionButtonsElements;r<i.length;r++){var o=i[r];t(o)}},e.prototype.unfocusActionButtons=function(){for(var e=0,t=this.actionButtonsElements;e<t.length;e++){var n=t[e],r=n.parentElement.id;n.setAttribute("aria-label",this.translateAction(r)),n.setAttribute("role","tab")}},e.prototype.translateAction=function(e){var t=this.getRecordTitle(e);return t?this.getActionTranslate(e)+" "+this.$translate.instant("nui.aria.action.nameTitle")+" "+this.getRecordTitle(e):this.getActionTranslate(e)+" "+this.$translate.instant("nui.aria.action.nameTitle")},e.prototype.performPromiseAction=function(e){var t=this;if(this.promiseActionNames[e].isAllowedUser()){var n=this.actionListService.onToggle[e](this.item,this.selectedIds);n.then(function(n){t.promiseActionNames[e].successfullFetchLists(n),document.querySelector("#"+e).querySelector("button").focus(),n.setSelectedAction!==!1&&(t.selectedAction=e)},function(n){return t.promiseActionNames[e].failedFetchLists(n)})}},Object.defineProperty(e.prototype,"isLeftScrollDisabled",{get:function(){return this.scrollService.isShowLeftArrow(document.querySelector("#scrollActionList"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRightScrollDisabled",{get:function(){return this.scrollService.isShowRightArrow(document.querySelector("#scrollActionList"))},enumerable:!0,configurable:!0}),e.prototype.scrollLeftMouseDown=function(){this.scrollService.onLeftArrowClick(document.querySelector("#scrollActionList"))},e.prototype.scrollRightMouseDown=function(){this.scrollService.onRightArrowClick(document.querySelector("#scrollActionList"))},e.prototype.lastActionItemKeyPressHandler=function(e){if(e.preventDefault(),e.keyCode===this.KEY_CODE.TAB||e.keyCode===this.KEY_CODE.RIGHT_ARROW){var t=document.querySelector("#briefResultMoreOptionsButton");t.focus()}},e.prototype.isServicesPage=function(){return"servicesPage"===this.$state.current.name},e.prototype.isSearchState=function(){return this.$state.current.name===m.STATE_NAMES.SEARCH},e.prototype.doAlert=function(e,t){alert("TO DO: export to "+e),t.stopPropagation()},e.prototype.closeAllTabs=function(){this.selectedAction=""},Object.defineProperty(e.prototype,"requiredActionsList",{get:function(){var e=this.actionListService.requiredActionsList;return this.displayAll?this.shouldDisplayAll(this.item)||(e=e.filter(function(e){return!("Permalink"===e)})):e=e.filter(function(e){return!("Permalink"===e||"Citation"===e)}),e},enumerable:!0,configurable:!0}),e.prototype.showMe=function(e){return""!=e&&(!this.showAction[e]||this.showAction[e]())},e.prototype.showAccessibleCloseButton=function(){return!(!this.expandedAction&&this.isFullView)},e.prototype.shouldDisplayAll=function(e){return!!Array.isArray(e)||(!!this.configurationUtil.isSuprima()||(!e||!("Ebsco"===e.context||e.pnx&&e.pnx.control.sourcesystem&&"ebsco"===e.pnx.control.sourcesystem[0])))},e.prototype.closeModalActions=function(e){if(this.expandedAction){var t=document.getElementById(this.expandedAction),n=t.getElementsByTagName("button")[0];t.setAttribute("aria-selected","false"),n.focus(),this.expandedAction="",this.selectedAction="none",this.activeAction=this.actionListService.requiredActionsList[0];for(var r=this.firstItem[0].querySelectorAll("li"),i=0,o=r;i<o.length;i++){var a=o[i];a.getElementsByTagName("button")[0].setAttribute("tabindex","0")}}else this.closeModal.emit(e)},e.prototype.keydownSupport=function(e){var t=this;9===e.keyCode&&(e.preventDefault(),this.$timeout(function(){t.firstItem[0].querySelector("ul").focus()}))},e.prototype.getRecordTitle=function(e){if(this.item){var t;return t=Array.isArray(this.item)&&this.item.length>1?this.$translate.instant("nui.aria.selectedItems"):Array.isArray(this.item)&&1===this.item.length?this.item[0].pnx.display.title[0]:this.item.pnx.display.title[0],e&&this.actionListService.onToggle[e]&&(t+=this.$translate.instant("nui.aria.newWindow")),t}},e.prototype.isSafariBrowse=function(){return d.isBrowserSafari()},e.prototype.getDirection=function(){return this.changeLangService.direction},e.prototype.isfullViewOrOverlay=function(){return this.isFullView||this.isOverlayFullView},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"displaymode",void 0),r([a.Input(),i("design:type",String)],e.prototype,"selectedAction",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"displayAll",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"displayCloseIcon",void 0),r([a.ViewChild("md-nav-bar"),i("design:type",Object)],e.prototype,"firstItem",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"closeModal",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"tabPressed",void 0),e=r([a.Component({selector:"prm-action-list",templateUrl:"components/search/actions/action-list.html"}),o(2,a.Inject("actionIcons")),o(3,a.Inject("$scope")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),o(8,a.Inject("$element")),o(9,a.Inject("$translate")),o(10,a.Inject("featuredActionsIcons")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.ActionListService&&s.ActionListService)&&n||Object,"function"==typeof(v="undefined"!=typeof y.BriefResultService&&y.BriefResultService)&&v||Object,Object,Object,"function"==typeof(b="undefined"!=typeof c.PrimolyticsService&&c.PrimolyticsService)&&b||Object,Object,Object,"function"==typeof(S="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&S||Object,Object,Object,Object,"function"==typeof(_="undefined"!=typeof f.ConfigurationUtil&&f.ConfigurationUtil)&&_||Object,"function"==typeof(O="undefined"!=typeof p.ScrollService&&p.ScrollService)&&O||Object,"function"==typeof(T="undefined"!=typeof g.ChangeLangService&&g.ChangeLangService)&&T||Object,"function"==typeof(E="undefined"!=typeof h.LegantoService&&h.LegantoService)&&E||Object])],e);var t,n,v,b,S,_,O,T,E}();t.PrmActionList=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e,t,n){this.$element=e,this.$scope=t,this.$timeout=n,this.closeTabsEvent=new a.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return"Citation"===e.actionName},function(t,n){e.$timeout(function(){e.setAriaRoleTab("md-nav-bar ul","tablist"),e.setAriaRoleTab("md-nav-bar li","presentation"),e.setAriaRoleTab("md-nav-bar button","tab")},400)})},e.prototype.throwCloseTabsEvent=function(){this.closeTabsEvent.emit(null)},e.prototype.setAriaRoleTab=function(e,t){for(var n=this.$element[0].querySelectorAll(e),r=0,i=n;r<i.length;r++){var o=i[r];o.setAttribute("role",t)}},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",String)],e.prototype,"actionName",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"onToggle",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([a.Component({selector:"prm-action-container",templateUrl:"components/search/actions/actionContainer/action-container.html"}),o(0,a.Inject("$element")),o(1,a.Inject("$scope")),o(2,a.Inject("$timeout")),i("design:paramtypes",[Object,Object,Object])],e)}();t.PrmActionContainer=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},r([o.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([o.Component({selector:"prm-print-item",templateUrl:"components/search/actions/printAction/print-item.html"}),i("design:paramtypes",[])],e)}();t.PrmPrintItem=a},function(e,t,n){var r,i,o;!function(a,s){i=[n(5)],r=s,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(this,function(e){return e.module("angular-clipboard",[]).factory("clipboard",["$document","$window",function(e,t){function n(n,r){var i=e[0].createElement("textarea");return i.style.position="absolute",i.textContent=n,i.style.left="-10000px",i.style.top=(t.pageYOffset||e[0].documentElement.scrollTop)+"px",i}function r(t){try{e[0].body.style.webkitUserSelect="initial";var n=e[0].getSelection();if(n.removeAllRanges(),t.select(),!e[0].execCommand("copy"))throw"failure copy";n.removeAllRanges()}finally{e[0].body.style.webkitUserSelect=""}}function i(t,i){var o=n(t,i);e[0].body.appendChild(o),r(o),e[0].body.removeChild(o)}return{copyText:i,supported:"queryCommandSupported"in e[0]&&e[0].queryCommandSupported("copy")}}]).directive("clipboard",["clipboard",function(t){return{restrict:"A",scope:{onCopied:"&",onError:"&",text:"=",supported:"=?"},link:function(n,r){n.supported=t.supported,r.on("click",function(i){try{t.copyText(n.text,r[0]),e.isFunction(n.onCopied)&&n.$evalAsync(n.onCopied())}catch(t){e.isFunction(n.onError)&&n.$evalAsync(n.onError({err:t}))}})}}}])})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(232),c=n(235),u=n(78),l=n(14),f=n(19),p=function(){function e(e,t,n,r,i,o){this.permalinkService=e,this.selectTextUtil=t,this.pnxUtil=n,this.$state=r,this.$translate=i,this.searchFieldsService=o}return e.prototype.ngOnInit=function(){var e=this;"servicesPage"===this.$state.current.name?(this.permalink=window.location.href,this.shortPermalink=window.location.href):this.permalinkService.getPermalink(this.item,this.selectedIds).then(function(t){return e.successAction(t)})},e.prototype.successAction=function(e){this.permalink=e.data.permalink+"&lang="+this.$translate.use(),e.data.shortPermalink?this.shortPermalink=e.data.shortPermalink:this.shortPermalink=this.permalink},e.prototype.selectText=function(){this.selectTextUtil.selectText("permalink"+this.getRecordId())},e.prototype.getRecordId=function(){return this.pnxUtil.getValue(this.item,"control","recordid")},e.prototype.displayCopyButton=function(){return!f.isIosDevice()},r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-permalink",templateUrl:"components/search/actions/permalinkAction/permalink.html"}),o(3,a.Inject("$state")),o(4,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PermalinkService&&s.PermalinkService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SelectTextUtil&&c.SelectTextUtil)&&n||Object,"function"==typeof(p="undefined"!=typeof u.PnxUtil&&u.PnxUtil)&&p||Object,Object,Object,"function"==typeof(d="undefined"!=typeof l.SearchFieldsService&&l.SearchFieldsService)&&d||Object])],e);var t,n,p,d}();t.PrmPermalink=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(236),c=n(77),u=function(){function e(e,t,n){this.$timeout=e,this.clipboard=t,this.endlessScrollingUtil=n,this.copySuccessful=!1,this.scrollContainer=this.getScrollContainer()}return e.prototype.ngOnInit=function(){this.DISPLAY_TEXT="nui."+this.action+".button",this.SAFARI_DISPLAY_TEXT=this.getSelectButtonText(),this.COPIED_TEXT="nui."+this.action+".message.success",this.SAFARI_COPIED_TEXT="nui."+this.action+".copy.message",this.FAILURE_TEXT="nui."+this.action+".message.failed",this.buttonText=this.isSupported?this.DISPLAY_TEXT:this.SAFARI_DISPLAY_TEXT},e.prototype.clipboardSuccess=function(){this.displayTemporaryText(this.isSupported?this.COPIED_TEXT:this.SAFARI_COPIED_TEXT),this.copySuccessful=!0,this.scrollContainer.scrollTop=this.offset,this.endlessScrollingUtil.enableSearchEndlessScrolling()},e.prototype.clipboardFailure=function(e){this.displayTemporaryText(this.FAILURE_TEXT),console.error("Clipborad error!",e),this.scrollContainer.scrollTop=this.offset,this.endlessScrollingUtil.enableSearchEndlessScrolling()},e.prototype.displayTemporaryText=function(e){var t=this;this.buttonText=e,this.$timeout(function(){t.buttonText=t.isSupported?t.DISPLAY_TEXT:t.SAFARI_DISPLAY_TEXT,t.copySuccessful=!1},4e3)},e.prototype.getSelectButtonText=function(){return"permalink"==this.action?"nui.permalink.button.selecturl":"citation.labels.selecttext"},Object.defineProperty(e.prototype,"textToCopy",{get:function(){return c.decode(this.text?String(this.text).replace(/<[^>]+>/gm,""):"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSupported",{get:function(){var e=window;return!(Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0)},enumerable:!0,configurable:!0}),e.prototype.saveOffset=function(){this.endlessScrollingUtil.disableSearchEndlessScrolling(),this.offset=this.scrollContainer.scrollTop},e.prototype.getScrollContainer=function(){var e=document,t=!!e.documentMode,n=window;return n.chrome&&n.chrome.webstore||Object.prototype.toString.call(n.HTMLElement).indexOf("Constructor")>0||!t&&n.StyleMedia?document.body:document.body.parentNode},r([a.Input(),i("design:type",String)],e.prototype,"text",void 0),r([a.Input(),i("design:type",String)],e.prototype,"action",void 0),e=r([a.Component({directives:[],selector:"prm-copy-clipboard-btn",templateUrl:"components/clipboard/copy-clipboard-btn.html"}),o(0,a.Inject("$timeout")),o(1,a.Inject("clipboard")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.EndlessScrollingUtil&&s.EndlessScrollingUtil)&&t||Object])],e);var t}();t.PrmCopyClipboardBtn=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(667),c=n(235),u=n(78),l=n(2),f=n(33),p=n(26),d=n(17),h=n(8),m=n(19),g=n(6),y=function(){function e(e,t,n,r,i,o,a,s,c,u,l){this.citationService=e,this.collectionIcons=t,this.selectTextUtil=n,this.pnxUtil=r,this.mediaQueries=i,this.primolyticsService=o,this.smoothScrollUtil=a,this.configurationUtil=s,this.storageUtil=c,this.$timeout=u,this.$element=l,this.isError=!1,this.inProgress=!1,this.lastCitation=""}return e.prototype.ngOnInit=function(){this.selectedStyle=this.lastStyle||this.getStyles()[0],this.getCitation(this.selectedStyle)},Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this.storageUtil.localStorage.getItem("last_citation_style")},set:function(e){this.storageUtil.localStorage.setItem("last_citation_style",e)},enumerable:!0,configurable:!0}),e.prototype.getStyles=function(){return this.configurationUtil.isSuprima()?this.citationService.getAvailableStyles():this.citationService.getPrimoAvailableStyles()},e.prototype.setHoveredStyle=function(e){this.hoveredStyle=e},e.prototype.getHoveredClass=function(e){return this.hoveredStyle===e?"show":"hide"},Object.defineProperty(e.prototype,"layoutPos",{get:function(){return this.detectMobile()?"column":"row"},enumerable:!0,configurable:!0}),e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.getInitialTab=function(){var e=this.getStyles().indexOf(this.selectedStyle),t=1;return t=e<0?1:e+1,this.smoothScrollUtil.focusOn("citationsTab"+t),t},e.prototype.getCitation=function(e){var t=this;if(this.item.citationStyle=e?e.replace(/^(csl\.)/,""):"",this.primolyticsService.doBeaconReport({p:"sendTo",op:"Citation"},this.item,this.primolyticsService.getTimestamp()),this.getStyles()){var n=this.getStyles().indexOf(e)+1;this.primolyticsService.doBeaconReport({p:"sendTo",op:"CitationStyle"+n},this.item,this.primolyticsService.getTimestamp())}return this.configurationUtil.isSuprima()?(this.inProgress=!0,this.citationService.getCitation(e,this.item.pnx,this.item.delivery).then(function(e){return t.onSuccess(e)},function(e){return t.onError(e)}),this.selectedStyle=e,void(this.lastStyle=e)):void this.getPrimoCitation(e)},e.prototype.getPrimoCitation=function(e){var t=this,n=e.startsWith("csl.")?"csl":"",r=e.replace(/^(csl\.)/,"");this.inProgress=!0,this.citationService.getCitation(r,this.item.pnx,this.item.delivery,n).then(function(e){return t.onSuccess(e)},function(e){return t.onError(e)}),this.selectedStyle=e,this.lastStyle=e},e.prototype.lastCitationDecoded=function(){return this.citationService.decodeHtmlEntities(this.lastCitation)},e.prototype.getCitationId=function(){return"citation"+this.getRecordId()},e.prototype.selectText=function(){this.selectTextUtil.selectText(this.getCitationId())},e.prototype.getRecordId=function(){return this.pnxUtil.getValue(this.item,"control","recordid")},e.prototype.onSuccess=function(e){var t=this;if(this.inProgress=!1,e.data.status&&"ok"===e.data.status)if(this.isError=!1,this.configurationUtil.isSuprima()){var n=e.data;this.lastCitation=this.citationService.decodeCitationText(n.citation),this.$timeout(function(){t.citationService.loadCitationStyle(n,t.$element)},0)}else this.lastCitation=this.citationService.decodeCitationText(e.data.data),this.$timeout(function(){t.citationService.loadCitationStyle(e.data,t.$element)},0);else console.error("Citation failure!",e.data.msg),this.onError(e)},e.prototype.onError=function(e){this.inProgress=!1,this.isError=!0},e.prototype.displayCopyButton=function(){return!m.isIosDevice()},e.prototype.isSafariBrowse=function(){return m.isBrowserSafari()},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof p.PrimoResponse&&p.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({providers:[s.CitationService],selector:"prm-citation",templateUrl:"components/search/actions/citation/citation.html"}),o(1,a.Inject("collectionIcons")),o(9,a.Inject("$timeout")),o(10,a.Inject("$element")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.CitationService&&s.CitationService)&&n||Object,Object,"function"==typeof(y="undefined"!=typeof c.SelectTextUtil&&c.SelectTextUtil)&&y||Object,"function"==typeof(v="undefined"!=typeof u.PnxUtil&&u.PnxUtil)&&v||Object,"function"==typeof(b="undefined"!=typeof h.MediaQueries&&h.MediaQueries)&&b||Object,"function"==typeof(S="undefined"!=typeof g.PrimolyticsService&&g.PrimolyticsService)&&S||Object,"function"==typeof(_="undefined"!=typeof f.SmoothScrollUtil&&f.SmoothScrollUtil)&&_||Object,"function"==typeof(O="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&O||Object,"function"==typeof(T="undefined"!=typeof d.StorageUtil&&d.StorageUtil)&&T||Object,Object,Object])],e);var t,n,y,v,b,S,_,O,T}();t.PrmCitation=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(9),c=n(1),u=n(77),l=function(){function e(e,t,n){this.$http=e,this.mtCacheService=t,this.vid=c.getVid(),this.RIGHT_PADDING=.5,this.CITATION_API_URL=n.pushToBaseURL+"/citation"+("suprima"===c.getBackendSystem()?"/"+c.getVid():"")}return e.prototype.getCitation=function(e,t,n,r){var i={style:e,pnx:t,delivery:n,vid:this.vid,source:r};return this.$http.post(this.CITATION_API_URL,i)},e.prototype.getAvailableStyles=function(){var e=this.mtCacheService.getTable(this.mtCacheService.tables.CITATION_STYLES),t=e.sort(function(e,t){var n=parseInt(e.source1),r=parseInt(t.source1);return parseInt(n-r)}).map(function(e){return e.target});return t},e.prototype.getPrimoAvailableStyles=function(){var e=this.mtCacheService.getTable(this.mtCacheService.tables.CITATION_STYLE_LANGUAGE),t=e.sort(function(e,t){var n=parseInt(e.target),r=parseInt(t.target);return parseInt(n-r)}).map(function(e){var t="CSL"===e.source1?"csl."+e.source2:e.source2;return t});return t},e.prototype.decodeHtmlEntities=function(e){return e=e||"",e=u.decode(e),e.replace(/&quot;/g,"").replace(/<(\/)?i>/g,"")},e.prototype.decodeCitationText=function(e){return u.decode(e)},e.prototype.loadCitationStyle=function(e,t){for(var n=t[0].querySelectorAll(".csl-bib-body"),r=t[0].querySelectorAll(".csl-entry"),i=t[0].querySelectorAll(".csl-indent"),o=t[0].querySelectorAll(".csl-right-inline"),a=t[0].querySelectorAll(".csl-left-margin"),s=0,c=n;s<c.length;s++){var u=c[s];e.lineSpacing&&(u.style.lineHeight=e.lineSpacing),0===a.length&&e.hangingIndent&&(u.style.marginLeft=e.hangingIndent+"em",u.style.textIndent="-"+e.hangingIndent+"em")}for(var l=0,f=r;l<f.length;l++){var u=f[l];e.entrySpacing&&(u.style.marginBottom=e.entrySpacing+"em"),u.style.clear="left"}for(var p=0,d=i;p<d.length;p++){var u=d[p];u.style.margin="0.5em 0 0 2em",u.stylepadding="0 0 .2em .5em",u.style.borderLeft="5px solid #ccc"}for(var h=0,m=o;h<m.length;h++){var u=m[h];if(e.maxOffset){var g=e.secondFieldAlign?Number(e.maxOffset)+this.RIGHT_PADDING:"0";u.style.margin="0 .4em 0 "+g+"em"}e.hangingIndent&&(u.style.paddingLeft=e.hangingIndent+"em",u.style.textIndent="-"+e.hangingIndent+"em")}for(var y=0,v=a;y<v.length;y++){var u=v[y];u.style.float="left",u.style.paddingRight=this.RIGHT_PADDING+"em",e.secondFieldAlign&&(u.style.textAlign="right",e.maxOffset&&(u.style.width=e.maxOffset+"em"))}},e=r([a.Injectable(),o(0,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&t||Object,Object])],e);var t}();t.CitationService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(375),c=n(7),u=n(17),l=n(1),f=n(104),p=n(3),d=n(65),h=n(29),m=n(5),g=function(){function e(e,t,n,r,i,o,s){var c=this;this.sendEmailService=e,this.jwtUtilService=t,this.storageUtil=n,this.rtaService=r,this.$translate=i,this.$timeout=o,this.$q=s,this.finishedEmailEvent=new a.EventEmitter,this.emailRegExAll=/^(([a-zA-Z0-9\.\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;|,]\s*(([a-zA-Z0-9\.\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+)*$/,this.urlPattern=/((http|https|ftp|smtp|rtsp):\/\/|www\.)/i,this.htmlPattern=/([<>])/i,this.addresses="",this.honeypot="",this.showPreview=!1,this.isUser()&&this.storageUtil.$localForage.getItem("userDetails").then(function(e){c.addresses=null!==e?e.email:""}),this.$translate("email.itemsfound").then(function(e){c.subject=e}),this.note="",this._sendMailInProgress=!1,this.sendEmailService.isTemplateSupported(this.itemsToArray(this.selectedIds))?(this.templateRenderingInProgress=!0,this.sendEmailService.getPnxForSelectedIds(this.selectedIds).then(function(e){var t=p(e,"data.docs",[]),n=t.sort(function(e,t){return d(c.selectedIds,function(t){return p(t,"recordId")===p(e,"pnx.search.addsrcrecordid[0]")})-d(c.selectedIds,function(e){return p(e,"recordId")===p(t,"pnx.search.addsrcrecordid[0]")})});c.item=n,c.rtaService.updateAvailability(c.item)})):this.sendEmailService.isTemplateSupported(this.itemsToArray(this.item))?this.templateRenderingInProgress=!0:this.templateRenderingInProgress=!1}return Object.defineProperty(e.prototype,"emailRegEx",{get:function(){return this.emailRegExAll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capchaPublicKey",{get:function(){return l.getCaptcha().public_key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCaptcha",{get:function(){return"Y"==l.getCaptcha().isActiveCapcha},enumerable:!0,configurable:!0}),e.prototype.disableHtml=function(e){this.note=this.note.replace(this.htmlPattern,""),this.note=this.note.replace(this.urlPattern,"")},e.prototype.successfullSendAction=function(e,t){console.log("email successfully sent"),this._sendMailInProgress=!1,this.finishedEmailEvent.emit(null)},e.prototype.failedSendAction=function(e,t){console.log("email failed to send"),this._sendMailInProgress=!1,this.finishedEmailEvent.emit(null)},e.prototype.isUser=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.isGuest=function(){return!this.isUser()},e.prototype.sendEmail=function(e){var t=this;if(this.isFormValid(e)){this._sendMailInProgress=!0;var n=m.bind(this,this.failedSendAction,e),r=m.bind(this,this.successfullSendAction,e),i=Array.isArray(this.item)?h(this.item):[h(this.item)],o=[];i.forEach(function(e){if(p(e,"pnx.display.source")){var n=p(e,"pnx.display.source");n.forEach(function(n,r){o.push(t.getSourceTranslate(e,r))})}}),this.$q.all(o).then(function(){var e=t.sendEmailService.sendEmail(t.addresses.split(/,|;/),t.subject,t.note,[i],t.gCaptchaResponse,t.selectedIds,t.isFullView);e.then(function(e){return r(e)},function(e){return n(e)})})}},e.prototype.getSourceTranslate=function(e,t){var n=p(e,"pnx.display.source");return this.$translate("fulldisplay.datasource."+n[t],[],"",n[t]).then(function(n){e.pnx.display.source[t]=n})},e.prototype.isFormValid=function(e){return this.emailRegEx.test(this.addresses)&&this.subject&&this.isRecipientNumberValid()&&this.isNoteSecured()&&this.isCaptchaSet(e)&&!this.honeypot},e.prototype.isNoteSecured=function(){return!this.urlPattern.test(this.note)&&!this.htmlPattern.test(this.note)},e.prototype.isRecipientNumberValid=function(){if(!this.addresses)return!0;var e=this.addresses.split(/,|;/);return this.isUser()?e.length<=10:e.length<=1},e.prototype.setWidgetId=function(e){},e.prototype.isCaptchaSet=function(e){return!this.isCaptcha||!!this.gCaptchaResponse},e.prototype.setResponse=function(e){this.gCaptchaResponse=e},e.prototype.changeAddress=function(e){this.isRecipientNumberValid()?e.addresses.$error.validationError=!1:e.addresses.$error.validationError=!0},e.prototype.changeNote=function(e){this.urlPattern.test(this.note)||this.htmlPattern.test(this.note)?e.note.$error.validationError=!0:e.note.$error.validationError=!1},e.prototype.itemsToArray=function(e){return!e||Array.isArray(e)?e:[e]},Object.defineProperty(e.prototype,"sendMailInProgress",{get:function(){return this._sendMailInProgress},enumerable:!0,configurable:!0}),e.prototype.goToEmailTemplate=function(){this.showPreview=!this.showPreview},Object.defineProperty(e.prototype,"renderedItems",{get:function(){return this.sendEmailService.renderedItems},set:function(e){this.templateRenderingInProgress=!1,this.sendEmailService.renderedItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateRenderingInProgress",{get:function(){return this.sendEmailService.templateRenderingInProgress;
},set:function(e){this.sendEmailService.templateRenderingInProgress=e},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Array)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"finishedEmailEvent",void 0),e=r([a.Component({providers:[s.SendEmailService],selector:"prm-send-email",templateUrl:"components/search/actions/sendEmailAction/send-email.html"}),o(4,a.Inject("$translate")),o(5,a.Inject("$timeout")),o(6,a.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SendEmailService&&s.SendEmailService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&n||Object,"function"==typeof(g="undefined"!=typeof u.StorageUtil&&u.StorageUtil)&&g||Object,"function"==typeof(y="undefined"!=typeof f.RtaService&&f.RtaService)&&y||Object,Object,Object,Object])],e);var t,n,g,y}();t.PrmSendEmail=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=(n(5),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},r([o.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([o.Component({selector:"prm-easybib",templateUrl:"components/search/actions/easyBibAction/easybib.html"}),i("design:paramtypes",[])],e)}());t.PrmEasybib=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=(n(5),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},r([o.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([o.Component({selector:"prm-endnote",templateUrl:"components/search/actions/endNoteAction/endnote.html"}),i("design:paramtypes",[])],e)}());t.PrmEndnote=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=(n(5),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},r([o.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([o.Component({selector:"prm-refworks",templateUrl:"components/search/actions/refworksAction/refworks.html"}),i("design:paramtypes",[])],e)}());t.PrmRefworks=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(67),c=n(9),u=n(19),l=function(){function e(e,t,n,r){this.pushtoService=e,this.mtCache=t,this.$timeout=n,this.$document=r,this.setEncodingValues()}return e.prototype.getFile=function(){var e=angular.bind(this,this.failedPushtoAction),t=angular.bind(this,this.successfullPushtoAction);u.isIosDevice()&&(this.popupWin=window.open("","ris"));var n={};this.encodingVal&&(n.encoding=this.encodingVal);var r=this.pushtoService.getServiceUrl([this.item],this.selectedIds,"exportris",n);r.then(function(e){return t(e)},function(t){return e(t)})},Object.defineProperty(e.prototype,"encoding",{get:function(){return this.encodingList},enumerable:!0,configurable:!0}),e.prototype.setEncodingValues=function(){var e=this.mtCache.getTable(this.mtCache.tables.EXPORT_RIS_ENCODINGS);e.length>0&&(this.encodingList=e.map(function(e){return e.source1}))},e.prototype.successfullPushtoAction=function(e){var t=this.encodingVal||"UTF-8",n=new Blob([e.data.data],{endings:"native",type:"text/plain;charset="+t}),r="Primo_RIS_Export.ris";if(navigator.appVersion.toString().indexOf(".NET")>0)window.navigator.msSaveBlob(n,r);else{var i=window.URL.createObjectURL(n),o=document.createEvent("MouseEvents"),a=document.createElement("a");try{a.download=r,a.href=i,a.dataset.downloadurl=["text/plain",a.download,a.href].join(":")}catch(e){console.log(e)}try{u.isIosDevice()?this.popupWin=window.open(i,"ris"):(o.initEvent("click",!0,!1),a.dispatchEvent(o))}catch(e){}this.$timeout(function(){window.URL.revokeObjectURL(i)},600)}},e.prototype.failedPushtoAction=function(e){},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),e=r([a.Component({selector:"prm-export-ris",templateUrl:"components/search/actions/exportRISAction/export-ris.html"}),o(2,a.Inject("$timeout")),o(3,a.Inject("$document")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PushtoService&&s.PushtoService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,Object,Object])],e);var t,n}();t.PrmExportRis=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(67),c=n(9),u=n(19),l=n(8),f=function(){function e(e,t,n,r,i){this.pushtoService=e,this.mtCache=t,this.mediaQueries=n,this.$timeout=r,this.$document=i,this.setEncodingValues()}return Object.defineProperty(e.prototype,"encoding",{get:function(){return this.encodingList},enumerable:!0,configurable:!0}),e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.getFile=function(){var e=angular.bind(this,this.failedPushtoAction),t=angular.bind(this,this.successfullPushtoAction),n=this.encodingVal||"UTF-8";u.isIosDevice()&&(this.popupWin=window.open("","ris"));var r=this.pushtoService.getServiceUrl([this.item],this.selectedIds,"exportbibtex",{encoding:n});r.then(function(e){return t(e)},function(t){return e(t)})},e.prototype.successfullPushtoAction=function(e){var t=this.encodingVal||"UTF-8",n=new Blob([e.data.data],{endings:"native",type:"text/plain;charset="+t}),r="Primo_BibTeX_Export.bib";if(this.isBrowserMS())window.navigator.msSaveBlob(n,r);else{var i=window.URL.createObjectURL(n),o=document.createEvent("MouseEvents"),a=document.createElement("a");try{a.download=r,a.href=i,a.dataset.downloadurl=["text/plain",a.download,a.href].join(":")}catch(e){console.log(e)}try{u.isIosDevice()?this.popupWin=window.open(i,"ris"):(o.initEvent("click",!0,!1),a.dispatchEvent(o))}catch(e){}this.$timeout(function(){window.URL.revokeObjectURL(i)},600)}},e.prototype.isBrowserMS=function(){return navigator.appVersion.toString().indexOf(".NET")>0||window.navigator.userAgent.indexOf("Edge")>-1},e.prototype.failedPushtoAction=function(e){},e.prototype.setEncodingValues=function(){var e=this.mtCache.getTable(this.mtCache.tables.EXPORT_RIS_ENCODINGS);e.length>0&&(this.encodingList=e.map(function(e){return e.source1}))},e.prototype.ngOnInit=function(){},r([a.Input(),i("design:type",Object)],e.prototype,"selectedIds",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-export-bibtex",templateUrl:"components/search/actions/exportBibTexAction/export-bibtex.html"}),o(3,a.Inject("$timeout")),o(4,a.Inject("$document")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PushtoService&&s.PushtoService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,"function"==typeof(f="undefined"!=typeof l.MediaQueries&&l.MediaQueries)&&f||Object,Object,Object])],e);var t,n,f}();t.PrmExportBibtex=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},r([o.Output(),i("design:type",Object)],e.prototype,"closeTabsEvent",void 0),e=r([o.Component({selector:"prm-mendeley",templateUrl:"components/search/actions/mendeleyAction/mendeley.html"}),i("design:paramtypes",[])],e)}();t.PrmMendeley=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(67),c=n(9),u=n(8),l=n(183),f=function(){function e(e,t,n,r,i){this.pushtoService=e,this.mtCache=t,this.mediaQueries=n,this.$document=r,this.legantoService=i,this.finishedLegantoEvent=new a.EventEmitter,this.showLists="show",this.responseLists=[],this.showPushToForm="",this.showSignIn="",this.setPushOptions(),this.selectedPushToOption=this.list,this.getListFromLeganto(),this.legantoService.showTemplateType=""}return e.prototype.getListFromLeganto=function(){var e=this;if(this.legantoService.isGuest())this.legantoService.showTemplateType="signIn";else{var t=this.legantoService.getListFromLeganto();t.then(function(t){return e.setUserLists()})}},e.prototype.setUserLists=function(){this.userLists=this.legantoService.getResponseLists(),this.userLists.length>0?this.legantoService.showTemplateType="userSelection":this.selectedPushToOption=this.collection},e.prototype.pushRecord=function(e){var t=this;if(this.selectedPushToOption===this.collection)this.selectedUserList="",this.selectedUserSection="";else if(this.selectedPushToOption===this.list&&(""===this.selectedUserList||"undefined"==typeof this.selectedUserList||""===this.selectedUserSection||"undefined"==typeof this.selectedUserSection))return;var n=this.legantoService.pushRecord(this.selectedUserList,this.selectedUserSection);n.then(function(e){return t.finishedLegantoEvent.emit(null)}),this.noSectionsError=""},e.prototype.changedPushToOption=function(){this.showLists=this.selectedPushToOption===this.list?"show":"",this.showSections=this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList?"show":"",this.legantoService.statusMessage="",this.setDisplayNoSectionsError(),this.showSections="undefined"!=typeof this.userSections&&this.userSections.length>0&&this.selectedPushToOption===this.list?"show":"",this.setPushAllowed()},e.prototype.changedUserList=function(){this.selectedUserSection="";var e=this;angular.forEach(e.legantoService.getResponseLists(),function(t){t.id===e.selectedUserList&&(e.userSections=t.sections)}),this.setDisplayNoSectionsError(),this.showSections=this.userSections.length>0?"show":"",this.legantoService.statusMessage="",this.setPushAllowed()},e.prototype.changedUserSection=function(){this.legantoService.statusMessage="",this.setPushAllowed()},e.prototype.setPushOptions=function(){this.list=this.legantoService.translations["fulldisplay.command.pushto.option.LegantoPushTo.list"],this.collection=this.legantoService.translations["fulldisplay.command.pushto.option.LegantoPushTo.collection"],this.pushToOptions=[this.collection,this.list]},e.prototype.setDisplayNoSectionsError=function(){this.noSectionsError="undefined"!=typeof this.userSections&&0==this.userSections.length&&"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList?"show":""},e.prototype.setPushAllowed=function(){"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserSection&&""!==this.selectedUserSection&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList||"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.collection?this.legantoService.pushAllowed=!0:this.legantoService.pushAllowed=!1},e.prototype.ngOnInit=function(){this.legantoService.isGuest()&&(this.legantoService.showTemplateType="signIn",this.pushAllowed=!1)},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"finishedLegantoEvent",void 0),e=r([a.Component({selector:"prm-leganto",templateUrl:"components/search/actions/legantoAction/leganto.html"}),o(3,a.Inject("$document")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PushtoService&&s.PushtoService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,"function"==typeof(f="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&f||Object,Object,"function"==typeof(p="undefined"!=typeof l.LegantoService&&l.LegantoService)&&p||Object])],e);var t,n,f,p}();t.PrmLeganto=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(234),c=n(8),u=function(){function e(e,t,n){this.mendeleyToastService=e,this.$mdToast=t,this.mediaQueries=n}return e.prototype.ngOnInit=function(){},e.prototype.onDismiss=function(){this.$mdToast.hide()},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},r([a.Input(),i("design:type",Boolean)],e.prototype,"isSuccess",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"inProgress",void 0),r([a.Input(),i("design:type",String)],e.prototype,"title",void 0),e=r([a.Component({selector:"prm-mendeley-toast",templateUrl:"components/search/actions/mendeleyAction/mendeleyToast/mendeley-toast.html"}),o(1,a.Inject("$mdToast")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MendeleyToastService&&s.MendeleyToastService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.MediaQueries&&c.MediaQueries)&&n||Object])],e);var t,n}();t.PrmMendeleyToast=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(9),u=(n(60),n(3)),l=(n(29),n(5)),f=n(0),p=n(27),d=n(376),h=n(11),m=n(21),g=n(109),y=n(10),v=n(55),b=n(42),S=n(48),_=n(1),O=n(6),T=n(7),E=n(78),w=n(8),I=n(4),R=n(19),P=n(62),j=n(182),A=n(2),C=n(17),$=n(56),D=n(1),L=n(135),k=n(28),M=n(1),x=n(3),F=(n(88),n(177)),U=function(){function e(e,t,n,r,i,o,a,s,c,u,l,p,d,h,m,g,y,v,b,S,_,O,T,E,w,I,R,P,j,A,C,$,L){var k=this;this.briefResultService=e,this.upFrontActionsService=t,this.$mdDialog=n,this.resultUtil=r,this.actionsIcons=i,this.searchService=o,this.searchStateService=a,this.userSessionManagerService=s,this.$location=c,this.$scope=u,this.templateUtil=l,this.jwtUtilService=p,this.facetService=d,this.$state=h,this.$timeout=m,this.favoritesService=g,this.pnxUtil=y,this.primolyticsService=v,this.mediaQueries=b,this.$window=S,this.addQueryToSavedSearchesService=_,this.$mdToast=O,this.$element=T,this.$translate=E,this.actionListService=w,this.configurationUtil=I,this.storageUtil=R,this.collectionDiscoveryService=P,this.restBaseURLs=j,this.fullViewModuleLoaderService=A,this.databasesService=C,this.mappingTablesCache=$,this.$stateParams=L,this.expandItemEvent=new f.EventEmitter,this.loadNextResultsEvent=new f.EventEmitter,this.loadPrevResultsEvent=new f.EventEmitter,this.loadEmailTemplateEvent=new f.EventEmitter,this.isExpanded2=!1,this.isExpanded3=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.vid=D.getVid(),this.institutionCode=D.getInstitutionCode(),this.showTimer=!1,this.onToggle={Print:function(e){k.printItemService.printItemAction(e)},RefWorks:function(e){k.refWorksService.refworksAction(e)},EasyBib:function(e){k.easyBibService.easyBibAction(e)},EndNote:function(e){k.endNoteService.endNoteAction(e)},Mendeley:function(e){k.mendeleyService.mendeleyAction(e)}},E(["eshelf.send_to.tooltip","eshelf.close_send_to.tooltip"]).then(function(e){k.loadShowActionsOptionsText=e["eshelf.send_to.tooltip"],k.loadCloseActionsOptionsText=e["eshelf.close_send_to.tooltip"]}),this.$timeout(function(){k.showTimer=!0},2e3),this.$mdDialog=n,this.jwtUtilService=p,this.briefResultService.isInGetFrbrEvent=!1,this.showItemType=!this.isServicesPageState(),u.$watch(function(){return k.isExpanded},function(e){k.isExpanded2!==e&&(k.$timeout(function(){return k.isExpanded2=e},10),k.$timeout(function(){return k.isExpanded3=e},20))})}return e.prototype.ngOnInit=function(){var e=this;this.isExpanded&&this.expandItemEvent.emit(!1),this._isGenericRecord=this.isGenericRecord(),this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:this.isServicesPage()?"link":"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo",BibTeXPushTo:"pushto.option.BibTeXPushTo",Mendeley:"pushto.option.Mendeley"},this.index=this.index?this.index:this.briefResultService.currentFullViewIndex,this.collectionDiscoveryService.isCollectionDiscoverySpecificDisplay&&(this.collectionDiscoveryData=u(this.collectionDiscoveryService.getDataFromCollectionRecord(this.item),"[0]"),this.isCollectionDiscoveryCollection=this.collectionDiscoveryData&&("COLLECTION"===this.collectionDiscoveryData.type||"TOPCOLLECTION"===this.collectionDiscoveryData.type)),this.$scope.$watch(function(){return e.isExpanded},function(t,n){e.$timeout(function(){e.unfocusActionButtons("md-nav-bar button"),e.unfocusActionButtons("md-nav-bar nav")},400)}),this.$timeout(function(){e.removeRoleAtt()},0)},e.prototype.ngAfterViewInit=function(){this.loadEmailTemplateEvent.emit()},e.prototype.getText=function(){return this.item.display.source.title},e.prototype.isFrbr=function(){return this.resultUtil.isFrbr(this.item)},e.prototype.newMetalibItem=function(){var e=u(this.item,"context",!1),t=e&&"MetaLib"===e,n=u(this.item,"pnx.ranking.booster2[0]",!1),r=u(this.item,"pnx.control.recordid[0]",""),i=u(this.getSearchObject(),"metalibMoreStatus["+r+"]",0)>1;return t&&n&&"1"===n&&!i},e.prototype.getSearchObject=function(){return this.searchStateService.getSearchObject()},e.prototype.isMultipleVersions=function(){return this.resultUtil.displayMultipleVersions(this.item,this.briefResultService.getSearchObject())},e.prototype.getResourceTypeForDisplay=function(){return!this.isMultipleVersions()||this.isFavoriteState()||this.isPc()||1!==this.searchService.getFrbrDisplay()?"mediatype."+this.item.pnx.display.type[0]:"mediatype.multiplever"},e.prototype.isPc=function(){return"PC"===this.item.context},e.prototype.isFrbrGeneric=function(){return this.resultUtil.isFrbr(this.item)&&1===this.searchService.getFrbrDisplay()},e.prototype.closeOpenTabs=function(e){e.stopPropagation(),this.selectedAction="none"},e.prototype.openTab=function(e,t){"Citation"!=t&&this.primolyticsService.doBeaconReport({p:"sendTo",op:t},this.item,this.primolyticsService.getTimestamp()),this.actionListService.onToggle[t]&&this.actionListService.onToggle[t](this.item),e.stopPropagation(),this.openItemMenu(e),this.selectedAction=t},e.prototype.openItemMenu=function(e){this.changeItemMenuVisibility(e,!1)},e.prototype.toggleItemMenu=function(e){e.stopPropagation(),console.log(e),this.changeItemMenuVisibility(e,!0)},e.prototype.changeItemMenuVisibility=function(e,t){this.isExpanded?t&&this.expandItemEvent.emit({expand:!1,target:this.$element[0]}):(this.closeOpenTabs(e),this.expandItemEvent.emit({expand:!0,target:this.$element[0]}))},e.prototype.getLessMoreOptionsButtonText=function(){return this.isExpanded?this.loadCloseActionsOptionsText:this.loadShowActionsOptionsText},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.isGenericRecord=function(e){if(this.isFavoriteState())return!1;if(!e&&void 0!==this._isGenericRecord)return this._isGenericRecord;var t=e?e:this.item,n=!1;if(this.briefResultService.getSearchObject().facets){var r=this.briefResultService.getSearchObject().facets.map(function(e,t,n){return e.name});n=this.resultUtil.isMultipleVersions(t)&&r.indexOf("frbrgroupid")===-1&&1===this.searchService.getFrbrDisplay()}return n},e.prototype.handleDetails=function(e,t,n){if(!t.ctrlKey){if(t.preventDefault&&t.preventDefault(),this.isCollectionDiscoveryCollection)return void this.$state.go(I.STATE_NAMES.COLLECTION_DISCOVERY,{collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:D.getVid()});var r=getSelection().toString();r||this.isFullView||(n?this.handleDetailsOpenfullWithBeacon(e):this.handleDetailsOpenfull(e,t))}},e.prototype.handleDetailsOpenfullWithBeacon=function(e){var t=this;this.handleDetailsOpenfull(e),this.delay(17e3).then(function(e){t.handlefullViewBeacon()})},e.prototype.delay=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},e)})];case 1:return t.sent(),[2]}})})},e.prototype.handlefullViewBeacon=function(){},e.prototype.handleDetailsOpenfull=function(e,t){var n=this;this.briefResultService.serviceId="brief";var r;if(t){if(r=t.target,r&&r.hasAttribute("prm-brief-internal-button-marker")||r.classList.contains("prm-brief-internal-button-marker"))return!1;this.briefResultService.serviceId=t.detail?t.detail.index:t.index}var i=this.isGenericRecord(e);if(i&&!this.isPc()){var o="frbrgroupid,include,"+this.pnxUtil.getValue(e,"facets","frbrgroupid");return void this.facetService.frbrSearch({facet:o},this.index)}this.$mdToast.hide();var a={val:!R.isBrowserIE()},s={val:!1},n=this;this.fullViewModuleLoaderService.loadFullViewModule().then(function(){n.briefResultService.previousUrl=n.$location.url(),n.$location.url(n.templateUtil.getDeepLinkPath(e)),n.favoritesService.needToChangeUrl=!1;var t=n.$mdDialog;document.querySelector(".md-dialog-container")?n.dialogLoaded(a,s):t.show({onComplete:function(){n.dialogLoaded(a,s)},onRemoving:function(){n.handleHideDetails()},templateUrl:"components/search/fullView/full-view-dialog-template.html",locals:{getFocusId:function(){return n.briefResultService.serviceId},item:e,$location:n.$location,$timeout:n.$timeout,perviousUrl:n.previousUrl,$state:n.$state,jwtUtilService:n.jwtUtilService,mediaQueries:n.mediaQueries,isfavorites:n.isfavorites,loadFullViewAdditionalServices:a,dialogOpened:s,$mdDialog:n.$mdDialog,KEY_CODE:n.KEY_CODE,searchService:n.searchService,briefResultService:n.briefResultService,favoritesService:n.favoritesService,primolyticsService:n.primolyticsService,handleHideDetails:function(){n.handleHideDetails()},dialogRemoved:n.dialogRemoved,originator:n.originator},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,focusOnOpen:!1,controller:function(){function e(e){var t=this;e.keyCode===this.KEY_CODE.ESCAPE&&(e.preventDefault(),this.handleHideDetails(),this.$timeout(function(){return document.getElementById("SEARCH_RESULT_RECORDID_"+t.item.pnx.control.recordid[0]).focus()},0))}function t(){switch(this.$state.current.name){case I.STATE_NAMES.SEARCH:return this.briefResultService.searchResults();case I.STATE_NAMES.FAVORITES:return this.favoritesService.getItems();case I.STATE_NAMES.DB_SEARCH:return this.briefResultService.searchResults();case I.STATE_NAMES.JOURNAL_SEARCH:return this.briefResultService.searchResults();case I.STATE_NAMES.NEWSPAPERS:return this.briefResultService.searchResults();case I.STATE_NAMES.CITATION_TRAILS:return this.briefResultService.searchResults();case I.STATE_NAMES.CITATION_CHAPTERS:return this.briefResultService.searchResults();case I.STATE_NAMES.ORGANIZATION_LIST:return this.briefResultService.searchResults()}}function n(){switch(this.$state.current.name){case I.STATE_NAMES.SEARCH:return this.briefResultService.isLastRecord();case I.STATE_NAMES.FAVORITES:return this.briefResultService.isLastRecordFav();case I.STATE_NAMES.DB_SEARCH:return this.briefResultService.isLastRecord();case I.STATE_NAMES.JOURNAL_SEARCH:return this.briefResultService.isLastRecord();case I.STATE_NAMES.NEWSPAPERS:return this.briefResultService.isLastRecord();case I.STATE_NAMES.CITATION_TRAILS:return this.briefResultService.isLastRecord();case I.STATE_NAMES.CITATION_CHAPTERS:return this.briefResultService.isLastRecord();case I.STATE_NAMES.ORGANIZATION_LIST:return this.briefResultService.isLastRecord()}}function r(){return this.briefResultService.isFirstRecord()}function i(){return this.briefResultService.isLastRecord()}function o(){return this.briefResultService.searchResults()}function a(){return this.briefResultService.currentResultIndex()}function s(){this.briefResultService.isLastResultInCurrentBulk()&&this.primolyticsService.doBeaconReport({p:"brief",op:"next"},this.item,this.primolyticsService.getTimestamp()),this.primolyticsService.doBeaconReport({p:"brief",op:"nextResult"},this.item,this.primolyticsService.getTimestamp())}function c(){this.primolyticsService.doBeaconReport({p:"brief",op:"previousResult"},this.item,this.primolyticsService.getTimestamp())}function u(){var e=this;switch(this.originator="nextRecord",this.getNextRecordWithBeacon(),this.$state.current.name){case I.STATE_NAMES.SEARCH:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.FAVORITES:var t=this.briefResultService.getNextRecordFav();this.item=this.favoritesService.getItems()[t],this.briefResultService.changeFullDisplayUrl(this.item);break;case I.STATE_NAMES.DB_SEARCH:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.JOURNAL_SEARCH:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.NEWSPAPERS:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.CITATION_TRAILS:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.CITATION_CHAPTERS:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)});break;case I.STATE_NAMES.ORGANIZATION_LIST:this.briefResultService.getNextRecord().then(function(t){var n=t;e.item=e.briefResultService.searchResults()[n],e.briefResultService.changeFullDisplayUrl(e.item)})}}function l(){this.originator="previousRecord",this.getPrevRecordWithBeacon();var e=this.briefResultService.getPreviousRecord();return this.item=this.briefResultService.searchResults()[e],
this.briefResultService.changeFullDisplayUrl(this.item),e}var f=this;f.keydownSupport=e,f.isFirstRecord=r,f.isLastRecord=i,f.searchResults=o,f.getNextRecord=u,f.getPreviousRecord=l,f.currentResultIndex=a,f.getNextRecordWithBeacon=s,f.getPrevRecordWithBeacon=c,f.currentStateResults=t,f.isLastRecordByState=n},controllerAs:"$ctrl"});var r,i;r=n.$scope.$on("$stateChangeStart",function(e,t,o,a,s){var c={"/fulldisplay":["/search","/favorites","/chapters"],"/jfulldisplay":["/jsearch"],"/npfulldisplay":["/npsearch"],"/dbfulldisplay":["/dbsearch"]};e.preventDefault(),r(),r=n.$scope.$on("$locationChangeStart",function(e){e.preventDefault(),r()}),i=n.$scope.$watch(function(){return n.$location.path()},function(e,t){t&&c[t]&&c[t].indexOf(e)>-1&&(n.briefResultService.preventDialogClose?n.briefResultService.preventDialogClose=!1:(n.dialogRemoved(),i(),n.searchService.updatePageTitle()))}),window.onpopstate=function(){window.onpopstate=void 0,n.dialogRemoved()}})})},e.prototype.handleHideDetails=function(){window.appPerformance.serverTimeLog.viewit=0,window.appPerformance.serverTimeLog.pcDelivery=0,window.appPerformance.serverTimeLog.getLocItems=0,window.appPerformance.serverTimeLog.PhysicalServiceIdCalc=0,this.briefResultService.previousUrl?(this.dialogRemoved(),this.briefResultService.handleDialogHide(this.briefResultService.previousUrl,this.item),document.querySelector(".md-dialog-container")&&l.element(document.querySelector(".md-dialog-container")).addClass("fixed-container")):this.$mdDialog.hide(),console.log("Remove title, decription and schema.org of closed item."),this.searchService.removeSEOData(),l.element(document.getElementById("email-template-full")).remove()},e.prototype.getDisplayLines=function(){if(!this.item)return[];var e=this.item.pnx.display.source;return this.lines&&this.lastId===e||(this.lastId=e,this.lines=this.briefResultService.parseDisplayLines(this.item,this.isCollectionDiscoveryCollection)),this.lines},e.prototype.getTitle=function(){try{var e=_.getSEOParamsMappingParam("title");if(e)try{return this.configurationUtil.jsonPathToValue(this.item,e)}catch(t){return console.log("Parse title error. Path is "+e+" Item is: "),console.log(this.item),console.error(t),""}var t=this.getDisplayLines()[0].values.filter(function(e){return"title"==e.key}).map(function(e){return e.text})[0][0];return t}catch(e){return console.log("Parse title is corrupt"),console.error(e),""}},e.prototype.dialogRemoved=function(){if(document.querySelector(".md-dialog-container")&&l.element(document.querySelector(".md-dialog-container")).addClass("accessible-explore"),document.querySelector("md-backdrop")&&l.element(document.querySelector("md-backdrop")).addClass("accessible-explore"),document.querySelector(".md-scroll-mask")&&l.element(document.querySelector(".md-scroll-mask")).addClass("accessible-explore"),document.querySelectorAll(".full-view-navigation")&&l.element(document.querySelectorAll(".full-view-navigation")).addClass("accessible-explore"),document.querySelectorAll(".prm-full-view-dialog")&&l.element(document.querySelectorAll(".prm-full-view-dialog")).removeClass("_md-transition-in"),document.querySelectorAll("body")&&(l.element(document.querySelectorAll("body")).removeClass("md-dialog-is-showing"),l.element(document.querySelectorAll("body")).attr("style","")),this.item.pnx.control.recordid){var e=document.getElementById("SEARCH_RESULT_RECORDID_"+this.item.pnx.control.recordid[0]);e&&e.focus()}},e.prototype.dialogLoaded=function(e,t){var n=this.getTitle();this.searchService.addSEOData(this.item,n),document.querySelector(".md-dialog-container")&&l.element(document.querySelector(".md-dialog-container")).removeClass("accessible-explore"),document.querySelector("md-backdrop")&&l.element(document.querySelector("md-backdrop")).removeClass("accessible-explore"),document.querySelector(".md-scroll-mask")&&l.element(document.querySelector(".md-scroll-mask")).removeClass("accessible-explore"),document.querySelectorAll(".full-view-navigation")&&l.element(document.querySelectorAll(".full-view-navigation")).removeClass("accessible-explore"),document.querySelectorAll(".prm-full-view-dialog")&&l.element(document.querySelectorAll(".prm-full-view-dialog")).addClass("_md-transition-in"),document.querySelectorAll("body")&&(l.element(document.querySelectorAll("body")).addClass("md-dialog-is-showing"),l.element(document.querySelectorAll("body")).attr("style","position: fixed; width: 100%; top: 0px;")),this.briefResultService.isFullViewOverlayOpen=!0,e.val?t.val=!0:(this.$timeout(function(){return t.val=!0},0),this.$timeout(function(){return e.val=!0},1e3)),this.briefResultService.currentFullViewIndex=this.index?this.index:0,document.querySelector(".md-dialog-container")&&l.element(document.querySelector(".md-dialog-container")).addClass("fixed-container");var r=document.querySelector("sticky-scroll");r&&(r.scrollTop=0)},e.prototype.isFavoriteState=function(){return this.$state.current.name==I.STATE_NAMES.FAVORITES},e.prototype.isSearchState=function(){return this.$state.current.name===I.STATE_NAMES.SEARCH},e.prototype.isServicesPageState=function(){return this.briefResultService.isServicePageState()},Object.defineProperty(e.prototype,"isPeerDocument",{get:function(){return"peer_reviewed"===x(this.item,"pnx.display.lds50[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpenAccessDocument",{get:function(){return"free_for_read"===x(this.item,"pnx.display.oa[0]")||"true"===x(this.item,"pnx.addata.openaccess[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCourseDocument",{get:function(){return x(this.item,"pnx.display.crsinfo[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChosen",{get:function(){return this.briefResultService.getIfChosenForRecordId(this.recordId)},set:function(e){this.briefResultService.saveJsonOdIdsAndIfChosen(this.recordId,e),this.briefResultService.saveJsonOdIdsAndItems(this.item,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"upFrontActions",{get:function(){var e=this;if(this.configurationUtil.isSuprima())return this.upFrontActionsService.requiredUpFrontActionsList;var t=this.upFrontActionsService.requiredUpFrontActionsList.filter(function(t){return!("Ebsco"===e.item.context&&"Permalink"===t)});return t},enumerable:!0,configurable:!0}),e.prototype.getActionIconName=function(e){return this.upFrontActionsService.getActionIconName(e)},e.prototype.getActionLabel=function(e){return this.upFrontActionsService.getActionLabel(e)},Object.defineProperty(e.prototype,"delivery",{get:function(){return u(this.item,"delivery")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordId",{get:function(){return this.item.pnx.control.recordid[0]},enumerable:!0,configurable:!0}),e.prototype.getDescription=function(){try{return this.item.pnx.display.description[0]}catch(e){return console.log(e.message),console.log("No description defined in display. "),console.log(this.item.pnx.display),""}},e.prototype.getDeepLinkPath=function(){return this.isCollectionDiscoveryCollection?this.$state.href(I.STATE_NAMES.COLLECTION_DISCOVERY,{collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:D.getVid()}):this.templateUtil.getFullDeepLinkAbsPath(this.item)},e.prototype.isShowCitationTrails=function(){var e=this.$state.current.name;return e===I.STATE_NAMES.CITATION_TRAILS||e===I.STATE_NAMES.SEARCH},e.prototype.keyDownSupport=function(e){this.KEY_CODE;27===e.keyCode&&(this.closeOpenTabs(e),this.toggleItemMenu(e)),40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e.prototype.focusOnXButton=function(){var e=this.$element[0].querySelector("#briefResultMoreOptionsButton");e.focus()},e.prototype.getActionTranslate=function(e){var t="fulldisplay.command."+this.actionLabelNamesMap[e];return this.$translate.instant(t)},Object.defineProperty(e.prototype,"isSuprima",{get:function(){return this.configurationUtil.isSuprima()},enumerable:!0,configurable:!0}),e.prototype.escapeString=function(e){return F(e)},e.prototype.getRecordTitle=function(){return this.item.pnx.display.title[0]},e.prototype.isServicesPage=function(){return"servicesPage"===this.$state.current.name},e.prototype.getNameTitleParams=function(e,t){var n={};return n[e[0]]=this.getActionTranslate(t),n[e[1]]=this.getRecordTitle(),n},e.prototype.ctoUrl=function(){var e;if("servicesPage"===this.$state.current.name){var t=this.$window.location.toString(),n=t.indexOf("?");e=t.substring(n+1,t.length)+"&isServicesPage=true"}else e="vid="+this.vid;return this.restBaseURLs.openUrl+"/"+this.institutionCode+"/dbg?"+e},e.prototype.displayCTOButton=function(){return this.configurationUtil.isSuprima()&&"true"==this.$location.search().displayCTO},e.prototype.getItme=function(){return JSON.stringify(this.item)},e.prototype.unfocusActionButtons=function(e){var t=this.$element[0].querySelectorAll(e);if(this.isExpanded&&this.$element)for(var n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("tabindex"),i.setAttribute("role","list")}},e.prototype.sendBriefBeacon=function(){if(this.isSearchState()){var e=this.isChosen?"selectSingleRecord":"unselectSingleRecord";this.primolyticsService.doBeaconReport({p:"brief",op:e},this.item,this.primolyticsService.getTimestamp())}},e.prototype.isDBSearch=function(){return this.databasesService.isDBSearch()},Object.defineProperty(e.prototype,"isFullViewOverlayOpen",{get:function(){return this.briefResultService.isFullViewOverlayOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isToolBarEnabled",{get:function(){return this.briefResultService.enableOrDisableToolBar},enumerable:!0,configurable:!0}),e.prototype.isBookRecordType=function(){return"book"===x(this.item,"pnx.search.rsrctype[0]")},e.prototype.isBookChapterRecordType=function(){return"book_chapter"===x(this.item,"pnx.search.rsrctype[0]")},e.prototype.hasRelatedItems=function(){return this.isSuprima?1==M.getAttributesMap().relatedItemsActive:!(!this.isBookRecordType()&&!this.isBookChapterRecordType())&&this.briefResultService.isRelatedItemsConfiguredPrimo(this.vid)},e.prototype.isEmailMode=function(){return"email"===this.displayMode},e.prototype.removeRoleAtt=function(){var e=document.getElementById("SEARCH_RESULT_RECORDID_"+this.recordId);e.removeAttribute("role")},e.prototype.isNgrsSearch=function(){return!(!window.appConfig["system-configuration"].ngrs_enabled||this.isFullView)&&(!!window.appConfig["system-configuration"].ngrs_enable_best_offer_local_records||"RAPIDXL"===this.$stateParams.tab)},e.prototype.sendBeacon=function(){this.$state.current.name!==I.STATE_NAMES.SEARCH||this.$location.path().endsWith("/fulldisplay")||this.runBriefIconBeaconCall()},e.prototype.runBriefIconBeaconCall=function(){},r([f.Input(),i("design:type",Object)],e.prototype,"index",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([f.Input(),i("design:type",String)],e.prototype,"displayMode",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"isExpanded",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"isfavorites",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"isFavoriteForDisplayFrbr",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"itemHeight",void 0),r([f.Input(),i("design:type",Object)],e.prototype,"links",void 0),r([f.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([f.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([f.Output(),i("design:type",Object)],e.prototype,"expandItemEvent",void 0),r([f.Output(),i("design:type",Object)],e.prototype,"loadNextResultsEvent",void 0),r([f.Output(),i("design:type",Object)],e.prototype,"loadPrevResultsEvent",void 0),r([f.Output(),i("design:type",Object)],e.prototype,"loadEmailTemplateEvent",void 0),r([O.beacon({p:"brief",op:"openfull"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"handlefullViewBeacon",null),r([O.beacon({p:"brief",op:"icon"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runBriefIconBeaconCall",null),e=r([f.Component({selector:"prm-brief-result-container",templateUrl:"components/search/briefResult/briefResultContainer.html"}),o(2,f.Inject("$mdDialog")),o(4,f.Inject("featuredActionsIcons")),o(8,f.Inject("$location")),o(9,f.Inject("$scope")),o(13,f.Inject("$state")),o(14,f.Inject("$timeout")),o(19,f.Inject("$window")),o(21,f.Inject("$mdToast")),o(22,f.Inject("$element")),o(23,f.Inject("$translate")),o(28,f.Inject("restBaseURLs")),o(32,f.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof p.BriefResultService&&p.BriefResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof d.UpFrontActionsService&&d.UpFrontActionsService)&&n||Object,Object,"function"==typeof(U="undefined"!=typeof g.ResultUtil&&g.ResultUtil)&&U||Object,Object,"function"==typeof(B="undefined"!=typeof h.SearchService&&h.SearchService)&&B||Object,"function"==typeof(N="undefined"!=typeof m.SearchStateService&&m.SearchStateService)&&N||Object,"function"==typeof(q="undefined"!=typeof y.UserSessionManagerService&&y.UserSessionManagerService)&&q||Object,Object,Object,"function"==typeof(H="undefined"!=typeof b.TemplateUtil&&b.TemplateUtil)&&H||Object,"function"==typeof(V="undefined"!=typeof T.JwtUtilService&&T.JwtUtilService)&&V||Object,"function"==typeof(Y="undefined"!=typeof v.FacetService&&v.FacetService)&&Y||Object,Object,Object,"function"==typeof(z="undefined"!=typeof S.FavoritesService&&S.FavoritesService)&&z||Object,"function"==typeof(G="undefined"!=typeof E.PnxUtil&&E.PnxUtil)&&G||Object,"function"==typeof(W="undefined"!=typeof O.PrimolyticsService&&O.PrimolyticsService)&&W||Object,"function"==typeof(Q="undefined"!=typeof w.MediaQueries&&w.MediaQueries)&&Q||Object,Object,"function"==typeof(J="undefined"!=typeof P.AddQueryToSavedSearchesService&&P.AddQueryToSavedSearchesService)&&J||Object,Object,Object,Object,"function"==typeof(K="undefined"!=typeof j.ActionListService&&j.ActionListService)&&K||Object,"function"==typeof(X="undefined"!=typeof A.ConfigurationUtil&&A.ConfigurationUtil)&&X||Object,"function"==typeof(Z="undefined"!=typeof C.StorageUtil&&C.StorageUtil)&&Z||Object,"function"==typeof(ee="undefined"!=typeof $.CollectionDiscoveryService&&$.CollectionDiscoveryService)&&ee||Object,Object,"function"==typeof(te="undefined"!=typeof L.FullViewModuleLoaderService&&L.FullViewModuleLoaderService)&&te||Object,"function"==typeof(ne="undefined"!=typeof k.DatabasesService&&k.DatabasesService)&&ne||Object,"function"==typeof(re="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&re||Object,Object])],e);var t,n,U,B,N,q,H,V,Y,z,G,W,Q,J,K,X,Z,ee,te,ne,re}();t.PrmBriefResultContainer=U},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(21),c=n(151),u=(n(679),function(){function e(e,t,n){this.searchStateService=e,this.stringUtils=t,this.$translate=n,this.ERROR_MSG_LENGTH=5}return Object.defineProperty(e.prototype,"isSearchWithFilter",{get:function(){return this.searchStateService.getSearchObject().facets.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){var e=this.isSearchWithFilter?"nui.noresultswithfilter.description":"nui.noresults.description";return this.stringUtils.decode(this.$translate.instant(e,{term:this.stringUtils.encode(this.term)}))},enumerable:!0,configurable:!0}),e.prototype.getErrorSuggestionsDescriptionList=function(){for(var e=[],t=1;t<=this.ERROR_MSG_LENGTH;t++){var n=this.stringUtils.decode(this.$translate.instant("nui.noresults.suggestions"+t));n&&0!==n.length&&n.trim()&&e.push(n)}return e},r([a.Input(),i("design:type",Object)],e.prototype,"term",void 0),e=r([a.Component({selector:"prm-no-search-result",templateUrl:"components/search/searchResult/searchResultList/noSearchResult.html"}),o(2,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SearchStateService&&s.SearchStateService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.StringUtils&&c.StringUtils)&&n||Object,Object])],e);var t,n}());t.PrmNoSearchResult=u},function(e,t,n){function r(e){return e=i(e),e&&s.test(e)?e.replace(a,o):e}var i=n(61),o=n(680),a=/&(?:amp|lt|gt|quot|#39);/g,s=RegExp(a.source);e.exports=r},function(e,t,n){var r=n(325),i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},o=r(i);e.exports=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(38),c=n(2),u=function(){function e(e,t,n,r){this.configurationUtil=e,this.dateUtils=t,this.$translate=n,this.savedSearches=r,this.preFilterMap={pfilter:"material_type",lang:"language",creationdate:"publication_date",dr_s:"DateRangeStart",dr_e:"DateRangeEnd",rtype:"material_type"},this.prefixCodesForTypes={material_type:"search-advanced.mediaType.option.",language:"search-advanced.language.option.",publication_date:"",DateRangeStart:"search-advanced.DateRange.label.",DateRangeEnd:"search-advanced.DateRange.label."}}return e.prototype.convertDate=function(e){return this.dateUtils.convertIlsDateStringToPrimoDateString(e)},e.prototype.decodeString=function(e){return decodeURI(e)},e.prototype.getPfilterMap=function(e){return this.preFilterMap[e]},e.prototype.getPrefixCodeAccordingToType=function(e){return this.prefixCodesForTypes[e]},e.prototype.defTrans=function(e){var t,n=this.decodeString(e.split(",")[2]);if("tlevel"===e.split(",")[0])t="facets.facet.tlevel."+n;else{if("searchcreationdate"===e.split(",")[0])return this.decodeString(e.split(",")[2]).slice(0,-1)+"-"+this.decodeString(e.split(",")[3]).slice(1);t="facets.facet.facet_"+e.split(",")[0]+"."+n}var r=this.$translate.instant(t);return r===t?n:r},e.prototype.facetNameTransfer=function(e){return"searchcreationdate"===e.split(",")[0]?"creationdate":e.split(",")[0]},e.prototype.isPrimoVELocalFacet=function(e){return!(!e.split(",")[0].startsWith("lds")||"suprima"!==this.configurationUtil.getBackendSystem())},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({directives:[],providers:[],selector:"prm-saved-query-filter",templateUrl:"components/search/searchResult/savedQueriesList/savedQueryFilter/saved-query-filter.html",inputs:["item"]}),o(2,a.Inject("$translate")),o(3,a.Inject("savedSearches")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof s.DateUtils&&s.DateUtils)&&n||Object,Object,Object])],e);var t,n}();t.PrmSavedQueryFilter=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(38),c=n(94),u=n(62),l=n(10),f=n(152),p=n(2),d=n(6),h=n(1),m=(n(117),n(3)),g=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f){this.dateUtils=e,this.savedQueriesService=t,this.searchHistoryService=n,this.savedSearches=r,this.$mdToast=i,this.$translate=o,this.filterService=a,this.addQueryToSavedSearchesService=s,this.userSessionManagerService=c,this.configurationUtil=u,this.primolyticsService=l,this.restBaseURLs=f,this.preFilterMap={pfilter:"material_type",lang:"language",creationdate:"publication_date",dr_s:"DateRangeStart",dr_e:"DateRangeEnd"},this.prefixCodesForTypes={material_type:"search-advanced.mediaType.option.",language:"search-advanced.language.option.",publication_date:"",DateRangeStart:"search-advanced.DateRange.label.",DateRangeEnd:"search-advanced.DateRange.label."}}return e.prototype.convertDate=function(e){if(this.isSearchHistory)try{var t=/(\d{2})\/(\d{1,2})\/(\d{4}) (\d{2}):(\d{2}):(\d{2})/.exec(e),n=new Date(t[3],t[2]-1,t[1],t[4],t[5],t[6]),r=this.filterService("date")(n,this.dateUtils.primoLongDateFormat);return r}catch(t){return console.log("Cannot format date ["+e+"] with formate:"+this.dateUtils.primoLongDateFormat),console.error(t),e}return this.dateUtils.convertIlsDateStringToPrimoDateString(e)},e.prototype.decodeString=function(e){return decodeURI(e)},e.prototype.getPfilterMap=function(e){return this.preFilterMap[e]},e.prototype.getPrefixCodeAccordingToType=function(e){return this.prefixCodesForTypes[e]},e.prototype.removeSearch=function(e){var t=this;this.savedQueriesService.removeSearch(e).then(function(e){console.log("entire res:"+JSON.stringify(e)),t.savedQueriesService.getItemsFromApi()},function(e){console.log("get searches failed: ",e)})},e.prototype.updateAlert=function(e,t){var n=this;void 0===t&&(t="");var r=e.ID,i=e.alert?0:1;i?this.setAlertBeacon():this.unsetAlertBeacon(),this.savedQueriesService.updateAlerts(e,t).then(function(t){if(console.log("entire res:"+JSON.stringify(t)),e.alert=!e.alert,e.email=t,i){var o='<prm-add-alert-toast [id]="ctrl.searchId" [add-mode]="ctrl.addMode"></prm-add-alert-toast>';n.$mdToast.show({controllerAs:"ctrl",controller:function(){this.searchId=r,this.addMode=!1},hideDelay:8e3,position:"top right",template:o}).then(function(){n.addQueryToSavedSearchesService.onToastClose()})}},function(e){console.log("get searches failed: ",e)})},e.prototype.createRSS=function(e){var t=e.ID,n=e.query.split(",")[2];n.split("%20").length>9&&(n=n.split("%20").slice(0,9).join("%20"));var r=this.restBaseURLs.rss+"?rssId="+t+"&queryTerm="+e.query.split(",")[2]+"&vid="+h.getVid()+"&amp;ver=2_1_4",i=document.getElementById("RRSFORM");i.action=r;var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","sr"),o.setAttribute("value",e.sr),i.appendChild(o),o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name","encCtxt"),o.setAttribute("value",e.encCtxt),i.appendChild(o),i.submit(),console.log(e)},e.prototype.setAlertBeacon=function(){},e.prototype.unsetAlertBeacon=function(){},e.prototype.successRssAction=function(e){console.log(e),console.log("Rss successfully sent")},e.prototype.failedRssAction=function(e){console.log("Rss call failed"),console.log("Event:"+event),console.log(e)},e.prototype.getSavedQueriesHeader=function(){if(this.itemlist){var e={idx_0:this.isSearchHistory?this.searchHistoryService.totalItems.length:this.savedQueriesService.totalItems.length};return this.$translate.instant("nui.favorites.search.items",e)}},e.prototype.getCheckedItems=function(){return this.itemlist?this.itemlist.filter(function(e){return e.checked}):[]},e.prototype.isAllChecked=function(){return!!this.itemlist&&this.itemlist.length===this.getCheckedItems().length},e.prototype.selectAllToggle=function(){if(this.isAllChecked())for(var e=0,t=this.itemlist;e<t.length;e++){var n=t[e];n.checked=!1}else for(var r=0,i=this.itemlist;r<i.length;r++){var n=i[r];n.checked=!0}},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},e.prototype.isLoggedIn=function(){return this.userName().length>0},e.prototype.removeSearchHistoryItem=function(e){var t=this;this.searchHistoryService.removeSearchHistoryItem(e).then(function(e){t.searchHistoryService.setTotalItems(e),t.searchHistoryService.refreshItems()})},e.prototype.saveSearchHistoryItemToSavedSearches=function(e){this.searchHistoryService.saveSearchHistoryItemToSavedSearches(e)},e.prototype.removeSearchHistoryItemFromSavedSearches=function(e){this.searchHistoryService.removeSearchHistoryItemFromSavedSearches(e)},e.prototype.nextResults=function(){this.isSearchHistory?this.searchHistoryService.nextResults():this.savedQueriesService.nextResults()},e.prototype.hasNextResults=function(){return this.isSearchHistory?this.searchHistoryService.hasNextResults():this.savedQueriesService.hasNextResults()},e.prototype.isSearchHistoryItemInSavedSearches=function(e){return this.searchHistoryService.isSearchHistoryItemInSavedSearches(e)},e.prototype.isDisplayAlert=function(e){var t=!0;if(this.configurationUtil.isSuprima()){var n=e.scope,r=this.configurationUtil.getScopesObj(n),i=m(r,"[0].locations");if(i){var o=i.split(",");(1===o.length&&(o.includes("EbscoLocal")||o.includes("WorldCatLocal"))||2===o.length&&o.includes("EbscoLocal")&&o.includes("WorldCatLocal"))&&(t=!1)}}return t},e.prototype.getFieldLabel=function(e){return this.$translate.instant("search-advanced.scope.option.nui.advanced.index."+e)},r([a.Input(),i("design:type",Object)],e.prototype,"itemlist",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isSearchHistory",void 0),r([d.beacon({p:"rssSubscription",op:"click"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"createRSS",null),r([d.beacon({p:"myAccount",op:"setAlert"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"setAlertBeacon",null),r([d.beacon({p:"myAccount",op:"unsetAlert"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"unsetAlertBeacon",null),e=r([a.Component({selector:"prm-saved-queries-list",templateUrl:"components/search/searchResult/savedQueriesList/saved-queries-list.html"}),o(3,a.Inject("savedSearches")),o(4,a.Inject("$mdToast")),o(5,a.Inject("$translate")),o(6,a.Inject("$filter")),o(11,a.Inject("restBaseURLs")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.DateUtils&&s.DateUtils)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SavedQueriesService&&c.SavedQueriesService)&&n||Object,"function"==typeof(g="undefined"!=typeof f.SearchHistoryService&&f.SearchHistoryService)&&g||Object,Object,Object,Object,Object,"function"==typeof(y="undefined"!=typeof u.AddQueryToSavedSearchesService&&u.AddQueryToSavedSearchesService)&&y||Object,"function"==typeof(v="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&v||Object,"function"==typeof(b="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&b||Object,"function"==typeof(S="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&S||Object,Object])],e);var t,n,g,y,v,b,S}();t.PrmSavedQueriesList=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(33),c=n(4),u=n(1),l=n(20),f=n(8),p=n(19),d=n(237),h=n(45),m=n(684),g=(n(687),5),y=function(){function e(e,t,n,r,i,o,s,u,l,f){var p=this;this.smoothScrollUtil=e,this.$stateParams=t,this.$timeout=n,this.$translate=r,this.$scope=i,this.$element=o,this.$state=s,this.changeLangService=u,this.mediaQueries=l,this.pageNavMenuService=f,this.showNextButtonPredicate=function(){return!1},this.showPrevButtonPredicate=function(){return!1},this.loadNextResultsEvent=new a.EventEmitter,this.loadPrevResultsEvent=new a.EventEmitter,this.isOpen=!1,this.selectedMode="md-fling",this.expandDirection="right",this.availablePages=[],this.SEARCH_STATE=c.STATE_NAMES.SEARCH,r(["nui.brief.results.loadMore","link.title.results.next"]).then(function(e){p.loadMoreResultText=e["nui.brief.results.loadMore"],p.goToNextPageText=e["link.title.results.next"]})}return e.prototype.ngOnInit=function(){var e=this;this.PAGE_SIZE=u.getResultsBulkSize(),this.initPageList(),this.$scope.$watch(function(){return e.isOpen},function(t,n){e.unfocusActionButtons()})},e.prototype.initPageList=function(){var e=this.$stateParams.offset?this.$stateParams.offset:0;this.startPage=Math.floor(e/this.PAGE_SIZE)+1;var t=this.startPage+this.numOfLoadedPages-1,n=Math.floor(g/2),r=Math.min(t-n+1,n),i=n+(n-r);r+=n-Math.min(this.maxPage-t,n),this.availablePages=m(Math.max(t-r,1),Math.min(t+i,this.maxPage)+1)},e.prototype.unfocusActionButtons=function(){if(!this.isOpen&&this.$element)for(var e=this.$element[0].querySelectorAll("md-fab-actions a"),t=0,n=e;t<n.length;t++){var r=n[t];r.setAttribute("tabindex","-1")}},e.prototype.getPageList=function(){return this.facetToLeft?this.availablePages.slice().reverse():this.availablePages},e.prototype.getNextPage=function(e){e.preventDefault();var t=this.startPage+this.numOfLoadedPages-1;this.currentPage<t&&document.querySelector("#searchResultPage"+(this.currentPage+1))?this.jumpToPage(this.currentPage+1,e):this.loadNextResultsEvent.emit(null)},e.prototype.jumpToPage=function(e,t){return this.pageNavMenuService.needToUpdatePivInSafari=!1,"browse"===this.mode?void t.preventDefault():void(document.querySelector("#searchResultPage"+e)&&(t.preventDefault(),this.smoothScrollUtil.scrollTo("searchResultPage"+e,null,null)))},e.prototype.updatePivInSafari=function(){this.pageNavMenuService.needToUpdatePivInSafari=!!p.isBrowserSafari()},e.prototype.getPageLinkParams=function(e){var t=h(this.$stateParams);return t.offset=(e-1)*this.PAGE_SIZE,t.came_from="pagination_"+this.currentPage+"_"+e,t},e.prototype.onClickSpeedDial=function(){this.isClickEvent=!0,this.$timeout.cancel(this.closeTimeout)},e.prototype.onTriggerButtonFocus=function(e){this.isOpen=!0},e.prototype.onActionButtonFocus=function(){this.$timeout.cancel(this.closeTimeout)},e.prototype.onBlur=function(){var e=this;this.closeTimeout=this.$timeout(function(){e.isOpen=!1},100)},e.prototype.isLastLoadedPage=function(e){return e===this.startPage+this.numOfLoadedPages-1},e.prototype.isFirstLoadedPage=function(e){return e===this.startPage},e.prototype.getNextPageButtonText=function(){return this.isLastLoadedPage(this.currentPage)?this.loadMoreResultText:this.goToNextPageText},e.prototype.getPageWidgetDirection=function(){var e=window.getComputedStyle(this.$element[0].children[0]).direction,t=this.$element.attr("dir");return"rtl"===this.changeLangService.direction||"rtl"===t||"rtl"===e?"left":"right"},e.prototype.throwPrevResultsEvent=function(){this.loadPrevResultsEvent.emit(null)},Object.defineProperty(e.prototype,"maxPage",{get:function(){return Math.ceil(this.numOfResults/this.PAGE_SIZE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateName",{get:function(){return this.$state.current.name},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Number)],e.prototype,"currentPage",void 0),
r([a.Input(),i("design:type",Number)],e.prototype,"numOfResults",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"numOfLoadedPages",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"showComponents",void 0),r([a.Input(),i("design:type",String)],e.prototype,"mode",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"facetToLeft",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"showNextButtonPredicate",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"showPrevButtonPredicate",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"loadNextResultsEvent",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"loadPrevResultsEvent",void 0),e=r([a.Component({selector:"prm-page-nav-menu",templateUrl:"components/search/searchResult/searchResultList/pageNavMenu/page-nav-menu.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$timeout")),o(3,a.Inject("$translate")),o(4,a.Inject("$scope")),o(5,a.Inject("$element")),o(6,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SmoothScrollUtil&&s.SmoothScrollUtil)&&t||Object,Object,Object,Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof l.ChangeLangService&&l.ChangeLangService)&&n||Object,"function"==typeof(y="undefined"!=typeof f.MediaQueries&&f.MediaQueries)&&y||Object,"function"==typeof(v="undefined"!=typeof d.PageNavMenuService&&d.PageNavMenuService)&&v||Object])],e);var t,n,y,v}();t.PrmPageNavMenu=y},function(e,t,n){var r=n(685),i=r();e.exports=i},function(e,t,n){function r(e){return function(t,n,r){return r&&"number"!=typeof r&&o(t,n,r)&&(n=r=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),r=void 0===r?t<n?1:-1:a(r),i(t,n,r,e)}}var i=n(686),o=n(87),a=n(307);e.exports=r},function(e,t){function n(e,t,n,o){for(var a=-1,s=i(r((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++a]=e,e+=n;return c}var r=Math.ceil,i=Math.max;e.exports=n},function(e,t,n){function r(e){var t=null==e?0:e.length;return t?i(e,1,t):[]}var i=n(105);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(66),c=n(3),u=n(27),l=n(55),f=n(11),p=n(14),d=n(48),h=n(236),m=n(6),g=n(7),y=n(19),v=n(1),b=n(33),S=n(4),_=n(22),O=n(180),T=n(237),E=n(78),w=n(28),I=n(16),R=n(150),P=n(8),j=n(2),A=n(90),C=n(110),$=n(115),D=n(160),L=n(15),k=n(132),M=n(88),x=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,d,h,m,g,b,S,_,O,T,E,w,I,R,P,j,A){var C=this;this.briefResultService=e,this.searchService=t,this.searchFieldsService=n,this.facetService=r,this.pnxUtil=i,this.favoritesService=o,this.endlessScrollingUtil=a,this.primolyticsService=s,this.jwtUtilService=c,this.databasesService=u,this.mediaQueries=l,this.$stateParams=f,this.$timeout=p,this.$translate=d,this.searchErrorMessageService=h,this.smoothScrollUtil=m,this.$scope=g,this.$state=b,this.journalsService=S,this.newspapersService=_,this.databasesCategorizeService=O,this.$location=T,this.pageNavMenuService=E,this.searchBoxIcons=w,this.physicalBestOfferService=I,this.configurationUtil=R,this.ngrsService=P,this.orgListService=j,this.organizationOrFacetService=A,this._currentPage=0,this.expandedItemIndex=-1,this.initialOffset=0,this.isIe=y.isBrowserIE(),this.PAGE_SIZE=v.getResultsBulkSize(),this._totalResultVersion=0,this.wasInFullDisplay=!1,this.scopes=v.getScopeList(),this.testisOpen=!1,this.showTimer=!1,this.listBottomSpacer=!1,this.toggleMode=!1,this.showPcAvailabilityForScope=k(function(){var e=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"],t=C.$stateParams.search_scope;return M(Object.keys(e),function(n){return"AVAILABLE_ONLY"===e[n][t]})}),this.showPcAvailabilityForScopeWithNFT=k(function(){var e=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"],t=C.$stateParams.search_scope;return M(Object.keys(e),function(n){return"AVAILABLE_ONLY"===e[n][t]||"INCLUDE_NO_FULL_TEXT"===e[n][t]})}),this.$timeout(function(){C.showTimer=!0},2e3),this.briefResultService=e,this.briefResultService.resetIsChosen(),this.briefResultService.buildJsonOdIdsAndPins(),t.getSearchObject()&&t.getSearchObject().offset&&(this.initialOffset=t.getSearchObject().offset-t.getSearchObject().offset%this.PAGE_SIZE),this.pageInView=Math.floor((this.$stateParams.offset||0)/this.PAGE_SIZE)+1,this.pageNavMenuService.needToUpdatePivInSafari=!1,this.isJournalCategories=this.setJournalCategoriesByConfiguration(),this.physicalBestOfferService.resetResultsObject(),this.ngrsService.resetNgrsVisibilityResponse()}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.itemlist},function(t,n){t&&t.forEach(function(t){"MetaLib"===t.context&&(e.pagingConfigutation={firstPage:!1,paging:!1})}),e._totalResultVersion=e.recordsNumberInludeFrbr}),this.enrichCategoriesTermTranslations()},Object.defineProperty(e.prototype,"indeterminateState",{get:function(){return!this.briefResultService.checkIfAllSelected()&&0!==this.briefResultService.getChosenRecords().length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryResultCode",{get:function(){return"db"==this.categoriesType?"dbcategories.results":"journal"==this.categoriesType?"nui.journalsearch.category.result":"result"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allIn",{get:function(){return!!this.briefResultService.checkIfAllSelected()},enumerable:!0,configurable:!0}),e.prototype.showFeaturedResults=function(e){return!!this.featuredResult&&(0!==this.itemlist.length&&(1==this.itemlist.length||2==this.itemlist.length&&1==e||2==e))},e.prototype.selectOrUnselectAll=function(){this.briefResultService.selectAll=!this.allIn,this.briefResultService.chooseAll()},e.prototype.enableToolBar=function(){this.briefResultService.enableOrDisableToolBar=!0,this.toggleMode=!0},e.prototype.disableToolBar=function(e){this.briefResultService.enableOrDisableToolBar=!1,this.toggleMode=!1},e.prototype.isFetchingAllItems=function(){return this.favoritesService.isFetchingAllItems},Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNewspapersSearch",{get:function(){return this.newspapersService.isNewspapersSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResultVersion",{get:function(){return this._totalResultVersion},enumerable:!0,configurable:!0}),e.prototype.firstInPage=function(e){return 0===e||e%this.itemsPerPage===0},e.prototype.shouleFeaturedResultsApear=function(){return!(0===this.itemlist.length||void 0===this.featuredResult||this.featuredResult.featuedResultsItems.length<4)},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.enrichCategoriesTermTranslations=function(){var e=this,t=this.categoryTerm,n=this.getDefaultTerm();this.$translate(t,[],"",n).then(function(t){e.categoryDisplayValue=t})},e.prototype.lastInPage=function(e){return e%this.itemsPerPage===this.itemsPerPage-1},e.prototype.calcPage=function(e){return 1+this.getItemOffset(e)/this.itemsPerPage},Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage+1},set:function(e){this._currentPage=e-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsPerPage",{get:function(){return this.PAGE_SIZE},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.searchInProgress},e.prototype.offset=function(){return this.searchService.getSearchObject().offset-this.searchService.getSearchObject().offset%this.PAGE_SIZE},e.prototype.from=function(){return this.offset()+1},e.prototype.to=function(){return this.searchService.getSearchObject().to},Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this.searchService.getSelectedItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagesBarFillersList",{get:function(){return this.searchService.getResultObject().images},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!s(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),e.prototype.isShowMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&Number(e.last)<e.total},e.prototype.isShowFetchMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&e.total<e.maxTotal},Object.defineProperty(e.prototype,"searchInfo",{get:function(){return this.searchService.getResultObject().info},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchString",{get:function(){return this.searchService.searchFieldsService._mainSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"didUMean",{get:function(){return this.searchService.getResultObject().didUMean},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlledVocabulary",{get:function(){return c(this,["searchInfo","controlledVocabulary"])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){var e=this.searchInfo;return e&&e.errorDetails?"controlled.voc.synonym"===this.searchInfo.errorDetails.errorCode?null:this.searchInfo.errorDetails.errorCode:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){var e=this.searchInfo;return e&&e.errorDetails?this.searchInfo.errorDetails.errorMessages:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"explainMessage",{get:function(){var e=this.searchInfo;return e&&e.explain?this.searchInfo.explain.errorMessages[0]:null},enumerable:!0,configurable:!0}),e.prototype.getLength=function(){var e=this.searchInfo;return e?e.total:2},Object.defineProperty(e.prototype,"totalItems",{get:function(){return this.getLength()},enumerable:!0,configurable:!0}),e.prototype.getItemAtIndex=function(e){return this.searchService.getItemAtIndex(e)},e.prototype.getNgRepeatItemId=function(e,t){return e.pnx.control.recordid[0]+"-"+t},e.prototype.showPin=function(e){return this.briefResultService.getShowPinForRecordId(e.pnx.control.recordid[0])},e.prototype.hasNextResults=function(){return this.searchService.needToGetNextResults()},e.prototype.nextResults=function(){this.endlessScrollingUtil.isSearchEndlessScrollingEnabled&&(this.searchService.needToGetNextResults()?this.callSearchServiceNextResultsWithBeacon():this.callSearchServiceNextResults())},e.prototype.jumpToPage=function(e){var t=e-1;this.searchService.jumpToPage(t),this._currentPage=t},e.prototype.callSearchServiceNextResultsWithBeacon=function(){this.callSearchServiceNextResults()},e.prototype.callSearchServiceNextResults=function(){var e=this,t=this.searchService.nextResults(this.isIe);t&&!this.isIe&&t.then(function(){var t=e.$stateParams.offset||0,n=Math.floor(t/e.PAGE_SIZE)+1,r=n+e.numOfLoadedPages-1;e.$timeout(function(){e.smoothScrollUtil.scrollTo("searchResultPage"+r,null,null)},0,!1)})},Object.defineProperty(e.prototype,"numOfLoadedPages",{get:function(){return this.searchService.numOfLoadedResultBulks},enumerable:!0,configurable:!0}),e.prototype.getPlaceHolders=function(){return{idx_0:this.favoritesService.getTotalItems()}},e.prototype.getPlaceHoldersForFilter=function(){return{idx_0:this.favoritesService.getCountRecords(),idx_1:this.favoritesService.getTotalItems()}},e.prototype.selectAll=function(){this.briefResultService.chooseAll()},e.prototype.isExpanded=function(e){return this.expandedItemIndex===e},e.prototype.setExpandedItem=function(e,t){e.expand?(this.expandedItemHeight=e.target.parentNode.offsetHeight+"px",this.expandedItemIndex=t,this.toggleListBottomSpacer(!0)):(this.expandedItemHeight="",this.expandedItemIndex=-1,this.toggleListBottomSpacer(!1))},e.prototype.toggleListBottomSpacer=function(e){this.listBottomSpacer=e},e.prototype.selectedItemHeight=function(){this.expandedItemHeight},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.links},enumerable:!0,configurable:!0}),e.prototype.getItemOffset=function(e){return this.isIe?this.offset()+e:this.initialOffset+e},e.prototype.getItemIndex=function(e){return this.getItemOffset(e)+1},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.shouldDisableSavingQuery=function(){var e=this.searchInfo;return!(!e||!e.errorDetails||e.errorDetails.errorCode!==this.searchErrorMessageService.tooManyClauses)},e.prototype.showPartialResultsWarning=function(){var e=this.searchInfo;return!(!e||!e.errorDetails||0==this.itemlist.length||e.errorDetails.errorCode!==this.searchErrorMessageService.blendedTimeout&&e.errorDetails.errorCode!==this.searchErrorMessageService.tooManyClauses&&e.errorDetails.errorCode!==this.searchErrorMessageService.notAllSlicesSearched)},e.prototype.onTopOfPageInView=function(e,t,n){var r=["/fulldisplay","/jfulldisplay","/npfulldisplay"];if(r.indexOf(this.$location.$$path)>=0)return void(this.wasInFullDisplay=!0);if(t){var i=n.viewportRect.height/2;if(n.elementRect.top<i)return void((this.pageInView!==e&&1!==e&&!this.wasInFullDisplay||this.needToUpdatePivInSafari)&&(this.pageInView=e));var o=this.$stateParams.offset||0,a=Math.floor(o/this.PAGE_SIZE)+1;this.pageInView!==a&&e===this.pageInView&&n.elementRect.top>i&&this.pageInView--,this.wasInFullDisplay=!1}},e.prototype.onBottomOfPageInView=function(e,t,n){},e.prototype.isCitationState=function(){return this.$state.current.name===S.STATE_NAMES.CITATION_TRAILS},e.prototype.isSearchState=function(){return this.$state.current.name===S.STATE_NAMES.SEARCH},e.prototype.isJournalSearchState=function(){return this.$state.current.name===S.STATE_NAMES.JOURNAL_SEARCH},e.prototype.isBrowsHeaderResults=function(){return"browse"===this.$stateParams.mode},e.prototype.notLocal=function(){return!this.searchService.IsScopeLocal()},e.prototype.shouldDisplayPagingWidget=function(){return this.$state.current.name===S.STATE_NAMES.SEARCH||this.$state.current.name===S.STATE_NAMES.JOURNAL_SEARCH||this.$state.current.name===S.STATE_NAMES.DB_SEARCH||this.$state.current.name===S.STATE_NAMES.CITATION_TRAILS||this.$state.current.name===S.STATE_NAMES.CITATION_CHAPTERS||this.$state.current.name===S.STATE_NAMES.NEWSPAPERS||this.$state.current.name===S.STATE_NAMES.ORGANIZATION_LIST},Object.defineProperty(e.prototype,"needToUpdatePivInSafari",{get:function(){return this.pageNavMenuService.needToUpdatePivInSafari},set:function(e){this.pageNavMenuService.needToUpdatePivInSafari=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageInView",{get:function(){return this.pageNavMenuService.pageInView},set:function(e){this.pageNavMenuService.pageInView=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordsNumberInludeFrbr",{get:function(){if("browse"!=this.$stateParams.mode||this.briefResultService.isSuprima())return 0;var e=Number(this.$stateParams.docCount);return void 0==this.searchInfo?0:this.searchInfo.total>=e||this.inFrbrMode?0:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inFrbrMode",{get:function(){var e=this.$stateParams.facet;if(void 0==e)return!1;if(e instanceof Array){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.startsWith("frbrgroupid,"))return!0}return!1}return!!e.startsWith("frbrgroupid,")},enumerable:!0,configurable:!0}),e.prototype.displayNewspapersLink=function(){return this.newspapersService.displayNewspapersLink()},e.prototype.getDBParamTerm=function(){var e;"db"==this.categoriesType&&(e=this.$stateParams.databases),"journal"==this.categoriesType&&(e=this.$stateParams.journals),e||(e=this.$stateParams.query);var t=e.substring(e.indexOf(",")+1);return t&&t.length>0?t:e},e.prototype.getDefaultTerm=function(){var e=this.getDBParamTerm(),t=e.split(this.databasesCategorizeService.DELIMITER);return t&&t.length>0?"journal"==this.categoriesType?"nui.journalsearch.category.lvl"+t.length+"."+t[t.length-1]:t[t.length-1]:e},e.prototype.getDynamicTop=function(){var e=document.getElementById("errorCodeMsg").offsetHeight;return e+6+"px"},Object.defineProperty(e.prototype,"categoryTerm",{get:function(){return"journal"==this.categoriesType?this.getDefaultTerm():"db"==this.categoriesType?"dbcategories."+this.databasesCategorizeService.getTName(this.getDBParamTerm()):this.databasesCategorizeService.getTName(this.getDBParamTerm())},enumerable:!0,configurable:!0}),e.prototype.isCategoriesSearch=function(){return this.databasesCategorizeService.isSearchFromCategoryTree()},e.prototype.isChaptersAndReviewsState=function(){return this.$state.current.name==S.STATE_NAMES.CITATION_CHAPTERS},e.prototype.isNgrsSearch=function(){var e=this.scopes.map(function(e){return e.tab});return!!(window.appConfig["system-configuration"].ngrs_enabled&&e.indexOf("RAPIDXL")>-1)&&(this.journalsService.isJournalSearch()&&!this.databasesCategorizeService.isSearchFromCategoryTree())},e.prototype.closeMobileFacet=function(e){this.showMobileFacets=!0},Object.defineProperty(e.prototype,"showMobileFacets",{get:function(){return this.searchService.showMobileFacets},set:function(e){this.searchService.showMobileFacets=e},enumerable:!0,configurable:!0}),e.prototype.hasSearchResults=function(){var e=this.searchResults;return L(e)&&e.length>0},e.prototype.isJournalSearch=function(){return this.$state.current.name===S.STATE_NAMES.JOURNAL_SEARCH},e.prototype.isDBSearch=function(){return this.databasesService.isDBSearch()},Object.defineProperty(e.prototype,"isPrimoVE",{get:function(){return"suprima"===this.configurationUtil.getBackendSystem()},enumerable:!0,configurable:!0}),e.prototype.setJournalCategoriesByConfiguration=function(){return c(v.getAttributesMap(),["journalCategoriesTree"],!0)},e.prototype.isSearchFromLetters=function(){return this.databasesCategorizeService.isSearchFromLetters()},e.prototype.isSearchFromCategoryTree=function(){return this.databasesCategorizeService.isSearchFromCategoryTree()},e.prototype.isToolBareEnable=function(){return this.briefResultService.enableOrDisableToolBar},Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.resultsExists?this.searchService.getResultObject().info.total:0},enumerable:!0,configurable:!0}),e.prototype.isOrgListSearch=function(){return this.orgListService.isOrgListSearch()},e.prototype.isShowingOrganizationTree=function(){return this.organizationOrFacetService.isOrganizationTree},e.prototype.showFacetSection=function(){if(this.$stateParams.journals||this.$stateParams.databases){var e=this.$stateParams.journals||this.$stateParams.databases;return"letter"!=e.split(",")[0]}return!this.isOrgListSearch()||!this.isShowingOrganizationTree()},e.prototype.isSearchFromBarDBorJournals=function(){return this.databasesCategorizeService.isSearchFromBarDBorJournals()},r([a.Input(),i("design:type",String)],e.prototype,"categoriesType",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"itemlist",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFavorites",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isSavedQuery",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isSearchHistory",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"links",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"facetToLeft",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"featuredResult",void 0),r([a.Input(),i("design:type",String)],e.prototype,"query",void 0),r([m.beacon({p:"brief",op:"next"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"callSearchServiceNextResultsWithBeacon",null),e=r([a.Component({selector:"prm-search-result-list",templateUrl:"components/search/searchResult/searchResultList/search-result-list.html"}),o(11,a.Inject("$stateParams")),o(12,a.Inject("$timeout")),o(13,a.Inject("$translate")),o(16,a.Inject("$scope")),o(17,a.Inject("$state")),o(21,a.Inject("$location")),o(23,a.Inject("searchBoxIcons")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.BriefResultService&&u.BriefResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof f.SearchService&&f.SearchService)&&n||Object,"function"==typeof(x="undefined"!=typeof p.SearchFieldsService&&p.SearchFieldsService)&&x||Object,"function"==typeof(F="undefined"!=typeof l.FacetService&&l.FacetService)&&F||Object,"function"==typeof(U="undefined"!=typeof E.PnxUtil&&E.PnxUtil)&&U||Object,"function"==typeof(B="undefined"!=typeof d.FavoritesService&&d.FavoritesService)&&B||Object,"function"==typeof(N="undefined"!=typeof h.EndlessScrollingUtil&&h.EndlessScrollingUtil)&&N||Object,"function"==typeof(q="undefined"!=typeof m.PrimolyticsService&&m.PrimolyticsService)&&q||Object,"function"==typeof(H="undefined"!=typeof g.JwtUtilService&&g.JwtUtilService)&&H||Object,"function"==typeof(V="undefined"!=typeof w.DatabasesService&&w.DatabasesService)&&V||Object,"function"==typeof(Y="undefined"!=typeof P.MediaQueries&&P.MediaQueries)&&Y||Object,Object,Object,Object,"function"==typeof(z="undefined"!=typeof O.SearchErrorMessageService&&O.SearchErrorMessageService)&&z||Object,"function"==typeof(G="undefined"!=typeof b.SmoothScrollUtil&&b.SmoothScrollUtil)&&G||Object,Object,Object,"function"==typeof(W="undefined"!=typeof _.JournalsService&&_.JournalsService)&&W||Object,"function"==typeof(Q="undefined"!=typeof I.NewspapersService&&I.NewspapersService)&&Q||Object,"function"==typeof(J="undefined"!=typeof R.DatabasesCategorizeService&&R.DatabasesCategorizeService)&&J||Object,Object,"function"==typeof(K="undefined"!=typeof T.PageNavMenuService&&T.PageNavMenuService)&&K||Object,Object,"function"==typeof(X="undefined"!=typeof A.PhysicalBestOfferService&&A.PhysicalBestOfferService)&&X||Object,"function"==typeof(Z="undefined"!=typeof j.ConfigurationUtil&&j.ConfigurationUtil)&&Z||Object,"function"==typeof(ee="undefined"!=typeof C.NgrsService&&C.NgrsService)&&ee||Object,"function"==typeof(te="undefined"!=typeof $.OrgListCategorizeService&&$.OrgListCategorizeService)&&te||Object,"function"==typeof(ne="undefined"!=typeof D.OrganizationOrFacetToggleService&&D.OrganizationOrFacetToggleService)&&ne||Object])],e);var t,n,x,F,U,B,N,q,H,V,Y,z,G,W,Q,J,K,X,Z,ee,te,ne}();t.PrmSearchResultList=x},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(14),u=n(55),l=n(6),f=n(16),p=function(){function e(e,t,n,r,i,o){this.configurationUtil=e,this.searchFieldsService=t,this.facetService=n,this.primolyticsService=r,this.$stateParams=i,this.newspapersService=o,this.myOptions=this.configurationUtil.getBriefResultConfiguration().sortby.split(",").filter(function(e,t,n){return"popularity"!==e}).map(this.createSortByMapping),this.newspapersService.isNewspapersSearch()&&(this.myOptions=this.myOptions.filter(function(e){return["rank","date","date_d","date_a","date2"].indexOf(e.value)!==-1}));var a=this.$stateParams.journals||this.$stateParams.databases;a&&(this.myOptions=[],"any"===a.split(",")[0]&&(this.myOptions.push(this.createSortByMapping("rank")),this.myOptions.push(this.createSortByMapping("title")))),this.sortBy||(this.sortBy=this.myOptions[0].value)}return Object.defineProperty(e.prototype,"options",{get:function(){return this.myOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this.searchFieldsService.sortby},set:function(e){this.searchFieldsService.sortby=e},enumerable:!0,configurable:!0}),e.prototype.createSortByMapping=function(e){return{value:e,text:e}},e.prototype.onSortChange=function(){this.facetService.facetSearch({sortby:this.sortBy,came_from:"sort"})},r([l.beacon({p:"sort"}),i("design:type",Object),i("design:paramtypes",[Object])],e.prototype,"sortBy",null),e=r([a.Component({selector:"prm-search-result-sort-by",templateUrl:"components/search/searchResult/searchResultSortBy/searchResultSortBy.html"}),o(4,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&n||Object,"function"==typeof(p="undefined"!=typeof u.FacetService&&u.FacetService)&&p||Object,"function"==typeof(d="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&d||Object,Object,"function"==typeof(h="undefined"!=typeof f.NewspapersService&&f.NewspapersService)&&h||Object])],e);var t,n,p,d,h}();t.SearchResultSortBy=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(26),c=n(95),u=n(6),l=function(){function e(e,t,n,r){this.timesCitedService=e,this.$translate=t,this.primolyticsService=r,this.availabilityLineIcons=n}return Object.defineProperty(e.prototype,"citedData",{get:function(){return this.timesCitedService.citedData},enumerable:!0,configurable:!0}),e.prototype.citedLink=function(e){return e.citedLink},e.prototype.extensionVal=function(e){return e.extensionVal},e.prototype.recordLink=function(e){return e.recordLink},e.prototype.vendorLogo=function(e){return e.citedRedId.startsWith("scopus")?"img/logo_scopus_s.png":"img/svg/logo_wos_s.svg"},e.prototype.isTimesCitedExists=function(){return void 0!=this.timesCitedService.citedData},e.prototype.scopOrWosTrans=function(e){return e.citedRedId.startsWith("scopus")?this.$translate.instant("citationsTab.pc_citation_scopus_label"):this.$translate.instant("citationsTab.pc_citation_wos_label")},e.prototype.reportBeacon=function(){this.doBeacon(this.item)},e.prototype.doBeacon=function(e){},e.prototype.getAraiaLabelForTimeCited=function(e){return this.$translate.instant("citationsTab.viewCitations",{idx_0:this.extensionVal(e)})},e.prototype.getTimeCitedType=function(e){return void 0!=e&&e.citedRedId.startsWith("scopus")?this.$translate.instant("citationsTab.pc_citation_scopus_label"):this.$translate.instant("citationsTab.pc_citation_wos_label")},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return this.timesCitedService.shouldDisplayTimesCited},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([u.beacon({p:"linksService",op:"TimesCited",item:"item"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"doBeacon",null),e=r([a.Component({selector:"prm-times-cited",templateUrl:"components/search/timesCited/times-cited.html"}),o(1,a.Inject("$translate")),o(2,a.Inject("availabilityLineIcons")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.TimesCitedService&&c.TimesCitedService)&&n||Object,Object,Object,"function"==typeof(l="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&l||Object])],e);var t,n,l}();t.PrmTimesCited=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(1),u=n(145),l=n(2),f=n(6),p=function(){function e(e,t,n,r,i,o){this.$state=e,this.actionIcons=t,this.$interval=n,this.scrollService=r,this.configurationUtil=i,this.primolyticsService=o,this.LEFT="LEFT",this.RIGHT="RIGHT",this.nextBeaconCalledOnce=!1,this.previousBeaconCalledOnce=!1,this.KEY_CODE={LEFT_ARROW:37,RIGHT_ARROW:39}}return e.prototype.ngOnInit=function(){this.offseterElem=document.querySelector(".horizontal-content-scroller"),this.featuredContent=document.querySelector(".horizontal-content-scroll-offseter"),this.featuredItems=this.offseterElem.getElementsByTagName("prm-featured-result-item")},Object.defineProperty(e.prototype,"leftArrowShowing",{get:function(){return this.scrollService.isShowLeftArrow(this.offseterElem)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowRightArrow",{get:function(){return this.scrollService.isShowRightArrow(this.offseterElem)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredResultItems",{get:function(){return this.featuredResults.featuedResultsItems},enumerable:!0,configurable:!0}),e.prototype.searchParam=function(){var e="all_items"===this.featuredResults.resourceType?void 0:"advanced",t=this.configurationUtil.isSuprima()?"rtype":"pfilter",n=void 0!=e?t+",exact,"+this.featuredResults.resourceType:void 0,r=e?",AND":"";return{tab:this.featuredResults.moreTab,search_scope:this.featuredResults.searchScopeSet,vid:c.getVid(),mode:e,pfilter:e?n+r:void 0,query:this.$state.params.query+r,came_from:"featuredResults"}},Object.defineProperty(e.prototype,"isSuprima",{get:function(){return this.configurationUtil.isSuprima()},enumerable:!0,configurable:!0}),e.prototype.searchLink=function(){return this.$state.href(s.STATE_NAMES.SEARCH,this.searchParam(),{lossy:!0})},e.prototype.scrollContent=function(e){this.sendScrollDirectionBeacon("left"===e?this.LEFT:this.RIGHT),this.scrollService.smoothScrollClick(e,this.offseterElem,this.featuredItems)},Object.defineProperty(e.prototype,"tab",{get:function(){return this.featuredResults.moreTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.featuredResults.searchScopeSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.featuredResults.barTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptor",{get:function(){return this.featuredResults.searchLocations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.featuredResults.resourceType},enumerable:!0,
configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.featuredResults.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalHits",{get:function(){return this.featuredResults.totalHits},enumerable:!0,configurable:!0}),e.prototype.handleKeyUp=function(e){var t=this.KEY_CODE;switch(e.keyCode){case t.LEFT_ARROW:this.sendScrollDirectionBeacon(this.LEFT);break;case t.RIGHT_ARROW:this.sendScrollDirectionBeacon(this.RIGHT)}},e.prototype.sendDisplayAllResultsBeacon=function(){},e.prototype.sendScrollDirectionBeacon=function(e){this.previousBeaconCalledOnce||e!==this.LEFT?this.nextBeaconCalledOnce||e!==this.RIGHT||(this.sendNextInFeaturedResultsBeacon(),this.nextBeaconCalledOnce=!0):(this.sendPreviousInFeaturedResultsBeacon(),this.previousBeaconCalledOnce=!0)},e.prototype.sendPreviousInFeaturedResultsBeacon=function(){},e.prototype.sendNextInFeaturedResultsBeacon=function(){},r([a.Input(),i("design:type",Object)],e.prototype,"featuredResults",void 0),r([f.beacon({p:"featuredResults",op:"displayAllResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendDisplayAllResultsBeacon",null),r([f.beacon({p:"featuredResults",op:"previousInFeaturedResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendPreviousInFeaturedResultsBeacon",null),r([f.beacon({p:"featuredResults",op:"nextInFeaturedResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendNextInFeaturedResultsBeacon",null),e=r([a.Component({selector:"prm-featured-results",templateUrl:"components/search/searchResult/featuredResults/featured-results.html"}),o(0,a.Inject("$state")),o(1,a.Inject("actionIcons")),o(2,a.Inject("$interval")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof u.ScrollService&&u.ScrollService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&n||Object,"function"==typeof(p="undefined"!=typeof f.PrimolyticsService&&f.PrimolyticsService)&&p||Object])],e);var t,n,p}();t.PrmFeaturedResults=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(1),u=n(2),l=n(6),f=function(){function e(e,t,n){this.$state=e,this.configurationUtil=t,this.primolyticsService=n,this.featuredResultItem.thumbnailLinks=this.featuredResultItem.thumbnailLinks.map(function(e){var t={linkURL:e};return t})}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"isThumbnails",{get:function(){return"thumbnails"===this.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatType",{get:function(){return"image"===this.featuredResultItem.type?"image":"article"===this.featuredResultItem.type?"article":"book"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"picOfImageItem",{get:function(){return this.featuredResultItem.thumbnailLinks[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEllipsis",{get:function(){var e=this.isThumbnails?3:10;return this.featuredResultItem.title.split(" ").length>e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var e=this.featuredResultItem.title?this.featuredResultItem.title:"";return e+=this.featuredResultItem.nuiTitle&&this.featuredResultItem.nuiTitle!==this.featuredResultItem.title?"/"+this.featuredResultItem.nuiTitle:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLines",{get:function(){return this.getTextFromVal(this.featuredResultItem.generalData)},enumerable:!0,configurable:!0}),e.prototype.getTextFromVal=function(e){if(e.includes("$$Q")){var t=e.split("$$Q")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}if(e.includes("$$Z")){var t=e.split("$$Z")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}return e.includes("$$V")?this.getSubfieldFromVal(e,"$$V"):e},e.prototype.getFullDisplayStateParams=function(){return{docid:this.featuredResultItem.recordId,vid:c.getVid(),context:this.configurationUtil.isSuprima()?this.featuredResultItem.context:this.scope,search_scope:this.scope,adaptor:this.adaptor,tab:this.tab,query:this.$state.params.query,sortby:this.$state.params.sortby,offset:"0",lang:this.$state.params.lang,fromFeaturedResult:!0,originScope:this.$state.params.search_scope,originTab:this.$state.params.tab}},e.prototype.fullDisplayParam=function(){return this.$state.href(s.STATE_NAMES.FULL_DISPLAY,this.getFullDisplayStateParams(),{lossy:!0})},e.prototype.getImage=function(){return this.featuredResultItem.thumbnailLinks},Object.defineProperty(e.prototype,"recordId",{get:function(){return this.featuredResultItem.recordId},enumerable:!0,configurable:!0}),e.prototype.sendFeaturedResultsItemBeacon=function(e){},r([a.Input(),i("design:type",Object)],e.prototype,"featuredResultItem",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"adaptor",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"tab",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"scope",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"format",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"index",void 0),r([l.beacon({p:"featuredResults",op:"recordFeaturedResults"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendFeaturedResultsItemBeacon",null),e=r([a.Component({selector:"prm-featured-result-item",templateUrl:"components/search/searchResult/featuredResults/featured-result-item.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&n||Object])],e);var t,n}();t.PrmFeaturedResultItem=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.testBaseUrls=[{name:"schema",url:"searchSchemaGetters.jsp?func=getSchema"},{name:"utils",url:"jaguarLuceneUtils.jsp"}],this.explain=this.explain.replace(/\[COMMA\]/g,","),console.log(this.explain),this.parseUrlAttr(),this.determineLinks(),this.isNoResults()?this.lines=[]:this.isRecordExplain()?(this.lines=this.explain.split("@@@"),this.parseHeader(),this.parseEntries()):(this.lines=this.explain.split("[NEWLINE]"),this.lines=this.lines.slice(1)),this.isRecordIds()&&this.parseRecords(),this.isStored()&&this.parseFields()}return e.prototype.determineLinks=function(){var e=[];this.value.includes("explaintree")?e=[{name:"table",url:this.value.replace("explaintree","")}]:this.isRecordExplain()&&(e=[{name:"tree",url:this.value+"explaintree"}]),e=e.concat([{url:"lucene",name:"lucene"},{url:"nodb,jaguar_internal_src_id,100",name:"records"},{url:"dym",name:"did you mean"},{url:"nodb,all",name:"stored"},{url:"basis",name:"basis"},{url:"params",name:"params"}]),this.links=e},e.prototype.parseRecords=function(){this.records=[];for(var e=1;e<this.lines.length-1;e++)this.records.push(this.lines[e].split(",")[0]);this.hits=this.lines[this.lines.length-1]},e.prototype.parseFields=function(){for(var e={},t=1;t<this.lines.length-1;t++)for(var n=this.lines[t],r=n.split(","),i=0;i<r.length;i++){var o=r[i].split(":");o.length>1&&(o[0].includes(" ")||(";"==o[0][0]?e[o[0].substr(1)]=1:e[o[0]]=1))}this.fields=Object.keys(e).sort()},e.prototype.parseUrlAttr=function(){var e=window.location.href,t=e.indexOf("explain="),n=e.indexOf("&",t);n<0&&(n=e.length),this.value=e.substr(t).split("&")[0].split("qos_r_gr8")[1],this.baseUrl=e.substr(0,t-1)+e.substr(n)+"&explain=qos_r_gr8"},e.prototype.parseHeader=function(){var e=this.lines[0].replace(/]/g,"").split("[");this.header={record:e[1],score:e[2],place:e[3],index:e[4],id:e[5].split(" ")[0]}},e.prototype.parseEntries=function(){this.entries=[];for(var e=1;e<this.lines.length;e++){try{var t=this.lines[e].replace(/\/\/|;|,/g,"(").replace(/\[|\]|\)/g,""),n=t.split("("),r={};r.qType=n[0],r.boost="1";for(var i={spanNear:1,"":1},o=!1,a=1;a<n.length;a++){var s=n[a];if("spanNear"!=s){(s.startsWith(" true^")||s.startsWith(" false^"))&&(r.boost=s.split("^")[1].split(" ")[0]);var c=s.split("=");if(2==c.length)c[0].includes(":")&&(c[0]="tf"),c[0]=c[0].trim(),c[1]=c[1].trim(),isNaN(c[0])?isNaN(c[1])?r.tf=c[1].split(" ")[0]:r[c[0]]=c[1]:r[c[1]]=c[0];else{var u=n[a].split(":");if(2==u.length){r.field=u[0];var l=u[1].split("^");if(l[0].startsWith('"')){l[0].includes("~")&&(r.qType="SlopQuery");var f=l[0].substr(0,l[0].indexOf('"',2)+1);o&&"term"in r?f in i||(r.term+=", "+f):r.term=f,o&&(i[f]=1)}else{var f=l[0].split(" ")[0];o&&"term"in r?f in i||(r.term+=", "+f):"term"in r||(r.term=f),o&&(i[f]=1)}l.length>1&&(r.boost=l[1].split(" ")[0])}}}else r.qType="SpanNear",o=!0}}catch(e){console.log(e)}console.log(r),this.entries.push(r)}},e.prototype.getFields=function(){return this.fields},e.prototype.getRecords=function(){return this.records},e.prototype.getLinks=function(){return this.links},e.prototype.getEntries=function(){return this.entries},e.prototype.getLines=function(){return this.lines},e.prototype.getTestUrl=function(){return window.location.protocol+"//"+window.location.host+"/primo_library/libweb/test/"},e.prototype.isNoResults=function(){return"No Results"===this.explain},e.prototype.isStored=function(){return this.value.startsWith("nodb,all")},e.prototype.isParams=function(){return"params"===this.value},e.prototype.isRecordIds=function(){return this.value.startsWith("nodb,jaguar_internal_src_id,")},e.prototype.isRecordExplain=function(){return this.explain.length>20&&!this.explain.startsWith("[NOT_EXPLAIN]")},r([o.Input(),i("design:type",String)],e.prototype,"explain",void 0),e=r([o.Component({selector:"prm-search-explain",templateUrl:"components/search/searchResult/explain/search-explain.html"}),i("design:paramtypes",[])],e)}();t.PrmSearchExplain=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(3),c=function(){function e(e){this.journalLineIcons=e}return e.prototype.isOpenaccess=function(){return"free_for_read"===s(this.item,"pnx.display.oa[0]")||"true"===s(this.item,"pnx.addata.openaccess[0]")},e.prototype.isPeerreviewed=function(){return"peer_reviewed"===s(this.item,"pnx.display.lds50[0]")||"true"===s(this.item,"pnx.addata.peerreview[0]")},e.prototype.isCourseDocument=function(){return s(this.item,"pnx.display.crsinfo[0]")},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-search-result-journal-indication-line",templateUrl:"components/search/searchResult/searchResultJournalIndication/searchResultJournalIndicationLine.html"}),o(0,a.Inject("journalLineIcons")),i("design:paramtypes",[Object])],e)}();t.PrmSearchResultJournalIndicationLine=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(378),c=n(4),u=n(159),l=n(26),f=n(6),p=n(1),d=n(3),h=function(){function e(e,t,n,r,i,o,a,s,u){this.chaptersResultsLineService=e,this.chaptersAndReviewsService=t,this.primolyticsService=n,this.searchBoxIcons=r,this.$state=i,this.$mdDialog=o,this.$rootScope=a,this.$stateParams=s,this.$translate=u,this.CHAPTERS_STATE=c.STATE_NAMES.CITATION_CHAPTERS}return e.prototype.ngOnInit=function(){},e.prototype.onClick=function(e,t){if(this.sendBeacon(t),e.stopPropagation(),this.chaptersAndReviewsService.item=this.item,this.$mdDialog.hide(),this.$state.current.name===this.CHAPTERS_STATE){e.preventDefault();var n=this.chaptersStateParams(t);this.$rootScope.$broadcast("addChaptersEvent",{params:n})}},e.prototype.sendBeacon=function(e){"chapters"===e?this.isBookChapterRecordType()?this.sendChaptersSameBookBeacon(this.item):this.isBookRecordType()&&this.sendBookChaptersBeacon(this.item):"reviews"===e&&this.sendBookReviewsBeacon(this.item)},e.prototype.sendChaptersSameBookBeacon=function(e){},e.prototype.sendBookChaptersBeacon=function(e){},e.prototype.sendBookReviewsBeacon=function(e){},e.prototype.chaptersStateParams=function(e){var t=this.chaptersAndReviewsService.chaptersFrbrGroupId(this.item),n=[];"chapters"===e&&(n=this.chaptersAndReviewsService.multiFacetsBookChapter(t)),"reviews"===e&&(n=this.chaptersAndReviewsService.multiFacetsBookReviews(t));var r="";this.item.pnx.search?r=this.item.pnx.search.recordid[0]:this.item.pnx.control&&(r=this.item.pnx.control.recordid[0]);var i={query:this.$stateParams.query||"any,contains,"+r,tab:this.$stateParams.tab,type:e,search_scope:this.$stateParams.search_scope,lang:this.$stateParams.lang,adaptor:this.$stateParams.adaptor,vid:this.$stateParams.vid,mfacet:n,docid:r,isRelatedItems:!0,isCDI:p.isCDI(),context:d(this.item,"context")};return i},e.prototype.isBookChapterRecordType=function(){return"book_chapter"===d(this.item,"pnx.display.type[0]","b").toLowerCase()},e.prototype.isBookRecordType=function(){return"book"===d(this.item,"pnx.display.type[0]","b").toLowerCase()},e.prototype.getBookChapters=function(){var e=d(this.item,"pnx.facets.frbrgroupid[0]");return this.chaptersAndReviewsService.getBookChapters(e)},e.prototype.getBookReviews=function(){var e=d(this.item,"pnx.facets.frbrgroupid[0]");return this.chaptersAndReviewsService.getBookReviews(e)},e.prototype.getNumberOfChapters=function(){var e=this.chaptersAndReviewsService.getBookChapters(this.item.pnx.facets.frbrgroupid[0]);return d(e,"numOfGroupIds")},e.prototype.getNumberOfReviews=function(){var e=this.chaptersAndReviewsService.getBookReviews(this.item.pnx.facets.frbrgroupid[0]);return d(e,"numOfGroupIds")},e.prototype.getChaptersLabel=function(){return this.isBookRecordType()?this.$translate.instant("nui.results.relatedItems.book2chapter.link",{counter:this.getNumberOfChapters()}):this.$translate.instant("nui.results.relatedItems.chapter2chapter.link",{counter:this.getNumberOfChapters()})},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([f.beacon({p:"linksService",op:"relatedItemsChaptersSameBook",item:"item"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendChaptersSameBookBeacon",null),r([f.beacon({p:"linksService",op:"relatedItemsBookChapters",item:"item"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendBookChaptersBeacon",null),r([f.beacon({p:"linksService",op:"relatedItemsBookReviews",item:"item"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendBookReviewsBeacon",null),e=r([a.Component({selector:"prm-chapters-results-line",templateUrl:"components/search/searchResult/searchResultsChaptersAndReviews/chapters-results-line.html"}),o(3,a.Inject("searchBoxIcons")),o(4,a.Inject("$state")),o(5,a.Inject("$mdDialog")),o(6,a.Inject("$rootScope")),o(7,a.Inject("$stateParams")),o(8,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.ChaptersResultsLineService&&s.ChaptersResultsLineService)&&n||Object,"function"==typeof(h="undefined"!=typeof u.ChaptersAndReviewsService&&u.ChaptersAndReviewsService)&&h||Object,"function"==typeof(m="undefined"!=typeof f.PrimolyticsService&&f.PrimolyticsService)&&m||Object,Array,Object,Object,Object,Object,Object])],e);var t,n,h,m}();t.PrmChaptersResultsLine=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(27),c=n(11),u=n(7),l=n(48),f=n(30),p=n(1),d=n(20),h=n(19),m=n(6),g=n(8),y=function(){function e(e,t,n,r,i,o,s,c,u,l,d,m,g,y,v){this.briefResultService=e,this.favoritesService=t,this.searchService=n,this.jwtUtilService=r,this.changeLangService=i,this.alertService=o,this.primolyticsService=s,this.favoritesIcons=c,this.$translate=u,this.$element=l,this.$scope=d,this.$stateParams=m,this.$timeout=g,this.$window=y,this.mediaQueries=v,this.onClickDisableToolBar=new a.EventEmitter,this.PAGE_SIZE=p.getResultsBulkSize(),this.SELECT_LIMIT=50,this.selectedAction="none",this.isIe=h.isBrowserIE(),this.scopes=p.getScopeList(),this.needToLoadTopMax=!1,this.insertSlideAfterDismiss=!0,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.topMaxAlert=o.create(f.ALERT_MSG_TYPE.SIMPLE_WITHOUT_DISMISS),this.topMaxAlert.show("nui.brief.bulk.chooseLimit"),this.showPushtoActions=!1}return e.prototype.ngOnInit=function(){var e=this;this.$timeout(function(){e.removeAttDummyTab("md-tabs-dummy-wrapper span")},400)},Object.defineProperty(e.prototype,"currPageNum",{get:function(){return this.currentPageNum},set:function(e){this.currentPageNum=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResultsNum",{get:function(){return this.totalResults},set:function(e){this.totalResults=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPushtoActions",{get:function(){return this._showPushtoActions},set:function(e){this._showPushtoActions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleInMobileStatus",{get:function(){return this.toggleInMobile},set:function(e){this.toggleInMobile=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getUser",{get:function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needToShowSlide",{get:function(){return(this.atLeastOneRecordSelectedInThisSession&&!this.numOfVisibleResultsIsLessThanBulkSize||this.allIn)&&this.notJumpToPageByPageNav&&this.isNotIE&&this.totalResultsHaveNotBeenSelectedYet&&!this.toggleInMobileStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotIE",{get:function(){return!this.isIe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needToshowErrorAlert",{get:function(){return this.selectedItems()&&this.selectedItems().length>this.SELECT_LIMIT},enumerable:!0,configurable:!0}),e.prototype.getPlaceHolders=function(e){return{idx_0:e}},Object.defineProperty(e.prototype,"allIn",{get:function(){return this.briefResultService.checkSearchIfAllSelected()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notJumpToPageByPageNav",{get:function(){return!this.briefResultService.checkIfJumpedByPageNav()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atLeastOneRecordSelectedInThisSession",{get:function(){return this.selectedItems().length>0&&this.briefResultService.selectedSearchRecordsCounter>0&&this.insertSlideAfterDismiss},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResultsHaveNotBeenSelectedYet",{get:function(){return!(this.selectedItems()&&this.selectedItems().length===this.totalResultsNum)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indeterminateState",{get:function(){return!(this.briefResultService.checkSearchIfAllSelected()||0===this.briefResultService.getSearchChosenRecords().length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfTopMax",{get:function(){return this.totalResultsNum&&this.totalResultsNum<this.SELECT_LIMIT?this.totalResultsNum:this.SELECT_LIMIT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfVisibleResultsIsTheTopMax",{get:function(){return this.briefResultService.searchResults().length===this.numOfTopMax},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfVisibleResultsIsLessThanBulkSize",{get:function(){return this.numOfTopMax<=this.PAGE_SIZE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResultsSelected",{get:function(){var e=this.selectedItems();return e&&e.length==this.totalResultsNum},enumerable:!0,configurable:!0}),e.prototype.sendBriefBeacon=function(e){this.primolyticsService.doBeaconReport({p:"brief",op:e},this.item,this.primolyticsService.getTimestamp())},e.prototype.getAriaLive=function(){return this.needToShowSlide?"assertive":"off"},e.prototype.getTabIndex=function(){return this.needToShowSlide?"0":"-1"},e.prototype.getSelectAriaLabel=function(){return this.allIn?this.$translate.instant("nui.aria.bulk.unselectAll"):this.$translate.instant("nui.aria.bulk.topCheckbox")},e.prototype.selectOrUnselectAll=function(){this.briefResultService.selectAll=!this.allIn,this.briefResultService.searchChooseAllVisible(),this.allIn?this.sendBriefBeacon("selectDisplayedRecords"):this.sendBriefBeacon("unselectAllRecords")},e.prototype.focusOnSelectTopMax=function(){if(this.needToShowSlide){var e=document.getElementById("chooseTopMax");e.focus()}},e.prototype.selectedItems=function(){var e=this.briefResultService.getSearchChosenItems();return e?e:[]},e.prototype.loadAndSelectTopMax=function(){if(!(this.numOfVisibleResultsIsTheTopMax&&!this.atLeastOneRecordSelectedInThisSession||this.totalResultsSelected)){this.sendBriefBeacon("selectTopRecords");var e=this.numOfTopMax<this.SELECT_LIMIT?this.numOfTopMax:this.SELECT_LIMIT;this.searchService.numOfLoadedResultBulks>=e/this.PAGE_SIZE?this.briefResultService.selectTopMax(this.numOfTopMax):(this.needToLoadTopMax=!0,this.briefResultService.loadAndSelectTopMax(this.numOfTopMax))}},e.prototype.onTopMaxSlideClose=function(){var e=this.getDir();angular.element(document.querySelector("prm-search-result-tool-bar .floated-max-results-message")).css(e,"-100%")},e.prototype.updateNoNeedToInsertSlideAfterDismiss=function(){this.insertSlideAfterDismiss=!1},e.prototype.showButtons=function(){return!this.needToshowErrorAlert&&this.briefResultService.getSearchChosenRecords().length>0?(this.disableEffect=angular.element(document.querySelector(".horizontal-content-scroller")),!0):(this.showPushtoActions=!1,!1)},e.prototype.pinToFavorites=function(e){var t=[];this.showButtons()&&(this.needToLoadTopMax?(t=this.selectedItems(),this.needToLoadTopMax=!1):t=this.briefResultService.getSearchChosenRecords(),this.briefResultService.pinToFavoritesFromToolBar(t),this.performUpdate(e),this.sendBriefBeacon("addToFavoritesBulk"))},e.prototype.switchShowPushtoActions=function(){this.showPushtoActions=this.showButtons()&&!this.showPushtoActions,this.briefResultService.openedFromTopActionBar=this.showPushtoActions},e.prototype.isChosenFav=function(){return this.showButtons()?this.$translate.instant("nui.aria.bulk.pin"):this.$translate.instant("nui.aria.bulk.pinDisabled")+" "+this.$translate.instant("nui.aria.favorites.enableControls")},e.prototype.isChosenActions=function(){return this.showButtons()?this.$translate.instant("nui.favorites.pushto"):this.$translate.instant("nui.favorites.pushtoDisable")+" "+this.$translate.instant("nui.aria.favorites.enableControls")},e.prototype.closeOpenTabs=function(e){e.stopPropagation(),this.selectedAction="none"},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.getDir=function(){return"ltr"===this.changeLangService.direction?"left":"right"},e.prototype.notLocal=function(){return!this.searchService.IsScopeLocal()},e.prototype.disableToolBar=function(){return this.onClickDisableToolBar.emit(event)},e.prototype.keyDownSupport=function(e){this.KEY_CODE;27===e.keyCode&&this.switchShowPushtoActions(),40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e.prototype.removeAttDummyTab=function(e){for(var t=document.querySelectorAll(e),n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("translate")}},e.prototype.performUpdate=function(e){var t=(this.jwtUtilService.getDecodedToken().user,!1);t||this.doPinItem(e),t=!0},e.prototype.doPinItem=function(e){var t=angular.element(e.target),n=t.parent("md-button").parent(),r=angular.element(document.getElementById("fixed-buttons-holder")),i=angular.element(document.getElementById("favorites-button")),o=r.prop("offsetLeft")+this.$window.pageXOffset+8,a=r.prop("offsetTop")+this.$window.pageYOffset+-1,s=n[0].getBoundingClientRect(),c=s.left-1,u=s.top+1+this.$window.pageYOffset,l=angular.element('<div class="pinDummy" style="top:'+u+"px; left:"+c+'px">              <prm-icon>                  <md-icon>                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="100%" height="100%" viewBox="0 0 24 24" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"></path></svg>                  </md-icon>              </prm-icon>          </div>');angular.element(document.body).append(l),this.$timeout(function(){l.addClass("animating")},0),this.$timeout(function(){l.css({top:a+"px",left:o+"px"})},100),this.$timeout(function(){i.addClass("animating")},600),this.$timeout(function(){l.remove()},2e3),this.$timeout(function(){i.removeClass("animating")},1800)},r([a.Output(),i("design:type",Object)],e.prototype,"onClickDisableToolBar",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"currentPageNum",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"totalResults",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"maxResults",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"totalResultVersion",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"showPartialResultsWarning",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"toggleInMobile",void 0),e=r([a.Component({selector:"prm-search-result-tool-bar",templateUrl:"components/search/searchResult/searchResultToolBar/search-result-tool-bar.html"}),o(7,a.Inject("favoritesIcons")),o(8,a.Inject("$translate")),o(9,a.Inject("$element")),o(10,a.Inject("$scope")),o(11,a.Inject("$stateParams")),o(12,a.Inject("$timeout")),o(13,a.Inject("$window")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.BriefResultService&&s.BriefResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.FavoritesService&&l.FavoritesService)&&n||Object,"function"==typeof(y="undefined"!=typeof c.SearchService&&c.SearchService)&&y||Object,"function"==typeof(v="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&v||Object,"function"==typeof(b="undefined"!=typeof d.ChangeLangService&&d.ChangeLangService)&&b||Object,"function"==typeof(S="undefined"!=typeof f.AlertFactory&&f.AlertFactory)&&S||Object,"function"==typeof(_="undefined"!=typeof m.PrimolyticsService&&m.PrimolyticsService)&&_||Object,Object,Object,Object,Object,Object,Object,Object,"function"==typeof(O="undefined"!=typeof g.MediaQueries&&g.MediaQueries)&&O||Object])],e);var t,n,y,v,b,S,_,O}();t.PrmSearchResultToolBar=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Injectable()],e)}();t.SearchResultAddToFavoritesMenuService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(48),c=n(254),u=n(27),l=n(11),f=function(){function e(e,t,n,r,i,o,s,c,u){this.favoritesEditLabelsMenuService=e,this.briefResultService=t,this.favoritesService=n,this.searchService=r,this.actionsIcons=i,this.favoritesIcons=o,this.$scope=s,this.$mdMenu=c,this.$translate=u,this.onAddToFavoritesEvent=new a.EventEmitter,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.favoritesService.getItemsFromServer()}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.briefResultService.pinnedToFav},function(t,n){t&&(e.label&&e.addLabel(e.label),e.newLabel="",e.$mdMenu.hide())})},e.prototype.openMenu=function(e,t){this.disable||(this.originatorEv=t,e(t))},e.prototype.pinToFavoritesFromMenu=function(){return document.querySelector("#addFavAndLabeluser").focus(),this.onAddToFavoritesEvent.emit(event)},e.prototype.returnAssignedLabels=function(){return this.favoritesEditLabelsMenuService.returnAssignedLabels(this.isSection)},e.prototype.returnOtherLabels=function(){return this.favoritesEditLabelsMenuService.returnOtherLabels(this.isSection)},e.prototype.removeLabelForOneRecord=function(e,t){this.favoritesEditLabelsMenuService.removeLabelForOneRecord(e,t)},e.prototype.removeLabel=function(e){this.favoritesEditLabelsMenuService.removeLabel(e,this.isSection);
},e.prototype.addLabelForOneRecord=function(e,t){this.favoritesEditLabelsMenuService.addLabelForOneRecord(e,t)},e.prototype.addLabelAfterPinned=function(e){this.label=e?e:this.newLabel},e.prototype.addLabel=function(e){this.favoritesEditLabelsMenuService.addLabel(e,this.isSection)},e.prototype.isChosenFavAndLabels=function(){return this.favoritesEditLabelsMenuService.isChosenFavAndLabels(this.disable)},e.prototype.isChosenLabels=function(){return this.favoritesEditLabelsMenuService.isChosenLabels(this.disable)},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.keydownSupport=function(e){if(e.keyCode===this.KEY_CODE.TAB)return e.preventDefault(),document.querySelector("#addToFavUser").focus()},r([a.Output(),i("design:type",Object)],e.prototype,"onAddToFavoritesEvent",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isSection",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"disable",void 0),e=r([a.Component({selector:"prm-search-result-add-to-favorites-menu",templateUrl:"components/search/searchResult/searchResultAddToFavoritesMenu/search-result-add-to-favorites-menu.html"}),o(4,a.Inject("featuredActionsIcons")),o(5,a.Inject("favoritesIcons")),o(6,a.Inject("$scope")),o(7,a.Inject("$mdMenu")),o(8,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.FavoritesEditLabelsMenuService&&c.FavoritesEditLabelsMenuService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.BriefResultService&&u.BriefResultService)&&n||Object,"function"==typeof(f="undefined"!=typeof s.FavoritesService&&s.FavoritesService)&&f||Object,"function"==typeof(p="undefined"!=typeof l.SearchService&&l.SearchService)&&p||Object,Object,Array,Object,Object,Object])],e);var t,n,f,p}();t.PrmSearchResultAddToFavoritesMenu=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(700),a=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmReferenceEntryItem],providers:[]})],e)}();t.ReferenceEntryModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(155),c=n(109),u=n(27),l=n(11),f=n(4),p=n(2),d=n(20),h=function(){function e(e,t,n,r,i,o,s,c){this.briefResultService=e,this.searchService=t,this.fullViewDialogService=n,this.$state=r,this.$scope=i,this.configurationUtil=o,this.resultUtil=s,this.changeLangService=c,this.itemNotExist=new a.EventEmitter}return e.prototype.ngOnInit=function(){var e=this,t=this.$scope.$watch(function(){return e.showViewMoreBtn()},function(n){e.showViewMoreButton=n,n&&t()});this.searchService.getReferenceEntry(this.term).then(function(t){e.configurationUtil.isSuprima()?0!==t[0].length&&(void 0!=t[0].docs&&0!==t[0].docs.length||void 0!=t[0].pnx&&0!==t[0].pnx.length)?(e.item=t[0],e.description=e.item.pnx.display.description,e.descCropped=!0):e.itemNotExist.emit(!0):(e.onSuccess(t),function(t){return e.onError(t)})})},e.prototype.onSuccess=function(e){e?(this.item=e.data.docs[0],this.description=this.item.pnx.display.description,this.descCropped=!0):this.itemNotExist.emit(!0)},e.prototype.onError=function(e){console.log("An error occurred while getting ReferenceEntry")},e.prototype.toggleDescCropped=function(){this.descCropped=!this.descCropped},e.prototype.showViewMoreBtn=function(){var e=document.getElementById("reference-entry-description");if(e){var t=e.clientHeight,n=e.parentElement.clientHeight;return t>n||!this.descCropped}return!1},e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e.prototype.getViewMoreButtonText=function(){return this.descCropped?"reference_entry.button.view_more":"reference_entry.button.view_less"},e.prototype.openFullViewDialog=function(e){this.fullViewDialogService.openFullViewDialog(this.item,e,"referenceEntry")},e.prototype.isMultipleVersions=function(){return this.resultUtil.displayMultipleVersions(this.item,this.briefResultService.getSearchObject())},e.prototype.isFavoriteState=function(){return this.$state.current.name==f.STATE_NAMES.FAVORITES},e.prototype.isFrbrGeneric=function(){return this.resultUtil.isFrbr(this.item)&&1===this.searchService.getFrbrDisplay()},r([a.Input(),i("design:type",Object)],e.prototype,"term",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"itemNotExist",void 0),e=r([a.Component({selector:"prm-reference-entry-item",templateUrl:"components/search/referenceEntry/reference-entry-item.html"}),o(3,a.Inject("$state")),o(4,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.BriefResultService&&u.BriefResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.SearchService&&l.SearchService)&&n||Object,"function"==typeof(h="undefined"!=typeof s.FullViewDialogService&&s.FullViewDialogService)&&h||Object,Object,Object,"function"==typeof(m="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&m||Object,"function"==typeof(g="undefined"!=typeof c.ResultUtil&&c.ResultUtil)&&g||Object,"function"==typeof(y="undefined"!=typeof d.ChangeLangService&&d.ChangeLangService)&&y||Object])],e);var t,n,h,m,g,y}();t.PrmReferenceEntryItem=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(55),a=n(702),s=n(703),c=n(704),u=n(705),l=n(706),f=n(707),p=n(708),d=n(160),h=function(){function e(){}return e=r([i.NgModule({declarations:[l.PrmBreadcrumbs,u.PrmFacet,a.PrmFacetExact,c.PrmFacetGroup,s.PrmFacetRange,p.PrmOrganizationOrFacetToggle],providers:[o.FacetService,d.OrganizationOrFacetToggleService],imports:[f.FacetTransformationModule]})],e)}();t.FacetModule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(55),u=n(2),l=n(1),f=n(33),p=n(79),d=n(11),h=n(153),m=n(16),g=n(8),y=(n(81),n(117),n(177)),v=(n(5),function(){function e(e,t,n,r,i,o,a,s,c,u,f,p,d,h,m,g){var y=this;this.configurationUtil=e,this.facetService=t,this.primolyticsService=n,this.$filter=r,this.$timeout=i,this.$translate=o,this.facetsIcons=a,this.availabilityLineIcons=s,this.$state=c,this.filterInstitution=u,this.smoothScrollUtil=f,this.searchService=p,this.filterLanguage=d,this.newspapersService=h,this.$interval=m,this.mediaQueries=g,this.vid=l.getVid(),this.$translate("facets.facet.facet_"+this.facetGroup.name).then(function(e){e?y._facetGroupHeader=e:y._facetGroupHeader=y.facetGroup.name})}return e.prototype.ngOnInit=function(){},e.prototype.addFacet=function(e){"Collection"==this.facetGroupHeader&&this.runCollectionDiscoveryBeacon(),e.mergedFacets?(this.facetService.clearMultiFacets(),this.toggleMultiFacet(e),this.facetService.applyMultiFacets()):this.doFacetSearch(e.name,e.value,e.value,"include",this.facetGroup.displayedType,"add")},e.prototype.runCollectionDiscoveryBeacon=function(){},e.prototype.doFacetSearch=function(e,t,n,r,i,o){var a=e+","+r+","+n;this.facetService.facetSearch({facet:a})},e.prototype.isShowMore=function(e){return!!e&&(e.limitCount>0&&e.displayedCount<e.values.length)},e.prototype.toggleFacet=function(e){var t=this,n=e.target;this.facetGroup.facetGroupCollapsed=!this.facetGroup.facetGroupCollapsed,n.setAttribute("aria-expanded",this.facetGroup.facetGroupCollapsed);var r=0===this.facetGroup.limitCount?this.facetGroup.values.length:this.facetGroup.limitCount;this.facetGroup.displayedCount=Math.min(10,r);var i=this.$interval(function(){t.facetGroup.displayedCount>=r?(t.$interval.cancel(i),t.facetGroup.displayedCount=r):t.facetGroup.displayedCount=Math.min(t.facetGroup.displayedCount+10,r)},500)},e.prototype.toggleMoreFacets=function(e,t){if(void 0===t&&(t=0),e.displayedCount=e.displayedCount===e.limitCount?e.values.length:e.limitCount,t){var n=function(){var t=document.getElementsByClassName("facet-element-marker-"+e.name);if(t.length>e.limitCount){var n=t[e.limitCount];this.smoothScrollUtil.elementFocus(n),this.smoothScrollUtil.elementFocus(n)}};this.$timeout(n.bind(this),300)}},e.prototype.getFacetGroupValues=function(){return this.filterInstitution.filterAndNormalizeDataFacets(this.facetGroup.values)},e.prototype.facetLabel=function(e){return this.facetService.facetLabel(e)},e.prototype.getCountsummary=function(e){if(!e.maxCount)return this.$filter("number")(e.count);var t={idx_0:this.$filter("number")(e.count),idx_1:this.$filter("number")(e.maxCount)},n=this.$translate.instant("nui.facets.remote.collection",t);return n},e.prototype.isShowCount=function(e){return("suprima"!==this.configurationUtil.getBackendSystem()||"tlevel"!==e.name&&"newrecords"!==e.name)&&("tlevel"!==e.name||"open_access"!==e.value)},Object.defineProperty(e.prototype,"facetGroupHeader",{get:function(){return this._facetGroupHeader},enumerable:!0,configurable:!0}),e.prototype.toggleMultiFacet=function(e){this.facetService.toggleMultiFacet(e)},e.prototype.toggleIncludeExclude=function(e){this.runFacetIncludeExcludeBeacon(),this.facetService.toggleIncludeExclude(e)},e.prototype.runFacetIncludeExcludeBeacon=function(){},e.prototype.containLegalFacetByLang=function(e){return!!this.checkLang(e.displayValue||e.value)&&!!this.checkLang(this.facetLabel(e))},e.prototype.checkLang=function(e){return this.filterLanguage.checkLang(e)},e.prototype.removeNotRelevantChars=function(e){return this.filterLanguage.removeNotRelevantChars(e)},e.prototype.escapeHtmlChars=function(e){return y(e)},e.prototype.ariaLabelForFacet=function(e){return"exclude"===e?this.$translate.instant("nui.facets.exclude.tooltip"):this.$translate.instant("nui.facets.include.tooltip")},e.prototype.getFacetTitleTranslated=function(e){return this.facetService.getFacetTitleTranslated(e,this.facetGroup)},e.prototype.isRtypeFacet=function(e){return"rtype"===e},e.prototype.displayNewspapersLink=function(){return this.newspapersService.displayNewspapersLink()},e.prototype.isLocalFacet=function(){return this.facetGroup.name.startsWith("lds")&&"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.getTranslatedLocationWithLibraryName=function(e){return this.facetService.getFacetTitleTranslated(e,this.facetGroup)},e.prototype.ariaLabelForFacetCheckbox=function(e){if(this.$translate.isReady()){var t=this.getFacetTitleTranslated(e);return this.ariaLabelForFacet(e.facetType)+" "+t+" "+this.$translate.instant("nui.multiple.selection")}},e.prototype.ariaLabelForFacetTitle=function(e){if(this.$translate.isReady()){var t=this.getFacetTitleTranslated(e);return t+" "+this.getCountsummary(e)+" "+this.$translate.instant("nui.facets.searchResults")}},r([a.Input(),i("design:type",Object)],e.prototype,"facetGroup",void 0),r([s.beacon({p:"colldisc",op:"refine"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runCollectionDiscoveryBeacon",null),r([s.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object,Object]),i("design:returntype",void 0)],e.prototype,"doFacetSearch",null),r([s.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runFacetIncludeExcludeBeacon",null),e=r([a.Component({selector:"prm-facet-exact",templateUrl:"components/search/facet/facetExact/facet-exact.html"}),o(3,a.Inject("$filter")),o(4,a.Inject("$timeout")),o(5,a.Inject("$translate")),o(6,a.Inject("facetsIcons")),o(7,a.Inject("availabilityLineIcons")),o(8,a.Inject("$state")),o(14,a.Inject("$interval")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof c.FacetService&&c.FacetService)&&n||Object,"function"==typeof(v="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&v||Object,Object,Object,Object,Object,Object,Object,"function"==typeof(b="undefined"!=typeof p.FilterInstitution&&p.FilterInstitution)&&b||Object,"function"==typeof(S="undefined"!=typeof f.SmoothScrollUtil&&f.SmoothScrollUtil)&&S||Object,"function"==typeof(_="undefined"!=typeof d.SearchService&&d.SearchService)&&_||Object,"function"==typeof(O="undefined"!=typeof h.FilterLanguage&&h.FilterLanguage)&&O||Object,"function"==typeof(T="undefined"!=typeof m.NewspapersService&&m.NewspapersService)&&T||Object,Object,"function"==typeof(E="undefined"!=typeof g.MediaQueries&&g.MediaQueries)&&E||Object])],e);var t,n,v,b,S,_,O,T,E}());t.PrmFacetExact=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(55),u=n(2),l=function(){function e(e,t,n,r){this.facetService=e,this.primolyticsService=t,this.$translate=n,this.configurationUtil=r}return e.prototype.addFacet=function(e,t,n,r,i,o,a,s){var c=e+","+r+","+n;this.facetService.facetSearch({facet:c})},Object.defineProperty(e.prototype,"rangeFacetValue",{get:function(){return this.facetService.getRangeFacetValue(this.rangeFacetMinValue,this.rangeFacetMaxValue)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMinValue",{get:function(){return void 0==this.facetGroup.additionalData.selectedMin?this.facetGroup.additionalData.min:this.facetGroup.additionalData.selectedMin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMaxValue",{get:function(){return void 0==this.facetGroup.additionalData.selectedMax?this.facetGroup.additionalData.max:this.facetGroup.additionalData.selectedMax},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetLabel",{get:function(){return this.facetService.getRangeFacetLabelFromValue(this.rangeFacetValue)},enumerable:!0,configurable:!0}),e.prototype.toggleMultiRangeFacet=function(e){this.facetService.toggleMultiRangeFacet(e)},e.prototype.changeMultiFacetVal=function(e){this.facetService.activeRangeMultiFacet&&this.facetService.replaceMultiRangeFacet(e)},e.prototype.ariaLabelForFacet=function(e){return"exclude"===e?this.$translate.instant("nui.facets.exclude.tooltip"):this.$translate.instant("nui.facets.include.tooltip")},e.prototype.toggleFacet=function(e){var t=e.target;this.facetGroup.facetGroupCollapsed=!this.facetGroup.facetGroupCollapsed,t.setAttribute("aria-expanded",this.facetGroup.facetGroupCollapsed)},Object.defineProperty(e.prototype,"facetGroupHeader",{get:function(){return this._facetGroupHeader},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Object)],e.prototype,"facetGroup",void 0),r([s.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object]),i("design:returntype",void 0)],e.prototype,"addFacet",null),e=r([a.Component({selector:"prm-facet-range",templateUrl:"components/search/facet/facetRange/facet-range.html"}),o(2,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.FacetService&&c.FacetService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&n||Object,Object,"function"==typeof(l="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&l||Object])],e);var t,n,l}();t.PrmFacetRange=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$translate=e}return e.prototype.ngOnInit=function(){var e=this;this.$translate("facets.facet.facet_"+this.facetGroup.name).then(function(t){e._facetGroupHeader=t},function(){e._facetGroupHeader=e.facetGroup.name})},Object.defineProperty(e.prototype,"facetGroupHeader",{get:function(){return this._facetGroupHeader},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Object)],e.prototype,"displayedType",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"facetGroup",void 0),r([a.Input(),i("design:type",String)],e.prototype,"facetType",void 0),e=r([a.Component({selector:"prm-facet-group",templateUrl:"components/search/facet/facet-group.html"}),o(0,a.Inject("$translate")),i("design:paramtypes",[Object])],e)}();t.PrmFacetGroup=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(41),s=n(66),c=n(0),u=n(4),l=n(55),f=n(11),p=n(6),d=n(8),h=n(46),m=n(37),g=n(22),y=n(7),v=n(28),b=n(16),S=n(1),_=n(20),O=n(115),T=n(2),E=n(150),w=n(160),I=n(3),R=n(18),P=function(){function e(e,t,n,r,i,o,a,s,u,l,f,p,d,h,m,g,y,v,b,_,O,T){var E=this;this.$mdSidenav=e,this.searchService=t,this.facetService=n,this.$timeout=r,this.primolyticsService=i,this.mediaQueries=o,this.$state=a,this.$stateParams=s,this.$location=u,this.$translate=l,this.personalizeResultsButtonService=f,this.sharedSessionStorage=p,this.jwtUtilService=d,this.journalsService=h,this.databasesService=m,this.configurationUtil=g,this.$scope=y,this.newspapersService=v,this.changeLangService=b,this.databasesCategorizeService=_,this.orgListService=O,this.organizationOrFacetService=T,this._showUIBlocker=!1,this.closeMobileFacetEvent=new c.EventEmitter,this.vid=S.getVid(),this.haveOrgListCategories=!0,this._showMobileFacets=!0,this.isJournalCategories=!1,this.facetInclude={},this.facetExclude={},this.facetService.multiResults=[],this.facetService.activeMultipleFacets=!1,this.facetService.activeRangeMultiFacet=!1,this.setShowPcAvailability(),this.pcAvailability="true"===s.pcAvailability||!1;var w=this.$scope.$watch(function(){return E.searchInProgress},function(e){e?E._showUIBlocker=!0:E.$timeout(function(){E._showUIBlocker=!1,w()},0)}),I=this.$scope.$watch(function(){return E.searchInProgress},function(e){e||E.$timeout(function(){E.showTimer=!0,I()},0)});this.isJournalCategories=this.setJournalCategoriesByConfiguration()}return Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.isRapido=function(){return S.isNgrs()},e.prototype.notLocal=function(){return!this.searchService.IsScopeLocal()},Object.defineProperty(e.prototype,"facets",{get:function(){return this.facetService.getResults()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!s(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.resultsExists?this.searchService.getResultObject().info.total:0},enumerable:!0,configurable:!0}),e.prototype.isFiltered=function(){var e=this.searchService.getSearchObject();return!!e.facets&&e.facets.length>0},Object.defineProperty(e.prototype,"sortby",{get:function(){return this.searchService.getSearchObject().sortby},set:function(e){this.searchService.getSearchObject().sortby=e},enumerable:!0,configurable:!0}),e.prototype.toggleAllFacets=function(){this.$mdSidenav("facets-sidenav-right").toggle()},e.prototype.changePcAvailability=function(){var e=this.pcAvailability?"true":"false";this.$location.search("pcAvailability",e)},e.prototype.setShowPcAvailability=function(){var e=this.$stateParams.search_scope;this.showPcAvailability=this.facetService.showPcAvailabilityForScope(e)},Object.defineProperty(e.prototype,"showPcAvailability",{get:function(){return this._showPcAvailability},set:function(e){this._showPcAvailability=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pcAvailability",{get:function(){return this.facetService.pcAvailability},set:function(e){this.facetService.pcAvailability=e},enumerable:!0,configurable:!0}),e.prototype.showFacetSection=function(){if(this.$stateParams.journals||this.$stateParams.databases){var e=this.$stateParams.journals||this.$stateParams.databases;return"letter"!=e.split(",")[0]}return!this.isOrgListSearch()||!this.isShowingOrganizationTree()},e.prototype.isShowFetchMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&e.total<e.maxTotal},e.prototype.fetchMoreResults=function(){var e=this.searchService.getSearchObject();e.getMore=1,e.offset=0,this.searchService.search(e,!0)},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),e.prototype.personalizationToggled=function(){return this.personalizeResultsButtonService.personalizationToggled()},e.prototype.getPersonalization=function(){return this.sharedSessionStorage.getItem("personalization").split(";")},e.prototype.removeDiscipline=function(e){var t=this.sharedSessionStorage.getItem("personalization").split(";"),n=t.indexOf(e);n>-1&&(t.splice(n,1),t.length>0?this.sharedSessionStorage.setItem("personalization",t.join(";")):(this.sharedSessionStorage.removeItem("personalization"),this.sharedSessionStorage.removeItem("recentness"),this.sharedSessionStorage.removeItem("enable_personalization"),this.personalizeResultsButtonService.enable=!1,this.personalizeResultsButtonService.recentness=!1),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(u.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid))},Object.defineProperty(e.prototype,"recentness",{get:function(){return this.personalizeResultsButtonService.recentness},set:function(e){this.sharedSessionStorage.setItem("recentness",""+e),this.personalizeResultsButtonService.recentness=e,this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(u.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0})},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.edit=function(){this.personalizeResultsButtonService.editPressed=!0,this.personalizeResultsButtonService.cancelPressed=!1,this.closeMobileFacetEvent.emit({event:event})},e.prototype.showPersonalizationSection=function(){return!this.journalsService.isJournalSearch()&&!this.databasesService.isDBSearch()&&this.$state.current.name!==u.STATE_NAMES.CITATION_TRAILS&&"browse"!==this.$stateParams.mode},Object.defineProperty(e.prototype,"activeMultipleFacets",{get:function(){return this.detectMobile()?1:this.facetService.totalMultipleResults()},enumerable:!0,configurable:!0}),e.prototype.clearMultiFacets=function(){this.facetService.clearMultiFacets()},e.prototype.applyMultiFacets=function(){var e=this;this.facetService.applyMultiFacets();var t=1;R(this.facetService.multiResults,function(n){n.operation="add",t||(n.ignoreInActions=1),e.beaconForMultiFacets(n),t=0}),this.closeMobileFacet()},e.prototype.beaconForMultiFacets=function(e){},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},Object.defineProperty(e.prototype,"showUIBlocker",{get:function(){return this._showUIBlocker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNewspapersSearch",{get:function(){return this.newspapersService.isNewspapersSearch()},enumerable:!0,configurable:!0}),e.prototype.isDBSearch=function(){return this.databasesService.isDBSearch()},e.prototype.isJournalSearch=function(){return this.journalsService.isJournalSearch()},e.prototype.isSearchDone=function(){return this.searchService.isSearchDone()},e.prototype.isShowPartsOnCitationTrails=function(){var e=this.$state.current.name;return e===u.STATE_NAMES.CITATION_TRAILS},e.prototype.isOrgListSearch=function(){return this.orgListService.isOrgListSearch()},e.prototype.isShowingOrganizationTree=function(){return this.organizationOrFacetService.isOrganizationTree},e.prototype.onSearchBarSearchEvent=function(e){var t=u.STATE_NAMES.SEARCH;(this.journalsService.isJournalSearch()||this.journalsService.returnToJournalsSearch())&&(t=u.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(t=u.STATE_NAMES.DB_SEARCH),this.orgListService.isOrgListSearch()&&(t=u.STATE_NAMES.ORGANIZATION_LIST);var n={search_scope:e.scopeField,tab:e.tab,journals:e.journals,databases:e.databases,organization:e.organization,organizationPath:e.organizationPath,sortby:e.sortby,query:"contains,"+e.searchType+",",vid:this.vid};this.$state.go(t,n,{reload:t})},Object.defineProperty(e.prototype,"isCategories",{get:function(){return this.databasesCategorizeService.isCategories()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayDBCategories",{get:function(){return(this.isDBSearch()||this.isJournalSearch()&&this.isPrimoVE&&this.isJournalCategories)&&this.isSearchDone()&&this.isCategories},enumerable:!0,configurable:!0}),e.prototype.setHaveOrgListCategories=function(e){this.haveOrgListCategories=e},e.prototype.getRemoveLabel=function(){return this.$translate.instant("pyr.discipline.removeDiscipline")},e.prototype.getDiscipline=function(e){return this.$translate.instant("pyr.discipline."+e)},e.prototype.closeMobileFacet=function(){this.showMobileFacets=!0},Object.defineProperty(e.prototype,"showMobileFacets",{get:function(){return this.searchService.showMobileFacets},set:function(e){this.searchService.showMobileFacets=e},enumerable:!0,configurable:!0}),e.prototype.pageRtlDirection=function(){return"rtl"==this.changeLangService.direction},Object.defineProperty(e.prototype,"isPrimoVE",{get:function(){return"suprima"===this.configurationUtil.getBackendSystem()},enumerable:!0,configurable:!0}),e.prototype.setJournalCategoriesByConfiguration=function(){return I(S.getAttributesMap(),["journalCategoriesTree"],!0)},e.prototype.isFromEsploro=function(){return this.searchService.fromEsploro()&&this.isPrimoVE},r([c.Output(),i("design:type",Object)],e.prototype,"closeMobileFacetEvent",void 0),r([c.Input(),i("design:type",String)],e.prototype,"categoriesType",void 0),r([p.beacon({p:"refine",op:"expandResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"changePcAvailability",null),r([p.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"removeDiscipline",null),r([p.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Object),i("design:paramtypes",[Object])],e.prototype,"recentness",null),r([p.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"beaconForMultiFacets",null),e=r([c.Component({selector:"prm-facet",templateUrl:"components/search/facet/facet.html"}),o(0,c.Inject("$mdSidenav")),o(3,c.Inject("$timeout")),o(6,c.Inject("$state")),o(7,c.Inject("$stateParams")),o(8,c.Inject("$location")),o(9,c.Inject("$translate")),o(16,c.Inject("$scope")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof f.SearchService&&f.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof l.FacetService&&l.FacetService)&&n||Object,Object,"function"==typeof(P="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&P||Object,"function"==typeof(j="undefined"!=typeof d.MediaQueries&&d.MediaQueries)&&j||Object,Object,"function"==typeof(A="undefined"!=typeof a.IStateParamsService&&a.IStateParamsService)&&A||Object,Object,Object,"function"==typeof(C="undefined"!=typeof h.PersonalizeResultsButtonService&&h.PersonalizeResultsButtonService)&&C||Object,"function"==typeof($="undefined"!=typeof m.SharedSessionStorage&&m.SharedSessionStorage)&&$||Object,"function"==typeof(D="undefined"!=typeof y.JwtUtilService&&y.JwtUtilService)&&D||Object,"function"==typeof(L="undefined"!=typeof g.JournalsService&&g.JournalsService)&&L||Object,"function"==typeof(k="undefined"!=typeof v.DatabasesService&&v.DatabasesService)&&k||Object,"function"==typeof(M="undefined"!=typeof T.ConfigurationUtil&&T.ConfigurationUtil)&&M||Object,Object,"function"==typeof(x="undefined"!=typeof b.NewspapersService&&b.NewspapersService)&&x||Object,"function"==typeof(F="undefined"!=typeof _.ChangeLangService&&_.ChangeLangService)&&F||Object,"function"==typeof(U="undefined"!=typeof E.DatabasesCategorizeService&&E.DatabasesCategorizeService)&&U||Object,"function"==typeof(B="undefined"!=typeof O.OrgListCategorizeService&&O.OrgListCategorizeService)&&B||Object,"function"==typeof(N="undefined"!=typeof w.OrganizationOrFacetToggleService&&w.OrganizationOrFacetToggleService)&&N||Object])],e);var t,n,P,j,A,C,$,D,L,k,M,x,F,U,B,N}();t.PrmFacet=P},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);
return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(11),c=n(55),u=n(21),l=n(6),f=n(2),p=n(27),d=n(323),h=function(){function e(e,t,n,r,i,o,a,s,c){this.$mdSidenav=e,this.searchService=t,this.facetService=n,this.searchStateService=r,this.primolyticsService=i,this.briefResultService=o,this.configurationUtil=a,this.$translate=s,this.$q=c,this._selectedFacets=void 0,this.sendAllLockedAlert=!1}return e.prototype.ngOnInit=function(){var e=this,t=this.searchStateService.getSearchObject().facets;this.$q.all(t.map(function(e){return e.translationsPromise})).then(function(){t=t.map(function(e){return d(e,"translationsPromise")}),e._selectedFacets=e.facetService.transformActiveFacets(t),e.enrichFacetsTranslations()})},e.prototype.enrichFacetsTranslations=function(){var e=this;this._selectedFacets&&this._selectedFacets.forEach(function(t){var n=e.facetLabel(t),r=e.getFacetDefaultValue(t);e.$translate(n,[],"",r).then(function(e){t.displayValue=e,t.title=e})})},e.prototype.removeFacet=function(e){e.persistent&&this.removeStickyFacet(e);var t=[];e.mergedFacets&&(t=e.mergedFacets.map(function(e){return e.name+","+e.type+","+e.value})),t.push(e.name+","+e.type+","+e.value),this.facetService.facetSearch({facet:t,remove:!0})},e.prototype.clearAllFacets=function(){this.facetService.facetSearch({removeAll:!0})},e.prototype.toggleFacets=function(){this.$mdSidenav("right").toggle()},e.prototype.facetLabel=function(e){return this.facetService.facetLabel(e)},Object.defineProperty(e.prototype,"facets",{get:function(){return this.facetService.getResults()},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.addStickyFacet=function(e,t){return t&&this.addStickyFacetBeacon(e),this.facetService.addStickyFacet(e)},e.prototype.addStickyFacetBeacon=function(e){this.primolyticsService.doBeaconReport({p:"setPersistentFacet",op:this.primolyticsService.getFacetAction(e)},e,this.primolyticsService.getTimestamp())},e.prototype.runRememberAllFiltersBeaconCall=function(){},e.prototype.removeStickyFacet=function(e){return this.facetService.removeStickyFacet(e)},e.prototype.rememberSelectedFilters=function(){var e=this;this.sendAllLockedAlert=!1,this._selectedFacets&&(this._selectedFacets.forEach(function(t){t.persistent||(e.addStickyFacet(t,!1),e.sendAllLockedAlert=!0)}),this.sendAllLockedAlert&&this.runRememberAllFiltersBeaconCall())},e.prototype.allFiltersAlreadySelected=function(){var e=!0;return!!this._selectedFacets&&(this._selectedFacets.forEach(function(t){t.persistent||(e=!1)}),e)},Object.defineProperty(e.prototype,"selectedFacets",{get:function(){return this._selectedFacets},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInfo",{get:function(){return this.searchService.getResultObject().info},enumerable:!0,configurable:!0}),e.prototype.getFacetDefaultValue=function(e){return this.facetService.getFacetDefaultValue(e)},e.prototype.getTextDirection=function(e){var t=this.getFacetDefaultValue(e);return this.briefResultService.getTextDirection(t)},e.prototype.getFacetTitleTranslated=function(e){return this.facetService.getFacetTitleTranslated(e,{name:e.name})},e.prototype.getTranslatedFacetGroupName=function(e){return this.facetService.getTranslatedFacetGroupName(e)},e.prototype.getTranslatedRemoveTooltip=function(e){var t=this.getTranslatedRemoveString()+" "+this.getTranslatedFacetGroupName(e.name),n=this.getTranslatedFacetGroupName(e.name)===this.getFacetTitleTranslated(e);return n?t:t+" "+this.getFacetTitleTranslated(e)},e.prototype.getTranslatedRemoveString=function(){if(this.$translate.isReady())return this.$translate.instant("nui.facets.remove.tooltip")},e.prototype.getRememberFiltersLabels=function(){return this.allFiltersAlreadySelected()?this.$translate.instant("nui.aria.rememberFiltersDisabled")+" "+this.$translate.instant("nui.aria.rememberFilters.enableControls"):this.$translate.instant("nui.aria.rememberFilters")},r([l.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"removeFacet",null),r([l.beacon({p:"setPersistentFacet",op:"rememberFilters"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runRememberAllFiltersBeaconCall",null),e=r([a.Component({selector:"prm-breadcrumbs",templateUrl:"components/search/breadcrumbs/breadcrumbs.html"}),o(0,a.Inject("$mdSidenav")),o(7,a.Inject("$translate")),o(8,a.Inject("$q")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.SearchService&&s.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.FacetService&&c.FacetService)&&n||Object,"function"==typeof(h="undefined"!=typeof u.SearchStateService&&u.SearchStateService)&&h||Object,"function"==typeof(m="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&m||Object,"function"==typeof(g="undefined"!=typeof p.BriefResultService&&p.BriefResultService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.ConfigurationUtil&&f.ConfigurationUtil)&&y||Object,Object,Object])],e);var t,n,h,m,g,y}();t.PrmBreadcrumbs=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(317),a=n(316),s=n(319),c=n(318),u=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[a.ActiveFacetsTransformationService,c.InactiveFacetsTransformationService],imports:[o.ActiveFacetsTransformationsModule,s.InactiveFacetsTransformationsModule]})],e)}();t.FacetTransformationModule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(160),c=function(){function e(e,t){this.organizationOrFacetService=e,this.$translate=t}return e.prototype.changeToggle=function(){this.organizationOrFacetService.isOrganizationTree=!this.organizationOrFacetService.isOrganizationTree},Object.defineProperty(e.prototype,"isOrganizationTree",{get:function(){return this.organizationOrFacetService.isOrganizationTree},enumerable:!0,configurable:!0}),e.prototype.getOrganizationTreeTooltip=function(){return this.isOrganizationTree?this.$translate.instant("nui.organizationtree.icon.tooltip.gotofacets"):this.$translate.instant("nui.organizationtree.icon.tooltip.gotoresearchunits")},e.prototype.getOrganizationTreeLabel=function(){return this.isOrganizationTree?this.$translate.instant("nui.organizationtree.icon.label.gotofacets"):this.$translate.instant("nui.organizationtree.icon.label.gotoresearchunits")},e=r([a.Component({selector:"prm-organization-or-facet-toggle",templateUrl:"components/journals/organizationOrFacetToggle/organization-or-facet-toggle.html"}),o(1,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.OrganizationOrFacetToggleService&&s.OrganizationOrFacetToggleService)&&t||Object,Object])],e);var t}();t.PrmOrganizationOrFacetToggle=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(178);n(710);var a=n(711),s=n(238),c=n(714),u=n(43),l=n(715),f=n(716),p=n(239),d=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmAdvancedSearch,l.PrmSearchBar,c.PrmTabsAndScopesSelector,f.PrmVoiceSearchToast],providers:[o.SearchBarService,s.TabsAndScopesSelectorService,p.VoiceSearchToastService],imports:["puElasticInput",u.default.name]})],e)}();t.SearchBarModule=d},function(e,t,n){"use strict";angular.module("puElasticInput",[]).directive("puElasticInput",["$document","$window",function(e,t){function n(e,t){var n="";if(window.getComputedStyle)n=getComputedStyle(e).getPropertyValue(t);else if(e.currentStyle)try{n=e.currentStyle[t]}catch(e){}return n}function r(e){var t,r=e[0];do r=r.parentNode,t=parseInt(n(r,"width"),10)-parseInt(n(r,"padding-left"),10)-parseInt(n(r,"padding-right"),10);while("block"!=n(r,"display")&&"body"!=r.nodeName.toLowerCase());return t+"px"}function i(e,n,i){var o=t.getComputedStyle(n[0]),a="none"===o.maxWidth?r(n):o.maxWidth;n.css("minWidth",i.puElasticInputMinwidth||o.minWidth),n.css("maxWidth",i.puElasticInputMaxwidth||a),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing"],function(t){e.css(t,o[t])}),e.css("paddingLeft",o.textIndent),"border-box"===o.boxSizing?angular.forEach(["paddingLeft","paddingRight","borderLeftStyle","borderLeftWidth","borderRightStyle","borderRightWidth"],function(t){e.css(t,o[t])}):"padding-box"===o.boxSizing&&angular.forEach(["paddingLeft","paddingRight"],function(t){e.css(t,o[t])})}var o=angular.element('<div style="position:fixed; top:-999px; left:0;"></div>');return angular.element(e[0].body).append(o),{restrict:"A",link:function(e,t,n){function r(){var e=t.val()||n.placeholder||"";if(a.text()!=e){a.text(e);var r=parseInt(n.puElasticInputWidthDelta)||1;t.css("width",a.prop("offsetWidth")+r+"px")}}n.$set("ngTrim","true"===n.ngTrim?"true":"false");var a=angular.element('<span style="white-space:pre;">&#000;</span>');i(a,t,n),o.append(a),r(),e.$watch(n.ngModel,r),t.on("keydown keyup focus input propertychange change",r),e.$on("$destroy",function(){a.remove()})}}}])},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(11),u=n(14),l=n(178),f=n(1),p=n(1),d=n(1),h=n(1),m=n(1),g=n(1),y=n(1),v=n(19),b=n(1),S=n(30),_=n(6),O=n(33),T=n(4),E=n(7),w=n(69),I=n(66),R=n(24),P=n(3),j=function(){function e(e,t,n,r,i,o,s,c,u,l,m,v,S,_){this.$mdDateLocaleProvider=e,this.searchService=t,this.searchFieldsService=n,this.$stateParams=r,this.searchBarService=i,this.alertService=o,this.primolyticsService=s,this.smoothScrollUtil=c,this.$state=u,this.configurationUtil=l,this.jwtUtilService=m,this.$scope=v,this.$translate=S,this.i18nService=_,this.updateFindInDbEvent=new a.EventEmitter,this.searchTabs=f.getTabs(),this.scopes=p.getScopeList(),this.queryTerms=g.getQueryTerms(),this.searchConfig=d.getSearchConfiguration(),this.UIComponents=y.getUIComponents(),this.invokeAutomaticSearch=b.getAttributesMap().tabsRemote,this.vid=h.getVid(),this.limit=2,this.isDateRange=!1,this.error=!1,this.startYear="",this.endYear="",this.isStartsWithSearch=!1,this.yearRegex="-?\\d+",this.langsList=[],this.langsMap={},this.isDayOrMonthListIsOpen=!1,this.selectedComp="",this.selectedLanguage=_.getLanguage()}return e.prototype.ngOnInit=function(){var e=this;this.errorCode="",this.initSelectedTab(),this.scopesOptions=this.getScopesOptionsByTab(this.selectedSearchTab),this.initSelectedScope(),this.dispalyServerMap={},this.serverDispalyMap={},this.filterTabByEmptyScope(),this.getComplexLine(),this.fillComplexLineFromUrl(),this.fillPreFiltersFromUrl(),!this.isAdvanced()&&this.typedQuery&&(this.rowArray[0].searchQuery=this.typedQuery),this._signInAlert=this.alertService.create(S.ALERT_MSG_TYPE.SIGNIN),this._signInAlert.show("nui.search.tnsearch.error.authorization"),this.smoothScrollUtil.focusOn("advanced-search"),this.$scope.$watch(function(){return e.rowArray[0].searchQuery},function(){e.typedQuery=e.rowArray[0].searchQuery})},e.prototype.initSelectedScope=function(){return this.selectedScope?void(this.scope=this.selectedScope):void(this.isAdvanced()&&this.$stateParams.search_scope&&this.scopesOptions.indexOf(this.$stateParams.search_scope)===-1?this.error=!0:this.isAdvanced()&&this.$stateParams.search_scope&&this.scopesOptions.indexOf(this.$stateParams.search_scope)!==-1&&(this.scope=this.$stateParams.search_scope))},e.prototype.isAdvanced=function(){return!(!this.searchFieldsService.searchParams||"advanced"!==this.searchFieldsService.searchParams.mode)},e.prototype.filterTabByEmptyScope=function(){var e=this;this.searchTabs=this.searchTabs.filter(function(t){if(!I(e.getScopesOptionsByTab(t)))return t})},e.prototype.initSelectedTab=function(){this.selectedTab?this.selectedSearchTab=this.selectedTab:this.$stateParams.tab&&this.searchTabs.indexOf(this.$stateParams.tab)===-1?this.error=!0:this.$stateParams.tab&&this.searchTabs.indexOf(this.$stateParams.tab)!==-1?this.selectedSearchTab=this.$stateParams.tab:this.$stateParams.tab||(this.selectedSearchTab=this.searchTabs[0])},e.prototype.initRowArray=function(){this.rowArray=[{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""}]},e.prototype.filterEmpty=function(e){if(""!==e)return e},e.prototype.getScopesOptionsByTab=function(e){var t=this.scopes.map(function(t){if(t.tab===e)return t["scope-id"]}).filter(this.filterEmpty);return w(t)},e.prototype.setScopes=function(){this.scopesOptions=this.getScopesOptionsByTab(this.selectedSearchTab),this.scope=this.scopesOptions[0]},e.prototype.changeSearchFields=function(){this.clearForm=!1,this.errorCode="",this.setScopes(),this.getComplexLine(),"true"===this.invokeAutomaticSearch&&this.textAppears()&&this.search(),this.updateFindInDbEvent.emit(this.selectedSearchTab)},e.prototype.getComplexLine=function(){var e=this,t=this.rowArray;this.dispalyServerMap={},this.serverDispalyMap={},this.searchOperator="",this.serachOptions=[],this.searchCategory="",this.searchCategoryOptions=[],this.boolOperator="",this.boolOptions=[],this.langsList=[];var n=this.configurationUtil.getTile("SearchTileInterface-Advanced",m.getTabToTiles(this.selectedSearchTab)),r=this.searchConfig[n].qtvinstance,i=this.searchConfig[n].alphabeticLanguagesSort,o=this.complexLines(r);if(o.length>0){var a=o[0],s=this.queryTerms[a];this.UIComponents.boolOperator||(this.UIComponents.boolOperator={defaultOption:"AND",displayOptions:["AND","OR","NOT"],options:["AND","OR","NOT"],indexFields:["AND","OR","NOT"]}),this.boolOperator=this.UIComponents.boolOperator.defaultOption,this.boolOptions=this.UIComponents.boolOperator.displayOptions,this.updateMapWithPrecisionBoolOperator(this.UIComponents.boolOperator);for(var c=s.map(function(e){if("freeText"!==e&&"boolOperator"!==e)return e}).filter(this.filterEmpty),u=0;u<c.length;u++)this.UIComponents[c[u]]&&"precisionOperator"===this.UIComponents[c[u]].type._string?(this.searchOperator=this.UIComponents[c[u]].defaultOption,this.serachOptions=this.UIComponents[c[u]].displayOptions,this.updateMapWithPrecisionBoolOperator(this.UIComponents[c[u]])):this.UIComponents[c[u]]&&"scope"===this.UIComponents[c[u]].type._string&&(this.searchCategory=this.getDefaultSerachCategory(this.UIComponents[c[u]].defaultOption,this.UIComponents[c[u]].displayOptions),this.searchCategoryOptions=this.UIComponents[c[u]].displayOptions,this.updateMapWithIndexField(this.UIComponents[c[u]]));this.initRowArray(),t&&this.copyRowsFromTabToTab(t)}var l=this.language?this.language.selection:"",f=this.materialType?this.materialType.selection:"",p=this.publicationData?this.publicationData.selection:"",d=this.isDateRange?this.startDay.selection:"",h=this.isDateRange?this.startMonth.selection:"",g=this.isDateRange?this.endDay.selection:"",y=this.isDateRange?this.endMonth.selection:"",v=this.isDateRange&&this.startYear?this.startYear:"",b=this.isDateRange&&this.endYear?this.endYear:"";this.language=this.getPreFilterByType(r,".language"),I(this.language)||this.language.displayOptions.map(function(t){e.$translate("search-advanced.language.option."+t).then(function(n){if(e.langsList.push(n),e.langsMap[n]=t,i){var r=new Intl.Collator(e.selectedLanguage,{usage:"sort"});e.langsList.sort(r.compare)}})}),this.materialType=this.getPreFilterByType(r,".mediaType"),this.publicationData=this.getPreFilterByType(r,".publicationData"),this.isDateRange=this.getDateRangeFilter(r),!I(this.publicationData)&&this.isDateRange&&(this.publicationData.displayOptions.splice(1,0,"specificDate"),this.publicationData.options.splice(1,0,"specificDate")),l&&!I(this.language)&&this.language.displayOptions.indexOf(l)!==-1&&(this.language.selection!==l&&(this.clearForm=!0),this.language.selection=l),f&&!I(this.materialType)&&this.materialType.displayOptions.indexOf(f)!==-1&&(this.materialType.selection!==f&&(this.clearForm=!0),this.materialType.selection=f),p&&!I(this.publicationData)&&this.publicationData.displayOptions.indexOf(p)!==-1&&(this.publicationData.selection!==p&&(this.clearForm=!0),this.publicationData.selection=p),this.isDateRange&&(d&&(this.startDay.selection=d),h&&(this.startMonth.selection=h),g&&(this.endDay.selection=g),y&&(this.endMonth.selection=y),this.startYear=v,this.endYear=b,this.isDate()&&(this.clearForm=!0,I(this.publicationData)||p||(this.publicationData.selection="specificDate")))},e.prototype.copyRowsFromTabToTab=function(e){for(var t=0,n=0;n<this.limit;n++)e[n].searchQuery&&(this.boolOptions.indexOf(e[n].boolOperator)!==-1&&(this.rowArray[n].boolOperator=e[n].boolOperator),this.serachOptions.indexOf(e[n].searchOperator)!==-1&&(this.rowArray[n].searchOperator=e[n].searchOperator),this.searchCategoryOptions.indexOf(e[n].searchCategory)!==-1&&(this.rowArray[n].searchCategory=e[n].searchCategory),this.rowArray[n].searchQuery=e[n].searchQuery,t=n,this.clearForm=!0);this.limit=Math.max(2,t+1)},e.prototype.fillComplexLineFromUrl=function(){var e=this,t=this.$stateParams.query;t&&(t=R([t]),this.rowArray[0].boolOperator="AND",t.forEach(function(t,n,r){var i=t.split(",");e.rowArray[n].searchCategory=e.serverDispalyMap[i[0]]?e.serverDispalyMap[i[0]].display:i[0],e.rowArray[n].searchOperator=e.serverDispalyMap[i[1]]?e.serverDispalyMap[i[1]].display:i[1];var o=i[2];if(i.length>3){var a=i.slice(2,i.length-1);o=a.join(",")}e.rowArray[n].searchQuery=o,n+1<e.rowArray.length&&(e.rowArray[n+1].boolOperator="AND",i[i.length-1]&&P(e.serverDispalyMap[i[i.length-1]],"display")&&(e.rowArray[n+1].boolOperator=P(e.serverDispalyMap[i[i.length-1]],"display")))}),t.length>2&&(this.limit=t.length))},e.prototype.fillPreFiltersFromUrl=function(){var e=this,t=this.$stateParams.pfilter;if(t){t=R([t]);var n=!1;t.forEach(function(t,r,i){var o=t.split(",");"lang"===o[0]?e.language.selection=e.getPreFilterFordisplay(e.language,o[2]):"pfilter"===o[0]||"rtype"===o[0]?e.materialType.selection=e.getPreFilterFordisplay(e.materialType,o[2]):"creationdate"===o[0]?e.publicationData.selection=e.getPreFilterFordisplay(e.publicationData,o[2]):"dr_s"===o[0]||"cdate"===o[0]&&!n?(I(e.publicationData)||(e.publicationData.selection="specificDate"),e.startYear=o[2].substring(0,o[2].length-4),e.startMonth.selection=o[2].substring(o[2].length-4,o[2].length-2),e.startDay.selection=o[2].substring(o[2].length-2,o[2].length),n=!0):("dr_e"===o[0]||"cdate"===o[0]&&n)&&(e.endYear=o[2].substring(0,o[2].length-4),e.endMonth.selection=o[2].substring(o[2].length-4,o[2].length-2),e.endDay.selection=o[2].substring(o[2].length-2,o[2].length))})}},e.prototype.updateMapWithIndexField=function(e){var t=this;e.displayOptions&&e.displayOptions.forEach(function(n,r,i){t.dispalyServerMap[n]={send:e.indexFields[r]}}),e.indexFields&&e.indexFields.forEach(function(n,r,i){t.serverDispalyMap[n]={display:e.displayOptions[r]}})},e.prototype.updateMapWithPrecisionBoolOperator=function(e){var t=this;e.displayOptions&&e.displayOptions.forEach(function(n,r,i){t.dispalyServerMap[n]={send:e.options[r]}}),e.options&&e.options.forEach(function(n,r,i){t.serverDispalyMap[n]={display:e.displayOptions[r]}})},e.prototype.getDefaultSerachCategory=function(e,t){var n="";return n=e.length>0?e:t[0]},e.prototype.showDateRange=function(){return!(!I(this.publicationData)||I(this.isDateRange))},e.prototype.getPreFilterByType=function(e,t){var n=this,r=e.map(function(e){if(e.qtvid.includes(t)&&n.queryTerms[e.qtvid])return n.UIComponents[n.queryTerms[e.qtvid][0]]}).filter(this.filterEmpty)[0];if(r){var i=w(r.displayOptions.slice()),o=r.defaultOption?r.defaultOption:i[0],a={label:r.type._string,options:w(r.options.slice()),displayOptions:i,indexField:r.indexFields[0],defaultOption:o,selection:o};return a}return{}},e.prototype.getDateRangeFilter=function(e){var t=this,n=e.map(function(e){if(e.qtvid.includes(".date_range"))return t.queryTerms[e.qtvid]}).filter(this.filterEmpty);if(I(n))return!1;var r=n[0].map(function(e){return t.UIComponents[e]});return this.startDay=this.getDate(r,"drStartDay"),this.startDay.selection=this.startDay.defaultOption,this.endDay=this.getDate(r,"drEndDay"),this.endDay.selection=this.endDay.defaultOption,this.startMonth=this.getDate(r,"drStartMonth"),this.startMonth.selection=this.startMonth.defaultOption,this.endMonth=this.getDate(r,"drEndMonth"),this.endMonth.selection=this.endMonth.defaultOption,this.startYear="",this.endYear="",!0},e.prototype.isDateValid=function(){var e="";if(this.startYear=this.changeDate(this.startYear),this.endYear=this.changeDate(this.endYear),"start_day"!==this.startDay.selection&&"start_month"===this.startMonth.selection||"start_month"!==this.startMonth.selection&&""===this.startYear)e="search.search.error.startDateInvalid";else if("end_day"!==this.endDay.selection&&"end_month"===this.endMonth.selection||"end_month"!==this.endMonth.selection&&""===this.endYear)e="search.search.error.endDateInvalid";else if(this.isLegalDate(this.startYear)&&this.isLegalDate(this.endYear))if(""!==this.startYear&&""!==this.endYear){var t=parseInt(this.startYear),n=parseInt(this.endYear);n<t?e="search.search.error.startLaterThanEnd":n===t&&"start_month"!==this.startMonth.selection&&"end_month"!==this.endMonth.selection&&(this.endMonth.selection<this.startMonth.selection?e="search.search.error.startLaterThanEnd":this.startMonth.selection===this.endMonth.selection&&"start_day"!=this.startDay.selection&&"end_day"!=this.endDay.selection&&this.endDay.selection<this.startDay.selection&&(e="search.search.error.startLaterThanEnd"))}else""===this.startYear&&""!==this.endYear&&this.isBcDate(this.endYear)&&(e="search.search.error.startLaterThanEnd");else e="search.search.error.yearOutOfRange";return e},e.prototype.isLegalDate=function(e){return""==e||!(this.isBcDate(e)&&e.length>5||!this.isBcDate(e)&&e.length>4&&"0"!==e.substring(0,1))},e.prototype.isBcDate=function(e){return e&&0===e.indexOf("-")},e.prototype.isDate=function(){return"start_day"!==this.startDay.selection||"start_month"!==this.startMonth.selection||""!==this.startYear||"end_day"!==this.endDay.selection||"end_month"!==this.endMonth.selection||""!==this.endYear},e.prototype.getDate=function(e,t){return e.filter(function(e){if(e.type._string===t)return e})[0]},e.prototype.complexLines=function(e){var t=e.map(function(e){if(e.qtvid.includes("searchbox_complex"))return e.qtvid}).filter(this.filterEmpty);return t},e.prototype.incrementLimit=function(){this.limit+=1,this.clearForm=!0},e.prototype.clearSearchForm=function(){this.initRowArray(),this.scope=this.scopesOptions[0],this.clearForm=!1,this.errorCode="",this.limit=2,I(this.language)||(this.language.selection=this.language.defaultOption),I(this.materialType)||(this.materialType.selection=this.materialType.defaultOption),I(this.publicationData)||(this.publicationData.selection=this.publicationData.defaultOption),this.isDateRange&&(this.startDay.selection="start_day",this.startMonth.selection="start_month",this.startYear="",this.endDay.selection="end_day",this.endMonth.selection="end_month",this.endYear="")},e.prototype.specificDate=function(){return!!(I(this.publicationData)&&this.isDateRange||!I(this.publicationData)&&"specificDate"===this.publicationData.selection)},e.prototype.onChange=function(){this.clearForm=!0},e.prototype.onOpen=function(){this.isDayOrMonthListIsOpen=!0},e.prototype.onClose=function(){this.isDayOrMonthListIsOpen=!1},e.prototype.getPlaceHolders=function(){return{idx_0:this.selectedCompStr}},e.prototype.setSelectedCompStr=function(e){this.selectedComp=e},Object.defineProperty(e.prototype,"selectedCompStr",{get:function(){return this.selectedComp},enumerable:!0,configurable:!0}),e.prototype.changeOperator=function(e){"startswith"===this.rowArray[e].searchOperator&&this.searchCategoryOptions.indexOf("title")!==-1&&(this.rowArray[e].searchCategory="title"),this.clearForm=!0,this.changeSortbyForOperator(this.rowArray[e].searchOperator)},e.prototype.changeSortbyForOperator=function(e){switch(e){case"startswith":this.sortby="title";break;case"contains":this.sortby="rank";break;case"exact":this.sortby="rank";break;default:this.sortby="rank"}},e.prototype.textAppears=function(){return!!(this.rowArray[0].searchQuery||this.rowArray[1].searchQuery||this.rowArray[2].searchQuery||this.rowArray[3].searchQuery||this.rowArray[4].searchQuery||this.rowArray[5].searchQuery||this.rowArray[6].searchQuery)},e.prototype.search=function(){if(this.errorCode="",this.specificDate()&&this.isDate()&&(this.errorCode=this.isDateValid()),!this.errorCode){var e=this.createQuery();this.searchFieldsService.scope=this.scope,this.selectedScope=this.scope,this.searchFieldsService.tab=this.selectedSearchTab,this.selectedTab=this.selectedSearchTab,this.showTabAndScopes=!0,this.typedQuery=this.rowArray[0].searchQuery,this.goToSearch(e.query)}},e.prototype.goToSearch=function(e){var t=e.split(";"),n=t.filter(function(e){return!e.match("(facet_|dr_s|dr_e|lang|rtype|cdate).*,exact,.*,AND")}),r=t.filter(function(e){return e.match("(facet_|dr_s|dr_e|lang|rtype|cdate).*,exact,.*,AND")}).map(function(e){return e.replace("facet_","")}),i={mode:"advanced",vid:this.vid,query:n,pfilter:r,tab:this.selectedTab,search_scope:this.selectedScope,facet:[],mfacet:[],offset:0};this.sortby&&(i.sortby=this.sortby,this.sortby=""),this.searchFieldsService.searchParams=i,this.$state.go(T.STATE_NAMES.SEARCH,i,{reload:T.STATE_NAMES.SEARCH})},e.prototype.createQuery=function(){var e=this.getQueriesWithText();return I(this.language)||"all_items"===this.language.selection||"any"===this.language.selection||(e+=this.language.indexField+",exact,"+this.getPreFilterForServer(this.language)+",AND;"),I(this.materialType)||"all_items"===this.materialType.selection||"any"===this.materialType.selection||(e+=this.materialType.indexField+",exact,"+this.getPreFilterForServer(this.materialType)+",AND;"),I(this.publicationData)||"all_items"===this.publicationData.selection||"specificDate"===this.publicationData.selection?this.specificDate()&&this.isDate()&&(this.fillEmptyDateFields(),this.startYear=this.zeroPadYear(this.startYear),this.endYear=this.zeroPadYear(this.endYear),e+=this.startDay.indexFields[0]+",exact,"+this.startYear+this.getPreFilterForServer(this.startMonth)+this.getPreFilterForServer(this.startDay)+",AND;",e+=this.endDay.indexFields[0]+",exact,"+this.endYear+this.getPreFilterForServer(this.endMonth)+this.getPreFilterForServer(this.endDay)+",AND;"):e+=this.publicationData.indexField+",exact,"+this.getPreFilterForServer(this.publicationData)+",AND;",e=e.slice(0,-1),{query:e}},e.prototype.changeDate=function(e){return e?e&&e.match("^-?0{0,4}0$")&&(e="0000"):e="",e},e.prototype.zeroPadYear=function(e){var t=this.isBcDate(e);return t&&(e=e.substr(1)),1===e.length?e="000"+e:2===e.length?e="00"+e:3===e.length?e="0"+e:5===e.length&&(e=e.slice(1)),t&&(e="-"+e),e},e.prototype.fillEmptyDateFields=function(){var e=this.isBcDate(this.startYear),t=this.isBcDate(this.endYear);("start_day"===this.startDay.selection||e)&&(this.startDay.selection="01"),("start_month"===this.startMonth.selection||e)&&(this.startMonth.selection="01"),""===this.startYear&&(this.startYear="0000"),("end_day"===this.endDay.selection||t)&&(this.endDay.selection="31"),("end_month"===this.endMonth.selection||t)&&(this.endMonth.selection="12"),""===this.endYear&&(this.endYear="9999")},e.prototype.getQueriesWithText=function(){var e=this,t=this.rowArray.filter(function(e){return e.searchQuery}),n="";return this.isStartsWithSearch=!1,t.forEach(function(r,i,o){t[i].searchQuery&&("startswith"===r.searchOperator&&(e.isStartsWithSearch=!0),n+=e.getParamForServer(t[i].searchCategory)+","+e.getParamForServer(e.getSearchOperator(t[i].searchOperator))+","+t[i].searchQuery.split(";").join(" ")+",",n+=i+1<t.length?e.getParamForServer(t[i+1].boolOperator)+";":"AND;")}),n},e.prototype.getPreFilterForServer=function(e){var t=e.displayOptions.indexOf(e.selection);return t!==-1?e.options[t]:e},e.prototype.getPreFilterFordisplay=function(e,t){var n=e.options.indexOf(t);return n===-1?(this.error=!0,e.selection):e.displayOptions[n]},e.prototype.getLangCode=function(e){return this.langsMap[e]},e.prototype.getParamForServer=function(e){return this.dispalyServerMap[e]?this.dispalyServerMap[e].send:e},e.prototype.getSearchOperator=function(e){return""!==e?e:"contains"},e.prototype.getCodeForPublicationDate=function(e){return"specificDate"===e?"nui.search-advanced.publicationDate.option.":"search-advanced.publicationDate.option."},e.prototype.firstQuery=function(){for(var e=0;e<this.rowArray.length;e++)if(this.rowArray[e].searchQuery)return e;return-1},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this.searchBarService.showSignIn},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"isEdgeOrIE",{get:function(){return v.isBrowserIE()||v.isBrowserEdge()},enumerable:!0,configurable:!0}),e.prototype.removeReadonly=function(e){this.isEdgeOrIE&&(e.target.readOnly=!1)},e.prototype.addReadonly=function(e){this.isEdgeOrIE&&(e.target.readOnly=!0)},r([a.Input(),i("design:type",String)],e.prototype,"selectedScope",void 0),r([a.Input(),i("design:type",String)],e.prototype,"selectedTab",void 0),
r([a.Input(),i("design:type",Boolean)],e.prototype,"showTabAndScopes",void 0),r([a.Input(),i("design:type",String)],e.prototype,"typedQuery",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"updateFindInDbEvent",void 0),e=r([a.Component({providers:[],selector:"prm-advanced-search",templateUrl:"components/search/searchBar/advanced-search-header.html"}),o(0,a.Inject("$mdDateLocale")),o(3,a.Inject("$stateParams")),o(8,a.Inject("$state")),o(11,a.Inject("$scope")),o(12,a.Inject("$translate")),o(13,a.Inject("I18nService")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.SearchService&&c.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.SearchFieldsService&&u.SearchFieldsService)&&n||Object,Object,"function"==typeof(j="undefined"!=typeof l.SearchBarService&&l.SearchBarService)&&j||Object,"function"==typeof(A="undefined"!=typeof S.AlertFactory&&S.AlertFactory)&&A||Object,"function"==typeof(C="undefined"!=typeof _.PrimolyticsService&&_.PrimolyticsService)&&C||Object,"function"==typeof($="undefined"!=typeof O.SmoothScrollUtil&&O.SmoothScrollUtil)&&$||Object,Object,"function"==typeof(D="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&D||Object,"function"==typeof(L="undefined"!=typeof E.JwtUtilService&&E.JwtUtilService)&&L||Object,Object,Object,Object])],e);var t,n,j,A,C,$,D,L}();t.PrmAdvancedSearch=j},function(e,t,n){function r(e,t){return i(e,a(t,3),o)}var i=n(713),o=n(213),a=n(36);e.exports=r},function(e,t){function n(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(238),s=n(1),c=n(2),u=function(){function e(e,t){this.tabsAndScopesSelectorService=e,this.configurationUtil=t,this.searchScopesMap=s.getSearchScopesMap(),this.updateFindInDbEvent=new o.EventEmitter,this.changeTabEvent=new o.EventEmitter,this.updateScopes(),this._tabOptions=Object.keys(this.searchScopesMap)}return e.prototype.ngAfterViewInit=function(){this.tab=this.tab||this._tabOptions[0],this._scopeOptions=this.searchScopesMap[this.tab],this.tabsAndScopesSelectorService.updateIsRemoteTab(this.tab)},Object.defineProperty(e.prototype,"scope",{get:function(){return this.selectedScope},set:function(e){this.selectedScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab",{get:function(){return this.selectedTab},set:function(e){this.selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabOptions",{get:function(){return this._tabOptions},enumerable:!0,configurable:!0}),e.prototype.onTabChange=function(){this.scope=this.scopeOptions[0]["scope-id"],this.tabsAndScopesSelectorService.updateIsRemoteTab(this.tab),this.updateFindInDbEvent.emit(this.tab),this.changeTabEvent.emit()},e.prototype.showScopesSelect=function(){return this.scopeOptions.length>1},e.prototype.showTabsSelect=function(){return this.tabOptions.length>1},Object.defineProperty(e.prototype,"scopeOptions",{get:function(){return this.searchScopesMap[this.tab]},enumerable:!0,configurable:!0}),e.prototype.updateScopes=function(){var e=this;this.configurationUtil.isSuprima()||this.tabsAndScopesSelectorService.updateScopes().then(function(t){s.updateSearchScopesMap(t.data),e.searchScopesMap=s.getSearchScopesMap()})},r([o.Input(),i("design:type",String)],e.prototype,"selectedTab",void 0),r([o.Input(),i("design:type",String)],e.prototype,"selectedScope",void 0),r([o.Output(),i("design:type",Object)],e.prototype,"updateFindInDbEvent",void 0),r([o.Output(),i("design:type",Object)],e.prototype,"changeTabEvent",void 0),e=r([o.Component({selector:"prm-tabs-and-scopes-selector",templateUrl:"components/search/searchBar/tabsAndScopesSelector/tabs-and-scopes-selector.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.TabsAndScopesSelectorService&&a.TabsAndScopesSelectorService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object])],e);var t,n}();t.PrmTabsAndScopesSelector=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(14),c=n(178),u=n(239),l=n(379),f=n(30),p=n(49),d=n(6),h=n(62),m=n(1),g=n(1),y=n(33),v=n(151),b=n(8),S=n(4),_=n(179),O=n(238),T=n(7),E=n(1),w=n(11),I=n(17),R=n(1),P=n(96),j=n(9),A=(n(66),n(184)),C=8,$=n(80),D=function(){function e(e,t,n,r,i,o,s,c,u,l,p,d,h,g,y,v,b,_,O,T,E,w,I,P,j,A,$){var D=this;this.$stateParams=e,this.$location=t,this.scopesIcons=n,this.$scope=r,this.$translate=i,this.searchBoxIcons=o,this.$mdDialog=s,this.$state=c,this.$timeout=u,this.$mdToast=l,this.mediaQueries=p,this.searchFieldsService=d,this.autocompleteService=h,this.searchBarService=g,this.voiceSearchToastService=y,this.alertService=v,this.addQueryToSavedSearchesService=b,this.smoothScrollUtil=_,this.stringUtil=O,this.searchUtil=T,this.tabsAndScopesSelectorService=E,this.jwtUtilService=w,this.searchService=I,this.storageUtil=P,this.mtCache=j,this.preFiltersService=A,this.primolyticsService=$,this.searchEvent=new a.EventEmitter,this.searchScopesMap=m.getSearchScopesMap(),this.DEFAULT_TARGET_OPERATOR="any",this.DEFAULT_SEARCH_OPERATOR="contains",this.focusOnSearchInput=!1,this.vid=m.getVid(),this.pFilters={},this.tabs=[],Object.keys(this.searchScopesMap).slice(0,C).forEach(function(e,t){var n="tabbedmenu."+e+".label",r={tab:e,displayName:""};D.$translate(n).then(function(e){r.displayName=e}),D.tabs.push(r)}),i("nui.search.placeholder").then(function(e){D._placeHolderText=e}),this.initStateFromUrl(e),this.$scope.$on("$stateChangeSuccess",function(t,n){n.name===S.STATE_NAMES.SEARCH&&D.initStateFromUrl(e)}),i("nui.searchField.clear").then(function(e){D._clearButtonText=e}),i("nui.aria.search.searchField").then(function(e){D._searchFieldText=e}),this.scopesDialerConfiguration={display:!1,isOpen:!1,direction:"down",iconsArray:n,autoHideToolTip:!1,toolTipDelay:100,toolTipDirection:"right",tooTipDefaultOpen:!1},this._signInAlert=this.alertService.create(f.ALERT_MSG_TYPE.SIGNIN),this._signInAlert.show("nui.search.tnsearch.error.authorization",!0),"suprima"!==R.getBackendSystem()&&this.updateShowFindDBButton(),this.focusOnSearchInput=1===this.mtCache.getTable(this.mtCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===D.vid&&"focus_on_search_input"===e.source2&&"true"===e.target}).length}return e.prototype.onChangeTabEvent=function(e){var t=this;m.isAutoSearchOnTabChange()&&setTimeout(function(){t.search(e)},0)},Object.defineProperty(e.prototype,"mainSearchField",{get:function(){return this.searchFieldsService.mainSearch},set:function(e){this.searchFieldsService.mainSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scopeField",{get:function(){return this._scopeField},set:function(e){this._scopeField=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoCompleteItems",{get:function(){return this.searchBarService.autoCompleteItems},set:function(e){this.searchBarService.autoCompleteItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this.searchBarService.showSignIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolderText",{get:function(){return this._placeHolderText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearButtonText",{get:function(){return this._clearButtonText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchFieldText",{get:function(){return this._searchFieldText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advancedSearch",{get:function(){return this.searchFieldsService.advancedSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPreFilterEnable",{get:function(){return!this.advancedSearch&&this.preFiltersService.isPreFilterEnable(this.selectedTab)},enumerable:!0,configurable:!0}),e.prototype.search=function(e){this.onSubmit()},e.prototype.getSubmitAriaLabelCode=function(){return this.isPreFilterEnable?"nui.aria.continuePreFilters":"nui.aria.submitSearch"},e.prototype.showTabsAndScopesVal=function(){return this.showTabsAndScopes?this.showTabsAndScopes:1===this.tabs.length||void 0},e.prototype.ngOnInit=function(){var e=this;this.autocompleteLength=this.calculateAtocompleteLength(),this.$timeout(function(){if(e.mediaQueries.gtmd&&e.focusOnSearchInput){var t=document.querySelector("#searchBar");t&&t.focus()}},0)},e.prototype.calculateAtocompleteLength=function(){return this.mediaQueries.xs?51:this.mediaQueries.sm?58:this.mediaQueries.md?77:this.mediaQueries.lgPlus?105:this.mediaQueries.lg?94:114},e.prototype.initStateFromUrl=function(e){var t=this,n=this.searchUtil.getValidScope(e.search_scope),r=e.tab;return e.query||r||n?(r?(this.selectedTab=r,n?this.scopeField=n:this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]):n?(this.scopeField=n,this.selectedTab=$(g.getScopeList(),function(e){return e["scope-id"]===t.scopeField}).tab):(this.selectedTab=this.tabs[0].tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.searchFieldsService.tab=this.selectedTab,void(this.showTabsAndScopes=!0)):(this.selectedTab=this.tabs[0].tab,void(this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]))},e.prototype.switchAdvancedSearch=function(){var e=this;this.searchFieldsService.advancedSearch=!this.searchFieldsService.advancedSearch,this.searchFieldsService.advancedSearch||this.smoothScrollUtil.focusOn("searchBar"),this.$location.search("mode",this.searchFieldsService.advancedSearch?"advanced":"simple"),this.$timeout(function(){if(1==e.advancedSearch)return document.querySelector("#advanced-search").focus()},100)},e.prototype.parseResults=function(e){var t=this,n=[];if(this.tabs.length>1&&n.push(this.tabs),e.length>0){var r=e.slice(0,C-this.tabs.length).map(function(e){var n=t.autocompleteLength,r=t.stringUtil.abbreviate(e,n),i={display:e,shortDisplay:r};return i});n.push(r)}return n},e.prototype.autocompleteQuery=function(e){var t=this;this.typedQuery=e;var n=document.getElementsByTagName("body")[0];this.autocompleteService.isAutocompleteEnabledFor(this.scopeField)?("false"===this.hasSearchResults&&n.setAttribute("style","overflow-x: hidden"),this.autoCompleteItems=this.autocompleteService.search(e,this.scopeField).then(function(e){var n=t.parseResults(e);return n},function(){var e=t.parseResults([]);return e})):this.autoCompleteItems=this.parseResults([])},e.prototype.onSelectItem=function(){this.selectedItem&&(this.selectedItem.tab&&(this.selectedTab=this.selectedItem.tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.onSubmit(),"suprima"!==R.getBackendSystem()&&this.updateShowFindDBButton())},e.prototype.onSubmit=function(){if(this.showTabsAndScopes=!0,this.mainSearchField){window.appPerformance.timeStamps["search button clicked"]=Date.now(),this.typedQuery=this.mainSearchField,this.autoCompleteItems=[],this._scopeField||this.selectedTab||(this.selectedTab=this.tabs[0].tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.searchFieldsService.tab=this.selectedTab,this.searchFieldsService.scope=this.scopeField,this.$location.search().tab!==this.selectedTab;var e=this.createSearchEvent();this.searchEvent.emit(e)}},e.prototype.onVoiceSearchStart=function(){if(A){var e=this,t={"*searchString":function(t){e.executeVoiceSearch(t,e)}};A.removeCommands(),A.addCommands(t),A.start(),this.openVoiceSearchToast()}},e.prototype.executeVoiceSearch=function(e,t){t.searchService.cameFromState="voiceSearch",t.mainSearchField=e,t.executeVoiceSearchBeacon(),t.onSubmit(),t.voiceSearchToastService.executeVoiceSearch(e)},e.prototype.openVoiceSearchToast=function(){var e=this,t="<prm-voice-search-toast></prm-voice-search-toast>";this.$mdToast.show({hideDelay:6e4,position:"top right",template:t}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},e.prototype.executeVoiceSearchBeacon=function(){},e.prototype.createSearchEvent=function(){var e={mainSearchField:this.getMainSearchField(),scopeField:this.scopeField,tab:this.selectedTab,mode:null,facet:[],mfacet:[]};return this.pFilters.mediaType&&(e.pfilter=["pfilter,exact,"+this.pFilters.mediaType],"suprima"===R.getBackendSystem()&&(e.pfilter=["rtype,exact,"+this.pFilters.mediaType])),this.searchService.cameFromState=this.isPreFilterSubmitted()?"preFilter":this.searchService.cameFromState,e},e.prototype.getMainSearchField=function(){var e=[];return e.push(this.pFilters.targetField||this.DEFAULT_TARGET_OPERATOR),e.push(this.pFilters.operator||this.DEFAULT_SEARCH_OPERATOR),e.push(this.mainSearchField),e.join(",")},e.prototype.addTabToUrl=function(){this.$location.search("tab",this.searchFieldsService.tab)},e.prototype.updateShowFindDBButton=function(e){var t=e?e:this.selectedTab;this.tabsAndScopesSelectorService.updateIsRemoteTab(t);var n=!!m.getFindInDbPerTabs()[t]&&m.getFindInDbPerTabs()[t];this.isShowFindDBButton=this.tabsAndScopesSelectorService.isRemoteTab||n},e.prototype.isPreFilterSubmitted=function(){return this.pFilters.mediaType||this.pFilters.targetField&&this.pFilters.targetField!==this.DEFAULT_TARGET_OPERATOR||this.pFilters.operator&&this.pFilters.operator!==this.DEFAULT_SEARCH_OPERATOR},e.prototype.onFindDBDialogClose=function(e){var t=this;this.tabsAndScopesSelectorService.updateScopes().then(function(n){if(m.updateSearchScopesMap(n.data),e&&e.selectedSetId){var r="Current Session"===e.selectedSetId?"Selected_Databases":e.selectedSetId,i=t.tabsAndScopesSelectorService.findTabByScopeName(r);if(!i)return void console.log('error could not find "find DB" selected scope in any tab');var o=t.$state.params;o.tab=i,o.search_scope=r,t.$state.transitionTo(t.$state.current,o,{reload:!0})}else t.$state.reload()})},e.prototype.openFdbIframe=function(){var e=this,t=this,n=this.$mdDialog.show({bindToController:!0,controller:function(){this.displayFDBNothingSelectedErr=!1;var e=t.jwtUtilService.getPdsHandle(),n=e?"":t.jwtUtilService.getDecodedToken().user;this.getUrl=function(){return t.$location.protocol()+"://"+t.$location.host()+":"+t.$location.port()+"/primo_library/libweb/action/searchDB.do?fn=nuiSearchDbIframe&vid="+t.vid+"&pds_handle="+e+"&guestID="+n},this.closeDialog=function(){t.$mdDialog.hide()},this.goToSearch=function(){var e=t.storageUtil.localStorage.getItem("selectedSetId");if(e){t.storageUtil.localStorage.removeItem("selectedSetId");var n=JSON.parse(e);t.$mdDialog.hide(n)}else this.displayFDBNothingSelectedErr=!0}},controllerAs:"ctrl",templateUrl:"components/search/topbar/mainMenu/find-db-dialog-template.html"});n.then(function(t){e.onFindDBDialogClose(t)})},Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=E.getAttributesMap();return"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowFindDBButton",{get:function(){return this._isShowFindDBButton},set:function(e){this._isShowFindDBButton=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showVoiceSearchButton",{get:function(){var e=E.getAttributesMap();return A&&e.displayVoiceSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLandscapeView",{get:function(){return window.matchMedia("(orientation: landscape)").matches},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",String)],e.prototype,"hasSearchResults",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"searchEvent",void 0),r([p.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"switchAdvancedSearch",null),r([d.beacon({p:"voiceSearch",op:"voiceSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"executeVoiceSearchBeacon",null),r([p.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"addTabToUrl",null),e=r([a.Component({selector:"prm-search-bar",templateUrl:"components/search/searchBar/search-bar.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$location")),o(2,a.Inject("scopesIcons")),o(3,a.Inject("$scope")),o(4,a.Inject("$translate")),o(5,a.Inject("searchBoxIcons")),o(6,a.Inject("$mdDialog")),o(7,a.Inject("$state")),o(8,a.Inject("$timeout")),o(9,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,Array,Object,Object,Array,Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof b.MediaQueries&&b.MediaQueries)&&t||Object,"function"==typeof(n="undefined"!=typeof s.SearchFieldsService&&s.SearchFieldsService)&&n||Object,"function"==typeof(D="undefined"!=typeof l.AutoComplete&&l.AutoComplete)&&D||Object,"function"==typeof(L="undefined"!=typeof c.SearchBarService&&c.SearchBarService)&&L||Object,"function"==typeof(k="undefined"!=typeof u.VoiceSearchToastService&&u.VoiceSearchToastService)&&k||Object,"function"==typeof(M="undefined"!=typeof f.AlertFactory&&f.AlertFactory)&&M||Object,"function"==typeof(x="undefined"!=typeof h.AddQueryToSavedSearchesService&&h.AddQueryToSavedSearchesService)&&x||Object,"function"==typeof(F="undefined"!=typeof y.SmoothScrollUtil&&y.SmoothScrollUtil)&&F||Object,"function"==typeof(U="undefined"!=typeof v.StringUtils&&v.StringUtils)&&U||Object,"function"==typeof(B="undefined"!=typeof _.SearchUtil&&_.SearchUtil)&&B||Object,"function"==typeof(N="undefined"!=typeof O.TabsAndScopesSelectorService&&O.TabsAndScopesSelectorService)&&N||Object,"function"==typeof(q="undefined"!=typeof T.JwtUtilService&&T.JwtUtilService)&&q||Object,"function"==typeof(H="undefined"!=typeof w.SearchService&&w.SearchService)&&H||Object,"function"==typeof(V="undefined"!=typeof I.StorageUtil&&I.StorageUtil)&&V||Object,"function"==typeof(Y="undefined"!=typeof j.MappingTablesCache&&j.MappingTablesCache)&&Y||Object,"function"==typeof(z="undefined"!=typeof P.PreFiltersService&&P.PreFiltersService)&&z||Object,"function"==typeof(G="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&G||Object])],e);var t,n,D,L,k,M,x,F,U,B,N,q,H,V,Y,z,G}();t.PrmSearchBar=D},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(8),u=n(1),l=n(239),f=n(9),p=n(2),d=n(184),h=n(113),m=function(){function e(e,t,n,r,i,o,a,s,c,l){var f=this;this.primolyticsService=e,this.$window=t,this.$mdToast=n,this.$timeout=r,this.$translate=i,this.actionsIcons=o,this.configurationUtil=a,this.mappingTablesCache=s,this.voiceSearchToastService=c,this.mediaQueries=l,this.showVoiceSearchLanguages=!0,this.isVoiceSearchToastOpen=!0,this.voiceSearchDidntGetItTimout1=1e4,this.voiceSearchDidntGetItTimout2=2e4,this.voiceSearchDidntGetItCheckTimout=3e4,this.voiceSearchDisplayTimout=3e3,this.voiceSearchListeningTranslation=i.instant("nui.voice_listening"),this.voiceSearchDidntGetItTranslation=i.instant("nui.voice_didntGetIt"),this.voiceSearchDidntGetItCheckTranslation=i.instant("nui.voice_didntGetItCheck"),this.attributesMap=u.getAttributesMap(),this.INTERFACE_LANGUAGE_CODE_PREFIX="mypref.language.option.",this.VOICE_API_LANGUAGE_CODE_PREFIX="voiceSearch.",this.$timeout(function(){f.languages.length>1?document.querySelector("#voiceSearchLanguageButton").focus():document.querySelector("#voiceSearchCloseButton").focus()},300),this.languages=this.getVoiceSearchLanguageList(),this.voiceSearchToastService.lastVoiceSearchLanguage||(this.voiceSearchToastService.lastVoiceSearchLanguage=this.languages[0],this.changeVoiceSearchLanguage()),document.getElementById("voiceSearchToast").addEventListener("keydown",function(e){"Escape"!==e.key&&"backspace"!==e.key||this.onDismiss()}.bind(this),!1),window.onpopstate=function(){window.onpopstate=void 0,f.onDismiss()},this.showVoiceSearchLanguages=this.languages.length>1,this.startTimers()}return e.prototype.ngOnInit=function(){},e.prototype.onDismiss=function(){var e=this;this.isVoiceSearchToastOpen=!1,this.$timeout(function(){document.querySelector("#voiceSearchButton").focus(),e.voiceSearchExitBeacon(),e.voiceSearchToastService.onDismiss()},100)},e.prototype.changeVoiceSearchLanguage=function(){if(d){var e=this.voiceSearchLanguage.split(".").pop();if(this.configurationUtil.isSuprima()){var t=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.VOICE_SEARCH_LANGUAGES,{source1:e});t&&t.length>0&&t[0].source2&&(e=t[0].source2)}d.abort(),d.setLanguage(e),d.start()}},e.prototype.getVoiceSearchLanguageList=function(){var e=this,t=[],n=this.mappingTablesCache.getTable(this.mappingTablesCache.tables.VOICE_SEARCH_LANGUAGES_ACTIVATION);if(n&&n.length>0)n=h(n,[function(e){return parseInt(e.source2)}]),t=n.map(function(t){return e.VOICE_API_LANGUAGE_CODE_PREFIX+t.target});else for(var r=this.attributesMap.interfaceLanguageOptions.split(","),i=0,o=r;i<o.length;i++){var a=o[i];if(this.configurationUtil.isSuprima())t.push(this.INTERFACE_LANGUAGE_CODE_PREFIX+a);else{var s=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.VOICE_SEARCH_LANGUAGES,{source1:a});s&&s.length>0&&s[0].source2&&t.push(this.VOICE_API_LANGUAGE_CODE_PREFIX+s[0].source2)}}return t},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.startTimers=function(){var e=this;this.voiceSearchToastService.voiceSearchTitle=this.voiceSearchListeningTranslation,this.voiceSearchToastService.waitingVoiceSearchTimerDidntGetIt1=this.$timeout(function(){e.voiceSearchToastService.voiceSearchTitle=e.voiceSearchDidntGetItTranslation,e.voiceSearchDidntGetItBeacon(),e.$timeout(function(){e.voiceSearchToastService.voiceSearchTitle=e.voiceSearchListeningTranslation},e.voiceSearchDisplayTimout)},this.voiceSearchDidntGetItTimout1),this.voiceSearchToastService.waitingVoiceSearchTimerDidntGetIt2=this.$timeout(function(){e.voiceSearchToastService.voiceSearchTitle=e.voiceSearchDidntGetItTranslation,e.voiceSearchDidntGetItBeacon(),e.$timeout(function(){e.voiceSearchToastService.voiceSearchTitle=e.voiceSearchListeningTranslation},e.voiceSearchDisplayTimout)},this.voiceSearchDidntGetItTimout2),this.voiceSearchToastService.waitingVoiceSearchTimerDidntGetItCheck=this.$timeout(function(){e.voiceSearchToastService.voiceSearchTitle=e.voiceSearchDidntGetItCheckTranslation,e.voiceSearchDidntGetItCheckBeacon(),e.isVoiceSearchToastOpen=!1,e.$timeout(function(){e.voiceSearchToastService.onDismiss()},e.voiceSearchDisplayTimout)},this.voiceSearchDidntGetItCheckTimout)},e.prototype.keydownSupportVoiceSearchLanguage=function(e){if(9===e.keyCode)return e.preventDefault(),document.querySelector("#voiceSearchCloseButton").focus()},e.prototype.keydownSupportVoiceCloseButton=function(e){if(9===e.keyCode)return e.preventDefault(),this.languages.length>1?document.querySelector("#voiceSearchLanguageButton").focus():document.querySelector("#voiceSearchCloseButton").focus()},Object.defineProperty(e.prototype,"voiceSearchTitle",{get:function(){return this.voiceSearchToastService.voiceSearchTitle},set:function(e){this.voiceSearchToastService.voiceSearchTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceSearchLanguage",{get:function(){return this.voiceSearchToastService.lastVoiceSearchLanguage},set:function(e){this.voiceSearchToastService.lastVoiceSearchLanguage=e},enumerable:!0,configurable:!0}),e.prototype.voiceSearchDidntGetItBeacon=function(){},e.prototype.voiceSearchDidntGetItCheckBeacon=function(){},e.prototype.voiceSearchExitBeacon=function(){},e.prototype.voiceSearchChangeLanguageBeacon=function(){},r([s.beacon({p:"voiceSearch",op:"voiceSearchDidntGetIt"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"voiceSearchDidntGetItBeacon",null),r([s.beacon({p:"voiceSearch",op:"voiceSearchcheckMic"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"voiceSearchDidntGetItCheckBeacon",null),r([s.beacon({p:"voiceSearch",op:"voiceSearchExit"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"voiceSearchExitBeacon",null),r([s.beacon({p:"voiceSearch",op:"changeLanguage"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"voiceSearchChangeLanguageBeacon",null),e=r([a.Component({selector:"prm-voice-search-toast",templateUrl:"components/search/searchBar/voice-search-toast.html"}),o(1,a.Inject("$window")),o(2,a.Inject("$mdToast")),o(3,a.Inject("$timeout")),o(4,a.Inject("$translate")),o(5,a.Inject("featuredActionsIcons")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&t||Object,Object,Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&n||Object,"function"==typeof(m="undefined"!=typeof f.MappingTablesCache&&f.MappingTablesCache)&&m||Object,"function"==typeof(g="undefined"!=typeof l.VoiceSearchToastService&&l.VoiceSearchToastService)&&g||Object,"function"==typeof(y="undefined"!=typeof c.MediaQueries&&c.MediaQueries)&&y||Object])],e);var t,n,m,g,y}();t.PrmVoiceSearchToast=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(96),a=n(718),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmPreFilters],providers:[o.PreFiltersService],imports:[]})],e)}();t.PreFiltersModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(96),c=n(14),u=n(2),l=n(1),f=n(1),p=n(1),d=n(11),h=n(3),m=function(){function e(e,t,n,r,i,o,s,c){var u=this;this.preFiltersService=e,this.searchService=t,this.$scope=n,this.searchBoxIcons=r,this.$stateParams=i,this.$translate=o,this.searchFieldsService=s,this.configurationUtil=c,this.searchEvent=new a.EventEmitter,this.searchConfig=f.getSearchConfiguration(),this.searchTabs=p.getTabs(),this.dependencies={operator:function(e){"begins_with"===e?(u.filters.targetField.backupOptions=u.filters.targetField.options,u.filters.targetField.options=["title"],u.filters.targetField.selection="title",u.preFilters.targetField="title"):u.filters.targetField.backupOptions&&(u.filters.targetField.options=u.filters.targetField.backupOptions,u.addToOptionsInNotExists("targetField","title",!1))}}}return e.prototype.ngOnInit=function(){var e=this;this.updatePreFiltersData(),this.init(),this.$scope.$watch(function(){return e.selectedTab},function(t,n){n!=t&&(e.updatePreFiltersData(),e.tabChanged=!0)}),this.$scope.$watch(function(){return e.searchFieldsService.advancedSearch},function(t,n){n!=t&&e.updateFieldsFromUrl()})},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),e.prototype.onChanged=function(e,t){this.filters[e].replaceValue&&(t=this.filters[e].replaceValue(t)),this.changeOptionsByRelations(e,t),this.preFilters[e]=t},e.prototype.isActive=function(e){return e.selection&&e.selection!==e.defaultValue},e.prototype.search=function(){this.searchEvent.emit()},e.prototype.isPreFiltersAlert=function(){var e="suprima"===f.getBackendSystem()?"any":"all_items",t=this.getValueExceptFor(this.filters.mediaType.selection,e),n=this.getValueExceptFor(this.filters.operator.selection,"contains"),r=this.getValueExceptFor(this.filters.targetField.selection,"any");return!!(t||n||r)&&("searchBar"===document.activeElement.id||(this.tabChanged?(this.tabChanged=!1,!0):void 0))},e.prototype.getPreFiltersAlert=function(){var e="suprima"===f.getBackendSystem()?"any":"all_items",t=this.getValueExceptFor(this.filters.mediaType.selection,e),n=this.getValueExceptFor(this.filters.operator.selection,"contains"),r=this.getValueExceptFor(this.filters.targetField.selection,"any"),i={idx_0:t,idx_1:n,idx_2:r};return this.$translate.instant("nui.aria.alertPreFilters",i)},e.prototype.changeOptionsByRelations=function(e,t){this.dependencies[e]&&this.dependencies[e](t)},e.prototype.init=function(){var e=this;this.updateFieldsFromUrl(),angular.forEach(this.preFilters,function(t,n){e.changeOptionsByRelations(n,t)})},e.prototype.getValueExceptFor=function(e,t){if(e!==t)return e},e.prototype.updateFieldsFromUrl=function(){var e=this.$stateParams.query,t=this.$stateParams.pfilter;if(e&&(angular.isArray(e)&&(e=e[0]),e.split(",").length>=3)){var n=e.split(",")[1];this.addToOptionsInNotExists("operator",n,!0);var r=e.split(",")[0];this.addToOptionsInNotExists("targetField",r,!0)}if(t){angular.isArray(t)||(t=[t]);var i="suprima"===f.getBackendSystem()?"rtype":"pfilter";if(t=t.filter(function(e){return e.split(",")[0]===i}),t&&t[0]&&t[0].split(",").length>=3){var o=t[0].split(",")[2];this.addToOptionsInNotExists("mediaType",o,!0)}}},e.prototype.addToOptionsInNotExists=function(e,t,n){if(this.filters[e].options){var r=this.filters[e].options.filter(function(e){return e===t});0===r.length&&this.filters[e].options.push(t),n&&(this.filters[e].selection=t,this.preFilters[e]=t)}},e.prototype.updatePreFiltersData=function(){var e=this.configurationUtil.getTile("SearchTileInterface-Simple",l.getTabToTiles(this.selectedTab)),t=this.searchConfig[e].qtvinstance,n=this.preFiltersService.getPreFilterByType(t,".MediaType","mediaType"),r=this.preFiltersService.getPreFilterByType(t,".simple.searchBox","precisionOperator"),i=this.preFiltersService.getPreFilterByType(t,".simple.searchBox","scope");
"suprima"===f.getBackendSystem()&&(this.preFiltersService.isRTypePreFilterEnable(this.selectedTab)&&(n=this.preFiltersService.getPreFilterByType(t,".mediaType.","mediaType")),this.preFiltersService.isIndexedPreFilterEnable(this.selectedTab)&&(i=this.preFiltersService.getPreFilterByType(t,".searchbox_complex.","scope"),r=this.preFiltersService.getPreFilterByType(t,".searchbox_complex.","precisionOperator"))),n&&n.length>0&&(n=n[0]),r&&r.length>0&&(r=r[0]),i&&i.length>0&&(i=i[0]);var o="suprima"===f.getBackendSystem()?"any":"all_items";this._filters={mediaType:{options:n.options,translatePrefix:"search-simple.mediaType.option.",selection:h(n,"selection"),display:!0,defaultValue:o,replaceValue:function(e){return e===o?"":e}},operator:{options:h(r,"options"),translatePrefix:"search-simple.precisionOperator.option.",selection:h(r,"selection"),defaultValue:"contains"},targetField:{options:h(i,"options"),translatePrefix:"search-simple.scope.option.",selection:h(i,"selection"),display:!0,defaultValue:"any"}},this.filters.operator.display=!!this.filters.operator.options,this.preFilters.mediaType=this.getValueExceptFor(this.filters.mediaType.selection,o),this.preFilters.operator=this.filters.operator.selection||"contains",this.preFilters.targetField=this.getValueExceptFor(this.filters.targetField.selection,"any")},e.prototype.getLabel=function(e,t){return this.$translate.instant(e+t)},r([a.Input(),i("design:type",String)],e.prototype,"selectedTab",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"preFilters",void 0),r([a.Output(),i("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"searchEvent",void 0),e=r([a.Component({selector:"prm-pre-filters",templateUrl:"components/search/preFilters/pre-filters.html"}),o(2,a.Inject("$scope")),o(3,a.Inject("searchBoxIcons")),o(4,a.Inject("$stateParams")),o(5,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.PreFiltersService&&s.PreFiltersService)&&n||Object,"function"==typeof(m="undefined"!=typeof d.SearchService&&d.SearchService)&&m||Object,Object,Array,Object,Object,"function"==typeof(g="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&g||Object,"function"==typeof(y="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&y||Object])],e);var t,n,m,g,y}();t.PrmPreFilters=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(62),a=n(720),s=n(721),c=n(722),u=function(){function e(){}return e=r([i.NgModule({declarations:[s.PrmAddAlertToast,a.PrmEditNotificationSettings,c.PrmAddQueryToSavedSearches],providers:[o.AddQueryToSavedSearchesService],imports:[]})],e)}();t.SearchSavedQueriesModule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(94),u=n(24),l=function(){function e(e,t,n){this.$mdDialog=e,this.primolyticsService=t,this.savedQueriesService=n,this.emailRegEx=/^(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;](([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+)*$/}return e.prototype.saveEmail=function(){var e=this;if(this.isFormValid()){var t=u([this.id]);this.savedQueriesService.setAlertToSelectedSearches(this.email,t).then(function(t){console.log("entire res:"+JSON.stringify(t)),e.savedQueriesService.getItemsFromApi(),e.addMode?e.setAlertBeacon():"",e.$mdDialog.hide()},function(e){console.log("add failed: ",e)})}},e.prototype.isFormValid=function(){return this.emailRegEx.test(this.email)},e.prototype.close=function(){this.$mdDialog.hide()},e.prototype.setAlertBeacon=function(){this.primolyticsService.doBeaconReport({p:"myAccount",op:"setAlert"},this.savedQueriesService.getItemsFromApi(),this.primolyticsService.getTimestamp())},r([a.Input(),i("design:type",String)],e.prototype,"email",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"id",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"addMode",void 0),e=r([a.Component({selector:"prm-edit-notification-settings",templateUrl:"components/search/savedQueries/editNotificationSettings/edit-notification-settings.html"}),o(0,a.Inject("$mdDialog")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SavedQueriesService&&c.SavedQueriesService)&&n||Object])],e);var t,n}();t.PrmEditNotificationSettings=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(94),c=n(33),u=n(2),l=n(54),f=n(8),p=n(24),d=n(3),h=function(){function e(e,t,n,r,i,o,a){this.$mdDialog=e,this.$mdToast=t,this.savedQueriesService=n,this.smoothScrollUtil=r,this.configurationUtil=i,this.cheetahService=o,this.mediaQueries=a}return e.prototype.ngOnInit=function(){var e=p([this.id]);this.addMode?"undefined"==this.userEmail?this.email="":this.email=this.userEmail:this.email=this.userEmail?this.userEmail:this.savedQueriesService.Items.filter(function(t){return t.ID===e[0]})[0].email},e.prototype.openMoreInfo=function(e){var t='<md-dialog aria-label="" style="display:initial;max-width: 380px;"><md-dialog-content><prm-edit-notification-settings [id]="ctrl.selectedIds" [email]="ctrl.email"[add-mode]="ctrl.addMode"></prm-edit-notification-settings></md-dialog-content></md-dialog>',n=p([this.id]),r=this.email,i=this.addMode,o=this.smoothScrollUtil;this.$mdDialog.show({controllerAs:"ctrl",controller:function(){this.selectedIds=n,this.email=r,this.addMode=i},template:t,parent:angular.element(document.body),focusOnOpen:!1,clickOutsideToClose:!0,onComplete:function(){o.focusOn("input-mail-saved-searches")}})},e.prototype.onDismiss=function(){this.$mdToast.hide()},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.displayAlertForm=function(){if(this.configurationUtil.isSuprima()){var e=this.cheetahService.searchData.scope,t=this.configurationUtil.getScopesObj(e),n=d(t,"[0].locations");if(n){var r=n.split(",");if(1===r.length&&(r.includes("EbscoLocal")||r.includes("WorldCatLocal"))||2===r.length&&r.includes("EbscoLocal")&&r.includes("WorldCatLocal"))return!1}}return!0},r([a.Input(),i("design:type",String)],e.prototype,"userEmail",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"id",void 0),r([a.Input(),i("design:type",String)],e.prototype,"addMode",void 0),e=r([a.Component({selector:"prm-add-alert-toast",templateUrl:"components/search/savedQueries/addAlertToast/add-alert-toast.html"}),o(0,a.Inject("$mdDialog")),o(1,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.SavedQueriesService&&s.SavedQueriesService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SmoothScrollUtil&&c.SmoothScrollUtil)&&n||Object,"function"==typeof(h="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&h||Object,"function"==typeof(m="undefined"!=typeof l.Cheetah&&l.Cheetah)&&m||Object,"function"==typeof(g="undefined"!=typeof f.MediaQueries&&f.MediaQueries)&&g||Object])],e);var t,n,h,m,g}();t.PrmAddAlertToast=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);n(251);var s=n(62),c=n(8),u=function(){function e(e,t,n,r){this.addQueryToSavedSearchesService=e,this.$mdToast=t,this.actionsIcons=n,this.mediaQueries=r}return e.prototype.add=function(){var e=this;this.addQueryToSavedSearchesService.addItems().then(function(t){var n='<prm-add-alert-toast id="'+t.id+'" add-mode="'+!0+'" user-email="'+t.email+'"></prm-add-alert-toast>';e.$mdToast.show({hideDelay:8e3,position:"top right",template:n}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},function(e){console.log("add failed: ",e)})},e=r([a.Component({selector:"prm-add-query-to-saved-searches",templateUrl:"components/search/savedQueries/addQueryToSavedSearches/add-query-to-saved-searches.html"}),o(1,a.Inject("$mdToast")),o(2,a.Inject("featuredActionsIcons")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.AddQueryToSavedSearchesService&&s.AddQueryToSavedSearchesService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof c.MediaQueries&&c.MediaQueries)&&n||Object])],e);var t,n}();t.PrmAddQueryToSavedSearches=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(724),a=n(185),s=n(725),c=n(112),u=n(155),l=n(726),f=n(195);n(144);var p=n(240),d=n(727),h=function(){function e(){}return e=r([i.NgModule({declarations:[p.PrmCitationTrailsBreadcrumbs,d.PrmCitationTrailsFullviewLink,o.PrmCitationTrailsIndication,l.PrmCitationTrailsIndicationContainer,s.PrmCitationTrailsItem],providers:[a.CitationTrailsBreadcrumbsService,f.CitationTrailsFullviewLinkService,c.FullViewPageService,u.FullViewDialogService],imports:["angular-inview"]})],e)}();t.CitationTrailsModule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(224),c=n(185),u=n(4),l=n(6),f=n(240),p=n(26),d=n(24),h=function(){function e(e,t,n,r,i,o,a){this.citationTrailsService=e,this.$mdDialog=t,this.$stateParams=n,this.ctBreadcrumbsService=r,this.primolyticsService=i,this.$state=o,this.$rootScope=a,this.CITATION_TRAILS_STATE=u.STATE_NAMES.CITATION_TRAILS}return e.prototype.onClick=function(e,t){if("citing"===this.type?this.sendCitingBeacon():this.sendCitedbyBeacon(),e.stopPropagation(),this.$mdDialog.hide(),this.$state.current.name===this.CITATION_TRAILS_STATE){e.preventDefault();var n=this.citationsStateParams;this.$rootScope.$broadcast("addCitationEvent",{params:n})}},e.prototype.sendCitingBeacon=function(){},e.prototype.sendCitedbyBeacon=function(){},e.prototype.getRecordTitle=function(){return this.record.pnx.display.title[0]},e.prototype.removeTNprefixFromQuery=function(e){return e&&e.startsWith("TN_")?e.replace("TN_",""):e},e.prototype.getLabel=function(){return"citing"===this.type?"nui.citation_trail.link.citing":"nui.citation_trail.link.citedin"},e.prototype.isCitationStatTooltip=function(){if(this.isCitationTrails()||this.isbrief())return"citing"===this.type?"nui.citation_trail.link.citing.tooltip":"nui.citation_trail.link.citedin.tooltip"},e.prototype.getIconName=function(){return"citing"===this.type?"citing":"citedBy"},Object.defineProperty(e.prototype,"citationsStateParams",{get:function(){var e="citing"===this.type?"citing":"citedby",t=this.citationTrailsService.fetchFrbrGroupId(this.record),n=this.record.pnx.control.recordid+","+e+","+t,r=this.$stateParams.seed_id?[this.$stateParams.seed_id]:[];r=d(r),r=r.slice(0,this.ctBreadcrumbsService.seeds.getActiveLevel()+1),r.push(n);var i={query:this.$stateParams.query||"any,contains,"+this.removeTNprefixFromQuery(this.record.pnx.control.recordid[0]),tab:this.$stateParams.tab,search_scope:this.$stateParams.search_scope,lang:this.$stateParams.lang,adaptor:this.$stateParams.adaptor,vid:this.$stateParams.vid,facet:e+",exact,"+t,ctType:this.type,docid:this.$stateParams.docid,seed_id:r,seedInfo:new f.SeedData(e,this.getDocTitle(),this.getDocCreator(),t,this.record.pnx.control.recordid[0],this.record)};return i},enumerable:!0,configurable:!0}),e.prototype.getDocTitle=function(){var e=this.record.pnx.display.title||this.record.pnx.display.atitle||this.record.pnx.display.btitle;return encodeURIComponent(e)},e.prototype.getDocCreator=function(){return encodeURIComponent(this.record.pnx.display.creator)},e.prototype.isfullView=function(){return this.$state.current.name===u.STATE_NAMES.FULL_DISPLAY},e.prototype.isbrief=function(){return this.$state.current.name===u.STATE_NAMES.SEARCH},e.prototype.isCitationTrails=function(){return this.$state.current.name===u.STATE_NAMES.CITATION_TRAILS},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof p.PrimoResponse&&p.PrimoResponse).IExtendedDoc)&&t||Object)],e.prototype,"record",void 0),r([a.Input(),i("design:type",String)],e.prototype,"type",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFullView",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([l.beacon({p:"brief",op:"CitationsLink"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendCitingBeacon",null),r([l.beacon({p:"brief",op:"CitedByLink"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendCitedbyBeacon",null),e=r([a.Component({selector:"prm-citation-trails-indication",templateUrl:"components/search/citationTrails/citation-trails-indication.html"}),o(1,a.Inject("$mdDialog")),o(2,a.Inject("$stateParams")),o(5,a.Inject("$state")),o(6,a.Inject("$rootScope")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.CitationTrailsService&&s.CitationTrailsService)&&n||Object,Object,Object,"function"==typeof(h="undefined"!=typeof c.CitationTrailsBreadcrumbsService&&c.CitationTrailsBreadcrumbsService)&&h||Object,"function"==typeof(m="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&m||Object,Object,Object])],e);var t,n,h,m}();t.PrmCitationTrailsIndication=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(240),c=n(4),u=n(185),l=n(155),f=n(112),p=n(42),d=n(41),h=n(20),m=function(){function e(e,t,n,r,i,o,s,u){this.$state=e,this.$stateParams=t,this.ctBreadcrumbsService=n,this.fullViewDialogService=r,this.fullViewPageService=i,this.templateUtil=o,this.changeLangService=s,this.$translate=u,this.changeActiveSeedEvent=new a.EventEmitter,this.CITATION_TRAILS_STATE=c.STATE_NAMES.CITATION_TRAILS}return e.prototype.ngOnInit=function(){var e=this;this.seed.record||(this.getItemPromise=this.fullViewPageService.getItemById(this.seed.recordId,null,"PC",this.$stateParams.search_scope,"primo_central_multiple_fe",!1,!1).then(function(t){e.seed.record=t.data}))},e.prototype.ngAfterViewInit=function(){"rtl"===this.changeLangService.direction?document.querySelector(".horizontal-content-scroller").scrollLeft=0:document.querySelector(".horizontal-content-scroller").scrollLeft=1e5},Object.defineProperty(e.prototype,"deepLinkPath",{get:function(){if(this.seed.record)return this.templateUtil.getFullDeepLinkAbsPath(this.seed.record)},enumerable:!0,configurable:!0}),e.prototype.openFullView=function(e){var t=this;this.seed.record?this.fullViewDialogService.openFullViewDialog(this.seed.record,e,"citationTrailsItem"):this.getItemPromise.then(function(){t.fullViewDialogService.openFullViewDialog(t.seed.record,e,"citationTrailsItem")})},e.prototype.onItemClick=function(e,t,n){return n.preventDefault(),this.isActive()?void this.openFullView(n):void this.changeActiveSeedEvent.emit({index:e})},Object.defineProperty(e.prototype,"citationType",{get:function(){return this.seed.citeType},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return this.index==this.ctBreadcrumbsService.seeds.getActiveLevel()},Object.defineProperty(e.prototype,"activeLevel",{get:function(){return this.ctBreadcrumbsService.seeds.getActiveLevel()},enumerable:!0,configurable:!0}),e.prototype.isActiveSeed=function(){return this.index==this.ctBreadcrumbsService.seeds.getActiveLevel()?"nui.citation_trail.link.active_Seed":""},e.prototype.activeCitationType=function(){return"citing"===this.citationType?this.$translate.instant("nui.citation_trail.link.citing.activeSeed"):"citedby"===this.citationType?this.$translate.instant("nui.citation_trail.link.citedin.activeSeed"):void 0},r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.SeedData&&s.SeedData)&&t||Object)],e.prototype,"seed",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"index",void 0),r([a.Input(),i("design:type",String)],e.prototype,"zOrder",void 0),r([a.Output(),i("design:type","function"==typeof(n="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&n||Object)],e.prototype,"changeActiveSeedEvent",void 0),e=r([a.Component({directives:[],selector:"prm-citation-trails-item",templateUrl:"components/search/citationTrails/citation-trails-item.html"}),o(0,a.Inject("$state")),o(1,a.Inject("$stateParams")),o(7,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(m="undefined"!=typeof d.IState&&d.IState)&&m||Object,Object,"function"==typeof(g="undefined"!=typeof u.CitationTrailsBreadcrumbsService&&u.CitationTrailsBreadcrumbsService)&&g||Object,"function"==typeof(y="undefined"!=typeof l.FullViewDialogService&&l.FullViewDialogService)&&y||Object,"function"==typeof(v="undefined"!=typeof f.FullViewPageService&&f.FullViewPageService)&&v||Object,"function"==typeof(b="undefined"!=typeof p.TemplateUtil&&p.TemplateUtil)&&b||Object,"function"==typeof(S="undefined"!=typeof h.ChangeLangService&&h.ChangeLangService)&&S||Object,Object])],e);var t,n,m,g,y,v,b,S}();t.PrmCitationTrailsItem=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.actionsIcons=e}return Object.defineProperty(e.prototype,"citedby",{get:function(){return this.record.extras.citationTrails.citedby},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citing",{get:function(){return this.record.extras.citationTrails.citing},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Object)],e.prototype,"record",void 0),e=r([a.Component({selector:"prm-citation-trails-indication-container",templateUrl:"components/search/citationTrails/citation-trails-indication-container.html"}),o(0,a.Inject("featuredActionsIcons")),i("design:paramtypes",[Object])],e)}();t.PrmCitationTrailsIndicationContainer=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(195),s=n(26),c=n(95),u=n(2),l=function(){function e(e,t,n){this.citationTrailsFullviewLinkService=e,this.timesCitedService=t,this.configurationUtil=n}return e.prototype.hasCitedby=function(){return this.citationTrailsFullviewLinkService.hasCitedby(this.record)},e.prototype.hasCiting=function(){return this.citationTrailsFullviewLinkService.hasCiting(this.record)},e.prototype.getLabel=function(){return"citing"===this.type?"nui.citation_trail.link.citing":"nui.citation_trail.link.citedin"},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return this.citationTrailsFullviewLinkService.shouldDisplayTimesCited()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldDisplayCitationTrial",{get:function(){return this.citationTrailsFullviewLinkService.shouldDisplayCitationTrial()},enumerable:!0,configurable:!0}),r([o.Input(),i("design:type",String)],e.prototype,"type",void 0),r([o.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IExtendedDoc)&&t||Object)],e.prototype,"record",void 0),e=r([o.Component({selector:"prm-citation-trails-fullview-link",templateUrl:"components/search/citationTrails/citation-trails-fullview-link.html"}),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof a.CitationTrailsFullviewLinkService&&a.CitationTrailsFullviewLinkService)&&n||Object,"function"==typeof(l="undefined"!=typeof c.TimesCitedService&&c.TimesCitedService)&&l||Object,"function"==typeof(f="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&f||Object])],e);var t,n,l,f}();t.PrmCitationTrailsFullviewLink=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(729),a=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmDidUMean],providers:[],imports:[]})],e)}();t.DidUMeanModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(730),c=n(4),u=n(2),l=n(16),f=function(){function e(e,t,n,r,i,o){var a=this;this.didUmeanService=e,this.$translate=t,this.$state=n,this.$stateParams=r,this.configurationUtil=i,this.newspapersService=o,t("results.didumean").then(function(e){a.message=e})}return Object.defineProperty(e.prototype,"stateParams",{get:function(){return this.didUmeanService.getStateParams(this.didUMean,this.$stateParams.query)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"STATE",{get:function(){var e=c.STATE_NAMES.SEARCH;if(this.configurationUtil.isSuprima()&&this.$state.current.name===c.STATE_NAMES.JOURNAL_SEARCH)e=c.STATE_NAMES.JOURNAL_SEARCH;else if(this.newspapersService.isNewspapersSearch())e=c.STATE_NAMES.NEWSPAPERS;else if(this.configurationUtil.isSuprima()&&this.$state.current.name===c.STATE_NAMES.DB_SEARCH)return c.STATE_NAMES.DB_SEARCH;return this.configurationUtil.isSuprima()&&this.$state.current.name===c.STATE_NAMES.ORGANIZATION_LIST?c.STATE_NAMES.ORGANIZATION_LIST:e},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",String)],e.prototype,"didUMean",void 0),e=r([a.Component({providers:[s.DidUMeanService],selector:"prm-did-u-mean",templateUrl:"components/search/didUMean/did-u-mean.html"}),o(1,a.Inject("$translate")),o(2,a.Inject("$state")),o(3,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.DidUMeanService&&s.DidUMeanService)&&t||Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&n||Object,"function"==typeof(f="undefined"!=typeof l.NewspapersService&&l.NewspapersService)&&f||Object])],e);var t,n,f}();t.PrmDidUMean=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(45),c=function(){function e(e){this.$location=e}return e.prototype.getStateParams=function(e,t){var n=s(this.$location.search());n.facet=null,n.mode=null,t||(t="any,contains,"+e);var r=t.split(",");return r.length<3&&(r[0]="any",r[1]="contains"),r[2]=e,n.query=r.join(","),n},e=r([a.Injectable(),o(0,a.Inject("$location")),i("design:paramtypes",[Object])],e)}();t.DidUMeanService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(381),a=n(737),s=n(738),c=n(739),u=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmStatic,s.PrmStaticPage,c.PrmEmailTemplate],providers:[o.StaticService],imports:[]})],e)}();t.StaticModule=u},function(e,t,n){"use strict";function r(){return i}Object.defineProperty(t,"__esModule",{value:!0});var i={email:{en_US:"static/email/email_en_US-504e938175.html",default:"static/email/email_en-8f6ec1eb42.html",en:"static/email/email_en-8f6ec1eb42.html"},help:{de_DE:"static/help/help_de_DE-57d0632a15.html",en_US:"static/help/help_en_US-6a26f54883.html",default:"static/help/help_en-6a26f54883.html",en:"static/help/help_en-6a26f54883.html"},homepage:{en_US:"static/homepage/homepage_en_US-c9e8576603.html",default:"static/homepage/homepage_en-b890605d9c.html",en:"static/homepage/homepage_en-b890605d9c.html"}};t.getStaticOtbHtml=r},function(e,t,n){var r=n(734),i=n(229),o=i(function(e,t,n){r(e,t,n)});e.exports=o},function(e,t,n){function r(e,t,n,f,p){e!==t&&a(t,function(a,u){if(c(a))p||(p=new i),s(e,t,u,n,r,f,p);else{var d=f?f(l(e,u),a,u+"",e,t,p):void 0;void 0===d&&(d=a),o(e,u,d)}},u)}var i=n(173),o=n(382),a=n(283),s=n(735),c=n(31),u=n(134),l=n(383);e.exports=r},function(e,t,n){function r(e,t,n,r,b,S,_){var O=y(e,n),T=y(t,n),E=_.get(T);if(E)return void i(e,n,E);var w=S?S(O,T,n+"",e,t,_):void 0,I=void 0===w;if(I){var R=l(T),P=!R&&p(T),j=!R&&!P&&g(T);w=T,R||P||j?l(O)?w=O:f(O)?w=s(O):P?(I=!1,w=o(T,!0)):j?(I=!1,w=a(T,!0)):w=[]:m(T)||u(T)?(w=O,u(O)?w=v(O):(!h(O)||r&&d(O))&&(w=c(T))):I=!1}I&&(_.set(T,w),b(w,T,r,S,_),_.delete(T)),i(e,n,w)}var i=n(382),o=n(301),a=n(303),s=n(192),c=n(304),u=n(127),l=n(15),f=n(136),p=n(128),d=n(208),h=n(31),m=n(324),g=n(171),y=n(383),v=n(736);e.exports=r},function(e,t,n){function r(e){return i(e,o(e))}var i=n(75),o=n(134);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(381),s=function(){function e(e){this.staticService=e,this.templateIncludedEvent=new o.EventEmitter}return e.prototype.getTemplateUrl=function(){return this.staticService.getTemplateUrl(this.section)},e.prototype.templateIncludedEventCall=function(){return this.templateIncludedEvent.emit()},r([o.Input(),i("design:type",String)],e.prototype,"section",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"parentCtrl",void 0),r([o.Output(),i("design:type",Object)],e.prototype,"templateIncludedEvent",void 0),e=r([o.Component({selector:"prm-static",template:'<div ng-include="$ctrl.getTemplateUrl()" onload="$ctrl.templateIncludedEventCall()"></div>'}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.StaticService&&a.StaticService)&&t||Object])],e);var t}();t.PrmStatic=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$stateParams=e,this.section=e.section}return e=r([a.Component({selector:"prm-static-page",template:'<prm-static [section]="$ctrl.section"></prm-static>'}),o(0,a.Inject("$stateParams")),i("design:paramtypes",[Object])],e);
}();t.PrmStaticPage=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(135),c=n(375),u=function(){function e(e,t,n,r,i,o,s){this.$stateParams=e,this.fullViewModuleLoaderService=t,this.sendEmailService=n,this.$state=r,this.$interval=i,this.$timeout=o,this.$location=s,this.fullViewLoaded=!1,this.delayedItems=[],this.emailTemplateItemsEvent=new a.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.isStudioExample()?(this.note||""===this.note||(this.note="This is a preview note"),this.fullViewModuleLoaderService.loadFullViewModule().then(function(){e.items&&e.items!==[]||(e.$stateParams.items&&e.$stateParams.items!==[]?e.items=e.$stateParams.items:e.items=[{enrichment:{virtualBrowseObject:{callNumber:"",isVirtualBrowseEnabled:!1,callNumberBrowseField:"browse_callnumber"}},delivery:{availabilityLinks:["detailsGetit1"],physicalItemTextCodes:"",displayLocation:!0,almaInstitutionsList:[{inst:"",availabilityStatus:"unavailable",getitLink:[{isLinktoOnline:!1,displayText:"Almagetit",hyperlinkText:"",link:""}]}],availabilityLinksUrl:[""],link:[{displayLabel:"thumbnail",hyperlinkText:"",inst4opac:"INST",linkURL:"",linkType:"","@id":"_:0"},{displayLabel:"thumbnail",linkURL:"",linkType:"","@id":"_:1"}],availability:["does_not_exist_in_my_institution_unavailable"],additionalLocations:!0,displayedAvailability:"does_not_exist_in_my_institution_unavailable",holding:[{matchForHoldings:[{holdingRecord:"",matchOn:"MainLocation"}],subLocationCode:"SUB_CODE",ilsApiId:"",libraryCode:"Somewhere",isValidUser:!1,mainLocation:"Somewhere",callNumber:"CallNumber",adaptorid:"adaptorId",organization:"INST",holdingURL:"OVP","@id":"_:0",availabilityStatus:"unavailable",subLocation:"Main Library",holdId:""},{matchForHoldings:[{holdingRecord:"",matchOn:"MainLocation"}],subLocationCode:"SUB_CODE",ilsApiId:"",libraryCode:"Somewhere",isValidUser:!1,mainLocation:"Somewhere",callNumber:"CallNumber",adaptorid:"adaptorId",organization:"INST",holdingURL:"OVP","@id":"_:1",availabilityStatus:"unavailable",subLocation:"Main Library",holdId:""}],bestlocation:{matchForHoldings:[{holdingRecord:"",matchOn:"MainLocation"}],mainLocation:"Somewhere",subLocationCode:"SUB_CODE",callNumber:"CallNumber",organization:"INST",libraryCode:"Somewhere","@id":"_:0",availabilityStatus:"unavailable",subLocation:"Main Library",holdId:"",isValidUser:!1},deliveryCategory:["Alma-P"],serviceMode:["activate"],feDisplayOtherLocations:!0,GetIt1:[{links:[{isLinktoOnline:!1,displayText:"Almagetit",hyperlinkText:"",getItTabText:"alma_tab1_notexistunavail",link:"","@id":"_:0"}],category:"Alma-P"}]},"@rta_link":"",context:"L",lang3:"eng",pnx:{delivery:{institution:["INST"],delcategory:["Alma-P"]},search:{recordid:["exampleRecordId"],sourceid:["example"],general:[""],creationdate:["2019"],creator:["Suggested by ExLibris Primo"],enddate:["20191231"],contributor:["Suggested by ExLibris Primo"],scope:["example","INST"],rsrctype:["book"],title:["How to customize Primo Email/Primo template via Primo Studio"],startdate:["2019101"],addsrcrecordid:["000000123"]},display:{creationdate:["2019"],creator:["Suggested by ExLibris Primo"],availinstitution:["$$IINST$$Sunavailable"],contributor:["Suggested by ExLibris Primo"],format:["HTML"],publisher:["Exlibris Primo"],availlibrary:[""],language:["eng"],availpnx:["unavailable"],source:["Documentation Center"],title:["How to customize Primo Email/Primo template via Primo Studio"],type:["article"]},links:{thumbnail:["$$Tgoogle_thumb"],uri:[""],linktouc:[""]},ranking:{booster2:["1"],booster1:["1"]},control:{recordid:["exampleRecordId"],sourceid:["example"],almaid:["INST:2112112112111021","INST/2112112112111021"],almaidthumb:["INST/2112112112111021"],originalsourceid:["INST"],sourceformat:["MARC21"],sourcerecordid:["2112112112111021"],sourcesystem:["Alma"]},addata:{date:["2019"],aulast:["Primo"],cop:["Exlibris Primo"],format:["article"],ristype:["ARTICLE"],mis1:["2112112112111021"],oclcid:["88888888"],aufirst:["Suggested"],addau:["Suggested by ExLibris Primo"],au:["Suggested by ExLibris Primo"],genre:["article"],btitle:["How to customize Primo Email/Primo template via Primo Studio"],risdate:["2019"],pub:["ExLibris Primo"]},sort:{creationdate:["2019"],author:["Suggested by ExLibris Primo"],title:["How to customize Primo Email/Primo template via Primo Studio"]},frbr:{t:[1],k1:["$$KSuggested by ExLibris Primo$$AA"],k3:["$$KHow to customize Primo Email/Primo template via Primo Studio$$AT"]},dedup:{c3:["How to customize Primo Email/Primo template via Primo Studio"],f6:["2019"],c4:["2019"],f7:["How to customize Primo Email/Primo template via Primo Studio"],c5:["123456789001021"],f8:["mnu"],f9:["version"],t:[1],f10:["Exlibris Primo"],f20:["987654321001021"],f11:["suggested by exlibris primo"],f5:["example"]},facets:{frbrtype:["6"],creatorcontrib:["Doe, John","Exlibris Primo"],creationdate:["2019"],newrecords:["20190107_529"],library:["MAIN"],atoz:["S"],frbrgroupid:["5555555"],rsrctype:["books"],language:["eng"],prefilter:["books"]},browse:{institution:["INST"],author:["$$DDoe, John$$EDoe, John","$$DSuggested by ExLibris Primo$$ESuggested by ExLibris Primo"],callnumber:["$$IINST$$DCall Number$$ECall Number$$T0"],title:["$$DExample$$EExample"]}},"@id":"_0",beaconO22:"96"},{enrichment:{virtualBrowseObject:{callNumber:"",isVirtualBrowseEnabled:!1,callNumberBrowseField:"browse_callnumber"}},delivery:{availabilityLinks:["detailsGetit1"],physicalItemTextCodes:"",displayLocation:!0,almaInstitutionsList:[{inst:"INST",availabilityStatus:"unavailable",getitLink:[{isLinktoOnline:!1,displayText:"Almagetit",hyperlinkText:"",link:""}]}],availabilityLinksUrl:[""],link:[{displayLabel:"thumbnail",hyperlinkText:"",inst4opac:"INST",linkURL:"",linkType:"","@id":"_:0"}],availability:["does_not_exist_in_my_institution_unavailable"],additionalLocations:!0,displayedAvailability:"does_not_exist_in_my_institution_unavailable",holding:[{matchForHoldings:[{holdingRecord:"",matchOn:"MainLocation"}],subLocationCode:"SUB_CODE",ilsApiId:"",libraryCode:"Somewhere",isValidUser:!1,mainLocation:"Somewhere",callNumber:"CallNumber",adaptorid:"adaptorId",organization:"INST",holdingURL:"OVP","@id":"_:0",availabilityStatus:"unavailable",subLocation:"Main Library",holdId:""}],bestlocation:{matchForHoldings:[{holdingRecord:"",matchOn:"MainLocation"}],mainLocation:"Main Location",subLocationCode:"SUB_CODE",callNumber:"Other Call Number",organization:"INST",libraryCode:"MAIN","@id":"_:0",availabilityStatus:"unavailable",subLocation:"Another Library",holdId:"",isValidUser:!1},deliveryCategory:["Alma-P"],serviceMode:["activate"],feDisplayOtherLocations:!0,GetIt1:[{links:[{isLinktoOnline:!1,displayText:"Almagetit",hyperlinkText:"",getItTabText:"alma_tab1_notexistunavail",link:"","@id":"_:0"}],category:"Alma-P"}]},"@rta_link":"",context:"L",lang3:"eng",pnx:{delivery:{institution:["INST"],delcategory:["Alma-P"]},search:{recordid:["exampleRecordId"],sourceid:["example"],general:["ExLibris Primo"],creationdate:["2019"],creator:["It ain’t over…till you download"],enddate:["20191231"],contributor:["It ain’t over…till you download"],scope:["example","INST"],rsrctype:["book"],title:["Customization template should be downloaded and uploaded via your Primo Admin"],startdate:["2019101"],addsrcrecordid:["987654321001021"]},display:{creationdate:["2019"],creator:["It ain’t over…till you download"],availinstitution:["$$IINST$$Sunavailable"],contributor:["It ain’t over…till you download"],format:["HTML"],publisher:["Exlibris Primo"],availlibrary:["$$IINST$$LOTHER$$1ExLibris Primo$$2Other Call Number$$Sunavailable$$XINST$$YOTHER$$ZR111D$$P1"],language:["eng"],availpnx:["unavailable"],source:["Documentation Center"],title:["Customization template should be downloaded and uploaded via your Primo Admin"],type:["article"]},links:{thumbnail:["$$Tgoogle_thumb"],uri:[""],linktouc:[""]},ranking:{booster2:["1"],booster1:["1"]},control:{recordid:["exampleRecordId"],sourceid:["example"],almaid:["INST:2112112112001021","INST/2112112112001021"],almaidthumb:["INST/2112112112001021"],originalsourceid:["INST"],sourceformat:["MARC21"],sourcerecordid:["2112112112001021"],sourcesystem:["Alma"]},addata:{date:["2019"],aulast:["Primo"],cop:["ExLibris Primo"],format:["article"],ristype:["ARTICLE"],mis1:["2112112112001021"],oclcid:["88888888"],aufirst:["Suggested"],addau:["It ain’t over…till you download"],au:["It ain’t over…till you download"],genre:["article"],btitle:["Customization template should be downloaded and uploaded via your Primo Admin"],risdate:["2019"],pub:["ExLibris Primo"]},sort:{creationdate:["2019"],author:["It ain’t over…till you download"],title:["Customization template should be downloaded and uploaded via your Primo Admin"]},frbr:{t:[1],k1:["$$KIt ain’t over…till you download$$AA"],k3:["$$KCustomization template should be downloaded and uploaded via your Primo Admin$$AT"]},dedup:{c3:["Customization template should be downloaded and uploaded via your Primo Admin"],f6:["2019"],c4:["2019"],f7:["Customization template should be downloaded and uploaded via your Primo Admin"],c5:["987654321001021"],f8:["mnu"],f9:["version"],t:[1],f10:["ExLibris Primo"],f20:["987654321001021"],f11:["It ain't over... till you download"],f5:["example"]},facets:{frbrtype:["6"],creatorcontrib:["It ain't over... till you download"],creationdate:["2019"],newrecords:["20190107_529"],library:["OTHER"],atoz:["S"],frbrgroupid:["3333333"],rsrctype:["books"],language:["eng"],prefilter:["books"]},browse:{institution:["INST"],author:["$$DIt ain't over... till you download$$EIt ain't over... till you download"],callnumber:["$$IINST$$DOther Call Number$$EOther Call Number$$T0"],title:["$$DExample$$EExample"]}},"@id":"",beaconO22:"96"}]),e.fullViewLoaded=!0})):this.fullViewLoaded=!0},e.prototype.handleEmailTemplate=function(){var e=this;this.$timeout(function(){document.querySelector("#email-template-items")&&!e.isStudioExample()?(e.tmpItems=e.items.slice(),e.records="",e.intervalCounter=0,e.pushItem()):(e.sendEmailService.templateRenderingInProgress=!1,e.delayedItems=e.items)},0)},e.prototype.pushItem=function(){this.delayedItems.push(this.tmpItems.shift())},e.prototype.popItem=function(){var e=this;this.isStudioExample()||this.$timeout(function(){return e.records+=document.querySelector("#email-template-items").innerHTML,e.delayedItems.pop(),e.intervalCounter+=1,e.intervalCounter===e.items.length?void e.emailTemplateItemsEvent.emit(e.records):void(e.intervalCounter<e.items.length&&e.pushItem())},0)},e.prototype.isStudioExample=function(){return!!this.$location.search().dirName},r([a.Input(),i("design:type",Array)],e.prototype,"items",void 0),r([a.Input(),i("design:type",String)],e.prototype,"note",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"emailTemplateItemsEvent",void 0),e=r([a.Component({selector:"prm-email-template",template:'<prm-change-lang ng-if="$ctrl.$state.current.name === STATE_NAMES.EMAIL_TEMPLATE" style="display: none"></prm-change-lang><prm-static ng-if="$ctrl.items" section="email" [parent-ctrl]="$ctrl" (template-included-event)="$ctrl.handleEmailTemplate()" style="max-width: 100%; min-width: 100%"></prm-static>'}),o(0,a.Inject("$stateParams")),o(3,a.Inject("$state")),o(4,a.Inject("$interval")),o(5,a.Inject("$timeout")),o(6,a.Inject("$location")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.FullViewModuleLoaderService&&s.FullViewModuleLoaderService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SendEmailService&&c.SendEmailService)&&n||Object,Object,Object,Object,Object])],e);var t,n}();t.PrmEmailTemplate=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(741),a=n(146),s=n(743),c=n(156),u=n(744),l=n(745),f=n(748),p=n(754),d=n(258),h=function(){function e(){}return e=r([i.NgModule({declarations:[u.PrmLogo,o.PrmMainMenu,l.PrmSearchBookmarkFilter,s.PrmSkipTo,p.PrmTopbar],providers:[a.MobileMenu,c.SkipToService,d.CollectionGalleryService],imports:[f.UserAreaModule]})],e)}();t.TopbarModule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(33),u=n(1),l=n(29),f=n(80),p=(n(39),n(51),n(1)),d=n(146),h=n(122),m=n(10),g=n(7),y=n(4),v=n(6),b=n(14),S=n(21),_=n(11),O=n(107),T=n(28),E=n(42),w=n(9),I=n(186),R=n(49),P=n(8),j=(n(3),function(){function e(e,t,n,r,i,o,a,s,c,d,h,m,g,y,v,b,S,_,O,T,E,w,I,R){var P=this;if(this.configurationUtil=e,this.mappingTablesCache=t,this.mobileMenu=n,this.$location=r,this.$mdMedia=i,this.$translate=o,this.$mdDialog=a,this.$interpolate=s,this.searchBoxIcons=c,this.primoExploreService=d,this.smoothScrollUtil=h,this.userSessionManagerService=m,this.jwtUtilService=g,this.$state=y,this.primolyticsService=v,this.$timeout=b,this.searchFieldsService=S,this.searchStateService=_,this.searchService=O,this.databasesService=T,this.browseSearchBarService=E,this.templateUtil=w,this.cmIntegrationService=I,this.mediaQueries=R,this.vid=p.getVid(),this.NEWSPAPERS_SEARCH_ENABLED=u.getNewspapersSearchEnabled(),this.displayLanguage=!0,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.menuLabels={atoz:"nui.mainmenu.label.journalsearch",citationlinker:"nui.mainmenu.label.citationlinker",tags:"nui.mainmenu.label.tags",dbsearch:"nui.mainmenu.label.databasesearch",browse:"nui.mainmenu.label.browse",newspapers_search:"nui.mainmenu.label.newspapers_search"},this.menuTooltips={atoz:"nui.mainmenu.description.journalsearch",citationlinker:"nui.mainmenu.description.citation_linker",tags:"nui.mainmenu.description.tags",dbsearch:"nui.mainmenu.description.databasesearch",browse:"nui.mainmenu.description.browse",newspapers_search:"nui.mainmenu.label.newspapers_search.tooltip"},this.openInCurrent=["tags","citationlinker","dbsearch","newspapers_search","browse","library_search"],this.mainMenuConfiguration=l(e.getMainMenuConfiguration()),this.mainMenuConfiguration){var j=f(this.mainMenuConfiguration.mainview,function(e){return"primo_help"===e.label});j&&(j.url=y.href("static",{section:"help",vid:this.vid,lang:this.$translate.use()})),this.mainView=this.mainMenuConfiguration.mainview,this.NEWSPAPERS_SEARCH_ENABLED||(this.mainView=this.mainView.filter(function(e){return P.configurationUtil.isSuprima()?"NewspaperSearch"!=e.label:"newspapers_search"!==e.label}))}this.configurationUtil.isSuprima()&&(this.menuLabels.citationlinker=void 0,this.menuTooltips.citationlinker=void 0,this.menuLabels.tags=void 0,this.menuTooltips.tags=void 0),this.languages=p.getAttributesMap().interfaceLanguageOptions.split(","),this.tLanguages=p.getAttributesMap().threeLettersLanguagesOptions.split(",");for(var A=0,C=this.mainView;A<C.length;A++){var $=C[A];this.updateUrl($)}this.cmIntegrationService.isEnabled()&&this.cmIntegrationService.registerNavMenu(this.mainView,this.getMenuLabel.bind(this),this.performAction.bind(this)),this.displayLanguage=this.languages&&this.languages.length>1}return e.prototype.ngOnInit=function(){"menu"===this.menuType?this.templateUrl="components/search/topbar/mainMenu/main-menu.html":this.templateUrl="components/search/topbar/mainMenu/main-menu-full.html"},e.prototype.ngAfterViewInit=function(){var e=this;this.$timeout(function(){e.smoothScrollUtil.scrollTo("mainMenuFullCloseButton","","")},300)},e.prototype.getMenuLabel=function(e){return this.menuLabels[e.label]?this.menuLabels[e.label]:"mainmenu.label."+e.label},e.prototype.getMenuTooltip=function(e){return this.menuTooltips[e.label]?this.menuTooltips[e.label]:"nui.mainmenu.description."+e.label},e.prototype.closeLinksMenu=function(){this.mobileMenu.setLinksMenuVisible(!1),this.$mdDialog.cancel(),this.removeBackgroundDarkClass()},e.prototype.closeLinksMenuAfterNavigation=function(){this.mobileMenu.setLinksMenuVisible(!1),this.$mdDialog.hide(),this.removeBackgroundDarkClass()},e.prototype.disableMobileMenu=function(){this.mobileMenu.setMobileMenu(!1),this.mobileMenu.setLinksMenuVisible(!0),this.showMainMenu()},e.prototype.showMainMenu=function(){var e='<md-dialog aria-label="Main menu" class="light-on-dark-dialog full-cover-dialog"> <md-dialog-content class="layout-full-height"> <prm-main-menu menu-type="full"></prm-main-menu> </md-dialog-content></md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({bindToController:!0,controller:function(){},controllerAs:"ctrl",template:e}).then(function(){},function(){document.querySelector("#more-links-button").focus()})},e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},e.prototype.removeBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!1)},e.prototype.getTemplateUrl=function(e){return"menu"===e?"components/search/topbar/mainMenu/main-menu.html":"components/search/topbar/mainMenu/main-menu-full.html"},Object.defineProperty(e.prototype,"viewId",{get:function(){return this.mainMenuConfiguration.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDepositDisplay",{get:function(){return this.mobileMenu.getDepositDisplay()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewUrlsList",{get:function(){return this.mainView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewUrlsCount",{get:function(){return this.mainView.length},enumerable:!0,configurable:!0}),e.prototype.showCount=function(){return this.$mdMedia("lg")?6:this.$mdMedia("md")?4:this.$mdMedia("sm")?2:this.$mdMedia("xs")?0:6},e.prototype.showMoreOptionsButton=function(){var e=this.showCount();return 0!==e&&this.mainView.length>e},e.prototype.updateUrl=function(e){var t=this,n=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.MAIN_MENU_URLS_FOR_THE_NEW_UI,{source1:e.label,source2:this.vid,target:this.$translate.use()}),r=n&&n.length>0&&n[0].source3?n[0].source3:e.url;if(r=this.templateUtil.resolveUrlTemplate(r),!this.handleJournals(e)&&!this.isUrlHardCodedTreatment(e))return r.startsWith("/discovery/browse")?(e.action=function(){t.browseUseReport()},void this.addSrefParams(e,y.STATE_NAMES.BROWSE_SEARCH,{vid:this.vid})):void(e.href=r)},e.prototype.handleJournals=function(e){var t=this;if("atoz"!=e.label)return!1;if(e.url.startsWith("dlSearch.do"))this.addSrefParams(e,y.STATE_NAMES.JOURNAL_SEARCH,{vid:this.vid,lang:this.$translate.use()}),e.action=function(){t.runJournalsBeacon()};else{var n=this.setLanguage(e.url);this.goToExternalJournal(n,e),e.action=function(){t.runJournalsBeacon()}}return!0},e.prototype.goToExternalJournal=function(e,t){t.href=e},e.prototype.getUrl=function(){return this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb/action/searchDB.do?fn=nuiSearchDbIframe&vid="+this.vid},e.prototype.browseUseReport=function(){this.browseSearchBarService.searchBarInput="",void 0!=this.browseSearchBarService.selectedScope&&(this.browseSearchBarService.selectedScope=this.browseSearchBarService.scopes[0]),this.closeLinksMenu()},e.prototype.runCollectionDiscoveryBeacon=function(){},e.prototype.runNewspaperSearchBeacon=function(){},e.prototype.runJournalsBeacon=function(){},e.prototype.isUrlHardCodedTreatment=function(e){var t=this,n=e.url;if("citationlinker"===e.label)e.action=function(){t.closeLinksMenu()},this.addSrefParams(e,y.STATE_NAMES.CITATION_LINKER,{vid:this.vid});else if("tags"===e.label)e.action=function(){t.closeLinksMenu()},this.addSrefParams(e,y.STATE_NAMES.TAGS,{vid:this.vid});else if("dbsearch"===e.label||"DatabaseSearch"===e.label)e.action=function(){t.closeLinksMenu()},this.addSrefParams(e,y.STATE_NAMES.DB_SEARCH,{vid:this.vid});else if(this.configurationUtil.isSuprima()?"NewspaperSearch"===e.label:"newspapers_search"===e.label)e.action=function(){t.runNewspaperSearchBeacon(),t.closeLinksMenu(),t.searchFieldsService.mainSearch="",t.searchService.resetResultObject()},this.addSrefParams(e,y.STATE_NAMES.NEWSPAPERS,{vid:this.vid});else if("browse"===e.label||"BrowseSearch"===e.label)e.action=function(){t.browseUseReport()},this.addSrefParams(e,y.STATE_NAMES.BROWSE_SEARCH,{vid:this.vid});else if("collection_discovery"!==e.label&&"CollectionDiscovery"!==e.label||n.startsWith("/action/collectionDiscovery.do"))if(n.startsWith("/action/collectionDiscovery.do"))e.href=this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb"+n;else if(n.startsWith("dlSearch.do"))e.href=this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb/action/"+n;else if("/action/search.do"===n)this.addSrefParams(e,y.STATE_NAMES.SEARCH,{vid:this.vid,lang:this.$translate.use()});else if(n.endsWith("lang=")){var r=this.setLanguage(n);e.href=r}else if("BlankIll"===n)this.addSrefParams(e,y.STATE_NAMES.BLANK_ILL,{vid:this.vid});else if("PurchaseRequest"===n)this.addSrefParams(e,y.STATE_NAMES.PURCHASE_REQUEST,{vid:this.vid});else if("jsearch"===n)e.action=function(){t.resetSearchParams(),t.closeLinksMenu()},this.addSrefParams(e,y.STATE_NAMES.JOURNAL_SEARCH,{vid:this.vid});else if(n.indexOf("/discovery/search?")>-1&&n.indexOf("vid="+this.vid)>-1)this.addSrefParams(e,y.STATE_NAMES.SEARCH,{vid:this.vid,lang:this.$translate.use()});else{if("orgList"!==e.label)return!1;e.action=function(){t.closeLinksMenu()},this.addSrefParams(e,y.STATE_NAMES.ORGANIZATION_LIST,{vid:this.vid})}else e.action=function(){t.runCollectionDiscoveryBeacon()},this.addSrefParams(e,y.STATE_NAMES.COLLECTION_DISCOVERY,{vid:this.vid});return!0},e.prototype.setLanguage=function(e){for(var t=0,n=this.$translate.use();t<this.languages.length&&this.languages[t]!==n;++t);return this.tLanguages.length>t?e+this.tLanguages[t]:e},e.prototype.resetSearchParams=function(){this.searchFieldsService.reset(),this.searchStateService.resetSearchObject(),this.searchService.restSignInAlertMessage()},e.prototype.userName=function(){return"suprima"===u.getBackendSystem()?this.userSessionManagerService.getUserNameForDisplay():this.userSessionManagerService.getUserName()},Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this.userName().length>0},enumerable:!0,configurable:!0}),e.prototype.dispalyResourceSharing=function(e){return!(!this.userSessionManagerService.isGuest()||!e.includes("pds_handle={{pds_handle}}"))},e.prototype.hideLegantoMenuLink=function(e,t){return!(!this.userSessionManagerService.isGuest()||"leganto"!==t)},e.prototype.newWindowIndication=function(e){if(this.$translate.isReady())return"atoz"!=e.label||e.url.startsWith("dlSearch.do")?"_blank"===e.target&&this.openInCurrent.indexOf(e.label)===-1?this.$translate.instant("nui.aria.newWindow"):"":this.$translate.instant("nui.aria.newWindow")},e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.performAction=function(e){var t=this.mainView.findIndex(function(t){return t.label===e.label});return this.runMainMenuLinkBeacon(t+1),e.action&&e.action(),!0},e.prototype.runMainMenuLinkBeacon=function(e){this.searchService.cameFromState=String(e)},e.prototype.getTargetAttribute=function(e){return"_blank"===e.target?e.target:""},e.prototype.addSrefParams=function(e,t,n){e.sref={},e.sref.state=t,e.sref.params=n,e.sref.opts={reload:!0,inherit:!1}},Object.defineProperty(e.prototype,"advancedSearch",{get:function(){return this.searchFieldsService.advancedSearch},enumerable:!0,configurable:!0}),e.prototype.switchAdvancedSearch=function(){var e=this;this.searchFieldsService.advancedSearch=!this.searchFieldsService.advancedSearch,this.searchFieldsService.advancedSearch||this.smoothScrollUtil.focusOn("searchBar"),this.$location.search("mode",this.searchFieldsService.advancedSearch?"advanced":"simple"),this.$timeout(function(){if(1==e.advancedSearch)return document.querySelector("#advanced-search").focus()},100),this.$mdDialog.hide()},r([a.Input(),i("design:type",Object)],e.prototype,"menuType",void 0),r([v.beacon({p:"click",op:"browsePage"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"browseUseReport",null),r([v.beacon({p:"general",op:"gotoCollectionDiscovery"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runCollectionDiscoveryBeacon",null),r([v.beacon({p:"general",op:"goToNewspapersfromMainMenu"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runNewspaperSearchBeacon",null),r([v.beacon({p:"general",op:"gotoAZ"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runJournalsBeacon",null),r([v.beacon({p:"general",op:"mainMenuLink"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"runMainMenuLinkBeacon",null),r([R.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"switchAdvancedSearch",null),e=r([a.Component({selector:"prm-main-menu",template:'<div class="layout-full-height" ng-include="::$ctrl.templateUrl"></div>'}),o(3,a.Inject("$location")),o(4,a.Inject("$mdMedia")),o(5,a.Inject("$translate")),o(6,a.Inject("$mdDialog")),o(7,a.Inject("$interpolate")),o(8,a.Inject("searchBoxIcons")),o(13,a.Inject("$state")),o(15,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof w.MappingTablesCache&&w.MappingTablesCache)&&n||Object,"function"==typeof(j="undefined"!=typeof d.MobileMenu&&d.MobileMenu)&&j||Object,Object,Object,Object,Object,Object,Array,"function"==typeof(A="undefined"!=typeof h.PrimoExploreService&&h.PrimoExploreService)&&A||Object,"function"==typeof(C="undefined"!=typeof c.SmoothScrollUtil&&c.SmoothScrollUtil)&&C||Object,"function"==typeof($="undefined"!=typeof m.UserSessionManagerService&&m.UserSessionManagerService)&&$||Object,"function"==typeof(D="undefined"!=typeof g.JwtUtilService&&g.JwtUtilService)&&D||Object,Object,"function"==typeof(L="undefined"!=typeof v.PrimolyticsService&&v.PrimolyticsService)&&L||Object,Object,"function"==typeof(k="undefined"!=typeof b.SearchFieldsService&&b.SearchFieldsService)&&k||Object,"function"==typeof(M="undefined"!=typeof S.SearchStateService&&S.SearchStateService)&&M||Object,"function"==typeof(x="undefined"!=typeof _.SearchService&&_.SearchService)&&x||Object,"function"==typeof(F="undefined"!=typeof T.DatabasesService&&T.DatabasesService)&&F||Object,"function"==typeof(U="undefined"!=typeof O.BrowseSearchBarService&&O.BrowseSearchBarService)&&U||Object,"function"==typeof(B="undefined"!=typeof E.TemplateUtil&&E.TemplateUtil)&&B||Object,"function"==typeof(N="undefined"!=typeof I.CMIntegrationService&&I.CMIntegrationService)&&N||Object,"function"==typeof(q="undefined"!=typeof P.MediaQueries&&P.MediaQueries)&&q||Object])],e);var t,n,j,A,C,$,D,L,k,M,x,F,U,B,N,q}());t.PrmMainMenu=j},function(e,t,n){"use strict";function r(e){var t={};return function(n){if("undefined"==typeof t[n]){var r=e(n),i=o(function(e,t){r.onload=r.onreadystatechange=function(t){r.readyState&&"complete"!==r.readyState&&"loaded"!==r.readyState||window.setTimeout(function(){e(t)})},r.onerror=function(e){window.setTimeout(function(){t(e)})}});t[n]=i}return t[n]}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=i.injector(["ng"]).get("$q"),a=window.document;t.loadScript=r(function(e){var t=a.createElement("script");return t.src=e,a.body.appendChild(t),t}),t.loadCSS=r(function(e){var t=a.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,a.head.appendChild(t),t})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(156),s=n(33),c=function(){function e(e,t){this.skipToService=e,this.smoothScrollUtil=t}return e.prototype.scrollToElementId=function(e){this.smoothScrollUtil.scrollTo(e,"","")},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.skipToService.skipLinks},enumerable:!0,configurable:!0}),e.prototype.getLabelValue=function(e){return"advanced-search"==e?"advancedSearch":e},e=r([o.Component({selector:"prm-skip-to",templateUrl:"components/search/topbar/skipTo/skip-to.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.SkipToService&&a.SkipToService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.SmoothScrollUtil&&s.SmoothScrollUtil)&&n||Object])],e);var t,n}();t.PrmSkipTo=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(89),c=n(89),u=n(1),l=n(2),f=function(){function e(e,t){this.$state=e,this.configurationUtil=t,this.vid=u.getVid(),this.disableLogo=!1,this.getLogoIcon(),this.setLogoURL(),"deposit"!==this.$state.current.name&&"delivery"!==this.$state.current.name&&"canonDelivery"!==this.$state.current.name&&"cnameDelivery"!==this.$state.current.name||(this.disableLogo=!0)}return e.prototype.getLogoIcon=function(){this.iconLink=s.getLibraryLogo()||"img/library-logo.png"},e.prototype.setLogoURL=function(){var e=c.getLibraryLogoClickableURL();e?this.logoURL=e:this.configurationUtil.getSummonOverAlma()===!0?this.logoURL=u.getAttributesMap().sessionTimeoutURL:this.needSref=!0},e.prototype.isEmailMode=function(){return"email"===this.displayMode},r([a.Input(),i("design:type",String)],e.prototype,"displayMode",void 0),e=r([a.Component({selector:"prm-logo",templateUrl:"components/search/topbar/logo/logo.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&t||Object])],e);
var t}();t.PrmLogo=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),s=n(5),c=n(0),u=n(1),l=n(6),f=n(4),p=n(14),d=n(22),h=n(17),m=n(27),g=(n(45),n(384)),y=function(){function e(e,t,n,r,i,o,a,c,l,p,d,h,m){var y=this;this.topBarIcons=e,this.$state=t,this.$location=n,this.$translate=r,this.primolyticsService=i,this.backToTopIcon=o,this.$scope=a,this.$window=c,this.searchFieldsService=l,this.journalsService=p,this.storageUtil=d,this.mediaQueries=h,this.briefResultService=m,this.view=u.getVid(),this.FAVORITES_STATE=f.STATE_NAMES.FAVORITES,this.SEARCH_STATE=f.STATE_NAMES.SEARCH,this.handler=g(function(){return y.handlerUnbound()},100),this.scroll=0;var v=s.element(c);v.on("scroll",function(){return y.handler()})}return e.prototype.handlerUnbound=function(){this.scroll=window.pageYOffset,this.$scope.$digest()},Object.defineProperty(e.prototype,"isFavorites",{get:function(){return this.$state.is(f.STATE_NAMES.FAVORITES)},enumerable:!0,configurable:!0}),e.prototype.backToTop=function(){var e=-window.pageYOffset/2,t=setInterval(function(){window.pageYOffset&&0!=window.pageYOffset?window.scrollBy(0,e):clearInterval(t)},15)},e.prototype.fixedToTop=function(){return!!(this.scroll>60&&(this.$state.is(f.STATE_NAMES.FAVORITES)||this.$state.is(f.STATE_NAMES.SEARCH)||this.$state.is(f.STATE_NAMES.JOURNAL_SEARCH)||this.$state.is(f.STATE_NAMES.COLLECTION_DISCOVERY)))},e.prototype.goToFavorties=function(){},e.prototype.goToSearch=function(){},e.prototype.goToSearchHistory=function(){},Object.defineProperty(e.prototype,"favoritesStateParams",{get:function(){return{vid:this.view,lang:this.$translate.use()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchHistoryParams",{get:function(){return{vid:this.view,lang:this.$translate.use(),section:"search_history"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchStateParams",{get:function(){return this.searchFieldsService.searchParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.journalsService.returnToJournalsSearch()?f.STATE_NAMES.JOURNAL_SEARCH:f.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e.prototype.showSearchHistoryTab=function(){return this.storageUtil.isLocalStorageAvailable},Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=u.getAttributesMap();return"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),e.prototype.isToolBareEnable=function(){return this.briefResultService.enableOrDisableToolBar},r([l.beacon({p:"general",op:"gotoeShelf"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToFavorties",null),r([l.beacon({p:"general",op:"gotoSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToSearch",null),r([l.beacon({p:"general",op:"gotoSearchHistory"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToSearchHistory",null),e=r([c.Component({selector:"prm-search-bookmark-filter",templateUrl:"components/search/topbar/bookmarkFilter/search-bookmark-filter.html"}),o(0,c.Inject("topBarIcons")),o(1,c.Inject("$state")),o(2,c.Inject("$location")),o(3,c.Inject("$translate")),o(5,c.Inject("backToTopIcon")),o(6,c.Inject("$scope")),o(7,c.Inject("$window")),i("design:paramtypes",[Object,Object,Object,Object,"function"==typeof(t="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&t||Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof p.SearchFieldsService&&p.SearchFieldsService)&&n||Object,"function"==typeof(y="undefined"!=typeof d.JournalsService&&d.JournalsService)&&y||Object,"function"==typeof(v="undefined"!=typeof h.StorageUtil&&h.StorageUtil)&&v||Object,"function"==typeof(b="undefined"!=typeof a.MediaQueries&&a.MediaQueries)&&b||Object,"function"==typeof(S="undefined"!=typeof m.BriefResultService&&m.BriefResultService)&&S||Object])],e);var t,n,y,v,b,S}();t.PrmSearchBookmarkFilter=y},function(e,t,n){function r(e,t,n){function r(t){var n=v,r=b;return v=b=void 0,E=t,_=e.apply(r,n)}function l(e){return E=e,O=setTimeout(d,t),w?r(e):_}function f(e){var n=e-T,r=e-E,i=t-n;return I?u(i,S-r):i}function p(e){var n=e-T,r=e-E;return void 0===T||n>=t||n<0||I&&r>=S}function d(){var e=o();return p(e)?h(e):void(O=setTimeout(d,f(e)))}function h(e){return O=void 0,R&&v?r(e):(v=b=void 0,_)}function m(){void 0!==O&&clearTimeout(O),E=0,v=T=b=O=void 0}function g(){return void 0===O?_:h(o())}function y(){var e=o(),n=p(e);if(v=arguments,b=this,T=e,n){if(void 0===O)return l(T);if(I)return O=setTimeout(d,t),r(T)}return void 0===O&&(O=setTimeout(d,t)),_}var v,b,S,_,O,T,E=0,w=!1,I=!1,R=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(w=!!n.leading,I="maxWait"in n,S=I?c(a(n.maxWait)||0,t):S,R="trailing"in n?!!n.trailing:R),y.cancel=m,y.flush=g,y}var i=n(31),o=n(747),a=n(308),s="Expected a function",c=Math.max,u=Math.min;e.exports=r},function(e,t,n){var r=n(52),i=function(){return r.Date.now()};e.exports=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(385),a=n(749),s=n(241),c=n(750),u=n(242),l=n(43),f=n(751),p=n(752),d=n(386),h=n(387),m=n(753),g=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmAuthentication,c.PrmLibraryCardMenu,f.PrmUserArea,p.PrmUserAreaExpandable,m.PrmLanguageSelection],providers:[s.AuthenticationService,u.LibraryCardMenuService,o.UserAreaService,d.UserAreaExpandableService,h.LanguageSelectionService],imports:[l.default.name,"primo-explore.security"]})],e)}();t.UserAreaModule=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(241),c=n(1),u=n(6),l=n(44),f=n(37),p=n(10),d=function(){function e(e,t,n,r,i,o,a){this.authenticationService=e,this.$mdDialog=t,this.primolyticsService=n,this.loginService=r,this.$location=i,this.sharedSessionStorage=o,this.userSessionManagerService=a,this.authenticationMethods=c.getAuthenticationMethods()}return e.prototype.handleLogin=function(e){this.loginService.handleLoginClick()},e.prototype.handleLogout=function(){this.authenticationService.handleLogout()},e.prototype.isLoggedInIDP=function(){return!!this.userSessionManagerService.isLoggedInIDP()||this.isLoggedIn},r([a.Input(),i("design:type",Boolean)],e.prototype,"isLoggedIn",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"idpLogout",void 0),r([u.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.AuthenticationMethod&&c.AuthenticationMethod)&&t||Object]),i("design:returntype",void 0)],e.prototype,"handleLogin",null),r([u.beacon({p:"general",op:"signOut"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"handleLogout",null),e=r([a.Component({selector:"prm-authentication",templateUrl:"components/search/topbar/userArea/authentication.html"}),o(1,a.Inject("$mdDialog")),o(4,a.Inject("$location")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.AuthenticationService&&s.AuthenticationService)&&n||Object,Object,"function"==typeof(d="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&d||Object,"function"==typeof(h="undefined"!=typeof l.LoginService&&l.LoginService)&&h||Object,Object,"function"==typeof(m="undefined"!=typeof f.SharedSessionStorage&&f.SharedSessionStorage)&&m||Object,"function"==typeof(g="undefined"!=typeof p.UserSessionManagerService&&p.UserSessionManagerService)&&g||Object])],e);var t,n,d,h,m,g}();t.PrmAuthentication=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),s=n(0),c=n(242),u=n(1),l=n(146),f=function(){function e(e,t,n,r,i,o,a){this.libraryCardMenuService=e,this.topBarIcons=t,this.$state=n,this.$translate=r,this.$window=i,this.primolyticsService=o,this.mobileMenu=a,this.actionEvent=new s.EventEmitter,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.opacType=this.libraryCardMenuService.getOpacType(),this.lang=this.$translate.use()}return e.prototype.isOvp=function(){return this.opacType===c.OPAC_TYPE.OVP},e.prototype.goToMyLibraryCard=function(){this.isOvp()?this.$state.go("account",{vid:u.getVid(),lang:this.lang,section:"overview"},{reload:!0}):this.$window.open(this.libraryCardMenuService.getIlsBaseUrl(),"_blank"),this.actionEvent.emit(null)},e.prototype.goToUserSettings=function(){this.$state.go("account",{vid:u.getVid(),lang:this.lang},{reload:!0}),this.actionEvent.emit(null)},e.prototype.getLibraryCardAriaLabel=function(){return this.isOvp()?"nui.aria.menu.librarycard":"nui.aria.menu.libraycard.link"},e.prototype.keydownSupport=function(e){if(0==this.mobileMenu.getLinksMenuVisible()){this.KEY_CODE;if(9===e.keyCode)return e.preventDefault(),document.querySelector("prm-authentication button").focus()}},r([s.Output(),i("design:type",Object)],e.prototype,"actionEvent",void 0),r([a.beacon({p:"general",op:"gotoMyAccount"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToMyLibraryCard",null),r([a.beacon({p:"general",op:"gotoMyAccount"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToUserSettings",null),e=r([s.Component({selector:"prm-library-card-menu",templateUrl:"components/search/topbar/userArea/libraryCard/library-card-menu.html"}),o(1,s.Inject("topBarIcons")),o(2,s.Inject("$state")),o(3,s.Inject("$translate")),o(4,s.Inject("$window")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.LibraryCardMenuService&&c.LibraryCardMenuService)&&t||Object,Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof a.PrimolyticsService&&a.PrimolyticsService)&&n||Object,"function"==typeof(f="undefined"!=typeof l.MobileMenu&&l.MobileMenu)&&f||Object])],e);var t,n,f}();t.PrmLibraryCardMenu=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(385),c=n(10),u=n(1),l=n(6),f=n(146),p=n(7),d=n(122),h=n(143),m=n(8),g=n(19),y=function(){function e(e,t,n,r,i,o,a,s,c,l,f,p,d,h,m,g){var y=this;this.userAreaService=e,this.topBarIcons=t,this.mobileMenu=n,this.userSessionManagerService=r,this.jwtUtilService=i,this.$translate=o,this.$http=a,this.$state=s,this.$timeout=c,this.$mdDialog=l,this.$element=f,this.$scope=p,this.primoExploreService=d,this.primolyticsService=h,this.loginIframeService=m,this.mediaQueries=g,this.attributesMap=u.getAttributesMap(),this.view=u.getVid(),this.showUserArea=!0,this.isOpen=!1,this.spinnerTimedOut=!1,this.isRoleShow=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this._selectedLanguage=this.$translate.use(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.displayLanguage=this.displayLanguageIfThereIsMoreThanOne(this.languages.length),this.showMoreOptions=!1,this.showUserMenu=!1;this.menuTimeout;this.$timeout(function(){y.spinnerTimedOut=!0},4e3),"deposit"!==this.$state.current.name&&"delivery"!==this.$state.current.name&&"canonDelivery"!==this.$state.current.name&&"cnameDelivery"!==this.$state.current.name||(this.showUserArea=!1),this.$translate("eshelf.user.anonymous").then(function(e){return y.displayedGuest=e}),this.$element[0].querySelectorAll("button")[1].setAttribute("id","changUserStatus")}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.showUserMenu},function(t,n){e.$timeout(function(){e.unfocusActionButtons("md-fab-actions button"),e.unfocusActionButtons("md-fab-actions md-select")},400)})},e.prototype.ngAfterViewInit=function(){var e=this;this.$timeout(function(){e.isBlocked="block"},3e3)},e.prototype.unfocusActionButtons=function(e){var t=this.$element[0].querySelectorAll(e);if(!this.showUserMenu&&this.$element)for(var n=0,r=t;n<r.length;n++){var i=r[n];i.setAttribute("tabindex","-1")}else for(var o=0,a=t;o<a.length;o++){var i=a[o];i.setAttribute("tabindex","0")}},e.prototype.changUserStatus=function(){this.showUserMenu=!this.showUserMenu,g.isBrowserSafari()||this.$timeout(function(){var e=document.querySelector("prm-authentication button");e.focus()},100)},e.prototype.enableMobileMenu=function(){this.mobileMenu.setMobileMenu(!0),this.mobileMenu.setLinksMenuVisible(!0),this.showUserArea||this.mobileMenu.setDepositDisplay(!0),this.showMainMenu()},e.prototype.showMainMenu=function(){var e='<md-dialog aria-label="Main menu" class="light-on-dark-dialog full-cover-dialog"> <md-dialog-content class="layout-full-height"> <prm-main-menu menu-type="full"></prm-main-menu> </md-dialog-content></md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({bindToController:!0,controller:function(){},controllerAs:"ctrl",template:e})},e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},Object.defineProperty(e.prototype,"selectedLanguage",{get:function(){return this.$translate.use()},set:function(e){this._selectedLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedUser",{get:function(){return this.userName()?this.userName():this.displayedGuest},enumerable:!0,configurable:!0}),e.prototype.displayLanguageIfThereIsMoreThanOne=function(e){return 1!==e},e.prototype.userName=function(){return"suprima"===u.getBackendSystem()?this.userSessionManagerService.getUserNameForDisplay():this.userSessionManagerService.getUserName()},e.prototype.showSpinner=function(){return!this.spinnerTimedOut&&!this.jwtUtilService.backFromLoginIframe&&!(!this.loginIframeService.iframeSilentLoginEnabled||this.jwtUtilService.backFromLoginIframe)},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.closeLinksMenu=function(){this.mobileMenu.setLinksMenuVisible(!1),this.$mdDialog.hide()},e.prototype.keydownSupport=function(e){this.KEY_CODE;if(27===e.keyCode)return e.preventDefault(),this.closeLinksMenu(),document.querySelector("#changUserStatus").focus()},e.prototype.getRoleAlertMessage=function(){var e="GUEST"===this.jwtUtilService.getDecodedToken().userGroup;if(this.$translate.isReady()){var t=e?this.$translate.instant("nui.aria.signOutSuccess"):this.$translate.instant("nui.aria.signInSuccess");return t}},Object.defineProperty(e.prototype,"signInOrOutTooltipLabel",{get:function(){if(this.$translate.isReady())return this.$translate.instant(0==this.userName().length?"nui.clisckSignIn.tooltip":"nui.clisckSignOut.tooltip")},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-user-area",templateUrl:"components/search/topbar/userArea/user-area.html"}),o(1,a.Inject("topBarIcons")),o(5,a.Inject("$translate")),o(6,a.Inject("$http")),o(7,a.Inject("$state")),o(8,a.Inject("$timeout")),o(9,a.Inject("$mdDialog")),o(10,a.Inject("$element")),o(11,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.UserAreaService&&s.UserAreaService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof f.MobileMenu&&f.MobileMenu)&&n||Object,"function"==typeof(y="undefined"!=typeof c.UserSessionManagerService&&c.UserSessionManagerService)&&y||Object,"function"==typeof(v="undefined"!=typeof p.JwtUtilService&&p.JwtUtilService)&&v||Object,Object,Object,Object,Object,Object,Object,Object,"function"==typeof(b="undefined"!=typeof d.PrimoExploreService&&d.PrimoExploreService)&&b||Object,"function"==typeof(S="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&S||Object,"function"==typeof(_="undefined"!=typeof h.LoginIframeService&&h.LoginIframeService)&&_||Object,"function"==typeof(O="undefined"!=typeof m.MediaQueries&&m.MediaQueries)&&O||Object])],e);var t,n,y,v,b,S,_,O}();t.PrmUserArea=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(386),c=n(7),u=n(4),l=n(1),f=n(22),p=n(6),d=n(143),h=n(44),m=n(10),g=n(241),y=n(20),v=n(242),b=n(186),S=n(182),_=function(){function e(e,t,n,r,i,o,s,c,f,p,d,h,m,g,y,v,b,S,_){this.userAreaExpandableService=e,this.jwtUtilService=t,this.$translate=n,this.journalsService=r,this.loginIframeService=i,this.loginService=o,this.primolyticsService=s,this.userSessionManagerService=c,this.authenticationService=f,this.changeLangService=p,this.i18nService=d,this.$state=h,this.$timeout=m,this.$window=g,this.libraryCardMenuService=y,this.$mdDialog=v,this.$stateParams=b,this.cmIntegrationService=S,this.actionListService=_,this.view=l.getVid(),this.FAVORITES_STATE=u.STATE_NAMES.FAVORITES,this.spinnerTimedOut=!1,this.authenticationMethods=l.getAuthenticationMethods(),this.displayLanguage=!0,this.attributesMap=l.getAttributesMap(),this.summonOverAlma=l.getSummonOverAlma(),this.showUserArea=!0,this.actionEvent=new a.EventEmitter,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.opacType=this.libraryCardMenuService.getOpacType(),this.lang=this.$translate.use(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.displayLanguage=this.languages&&this.languages.length>1,"deposit"!==this.$state.current.name&&"delivery"!==this.$state.current.name&&"canonDelivery"!==this.$state.current.name&&"cnameDelivery"!==this.$state.current.name||(this.showUserArea=!1),this.cmIntegrationService.isEnabled()&&this.registerMainNavs()}return e.prototype.registerMainNavs=function(){var e=this;this.cmIntegrationService.registerMainNavs([{code:"LibraryCard",label:"nui.menu.librarycard",action:this.goToMyLibraryCard.bind(this)},{code:"Favourites",label:"eshelf.menu.savedItems",action:function(){e.goToFavorties(),e.$state.go(e.FAVORITES_STATE,e.favoritesStateParams,{reload:!0,inherit:!1})}},{code:"SearchHistory",label:"eshelf.menu.searchHistory",action:function(){e.goToSearchHistory(),e.$state.go(e.FAVORITES_STATE,e.searchHistoryParams,{reload:!0,inherit:!1})}}])},e.prototype.ngOnInit=function(){},e.prototype.getLang=function(){return this.$translate.use()},e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.isSummonOverAlma=function(){return this.summonOverAlma},e.prototype.goToFavorties=function(){},e.prototype.goToSearchHistory=function(){},Object.defineProperty(e.prototype,"favoritesStateParams",{get:function(){return{vid:this.view,lang:this.$translate.use(),section:"items"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchHistoryParams",{get:function(){return{vid:this.view,lang:this.$translate.use(),section:"search_history"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.journalsService.returnToJournalsSearch()?u.STATE_NAMES.JOURNAL_SEARCH:u.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e.prototype.showSpinner=function(){return!this.spinnerTimedOut&&!this.jwtUtilService.backFromLoginIframe&&!(!this.loginIframeService.iframeSilentLoginEnabled||this.jwtUtilService.backFromLoginIframe)},e.prototype.handleLogin=function(e){this.loginService.handleLoginClick()},e.prototype.handleLogout=function(){this.authenticationService.handleLogout()},e.prototype.isLoggedInIDP=function(){return!!this.userSessionManagerService.isLoggedInIDP()||this.isLoggedIn},e.prototype.userName=function(){return"suprima"===l.getBackendSystem()?this.userSessionManagerService.getUserNameForDisplay():this.userSessionManagerService.getUserName()},e.prototype.currentLang=function(){return this.$translate.use()},e.prototype.isOvp=function(){return this.opacType===v.OPAC_TYPE.OVP},e.prototype.goToMyLibraryCard=function(){this.isOvp()?this.$state.go("account",{vid:l.getVid(),lang:this.lang,section:"overview"},{reload:!0}):this.$window.open(this.libraryCardMenuService.getIlsBaseUrl(),"_blank"),this.actionEvent.emit(null)},e.prototype.goToUserSettings=function(){this.$state.go("account",{vid:l.getVid(),lang:this.lang},{reload:!0}),this.actionEvent.emit(null)},e.prototype.goToLoans=function(){this.$state.go("account",{vid:l.getVid(),lang:this.lang,section:"loans"},{reload:!0})},e.prototype.goToRequests=function(){this.$state.go("account",{vid:l.getVid(),lang:this.lang,section:"requests"},{reload:!0})},e.prototype.selectedLang=function(e){var t="mypref.language.option."+e;if(this.currentLang()==e){var n=this.$translate.instant(t)+" "+this.$translate.instant("nui.aria.menu.selectedLang");return n}return this.$translate.instant(t)},e.prototype.showLoginDialog=function(){var e='<md-dialog aria-label="Change login credentials" md-component-id="fullView" style="border-radius: 4px"><md-dialog-content><prm-language-selection (on-cancel)="ctrl.onCancel()" (on-save)="ctrl.onSave($event)" </prm-language-selection></md-dialog-content></md-dialog>',t=this;this.$mdDialog.show({template:e,bindToController:!0,controller:function(){this.onCancel=function(){t.$mdDialog.hide()},this.onSave=function(e){t.$mdDialog.hide()}},controllerAs:"ctrl"})},e.prototype.mainMenuFocusedDialog=function(){var e=this;this.$timeout(function(){var t=e.isSignedIn()?"#signOutButton":"#changeLang",n=document.querySelector(t);n&&n.focus()},100)},Object.defineProperty(e.prototype,"isOpenMenuDialog",{get:function(){return document.querySelector(".md-active")},enumerable:!0,configurable:!0}),e.prototype.keydownSupportSignOut=function(e){var t=this.KEY_CODE;if(e.keyCode===t.TAB)return e.preventDefault(),document.querySelector("#changeLang").focus()},e.prototype.keydownSupportSignIn=function(e){var t=this.KEY_CODE;if(e.keyCode===t.TAB)return e.preventDefault(),document.querySelector("#signOutButton").focus()},e.prototype.isRTL=function(){return"rtl"===this.changeLangService.direction},e.prototype.isRefworksActionEnabled=function(){return this.actionListService.isActionEnabled("RefWorks")},e.prototype.refworksWithBeacon=function(){},r([a.Input(),i("design:type",Boolean)],e.prototype,"isLoggedIn",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"actionEvent",void 0),r([p.beacon({p:"general",op:"gotoeShelf"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToFavorties",null),r([p.beacon({p:"general",op:"gotoSearchHistory"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToSearchHistory",null),r([p.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.AuthenticationMethod&&l.AuthenticationMethod)&&t||Object]),i("design:returntype",void 0)],e.prototype,"handleLogin",null),r([p.beacon({p:"general",op:"signOut"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"handleLogout",null),r([p.beacon({p:"general",op:"gotoMyAccount"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToUserSettings",null),r([p.beacon({p:"general",op:"goToRefworks"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"refworksWithBeacon",null),e=r([a.Component({selector:"prm-user-area-expandable",templateUrl:"components/search/topbar/userArea/user-area-expandable.html"}),o(2,a.Inject("$translate")),o(10,a.Inject("I18nService")),o(11,a.Inject("$state")),o(12,a.Inject("$timeout")),o(13,a.Inject("$window")),o(15,a.Inject("$mdDialog")),o(16,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.UserAreaExpandableService&&s.UserAreaExpandableService)&&n||Object,"function"==typeof(_="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&_||Object,Object,"function"==typeof(O="undefined"!=typeof f.JournalsService&&f.JournalsService)&&O||Object,"function"==typeof(T="undefined"!=typeof d.LoginIframeService&&d.LoginIframeService)&&T||Object,"function"==typeof(E="undefined"!=typeof h.LoginService&&h.LoginService)&&E||Object,"function"==typeof(w="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&w||Object,"function"==typeof(I="undefined"!=typeof m.UserSessionManagerService&&m.UserSessionManagerService)&&I||Object,"function"==typeof(R="undefined"!=typeof g.AuthenticationService&&g.AuthenticationService)&&R||Object,"function"==typeof(P="undefined"!=typeof y.ChangeLangService&&y.ChangeLangService)&&P||Object,Object,Object,Object,Object,"function"==typeof(j="undefined"!=typeof v.LibraryCardMenuService&&v.LibraryCardMenuService)&&j||Object,Object,Object,"function"==typeof(A="undefined"!=typeof b.CMIntegrationService&&b.CMIntegrationService)&&A||Object,"function"==typeof(C="undefined"!=typeof S.ActionListService&&S.ActionListService)&&C||Object])],e);var t,n,_,O,T,E,w,I,R,P,j,A,C}();t.PrmUserAreaExpandable=_},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(387),c=n(1),u=n(20),l=n(7),f=n(10),p=function(){function e(e,t,n,r,i,o,s){this.languageSelectionService=e,this.changeLangService=t,this.jwtUtilService=n,this.i18nService=r,this.userSessionManagerService=i,this.$state=o,this.$timeout=s,this.onCancel=new a.EventEmitter,this.onSave=new a.EventEmitter,this.attributesMap=c.getAttributesMap(),this.vid=c.getVid(),this.changeLangEvent=new a.EventEmitter,this.rtlLanguages=c.getRtlLanguages(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.changeLangService.addLangParamToUrl(this.selectedLanguage),this.selectedLanguage=r.getLanguage()}return e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.onCancel.emit(null)},e.prototype.closeAfterSelectLang=function(){this.onSave.emit(null)},e.prototype.changeLanguage=function(e){var t=this;if(this.selectedLanguage=e,this.changeLangService.addLangParamToUrl(this.selectedLanguage),"GUEST"!==this.jwtUtilService.getDecodedToken().userGroup){var n=this.changeLangService.updateUserLanguage(this.vid,this.selectedLanguage);n.then(function(e){return t.successAction(e)})}return this.i18nService.setLanguage(this.selectedLanguage).then(function(){t.changeLangEvent.emit({lang:t.selectedLanguage}),t.$timeout(function(){return t.$state.go(t.$state.current,{lang:t.selectedLanguage},{reload:!0})})})},Object.defineProperty(e.prototype,"selectedLanguage",{get:function(){return this._selectedLanguage},set:function(e){this._selectedLanguage=e},enumerable:!0,configurable:!0}),e.prototype.successAction=function(e){this.userSessionManagerService.syncJwtWithTabs(e.data),this.jwtUtilService.storeJwt(e.data)},r([a.Output(),i("design:type",Object)],e.prototype,"onCancel",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"onSave",void 0),r([a.Output(),i("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"changeLangEvent",void 0),e=r([a.Component({selector:"prm-language-selection",templateUrl:"components/search/topbar/userArea/languageSelection/language-selection.html"}),o(3,a.Inject("I18nService")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.LanguageSelectionService&&s.LanguageSelectionService)&&n||Object,"function"==typeof(p="undefined"!=typeof u.ChangeLangService&&u.ChangeLangService)&&p||Object,"function"==typeof(d="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&d||Object,Object,"function"==typeof(h="undefined"!=typeof f.UserSessionManagerService&&f.UserSessionManagerService)&&h||Object,Object,Object])],e);var t,n,p,d,h}();t.PrmLanguageSelection=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(22),u=n(8),l=function(){function e(e,t,n,r){
this.$state=e,this.configurationUtil=t,this.journalsService=n,this.mediaQueries=r,this.displayFavorites=!0,this.showMainMenu=!0,this.isSummonOverAlma()&&(this.displayFavorites=!1,this.showMainMenu=!1),this.isServicePage()&&(this.showMainMenu=!1),this.isDeposit()&&(this.showMainMenu=!1,this.displayFavorites=!1)}return e.prototype.isSummonOverAlma=function(){return"suprima"===this.configurationUtil.getBackendSystem()&&this.configurationUtil.getSummonOverAlma()},e.prototype.isServicePage=function(){return"servicesPage"===this.$state.current.name},e.prototype.isDeposit=function(){return"deposit"===this.$state.current.name||"delivery"===this.$state.current.name||"canonDelivery"===this.$state.current.name||"cnameDelivery"===this.$state.current.name},e.prototype.isViewer=function(){return"delivery"===this.$state.current.name||"canonDelivery"===this.$state.current.name||"cnameDelivery"===this.$state.current.name},e=r([a.Component({selector:"prm-topbar",templateUrl:"components/search/topbar/topbar.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&t||Object,"function"==typeof(n="undefined"!=typeof c.JournalsService&&c.JournalsService)&&n||Object,"function"==typeof(l="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&l||Object])],e);var t,n,l}();t.PrmTopbar=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=n(0),c=n(11),u=n(14),l=n(1),f=n(1),p=n(6),d=n(146),h=n(156),m=n(8),g=n(30),y=n(22),v=n(49),b=n(1),S=n(21),_=n(46),O=n(9),T=n(28),E=n(10),w=n(96),I=n(2),R=n(150),P=n(27),j=n(115),A=n(15),C=n(66),$=n(132),D=n(88),L=n(3),k={query:"-1",queryTerm:"-1"},M=function(){function e(e,t,n,r,i,o,a,s,c,u,l,p,d,h,m,g,y,v,b,S,_,O,T,E,w,I,R,P,j){var A=this;this.mobileMenu=e,this.searchService=t,this.$location=n,this.$timeout=r,this.searchBoxIcons=i,this.iconSets=o,this.$mdDialog=a,this.searchFieldsService=s,this.$urlRouter=c,this.$state=u,this.$rootScope=l,this.primolyticsService=p,this.mappingTablesCache=d,this.mediaQueries=h,this.skipToService=m,this.searchStateService=g,this.$stateParams=y,this.alertService=v,this.journalsService=b,this.databasesService=S,this.databasesCategorizeService=_,this.personalizeResultsButtonService=O,this.$scope=T,this.$translate=E,this.userSessionManagerService=w,this.preFiltersService=I,this.configurationUtil=R,this.briefResultService=P,this.orgListService=j,this.showFacets=!1,this._showUIBlocker=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.showResourceRecommender=!1,this.vid=f.getVid(),this.haveOrgListCategories=!0,this.isReferenceEntry=!0,this.showPcAvailabilityForScope=$(function(){var e=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"],t=A.$stateParams.search_scope;return D(Object.keys(e),function(n){return"AVAILABLE_ONLY"===e[n][t]})}),this.showPcAvailabilityForScopeWithNFT=$(function(){var e=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"],t=A.$stateParams.search_scope;return D(Object.keys(e),function(n){return"AVAILABLE_ONLY"===e[n][t]||"INCLUDE_NO_FULL_TEXT"===e[n][t]})}),this.searchService.showMobileFacets=!0,this.searchService.resetSearchDone(),this.searchStateService.resetSearchObject(),this.searchService.resetResultObject();var C=this.searchService.getSearchObject();C?(this.query=this.parseSearchTerm(C.query),this.scope=C.scope):this.query="",this.init(),this.$scope.$watch(function(){return A.searchInProgress},function(e){e||A.$timeout(function(){A.showTimer=!0},0)}),angular.element(document).find("prm-full-view").length>0&&(this.briefResultService.previousUrl=void 0,this.$mdDialog.hide()),this.isJournalCategories=this.setJournalCategoriesByConfiguration()}return e.prototype.isRecommendationsEnabled=function(){var e=this.mappingTablesCache.findByProperties("Resource Recommender Config",{target:"enable"});return"true"===e[0].source2},e.prototype.hideFacets=function(){return this.$state.current.name===a.STATE_NAMES.CITATION_TRAILS},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.containsBrowseGap=function(){return this.searchService.hasBrowseGap()},e.prototype.init=function(){this.callResetParametersOfSearchService(),this.updateFieldsFromUrl(),this.searchService.fromEsploro()?(this.updatePageTitleResearch(),this.updatePageDescriptionResearch(),this.updateCanonicalFullDisplayResearch()):this.updatePageTitle()},e.prototype.callResetParametersOfSearchService=function(){var e=this,t=this.searchService.facetService.getStickyFacets();if(t.forEach(function(t){t.persistent&&e.searchStickyFacetBeacon(t)}),this.searchService.cameFromState.startsWith("lateralLinking:")){var n="",r=this.searchService.cameFromState.split(":");r.length>1&&(n=r[1]),""==this.searchService.cameFromState,this.resetParametersOfSearchServiceWithBeacon(n,this.searchService.isFacetExact)}else if(this.$stateParams.came_from&&("search_history"===this.$stateParams.came_from?this.resetParametersWithSearchHistoryBeacon():"saved_queries"===this.$stateParams.came_from&&this.resetParametersWithSavedQueriesBeacon()),this.hasFacets())this.resetParametersOfSearchService(),"preFilter"===this.searchService.cameFromState&&this.runPreFilterBeacon();else if(this.$stateParams.came_from&&this.$stateParams.came_from.startsWith("pagination")){var i=this.$stateParams.came_from.split("_")[1],o=this.$stateParams.came_from.split("_")[2];i<o?this.resetParametersWithNextPaginationBeacon():this.resetParametersWithPrevPaginationBeacon()}else this.$stateParams.query&&"search_history"!==this.$stateParams.came_from&&"saved_queries"!==this.$stateParams.came_from?this.$state.current.name===a.STATE_NAMES.JOURNAL_SEARCH?this.searchJournalsWithBeacon():this.$state.current.name===a.STATE_NAMES.DB_SEARCH?this.searchDBWithBeacon():this.$state.current.name===a.STATE_NAMES.ORGANIZATION_LIST?this.searchDBWithBeacon():this.$state.current.name===a.STATE_NAMES.NEWSPAPERS?this.searchNewspapaersWithBeacon():"browse"===this.$state.params.mode?this.searchBrowseWithBeacon():"featuredResults"===this.$stateParams.came_from?this.searchFeaturedResultWithBeacon():"personalization"===this.$stateParams.came_from?this.searchPersonalization():"sort"===this.$stateParams.came_from?this.searchSort():"advanced"===this.$stateParams.mode?this.searchAdvancedSearchWithBeacon():("preFilter"===this.searchService.cameFromState&&this.runPreFilterBeacon(),this.searchWithBeacon()):this.resetParametersOfSearchService()},Object.defineProperty(e.prototype,"isCategories",{get:function(){return this.databasesCategorizeService.isCategories()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayDBCategories",{get:function(){return(this.isDBSearch()||this.isJournalSearch()&&this.isPrimoVE&&this.isJournalCategories)&&(!this.isSearchFromBarDBorJournals()||this.isSearchFromCategoryTree())&&this.isCategories},enumerable:!0,configurable:!0}),e.prototype.isFromRedirectFilter=function(){return"true"===this.$stateParams.fromRedirectFilter},e.prototype.hasFacets=function(){var e=this.$stateParams.facet,t=this.$stateParams.mfacet;return!(C(e)&&C(t))},e.prototype.searchWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchJournalsWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchDBWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchNewspapaersWithBeacon=function(){this.resetParametersOfSearchService(),this.$location.search("came_from",null)},e.prototype.searchBrowseWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchFeaturedResultWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchStickyFacetBeacon=function(e){},e.prototype.searchAdvancedSearchWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.runPreFilterBeacon=function(){},e.prototype.searchPersonalization=function(){this.resetParametersOfSearchService(),this.$location.search("came_from",null)},e.prototype.searchSort=function(){this.resetParametersOfSearchService(),this.$location.search("came_from",null)},e.prototype.setShowResourceRecommender=function(e){this.showResourceRecommender=e},e.prototype.resetParametersOfSearchService=function(){var e=this,t=this.searchService.resetParameters();t&&t.then&&t.then(function(){e.$timeout(function(){return e.showFacets=!0},1e3),e.$state.current.name===a.STATE_NAMES.CITATION_TRAILS&&e.focusOnFirstPage()})},e.prototype.resetParametersWithSearchHistoryBeacon=function(){this.$location.search("came_from",null)},e.prototype.resetParametersWithSavedQueriesBeacon=function(){this.$location.search("came_from",null)},e.prototype.resetParametersWithNextPaginationBeacon=function(){this.$location.search("came_from",null),this.resetParametersOfSearchService()},e.prototype.resetParametersWithPrevPaginationBeacon=function(){this.$location.search("came_from",null),this.resetParametersOfSearchService()},e.prototype.focusOnFirstPage=function(){this.$timeout(function(){var e=document.querySelector("#searchResultPage1");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0"))},0)},e.prototype.resetParametersOfSearchServiceWithBeacon=function(e,t){this.resetParametersOfSearchService()},e.prototype.isLinksMenuVisible=function(){return this.mobileMenu.getLinksMenuVisible()},e.prototype.onSearchBarSearchEvent=function(e){var t=a.STATE_NAMES.SEARCH;(this.journalsService.isJournalSearch()||this.journalsService.returnToJournalsSearch())&&(t=a.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(t=a.STATE_NAMES.DB_SEARCH),this.orgListService.isOrgListSearch()&&(t=a.STATE_NAMES.ORGANIZATION_LIST);var n={search_scope:e.scopeField,tab:e.tab,journals:e.journals,databases:e.databases,organization:e.organization,organizationPath:e.organizationPath,sortby:e.sortby,query:"contains,"+e.searchType+",",vid:this.vid,facet:[]};this.$state.go(t,n,{reload:t})},e.prototype.isSearchDone=function(){return this.searchService.isSearchDone()},e.prototype.hasSearchResults=function(){var e=this.searchResults;return A(e)&&e.length>0},Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredResult",{get:function(){return this.searchService.getResultObject().featuredResult},enumerable:!0,configurable:!0}),e.prototype.updatePageTitle=function(){this.searchService.updatePageTitle()},e.prototype.updatePageTitleResearch=function(){this.searchService.updatePageTitleResearch()},e.prototype.updatePageDescriptionResearch=function(){this.searchService.updatePageDescriptionResearch()},e.prototype.updateCanonicalFullDisplayResearch=function(){this.searchService.updateCanonicalFullDisplayResearch()},e.prototype.parseSearchTerm=function(e){if(!e)return"";if(e=this.preFiltersService.removePreFilter(e,!1,";"),k.query===e)return k.queryTerm;for(var t=e.split(","),n=0;n<2;n++)t.shift();k.query=e;var r=t.join(",");return k.queryTerm=r,r},e.prototype.updateFieldsFromUrl=function(){var e=this.searchService.getSearchObject();this.searchFieldsService.searchParams=this.$location.search(),"advanced"!==this.$stateParams.mode&&e&&(this.searchFieldsService.mainSearch=this.parseSearchTerm(e.query)),e=e||{},this.searchFieldsService.scope=e.scope||l.getDefaultScope(),this.searchFieldsService.sortby=e.sortby||"rank",this.searchFieldsService.offset=e.offset||0},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this.searchService.signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseGapAlert",{get:function(){return this.searchService.browseGapAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterRedirectAlert",{get:function(){return this.searchService.afterRedirectAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipLinks",{get:function(){if(this.skipToService.skipLinks)return this.skipToService.skipLinks.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.isShowPartsOnCitationTrails=function(){var e=this.$state.current.name;return e===a.STATE_NAMES.CITATION_TRAILS},Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),e.prototype.isDBSearch=function(){return this.databasesService.isDBSearch()},Object.defineProperty(e.prototype,"isDBcategory",{get:function(){return this.$stateParams.query.indexOf("contains,dbcategory")!==-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=b.getAttributesMap();return!!(this.searchService.isCategories&&this.searchService.isActivate||this.isOrgListSearch()&&this.haveOrgListCategories)||"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPrimoVE",{get:function(){return"suprima"===this.configurationUtil.getBackendSystem()},enumerable:!0,configurable:!0}),e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showUIBlocker",{get:function(){return this._showUIBlocker},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){this.personalizeResultsButtonService.cancelPressed=!0},e.prototype.keydownSupport=function(e){this.KEY_CODE;27===e.keyCode&&this.cancel(e)},e.prototype.closeMobileFacet=function(e){this.showMobileFacets=!0},Object.defineProperty(e.prototype,"showMobileFacets",{get:function(){return this.searchService.showMobileFacets},set:function(e){this.searchService.showMobileFacets=e},enumerable:!0,configurable:!0}),e.prototype.hideReferenceEntryItem=function(e){this.isReferenceEntry=!1},Object.defineProperty(e.prototype,"searchInfo",{get:function(){return this.searchService.getResultObject().info},enumerable:!0,configurable:!0}),e.prototype.isSearchFromBarDBorJournals=function(){return this.databasesCategorizeService.isSearchFromBarDBorJournals()},e.prototype.isSearchFromLetters=function(){return this.databasesCategorizeService.isSearchFromLetters()},e.prototype.isSearchFromCategoryTree=function(){return this.databasesCategorizeService.isSearchFromCategoryTree()},e.prototype.refEntryActive=function(){return b.getRefEntryActive()},e.prototype.isCitationState=function(){return this.$state.current.name===a.STATE_NAMES.CITATION_TRAILS},e.prototype.isChaptersAndReviewsState=function(){return this.$state.current.name==a.STATE_NAMES.CITATION_CHAPTERS||this.$state.current.name==a.STATE_NAMES.CITATION_REVIEWS},Object.defineProperty(e.prototype,"isMobileDBSlider",{get:function(){return this.databasesCategorizeService.isMobileDBSlider},enumerable:!0,configurable:!0}),e.prototype.openMobileDBSlider=function(){this.databasesCategorizeService.isMobileDBSlider=!0,document.body.style.overflow="hidden"},e.prototype.isOrgListSearch=function(){return this.orgListService.isOrgListSearch()},e.prototype.setHaveOrgListCategories=function(e){this.haveOrgListCategories=e},e.prototype.isSearchFromOrgListCategory=function(){return this.orgListService.isSearchFromOrgListCategory()},e.prototype.isJournalSearch=function(){return this.$state.current.name===a.STATE_NAMES.JOURNAL_SEARCH},e.prototype.getCategoriesType=function(){return this.isDBSearch()?"db":this.isJournalSearch()?"journal":this.isSearchFromOrgListCategory()?"orgList":""},e.prototype.getCategoriesCode=function(e){return"db"==this.getCategoriesType()?"dbcategories."+e:"journal"==this.getCategoriesType()?("databases"==e&&(e="journals"),"nui.journalsearch.category."+e):e},e.prototype.setJournalCategoriesByConfiguration=function(){return L(b.getAttributesMap(),["journalCategoriesTree"],!0)},e.prototype.isRapido=function(){if(l.isNgrs()){var e=l.getScopeList().map(function(e){return e.tab});return e.indexOf("RAPIDXL")>-1}return!1},r([p.beacon({p:"search",op:"do"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchWithBeacon",null),r([p.beacon({p:"search",op:"atoz"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchJournalsWithBeacon",null),r([p.beacon({p:"search",op:"azdb"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchDBWithBeacon",null),r([p.beacon({p:"search",op:"newspapers"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchNewspapaersWithBeacon",null),r([p.beacon({p:"search",op:"browseRelated"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchBrowseWithBeacon",null),r([p.beacon({p:"search",op:"featuredResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchFeaturedResultWithBeacon",null),r([p.beacon({p:"persistent"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"searchStickyFacetBeacon",null),r([p.beacon({p:"search",op:"advancedSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchAdvancedSearchWithBeacon",null),r([p.beacon({p:"search",op:"preFilter"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"runPreFilterBeacon",null),r([v.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchPersonalization",null),r([v.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"searchSort",null),r([v.preventStateReload,p.beacon({p:"search",op:"sessionQuery"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"resetParametersWithSearchHistoryBeacon",null),r([v.preventStateReload,p.beacon({p:"search",op:"savedQuery"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"resetParametersWithSavedQueriesBeacon",null),r([v.preventStateReload,p.beacon({p:"brief",op:"next"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"resetParametersWithNextPaginationBeacon",null),r([v.preventStateReload,p.beacon({p:"brief",op:"previous"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"resetParametersWithPrevPaginationBeacon",null),r([p.beacon({p:"search",op:"lateralLinking"}),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],e.prototype,"resetParametersOfSearchServiceWithBeacon",null),e=r([s.Component({selector:"prm-search",templateUrl:"components/search/search.html"}),o(2,s.Inject("$location")),o(3,s.Inject("$timeout")),o(4,s.Inject("searchBoxIcons")),o(5,s.Inject("iconSets")),o(6,s.Inject("$mdDialog")),o(8,s.Inject("$urlRouter")),o(9,s.Inject("$state")),o(10,s.Inject("$rootScope")),o(16,s.Inject("$stateParams")),o(22,s.Inject("$scope")),o(23,s.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof d.MobileMenu&&d.MobileMenu)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SearchService&&c.SearchService)&&n||Object,Object,Object,Object,Object,Object,"function"==typeof(M="undefined"!=typeof u.SearchFieldsService&&u.SearchFieldsService)&&M||Object,Object,Object,Object,"function"==typeof(x="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&x||Object,"function"==typeof(F="undefined"!=typeof O.MappingTablesCache&&O.MappingTablesCache)&&F||Object,"function"==typeof(U="undefined"!=typeof m.MediaQueries&&m.MediaQueries)&&U||Object,"function"==typeof(B="undefined"!=typeof h.SkipToService&&h.SkipToService)&&B||Object,"function"==typeof(N="undefined"!=typeof S.SearchStateService&&S.SearchStateService)&&N||Object,Object,"function"==typeof(q="undefined"!=typeof g.AlertFactory&&g.AlertFactory)&&q||Object,"function"==typeof(H="undefined"!=typeof y.JournalsService&&y.JournalsService)&&H||Object,"function"==typeof(V="undefined"!=typeof T.DatabasesService&&T.DatabasesService)&&V||Object,"function"==typeof(Y="undefined"!=typeof R.DatabasesCategorizeService&&R.DatabasesCategorizeService)&&Y||Object,"function"==typeof(z="undefined"!=typeof _.PersonalizeResultsButtonService&&_.PersonalizeResultsButtonService)&&z||Object,Object,Object,"function"==typeof(G="undefined"!=typeof E.UserSessionManagerService&&E.UserSessionManagerService)&&G||Object,"function"==typeof(W="undefined"!=typeof w.PreFiltersService&&w.PreFiltersService)&&W||Object,"function"==typeof(Q="undefined"!=typeof I.ConfigurationUtil&&I.ConfigurationUtil)&&Q||Object,"function"==typeof(J="undefined"!=typeof P.BriefResultService&&P.BriefResultService)&&J||Object,"function"==typeof(K="undefined"!=typeof j.OrgListCategorizeService&&j.OrgListCategorizeService)&&K||Object])],e);var t,n,M,x,F,U,B,N,q,H,V,Y,z,G,W,Q,J,K}();t.PrmSearch=M},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(757),a=n(147),s=n(758),c=n(759),u=n(388);n(144);var l=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmVirtualBrowse,s.PrmVirtualBrowseItem,c.PrmVirtualBrowseItemInfo],providers:[a.VirtualBrowseService,u.VirtualBrowseItemInfoService],imports:["angular-inview"]})],e)}();t.VirtualBrowseModule=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(147),c=n(33),u=n(2),l=n(26),f=n(6),p=n(65),d=n(3),h=50,m=110,g=function(){function e(e,t,n,r,i,o,a,s){var c=this;this.primolyticsService=e,this.virtualBrowseService=t,this.$mdPanel=n,this.$timeout=r,this.$element=i,this.$interval=o,this.smoothScrollUtil=a,this.configurationUtil=s,this.CLICK_TIME=200,this.INITIAL_DISTANCE=3,this.LEFT="LEFT",this.RIGHT="RIGHT",this.nextBeaconCalledOnce=!1,this.previousBeaconCalledOnce=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.MAX_DISTANCE=20,this.focusedIndex=h,this.isListFocused=!1,this.scrollElement=angular.element(document.querySelector("#prm-virtual-browse .md-virtual-repeat-scroller")),i[0].addEventListener&&(i[0].addEventListener("mousewheel",function(e){c.mouseWheelHandler(e)},!1),i[0].addEventListener("DOMMouseScroll",function(e){c.mouseWheelHandler(e)},!1))}return e.prototype.ngOnInit=function(){this.dynamicVirtualBrowseItems=new y(this.item,this.virtualBrowseService,this.scrollElement,this.configurationUtil)},Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.dynamicVirtualBrowseItems.currentIndex},set:function(e){this.dynamicVirtualBrowseItems.currentIndex=e},enumerable:!0,configurable:!0}),e.prototype.scrollLeftMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.LEFT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.scrollRightMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.RIGHT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.previous=function(e){13===e.which&&this.scrollListWithClick(this.LEFT)},e.prototype.next=function(e){13===e.which&&this.scrollListWithClick(this.RIGHT)},e.prototype.scrollListWithClick=function(e){this.$interval.cancel(this.interval),this.scrollDirection=e,this.smoothScrollClick()},e.prototype.focusSupport=function(e){var t=angular.element(e.target).parent().children();if(t.attr("tabindex",-1),!this.isListFocused)switch(e.type){case"focus":if(this.isListFocused=!0,angular.element(document.querySelector("#vBrowseid"+this.focusedIndex)).length)this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex);else{var n=t[Math.ceil(t.length/2)];this.focusedIndex=Number.parseInt(n.id.split("vBrowseid")[1]),n.focus()}}},e.prototype.focusOutSupport=function(e){this.isListFocused=!1;var t=angular.element(e.target).parent().children();t.attr("tabindex",0)},e.prototype.keyDownSupport=function(e,t){var n=this.KEY_CODE;switch(e.keyCode){case n.UP_ARROW:case n.LEFT_ARROW:this.focusedIndex>0&&(this.focusedIndex--,this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex));break;case n.DOWN_ARROW:case n.RIGHT_ARROW:this.focusedIndex<2*h-1&&(this.focusedIndex++,this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex));break;case n.TAB:break;case n.ENTER:this.navigateToItemFullView(t),e.stopPropagation()}},e.prototype.scrollList=function(){this.intervalCounter++,this.distance+=this.intervalCounter%38===0&&this.distance<this.MAX_DISTANCE?1:0,this.scrollDirection===this.LEFT&&(this.scrollElement[0].scrollLeft-=this.distance),this.scrollDirection===this.RIGHT&&(this.scrollElement[0].scrollLeft+=this.distance),(this.scrollElement[0].scrollLeft>=this.dynamicVirtualBrowseItems.rightScrollLimit||this.scrollElement[0].scrollLeft<=this.dynamicVirtualBrowseItems.leftScrollLimit)&&this.$interval.cancel(this.interval)},e.prototype.scrollMouseUp=function(){this.sendScrollDirectionBeacon(this.scrollDirection),this.$timeout.cancel(this.clickTimeOut)?this.smoothScrollClick():this.$interval.cancel(this.interval)},e.prototype.easeOutExpo=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)+t},e.prototype.easeInOutQuart=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)},e.prototype.smoothScrollClick=function(){var e=this,t=7*(this.scrollElement[0].offsetWidth/10);this.scrollDirection===this.LEFT&&(t=-t);var n=0,r=60,i=this.scrollElement[0].scrollLeft;this.interval=this.$interval(function(){var o=e.easeInOutQuart(n,i,t,r);return o<=e.dynamicVirtualBrowseItems.leftScrollLimit&&o<e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicVirtualBrowseItems.leftScrollLimit)):o>=e.dynamicVirtualBrowseItems.rightScrollLimit&&o>e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicVirtualBrowseItems.rightScrollLimit)):(n++,e.scrollElement[0].scrollLeft=o,void(n===r&&e.$interval.cancel(e.interval)))},2)},e.prototype.mouseWheelHandler=function(e){e.preventDefault();var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return this.sendScrollDirectionBeacon(t>0?this.RIGHT:this.LEFT),!(t>=0&&this.isRightScrollDisabled||t<=0&&this.isLeftScrollDisabled)&&(this.scrollElement[0].scrollLeft+=30*t,!1)},e.prototype.navigateToItemFullView=function(e){this.sendVirtualBrowseItemBeacon(e.recordId),this.virtualBrowseService.navigateToItemFullView(e)},e.prototype.getItemFullViewParams=function(e){return this.virtualBrowseService.getItemFullViewParams(e)},Object.defineProperty(e.prototype,"isRightScrollDisabled",{get:function(){return!!this.scrollElement&&this.scrollElement[0].scrollLeft>=this.dynamicVirtualBrowseItems.rightScrollLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeftScrollDisabled",{get:function(){return!!this.scrollElement&&(void 0==this.dynamicVirtualBrowseItems.leftScrollLimit?0==this.scrollElement[0].scrollLeft:this.scrollElement[0].scrollLeft<=this.dynamicVirtualBrowseItems.leftScrollLimit)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftFinalIndex",{get:function(){return this.dynamicVirtualBrowseItems.leftFinalIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFinalIndex",{get:function(){return this.dynamicVirtualBrowseItems.rightFinalIndex},enumerable:!0,configurable:!0}),e.prototype.onItemInView=function(e,t,n){e===this.leftFinalIndex-1&&(this.dynamicVirtualBrowseItems.leftScrollLimit=this.dynamicVirtualBrowseItems.leftScrollLimit||this.scrollElement[0].scrollLeft-2*m,this.dynamicVirtualBrowseItems.leftScrollLimit<0&&(this.dynamicVirtualBrowseItems.leftScrollLimit=0)),e===this.rightFinalIndex+1&&(this.dynamicVirtualBrowseItems.rightScrollLimit=this.dynamicVirtualBrowseItems.rightScrollLimit||this.scrollElement[0].scrollLeft+2*m)},e.prototype.getStateName=function(){return this.virtualBrowseService.getStateName()},e.prototype.sendVirtualBrowseItemBeacon=function(e){},e.prototype.handleKeyUp=function(e){var t=this.KEY_CODE;switch(e.keyCode){case t.LEFT_ARROW:this.sendScrollDirectionBeacon(this.LEFT);break;case t.RIGHT_ARROW:this.sendScrollDirectionBeacon(this.RIGHT)}},e.prototype.sendScrollDirectionBeacon=function(e){this.previousBeaconCalledOnce||e!==this.LEFT?this.nextBeaconCalledOnce||e!==this.RIGHT||(this.sendNextInVirtualBrowseBeacon(),this.nextBeaconCalledOnce=!0):(this.sendPreviousInVirtualBrowseBeacon(),this.previousBeaconCalledOnce=!0)},e.prototype.sendPreviousInVirtualBrowseBeacon=function(){},e.prototype.sendNextInVirtualBrowseBeacon=function(){},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([f.beacon({p:"virtualBrowse",op:"recordVirtualBrowse"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendVirtualBrowseItemBeacon",null),r([f.beacon({p:"virtualBrowse",op:"previousInVirtualBrowse"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendPreviousInVirtualBrowseBeacon",null),r([f.beacon({p:"virtualBrowse",op:"nextInVirtualBrowse"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendNextInVirtualBrowseBeacon",null),e=r([a.Component({selector:"prm-virtual-browse",templateUrl:"components/search/virtualBrowse/virtual-browse.html"}),o(2,a.Inject("$mdPanel")),o(3,a.Inject("$timeout")),o(4,a.Inject("$element")),o(5,a.Inject("$interval")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof f.PrimolyticsService&&f.PrimolyticsService)&&n||Object,"function"==typeof(p="undefined"!=typeof s.VirtualBrowseService&&s.VirtualBrowseService)&&p||Object,Object,Object,Object,Object,"function"==typeof(d="undefined"!=typeof c.SmoothScrollUtil&&c.SmoothScrollUtil)&&d||Object,"function"==typeof(g="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&g||Object])],e);
var t,n,p,d,g}();t.PrmVirtualBrowse=g;var y=function(){function e(e,t,n,r){var i=this;this.item=e,this.virtualBrowseService=t,this.scrollElement=n,this.configurationUtil=r,this.currentIndex=h,this.numItems=2*h,this.params=this.virtualBrowseService.buildRestApiInitialParams(d(this.item,"enrichment.virtualBrowseObject",void 0),d(this.item,"enrichment.bibVirtualBrowseObject",void 0),d(this.item,"pnx.control.sourcerecordid",void 0)||d(this.item,"pnx.display.mms","undefined")),this.isLoading=!0,this.virtualBrowseService.callVirtualBrowseApi(this.params).then(function(e){i.handleResponse(e.data)})}return e.prototype.getLength=function(){return this.numItems},e.prototype.getItemAtIndex=function(e){var t=this;if(!(e<this.leftFinalIndex||e>this.rightFinalIndex))return e<=this.rightLimitIndex&&e>=this.leftLimitIndex?this.virtualBrowseItems[e-this.leftLimitIndex]:void(this.isLoading||(e>this.rightLimitIndex&&(this.params.callNumber=this.nextTerm,this.params.bibCallNumber=this.nextTerm,this.params.position="RIGHT"),e<this.leftLimitIndex&&(this.params.callNumber=this.backTerm,this.params.bibCallNumber=this.backTerm,this.params.position="LEFT"),this.getOffsetLength(this.params.position),this.params.offset=this.globalOffset,this.isLoading=!0,this.params.numOfRecords=20,this.virtualBrowseService.callVirtualBrowseApi(this.params).then(function(e){t.handleResponse(e.data)})))},e.prototype.handleResponse=function(e){var t=this.virtualBrowseService.parseVirtualBrowseApiResponse(e),n=t.virtualBrowseItems;switch(this.params.position){case"CENTER":var r=this.params.mmsId,i=p(n,function(e){return e.recordId.includes(r)});i>-1?n[i].isSelectedRecord=!0:i=Math.floor(n.length/2),this.rightLimitIndex=h+n.length-i,this.leftLimitIndex=h-i,this.virtualBrowseItems=n,this.currentIndex=this.calculateStartIndex(i,n.length),this.nextTerm=t.nextTerm,this.nextTerm||(this.rightFinalIndex=this.rightLimitIndex-1),this.backTerm=t.backTerm,this.backTerm||(this.leftFinalIndex=this.leftLimitIndex);break;case"RIGHT":this.rightLimitIndex=this.rightLimitIndex+n.length,this.nextTerm=t.nextTerm,this.nextTerm||(this.rightFinalIndex=this.rightLimitIndex-1),this.virtualBrowseItems=this.virtualBrowseItems.concat(n);break;case"LEFT":this.leftLimitIndex=this.leftLimitIndex-n.length,this.backTerm=t.backTerm,this.backTerm||(this.leftFinalIndex=this.leftLimitIndex),this.virtualBrowseItems="suprima"===this.configurationUtil.getBackendSystem()?n.reverse().concat(this.virtualBrowseItems):n.concat(this.virtualBrowseItems)}this.isLoading=!1},e.prototype.calculateStartIndex=function(e,t){var n=Math.floor(this.scrollElement[0].offsetWidth/m),r=Math.floor((n-1)/2),i=n-1-r;return t-e<=i?h-n+(t-e)+1:e<=r?h-r+e:h-r},e.prototype.getOffsetLength=function(e){var t=this.virtualBrowseItems;"RIGHT"==e&&this.virtualBrowseItems.reverse();for(var n=0,r=t[0].callNumber,i=1;i<t.length&&t[i].callNumber==r;i++)n++;n==t.length-1&&e===this.globalOffsetDirection?this.globalOffset=this.globalOffset+n:n>0?(this.globalOffsetDirection=e,this.globalOffset=n):(this.globalOffset=0,this.globalOffsetDirection=void 0),"RIGHT"==e&&this.virtualBrowseItems.reverse()},e}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(147),c=function(){function e(e,t){this.$scope=e,this.$timeout=t,this.renderFlag=!0}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.virtualBrowseItem},function(){e.renderFlag=!1,e.$timeout(function(){e.renderFlag=!0},0),e.tooltipDelay="500"})},r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.VirtualBrowseItem&&s.VirtualBrowseItem)&&t||Object)],e.prototype,"virtualBrowseItem",void 0),e=r([a.Component({selector:"prm-virtual-browse-item",templateUrl:"components/search/virtualBrowse/virtualBrowseItem/virtual-browse-item.html"}),o(0,a.Inject("$scope")),o(1,a.Inject("$timeout")),i("design:paramtypes",[Object,Object])],e);var t}();t.PrmVirtualBrowseItem=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(388),s=n(147),c=function(){function e(e){this.virtualBrowseItemInfoService=e}return e.prototype.ngOnInit=function(){},r([o.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.VirtualBrowseItem&&s.VirtualBrowseItem)&&t||Object)],e.prototype,"virtualBrowseItem",void 0),e=r([o.Component({selector:"prm-virtual-browse-item-info",templateUrl:"components/search/virtualBrowse/virtualBrowseItemInfo/virtual-browse-item-info.html"}),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof a.VirtualBrowseItemInfoService&&a.VirtualBrowseItemInfoService)&&n||Object])],e);var t,n}();t.PrmVirtualBrowseItemInfo=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(331),a=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.BrowserStorageManagerService],imports:[]})],e)}();t.BrowserStorageManagerModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(762),a=n(230),s=n(767),c=n(768),u=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmResourceRecommender,s.PrmResourceRecommenderCardContent,c.PrmResourceRecommenderFullView],providers:[a.ResourceRecommenderService]})],e)}();t.ResourceRecommenderModule=u},function(e,t,n){"use strict";function r(e,t){var n=t?u(e.resources,0,t):e.resources;return d(n,function(t){return t.resourceType=e.resourceType}),n}var i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(230),u=n(763),l=(n(81),n(764)),f=n(29),p=n(765),d=n(18),h=3,m=n(8),g=n(6),y=function(){function e(e,t,n,r){this.resourceRecommenderService=e,this.$mdDialog=t,this.mediaQueries=n,this.primolyticsService=r,this.recommendedResources=[],this.previewResources=[],this.resourceRecommenderEvent=new s.EventEmitter}return t=e,e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t=this;if(e.query){var n=e.query.currentValue;n&&this.resourceRecommenderService.getRecommendations(n).then(function(e){return t.parseRecommendations(e)}),this.resourceRecommenderService.resetRecommendetions()}},e.prototype.showAdditionalResourcesLink=function(){var e;return e=this.mediaQueries.gtxs?h:1,this.recommendedResources.length>e},e.prototype.numOfResources=function(){return this.recommendedResources.length},e.prototype.parseRecommendations=function(e){var n=e.data;if(this.resourceRecommenderEvent.emit(n&&n.length>0),!n||0===n.length)return this.recommendedResources=[],void(this.previewResources=[]);n=f(n),this.recommendedResources=l(n,function(e){return r(e)});for(var i=0,o=n;i<o.length;i++){var a=o[i];this.resourceRecommenderService.setRecommendationCount(a.resourceType,a.resources.length)}for(var s=n.length,c=[],u=h,d=0;d<s&&u>0;){var m=0===d?2:1,g=p([n[d].resources.length,m]);c.push(g),u-=g,d++}if(u>0){var y=s-1,g=p([n[y].resources.length-c[y],u]);g>0&&(c[y]+=g)}var v=l(c,function(e,t){return r(n[t],e)});this.previewResources=v,this.previewClass=t.previewClassByLength[v.length],this.resourceRecommenderDisplayedBeacon()},e.prototype.resourceRecommenderLimit=function(){return this.mediaQueries.gtxs?null:1},e.prototype.openFullView=function(){this.reportBeacon("openFullView"),this.$mdDialog.show({templateUrl:"components/search/resourceRecommender/resource-recommender-dialog-template.html",locals:{dialog:this.$mdDialog,mediaQueries:this.mediaQueries,query:this.query,resources:this.recommendedResources},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,controllerAs:"$ctrl",controller:function(){}})},e.prototype.reportBeacon=function(e){},e.prototype.resourceRecommenderDisplayedBeacon=function(){},e.previewClassByLength={1:"flex",2:"flex-50",3:"flex-33"},i([s.Input("query"),o("design:type",String)],e.prototype,"query",void 0),i([s.Output(),o("design:type",Object)],e.prototype,"resourceRecommenderEvent",void 0),i([g.beacon({p:"brief",op:"resourceRecommenderFullView"}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"reportBeacon",null),i([g.beacon({p:"brief",op:"resourceRecommenderDisplayed"}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],e.prototype,"resourceRecommenderDisplayedBeacon",null),e=t=i([s.Component({selector:"prm-resource-recommender",templateUrl:"components/search/resourceRecommender/resource-recommender.html"}),a(1,s.Inject("$mdDialog")),o("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.ResourceRecommenderService&&c.ResourceRecommenderService)&&n||Object,Object,"function"==typeof(u="undefined"!=typeof m.MediaQueries&&m.MediaQueries)&&u||Object,"function"==typeof(d="undefined"!=typeof g.PrimolyticsService&&g.PrimolyticsService)&&d||Object])],e);var t,n,u,d}();t.PrmResourceRecommender=y},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&o(e,t,n)?(t=0,n=r):(t=null==t?0:a(t),n=void 0===n?r:a(n)),i(e,t,n)):[]}var i=n(105),o=n(87),a=n(76);e.exports=r},function(e,t,n){function r(e,t){return i(o(e,t),1)}var i=n(82),o=n(81);e.exports=r},function(e,t,n){function r(e){return e&&e.length?i(e,a,o):void 0}var i=n(311),o=n(766),a=n(74);e.exports=r},function(e,t){function n(e,t){return e<t}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(6),s=function(){function e(e){this.primolyticsService=e}return e.prototype.handle_click=function(){this.report_beacon(this.resource)},e.prototype.report_beacon=function(e){},r([o.Input(),i("design:type",Object)],e.prototype,"resource",void 0),r([a.beacon({p:"brief",op:"resourceRecommender"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"report_beacon",null),e=r([o.Component({selector:"prm-resource-recommender-card-content",templateUrl:"components/search/resourceRecommender/resource-recommender-card-content.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PrimolyticsService&&a.PrimolyticsService)&&t||Object])],e);var t}();t.PrmResourceRecommenderCardContent=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(389),s=n(8),c=n(92),u=["library_information","library_guide","person"],l=function(){function e(e){this.mediaQueries=e}return e.prototype.ngOnInit=function(){e=a(this.resources,function(e){return c(u,e.resourceType)}),this.libraryResources=e[0],this.otherResources=e[1];var e},r([o.Input(),i("design:type",Array)],e.prototype,"resources",void 0),r([o.Input(),i("design:type",String)],e.prototype,"query",void 0),e=r([o.Component({selector:"prm-resource-recommender-full-view",templateUrl:"components/search/resourceRecommender/resource-recommender-full-view.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MediaQueries&&s.MediaQueries)&&t||Object])],e);var t}();t.PrmResourceRecommenderFullView=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(46),c=n(37),u=n(4),l=n(1),f=n(7),p=n(41),d=n(6),h=function(){function e(e,t,n,r,i,o,a){this.personalizeResultsButtonService=e,this.sharedSessionStorage=t,this.jwtUtilService=n,this.$stateParams=r,this.primolyticsService=i,this.$state=o,this.$timeout=a,this.personalizationEnabled=!!l.getAttributesMap().personalizationEnabled&&l.getAttributesMap().personalizationEnabled,this.personalizeResultsButtonService.cancelPressed=!0,this.personalizeResultsButtonService.editPressed=!1}return e.prototype.doPersonalization=function(){this.enable=!this.enable,this.personalizeResultsButtonService.cancelPressed=!1,this.$timeout(function(){var e=document.querySelector("#personalizationDialog");e.focus()},100)},e.prototype.sendBeaconEnablePersonalization=function(){},e.prototype.sendBeaconDisablePersonalization=function(){},Object.defineProperty(e.prototype,"enable",{get:function(){return this.personalizeResultsButtonService.enable&&null!==this.sharedSessionStorage.getItem("personalization")},set:function(e){this.personalizeResultsButtonService.cancelPressed=!1,this.personalizeResultsButtonService.enable=e,this.sharedSessionStorage.setItem("enable_personalization",e),null!==this.sharedSessionStorage.getItem("personalization")&&(this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(u.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.enable?this.sendBeaconEnablePersonalization():this.sendBeaconDisablePersonalization(),this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid))},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},r([d.beacon({p:"personalizedResults",op:"enable"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendBeaconEnablePersonalization",null),r([d.beacon({p:"personalizedResults",op:"disable"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendBeaconDisablePersonalization",null),e=r([a.Component({selector:"prm-personalize-results-button",templateUrl:"components/search/personalization/personalizationButton/personalize-results-button.html"}),o(3,a.Inject("$stateParams")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PersonalizeResultsButtonService&&s.PersonalizeResultsButtonService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SharedSessionStorage&&c.SharedSessionStorage)&&n||Object,"function"==typeof(h="undefined"!=typeof f.JwtUtilService&&f.JwtUtilService)&&h||Object,"function"==typeof(m="undefined"!=typeof p.IStateParamsService&&p.IStateParamsService)&&m||Object,"function"==typeof(g="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&g||Object,Object,Object])],e);var t,n,h,m,g}();t.PrmPersonalizeResultsButton=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(41),c=n(9),u=n(37),l=n(1),f=n(30),p=n(4),d=n(226),h=n(46),m=n(6),g=n(170),y=(n(113),n(771)),v=(n(362),function(){function e(e,t,n,r,i,o,a,s,c){var u=this;this.personalizeResultsButtonService=e,this.mappingTablesCache=t,this.sharedSessionStorage=n,this.personalizationDialogService=r,this.$translate=i,this.$state=o,this.alertService=a,this.primolyticsService=s,this.$stateParams=c,this.vid=l.getVid(),this.sortedDisc=[],this.subDisc=[],this.sortedSub=[],this.selectedDisc={},this.subMap={},this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.maxDisciplines=a.create(f.ALERT_MSG_TYPE.SIMPLE_WITHOUT_DISMISS),this.maxDisciplines.show("nui.validation.pyr.maxDisciplines");var p=this.mappingTablesCache.findByProperties("Personalize Your Results Disciplines Fields",{source1:this.vid});0===p.length&&(p=this.mappingTablesCache.findByProperties("Personalize Your Results Disciplines Fields",{source1:"default"}));var d=p.filter(function(e){return!e.source2});d=d.map(function(e){return e.target});var h=p.filter(function(e){return e.source2});h=h.map(function(e){return{disc:e.source2,subDisc:e.target}});var m=g(h,"disc");Object.keys(m).forEach(function(e){u.subDisc["pyr.discipline."+e]=m[e].map(function(e){return"pyr.discipline."+e.subDisc})}),d=d.map(function(e){return"pyr.discipline."+e}),this.subMap=this.createSubMap(),this.$translate(d).then(function(e){u.sortedDisc=Object.entries(e),u.sortedDisc.sort(function(e,t){return e[1].localeCompare(t[1])})}),Object.keys(this.subDisc).forEach(function(e,t){u.$translate(u.subDisc[e]).then(function(t){var n=Object.entries(t),r=n.sort(function(e,t){return e[1].localeCompare(t[1])});u.sortedSub.push([e,r])})}),this.initSelectedDisiplines()}return e.prototype.getsubDisciplines=function(e){var t=y(this.sortedSub);return t[e]},Object.defineProperty(e.prototype,"enable",{get:function(){return this.personalizeResultsButtonService.enable},enumerable:!0,configurable:!0}),e.prototype.personalize=function(){var e=this,t=[];Object.keys(this.selectedDisc).forEach(function(n){e.selectedDisc[n]&&t.push(n)}),t.length>0?this.$translate(t).then(function(t){var n=Object.entries(t),r=n.sort(function(e,t){return e[1].localeCompare(t[1])}),i=r.map(function(e){return e[0].replace("pyr.discipline.","")}),o=e.sharedSessionStorage.getItem("personalization");e.sharedSessionStorage.setItem("personalization",i.join(";")),o!=i.join(";")?e.reloadStateWithBeacon():e.reloadStateWithoutBeacon(),e.personalizationDialogService.isSignedIn()&&e.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(e.$stateParams.vid)}):0===t.length&&null!==this.sharedSessionStorage.getItem("personalization")&&this.resetPersonalization(),this.personalizeResultsButtonService.editPressed=!1},e.prototype.reloadStateWithBeacon=function(){this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(p.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0})},e.prototype.reloadStateWithoutBeacon=function(){this.$state.go(p.STATE_NAMES.SEARCH,{},{reload:!0})},e.prototype.resetPersonalization=function(e){this.selectedDisc={},this.personalizationDialogService.resetPersonalization(),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(p.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.personalizationDialogService.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid)},e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},e.prototype.isPreferredSaved=function(){return null!==this.sharedSessionStorage.getItem("personalization")},e.prototype.isDisabled=function(e){var t=this,n=this.getsubDisciplines(e[0]);if(!n)return!1;n=n.map(function(e){return e[0]});var r=!1;return n.forEach(function(e,n){t.selectedDisc[e]&&(r=!0)}),r},e.prototype.isDisabledSub=function(e){var t=this.subMap[e[0]];return!!this.selectedDisc[t]},e.prototype.createSubMap=function(){var e=this,t={};return Object.keys(this.subDisc).forEach(function(n,r){e.subDisc[n].forEach(function(e,r){t[e]=n})}),t},e.prototype.countSelectedDisc=function(){var e=this,t=0;return Object.keys(this.selectedDisc).forEach(function(n,r){e.selectedDisc[n]&&(t+=1)}),t},e.prototype.initSelectedDisiplines=function(){var e=this;this.selectedDisc={};var t=this.sharedSessionStorage.getItem("personalization");if(null!==t){var n=t.split(";");n.forEach(function(t,n){e.selectedDisc["pyr.discipline."+t]=!0})}},e.prototype.cancel=function(e){this.personalizeResultsButtonService.cancelPressed=!0,this.personalizeResultsButtonService.editPressed=!1},e.prototype.getSliceLen=function(e){return Math.ceil(e.length/2)},e.prototype.keydownSupport=function(e){this.KEY_CODE;if(9===e.keyCode)return e.preventDefault(),document.querySelector("#personalizationDialog").focus()},r([m.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"reloadStateWithBeacon",null),r([m.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[Boolean]),i("design:returntype",void 0)],e.prototype,"resetPersonalization",null),e=r([a.Component({selector:"prm-personalization-dialog",templateUrl:"components/search/personalization/personalizationDialog/personalization-dialog.html"}),o(4,a.Inject("$translate")),o(5,a.Inject("$state")),o(8,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof h.PersonalizeResultsButtonService&&h.PersonalizeResultsButtonService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,"function"==typeof(v="undefined"!=typeof u.SharedSessionStorage&&u.SharedSessionStorage)&&v||Object,"function"==typeof(b="undefined"!=typeof d.PersonalizationDialogService&&d.PersonalizationDialogService)&&b||Object,Object,Object,"function"==typeof(S="undefined"!=typeof f.AlertFactory&&f.AlertFactory)&&S||Object,"function"==typeof(_="undefined"!=typeof m.PrimolyticsService&&m.PrimolyticsService)&&_||Object,"function"==typeof(O="undefined"!=typeof s.IStateParamsService&&s.IStateParamsService)&&O||Object])],e);var t,n,v,b,S,_,O}());t.PrmPersonalizationDialog=v},function(e,t){function n(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(773),a=n(391),s=function(){function e(){}return e=r([i.NgModule({declarations:[o.ControlledVocabulary],providers:[a.ControlledVocabularyService],imports:[]})],e)}();t.ControlledVocabularyModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(391),c=n(2),u=n(4),l=function(){function e(e,t,n){this.controlledVocabularyService=e,this.$state=t,this.configurationUtil=n}return Object.defineProperty(e.prototype,"stateParams",{get:function(){return this.controlledVocabularyService.getStateParams()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"STATE",{get:function(){return this.configurationUtil.isSuprima()&&this.$state.current.name===u.STATE_NAMES.JOURNAL_SEARCH?u.STATE_NAMES.JOURNAL_SEARCH:u.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e.prototype.getEquivalentTerm=function(){return{equivalentTerm:'"<span class="bold-text text-italic">'+this.equivalentTerm+'</span>"'}},e.prototype.getOriginalQuery=function(){var e=this.query.split(",AND")[0];return{query:'<span class="bold-text text-italic">'+e+"</span>"}},r([a.Input(),i("design:type",String)],e.prototype,"equivalentTerm",void 0),r([a.Input(),i("design:type",String)],e.prototype,"query",void 0),e=r([a.Component({providers:[],selector:"prm-controlled-vocabulary",templateUrl:"components/search/controlledVocabulary/controlled-vocabulary.html"}),o(1,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ControlledVocabularyService&&s.ControlledVocabularyService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&n||Object])],e);var t,n}();t.ControlledVocabulary=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(144);var o=n(775),a=n(225),s=n(392),c=n(776),u=n(777),l=n(393),f=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmMoreLikeThis,c.PrmMoreLikeThisItem,u.PrmMoreLikeThisItemInfo],providers:[a.MoreLikeThisService,l.MoreLikeThisItemService,s.MoreLikeThisItemInfoService],imports:["angular-inview"]})],e)}();t.MoreLikeThisModule=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(225),c=n(6),u=n(11),l=n(26),f=n(145),p=n(56),d=n(4),h=n(147),m=n(2),g=n(33),y=n(20),v=n(93),b=n(190),S=n(1),_=n(3),O=(n(18),n(60),n(65),n(74)),T=n(51),E=0,w=110,I=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p,h,m,g,y,v,b,S){this.moreLikeThisService=e,this.availabilityLineIcons=t,this.$interval=n,this.$timeout=r,this.$q=i,this.searchService=o,this.$stateParams=a,this.scrollService=s,this.collectionDiscoveryService=c,this.virtualBrowseService=u,this.changeLangService=l,this.fullViewService=f,this.smoothScrollUtil=p,this.configurationUtil=h,this.primolyticsService=m,this.$element=g,this.serviceDetailsService=y,this.$scope=v,this.$mdDialog=b,this.$translate=S,this.LEFT="LEFT",this.RIGHT="RIGHT",this.INITIAL_DISTANCE=3,this.CLICK_TIME=200,this.MAX_DISTANCE=20,this.nextBeaconCalledOnce=!1,this.previousBeaconCalledOnce=!1,this.externalLinksCollapse=!1,this.COLLECTION_DISCOVERY_STATE=d.STATE_NAMES.COLLECTION_DISCOVERY,this.isListFocused=!1,this.focusedIndex=E,this.servicesToFilter=["$$R"],this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.scrollElement=angular.element(this.$element[0].querySelector("#prm-more-like-this .md-virtual-repeat-scroller"))}return e.prototype.ngOnInit=function(){var e=this;if(this.institution=S.getInstitutionCode(),this.$stateParams.items=void 0,this.moreLikeThisService.itemsSearchInProgress=!0,this.sameByFields=[],"crs"===this.sameByField){this.sameByFields=_(this.item,"pnx.display.crsinfo"),"rtl"==this.changeLangService.direction&&(this.focusedIndex=this.sameByFields.length);var t,n=this.configurationUtil.getFullViewConfiguration();n&&(t=n.enablelegantolink),this.sameByFields=this.sameByFields.map(function(n){var r=e.serviceDetailsService.getDisplayedCourseCode(n),i={name:r,link:e.serviceDetailsService.createLegantoLink(e.item,n),isLinkable:t&&n&&n.indexOf("$$R")>-1||S.getLegantoTemplateUrl(),tooltip:e.$translate.instant("nui.aria.moreFromTheSame.course")};return i}),this.sameByFields=this.sortByName(this.sameByFields)}else if("col"===this.sameByField){var r=_(this.item,"pnx.search.cdparentid")||this.moreLikeThisService.getCollectionIds(this.item);this.$q.all(this.colTitle(r)).then(function(t){e.sameByFields=t.filter(O).map(function(t){return e.moreLikeThisStateParams(t)}),e.sameByFields=e.sortByName(e.sameByFields),"rtl"==e.changeLangService.direction&&(e.focusedIndex=e.sameByFields.length)})}this.nextOffset=this.fullViewService.nextOffset[this.sameByField],this.totalItems=this.fullViewService.totalItems[this.sameByField],this.items=this.fullViewService.moreLikeThisItems[this.sameByField];var i=this.moreLikeThisUnfilteredItems[this.sameByField];i&&i.length>0&&(this.dynamicMoreLikeThisItems=new R(this.item,this.virtualBrowseService,this.scrollElement,this.sameByField,this.configurationUtil,this.moreLikeThisService,this.totalItems,i));
},Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.dynamicMoreLikeThisItems.currentIndex},set:function(e){this.dynamicMoreLikeThisItems.currentIndex=e},enumerable:!0,configurable:!0}),e.prototype.handleKeyUp=function(e){var t=this.KEY_CODE;switch(e.keyCode){case t.LEFT_ARROW:this.sendScrollDirectionBeacon(this.LEFT);break;case t.RIGHT_ARROW:this.sendScrollDirectionBeacon(this.RIGHT)}},Object.defineProperty(e.prototype,"isRightScrollDisabled",{get:function(){return!!this.scrollElement&&(void 0==this.dynamicMoreLikeThisItems.rightScrollLimit?this.scrollElement[0].scrollLeft+this.scrollElement[0].offsetWidth==this.scrollElement[0].scrollWidth:this.scrollElement[0].scrollLeft>=this.dynamicMoreLikeThisItems.rightScrollLimit)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeftScrollDisabled",{get:function(){return!!this.scrollElement&&(this.dynamicMoreLikeThisItems&&this.dynamicMoreLikeThisItems.leftScrollLimit?this.scrollElement[0].scrollLeft<=this.dynamicMoreLikeThisItems.leftScrollLimit:0==this.scrollElement[0].scrollLeft)},enumerable:!0,configurable:!0}),e.prototype.previous=function(e){13===e.which&&this.scrollListWithClick(this.LEFT)},e.prototype.next=function(e){13===e.which&&this.scrollListWithClick(this.RIGHT)},e.prototype.scrollListWithClick=function(e){this.$interval.cancel(this.interval),this.scrollDirection=e,this.smoothScrollClick()},e.prototype.smoothScrollClick=function(){var e=this,t=7*(this.scrollElement[0].offsetWidth/10);this.scrollDirection===this.LEFT&&(t=-t);var n=0,r=60,i=this.scrollElement[0].scrollLeft;this.interval=this.$interval(function(){var o=e.easeInOutQuart(n,i,t,r);return o<=e.dynamicMoreLikeThisItems.leftScrollLimit&&o<e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicMoreLikeThisItems.leftScrollLimit)):o>=e.dynamicMoreLikeThisItems.rightScrollLimit&&o>e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicMoreLikeThisItems.rightScrollLimit)):(n++,e.scrollElement[0].scrollLeft=o,void(n===r&&e.$interval.cancel(e.interval)))},2)},e.prototype.onItemInView=function(e,t,n){e===this.leftFinalIndex-1&&(this.dynamicMoreLikeThisItems.leftScrollLimit=this.dynamicMoreLikeThisItems.leftScrollLimit||this.scrollElement[0].scrollLeft),e===this.rightFinalIndex+1&&(this.dynamicMoreLikeThisItems.rightScrollLimit=this.dynamicMoreLikeThisItems.rightScrollLimit||this.scrollElement[0].scrollLeft)},Object.defineProperty(e.prototype,"leftFinalIndex",{get:function(){return this.dynamicMoreLikeThisItems.leftFinalIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFinalIndex",{get:function(){return this.dynamicMoreLikeThisItems.rightFinalIndex},enumerable:!0,configurable:!0}),e.prototype.focusSupport=function(e){var t=angular.element(e.target).parent().children();if(t.attr("tabindex",-1),!this.isListFocused)switch(e.type){case"focus":if(this.isListFocused=!0,angular.element(document.querySelector("#moreFromTheSameID"+this.sameByField+this.focusedIndex)).length)this.smoothScrollUtil.focusOn("moreFromTheSameID"+this.sameByField+this.focusedIndex);else{var n=t[Math.ceil(t.length/2)];this.focusedIndex=Number.parseInt(n.id.split("moreFromTheSameID"+this.sameByField)[1]),n.focus()}}},e.prototype.focusOutSupport=function(e){this.isListFocused=!1;var t=angular.element(e.target).parent().children();t.attr("tabindex",0)},e.prototype.keyDownSupport=function(e,t){var n=this.KEY_CODE;switch(e.keyCode){case n.UP_ARROW:case n.LEFT_ARROW:this.focusedIndex>0&&(this.focusedIndex--,this.smoothScrollUtil.focusOn("moreFromTheSameID"+this.sameByField+this.focusedIndex));break;case n.DOWN_ARROW:case n.RIGHT_ARROW:this.focusedIndex<this.totalItems&&(this.focusedIndex++,this.smoothScrollUtil.focusOn("moreFromTheSameID"+this.sameByField+this.focusedIndex));break;case n.TAB:break;case n.ENTER:this.navigateToItemFullView(t),e.stopPropagation()}},e.prototype.easeInOutQuart=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)},e.prototype.scrollContent=function(e){this.sendScrollDirectionBeacon("left"===e?this.LEFT:this.RIGHT),this.scrollService.smoothScrollClick(e,this.offseterElem,this.featuredItems,100)},e.prototype.sendLinkToLegantoBeacon=function(){},e.prototype.sendPreviousInMoreFromTheSameBeacon=function(){},e.prototype.sendNextInMoreFromTheSameBeacon=function(){},e.prototype.sendScrollDirectionBeacon=function(e){this.previousBeaconCalledOnce||e!==this.LEFT?this.nextBeaconCalledOnce||e!==this.RIGHT||(this.sendNextInMoreFromTheSameBeacon(),this.nextBeaconCalledOnce=!0):(this.sendPreviousInMoreFromTheSameBeacon(),this.previousBeaconCalledOnce=!0)},e.prototype.courseItemcode=function(){return _(this.item,"pnx.display.crsinfo")},e.prototype.scrollList=function(){this.intervalCounter++,this.distance+=this.intervalCounter%38===0&&this.distance<this.MAX_DISTANCE?1:0,this.scrollDirection===this.LEFT&&(this.scrollElement[0].scrollLeft-=this.distance),this.scrollDirection===this.RIGHT&&(this.scrollElement[0].scrollLeft+=this.distance),(this.scrollElement[0].scrollLeft>=this.dynamicMoreLikeThisItems.rightScrollLimit||this.scrollElement[0].scrollLeft<=this.dynamicMoreLikeThisItems.leftScrollLimit)&&this.$interval.cancel(this.interval)},e.prototype.scrollLeftMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.LEFT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.scrollRightMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.RIGHT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.scrollMouseUp=function(){this.sendScrollDirectionBeacon(this.scrollDirection),this.$timeout.cancel(this.clickTimeOut)?this.smoothScrollClick():this.$interval.cancel(this.interval)},e.prototype.toggleFacet=function(e){var t=e.target;this.externalLinksCollapse=!this.externalLinksCollapse,t.setAttribute("aria-expanded",this.externalLinksCollapse)},e.prototype.isExternalBtnShown=function(){return this.sameByFields.length>6},e.prototype.getExpandAriaLabel=function(){return this.getLabelByField("nui.aria.moreFromTheSame")},e.prototype.getExpandTabType=function(){return this.getLabelByField("nui.brief.results.tabs")},e.prototype.getLabelByField=function(e){var t="";return"crs"===this.sameByField?t=e+".expandCourses":"col"===this.sameByField&&(t=e+".expandCollections"),t},e.prototype.colTitle=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.collectionDiscoveryService.getSubColWithPath(e,t.institution))}),n},e.prototype.moreLikeThisStateParams=function(e){var t=_(e,"value.name")||_(e,"value.title"),n={level:_(e,"level"),name:t,pid:_(e,"value.pid.value"),tooltip:this.$translate.instant("nui.aria.moreFromTheSame.collection",{collectionName:t})};return n},e.prototype.sendMoreFromTheSameItemBeacon=function(e){},e.prototype.navigateToItemFullView=function(e){this.sendMoreFromTheSameItemBeacon(e.recordId),this.moreLikeThisService.navigateToItemFullView(e)},e.prototype.getStateName=function(){return this.moreLikeThisService.getStateName()},e.prototype.getItemFullViewParams=function(e){return this.moreLikeThisService.getItemFullViewParams(e)},e.prototype.sortByName=function(e){return T(e,[function(e){return e?e.name.toLowerCase():e.name}],["asc"])},e.prototype.closeDialog=function(){this.$mdDialog.hide()},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",String)],e.prototype,"sameByField",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"moreInTheSameCourseItem",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"moreLikeThisUnfilteredItems",void 0),r([c.beacon({p:"moreFromTheSame",op:"linkToLeganto"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendLinkToLegantoBeacon",null),r([c.beacon({p:"moreFromTheSame",op:"previousInMoreFromTheSame"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendPreviousInMoreFromTheSameBeacon",null),r([c.beacon({p:"moreFromTheSame",op:"nextInMoreFromTheSame"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendNextInMoreFromTheSameBeacon",null),r([c.beacon({p:"moreFromTheSame",op:"recordMoreFromTheSame"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"sendMoreFromTheSameItemBeacon",null),e=r([a.Component({selector:"prm-more-like-this",templateUrl:"components/search/moreLikeThis/more-like-this.html"}),o(1,a.Inject("availabilityLineIcons")),o(2,a.Inject("$interval")),o(3,a.Inject("$timeout")),o(4,a.Inject("$q")),o(6,a.Inject("$stateParams")),o(15,a.Inject("$element")),o(17,a.Inject("$scope")),o(18,a.Inject("$mdDialog")),o(19,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.MoreLikeThisService&&s.MoreLikeThisService)&&n||Object,Array,Object,Object,Object,"function"==typeof(w="undefined"!=typeof u.SearchService&&u.SearchService)&&w||Object,Object,"function"==typeof(I="undefined"!=typeof f.ScrollService&&f.ScrollService)&&I||Object,"function"==typeof(P="undefined"!=typeof p.CollectionDiscoveryService&&p.CollectionDiscoveryService)&&P||Object,"function"==typeof(j="undefined"!=typeof h.VirtualBrowseService&&h.VirtualBrowseService)&&j||Object,"function"==typeof(A="undefined"!=typeof y.ChangeLangService&&y.ChangeLangService)&&A||Object,"function"==typeof(C="undefined"!=typeof v.FullViewService&&v.FullViewService)&&C||Object,"function"==typeof($="undefined"!=typeof g.SmoothScrollUtil&&g.SmoothScrollUtil)&&$||Object,"function"==typeof(D="undefined"!=typeof m.ConfigurationUtil&&m.ConfigurationUtil)&&D||Object,"function"==typeof(L="undefined"!=typeof c.PrimolyticsService&&c.PrimolyticsService)&&L||Object,Object,"function"==typeof(k="undefined"!=typeof b.ServiceDetailsService&&b.ServiceDetailsService)&&k||Object,Object,Object,Object])],e);var t,n,w,I,P,j,A,C,$,D,L,k}();t.PrmMoreLikeThis=I;var R=function(){function e(e,t,n,r,i,o,a,s){this.item=e,this.virtualBrowseService=t,this.scrollElement=n,this.sameByField=r,this.configurationUtil=i,this.moreLikeThisService=o,this.totalItems=a,this.firstMoreLikeThisItems=s,this.currentIndex=E,this.items=[],this.params={},this.params.position="START",this.isLoading=!0,this.leftFinalIndex=E,this.rightFinalIndex=this.totalItems,this.offset=0,this.handleResponse({docs:s})}return e.prototype.getLength=function(){return this.totalItems-1},e.prototype.getItemAtIndex=function(e){var t=this;if(!(e<this.leftFinalIndex||e>this.rightFinalIndex))return e<=this.rightLimitIndex&&e>=this.leftLimitIndex?this.items[e-this.leftLimitIndex]:void(this.isLoading||(e>this.rightLimitIndex&&(this.params.position="RIGHT"),e<this.leftLimitIndex&&(this.params.position="LEFT"),this.isLoading=!0,this.offset=this.offset+S.getResultsBulkSize(),this.moreLikeThisService.getItemsForSameField(this.item,this.sameByField,this.offset).then(function(e){t.handleResponse(e.data)})))},e.prototype.handleResponse=function(e){var t=_(e,"data.docs")||_(e,"docs");t||(t=[]);var n=this.moreLikeThisService.parseResponse(e,this.item);switch(this.leftLimitIndex||(this.leftLimitIndex=0),this.rightLimitIndex||(this.rightLimitIndex=t.length,this.items=n),this.params.position){case"RIGHT":this.rightLimitIndex=this.rightLimitIndex+t.length,this.items=this.items.concat(n);break;case"LEFT":this.leftLimitIndex=this.leftLimitIndex-t.length,this.items=n.concat(this.items)}this.isLoading=!1},e.prototype.calculateStartIndex=function(e,t){var n=Math.floor(this.scrollElement[0].offsetWidth/w),r=Math.floor((n-1)/2),i=n-1-r;return t-e<=i?E-n+(t-e)+1:e<=r?E-r+e:E-r},e}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(393),c=n(3),u=function(){function e(e,t,n,r){this.moreLikeThisItemService=e,this.$scope=t,this.$timeout=n,this.$stateParams=r,this.renderFlag=!0}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.moreInTheSameCourseItem},function(){e.renderFlag=!1,e.$timeout(function(){e.renderFlag=!0},0),e.tooltipDelay="500"})},e.prototype.moreOfTheSameItemTitle=function(){return c(this.moreInTheSameCourseItem,"pnx.display.title[0]")},e.prototype.moreOfTheSameItemVerTitle=function(){return c(this.moreInTheSameCourseItem,"pnx.display.vertitle[0]")},r([a.Input(),i("design:type",Object)],e.prototype,"moreLikeThisItem",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"moreInTheSameCourseItem",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-more-like-this-item",templateUrl:"components/search/moreLikeThis/moreLikeThisItem/more-like-this-item.html"}),o(1,a.Inject("$scope")),o(2,a.Inject("$timeout")),o(3,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.MoreLikeThisItemService&&s.MoreLikeThisItemService)&&t||Object,Object,Object,Object])],e);var t}();t.PrmMoreLikeThisItem=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(392),s=n(3),c=function(){function e(e){this.moreLikeThisItemInfoService=e}return e.prototype.ngOnInit=function(){},e.prototype.courseItemTitle=function(){var e=s(this.moreInTheSameCourseItem,"pnx.display.title[0]");return e&&this.moreLikeThisItemInfoService.getTextFromVal(e)},e.prototype.courseItemVerTitle=function(){var e=s(this.moreInTheSameCourseItem,"pnx.display.vertitle[0]");return e&&this.moreLikeThisItemInfoService.getTextFromVal(e)},e.prototype.courseItemCreator=function(){var e=s(this.moreInTheSameCourseItem,"pnx.display.creator[0]");return e&&this.moreLikeThisItemInfoService.getTextFromVal(e)},r([o.Input(),i("design:type",Object)],e.prototype,"moreLikeThisItem",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"moreInTheSameCourseItem",void 0),e=r([o.Component({selector:"prm-more-like-this-item-info",templateUrl:"components/search/moreLikeThis/moreLikeThisItemInfo/more-like-this-item-info.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MoreLikeThisItemInfoService&&a.MoreLikeThisItemInfoService)&&t||Object])],e);var t}();t.PrmMoreLikeThisItemInfo=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(779),a=n(780),s=n(781),c=n(90),u=n(110),l=n(782),f=n(394),p=n(12),d=n(783),h=n(784),m=n(785),g=n(786),y=n(787),v=n(788),b=n(789),S=n(790),_=n(791),O=n(792),T=n(793),E=n(794),w=n(261),I=n(795),R=n(396),P=n(796),j=n(397),A=n(798),C=n(799),$=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmServicePhysicalBestOffer,o.PrmServiceNoOfferFound,s.PrmServiceNgrs,l.PrmGetItRequest,s.PrmServiceNgrs,g.PrmBackToLibrarySearchButton,h.PrmNgrsResultsButton,d.PrmNgrsBriefResultLine,m.PrmBriefResultDeliveryOptionLink,y.PrmBriefResultPhysicalBestOffer,v.PrmPhysicalDeliveryOptions,b.PrmPhysicalDeliveryOptionsTable,_.PrmSliderField,O.PrmLibrariesAroundBar,y.PrmBriefResultPhysicalBestOffer,S.PrmBriefResultDigitalBestOffer,E.PrmProgressBar,I.PrmProgressCheckBox,P.PrmPhysicalDeliveryMoreOptionRow,A.PrmMultiSelectFilter,C.PrmOfferDetailsTile],providers:[c.PhysicalBestOfferService,u.NgrsService,f.GetItRequestService,p.FormBuilderService,T.GtiService,w.ProgressBarService,R.ProgressCheckBoxService,j.PhysicalDeliveryMoreOptionRowService],imports:[]})],e)}();t.NgrsModule=$},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(7),s=function(){function e(e){this.jwtUtilService=e,this.offerFound=!1,this._openBlankForm={openBlankForm:!1},this._openDigitalForm={openDigitalForm:!1},this._openPhysicalForm={openPhysicalForm:!1}}return e.prototype.ngOnInit=function(){this._showMessageBar={showMessageBar:!1,borrowingRequestOK:!1,message:""}},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.getShowForm=function(){return this._openBlankForm.openBlankForm},e.prototype.setShowForm=function(){this._openBlankForm.openBlankForm?this._openBlankForm.openBlankForm=!1:(this._openBlankForm.openBlankForm=!0,this.opennoofferform.openBlankForm=!0)},e.prototype.showSuceesBar=function(){return this._showMessageBar.showMessageBar},e.prototype.getResponseMessage=function(){return this._showMessageBar.message?this._showMessageBar.message:"nui.ngrs.request.failed"},e.prototype.isRequestOK=function(){return this._showMessageBar.borrowingRequestOK},r([o.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"opennoofferform",void 0),e=r([o.Component({selector:"prm-service-no-offer-found",templateUrl:"components/search/fullView/ngrs/noOfferFound/noOfferFound.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.JwtUtilService&&a.JwtUtilService)&&t||Object])],e);var t}();t.PrmServiceNoOfferFound=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(90),c=n(114),u=function(){function e(e,t){this.physicalBestOfferService=e,this.$timeout=t}return e.prototype.ngOnInit=function(){},e.prototype.getItRequest=function(){this.isdigitaloffer?(this.openphysicalform.openPhysicalForm=!1,this.openblankform.openBlankForm=!1,this.opendigitalform.openDigitalForm=!0):(this.openblankform.openBlankForm=!1,this.opendigitalform.openDigitalForm=!1,this.openphysicalform.openPhysicalForm=!0,this.showmessagebar.showMessageBar=!1),this.$timeout(function(){var e=document.querySelector("#item-ngrs");e&&e.focus()},100)},e.prototype.isShowBestOffer=function(){return!this.openphysicalform.openPhysicalForm},e.prototype.getSupplyTime=function(){return this.isDigitalOffer()?this.digitalbestoffer.supplyTime:this.bestoffer.supplyTime},e.prototype.getLoanPeriod=function(){return this.bestoffer.loanPeriod},e.prototype.isDigitalOffer=function(){return this.isdigitaloffer},e.prototype.getResourceType=function(){return c.getResourceType(this.item)},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"offerfound",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"opendigitalform",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"openphysicalform",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"openblankform",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"bestoffer",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isdigitaloffer",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"digitalbestoffer",void 0),e=r([a.Component({inputs:["piclocs","showmessagebar"],selector:"prm-service-physical-best-offer",templateUrl:"components/search/fullView/ngrs/physicalBestOffer/physicalBestOffer.html"}),o(1,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PhysicalBestOfferService&&s.PhysicalBestOfferService)&&t||Object,Object])],e);var t}();t.PrmServicePhysicalBestOffer=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(110),c=n(7),u=n(90),l=n(37),f=n(3),p=angular.injector(["ng"]),d=p.get("$q"),h=function(){function e(e,t,n,r,i){this.physicalBestOfferService=e,this.ngrsService=t,this.jwtUtilService=n,this.sharedSessionStorage=r,this.$stateParams=i,this._digitalOfferFound=!1,this._physicalOfferFound=!1,this._hasBothOffers=!1,this._almaRSServiceAvailable=null,this._almaRSServiceAvailable=null}return e.prototype.ngOnInit=function(){var e=this;this._offerFound={offerFound:!0},this._display={display:"display:none"},this._openDigitalForm={openDigitalForm:!1},this._openPhysicalForm={openPhysicalForm:!1},this._openBlankForm={openBlankForm:!1},this._showMessageBar={showMessageBar:!1,borrowingRequestOK:!1,message:""},this._hasBothOffers=!1,this._picLocs={picLocs:[]},this._showMoreDeliveryOptions={showMoreDeliveryOptions:!1},this._bestOffer={},this._digitalBestOffer={};var t=f(this.item,"pnx.control.sourcerecordid"),n=f(this.item,"pnx.control.recordid"),r=f(this.item,"pnx.control.rapidosourcerecordid");r&&(t=r,n=""),t?(this._mmsId=t[0],this.checkAlmaRSservice(this.item).then(function(){e._almaRSServiceAvailable&&"true"===e._almaRSServiceAvailable&&e.checkForOffer(n)})):(this._offerFound={offerFound:!1},this._display={display:"display:block"},this._almaRSServiceAvailable="false")},e.prototype.checkForOffer=function(e){var t=this,n=this.jwtUtilService.getDecodedToken().userGroup+"_"+this._mmsId;this.physicalBestOfferService.getResultsObject()&&this.physicalBestOfferService.getResultsObject()[n]?this.setbestOffer(this.physicalBestOfferService.getResultsObject(),n):e&&0===e[0].indexOf("cdi_globaltitleindex_catalog_")?this.physicalBestOfferService.getbestOfferByGlobalIndex(this._mmsId,this.item).then(function(e){return t.setbestOffer(e,n)}):this.physicalBestOfferService.getbestOffer(this._mmsId,this.item).then(function(e){return t.setbestOffer(e,n)})},e.prototype.setbestOffer=function(e,t){this._bestOffer=e[t].bestPhysicalPolicy,this._digitalBestOffer=e[t].bestDigitalPolicy,this._display={display:"display:block"},this._physicalOfferFound=this.isPhysicalOfferFound(this._bestOffer),this._digitalOfferFound=this.isDigitalOfferFound(this._digitalBestOffer),this._digitalOfferFound||this._physicalOfferFound||(this._offerFound={offerFound:!1}),this._digitalOfferFound&&this._physicalOfferFound&&this.isShowBestOffer()&&(this._hasBothOffers=!0),this.physicalBestOfferService.setResultsObject(e,t),this._almaRSServiceAvailable="true"},e.prototype.isPhysicalOfferFound=function(e){return e&&e.supplyTime>=0&&e.loanPeriod>=0},e.prototype.isDigitalOfferFound=function(e){return e&&e.supplyTime>=0},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this.ngrsService.signInLink},enumerable:!0,configurable:!0}),e.prototype.offerFound=function(){return this._offerFound.offerFound},e.prototype.display=function(){return this._display.display},e.prototype.isShowBestOffer=function(){return!this._openDigitalForm.openDigitalForm&&!this._openPhysicalForm.openPhysicalForm},e.prototype.showSignInMsg=function(){return!this._openDigitalForm.openDigitalForm&&!this._openPhysicalForm.openPhysicalForm&&!this._openBlankForm.openBlankForm},e.prototype.isAlmaRSServiceAvailable=function(){return this._almaRSServiceAvailable&&"true"===this._almaRSServiceAvailable},e.prototype.checkAlmaRSservice=function(e){var t=this,n=d.defer();if(!this.isSignedIn())return this._almaRSServiceAvailable="true",n.resolve(),n.promise;if(this._mmsId&&this.ngrsService.getResponseByRecordId(this._mmsId)&&(this._almaRSServiceAvailable=f(this.ngrsService.getResponseByRecordId(this._mmsId),"ngrsEnabled",Boolean),n.resolve()),!this._almaRSServiceAvailable&&this._mmsId&&this.ngrsService.ngrsVisibilityRequestInProgress===!1){var r=e&&e.delivery?e.delivery.physicalServiceId:null;this.ngrsService.isNgrsRSServiceEnabled(this._mmsId,r).then(function(e){t._almaRSServiceAvailable=f(e,"ngrsEnabled",Boolean),n.resolve()})}return n.promise},Object.defineProperty(e.prototype,"almaRSServiceAvailable",{get:function(){return this._almaRSServiceAvailable},enumerable:!0,configurable:!0}),e.prototype.showLoader=function(){if(this.ngrsService.ngrsVisibilityRequestInProgress===!0||this.physicalBestOfferService.requestInProgress["/bestoffer/physical"]===!0)return!0;if(this.ngrsService.ngrsVisibilityRequestInProgress===!1&&this.physicalBestOfferService.requestInProgress["/bestoffer/physical"]===!1){var e=this.jwtUtilService.getDecodedToken().userGroup+"_"+this._mmsId;return!this.physicalBestOfferService.getResultsObject()||!this.physicalBestOfferService.getResultsObject()[e]}return!1},e.prototype.showSuceesBar=function(){return this._showMessageBar.showMessageBar},e.prototype.getResponseMessage=function(){return this._showMessageBar.message?this._showMessageBar.message:"nui.ngrs.request.failed"},e.prototype.isRequestOK=function(){return this._showMessageBar.borrowingRequestOK},e.prototype.showDigitalForm=function(){return this._openDigitalForm.openDigitalForm},e.prototype.showPhysicalForm=function(){return this._openPhysicalForm.openPhysicalForm},e.prototype.isShowMoreDeliveryOptions=function(){return this._showMoreDeliveryOptions.showMoreDeliveryOptions},e.prototype.getOffers=function(){return this._offers},e.prototype.getShowMoreDeliveryOptions=function(){return this._showMoreDeliveryOptions},e.prototype.getDigitalSupplyTime=function(){return this._digitalBestOffer.supplyTime},e.prototype.getMmsId=function(){return this._mmsId},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-service-ngrs",templateUrl:"components/search/fullView/ngrs/ngrs.html"}),o(4,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.PhysicalBestOfferService&&u.PhysicalBestOfferService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.NgrsService&&s.NgrsService)&&n||Object,"function"==typeof(p="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&p||Object,"function"==typeof(h="undefined"!=typeof l.SharedSessionStorage&&l.SharedSessionStorage)&&h||Object,Object])],e);var t,n,p,h}();t.PrmServiceNgrs=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(394),c=n(12),u=n(110),l=n(90),f=n(10),p=n(1),d=n(5),h=n(114),m=(n(3),function(){function e(e,t,n,r,i){var o=this;this.getItRequestService=e,this.ngrsService=t,this.userSessionManagerService=n,this.physicalBestOfferService=r,this.$timeout=i,this.vid=p.getVid(),this._formData={},this._dateField={name:"myDate",label:"",uiType:c.FormBuilderEnums.UI_TYPE.DATE,placeHolder:"nui.ngrs.request.physical.date_needed_by"},this._volumeField={name:"myVolume",label:"nui.ngrs.request.volume",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._noteField={name:"myNote",label:"nui.ngrs.request.note",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._locationField={key:"pickupLocation",name:"myLocation",mandatory:!0,mandatoryIndicator:!0,path:"groups-list-map/pickupLocation",label:"almaResourceSharing.pickupLibrary",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN},this._emailField={name:"myEmail",label:"nui.ngrs.request.digital.email",uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,mandatory:!0},this._alternativeEmailField={name:"myAlternativeEmail",label:"nui.ngrs.request.digital.alternative_email",uiType:c.FormBuilderEnums.UI_TYPE.TEXT,mandatory:!0},this._chapterTitleField={name:"myChapterTitle",label:"nui.ngrs.request.digital.chapter_title",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._chapterAuthorField={name:"myChapterAuthor",label:"nui.ngrs.request.digital.chapter_author",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._chapterNumberField={name:"myChapterNumber",label:"nui.ngrs.request.digital.chapter_number",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._fromPageField={name:"myFromPage",label:"nui.ngrs.request.digital.from_page",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._toPageField={name:"myToPage",label:"nui.ngrs.request.digital.to_page",uiType:c.FormBuilderEnums.UI_TYPE.TEXT},this._materialTypes=[{label:"nui.ngrs.request.no_offer.physical",checked:!1},{label:"nui.ngrs.request.no_offer.digital",checked:!1}],this._allowOtherFormats={label:"nui.ngrs.request.no_offer.allow_digital",checked:!1},this._bestOffer=this.bestoffer;({vid:this.vid});this.itemDetailsRequest={AlmaResourceSharing:{allowed:"Y","link-to-service":"/primaws/rest/priv/ILSServices/titleServices/-1/-1/AlmaResourceSharing?institution=","service-type":"OvP",type:"AlmaResourceSharing"}},this.isblankform?(this.physicalBestOfferService.getEmailList().then(function(e){return o.setEmail(e)}),this.physicalBestOfferService.getPickupLocation().then(function(e){return o.setPickupLocation(e)})):this.isDigitalOffer()?this.physicalBestOfferService.getEmailList().then(function(e){return o.setEmail(e)}):this.physicalBestOfferService.getPickupLocation().then(function(e){return o.setPickupLocation(e)})}return e.prototype.ngOnInit=function(){this.$timeout(function(){var e=document.querySelector("#offer_request_main_tile");
e?(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0")):(e=document.querySelector("#no_offer_request_main_tile"),e&&(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0")))},100),this._isDigitalFormValid=!0,this._isMatrialTypeChosen=!0},Object.defineProperty(e.prototype,"volumeField",{get:function(){return this._volumeField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noteField",{get:function(){return this._noteField},enumerable:!0,configurable:!0}),e.prototype.setPickupLocation=function(e){var t=this,n=[];d.forEach(e,function(e,r){"groups-list-map"===r&&d.forEach(e,function(e){n=t.parseOptions(e.pickupLocation,n),n=t.parseOptions(e.preferredLocalPickupLocation,n)})}),this._locationField.options=n},e.prototype.setEmail=function(e){var t=[];d.forEach(e,function(e){return t.push({label:e,value:e})}),this._emailField.options=t,t[0]&&(this._formData.myEmail=t[0].value,this._emailField.mandatory&&(this._emailField.mandatoryIndicator=!0),this._emailField.mandatory=!1),this._alternativeEmailCode=t[t.length-1].value},e.prototype.parseOptions=function(e,t){return void 0!=e&&e.forEach(function(e){return t.push({label:e.value,value:e.key})}),t},Object.defineProperty(e.prototype,"locationField",{get:function(){return this._locationField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateField",{get:function(){return this._dateField},set:function(e){this._dateField=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emailField",{get:function(){return this._emailField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternativeEmailField",{get:function(){return this._alternativeEmailField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chapterTitleField",{get:function(){return this._chapterTitleField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chapterAuthorField",{get:function(){return this._chapterAuthorField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chapterNumberField",{get:function(){return this._chapterNumberField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromPageField",{get:function(){return this._fromPageField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toPageField",{get:function(){return this._toPageField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this._formData},set:function(e){this._formData=e},enumerable:!0,configurable:!0}),e.prototype.clearForm=function(){this._formData={}},e.prototype.cancelForm=function(e){this.opendigitalform.openDigitalForm=!1,this.openphysicalform.openPhysicalForm=!1,this.openblankform.openBlankForm=!1,this.clearForm(),e.preventDefault(),e.stopPropagation()},e.prototype.submitForm=function(e){var t=this;this.isFormValid()&&(this.isblankform?this.submitNoOffersRequest():this.isdigitaloffer?this.physicalBestOfferService.createBorrowingRequest(this._formData,this.item,this.digitalbestoffer,this._alternativeEmailCode).then(function(e){return t.setBorrowingRequestResult(e)}):this.physicalBestOfferService.createBorrowingRequest(this._formData,this.item,this.bestoffer,this._alternativeEmailCode).then(function(e){return t.setBorrowingRequestResult(e)}),this.opendigitalform.openDigitalForm=!1,this.openphysicalform.openPhysicalForm=!1,this.openblankform.openBlankForm=!1,e.preventDefault(),e.stopPropagation())},e.prototype.submitNoOffersRequest=function(){var e=this,t={};t.offerType="NONE",this.isJournal()?(t.policyType="PHYSICAL",t.allowOtherFormat=!1):this.isArtical()?(t.policyType="DIGITAL",t.allowOtherFormat=!1):this._materialTypes[0].checked?(t.policyType="PHYSICAL",t.allowOtherFormat=this._allowOtherFormats.checked):(t.policyType="DIGITAL",t.allowOtherFormat=!1),this.physicalBestOfferService.createBorrowingRequest(this._formData,this.item,t,this._alternativeEmailCode).then(function(t){return e.setBorrowingRequestResult(t)})},e.prototype.setBorrowingRequestResult=function(e){this.showmessagebar.message=e["reply-text"],"ok"===e.status?(this._borrowingRequestOK=!0,this.showmessagebar.borrowingRequestOK=!0):(this._borrowingRequestOK=!1,this.showmessagebar.borrowingRequestOK=!1),this.showmessagebar.showMessageBar=!0},e.prototype.isSignedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.getSignInLink=function(){return this.ngrsService.signInLinkRequest},e.prototype.isDigitalOffer=function(){return this.isdigitaloffer},e.prototype.stopPro=function(e){e.stopPropagation()},e.prototype.digitalFormValidationCheck=function(){this._formData.myChapterNumber||this._formData.myChapterTitle||this._formData.myFromPage&&this._formData.myToPage?this._isDigitalFormValid=!0:this._isDigitalFormValid=!1},e.prototype.isMatrialTypeChosenCheck=function(){return!(!this._materialTypes[0].checked&&!this._materialTypes[1].checked)},e.prototype.isDigitalFormValidation=function(){return this._isDigitalFormValid},e.prototype.isMatrialTypeChosen=function(){return this._isMatrialTypeChosen},e.prototype.isFormValid=function(){if(this.isblankform&&!this.isMatrialTypeChosenCheck())if(this._isMatrialTypeChosen=!1,this.isArtical()){if(this._isMatrialTypeChosen=!0,this.digitalFormValidationCheck(),this._isDigitalFormValid)return!0}else if(this.isJournal())return this._isMatrialTypeChosen=!0,!0;if(this.isblankform&&this._materialTypes[0].checked&&this._formData.myLocation){if(!this._allowOtherFormats.checked)return!0;if(this._formData.myEmail)return!0}else if(this.isblankform&&this._materialTypes[1].checked&&this._formData.myEmail){if(this.digitalFormValidationCheck(),this._isDigitalFormValid){if(!this._allowOtherFormats.checked)return!0;if(this._formData.myLocation)return!0}}else{if(this.isdigitaloffer&&this._formData.myEmail)return!this.isBook()||(this.digitalFormValidationCheck(),!!this._isDigitalFormValid);if(!this.isdigitaloffer&&this._formData.myLocation)return!0}return!1},e.prototype.getOfferLoanPeriod=function(){return this.bestoffer.loanPeriod},e.prototype.getOfferSupplyTime=function(){return this.bestoffer.supplyTime},e.prototype.showAlternativeEmail=function(){return this._formData.myEmail===this._alternativeEmailCode},e.prototype.getRequestHtml=function(){if(this.isblankform)return"components/search/fullView/ngrs/getItRequest/lastResortGetItRequest.html";var e=this.getResourceType();switch(e){case"book":return"components/search/fullView/ngrs/getItRequest/bookGetItRequest.html";case"journal":return"components/search/fullView/ngrs/getItRequest/otherGetItRequest.html";default:return"components/search/fullView/ngrs/getItRequest/otherGetItRequest.html"}},e.prototype.updateSelectedMaterialType=function(e){this._materialTypes[e].checked=!0,this._selectedMaterialType=e,this._materialTypes[1-e].checked=!1},e.prototype.getMatrialTypeLabel=function(e){return 0==e&&"book"==this.getResourceType()?"nui.ngrs.request.no_offer.book":1==e&&"book"==this.getResourceType()?"nui.ngrs.request.no_offer.book_chapter":this._materialTypes[e].label},e.prototype.isMatrialTypeChecked=function(e){return this._materialTypes[e].checked},e.prototype.isAllowOtherFormatsChecked=function(){return this._allowOtherFormats.checked},e.prototype.updateAllowOtherFormats=function(){this._allowOtherFormats.checked===!0?this._allowOtherFormats.checked=!1:this._allowOtherFormats.checked=!0},e.prototype.getAllowOtherLabel=function(){return this._allowOtherFormats.label},e.prototype.getResourceType=function(){return h.getResourceType(this.item)},e.prototype.isArtical=function(){var e=h.getResourceType(this.item);return"article"==e||"newspaperarticle"==e||"bookchapter"==e},e.prototype.isJournal=function(){var e=h.getResourceType(this.item);return"journal"==e},e.prototype.isBook=function(){var e=h.getResourceType(this.item);return"book"==e},e.prototype.keydownSupport=function(e){if(9===e.keyCode){e.preventDefault();var t=document.querySelector("#offer_request_main_tile");t?t.focus():(t=document.querySelector("#no_offer_request_main_tile"),t&&t.focus())}},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"bestoffer",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"digitalbestoffer",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isdigitaloffer",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isblankform",void 0),e=r([a.Component({inputs:["opendigitalform","openphysicalform","openblankform","showmessagebar","display","offerfound"],selector:"prm-get-it-request",templateUrl:"components/search/fullView/ngrs/getItRequest/getItRequest.html"}),o(4,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.GetItRequestService&&s.GetItRequestService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.NgrsService&&u.NgrsService)&&n||Object,"function"==typeof(m="undefined"!=typeof f.UserSessionManagerService&&f.UserSessionManagerService)&&m||Object,"function"==typeof(g="undefined"!=typeof l.PhysicalBestOfferService&&l.PhysicalBestOfferService)&&g||Object,Object])],e);var t,n,m,g}());t.PrmGetItRequest=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(90),s=n(3),c=function(){function e(e){var t=this;this.physicalBestOfferService=e,this.offerFound=!1,this.digitalOfferFound=!1;var n=s(this.item,"pnx.control.sourcerecordid");n&&(this._mmsId=n[0],this.physicalBestOfferService.getbestOffer(this._mmsId,this.item).then(function(e){return t.setbestOffer(e)}))}return e.prototype.ngOnInit=function(){this._openPhysicalForm={openPhysicalForm:!1},this._openDigitalForm={openDigitalForm:!1},this._getItFormOpen={getItFormOpen:!1},this._openBlankForm={openBlankForm:!1},this._physicalBestOffer={},this._digitalBestOffer={}},e.prototype.setbestOffer=function(e){e[this._mmsId]&&(this._physicalBestOffer=e[this._mmsId].bestPhysicalPolicy,this._digitalBestOffer=e[this._mmsId].bestDigitalPolicy,this.offerFound=this.isPhysicalOfferFound(this._physicalBestOffer),this.digitalOfferFound=this.isDigitalOfferFound(this._digitalBestOffer),this.saveOffersToService(e))},e.prototype.saveOffersToService=function(e){this.physicalBestOfferService.setResultsObject(e,this._mmsId)},e.prototype.getDigitalSupplyTime=function(){return this._digitalBestOffer?this._digitalBestOffer.supplyTime:0},e.prototype.isPhysicalOfferFound=function(e){return e&&e.supplyTime>=0&&e.loanPeriod>=0},e.prototype.isDigitalOfferFound=function(e){return e&&e.supplyTime>=0},e.prototype.getSupplyTime=function(){return this._physicalBestOffer?this._physicalBestOffer.supplyTime:0},e.prototype.getLoanPeriod=function(){return this._physicalBestOffer?this._physicalBestOffer.loanPeriod:0},e.prototype.isOfferFound=function(){return this.offerFound},e.prototype.showPhysicalForm=function(){return this._openPhysicalForm.openPhysicalForm},e.prototype.showDigitalForm=function(){return this._openDigitalForm.openDigitalForm},r([o.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([o.Component({selector:"prm-ngrs-brief-result-Line",templateUrl:"components/search/fullView/ngrs/ngrsBriefResultLine/ngrsBriefResultLine.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PhysicalBestOfferService&&a.PhysicalBestOfferService)&&t||Object])],e);var t}();t.PrmNgrsBriefResultLine=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(14),c=n(4),u=n(22),l=n(1),f=n(28),p=n(16),d=n(11),h=n(1),m=function(){function e(e,t,n,r,i,o,a,s,c){this.$stateParams=e,this.$state=t,this.$timeout=n,this.searchService=r,this.searchFieldsService=i,this.journalsService=o,this.databasesService=a,this.newspapersService=s,this.$translate=c,this.backToBrowseLabel="nui.ngrs.backto.btn",this.scopes=h.getScopeList()}return e.prototype.changeSearchScope=function(){var e=c.STATE_NAMES.SEARCH;this.searchFieldsService.searchParams.search_scope="RapidXL",this.searchFieldsService.searchParams.tab="RAPIDXL",this.$state.go(e,this.searchFieldsService.searchParams,{reload:!1})},e.prototype.isRapidoExpandRequired=function(){if(window.appConfig["system-configuration"].ngrs_enabled){var e=h.getScopeList().map(function(e){return e.tab});return e.indexOf("RAPIDXL")>-1&&"RAPIDXL"!==this.$stateParams.tab}return!1},e.prototype.navigateBackToSearchResults=function(){var e=c.STATE_NAMES.SEARCH;this.searchFieldsService.searchParams.search_scope=h.getDefaultScope(),this.searchFieldsService.searchParams.tab=h.getTab(h.getDefaultScope()),this.$state.go(e,this.searchFieldsService.searchParams,{reload:!1})},e.prototype.isBackToSearchRequired=function(){return"RapidXL"===this.searchFieldsService.searchParams.search_scope},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseScope",{get:function(){return this.$stateParams.browseScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseState",{get:function(){return c.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backToBrowseParams",{get:function(){return{vid:l.getVid(),browseQuery:this.$stateParams.browseQuery,browseScope:this.$stateParams.browseScope,browseFirstTerm:this.$stateParams.browseFirstTerm,innerPnxIndex:this.$stateParams.innerPnxIndex,numOfUsedTerms:this.$stateParams.numOfUsedTerms,fn:this.$stateParams.fn}},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-ngrs-results-button",templateUrl:"components/search/fullView/ngrs/resultsButton/ngrs-results-button.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$state")),o(2,a.Inject("$timeout")),o(8,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof d.SearchService&&d.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.SearchFieldsService&&s.SearchFieldsService)&&n||Object,"function"==typeof(m="undefined"!=typeof u.JournalsService&&u.JournalsService)&&m||Object,"function"==typeof(g="undefined"!=typeof f.DatabasesService&&f.DatabasesService)&&g||Object,"function"==typeof(y="undefined"!=typeof p.NewspapersService&&p.NewspapersService)&&y||Object,Object])],e);var t,n,m,g,y}();t.PrmNgrsResultsButton=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.availabilityLineIcons=e}return e.prototype.ngOnInit=function(){},e=r([a.Component({selector:"prm-brief-result-delivery-option-link",templateUrl:"components/search/fullView/ngrs/ngrsBriefResultLine/briefResultDeliveryOptionLink/briefResultDeliveryOptionLink.html"}),o(0,a.Inject("availabilityLineIcons")),i("design:paramtypes",[Object])],e)}();t.PrmBriefResultDeliveryOptionLink=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(22),u=n(1),l=n(28),f=n(16),p=n(11),d=n(14),h=n(1),m=function(){function e(e,t,n,r,i,o,a,s){this.$stateParams=e,this.$state=t,this.searchService=n,this.searchFieldsService=r,this.journalsService=i,this.databasesService=o,this.newspapersService=a,this.$translate=s,this.backToBrowseLabel="nui.ngrs.backto.btn"}return e.prototype.navigateBackToSearchResults=function(){var e=s.STATE_NAMES.SEARCH;this.searchFieldsService.searchParams.search_scope=h.getDefaultScope(),this.searchFieldsService.searchParams.tab=h.getTab(h.getDefaultScope()),this.$state.go(e,this.searchFieldsService.searchParams,{reload:!1})},e.prototype.isBackToSearchRequired=function(){return"RapidXL"===this.searchFieldsService.searchParams.search_scope},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseScope",{get:function(){return this.$stateParams.browseScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseState",{get:function(){return s.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backToBrowseParams",{get:function(){return{vid:u.getVid(),browseQuery:this.$stateParams.browseQuery,browseScope:this.$stateParams.browseScope,browseFirstTerm:this.$stateParams.browseFirstTerm,innerPnxIndex:this.$stateParams.innerPnxIndex,numOfUsedTerms:this.$stateParams.numOfUsedTerms,fn:this.$stateParams.fn}},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-back-to-library-search-button",templateUrl:"components/search/fullView/ngrs/backToLibrarySearchButton/back-to-library-search-button.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$state")),o(7,a.Inject("$translate")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof p.SearchService&&p.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof d.SearchFieldsService&&d.SearchFieldsService)&&n||Object,"function"==typeof(m="undefined"!=typeof c.JournalsService&&c.JournalsService)&&m||Object,"function"==typeof(g="undefined"!=typeof l.DatabasesService&&l.DatabasesService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.NewspapersService&&f.NewspapersService)&&y||Object,Object])],e);var t,n,m,g,y}();t.PrmBackToLibrarySearchButton=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getSupplyTime=function(){return this.supplyTime},e.prototype.getLoanPeriod=function(){return this.loanPeriod},e.prototype.isOfferFound=function(){return this.offerFound},e.prototype.isShowBestOffer=function(){return!this._getItFormOpen.getItFormOpen},e.prototype.showFormOnClick=function(e){this.opendigitalform.openDigitalForm=!1,this.openphysicalform.openPhysicalForm=!0,e.preventDefault(),e.stopPropagation()},r([o.Input(),i("design:type",Boolean)],e.prototype,"offerFound",void 0),r([o.Input(),i("design:type",Number)],e.prototype,"loanPeriod",void 0),r([o.Input(),i("design:type",Number)],e.prototype,"supplyTime",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"openphysicalform",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"opendigitalform",void 0),e=r([o.Component({selector:"prm-brief-result-physical-best-offer",templateUrl:"components/search/fullView/ngrs/ngrsBriefResultLine/briefResultPhysicalBestOffer/briefResultPhysicalBestOffer.html"}),i("design:paramtypes",[])],e)}();t.PrmBriefResultPhysicalBestOffer=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getPhysicalResult=function(){this.showmoredeliveryoptions.showMoreDeliveryOptions=!this.showmoredeliveryoptions.showMoreDeliveryOptions},e=r([o.Component({inputs:["showmoredeliveryoptions"],selector:"prm-physical-delivery-options",templateUrl:"components/search/fullView/ngrs/physicalDeliveryOptions/physicalDeliveryOptions.html"}),i("design:paramtypes",[])],e)}();t.PrmPhysicalDeliveryOptions=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(7),s=n(90),c=function(){function e(e,t){this.physicalBestOfferService=e,this.jwtUtilService=t,this._results=new Array(0),this._policies=new Array(0);var n=e.getResultsObject(),r=this.jwtUtilService.getDecodedToken().userGroup,i=r+"_"+this.mmsid;this._policies=n[i].moreResultsPolicies}return e.prototype.ngOnInit=function(){this._isCollapsed=!1},e.prototype.getResults=function(){return this._results},e.prototype.getPolicies=function(){return this._policies},e.prototype.collapse=function(){this._isCollapsed=!this._isCollapsed},e.prototype.isCollapse=function(){return this._isCollapsed},e.prototype.close=function(){this.showmoredeliveryoptions.showMoreDeliveryOptions=!1},r([o.Input(),i("design:type",String)],e.prototype,"mmsid",void 0),e=r([o.Component({inputs:["showmoredeliveryoptions","bestoffer","openphysicalform"],selector:"prm-physical-delivery-options-table",templateUrl:"components/search/fullView/ngrs/physicalDeliveryOptionsTable/physicalDeliveryOptionsTable.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PhysicalBestOfferService&&s.PhysicalBestOfferService)&&t||Object,"function"==typeof(n="undefined"!=typeof a.JwtUtilService&&a.JwtUtilService)&&n||Object])],e);var t,n}();t.PrmPhysicalDeliveryOptionsTable=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=(n(3),function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getDigitalSupplyTime=function(){return this.digitalSupplyTime},e.prototype.isDigitalOfferFound=function(){return this.digitalSupplyTime>0},e.prototype.showFormOnClick=function(e){this.openphysicalform.openPhysicalForm=!1,this.opendigitalform.openDigitalForm=!0,e.preventDefault(),e.stopPropagation()},r([o.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([o.Input(),i("design:type",Number)],e.prototype,"digitalSupplyTime",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"opendigitalform",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"openphysicalform",void 0),e=r([o.Component({selector:"prm-brief-result-digital-best-offer",templateUrl:"components/search/fullView/ngrs/ngrsBriefResultLine/briefResultDigitalBestOffer/briefResultDigitalBestOffer.html"}),i("design:paramtypes",[])],e)}());t.PrmBriefResultDigitalBestOffer=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){this.min="0",this.max="90"}return e.prototype.ngOnInit=function(){},e.prototype.getMin=function(){return 0},e.prototype.getMax=function(){return 90},e=r([o.Component({selector:"prm-slider-field",templateUrl:"components/search/fullView/ngrs/sliderField/slider-field.html"}),i("design:paramtypes",[])],e)}();t.PrmSliderField=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=r([o.Component({selector:"prm-libraries-around-bar",templateUrl:"components/search/fullView/ngrs/librariesAroundBar/librariesAroundBar.html"}),i("design:paramtypes",[])],e)}();t.PrmLibrariesAroundBar=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(47),c=n(1),u=function(){function e(e,t,n,r){this.httpService=e,this.$translate=t,this.restBaseURLs=n,this.$q=r,this.ilsServices={},this._instId=c.getInstitutionId(),this._instCode=c.getInstitutionCode(),this._globalTitleIndex=121,this.resquestInProgress={},this.primaBaseUrl=n.gtiURL,this.ilsServices={"/gti":{path:this.primaBaseUrl,method:"GET"}}}return e.prototype.isGtiInstitution=function(e){var t={mmsid:e,instId:this._instId,globalTitleIndex:this._globalTitleIndex};return this.makeIlsRequest("/gti",t)},e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var n=this;t||(t={});var r=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(r.method,r.path,t).then(function(e){return n.ilsRequestSuccess(e)},function(r){return n.ilsRequestFailure(r,e,t)}).finally(function(){return n.resquestInProgress[e]=!1})},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,n){return console.error(e,t),e},e=r([a.Injectable(),o(1,a.Inject("$translate")),o(2,a.Inject("restBaseURLs")),o(3,a.Inject("$q")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HttpService&&s.HttpService)&&t||Object,Object,Object,Object])],e);var t}();t.GtiService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(261),s=n(38),c=(n(395),function(){function e(e,t){this.progressBarService=e,this.dateUtils=t,this.requested={}}return e.prototype.ngOnInit=function(){this.requested={checked:!1,label:"REQUESTED",date:""},this.inProcess={checked:!1,label:"IN_PROCESS_BY_LENDER",date:""},this.shipped={checked:!1,label:"SHIPPED",date:""},this.received={checked:!1,label:"RECEIVED",date:""},this.sent={checked:!1,label:"SENT",date:""},"Digital"===this.format?this.isdigitalrequest=!0:this.isdigitalrequest=!1,this.updateStatusConfig(this.status),this.setRequestDates()},e.prototype.setRequestDates=function(){this.isdigitalrequest===!0?(""!=this.dates.requestedDate&&(this.requested.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.requestedDate)),""!=this.dates.inProcessDate&&(this.inProcess.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.inProcessDate)),""!=this.dates.sentDate&&(this.sent.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.sentDate))):(""!=this.dates.requestedDate&&(this.requested.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.requestedDate)),""!=this.dates.inProcessDate&&(this.inProcess.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.inProcessDate)),""!=this.dates.shippedDate&&(this.shipped.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.shippedDate)),""!=this.dates.receivedDate&&(this.received.date=this.dateUtils.convertIlsDateStringToPrimoDateString(this.dates.receivedDate)))},e.prototype.updateStatusConfig=function(e){"REQUESTED"===e?this.requested.checked=!0:"IN_PROCESS_BY_LENDER"===e?(this.requested.checked=!0,this.inProcess.checked=!0):"SHIPPED"===e?(this.requested.checked=!0,this.inProcess.checked=!0,this.shipped.checked=!0):"RECEIVED"===e?(this.requested.checked=!0,this.inProcess.checked=!0,this.shipped.checked=!0,this.received.checked=!0):"SENT"===e&&(this.requested.checked=!0,this.inProcess.checked=!0,this.sent.checked=!0)},e.prototype.isDigitalRequest=function(){return this.isdigitalrequest},r([o.Input(),i("design:type",Object)],e.prototype,"status",void 0),
r([o.Input(),i("design:type",Object)],e.prototype,"requestid",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"format",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"dates",void 0),e=r([o.Component({selector:"prm-progress-bar",templateUrl:"components/search/fullView/ngrs/progressBar/progress-bar.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ProgressBarService&&a.ProgressBarService)&&t||Object,"function"==typeof(n="undefined"!=typeof s.DateUtils&&s.DateUtils)&&n||Object])],e);var t,n}());t.PrmProgressBar=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(396),s=function(){function e(e){this.progressCheckBoxService=e}return e.prototype.ngOnInit=function(){},e.prototype.isChecked=function(){return!!this.status.checked},e.prototype.getStatusLabel=function(){return"REQUESTED"===this.status.label?"nui.ngrs.request.status.requested":"IN_PROCESS_BY_LENDER"===this.status.label?"nui.ngrs.request.status.in_process":"SHIPPED"===this.status.label?"nui.ngrs.request.status.shipped":"RECEIVED"===this.status.label?"nui.ngrs.request.status.received":"SENT"===this.status.label?"nui.ngrs.request.status.sent":"nui.ngrs.request.status.received"},e.prototype.getDate=function(){return this.status.date?this.status.date:" "},r([o.Input(),i("design:type",Object)],e.prototype,"status",void 0),e=r([o.Component({selector:"prm-progress-checkbox",templateUrl:"components/search/fullView/ngrs/progressBar/progressCheckBox/progress-check-box.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ProgressCheckBoxService&&a.ProgressCheckBoxService)&&t||Object])],e);var t}();t.PrmProgressCheckBox=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(797),s=n(397),c=function(){function e(e){var t=this;this._isAvailable=!1,e.getMoreOption(this.policy).then(function(e){return t.setOption(e)})}return e.prototype.ngOnInit=function(){},e.prototype.isAvailable=function(){return this._isAvailable},e.prototype.getDeliveryIn=function(){return this.policy.supplyTime},e.prototype.getKeepFor=function(){return this.policy.loanPeriod},e.prototype.getRenewable=function(){return this.policy.allowRenewal},e.prototype.setOption=function(e){e===!0&&(this._isAvailable=!0)},e.prototype.getItRequest=function(){this.bestoffer.supplyTime=Number(this.policy.supplyTime),this.bestoffer.cost=this.policy.cost,this.bestoffer.loanPeriod=this.policy.loanPeriod,this.openphysicalform.openPhysicalForm=!0,this.showmoredeliveryoptions.showMoreDeliveryOptions=!1},r([o.Input(),i("design:type","function"==typeof(t="undefined"!=typeof a.morePolicies&&a.morePolicies)&&t||Object)],e.prototype,"policy",void 0),r([o.Input(),i("design:type","function"==typeof(n="undefined"!=typeof a.BestOffer&&a.BestOffer)&&n||Object)],e.prototype,"bestoffer",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"openphysicalform",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"showmoredeliveryoptions",void 0),e=r([o.Component({inputs:[],selector:"prm-physical-delivery-more-option-row",templateUrl:"components/search/fullView/ngrs/physicalDeliveryMoreOptionRow/physicalDeliveryMoreOptionRow.html"}),i("design:paramtypes",["function"==typeof(c="undefined"!=typeof s.PhysicalDeliveryMoreOptionRowService&&s.PhysicalDeliveryMoreOptionRowService)&&c||Object])],e);var t,n,c}();t.PrmPhysicalDeliveryMoreOptionRow=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(51),c=function(){function e(e){this.$translate=e,this.previousFilterValues=[],this.valuesChange=new a.EventEmitter}return e.prototype.ngOnInit=function(){var e=this,t={key:"nui.librarycard.request.filter_value_all",value:"+all"},n=function(t){var n=e.$translate.instant(t.key);return n},r=this.filterOptions;r=r.filter(function(e){return"+all"!==e.value}),r=s(r,[n],"asc"),r.unshift(t),this.filterOptions=r},e.prototype.changeFilter=function(){this.filterValues||(this.filterValues=[]),this.previousFilterValues.indexOf("+all")>-1&&0===this.filterValues.length?this.filterValues=["+all"]:this.previousFilterValues.length>0&&0===this.filterValues.length?this.filterValues=["+all"]:this.previousFilterValues.indexOf("+all")>-1&&this.filterValues.indexOf("+all")>-1&&this.filterValues.length>1?this.filterValues=this.filterValues.filter(function(e){return"+all"!==e}):this.filterValues.length>1&&this.filterValues.indexOf("+all")>-1&&(this.filterValues=["+all"]),this.previousFilterValues=this.filterValues,this.valuesChange.emit(this.filterValues)},e.prototype.isSelected=function(e){return!!(this.filterValues&&this.filterValues.indexOf("+"+e)>-1)},e.prototype.selectAll=function(){this.filterValues&&0===this.filterValues.length&&(this.filterValues=["+all"],this.previousFilterValues=["+all"])},e.prototype.getSortedFilterOption=function(){return this.filterOptions},r([a.Input(),i("design:type",String)],e.prototype,"filterLabel",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"filterOptions",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"filterValues",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"valuesChange",void 0),e=r([a.Component({selector:"prm-multi-select-filter",templateUrl:"components/search/fullView/ngrs/multiSelectFilter/multi-select-filter.html"}),o(0,a.Inject("$translate")),i("design:paramtypes",[Object])],e)}();t.PrmMultiSelectFilter=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(114),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getOfferLoanPeriod=function(){return this.bestoffer.loanPeriod},e.prototype.getOfferSupplyTime=function(){return this.bestoffer.supplyTime},e.prototype.isDigitalOffer=function(){return this.isdigitaloffer},e.prototype.getResourceType=function(){return a.getResourceType(this.item)},r([o.Input(),i("design:type",Object)],e.prototype,"bestoffer",void 0),r([o.Input(),i("design:type",Boolean)],e.prototype,"isdigitaloffer",void 0),r([o.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([o.Component({selector:"prm-offer-details-tile",templateUrl:"components/search/fullView/ngrs/getItRequest/offerDetailsTile/offerDetailsTile.html"}),i("design:paramtypes",[])],e)}();t.PrmOfferDetailsTile=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(78),a=n(236),s=n(33),c=n(2),u=n(42),l=n(223),f=n(222),p=n(179),d=n(109),h=n(38),m=n(151),g=n(364),y=n(79),v=n(153),b=n(176),S=n(424),_=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[g.ArrayUtils,c.ConfigurationUtil,h.DateUtils,a.EndlessScrollingUtil,l.JsonUtils,o.PnxUtil,d.ResultUtil,p.SearchUtil,s.SmoothScrollUtil,m.StringUtils,u.TemplateUtil,f.UUIDGenerator,y.FilterInstitution,v.FilterLanguage,b.PartiallyTranslatedLocalFieldsUtil,S.AlmaOtherMembersService],imports:[]})],e)}();t.NddModule=_},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(235),a=n(9),s=n(802),c=n(194),u=n(175),l=n(803),f=n(47),p=n(8),d=n(805),h=n(807),m=n(17),g=n(37),y=n(400),v=n(809),b=function(){function e(){}return e=r([i.NgModule({declarations:[s.PrmText,v.PrmDigestWhenInView],providers:[f.HttpService,a.MappingTablesCache,p.MediaQueries,c.RecordUtil,u.RestUtils,o.SelectTextUtil,m.StorageUtil,g.SharedSessionStorage,y.HighlightService],imports:[d.ChangeLangModule,h.FormBuilderModule,l.WidgetsModule]})],e)}();t.InfraMetadata=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.$element=e,e.attr("dir","auto")}return e=r([a.Directive({selector:"[prm-text]"}),o(0,a.Inject("$element")),i("design:paramtypes",[Object])],e)}();t.PrmText=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(804),a=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[],imports:[o.AlertsModule]})],e)}();t.WidgetsModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(30),a=n(398),s=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.AlertFactory,a.AlertBarService],imports:[]})],e)}();t.AlertsModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(20),a=n(806),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmChangeLang],providers:[o.ChangeLangService],imports:[]})],e)}();t.ChangeLangModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(20),c=n(1),u=n(6),l=n(7),f=n(10),p=function(){function e(e,t,n,r,i,o,s,u){this.changeLangService=e,this.i18nService=t,this.jwtUtilService=n,this.userSessionManagerService=r,this.$state=i,this.topBarIcons=o,this.$timeout=s,this.primolyticsService=u,this.changeLangEvent=new a.EventEmitter,this.attributesMap=c.getAttributesMap(),this.vid=c.getVid(),this.rtlLanguages=c.getRtlLanguages(),this.selectedLanguage=t.getLanguage(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.changeLangService.addLangParamToUrl(this.selectedLanguage)}return Object.defineProperty(e.prototype,"selectedLanguage",{get:function(){return this._selectedLanguage},set:function(e){this._selectedLanguage=e},enumerable:!0,configurable:!0}),e.prototype.getLabelType=function(){return this.labelType},e.prototype.changeLanguage=function(){var e=this;if(this.changeLangService.addLangParamToUrl(this.selectedLanguage),"GUEST"!==this.jwtUtilService.getDecodedToken().userGroup){var t=this.changeLangService.updateUserLanguage(this.vid,this.selectedLanguage);t.then(function(t){return e.successAction(t)})}return this.i18nService.setLanguage(this.selectedLanguage).then(function(){e.changeLangEvent.emit({lang:e.selectedLanguage}),e.$timeout(function(){return e.$state.go(e.$state.current,{lang:e.selectedLanguage},{reload:!0})})})},e.prototype.successAction=function(e){this.userSessionManagerService.syncJwtWithTabs(e.data),this.jwtUtilService.storeJwt(e.data)},r([a.Input(),i("design:type",String)],e.prototype,"labelType",void 0),r([a.Output(),i("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"changeLangEvent",void 0),r([u.beacon({p:"general",op:"changeLanguage"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"changeLanguage",null),e=r([a.Component({selector:"prm-change-lang",templateUrl:"components/infra/lang/change-lang.html"}),o(1,a.Inject("I18nService")),o(4,a.Inject("$state")),o(5,a.Inject("topBarIcons")),o(6,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.ChangeLangService&&s.ChangeLangService)&&n||Object,Object,"function"==typeof(p="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&p||Object,"function"==typeof(d="undefined"!=typeof f.UserSessionManagerService&&f.UserSessionManagerService)&&d||Object,Object,Object,Object,"function"==typeof(h="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&h||Object])],e);var t,n,p,d,h}();t.PrmChangeLang=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(12),a=n(399),s=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.FormBuilderService,a.FormFieldService],imports:[]})],e)}();t.FormBuilderModule=s},function(e,t,n){function r(e){return e=i(e),e&&a.test(e)?e.replace(o,"\\$&"):e}var i=n(61),o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e,t){this.$element=e,this.$scope=t}return e.prototype.ngOnInit=function(){var e=this;this.digestWhenInViewDisabled||(this.$scope.$ctrl.onInView=function(t,n,r){n?(console.log("In View:"),console.log(e.$scope.$ctrl),e.$scope.$resume()):(console.log("out of View:"),console.log(e.$scope.$ctrl),e.$scope.$suspend())})},e.prototype.ngAfterContentInit=function(){this.digestWhenInViewDisabled||this.$scope.$suspend()},r([a.Input(),i("design:type",Boolean)],e.prototype,"digestWhenInViewDisabled",void 0),e=r([a.Directive({selector:"[prm-digest-when-in-view]"}),o(0,a.Inject("$element")),o(1,a.Inject("$scope")),i("design:paramtypes",[Object,Object])],e)}();t.PrmDigestWhenInView=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(7),a=n(10),s=n(187),c=n(811),u=n(812),l=function(){function e(){}return e=r([i.NgModule({declarations:[c.UsernamePasswordLoginController],providers:[o.JwtUtilService,s.UsernamePasswordLoginService,a.UserSessionManagerService],imports:[u.LoginModule]})],e)}();t.SecurityModule=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(187),c=n(7),u=n(5),l=function(){function e(e,t,n,r,i,o){this.usernamePasswordLoginService=e,this.$mdDialog=t,this.jwtUtilService=n,this.i18nService=r,this.$state=i,this.$http=o}return e.prototype.login=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user;this.usernamePasswordLoginService.login(this.username,this.password,this.authenticationProfileName).then(function(){e.$mdDialog.hide();var n=e.jwtUtilService.getDecodedToken();""!=n.language&&n.language!=e.i18nService.getLanguage()&&e.i18nService.setLanguage(n.language).then(function(){e.$state.go(e.$state.current,{},{reload:!0})}),e.usernamePasswordLoginService.copyFavoritesRecordsThatWereSavedForGuest(t)},function(t){e.$mdDialog.show(e.$mdDialog.alert().parent(u.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Login failed").textContent("Username/Password is invalid").ok("Close"))})},r([a.Input(),i("design:type",String)],e.prototype,"authenticationProfileName",void 0),e=r([a.Component({selector:"prm-username-password-login",templateUrl:"components/security/username-password-login.html"}),o(1,a.Inject("$mdDialog")),o(3,a.Inject("I18nService")),o(4,a.Inject("$state")),o(5,a.Inject("$http")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.UsernamePasswordLoginService&&s.UsernamePasswordLoginService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof c.JwtUtilService&&c.JwtUtilService)&&n||Object,Object,Object,Object])],e);var t,n}();t.UsernamePasswordLoginController=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(813),a=n(243),s=n(814),c=n(44),u=n(815),l=n(816),f=n(817),p=n(818),d=n(233),h=function(){function e(){}return e=r([i.NgModule({declarations:[u.PrmLogin,s.PrmLoginHelp,o.PrmLoginItem,l.PrmStandAloneLogin,f.PrmUnionCatalogLogin,p.PrmUnionCatalogLoginInstitutionItem],providers:[a.LoginHelpService,c.LoginService,d.UnionCatalogLoginService],imports:[]})],e)}();t.LoginModule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(){function e(e){this.loginIcons=e}return e.prototype.getProfileLinkForDisplay=function(e){var t=e+1;return"parallel.login.link"+t},e.prototype.getProfileLinkDescriptionForDisplay=function(e){var t=e+1;return"parallel.login.description"+t},r([a.Input(),i("design:type",Object)],e.prototype,"authenticationMethod",void 0),e=r([a.Component({selector:"prm-login-item",templateUrl:"components/security/login/loginItem/login-item.html"}),o(0,a.Inject("loginIcons")),i("design:paramtypes",[Object])],e)}();t.PrmLoginItem=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(243),c=n(1),u=function(){function e(e,t){this.loginHelpService=e,this.loginIcons=t,this._showMoreInfo=!1}return Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this.loginHelpService.displaySigninHelp},enumerable:!0,configurable:!0}),e.prototype.toggleShowMoreInfo=function(){this._showMoreInfo=!this._showMoreInfo},Object.defineProperty(e.prototype,"showMoreInfoButton",{get:function(){return this.loginHelpService.loginHelpData.links&&1===this.loginHelpService.loginHelpData.links.length&&!this.loginHelpService.loginHelpData.description?(this._showMoreInfoButton=!1,this._showMoreInfo=!0):this._showMoreInfoButton=!0,this._showMoreInfoButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMoreInfo",{get:function(){return this._showMoreInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginHelpLinks",{get:function(){return this.loginHelpService.loginHelpData?this.loginHelpService.loginHelpData.links:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHelpDescription",{get:function(){return this.loginHelpService.loginHelpData&&this.loginHelpService.loginHelpData.description?1:0},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof c.AuthenticationMethod&&c.AuthenticationMethod)&&t||Object)],e.prototype,"authenticationMethod",void 0),e=r([a.Component({selector:"prm-login-help",templateUrl:"components/security/login/loginHelp/login-help.html"}),o(1,a.Inject("loginIcons")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.LoginHelpService&&s.LoginHelpService)&&n||Object,Object])],e);var t,n}();t.PrmLoginHelp=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(41),c=n(44),u=n(187),l=n(7),f=n(243),p=n(4),d=n(46),h=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f){this.loginService=e,this.$mdDialog=t,this.loginIcons=n,this.jwtUtilService=r,this.personalizeResultsButtonService=i,this.i18nService=o,this.$state=a,this.$stateParams=s,this.usernamePasswordLoginService=c,this.loginHelpService=u,this.$location=l,this.$timeout=f,this._selectedTab=0,this._showSubmitButton=!1,this.showActionsBar=!1,this._showBackButton=!1,this._isDualLogin=!1,this._errorLabel="",this._errorField="",this.KEY_CODE={ESCAPE:27}}return e.prototype.ngOnInit=function(){if(1===this.authenticationMethods.length){var e=this.authenticationMethods[0];e.isExternal()?this.loginService.redirectLogin(e,this.$location.search().targetURL):(this._showSubmitButton=!0,this.showActionsBar=!0,this._showBackButton=!1,this.selectedTab=1,this._isDualLogin=!1,this._selectedAuthenticationMethod=e,this.loginService.handleLogin())}else this._isDualLogin=!0,this.$timeout(function(){var e=document.querySelector("prm-login md-list-item button");e.focus()},300)},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAuthenticationMethod",{get:function(){return this._selectedAuthenticationMethod},set:function(e){this._selectedAuthenticationMethod=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showError",{get:function(){return this._errorLabel?1:0},enumerable:!0,configurable:!0}),e.prototype.handleLoginClick=function(e){e.isExternal()?this.loginService.redirectLogin(e):(this._showSubmitButton=!0,this.showActionsBar=!0,this._showBackButton=!0,this.selectedTab=1,this._selectedAuthenticationMethod=e)},e.prototype.showSubmitButton=function(){return this._showSubmitButton},e.prototype.showBackButton=function(){return this._showBackButton},e.prototype.handleBackButtonClick=function(){this._showSubmitButton=!1,this.showActionsBar=!0,this._showBackButton=!1,this.selectedTab=0},e.prototype.cancelLogin=function(){this.isUnionCatalogLogin()&&this.returnToUnionCatalogNZView(),this.loginService.removeBackgroundDarkClass(),this.loginService.clearSavedState(),this.$mdDialog.cancel(),document.querySelector("#signInBtn").focus()},e.prototype.getLoginTitleForDisplay=function(){return this._isDualLogin?"login.dual.title":"login.title"},e.prototype.getErrorForDisplay=function(){return this._errorLabel},e.prototype.login=function(){var e=this,t=this.username,n=this.password;if(t||n)if(t&&n){this._errorLabel=null;var r=this.jwtUtilService.getDecodedToken().user,i=this._selectedAuthenticationMethod.profileName,o="ALMA"===this._selectedAuthenticationMethod.authenticationSystem?this.loginService.getToUrl():"";this.usernamePasswordLoginService.login(t,n,i,o).then(function(t){if(e.usernamePasswordLoginService.copyFavoritesRecordsThatWereSavedForGuest(r),e.usernamePasswordLoginService.changeSearchHistorylocalForageKey(r),e.personalizeResultsButtonService.promise=e.personalizeResultsButtonService.updatePersonalization(e.$stateParams.vid),t)try{t=e.handleDecodeEncode(t),e.loginService.redirectToTargetURL(t)}catch(e){console.error(e)}else if(e.isStandAlone)e.loginService.redirectToTargetURL();else{e.$mdDialog.hide(),e.loginService.removeBackgroundDarkClass(),e.loginService.toState?e.loginService.loadSavedState():e.$state.current.name===p.STATE_NAMES.SEARCH&&e.$state.go(p.STATE_NAMES.SEARCH,{},{reload:!0});var n=e.jwtUtilService.getDecodedToken();""!==n.language&&n.language!==e.i18nService.getLanguage()&&e.i18nService.setLanguage(n.language).then(function(){e.$state.go(e.$state.current,{},{reload:!0})})}},function(t){e._errorLabel="login.error.message",document.getElementById("LoginUserName").focus(),document.getElementById("LoginUserName").setAttribute("aria-invalid","true"),document.getElementById("LoginPassword").setAttribute("aria-invalid","true")})}else this._errorLabel="nui.login.error.missing_field",document.getElementById("LoginUserName").setAttribute("aria-invalid","true"),document.getElementById("LoginPassword").setAttribute("aria-invalid","true"),t?n?this._errorField="":(this._errorField="login.password",document.getElementById("LoginPassword").focus(),document.getElementById("LoginPassword").setAttribute("aria-invalid","true"),document.getElementById("LoginUserName").setAttribute("aria-invalid","false")):(this._errorField="login.userid",document.getElementById("LoginUserName").focus(),document.getElementById("LoginUserName").setAttribute("aria-invalid","true"),document.getElementById("LoginPassword").setAttribute("aria-invalid","false"));else this._errorLabel="nui.login.error.missing_fields",document.getElementById("LoginUserName").focus(),document.getElementById("LoginUserName").setAttribute("aria-invalid","true"),document.getElementById("LoginPassword").setAttribute("aria-invalid","true")},e.prototype.getPlaceHolders=function(){return{idx_0:'{{"'+this._errorField+'" | translate}}'}},Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this.loginHelpService.displaySigninHelp},enumerable:!0,configurable:!0}),e.prototype.standAlone=function(){return this.isStandAlone},e.prototype.handleDecodeEncode=function(e){if(e){var t=e.split("backUrl=",2);if(2===t.length){var n=window.location.href;if("account"===this.loginService._toState.name&&(n=this.generteBackUrlForAccunt(n)),t[1]){if(t[1].includes("&")){var r=t[1].split("&",2);t[0].endsWith("?")||(t[0]+="&"),t[0]+=r[1]+"&",t[1]=n}}else t[1]=n;return t[1]=decodeURIComponent(decodeURIComponent(decodeURIComponent(t[1]))),t[1]=encodeURI(t[1]),t[0]+"backUrl="+encodeURIComponent(t[1])}return e}},e.prototype.generteBackUrlForAccunt=function(e){var t=this.loginService._toState.name,n=window.location.origin,r=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),i="?"+this.serialize(this.loginService._toParams),o=n+r+t+i;
return o},e.prototype.serialize=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},e.prototype.getProfileLinkForDisplay=function(e){var t=e+1;return"parallel.login.link"+t},e.prototype.getProfileLinkDescriptionForDisplay=function(e){var t=e+1;return"parallel.login.description"+t},e.prototype.isUnionCatalogLogin=function(){return this.loginService.isUnionCatalogLogin()},e.prototype.returnToUnionCatalogNZView=function(){this.loginService.returnToUnionCatalogNZView()},e.prototype.keydownSupportGustLogin=function(e){var t=this.KEY_CODE;if(e.keyCode===t.ESCAPE)return e.preventDefault(),document.querySelector("#signInBtn").focus()},r([a.Input(),i("design:type",Array)],e.prototype,"authenticationMethods",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isStandAlone",void 0),e=r([a.Component({selector:"prm-login",templateUrl:"components/security/login/login.html"}),o(1,a.Inject("$mdDialog")),o(2,a.Inject("loginIcons")),o(5,a.Inject("I18nService")),o(6,a.Inject("$state")),o(7,a.Inject("$stateParams")),o(10,a.Inject("$location")),o(11,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.LoginService&&c.LoginService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof l.JwtUtilService&&l.JwtUtilService)&&n||Object,"function"==typeof(h="undefined"!=typeof d.PersonalizeResultsButtonService&&d.PersonalizeResultsButtonService)&&h||Object,Object,Object,"function"==typeof(m="undefined"!=typeof s.IStateParamsService&&s.IStateParamsService)&&m||Object,"function"==typeof(g="undefined"!=typeof u.UsernamePasswordLoginService&&u.UsernamePasswordLoginService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.LoginHelpService&&f.LoginHelpService)&&y||Object,Object,Object])],e);var t,n,h,m,g,y}();t.PrmLogin=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(44),u=function(){function e(e,t,n,r){this.loginIcons=e,this.$state=t,this.$stateParams=n,this.loginService=r,this.authenticationMethods=s.getAuthenticationMethods();var i=this.$stateParams.toState;i&&(this.loginService.toState=i,this.loginService.toParams=JSON.parse(this.$stateParams.toParams))}return e.prototype.getAuthenticationMethods=function(){return this.authenticationMethods},e.prototype.isSingleAuthenticationMethodExternal=function(){return 1===this.getAuthenticationMethods().length&&this.getAuthenticationMethods()[0].isExternal()},e=r([a.Component({selector:"prm-stand-alone-login",templateUrl:"components/security/login/stand-alone-login.html"}),o(0,a.Inject("loginIcons")),o(1,a.Inject("$state")),o(2,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.LoginService&&c.LoginService)&&t||Object])],e);var t}();t.PrmStandAloneLogin=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(233),c=n(44),u=function(){function e(e,t,n,r){this.unionCatalogLoginService=e,this.loginService=t,this.$mdDialog=n,this.loginIcons=r,this._unionCatalogInstitutionsList=this.unionCatalogLoginService.getMemberInstitutionList()}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"unionCatalogInstitutionsList",{get:function(){return this._unionCatalogInstitutionsList},enumerable:!0,configurable:!0}),e.prototype.goToInstitutionLogin=function(e){this.unionCatalogLoginService.goToInstitutionLogin(e)},e.prototype.cancelLogin=function(){this.loginService.removeBackgroundDarkClass(),this.loginService.clearSavedState(),this.$mdDialog.cancel()},e=r([a.Component({selector:"prm-union-catalog-login",templateUrl:"components/security/login/unionCatalogLogin/union-catalog-login.html"}),o(2,a.Inject("$mdDialog")),o(3,a.Inject("loginIcons")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.UnionCatalogLoginService&&s.UnionCatalogLoginService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.LoginService&&c.LoginService)&&n||Object,Object,Object])],e);var t,n}();t.PrmUnionCatalogLogin=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"institutionName",{get:function(){return this.institutionDetails.name},enumerable:!0,configurable:!0}),r([o.Input(),i("design:type",Object)],e.prototype,"institutionDetails",void 0),e=r([o.Component({selector:"prm-union-catalog-login-institution-item",templateUrl:"components/security/login/unionCatalogLogin/unionCatalogLoginInstitutionItem/union-catalog-login-institution-item.html"}),i("design:paramtypes",[])],e)}();t.PrmUnionCatalogLoginInstitutionItem=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(401),a=n(244),s=n(821),c=function(){function e(){}return e=r([i.NgModule({declarations:[s.PrmModel],providers:[a.ModelService],imports:[o]})],e)}();t.ModelModule=c},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!c&&u)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,e!==r&&c(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){h(function(){var r;try{r=t(n)}catch(t){return m.reject(e,t)}r===e?m.reject(e,new TypeError("Cannot resolve promise with itself")):m.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function n(t){o||(o=!0,m.reject(e,t))}function r(t){o||(o=!0,m.resolve(e,t))}function i(){t(r,n)}var o=!1,a=u(i);"error"===a.status&&n(a.value)}function u(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function l(e){return e instanceof this?e:m.resolve(new this(r),e)}function f(e){var t=new this(r);return m.reject(t,e)}function p(e){function t(e,t){function r(e){a[t]=e,++s!==i||o||(o=!0,m.resolve(u,a))}n.resolve(e).then(r,function(e){o||(o=!0,m.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,c=-1,u=new this(r);++c<i;)t(e[c],c);return u}function d(e){function t(e){n.resolve(e).then(function(e){o||(o=!0,m.resolve(s,e))},function(e){o||(o=!0,m.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,s=new this(r);++a<i;)t(e[a]);return s}var h=e(2),m={},g=["REJECTED"],y=["FULFILLED"],v=["PENDING"];t.exports=n=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===y||"function"!=typeof t&&this.state===g)return this;var n=new this.constructor(r);if(this.state!==v){var i=this.state===y?e:t;a(n,i,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){m.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){m.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},m.resolve=function(e,t){var n=u(s,t);if("error"===n.status)return m.reject(e,n.value);var r=n.value;if(r)c(e,r);else{e.state=y,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},m.reject=function(e,t){e.state=g,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=l,n.reject=f,n.all=p,n.race=d},{2:2}],2:[function(e,n,r){(function(e){"use strict";function t(){l=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}l=!1}function r(e){1!==f.push(e)||l||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(t),c=e.document.createTextNode("");s.observe(c,{characterData:!0}),i=function(){c.data=a=++a%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var u=new e.MessageChannel;u.port1.onmessage=t,i=function(){u.port2.postMessage(0)}}var l,f=[];n.exports=r}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function o(){try{return!!oe&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(oe&&"function"==typeof oe.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function a(){return"function"==typeof openDatabase}function s(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function f(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function p(e){return new ce(function(t){var n=c([""]);e.objectStore(ue).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function d(e){return"boolean"==typeof ae?ce.resolve(ae):p(e).then(function(e){return ae=e})}function h(e){var t=se[e.name],n={};n.promise=new ce(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function m(e){var t=se[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function g(e,t){return new ce(function(n,r){if(e.db){if(!t)return n(e.db);h(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=oe.open.apply(oe,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(ue)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(){r(o.error)},o.onsuccess=function(){n(o.result),m(e)}})}function y(e){return g(e,!1)}function v(e){return g(e,!0)}function b(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return new ce(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function _(e){var t=f(atob(e.data));return c([t],{type:e.type})}function O(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,n=t._initReady().then(function(){var e=se[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(n,e,e),n}function E(e){function t(){return ce.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];se||(se={});var o=se[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},se[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=T);for(var a=[],s=0;s<o.forages.length;s++){var c=o.forages[s];c!==n&&a.push(c._initReady().catch(t))}var u=o.forages.slice(0);return ce.all(a).then(function(){return r.db=o.db,y(r)}).then(function(e){return r.db=e,b(r,n._defaultConfig.version)?v(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<u.length;t++){var i=u[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function w(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),O(e)&&(e=_(e)),t(e)},a.onerror=function(){r(a.error)}}).catch(r)});return u(r,t),r}function I(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;O(r)&&(r=_(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}).catch(r)});return u(r,t),r}function R(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===le.call(t)?d(o.db).then(function(e){return e?t:S(t)}):t}).then(function(t){var r=o.db.transaction(o.storeName,"readwrite"),a=r.objectStore(o.storeName);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)};var s=a.put(t,e)}).catch(i)});return u(i,n),i}function P(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),a=o.objectStore(i.storeName),s=a.delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}).catch(r)});return u(r,t),r}function j(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName),a=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}).catch(n)});return u(n,e),n}function A(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}).catch(n)});return u(n,e),n}function C(e,t){var n=this,r=new ce(function(t,r){return e<0?void t(null):void n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},s.onerror=function(){r(s.error)}}).catch(r)});return u(r,t),r}function $(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),a=[];o.onsuccess=function(){var t=o.result;return t?(a.push(t.key),void t.continue()):void e(a)},o.onerror=function(){n(o.error)}}).catch(n)});return u(n,e),n}function D(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=pe.indexOf(e[t]),r=pe.indexOf(e[t+1]),i=pe.indexOf(e[t+2]),o=pe.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&o;return u}function L(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=pe[n[t]>>2],r+=pe[(3&n[t])<<4|n[t+1]>>4],r+=pe[(15&n[t+1])<<2|n[t+2]>>6],r+=pe[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function k(e,t){var n="";if(e&&(n=je.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===je.call(e.buffer))){var r,i=me;e instanceof ArrayBuffer?(r=e,i+=ye):(r=e.buffer,"[object Int8Array]"===n?i+=be:"[object Uint8Array]"===n?i+=Se:"[object Uint8ClampedArray]"===n?i+=_e:"[object Int16Array]"===n?i+=Oe:"[object Uint16Array]"===n?i+=Ee:"[object Int32Array]"===n?i+=Te:"[object Uint32Array]"===n?i+=we:"[object Float32Array]"===n?i+=Ie:"[object Float64Array]"===n?i+=Re:t(new Error("Failed to get type for BinaryArray"))),t(i+L(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=de+e.type+"~"+L(this.result);t(me+ve+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function M(e){if(e.substring(0,ge)!==me)return JSON.parse(e);var t,n=e.substring(Pe),r=e.substring(ge,Pe);if(r===ve&&he.test(n)){var i=n.match(he);t=i[1],n=n.substring(i[0].length)}var o=D(n);switch(r){case ye:return o;case ve:return c([o],{type:t});case be:return new Int8Array(o);case Se:return new Uint8Array(o);case _e:return new Uint8ClampedArray(o);case Oe:return new Int16Array(o);case Ee:return new Uint16Array(o);case Te:return new Int32Array(o);case we:return new Uint32Array(o);case Ie:return new Float32Array(o);case Re:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}function x(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new ce(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Ae,i}function F(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function U(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),u=c.value;if(u&&(u=i.serializer.deserialize(u)),u=e(u,c.key,s+1),void 0!==u)return void t(u)}t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function B(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var o=t,a=r._dbInfo;a.serializer.serialize(t,function(t,r){r?i(r):a.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(o)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})})}).catch(i)});return u(i,n),i}function N(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function q(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function H(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function V(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function Y(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function z(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=Ae,ce.resolve()}function G(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return u(n,e),n}function W(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return u(r,t),r}function Q(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),u=e(u,c.substring(i),a++),void 0!==u)return u}}});return u(r,t),r}function J(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return u(r,t),r}function K(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++)0===localStorage.key(i).indexOf(e.keyPrefix)&&r.push(localStorage.key(i).substring(e.keyPrefix.length));return r});return u(n,e),n}function X(e){var t=this,n=t.keys().then(function(e){return e.length});return u(n,e),n}function Z(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return u(r,t),r}function ee(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new ce(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return u(i,n),i}function te(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function ne(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ue(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function re(e){for(var t in Le)if(Le.hasOwnProperty(t)&&Le[t]===e)return!0;return!1}var ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe=i();"undefined"==typeof Promise&&"undefined"!=typeof e&&e(3);var ae,se,ce=Promise,ue="local-forage-detect-blob-support",le=Object.prototype.toString,fe={_driver:"asyncStorage",_initStorage:E,iterate:I,getItem:w,setItem:R,removeItem:P,clear:j,length:A,key:C,keys:$},pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",de="~~local_forage_type~",he=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",ge=me.length,ye="arbf",ve="blob",be="si08",Se="ui08",_e="uic8",Oe="si16",Te="si32",Ee="ur16",we="ui32",Ie="fl32",Re="fl64",Pe=ge+ye.length,je=Object.prototype.toString,Ae={serialize:k,deserialize:M,stringToBuffer:D,bufferToString:L},Ce={_driver:"webSQLStorage",_initStorage:x,iterate:U,getItem:F,setItem:B,removeItem:N,clear:q,length:H,key:V,keys:Y},$e={_driver:"localStorageWrapper",_initStorage:z,iterate:Q,getItem:W,setItem:ee,removeItem:Z,clear:G,length:X,key:J,keys:K},De={},Le={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},ke=[Le.INDEXEDDB,Le.WEBSQL,Le.LOCALSTORAGE],Me=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],xe={description:"",driver:ke.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Fe={};Fe[Le.INDEXEDDB]=o(),Fe[Le.WEBSQL]=a(),Fe[Le.LOCALSTORAGE]=s();var Ue=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Be=function(){function e(t){r(this,e),this.INDEXEDDB=Le.INDEXEDDB,this.LOCALSTORAGE=Le.LOCALSTORAGE,this.WEBSQL=Le.WEBSQL,this._defaultConfig=ne({},xe),this._config=ne({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===("undefined"==typeof e?"undefined":ie(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new ce(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(re(e._driver))return void n(o);for(var a=Me.concat("_initStorage"),s=0;s<a.length;s++){var c=a[s];if(!c||!e[c]||"function"!=typeof e[c])return void n(i)}var u=ce.resolve(!0);"_support"in e&&(u=e._support&&"function"==typeof e._support?e._support():ce.resolve(!!e._support)),u.then(function(n){Fe[r]=n,De[r]=e,t()},n)}catch(e){n(e)}});return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,i=ce.resolve().then(function(){if(!re(e)){if(De[e])return De[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return fe;case r.LOCALSTORAGE:return $e;case r.WEBSQL:return Ce}});return l(i,t,n),i},e.prototype.getSerializer=function(e){var t=ce.resolve(Ae);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){o._config.driver=o.driver()}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(function(e){return o._extend(e),r(),o._ready=o._initStorage(o._config),o._ready}).catch(t)}r();var a=new Error("No available storage method found.");return o._driverSet=ce.reject(a),o._driverSet}var n=0;return t()}}var o=this;Ue(e)||(e=[e]);var a=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return ce.resolve()}):ce.resolve();return this._driverSet=s.then(function(){var e=a[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,r(),o._wrapLibraryMethodsWithReady(),o._initDriver=i(a)})}).catch(function(){r();var e=new Error("No available storage method found.");return o._driverSet=ce.reject(e),o._driverSet}),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Fe[e]},e.prototype._extend=function(e){ne(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<Me.length;e++)te(this,Me[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ne=new Be;t.exports=Ne},{3:3}]},{},[4])(4)})}).call(t,n(68))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){
return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=n(0),c=n(244),u=n(822),l=function(){function e(e,t){this.modelService=e,this.$stateParams=t,this.entry="",this.bulk="",this.entry2="",this.index="",t.active&&(this.modelService.active=t.active),t.entry&&(this.entry=t.entry),t.bulk&&(this.bulk=t.bulk),t.entry2&&(this.entry2=t.entry2),t.index&&(this.index=t.index),console.log(t.entry)}return e.prototype.splitToArray=function(e){return e.split(",")},e.prototype.isJsonArray=function(e){return a.isArray(e)},e.prototype.beautifyJson=function(e){return a.isObject(e)?u(e,null,2,100):a.isArray(e)?e.map(function(e){return u(e,null,2,100)}):void 0},Object.defineProperty(e.prototype,"active",{get:function(){return this.modelService.checkActive(),this.modelService.active},set:function(e){this.modelService.active=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){if(this.index){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry][this.bulk][this.entry2][this.index],e}if(this.bulk){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry][this.bulk],e}if(this.entry){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry],e}return this.modelService.modelInstance},enumerable:!0,configurable:!0}),e=r([s.Component({selector:"prm-model",templateUrl:"components/infra/dataStructures/model/model.html"}),o(1,s.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.ModelService&&c.ModelService)&&t||Object,Object])],e);var t}();t.PrmModel=l},function(e,t){function n(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function r(e,t,i){var c,u,l,f,p,d=o,h=t[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof s&&(h=s.call(t,e,h)),typeof h){case"string":return n(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(o+=a,p=[],"[object Array]"===Object.prototype.toString.apply(h)){for(f=h.length,c=0;c<f;c+=1)p[c]=r(c,h,i)||"null";return l=0===p.length?"[]":o?o.length+p.join(", ").length+4>i?"[\n"+o+p.join(",\n"+o)+"\n"+d+"]":"[ "+p.join(", ")+" ]":"["+p.join(",")+"]",o=d,l}if(s&&"object"==typeof s)for(f=s.length,c=0;c<f;c+=1)"string"==typeof s[c]&&(u=s[c],l=r(u,h,i),l&&p.push(n(u)+(o?": ":":")+l));else for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&(l=r(u,h,i),l&&p.push(n(u)+(o?": ":":")+l));return l=0===p.length?"{}":o?o.length+p.join(", ").length+4>i?"{\n"+o+p.join(",\n"+o)+"\n"+d+"}":"{ "+p.join(", ")+" }":"{"+p.join(",")+"}",o=d,l}}function i(e,t,n,i){var c;if(o="",a="",i||(i=0),"number"!=typeof i)throw new Error("beaufifier: limit must be a number");if("number"==typeof n)for(c=0;c<n;c+=1)a+=" ";else"string"==typeof n&&(a=n);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("beautifier: wrong replacer parameter");return r("",{"":e},i)}var o,a,s,c=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.exports=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(824),a=n(825),s=n(16),c=n(826),u=n(827),l=n(828),f=n(829),p=n(830),d=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmNewspapersHome,a.PrmNewspapersSearchBar,u.PrmNewspapersFacet,c.PrmNewspapersSpotlight,l.PrmBackToLibrarySearch,f.PrmNewspapersFullView,p.PrmSearchResultTitle],providers:[s.NewspapersService],imports:[]})],e)}();t.NewspapersModule=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(16),c=n(4),u=n(14),l=n(1),f=n(8),p=function(){function e(e,t,n,r,i){this.newspapersService=e,this.$stateParams=t,this.$state=n,this.searchFieldsService=r,this.mediaQueries=i,this.vid=l.getVid(),this.firstTimeInLandingPage=!0,this.$stateParams.query?this.firstTimeInLandingPage=!1:(this.newspapersService.cameFromSearch=!1,this.newspapersService.cameFromFeaturedSearch=!1,this.newspapersService.featuredTitle="",this.newspapersService.featuredDescription="")}return e.prototype.displayFeaturedNewspapers=function(){return this.newspapersService.displayFeaturedNewspapers()},Object.defineProperty(e.prototype,"featuredNewspapers",{get:function(){return this.newspapersService.featuredNewspapers},enumerable:!0,configurable:!0}),e.prototype.goToFeaturedNewspaper=function(e){var t=this.newspapersService.featuredNewspapers[e].issn.replace(/;$/,""),n={query:"any,contains, ",search_scope:"featured",featured_scope:this.newspapersService.featuredNewspapers[e].name,vid:this.vid,offset:0,facet:[],mfacet:[],pfilter:[],issn:t};return this.searchFieldsService.searchParams=n,this.newspapersService.cameFromFeaturedSearch=!0,this.newspapersService.featuredTitle=this.newspapersService.featuredNewspapers[e].name,this.newspapersService.featuredDescription=this.newspapersService.featuredNewspapers[e].description,this.$state.go(c.STATE_NAMES.NEWSPAPERS,n,{reload:!0})},e=r([a.Component({selector:"prm-newspapers-home",templateUrl:"components/newspapers/newspapers-home.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.NewspapersService&&s.NewspapersService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof u.SearchFieldsService&&u.SearchFieldsService)&&n||Object,"function"==typeof(p="undefined"!=typeof f.MediaQueries&&f.MediaQueries)&&p||Object])],e);var t,n,p}();t.PrmNewspapersHome=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(14),c=n(16),u=n(8),l=n(1),f=n(9),p=function(){function e(e,t,n,r,i,o,s,c,u){var f=this;this.searchBoxIcons=e,this.$stateParams=t,this.searchFieldsService=n,this.newspapersService=r,this.mediaQueries=i,this.$timeout=o,this.$scope=s,this.$element=c,this.mtCache=u,this.searchEvent=new a.EventEmitter,this.FEATURED_NAME_LENGTH_LIMIT=35,this.focusOnSearchInput=!1,this.vid=l.getVid(),this.$stateParams.featured_scope&&(this.featuredScope=this.$stateParams.featured_scope,this.newspapersService.cameFromFeaturedSearch=!0,this.newspapersService.featuredTitle=this.featuredScope,this.newspapersService.featuredDescription=this.newspapersService.nameDescMap[this.featuredScope]),this.scope=this.$stateParams.search_scope||r.DEFAULT_SCOPE,this.focusOnSearchInput=1===this.mtCache.getTable(this.mtCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===f.vid&&"focus_on_search_input"===e.source2&&"true"===e.target}).length}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.mainSearchField},function(t,n){e.$timeout(function(){e.removeAriaLabel("md-input-container input")},400)}),this.$timeout(function(){if(e.mediaQueries.gtmd&&e.focusOnSearchInput){var t=document.querySelector("#searchBar");t&&t.focus()}},0)},e.prototype.onSubmit=function(){if(this.mainSearchField){var e={mainSearchField:"any,contains,"+this.mainSearchField,scopeField:this.scope,featuredScopeField:void 0,mode:void 0,issn:void 0,facet:void 0,mfacet:void 0,pfilter:void 0};this.newspapersService.cameFromFeaturedSearch=!1,this.newspapersService.featuredTitle="",this.newspapersService.featuredDescription="","featured"===this.scope&&(e.featuredScopeField=this.featuredScope,e.issn=this.newspapersService.nameIssnMap[this.featuredScope],this.newspapersService.cameFromFeaturedSearch=!0,this.newspapersService.featuredTitle=this.featuredScope,this.newspapersService.featuredDescription=this.newspapersService.nameDescMap[this.featuredScope]),this.searchEvent.emit(e)}},Object.defineProperty(e.prototype,"mainSearchField",{get:function(){return this.searchFieldsService.mainSearch},set:function(e){this.searchFieldsService.mainSearch=e},enumerable:!0,configurable:!0}),e.prototype.displayFeaturedNespapersDropDown=function(){return this.newspapersService.displayFeaturedNewspapers()},Object.defineProperty(e.prototype,"scopes",{get:function(){return this.newspapersService.scopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredScopes",{get:function(){return this.newspapersService.featuredScopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredScope",{get:function(){return this.newspapersService.featuredScope},set:function(e){this.newspapersService.featuredScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.newspapersService.scope},set:function(e){this.newspapersService.scope=e},enumerable:!0,configurable:!0}),e.prototype.removeAriaLabel=function(e){for(var t=this.$element[0].querySelectorAll(e),n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("aria-label")}},e.prototype.clear=function(){this.mainSearchField="",document.querySelector("#searchBar").focus()},Object.defineProperty(e.prototype,"showFeaturedOptions",{get:function(){return"featured"===this.scope},enumerable:!0,configurable:!0}),r([a.Output(),i("design:type",Object)],e.prototype,"searchEvent",void 0),e=r([a.Component({selector:"prm-newspapers-search-bar",templateUrl:"components/newspapers/newspapersSearchBar/newspapers-search-bar.html"}),o(0,a.Inject("searchBoxIcons")),o(1,a.Inject("$stateParams")),o(5,a.Inject("$timeout")),o(6,a.Inject("$scope")),o(7,a.Inject("$element")),i("design:paramtypes",[Array,Object,"function"==typeof(t="undefined"!=typeof s.SearchFieldsService&&s.SearchFieldsService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.NewspapersService&&c.NewspapersService)&&n||Object,"function"==typeof(p="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&p||Object,Object,Object,Object,"function"==typeof(d="undefined"!=typeof f.MappingTablesCache&&f.MappingTablesCache)&&d||Object])],e);var t,n,p,d}();t.PrmNewspapersSearchBar=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(16),c=n(6),u=function(){function e(e,t,n,r){this.newspapersService=e,this.primolyticsService=t,this.availabilityLineIcons=n,this.$state=r,this.thumbnail="img/icon_newspapers.png"}return e.prototype.goToNewspapers=function(){this.newspapersService.addCameFromGoToNewspapersfromRegularSearch("bottomResultList"),this.newspapersService.goToNewspapersFromSearch()},r([c.beacon({p:"general",op:"goToNewspapersfromRegularSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToNewspapers",null),e=r([a.Component({selector:"prm-newspapers-spotlight",templateUrl:"components/newspapers/newspapersSpotlight/newspapers-spotlight.html"}),o(2,a.Inject("availabilityLineIcons")),o(3,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.NewspapersService&&s.NewspapersService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.PrimolyticsService&&c.PrimolyticsService)&&n||Object,Object,Object])],e);var t,n}();t.PrmNewspapersSpotlight=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(16),c=n(6),u=function(){function e(e,t,n){this.newspapersService=e,this.primolyticsService=t,this.availabilityLineIcons=n}return e.prototype.goToNewspapers=function(){this.newspapersService.addCameFromGoToNewspapersfromRegularSearch("facetRT"),this.newspapersService.goToNewspapersFromSearch()},r([c.beacon({p:"general",op:"goToNewspapersfromRegularSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"goToNewspapers",null),e=r([a.Component({selector:"prm-newspapers-facet",templateUrl:"components/newspapers/newspapersFacet/newspapers-facet.html"}),o(2,a.Inject("availabilityLineIcons")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.NewspapersService&&s.NewspapersService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.PrimolyticsService&&c.PrimolyticsService)&&n||Object,Object])],e);var t,n}();t.PrmNewspapersFacet=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(14),u=n(21),l=n(11),f=n(4),p=n(16),d=function(){function e(e,t,n,r,i,o,a){this.$location=e,this.$translate=t,this.$state=n,this.searchFieldsService=r,this.searchStateService=i,this.searchService=o,this.newspapersService=a,this.vid=s.getVid()}return e.prototype.backToSearch=function(){this.resetSearchParams(),this.newspapersService.cameFromSearch=!1,this.newspapersService.cameFromFeaturedSearch=!1,this.newspapersService.featuredTitle="",this.newspapersService.featuredDescription="",this.$state.go(f.STATE_NAMES.SEARCH,{vid:this.vid},{inherit:!1,reload:!0})},e.prototype.resetSearchParams=function(){this.searchFieldsService.reset(),this.searchStateService.resetSearchObject(),this.searchService.restSignInAlertMessage()},e=r([a.Component({selector:"prm-back-to-library-search",templateUrl:"components/newspapers/back-to-library-search.html"}),o(0,a.Inject("$location")),o(1,a.Inject("$translate")),o(2,a.Inject("$state")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&t||Object,"function"==typeof(n="undefined"!=typeof u.SearchStateService&&u.SearchStateService)&&n||Object,"function"==typeof(d="undefined"!=typeof l.SearchService&&l.SearchService)&&d||Object,"function"==typeof(h="undefined"!=typeof p.NewspapersService&&p.NewspapersService)&&h||Object])],e);var t,n,d,h}();t.PrmBackToLibrarySearch=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e=r([o.Component({selector:"prm-newspapers-full-view",templateUrl:"components/newspapers/newspapersFullView/newspapers-full-view.html"}),i("design:paramtypes",[])],e)}();t.PrmNewspapersFullView=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8),s=n(16),c=function(){function e(e,t){this.mediaQueries=e,this.newspapersService=t}return Object.defineProperty(e.prototype,"featuredTitle",{get:function(){return this.newspapersService.featuredTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredDescription",{get:function(){return this.newspapersService.featuredDescription},enumerable:!0,configurable:!0}),e=r([o.Component({selector:"prm-search-result-title",templateUrl:"components/newspapers/searchResultTitle/search-result-title.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MediaQueries&&a.MediaQueries)&&t||Object,"function"==typeof(n="undefined"!=typeof s.NewspapersService&&s.NewspapersService)&&n||Object])],e);var t,n}();t.PrmSearchResultTitle=c},function(e,t,n){n(832),e.exports="ngMessages"},function(e,t){!function(e,t){"use strict";function n(){function e(e,t){if(e)return i(e)?e.indexOf(t)>=0:e.hasOwnProperty(t)}return["$animate",function(t){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(n,r,o,a,s){var c,u=r[0],l=o.ngMessage||o.when,f=o.ngMessageExp||o.whenExp,p=function(e){c=e?i(e)?e:e.split(/[\s,]+/):null,a.reRender()};f?(p(n.$eval(f)),n.$watchCollection(f,p)):p(l);var d,h;a.register(u,h={test:function(t){return e(c,t)},attach:function(){d||s(function(e,n){t.enter(e,null,r),d=e;var i=d.$$attachId=a.getAttachId();d.on("$destroy",function(){d&&d.$$attachId===i&&(a.deregister(u),h.detach()),n.$destroy()})})},detach:function(){if(d){var e=d;d=null,t.leave(e)}}}),n.$on("$destroy",function(){a.deregister(u)})}}}]}var r,i,o,a;t.module("ngMessages",[],function(){r=t.forEach,i=t.isArray,o=t.isString,a=t.element}).info({angularVersion:"1.6.10"}).directive("ngMessages",["$animate",function(e){function t(e,t){return o(t)&&0===t.length||n(e.$eval(t))}function n(e){return o(e)?e.length:!!e}var i="ng-active",a="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(o,s,c){function u(e,t){for(var n=t,r=[];n&&n!==e;){var i=n.$$ngMessageNode;if(i&&i.length)return y[i];n.childNodes.length&&r.indexOf(n)===-1?(r.push(n),n=n.childNodes[n.childNodes.length-1]):n.previousSibling?n=n.previousSibling:(n=n.parentNode,r.push(n))}}function l(e,t,n){var r=y[n];if(p.head){var i=u(e,t);i?(r.next=i.next,i.next=r):(r.next=p.head,p.head=r)}else p.head=r}function f(e,t,n){var r=y[n];if(r){var i=u(e,t);i?i.next=r.next:p.head=r.next}}var p=this,d=0,h=0;this.getAttachId=function(){return h++};var m,g,y=this.messages={};this.render=function(u){u=u||{},m=!1,g=u;for(var l=t(s,c.ngMessagesMultiple)||t(s,c.multiple),f=[],d={},h=p.head,y=!1,v=0;null!=h;){v++;var b=h.message,S=!1;y||r(u,function(e,t){if(!S&&n(e)&&b.test(t)){if(d[t])return;d[t]=!0,S=!0,b.attach()}}),S?y=!l:f.push(b),h=h.next}r(f,function(e){e.detach()}),f.length!==v?e.setClass(o,i,a):e.setClass(o,a,i)},s.$watchCollection(c.ngMessages||c.for,p.render),this.reRender=function(){m||(m=!0,s.$evalAsync(function(){m&&g&&p.render(g)}))},this.register=function(e,t){var n=d.toString();y[n]={message:t},l(o[0],e,n),e.$$ngMessageNode=n,d++,p.reRender()},this.deregister=function(e){var t=e.$$ngMessageNode;delete e.$$ngMessageNode,f(o[0],e,t),delete y[t],p.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,t,n){function r(e,r){var i=n.$$createComment?n.$$createComment("ngMessagesInclude",r):t[0].createComment(" ngMessagesInclude: "+r+" "),o=a(i);e.after(o),e.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(t,i,a){var s=a.ngMessagesInclude||a.src;e(s).then(function(e){t.$$destroyed||(o(e)&&!e.trim()?r(i,s):n(e)(t,function(e){i.after(e),r(i,s)}))})}}}]).directive("ngMessage",n()).directive("ngMessageExp",n())}(window,window.angular)},function(e,t,n){n(834),e.exports="ngSanitize"},function(e,t){!function(e,t){"use strict";function n(){function n(e,t){return r(e.split(","),t)}function r(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?u(e[n]):e[n]]=!0;return r}function m(e,t){t&&t.length&&o(e,r(t))}function g(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e);var n=U(e);if(!n)return"";var r=5;do{if(0===r)throw h("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=U(e)}while(e!==n.innerHTML);for(var i=n.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),y(i.attributes));break;case 3:t.chars(i.textContent)}var o;if(!(o=i.firstChild)&&(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),o=_("nextSibling",i),!o))for(;null==o&&(i=_("parentNode",i),i!==n);)o=_("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=o}for(;i=n.firstChild;)n.removeChild(i)}function y(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function v(e){return e.replace(/&/g,"&amp;").replace(E,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=u(e),!n&&D[e]&&(n=e),n||L[e]!==!0||(r("<"),r(e),a(i,function(n,i){var o=u(i),a="img"===e&&"src"===o||"background"===o;F[o]!==!0||k[o]===!0&&!t(n,a)||(r(" "),r(i),r('="'),r(v(n)),r('"'))}),r(">"))},end:function(e){e=u(e),n||L[e]!==!0||I[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(v(e))}}}function S(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),r--,i--)}var s=t.firstChild;s&&S(s),t=_("nextSibling",t)}}function _(e,t){var n=t[e];if(n&&f.call(t,n))throw h("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}var O=!1,T=!1;this.$get=["$$sanitizeUri",function(e){return O=!0,T&&o(L,$),function(t){var n=[];return p(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return c(e)?(T=e,this):T},this.addValidElements=function(e){return O||(s(e)&&(e={htmlElements:e}),m($,e.svgElements),m(I,e.htmlVoidElements),m(L,e.htmlVoidElements),m(L,e.htmlElements)),this},this.addValidAttrs=function(e){return O||o(F,r(e,!0)),this},i=t.bind,o=t.extend,a=t.forEach,s=t.isArray,c=t.isDefined,u=t.lowercase,l=t.noop,p=g,d=b,f=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var E=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^#-~ |!])/g,I=n("area,br,col,hr,img,wbr"),R=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),P=n("rp,rt"),j=o({},P,R),A=o({},R,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),C=o({},P,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),$=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),D=n("script,style"),L=o({},I,A,C,j),k=n("background,cite,href,longdesc,src,xlink:href,xml:base"),M=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),x=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),F=o({},k,x,M),U=function(e,t){function n(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}function r(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}function i(e){return a.innerHTML=e,t.documentMode&&S(a),a}var o;if(!t||!t.implementation)throw h("noinert","Can't create an inert html document");o=t.implementation.createHTMLDocument("inert");var a=(o.documentElement||o.getDocumentElement()).querySelector("body");return a.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',a.querySelector("svg")?(a.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',a.querySelector("svg img")?r:i):n}(e,e.document)}function r(e){var t=[],n=d(t,l);return n.chars(e),t.join("")}var i,o,a,s,c,u,l,f,p,d,h=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n).info({angularVersion:"1.6.10"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,o=t.$$minErr("linky"),a=t.isDefined,s=t.isFunction,c=t.isObject,u=t.isString;return function(t,l,f){function p(e){e&&b.push(r(e))}function d(e,t){var n,r=y(e);b.push("<a ");for(n in r)b.push(n+'="'+r[n]+'" ');!a(l)||"target"in r||b.push('target="',l,'" '),b.push('href="',e.replace(/"/g,"&quot;"),'">'),p(t),b.push("</a>")}if(null==t||""===t)return t;if(!u(t))throw o("notstring","Expected string but received: {0}",t);for(var h,m,g,y=s(f)?f:c(f)?function(){return f}:function(){return{}},v=t,b=[];h=v.match(n);)m=h[0],h[2]||h[4]||(m=(h[3]?"http://":"mailto:")+m),g=h.index,p(v.substr(0,g)),d(m,h[0].replace(i,"")),v=v.substring(g+h[0].length);return p(v),e(b.join(""))}}])}(window,window.angular)},function(e,t,n){n(836),e.exports="ngCookies"},function(e,t){!function(e,t){"use strict";function n(e,n,r){function i(e,r,i){var a,s;i=i||{},s=i.expires,a=t.isDefined(i.path)?i.path:o,t.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),t.isString(s)&&(s=new Date(s));var c=encodeURIComponent(e)+"="+encodeURIComponent(r);c+=a?";path="+a:"",c+=i.domain?";domain="+i.domain:"",c+=s?";expires="+s.toUTCString():"",c+=i.secure?";secure":"";var u=c.length+1;return u>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),c}var o=r.baseHref(),a=e[0];return function(e,t,n){a.cookie=i(e,t,n)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.6.10"}).provider("$cookies",[function(){function e(e){return e?t.extend({},n,e):n}var n=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(n,r){return{get:function(e){return n()[e]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return n()},put:function(t,n,i){r(t,n,e(i))},putObject:function(e,n,r){this.put(e,t.toJson(n),r)},remove:function(t,n){r(t,void 0,e(n))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular)},function(e,t,n){n(838),e.exports="vcRecaptcha"},function(e,t){!function(e){"use strict";e.module("vcRecaptcha",[])}(angular),function(e){"use strict";function t(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var n=e.module("vcRecaptcha");n.provider("vcRecaptchaService",function(){var n=this,r={};n.onLoadFunctionName="vcRecaptchaApiLoaded",n.setDefaults=function(t){e.copy(t,r)},n.setSiteKey=function(e){r.key=e},n.setTheme=function(e){r.theme=e},n.setStoken=function(e){r.stoken=e},n.setSize=function(e){r.size=e},n.setType=function(e){r.type=e},n.setLang=function(e){r.lang=e},n.setBadge=function(e){r.badge=e},n.setOnLoadFunctionName=function(e){n.onLoadFunctionName=e},n.$get=["$rootScope","$window","$q","$document",function(i,o,a,s){function c(){return l?a.when(l):p}function u(){if(!l)throw new Error("reCaptcha has not been loaded yet.")}var l,f=a.defer(),p=f.promise,d={};o.vcRecaptchaApiLoadedCallback=o.vcRecaptchaApiLoadedCallback||[];var h=function(){l=o.grecaptcha,f.resolve(l)};if(o.vcRecaptchaApiLoadedCallback.push(h),o[n.onLoadFunctionName]=function(){o.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},e.isDefined(o.grecaptcha))h();else{var m=o.document.createElement("script");m.async=!0,m.defer=!0,m.src="https://www.google.com/recaptcha/api.js?onload="+n.onLoadFunctionName+"&render=explicit",s.find("body").append(m)}return{create:function(e,n){return n.sitekey=n.key||r.key,
n.theme=n.theme||r.theme,n.stoken=n.stoken||r.stoken,n.size=n.size||r.size,n.type=n.type||r.type,n.hl=n.lang||r.lang,n.badge=n.badge||r.badge,n.sitekey&&40===n.sitekey.length||t(),c().then(function(t){var r=t.render(e,n);return d[r]=e,r})},reload:function(e){u(),l.reset(e),i.$broadcast("reCaptchaReset",e)},execute:function(e){u(),l.execute(e)},useLang:function(e,t){var n=d[e];if(!n)throw new Error("reCaptcha Widget ID not exists",e);var r=n.querySelector("iframe");if(!t)return r&&r.src&&/[?&]hl=\w+/.test(r.src)?r.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(r&&r.src){var i=r.src;/[?&]hl=/.test(i)?i=i.replace(/([?&]hl=)\w+/,"$1"+t):i+=(i.indexOf("?")===-1?"?":"&")+"hl="+t,r.src=i}},getResponse:function(e){return u(),l.getResponse(e)},getInstance:function(e){return d[e]},destroy:function(e){delete d[e]}}}]})}(angular),function(e){"use strict";var t=e.module("vcRecaptcha");t.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(t,n,r){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",badge:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(i,o,a,s){function c(){s&&s.$setValidity("recaptcha",null),f()}function u(){n(function(){i.response="",l(),i.onExpire({widgetId:i.widgetId})})}function l(){s&&s.$setValidity("recaptcha",i.required===!1?null:Boolean(i.response))}function f(){r.destroy(i.widgetId),e.element(t[0].querySelectorAll(".pls-container")).parent().remove()}i.widgetId=null,s&&e.isDefined(a.required)&&i.$watch("required",l);var p=i.$watch("key",function(t){var s=function(e){n(function(){i.response=e,l(),i.onSuccess({response:e,widgetId:i.widgetId})})};r.create(o[0],{callback:s,key:t,stoken:i.stoken||a.stoken||null,theme:i.theme||a.theme||null,type:i.type||a.type||null,lang:i.lang||a.lang||null,tabindex:i.tabindex||a.tabindex||null,size:i.size||a.size||null,badge:i.badge||a.badge||null,"expired-callback":u}).then(function(t){l(),i.widgetId=t,i.onCreate({widgetId:t}),i.$on("$destroy",c),i.$on("reCaptchaReset",function(n,r){(e.isUndefined(r)||t===r)&&(i.response="",l())})}),p()})}}}])}(angular)},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!c&&u)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var r="/* perfect-scrollbar v0.6.11 */\n.ps-container {\n  -ms-touch-action: none;\n  touch-action: none;\n  overflow: hidden !important;\n  -ms-overflow-style: none;\n}\n@supports (-ms-overflow-style: none) {\n  .ps-container {\n    overflow: auto !important;\n  }\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps-container {\n    overflow: auto !important;\n  }\n}\n.ps-container.ps-active-x>.ps-scrollbar-x-rail,\n.ps-container.ps-active-y>.ps-scrollbar-y-rail {\n  display: block;\n  background-color: transparent;\n}\n.ps-container.ps-in-scrolling {\n  pointer-events: none;\n}\n.ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  background-color: #999;\n}\n.ps-container>.ps-scrollbar-x-rail {\n  display: none;\n  position: absolute;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  -moz-transition: background-color .2s linear, opacity .2s linear;\n  -o-transition: background-color .2s linear, opacity .2s linear;\n  transition: background-color .2s linear, opacity .2s linear;\n  bottom: 3px;\n  height: 8px;\n}\n.ps-container>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  position: absolute;\n  background-color: #aaa;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  -webkit-transition: background-color .2s linear;\n  -moz-transition: background-color .2s linear;\n  -o-transition: background-color .2s linear;\n  transition: background-color .2s linear;\n  bottom: 0;\n  height: 8px;\n}\n.ps-container>.ps-scrollbar-y-rail {\n  display: none;\n  position: absolute;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  -moz-transition: background-color .2s linear, opacity .2s linear;\n  -o-transition: background-color .2s linear, opacity .2s linear;\n  transition: background-color .2s linear, opacity .2s linear;\n  right: 3px;\n  width: 8px;\n}\n.ps-container>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  position: absolute;\n  background-color: #aaa;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  -webkit-transition: background-color .2s linear;\n  -moz-transition: background-color .2s linear;\n  -o-transition: background-color .2s linear;\n  transition: background-color .2s linear;\n  right: 0;\n  width: 8px;\n}\n.ps-container:hover.ps-in-scrolling {\n  pointer-events: none;\n}\n.ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  background-color: #999;\n}\n.ps-container:hover>.ps-scrollbar-x-rail,\n.ps-container:hover>.ps-scrollbar-y-rail {\n  opacity: 0.6;\n}\n.ps-container:hover>.ps-scrollbar-x-rail:hover {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover>.ps-scrollbar-x-rail:hover>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container:hover>.ps-scrollbar-y-rail:hover {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover>.ps-scrollbar-y-rail:hover>.ps-scrollbar-y {\n  background-color: #999;\n}\n";e("browserify-css").createStyle(r,{href:"app.css"}),t.exports=r},{"browserify-css":3}],2:[function(e,n,r){(function(t){var r=e("perfect-scrollbar"),i="undefined"!=typeof window?window.angular:"undefined"!=typeof t?t.angular:null;e("./app.css"),t.PerfectScrollbar=r,n.exports="angular-perfect-scrollbar-2",i.module(n.exports,[]).directive("perfectScrollbar",["$parse",function(e){return{restrict:"EA",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function(t,i,o){var a=e(o.opts)(t),s=i[0];r.initialize(s,a),obs_opts={childList:!0,subtree:!0,characterData:!0},"function"==typeof MutationObserver?(obs=new MutationObserver(function(){r.update(s)}),obs.observe(s,obs_opts)):console.warn(n.exports+": Your browser does not support MutationObserver."),t.$watch("update",function(e,n){e&&(r.update(s),t.update=!1)}),t.$on("destroy",function(){obs.disconnect(),r.destroy(s)})}}}])}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./app.css":1,"perfect-scrollbar":4}],3:[function(e,t,n){"use strict";t.exports={createLink:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");r.href=e,r.rel="stylesheet";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}n.appendChild(r)},createStyle:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}r.sheet?(r.innerHTML=e,r.sheet.cssText=e,n.appendChild(r)):r.styleSheet?(n.appendChild(r),r.styleSheet.cssText=e):(r.appendChild(document.createTextNode(e)),n.appendChild(r))}}},{}],4:[function(e,t,n){"use strict";t.exports=e("./src/js/main")},{"./src/js/main":10}],5:[function(e,t,n){"use strict";function r(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function i(e,t){var n=e.className.split(" "),r=n.indexOf(t);r>=0&&n.splice(r,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):r(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):i(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],6:[function(e,t,n){"use strict";function r(e,t){return window.getComputedStyle(e)[t]}function i(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function o(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}var a={};a.e=function(e,t){var n=document.createElement(e);return n.className=t,n},a.appendTo=function(e,t){return t.appendChild(e),e},a.css=function(e,t,n){return"object"==typeof t?o(e,t):"undefined"==typeof n?r(e,t):i(e,t,n)},a.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},a.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},a.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return a.matches(e,t)})},t.exports=a},{}],7:[function(e,t,n){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},t.exports=i},{}],8:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],9:[function(e,t,n){"use strict";var r=e("./class"),i=e("./dom"),o=n.toInt=function(e){return parseInt(e,10)||0},a=n.clone=function(e){if(null===e)return null;if(e.constructor===Array)return e.map(a);if("object"==typeof e){var t={};for(var n in e)t[n]=a(e[n]);return t}return e};n.extend=function(e,t){var n=a(e);for(var r in t)n[r]=a(t[r]);return n},n.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=r.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&r.remove(e,i)}},n.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){r.add(e,"ps-in-scrolling"),"undefined"!=typeof t?r.add(e,"ps-"+t):(r.add(e,"ps-x"),r.add(e,"ps-y"))},n.stopScrolling=function(e,t){r.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?r.remove(e,"ps-"+t):(r.remove(e,"ps-x"),r.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":5,"./dom":6}],10:[function(e,t,n){"use strict";var r=e("./plugin/destroy"),i=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:i,update:o,destroy:r}},{"./plugin/destroy":12,"./plugin/initialize":20,"./plugin/update":24}],11:[function(e,t,n){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],12:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances");t.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},{"../lib/dom":6,"../lib/helper":9,"./instances":21}],13:[function(e,t,n){"use strict";function r(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",function(r){var o=i.toInt(t.scrollbarYHeight/2),c=t.railYRatio*(r.pageY-window.pageYOffset-n(t.scrollbarYRail).top-o),u=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),l=c/u;l<0?l=0:l>1&&(l=1),s(e,"top",(t.contentHeight-t.containerHeight)*l),a(e),r.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",function(r){var o=i.toInt(t.scrollbarXWidth/2),c=t.railXRatio*(r.pageX-window.pageXOffset-n(t.scrollbarXRail).left-o),u=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),l=c/u;l<0?l=0:l>1&&(l=1),s(e,"left",(t.contentWidth-t.containerWidth)*l-t.negativeScrollAdjustment),a(e),r.stopPropagation()})}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);r(e,t)}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],14:[function(e,t,n){"use strict";function r(e,t){function n(n){var i=r+n*t.railXRatio,a=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);i<0?t.scrollbarXLeft=0:i>a?t.scrollbarXLeft=a:t.scrollbarXLeft=i;var s=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;u(e,"left",s)}var r=null,i=null,s=function(t){n(t.pageX-i),c(e),t.stopPropagation(),t.preventDefault()},l=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(n){i=n.pageX,r=o.toInt(a.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",l),n.stopPropagation(),n.preventDefault()})}function i(e,t){function n(n){var i=r+n*t.railYRatio,a=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);i<0?t.scrollbarYTop=0:i>a?t.scrollbarYTop=a:t.scrollbarYTop=i;var s=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));u(e,"top",s)}var r=null,i=null,s=function(t){n(t.pageY-i),c(e),t.stopPropagation(),t.preventDefault()},l=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(n){i=n.pageY,r=o.toInt(a.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",l),n.stopPropagation(),n.preventDefault()})}var o=e("../../lib/helper"),a=e("../../lib/dom"),s=e("../instances"),c=e("../update-geometry"),u=e("../update-scroll");t.exports=function(e){var t=s.get(e);r(e,t),i(e,t)}},{"../../lib/dom":6,"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],15:[function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var r=!1;t.event.bind(e,"mouseenter",function(){r=!0}),t.event.bind(e,"mouseleave",function(){r=!1});var a=!1;t.event.bind(t.ownerDocument,"keydown",function(u){if(!u.isDefaultPrevented||!u.isDefaultPrevented()){var l=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(r||l){var f=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(f){if("IFRAME"===f.tagName)f=f.contentDocument.activeElement;else for(;f.shadowRoot;)f=f.shadowRoot.activeElement;if(i.isEditable(f))return}var p=0,d=0;switch(u.which){case 37:p=-30;break;case 38:d=30;break;case 39:p=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:d=u.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=u.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=u.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}c(e,"top",e.scrollTop-d),c(e,"left",e.scrollLeft+p),s(e),a=n(p,d),a&&u.preventDefault()}}})}var i=e("../../lib/helper"),o=e("../../lib/dom"),a=e("../instances"),s=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);r(e,t)}},{"../../lib/dom":6,"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],16:[function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function r(e){var t=e.deltaX,n=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),[t,n]}function i(t,n){var r=e.querySelector("textarea:hover, .ps-child:hover");if(r){if("TEXTAREA"!==r.tagName&&!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var i=r.scrollHeight-r.clientHeight;if(i>0&&!(0===r.scrollTop&&n>0||r.scrollTop===i&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1}function s(s){var u=r(s),l=u[0],f=u[1];i(l,f)||(c=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(f?a(e,"top",e.scrollTop-f*t.settings.wheelSpeed):a(e,"top",e.scrollTop+l*t.settings.wheelSpeed),c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?a(e,"left",e.scrollLeft+l*t.settings.wheelSpeed):a(e,"left",e.scrollLeft-f*t.settings.wheelSpeed),c=!0):(a(e,"top",e.scrollTop-f*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+l*t.settings.wheelSpeed)),o(e),c=c||n(l,f),c&&(s.stopPropagation(),s.preventDefault()))}var c=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",s):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var i=e("../instances"),o=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=i.get(e);r(e,t)}},{"../instances":21,"../update-geometry":22,"../update-scroll":23}],17:[function(e,t,n){"use strict";function r(e,t){t.event.bind(e,"scroll",function(){o(e)})}var i=e("../instances"),o=e("../update-geometry");t.exports=function(e){var t=i.get(e);r(e,t)}},{"../instances":21,"../update-geometry":22}],18:[function(e,t,n){"use strict";function r(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function r(){u||(u=setInterval(function(){return o.get(e)?(s(e,"top",e.scrollTop+l.top),s(e,"left",e.scrollLeft+l.left),void a(e)):void clearInterval(u)},50))}function c(){u&&(clearInterval(u),u=null),i.stopScrolling(e)}var u=null,l={top:0,left:0},f=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?f=!0:(f=!1,c())}),t.event.bind(window,"mouseup",function(){f&&(f=!1,c())}),t.event.bind(window,"mousemove",function(t){if(f){var n={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<o.left+3?(l.left=-5,i.startScrolling(e,"x")):n.x>o.right-3?(l.left=5,i.startScrolling(e,"x")):l.left=0,n.y<o.top+3?(o.top+3-n.y<5?l.top=-5:l.top=-20,i.startScrolling(e,"y")):n.y>o.bottom-3?(n.y-o.bottom+3<5?l.top=5:l.top=20,i.startScrolling(e,"y")):l.top=0,0===l.top&&0===l.left?c():r()}})}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);r(e,t)}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],19:[function(e,t,n){"use strict";function r(e,t,n,r){function i(n,r){var i=e.scrollTop,o=e.scrollLeft,a=Math.abs(n),s=Math.abs(r);if(s>a){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(a>s&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}function c(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),a(e)}function u(){S=!0}function l(){S=!1}function f(e){return e.targetTouches?e.targetTouches[0]:e}function p(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function d(e){if(p(e)){_=!0;var t=f(e);g.pageX=t.pageX,g.pageY=t.pageY,y=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function h(e){if(!_&&t.settings.swipePropagation&&d(e),!S&&_&&p(e)){var n=f(e),r={pageX:n.pageX,pageY:n.pageY},o=r.pageX-g.pageX,a=r.pageY-g.pageY;c(o,a),g=r;var s=(new Date).getTime(),u=s-y;u>0&&(v.x=o/u,v.y=a/u,y=s),i(o,a)&&(e.stopPropagation(),e.preventDefault())}}function m(){!S&&_&&(_=!1,clearInterval(b),b=setInterval(function(){return o.get(e)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(b):(c(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(b)},10))}var g={},y=0,v={},b=null,S=!1,_=!1;n&&(t.event.bind(window,"touchstart",u),t.event.bind(window,"touchend",l),t.event.bind(e,"touchstart",d),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",m)),r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",u),t.event.bind(window,"pointerup",l),t.event.bind(e,"pointerdown",d),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",u),t.event.bind(window,"MSPointerUp",l),t.event.bind(e,"MSPointerDown",d),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",m)))}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){var t=o.get(e);r(e,t,i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],20:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/class"),o=e("./instances"),a=e("./update-geometry"),s={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},c=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=o.add(e);n.settings=r.extend(n.settings,t),i.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){s[t](e)}),c(e),a(e)}},{"../lib/class":5,"../lib/helper":9,"./handler/click-rail":13,"./handler/drag-scrollbar":14,"./handler/keyboard":15,"./handler/mouse-wheel":16,"./handler/native-scroll":17,"./handler/selection":18,"./handler/touch":19,"./instances":21,"./update-geometry":22}],21:[function(e,t,n){"use strict";function r(e){function t(){c.add(e,"ps-focus")}function n(){c.remove(e,"ps-focus")}var r=this;r.settings=s.clone(u),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===l.css(e,"direction"),r.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),r.negativeScrollAdjustment=r.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.event=new f,r.ownerDocument=e.ownerDocument||document,r.scrollbarXRail=l.appendTo(l.e("div","ps-scrollbar-x-rail"),e),r.scrollbarX=l.appendTo(l.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",t),r.event.bind(r.scrollbarX,"blur",n),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=s.toInt(l.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom===r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:s.toInt(l.css(r.scrollbarXRail,"top")),r.railBorderXWidth=s.toInt(l.css(r.scrollbarXRail,"borderLeftWidth"))+s.toInt(l.css(r.scrollbarXRail,"borderRightWidth")),l.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=s.toInt(l.css(r.scrollbarXRail,"marginLeft"))+s.toInt(l.css(r.scrollbarXRail,"marginRight")),l.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=l.appendTo(l.e("div","ps-scrollbar-y-rail"),e),r.scrollbarY=l.appendTo(l.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",t),r.event.bind(r.scrollbarY,"blur",n),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=s.toInt(l.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight===r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:s.toInt(l.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?s.outerWidth(r.scrollbarY):null,r.railBorderYWidth=s.toInt(l.css(r.scrollbarYRail,"borderTopWidth"))+s.toInt(l.css(r.scrollbarYRail,"borderBottomWidth")),l.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=s.toInt(l.css(r.scrollbarYRail,"marginTop"))+s.toInt(l.css(r.scrollbarYRail,"marginBottom")),l.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function i(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function a(e){e.removeAttribute("data-ps-id")}var s=e("../lib/helper"),c=e("../lib/class"),u=e("./default-setting"),l=e("../lib/dom"),f=e("../lib/event-manager"),p=e("../lib/guid"),d={};n.add=function(e){var t=p();return o(e,t),d[t]=new r(e),d[t]},n.remove=function(e){delete d[i(e)],a(e)},n.get=function(e){return d[i(e)]}},{"../lib/class":5,"../lib/dom":6,"../lib/event-manager":7,"../lib/guid":8,"../lib/helper":9,"./default-setting":11}],22:[function(e,t,n){"use strict";function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,r),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=e("../lib/helper"),a=e("../lib/class"),s=e("../lib/dom"),c=e("./instances"),u=e("./update-scroll");t.exports=function(e){var t=c.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=s.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=s.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=r(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=r(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?a.add(e,"ps-active-x"):(a.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,u(e,"left",0)),t.scrollbarYActive?a.add(e,"ps-active-y"):(a.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,u(e,"top",0))}},{"../lib/class":5,"../lib/dom":6,"../lib/helper":9,"./instances":21,"./update-scroll":23}],23:[function(e,t,n){"use strict";var r,i,o=e("./instances"),a=document.createEvent("Event"),s=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),l=document.createEvent("Event"),f=document.createEvent("Event"),p=document.createEvent("Event"),d=document.createEvent("Event"),h=document.createEvent("Event"),m=document.createEvent("Event");a.initEvent("ps-scroll-up",!0,!0),s.initEvent("ps-scroll-down",!0,!0),c.initEvent("ps-scroll-left",!0,!0),u.initEvent("ps-scroll-right",!0,!0),l.initEvent("ps-scroll-y",!0,!0),f.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),d.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),m.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(h)),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(p));var g=o.get(e);"top"===t&&n>=g.contentHeight-g.containerHeight&&(n=g.contentHeight-g.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(m)),"left"===t&&n>=g.contentWidth-g.containerWidth&&(n=g.contentWidth-g.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(d)),r||(r=e.scrollTop),
i||(i=e.scrollLeft),"top"===t&&n<r&&e.dispatchEvent(a),"top"===t&&n>r&&e.dispatchEvent(s),"left"===t&&n<i&&e.dispatchEvent(c),"left"===t&&n>i&&e.dispatchEvent(u),"top"===t&&(e.scrollTop=r=n,e.dispatchEvent(l)),"left"===t&&(e.scrollLeft=i=n,e.dispatchEvent(f))}},{"./instances":21}],24:[function(e,t,n){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances"),a=e("./update-geometry"),s=e("./update-scroll");t.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),a(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":6,"../lib/helper":9,"./instances":21,"./update-geometry":22,"./update-scroll":23}]},{},[2])(2)})}).call(t,n(68))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s,c,u){u.resourceUrlWhitelist(["self",v.getAutocompleteUrl()+"**",v.getGoogWithProxy()+"**","https://almad-test-st01.ext.exlibrisgroup.com/**","https://na-test-st01.ext.exlibrisgroup.com/**","https://ap-test-st01.ext.exlibrisgroup.com/**","https://eu-test-st01.ext.exlibrisgroup.com/**","https://ca-test-st01.ext.exlibrisgroup.com/**","https://cn-test-st01.ext.exlibrisgroup.com/**","https://na-st01.ext.exlibrisgroup.com/**","https://ap-st01.ext.exlibrisgroup.com/**","https://eu-st01.ext.exlibrisgroup.com/**","https://ca-st01.ext.exlibrisgroup.com/**","https://cn-st01.ext.exlibrisgroup.com/**","https://na-impl-st01.ext.exlibrisgroup.com/**","https://ap-impl-st01.ext.exlibrisgroup.com/**","https://eu-impl-st01.ext.exlibrisgroup.com/**","https://ca-impl-st01.ext.exlibrisgroup.com/**"]),t.useApplyAsync(!0),e.debugInfoEnabled(!p.PRODUCTION_MODE),e.preAssignBindingsEnabled(!0),r.skipClickHijack(),j&&i.disableInkRipple(),n.html5Mode({enabled:!0,requireBase:!1});var l=o.extendPalette("indigo",{500:"#53738C"}),f=o.extendPalette("indigo",{A100:"#72B4BA",A200:"#72B4BA",A400:"#72B4BA",A700:"#72B4BA"});o.definePalette("primoExplore",l),o.definePalette("primoExploreAccent",f),o.theme("primoExplore").primaryPalette("primoExplore").accentPalette("primoExploreAccent"),o.setDefaultTheme("primoExplore"),b.getViewSvg()&&s.push({type:"svg",id:"customIcons",link:"https://www.google.com/design/icons",displayName:"Customized icons",sets:[{set:"custom-ui",file:b.getViewSvg(),size:24}]}),s.map(function(e){e.sets.map(function(e){a.iconSet(e.set,e.file,e.size)})})}function i(e,t,n,r,i,a,s,c,u,l,f,p,d,h,m,g){g.startSession(i.isGuest()),window.onpageshow=function(e){e.persisted&&window.location.reload()},f.formatDate=function(e){return p.convertDateTypeToFormatString(e,p.primoShortDateFormat)},f.parseDate=function(e){return p.convertDateStringToDate(e,p.primoShortDateFormat)},e.$on("$stateChangeStart",function(e,o,c,u,l){var f=i.getUserName();if("login"===o.name){if(f){var p=r.search().targetURL;if(p)t.location.assign(p);else{console.log("Error: no targetURL, redirect to home page"),e.preventDefault();var d=c.vid;d?n.go(T.STATE_NAMES.SEARCH,{vid:d}):console.log("Error: no vid, cannot redirect to home page")}}}else if("account"===o.name||o.name===T.STATE_NAMES.FAVORITES&&r.url().includes("section=queries")||o.name===T.STATE_NAMES.BLANK_ILL||o.name===T.STATE_NAMES.PURCHASE_REQUEST)if(f)r.search().fromLogin&&r.search("fromLogin",null);else if(e.preventDefault(),r.search().fromLogin){var h={vid:r.search().vid};r.search().authenticationError&&(h.authenticationError="1"),n.go(T.STATE_NAMES.SEARCH,h,{reload:!0})}else if(a.toState=o,a.toParams=c,i.prevTabDeeplink=r.absUrl(),u.name)a.callHandleLoginClickWithBeacon();else{var g=s.getJwtFromLocalStorage();g&&!i.isJWTValidForApp(g)?i.logout(!0):n.go("login",c)}else if("deposit"===o.name)if(f)r.search().fromLogin&&r.search("fromLogin",null);else if(e.preventDefault(),r.search().fromLogin)n.go(T.STATE_NAMES.SEARCH,{vid:r.search().vid},{reload:!0});else if(a.toState=o,a.toParams=c,i.prevTabDeeplink=r.absUrl(),u.name)a.callHandleLoginClickWithBeacon();else{var y=r.search().auth,b=(r.absUrl(),v.getInstitutionCode()),S="/deposit/login?institute="+b;void 0!==y&&(S+="&auth="+encodeURIComponent(y)),t.location.assign(S)}else if(o.name===T.STATE_NAMES.SEARCH){var _=c.query;_||m.removeItem("stickyFacets")}});var y=r.search().primoExploreJwt,b=r.search().loginId,S=!1;if(b){r.search("loginId",null);var _=new XMLHttpRequest,O=r.search().vid;O||r.path().includes("/delivery")&&(O=appConfig.vid),_.open("GET",d.loginJwtCache+"/"+b+"?vid="+O,!1),_.send(null),200===_.status?(y=_.responseText,y&&(S=!0)):y=null}y||(y=s.getJwtFromLocalStorage()),y&&i.isJWTValidForApp(y)?o(y,c,u,r,s,i,l,h,S):i.getGuestJwt().then(function(e){o(e,c,u,r,s,i,l,h,S)}),y&&!i.isGuest(y)||!r.search().authenticationError||!r.search().authenticationProfile||m.getItem("loggedInIDP")||(m.setItem("loggedInIDP","true"),m.setItem("authenticationProfile",r.search().authenticationProfile))}function o(e,t,n,r,i,o,a,s,c){e&&!o.isGuest(e)&&c&&(t.$localForage.keys().then(function(e){var t=e.indexOf("userDetails");if(t>-1&&e.splice(t,1),0===e.length)n.getFavoritesFromServer();else if(1===e.length)n.copyFavoritesRecordsThatWereSavedForGuest(e[0]),n.changeSearchHistorylocalForageKey(e[0]);else{var r=e.filter(function(e){if(e.indexOf("anonymous-")!=-1)return e}),i=r.map(function(e){return e.replace("anonymous-","").replace("_","")}),o=i.sort(function(e,t){return t-e}),a="anonymous-"+o[0].substring(0,4)+"_"+o[0].substring(4,10);n.copyFavoritesRecordsThatWereSavedForGuest(a),n.changeSearchHistorylocalForageKey(a)}}),r.search("primoExploreJwt",null),r.search("authenticationProfile",null),r.search("from-new-ui",null),s.promise=s.updatePersonalization(v.getVid())),o.login(e),a.trackInitialPage()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=n(41),c=n(43),u=n(841),l=n(10),f=n(187),p=n(850),d=n(6),h=n(0),m=n(7),g=n(44),y=n(402),v=n(1),b=n(89),S=n(856),_=n(38),O=n(4),T=n(4),E=n(19),w=n(865),I=n(17),R=n(46),P=n(37),j=E.isBrowserIE(),A=[s,w.default.name],C=[O.default.name,S.default.name,c.default.name,u.default.name,y.default.name],$=A.concat(C),D=a.module("primo-explore.config",$);t.default=D,D.constant("$MD_THEME_CSS",""),D.config(r).run(i),r.$inject=["$compileProvider","$httpProvider","$locationProvider","$mdGestureProvider","$mdInkRippleProvider","$mdThemingProvider","$mdIconProvider","iconSets","$ariaProvider","$sceDelegateProvider"],i.$inject=["$rootScope","$window","$state","$location",h.getInjectableName(l.UserSessionManagerService),h.getInjectableName(g.LoginService),h.getInjectableName(m.JwtUtilService),h.getInjectableName(I.StorageUtil),h.getInjectableName(f.UsernamePasswordLoginService),h.getInjectableName(d.PrimolyticsService),"$mdDateLocale",h.getInjectableName(_.DateUtils),"restBaseURLs",h.getInjectableName(R.PersonalizeResultsButtonService),h.getInjectableName(P.SharedSessionStorage),"SessionTimeoutService"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(842),i=n(5);t.default=i.module("primo-explore.infra",[r.default.name]),n(843),n(844),n(848),n(849)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),i=n(5);t.default=i.module("nddUtils",[r.default.name]),n(2),n(223),n(78),n(42),n(38)},function(e,t,n){"use strict";function r(e){return{restrict:"A",replace:!0,link:function(t,n,r){t.$watch(r.dynamicHtml,function(r){n.html(r),e(n.contents())(t)})}}}var i=n(5);i.module("primo-explore.infra").directive("dynamicHtml",r),r.$inject=["$compile"]},function(e,t,n){"use strict";function r(e,t,n,r,l,h,m,g,y,v,b){function S(){n.initOptionalProperties(e,y,{searchText:null,selectedItem:null}),l(t),E(),n.nextTick(function(){I(),O(),T(),t.on("focus",T)})}function _(){function r(){var e=0,n=t.find("md-input-container");if(n.length){var r=n.find("input");e=n.prop("offsetHeight"),e-=r.prop("offsetTop"),e-=r.prop("offsetHeight"),e+=n.prop("offsetTop")}return e}function i(){var e=Se.scrollContainer.getBoundingClientRect(),t={};e.right>c.right-p&&(t.left=a.right-e.width+"px"),Se.$.scrollContainer.css(t)}if(!Se)return n.nextTick(_,!1,e);var o,a=Se.wrap.getBoundingClientRect(),s=Se.snap.getBoundingClientRect(),c=Se.root.getBoundingClientRect(),u=s.bottom-c.top,l=c.bottom-s.top,h=a.left-c.left,m=a.width,g=r();y.mdFloatingLabel&&(h+=d,m-=2*d),o={left:h+"px",minWidth:m+"px",maxWidth:Math.max(a.right-c.left,c.right-a.left)-p+"px"},u>l&&c.height-a.bottom-p<f?(o.top="auto",o.bottom=l+"px",o.maxHeight=Math.min(f,a.top-c.top-p)+"px"):(o.top=u-g+"px",o.bottom="auto",o.maxHeight=Math.min(f,c.bottom+n.scrollTop()-a.bottom-p)+"px"),Se.$.scrollContainer.css(o),n.nextTick(i,!1)}function O(){Se.$.root.length&&(l(Se.$.scrollContainer),Se.$.scrollContainer.detach(),Se.$.root.append(Se.$.scrollContainer),m.pin&&m.pin(Se.$.scrollContainer,g))}function T(){e.autofocus&&Se.input.focus()}function E(){var t=parseInt(e.delay,10)||0;y.$observe("disabled",function(e){ye.isDisabled=n.parseAttributeBoolean(e,!1)}),y.$observe("required",function(e){ye.isRequired=n.parseAttributeBoolean(e,!1)}),y.$observe("readonly",function(e){ye.isReadonly=n.parseAttributeBoolean(e,!1)}),e.$watch("searchText",t?n.debounce(q,t):q),e.$watch("selectedItem",M),u.element(h).on("resize",_),e.$on("$destroy",w)}function w(){n.enableScrolling();var e=document.getElementsByTagName("body")[0];if(e.setAttribute("style","overflow-x: initial"),u.element(h).off("resize",_),Se){var t="ul scroller scrollContainer input".split(" ");u.forEach(t,function(e){Se.$[e].remove()})}}function I(){Se={main:t[0],scrollContainer:t[0].querySelector(".md-virtual-repeat-container"),scroller:t[0].querySelector(".md-virtual-repeat-scroller"),ul:t[0].querySelector("ul"),input:t[0].querySelector("input"),wrap:t[0].querySelector("md-autocomplete-wrap"),root:document.body},Se.li=Se.ul.getElementsByTagName("li"),Se.snap=R(),Se.$=P(Se)}function R(){for(var e=t;e.length;e=e.parent())if(u.isDefined(e.attr("md-autocomplete-snap")))return e[0];return Se.wrap}function P(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=u.element(e[n]));return t}function j(t,r){!t&&r?(_(),Se&&n.nextTick(function(){var e=(n.disableScrollAround(Se.ul),document.getElementsByClassName("md-scroll-mask")[0]);e.onclick=function(){},Re=A(u.element(Se.wrap))},!1,e)):t&&!r&&n.nextTick(function(){n.enableScrolling();var e=document.getElementsByTagName("body")[0];e.setAttribute("style","overflow-x: initial"),Re&&(Re(),Re=null)},!1,e)}function A(e){function t(e){e.preventDefault()}return e.on("wheel",t),e.on("touchmove",t),function(){e.off("wheel",t),e.off("touchmove",t)}}function C(){var e=i.getAttributesMap();return c&&e.displayVoiceSearch}function $(){Oe=!0}function D(){Ee||Se.input.focus(),Oe=!1,ye.hidden=X()}function L(){Se.input.focus()}function k(e){o.isBrowserIE()||13===e.which&&(ye.hidden=!0)}function M(t,n){t&&W(t).then(function(r){e.searchText=r,U(t,n)}),t!==n&&x()}function x(){u.isFunction(e.itemChange)&&e.itemChange(Q(e.selectedItem))}function F(){u.isFunction(e.textChange)&&e.textChange()}function U(e,t){Te.forEach(function(n){n(e,t)})}function B(e){Te.indexOf(e)==-1&&Te.push(e)}function N(e){var t=Te.indexOf(e);t!=-1&&Te.splice(t,1)}function q(t,n){ye.index=J(),t!==n&&W(e.selectedItem).then(function(r){t!==r&&(e.selectedItem=null,t!==n&&F(),ie()?me():(ye.matches=[],K(!1),ue()))})}function H(){Ee=!1,Oe||(ye.hidden=X())}function V(e){e&&(Oe=!1,Ee=!1),Se.input.blur()}function Y(){Ee=!0,u.isString(e.searchText)||(e.searchText=""),ye.hidden=X(),ye.hidden||me()}function z(t){switch(t.keyCode){case r.KEY_CODE.DOWN_ARROW:if(ye.loading)return;t.stopPropagation(),t.preventDefault();var n=ye.index[0],i=ye.index[1]+1;n<0&&(n=0);var o=!1;i>=ye.matches[n].length&&(i=0,n+=1,n===ye.matches.length&&(o=!0,n=-1,i=-1)),ye.index[0]=n,ye.index[1]=i,fe(),ue();break;case r.KEY_CODE.UP_ARROW:if(ye.loading)return;t.stopPropagation(),t.preventDefault();var a=ye.index[0],s=ye.index[1]-1;if(s<0){if(a-=1,a<0){var c=ye.matches.length;a=(a%c+c)%c}s=ye.matches[a].length-1}ye.index[0]=a,ye.index[1]=s,fe(),ue();break;case r.KEY_CODE.TAB:if(D(),ye.hidden||ye.loading||ye.index[0]<0||ye.matches.length<1)return;ae(ye.index);break;case r.KEY_CODE.ENTER:if(ye.hidden||ye.loading||ye.index[0]<0||ye.matches.length<1)return;if(te())return;t.stopPropagation(),t.preventDefault(),ae(ye.index);break;case r.KEY_CODE.ESCAPE:t.stopPropagation(),t.preventDefault(),e.searchText&&se(),V(!0)}}function G(){return u.isNumber(e.minLength)?e.minLength:1}function W(t,n){function r(t,n){var r=n&&t.displayName?" "+t.displayName:"";return t&&e.itemText?e.itemText(Q(t))+r:null}return v.when(r(t,n)||t)}function Q(e){if(e){var t={};return ye.itemName&&(t[ye.itemName]=e),t}}function J(){return e.autoselect?[0,0]:[-1,-1]}function K(e){ye.loading!=e&&(ye.loading=e),ye.hidden=X()}function X(){return!(!ye.loading||ee())||(!!te()||(!Ee||!Z()))}function Z(){return ie()&&ee()||he()}function ee(){return!!ye.matches.length}function te(){return!!ye.scope.selectedItem}function ne(){return ye.loading&&!te()}function re(e){return ye.index[0]===-1?W(null):W(ye.matches[ye.index[0]][ye.index[1]],e)}function ie(){return(e.searchText||"").length>=G()}function oe(e,t,n){Object.defineProperty(ye,e,{get:function(){return n},set:function(e){var r=n;n=e,t(e,r)}})}function ae(t){n.nextTick(function(){W(ye.matches[t[0]][t[1]]).then(function(e){var t=Se.$.input.controller("ngModel");t.$setViewValue(e),t.$render()}).finally(function(){e.selectedItem=ye.matches[t[0]][t[1]],K(!1)})},!1)}function se(){K(!0),ye.index=[0,0],ye.matches=[],e.searchText="";var t=document.createEvent("CustomEvent");t.initCustomEvent("input",!0,!0,{value:e.searchText}),Se.input.dispatchEvent(t),document.querySelector("#searchBar").focus()}function ce(t){function r(t){t&&(t=v.when(t),Ie++,K(!0),n.nextTick(function(){t.then(i).finally(function(){0===--Ie&&K(!1)})},!0,e))}function i(n){_e[a]=n,(t||"")===(e.searchText||"")&&(ye.matches=n,ye.hidden=X(),ye.loading&&K(!1),e.selectOnMatch&&ge(),ue(),_())}var o=e.$parent.$eval(be),a=t.toLowerCase(),s=u.isArray(o),c=!!o.then;s?i(o):c&&r(o)}function ue(){re(!0).then(function(e){ye.messages=[le(),e]})}function le(){if(we===ye.matches.length)return"";switch(we=ye.matches.length,ye.matches.length){case 0:return b.instant("nui.autocomplete.noMatch");case 1:return b.instant("nui.autocomplete.oneMatch");default:return b.instant("nui.autocomplete.manyMatches",{idx_1:ye.matches.length})}}function fe(){if(Se.li[0]){var e=a(s(ye.matches,ye.index[0]),function(e){return e.length})+ye.index[1],t=Se.li[0].offsetHeight,n=t*e,r=n+t,i=Se.scroller.clientHeight,o=Se.scroller.scrollTop;n<o?de(n):r>o+i&&de(r-i)}}function pe(){return 0!==Ie}function de(e){Se.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(e)}function he(){var e=(ye.scope.searchText||"").length;return ye.hasNotFound&&!ee()&&(!ye.loading||pe())&&e>=G()&&(Ee||Oe)&&!te()}function me(){var t=e.searchText||"",n=t.toLowerCase();!e.noCache&&_e[n]?(ye.matches=_e[n],ue()):ce(t),ye.hidden=X()}function ge(){var t=e.searchText,n=ye.matches,r=n[0];1===n.length&&W(r).then(function(n){var r=t==n;e.matchInsensitive&&!r&&(r=t.toLowerCase()==n.toLowerCase()),r&&ae(0)})}var ye=this,ve=e.itemsExpr.split(/ in /i),be=ve[1],Se=null,_e={},Oe=!1,Te=[],Ee=!1,we=0,Ie=0,Re=null;return oe("hidden",j,!0),ye.scope=e,ye.parent=e.$parent,ye.itemName=ve[0],ye.matches=[],ye.loading=!1,ye.hidden=!0,ye.index=null,ye.messages=[],ye.id=n.nextUid(),ye.isDisabled=null,ye.isRequired=null,ye.isReadonly=null,ye.hasNotFound=!1,ye.keydown=z,ye.blur=H,ye.focus=Y,ye.clear=se,ye.select=ae,ye.listEnter=$,ye.listLeave=D,ye.mouseUp=L,ye.getCurrentDisplayValue=re,ye.registerSelectedItemWatcher=B,ye.unregisterSelectedItemWatcher=N,ye.notFoundVisible=he,ye.loadingIsVisible=ne,ye.showVoiceSearchButton=C,ye.onEnterKeyPress=k,S()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(19),a=n(845),s=n(847),c=n(184),u=n(5);u.module("primo-explore.infra").controller("PrmAutocompleteCtrl",r);var l=41,f=5.5*l,p=8,d=2;r.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q","$translate"]},function(e,t,n){function r(e,t){return e&&e.length?o(e,i(t,2)):0}var i=n(36),o=n(846);e.exports=r},function(e,t){function n(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}e.exports=n},function(e,t,n){function r(e,t,n){return e&&e.length?(t=n||void 0===t?1:o(t),i(e,0,t<0?0:t)):[]}var i=n(105),o=n(76);e.exports=r},function(e,t,n){function r(){return{controller:"PrmAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",clearText:"@clear",searchField:"@searchField",noCache:"=?mdNoCache",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",inputId:"@?mdInputId"},link:function(e,t,n,r){r.hasNotFound=!!t.attr("md-has-not-found")},template:function(e,t){function n(){var t=e.find("md-item-template").detach(),n=t.length?t.html():e.html();return t.length||e.empty(),"<md-autocomplete-parent-scope md-autocomplete-replace>"+n+"</md-autocomplete-parent-scope>"}function r(){var t=e.find("md-not-found").detach(),n=t.length?t.html():"";return n?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+n+"</li>":""}function i(){return t.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  '+(null!=c?'tabindex="'+c+'"':"")+'                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="$mdAutocompleteCtrl.isRequired"                  ng-readonly="$mdAutocompleteCtrl.isReadonly"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  '+(null!=t.mdNoAsterisk?'md-no-asterisk="'+t.mdNoAsterisk+'"':"")+'                  ng-focus="$mdAutocompleteCtrl.focus()"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  role="combobox"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+s+"</div>            </md-input-container>":'            <input flex type="search"                '+(null!=c?'tabindex="'+c+'"':"")+'                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus()"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                aria-autocomplete="list"                role="combobox"                aria-haspopup="true"                aria-activedescendant=""                aria-label="{{searchField}}"                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="0"                aria-label="{{clearText}}"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear()"                class="md-button md-icon-button"                ng-class="{\'clear-with-voice-search\': $mdAutocompleteCtrl.showVoiceSearchButton()}">              <prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon>              <span class="_md-visually-hidden">Clear</span>            </button>                '}var o=r(),a=n(),s=e.html(),c=t.tabindex;return o&&e.attr("md-has-not-found",!0),e.attr("tabindex","-1"),'        <md-autocomplete-wrap            layout="row"            ng-keypress="$mdAutocompleteCtrl.onEnterKeyPress($event)"            ng-class="{ \'md-whiteframe-z1\': !floatingLabel, \'md-menu-showing\': !$mdAutocompleteCtrl.hidden }">          '+i()+'          <md-progress-linear              class="'+(t.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          <md-virtual-repeat-container              id="prm-simple-search"              md-auto-shrink              md-auto-shrink-min="1"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-autocomplete-suggestions-container md-whiteframe-z1"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">           <ul class="md-autocomplete-suggestions"      ng-class="::menuClass"      id="ul-{{$mdAutocompleteCtrl.id}}">          <div ng-repeat="group in $mdAutocompleteCtrl.matches" ng-init="outerIndex = $index">          <li ng-repeat="item in group"      ng-class="{ selected: ((outerIndex === $mdAutocompleteCtrl.index[0]) && ($index === $mdAutocompleteCtrl.index[1])) }"      ng-click="$mdAutocompleteCtrl.select([outerIndex,$index])"      md-extra-name="$mdAutocompleteCtrl.itemName">'+a+'</li><md-divider ng-if="!$last"></md-divider></div>'+o+'          </ul>          </md-virtual-repeat-container>        </md-autocomplete-wrap>        <aria-status            class="_md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages track by $index" ng-if="message">{{message}}</p>        </aria-status>'}}}var i=n(5);i.module("primo-explore.infra").directive("prmAutocomplete",r)},function(e,t,n){"use strict";function r(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){function i(){r.$setViewValue(t.html())}r.$render=function(){t.html(r.$viewValue||"")},t.bind("blur keyup change",function(){e.$apply(i)})}}}var i=n(5);i.module("primo-explore.infra").directive("contenteditable",r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRODUCTION_MODE=!0},function(e,t,n){n(852),e.exports="angular-jwt"},function(e,t){!function(){angular.module("angular-jwt",["angular-jwt.options","angular-jwt.interceptor","angular-jwt.jwt","angular-jwt.authManager"]),angular.module("angular-jwt.authManager",[]).provider("authManager",function(){this.$get=["$rootScope","$injector","$location","jwtHelper","jwtInterceptor","jwtOptions",function(e,t,n,r,i,o){function a(e){var n=null;return n=Array.isArray(e)?t.invoke(e,this,{options:null}):e()}function s(e){if(Array.isArray(e)||angular.isFunction(e))return t.invoke(e,h,{});throw new Error("unauthenticatedRedirector must be a function")}function c(){var e=a(h.tokenGetter);if(e)return!r.isTokenExpired(e)}function u(){e.isAuthenticated=!0}function l(){e.isAuthenticated=!1}function f(){e.$on("$locationChangeStart",function(){var t=a(h.tokenGetter);t&&(r.isTokenExpired(t)?e.$broadcast("tokenHasExpired",t):u())})}function p(){e.$on("unauthenticated",function(){s(h.unauthenticatedRedirector),l()})}function d(e,t){if(!t)return!1;var n=t.$$route?t.$$route:t.data;if(n&&n.requiresLogin===!0){var i=a(h.tokenGetter);i&&!r.isTokenExpired(i)||(e.preventDefault(),s(h.unauthenticatedRedirector))}}var h=o.getConfig();e.isAuthenticated=!1;var m=t.has("$state")?"$stateChangeStart":"$routeChangeStart";return e.$on(m,d),{authenticate:u,unauthenticate:l,getToken:function(){return a(h.tokenGetter)},redirect:function(){return s(h.unauthenticatedRedirector)},checkAuthOnRefresh:f,redirectWhenUnauthenticated:p,isAuthenticated:c}}]}),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.urlParam,this.authHeader,this.authPrefix,this.whiteListedDomains,this.tokenGetter;var e=this;this.$get=["$q","$injector","$rootScope","urlUtils","jwtOptions",function(t,n,r,i,o){function a(e){if(!i.isSameOrigin(e)&&!s.whiteListedDomains.length)throw new Error("As of v0.1.0, requests to domains other than the application's origin must be white listed. Use jwtOptionsProvider.config({ whiteListedDomains: [<domain>] }); to whitelist.");for(var t=i.urlResolve(e).hostname.toLowerCase(),n=0;n<s.whiteListedDomains.length;n++){var r=s.whiteListedDomains[n],o=r instanceof RegExp?r:new RegExp(r,"i");if(t.match(o))return!0}return!!i.isSameOrigin(e)}var s=angular.extend({},o.getConfig(),e);return{request:function(e){if(e.skipAuthorization||!a(e.url))return e;if(s.urlParam){if(e.params=e.params||{},e.params[s.urlParam])return e}else if(e.headers=e.headers||{},e.headers[s.authHeader])return e;var r=t.when(n.invoke(s.tokenGetter,this,{options:e}));return r.then(function(t){return t&&(s.urlParam?e.params[s.urlParam]=t:e.headers[s.authHeader]=s.authPrefix+t),e})},responseError:function(e){return 401===e.status&&r.$broadcast("unauthenticated",e),t.reject(e)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",["$window",function(e){this.urlBase64Decode=function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}return e.decodeURIComponent(escape(e.atob(n)))},this.decodeToken=function(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var n=this.urlBase64Decode(t[1]);if(!n)throw new Error("Cannot decode the token");return angular.fromJson(n)},this.getTokenExpirationDate=function(e){var t=this.decodeToken(e);if("undefined"==typeof t.exp)return null;var n=new Date(0);return n.setUTCSeconds(t.exp),n},this.isTokenExpired=function(e,t){var n=this.getTokenExpirationDate(e);return t=t||0,null!==n&&!(n.valueOf()>(new Date).valueOf()+1e3*t)}}]),angular.module("angular-jwt.options",[]).provider("jwtOptions",function(){var e={};this.config=function(t){e=t},this.$get=function(){function t(){this.config=angular.extend({},n,e)}var n={urlParam:null,authHeader:"Authorization",authPrefix:"Bearer ",whiteListedDomains:[],tokenGetter:function(){return null},loginPath:"/",unauthenticatedRedirectPath:"/",unauthenticatedRedirector:["$location",function(e){e.path(this.unauthenticatedRedirectPath)}]};return t.prototype.getConfig=function(){return this.config},new t}}),angular.module("angular-jwt.interceptor").service("urlUtils",function(){function e(e){var t=e;return n.setAttribute("href",t),t=n.href,n.setAttribute("href",t),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}function t(t){var n=angular.isString(t)?e(t):t;return n.protocol===r.protocol&&n.host===r.host}var n=document.createElement("a"),r=e(window.location.href);return{urlResolve:e,isSameOrigin:t}})}()},function(e,t,n){n(854),e.exports="ngIdle"},function(e,t){!function(e,t,n){"use strict";t.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),t.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var e={http:null,interval:600};this.http=function(n){if(!n)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");t.isString(n)&&(n={url:n,method:"GET"}),n.cache=!1,e.http=n};var n=this.interval=function(t){if(t=parseInt(t),isNaN(t)||t<=0)throw new Error("Interval must be expressed in seconds and be greater than 0.");e.interval=t};this.$get=["$rootScope","$log","$interval","$http",function(r,i,o,a){function s(e){r.$broadcast("KeepaliveResponse",e.data,e.status)}function c(){r.$broadcast("Keepalive"),t.isObject(e.http)&&a(e.http).then(s).catch(s)}var u={ping:null};return{_options:function(){return e},setInterval:n,start:function(){return o.cancel(u.ping),u.ping=o(c,1e3*e.interval),u.ping},stop:function(){o.cancel(u.ping)},ping:function(){c()}}}]}),t.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var e={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",windowInterrupt:null,keepalive:!0},n=this.timeout=function(n){if(n===!1)e.timeout=0;else{if(!(t.isNumber(n)&&n>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");e.timeout=n}};this.interrupt=function(t){e.interrupt=t},this.windowInterrupt=function(t){e.windowInterrupt=t};var r=this.idle=function(t){if(t<=0)throw new Error("Idle must be a value in seconds, greater than 0.");e.idle=t};this.autoResume=function(t){t===!0?e.autoResume="idle":t===!1?e.autoResume="off":e.autoResume=t},this.keepalive=function(t){e.keepalive=t===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(i,o,a,s,c,u,l){function f(){e.keepalive&&(S.running&&c.ping(),c.start())}function p(){e.keepalive&&c.stop()}function d(){S.idling=!S.idling;var t=S.idling?"IdleStart":"IdleEnd";S.idling?(a.$broadcast(t),p(),e.timeout&&(S.countdown=e.timeout,h(),S.timeout=i(h,1e3,e.timeout,!1))):(f(),a.$broadcast(t)),i.cancel(S.idle)}function h(){if(S.idling){if(S.countdown<=0)return void g();a.$broadcast("IdleWarn",S.countdown),S.countdown--}}function m(e){a.$broadcast("IdleInterrupt",e)}function g(){p(),i.cancel(S.idle),i.cancel(S.timeout),S.idling=!0,S.running=!1,S.countdown=0,a.$broadcast("IdleTimeout")}function y(e,t,n){var r=e.running();e.unwatch(),t(n),r&&e.watch()}function v(){var e=u.get("expiry");return e&&e.time?new Date(e.time):null}function b(e){e?u.set("expiry",{id:_,time:e}):u.remove("expiry")}var S={idle:null,timeout:null,idling:!1,running:!1,countdown:null},_=(new Date).getTime(),O={_options:function(){return e},_getNow:function(){return new Date},getIdle:function(){return e.idle},getTimeout:function(){return e.timeout},setIdle:function(e){y(this,r,e)},setTimeout:function(e){y(this,n,e)},isExpired:function(){var e=v();return null!==e&&e<=this._getNow()},running:function(){return S.running},idling:function(){return S.idling},watch:function(t){i.cancel(S.idle),i.cancel(S.timeout);var n=e.timeout?e.timeout:0;t||b(new Date((new Date).getTime()+1e3*(e.idle+n))),S.idling?d():S.running||f(),S.running=!0,S.idle=i(d,1e3*e.idle,0,!1)},unwatch:function(){i.cancel(S.idle),
i.cancel(S.timeout),S.idling=!1,S.running=!1,b(null),p()},interrupt:function(t){if(S.running){if(e.timeout&&this.isExpired())return void g();m(t),(t||"idle"===e.autoResume||"notIdle"===e.autoResume&&!S.idling)&&this.watch(t)}}},T={clientX:null,clientY:null,swap:function(e){var t={clientX:this.clientX,clientY:this.clientY};return this.clientX=e.clientX,this.clientY=e.clientY,t},hasMoved:function(e){var t=this.swap(e);return!(null!==this.clientX&&!e.movementX&&!e.movementY)||(t.clientX!=e.clientX||t.clientY!=e.clientY)}};if(s.find("html").on(e.interrupt,function(e){"mousemove"===e.type&&e.originalEvent&&0===e.originalEvent.movementX&&0===e.originalEvent.movementY||("mousemove"!==e.type||T.hasMoved(e))&&O.interrupt()}),e.windowInterrupt)for(var E=e.windowInterrupt.split(" "),w=function(){O.interrupt()},I=0;I<E.length;I++)l.addEventListener?l.addEventListener(E[I],w,!1):l.attachEvent(E[I],w);var R=function(e){if("ngIdle.expiry"===e.key&&e.newValue&&e.newValue!==e.oldValue){var n=t.fromJson(e.newValue);if(n.id===_)return;O.interrupt(!0)}};return l.addEventListener?l.addEventListener("storage",R,!1):l.attachEvent&&l.attachEvent("onstorage",R),O}]}),t.module("ngIdle.countdown",["ngIdle.idle"]).directive("idleCountdown",["Idle",function(e){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(t){t.value=e.getTimeout(),t.$on("IdleWarn",function(e,n){t.$evalAsync(function(){t.value=n})}),t.$on("IdleTimeout",function(){t.$evalAsync(function(){t.value=0})})}}}]),t.module("ngIdle.title",[]).provider("Title",function(){function e(e,t,n){return new Array(t-String(e).length+1).join(n||"0")+e}var n={enabled:!0},r=this.enabled=function(e){n.enabled=e===!0};this.$get=["$document","$interpolate",function(i,o){var a={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{setEnabled:r,isEnabled:function(){return n.enabled},original:function(e){return t.isUndefined(e)?a.original:void(a.original=e)},store:function(e){!e&&a.original||(a.original=this.value())},value:function(e){return t.isUndefined(e)?i[0].title:void(i[0].title=e)},idleMessage:function(e){return t.isUndefined(e)?a.idle:void(a.idle=e)},timedOutMessage:function(e){return t.isUndefined(e)?a.timedout:void(a.timedout=e)},setAsIdle:function(t){this.store();var n={totalSeconds:t};n.minutes=Math.floor(t/60),n.seconds=e(t-60*n.minutes,2),this.value(o(this.idleMessage())(n))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]}).directive("title",["Title",function(e){return{restrict:"E",link:function(t,n,r){e.isEnabled()&&!r.idleDisabled&&(e.store(!0),t.$on("IdleStart",function(){e.original(n[0].innerText)}),t.$on("IdleWarn",function(t,n){e.setAsIdle(n)}),t.$on("IdleEnd",function(){e.restore()}),t.$on("IdleTimeout",function(){e.setAsTimedOut()}))}}}]),t.module("ngIdle.localStorage",[]).service("IdleStorageAccessor",["$window",function(e){return{get:function(){return e.localStorage}}}]).service("IdleLocalStorage",["IdleStorageAccessor",function(e){function r(){var e={};this.setItem=function(t,n){e[t]=n},this.getItem=function(t){return"undefined"!=typeof e[t]?e[t]:null},this.removeItem=function(t){e[t]=n}}function i(){try{var t=e.get();return t.setItem("ngIdleStorage",""),t.removeItem("ngIdleStorage"),t}catch(e){return new r}}var o=i();return{set:function(e,n){o.setItem("ngIdle."+e,t.toJson(n))},get:function(e){return t.fromJson(o.getItem("ngIdle."+e))},remove:function(e){o.removeItem("ngIdle."+e)},_wrapped:function(){return o}}}])}(window,window.angular)},function(e,t,n){"use strict";function r(e){function t(t){var n=i.getSessionTimeoutParams();if(!t){if("suprima"!==i.getBackendSystem())return void e.unwatch();var r=60*n.userSessionTimeout;return void(r&&r>0&&(e.setIdle(r),e.watch()))}var o=60*(t?n.guestSessionTimeout:n.userSessionTimeout);o&&o>0?(e.setIdle(o),e.watch()):e.unwatch()}function n(){return e.isExpired()}function r(t){e.setIdle(t)}var o={isSessionExpired:n,startSession:t,updateSessionTimeoutTime:r};return o}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(5);o.module("primo-explore.security").factory("SessionTimeoutService",r),r.$inject=["Idle","$state"]},function(e,t,n){"use strict";function r(e,t,n){var r=s.getAttributesMap();window.uiLangPrefetch&&window.prefetchLang&&t.translations(window.prefetchLang,window.uiLangPrefetch),t.useUrlLoader(e.translationsUrl+"/"+d.getVid());var i,a=o("lang",window.location.search);if(a){var c=r.interfaceLanguageOptions.split(",");i=c.indexOf(a)===-1?r.interfaceLanguage?r.interfaceLanguage:c[0]:a,r.interfaceLanguage=i,window.appConfig["primo-view"]["attributes-map"]=r}else i=r.interfaceLanguage;i&&t.preferredLanguage(i),t.useSanitizeValueStrategy("sanitizeParameters"),t.useMissingTranslationHandler("PrmMissingTranslationHandler"),n.localeLocationPattern("lib/i18n/angular-locale_{{locale}}.js")}function i(e,t,n,r){var i,o=s.getAttributesMap(),a=n.getDecodedToken();if("GUEST"!==a.userGroup&&""!==a.language&&a.language!==t.use())i=a.language;else if(r.search().lang){var c=r.search(),u=o.interfaceLanguageOptions.split(",");u.indexOf(c.lang)===-1&&(c.lang=o.interfaceLanguage?o.interfaceLanguage:u[0],r.search(c)),i=r.search().lang}else i="";i&&(e.setLanguage(i),e.setPageLanguage(i))}function o(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(857),s=n(1),c=n(861);n(862);var u=n(863),l=n(7),f=n(0),p=n(864),d=n(1),h=n(43),m=n(5);t.default=m.module("primo-explore.i18n",[h.default.name,c,u,a.default.name]).config(r).run(i).service("I18nService",p.I18n),r.$inject=["restBaseURLs","$translateProvider","tmhDynamicLocaleProvider"],i.$inject=["I18nService","$translate",f.getInjectableName(l.JwtUtilService),"$location"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.default=r.module("prmTranslate",[]),n(858),n(859),n(860)},function(e,t,n){!function(){"use strict";function e(e,t){var n="NOT_DEFINED";return function(r){var i=e.getMapping(r),o=r,a=r.lastIndexOf(".");a!==-1&&a!==r.length-1&&(o=r.substring(a+1),o=o.replace(/_/g," "),o=o.replace(/-/g," "));var s;return i||(s=e.getMapping(o),s!==n&&(e.setMapping(o,n),s=t.instant(o),s&&(e.setMapping(o,s),e.setMapping(r,s)))),i===n?(e.setMapping(o,o),e.setMapping(r,o),o):i||s||o}}var t=n(5);t.module("prmTranslate").factory("PrmMissingTranslationHandler",e),e.$inject=["PrmTranslationIdToCodeMapping","$translate"]}()},function(e,t,n){!function(){"use strict";function e(e,t){var n;return{setLocale:function(e){n=e},getInterpolationIdentifier:function(){return"custom"},interpolate:function(n,r){function i(e){var n=e.code;if(!("prefix"in e))return n;var r,i=e.prefix;if(r=i?i+"."+n:n,t.setMapping(r,n),e.tag){var o=Object.keys(e.tag)[0];return"<"+o+" "+e.tag[o].join(" ")+'" translate="'+r+'"></'+o+">"}return'<span class="'+e.cssClass+'" translate="'+r+'"> </span>'}function o(e,t){var n=r.placeholders[t],o=n.map(i).join(" ");return o}if(r=r||{},r.placeholders&&n.search(/\{(\d+)}/)>-1){var a=n.replace(/\{(\d+)}/g,o);return e(a)(r)}if(!n.includes("{{"))return n;try{return e(n)(r)}catch(e){return n}}}}var t=n(5);t.module("prmTranslate").factory("prmInterpolation",e),e.$inject=["$interpolate","PrmTranslationIdToCodeMapping"]}()},function(e,t,n){!function(){"use strict";function e(e){function t(t){return i[t+r+e.use()]}function n(t,n){i[t+r+e.use()]=n}var i={},o={getMapping:t,setMapping:n};return o}var t=n(5);t.module("prmTranslate").factory("PrmTranslationIdToCodeMapping",e);var r="###";e.$inject=["$translate"]}()},function(e,t,n){var r,i;!function(n,o){r=[],i=function(){return o()}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this,function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),r=function(){var r=e.preferredLanguage();angular.isString(r)?e.use(r):n.put(t,e.use())};r.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t)).catch(r):r():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(){"use strict";var e,t,n,r=null,i=!1,o=!1;n={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=a(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=u(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=u(e,a)),e},sce:function(e,t,n){return"text"===t?e=c(e):"params"===t&&"filter"!==n&&(e=u(e,a)),e},sceParameters:function(e,t){return"params"===t&&(e=u(e,c)),e}},n.escaped=n.escapeParameters,this.addStrategy=function(e,t){return n[e]=t,this},this.removeStrategy=function(e){return delete n[e],this},this.useStrategy=function(e){return i=!0,r=e,this},this.$get=["$injector","$log",function(a,s){var c={},u=function(e,t,r,i){return angular.forEach(i,function(i){if(angular.isFunction(i))e=i(e,t,r);else if(angular.isFunction(n[i]))e=n[i](e,t,r);else{if(!angular.isString(n[i]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'");if(!c[n[i]])try{c[n[i]]=a.get(n[i])}catch(e){throw c[n[i]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'")}e=c[n[i]](e,t,r)}}),e},l=function(){i||o||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0)};return a.has("$sanitize")&&(e=a.get("$sanitize")),a.has("$sce")&&(t=a.get("$sce")),{useStrategy:function(e){return function(t){e.useStrategy(t)}}(this),sanitize:function(e,t,n,i){if(r||l(),n||null===n||(n=r),!n)return e;i||(i="service");var o=angular.isArray(n)?n:[n];return u(e,t,i,o)}}}];var a=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},c=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},u=function(e,t,n){if(angular.isDate(e))return e;if(angular.isObject(e)){var r=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,function(e,i){angular.isFunction(e)||(r[i]=u(e,t,n))}),n.splice(-1,1),r}return angular.isNumber(e)?e:angular.isUndefined(e)||null===e?e:t(e)}}function n(e,t,n,r){"use strict";var i,o,a,s,c,u,l,f,p,d,h,m,g,y,v,b,S={},_=[],O=e,T=[],E="translate-cloak",w=!1,I=!1,R=".",P=!1,j=!1,A=0,C=!0,$="default",D={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return n.length>1?n[0].toLowerCase()+"-"+n[1].toUpperCase():t},"iso639-1":function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return n[0].toLowerCase()}},L="2.15.1",k=function(){if(angular.isFunction(r.getLocale))return r.getLocale();var e,n,i=t.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(i.languages))for(e=0;e<i.languages.length;e++)if(n=i.languages[e],n&&n.length)return n;for(e=0;e<o.length;e++)if(n=i[o[e]],n&&n.length)return n;return null};k.displayName="angular-translate/service: getFirstBrowserLanguage";var M=function(){var e=k()||"";return D[$]&&(e=D[$](e)),e};M.displayName="angular-translate/service: getLocale";var x=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F=function(){return this.toString().replace(/^\s+|\s+$/g,"")},U=function(e){if(e){for(var t=[],n=angular.lowercase(e),r=0,i=_.length;r<i;r++)t.push(angular.lowercase(_[r]));if(x(t,n)>-1)return e;if(o){var a;for(var s in o)if(o.hasOwnProperty(s)){var c=!1,u=Object.prototype.hasOwnProperty.call(o,s)&&angular.lowercase(s)===angular.lowercase(e);if("*"===s.slice(-1)&&(c=s.slice(0,-1)===e.slice(0,s.length-1)),(u||c)&&(a=o[s],x(t,angular.lowercase(a))>-1))return a}}var l=e.split("_");return l.length>1&&x(t,angular.lowercase(l[0]))>-1?l[0]:void 0}},B=function(e,t){if(!e&&!t)return S;if(e&&!t){if(angular.isString(e))return S[e]}else angular.isObject(S[e])||(S[e]={}),angular.extend(S[e],N(t));return this};this.translations=B,this.cloakClassName=function(e){return e?(E=e,this):E},this.nestedObjectDelimeter=function(e){return e?(R=e,this):R};var N=function(e,t,n,r){var i,o,a,s;t||(t=[]),n||(n={});for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s=e[i],angular.isObject(s)?N(s,t.concat(i),n,i):(o=t.length?""+t.join(R)+R+i:i,t.length&&i===r&&(a=""+t.join(R),n[a]="@:"+o),n[o]=s));return n};N.displayName="flatObject",this.addInterpolation=function(e){return T.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return d=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(q(e),this):i};var q=function(e){return e&&(i=e),i};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(g=e,this):g},this.translationNotFoundIndicatorRight=function(e){return e?(y=e,this):y},this.fallbackLanguage=function(e){return H(e),this};var H=function(e){return e?(angular.isString(e)?(s=!0,a=[e]):angular.isArray(e)&&(s=!1,a=e),angular.isString(i)&&x(a,i)<0&&a.push(i),this):s?a[0]:a};this.use=function(e){if(e){if(!S[e]&&!h)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return c=e,this}return c},this.resolveClientLocale=function(){return M()};var V=function(e){return e?(O=e,this):f?f+O:O};this.storageKey=V,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return h=e,m=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return l=e,this},this.storagePrefix=function(e){return e?(f=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return p=e,this},this.usePostCompiling=function(e){return w=!!e,this},this.forceAsyncReload=function(e){return I=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},$=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():M();return i=_.length?U(t)||t:t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(_=e,t&&(o=t),this):_},this.useLoaderCache=function(e){return e===!1?v=void 0:e===!0?v=!0:"undefined"==typeof e?v="$translationCache":e&&(v=e),this},this.directivePriority=function(e){return void 0===e?A:(A=e,this)},this.statefulFilter=function(e){return void 0===e?C:(C=e,this)},this.postProcess=function(e){return b=e?e:void 0,this},this.keepContent=function(e){return j=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,r){var o,f,$,D=t.get(d||"$translateDefaultInterpolation"),k=!1,Y={},z={},G=function(e,t,n,s,u){!c&&i&&(c=i);var p=u&&u!==c?U(u)||u:c;if(u&&le(u),angular.isArray(e)){var d=function(e){for(var i={},o=[],a=function(e){var o=r.defer(),a=function(t){i[e]=t,o.resolve([e,t])};return G(e,t,n,s,u).then(a,a),o.promise},c=0,l=e.length;c<l;c++)o.push(a(e[c]));return r.all(o).then(function(){return i})};return d(e)}var h=r.defer();e&&(e=F.apply(e));var m=function(){var e=i?z[i]:z[p];if(f=0,l&&!e){var t=o.get(O);if(e=z[t],a&&a.length){var n=x(a,t);f=0===n?1:0,x(a,i)<0&&a.push(i)}}return e}();if(m){var g=function(){u||(p=c),ae(e,t,n,s,p).then(h.resolve,h.reject)};g.displayName="promiseResolved",m.finally(g).catch(angular.noop)}else ae(e,t,n,s,p).then(h.resolve,h.reject);return h.promise},W=function(e){return g&&(e=[g,e].join(" ")),y&&(e=[e,y].join(" ")),e},Q=function(e){c=e,l&&o.put(G.storageKey(),c),n.$emit("$translateChangeSuccess",{language:e}),D.setLocale(c);var t=function(e,t){Y[t].setLocale(c)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(Y,t),n.$emit("$translateChangeEnd",{language:e})},J=function(e){if(!e)throw"No language key specified for loading.";var i=r.defer();n.$emit("$translateLoadingStart",{language:e}),k=!0;var o=v;"string"==typeof o&&(o=t.get(o));var a=angular.extend({},m,{key:e,$http:angular.extend({},{cache:o},m.$http)}),s=function(t){var r={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(r,N(e))}):angular.extend(r,N(t)),k=!1,i.resolve({key:e,table:r}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var c=function(e){n.$emit("$translateLoadingError",{language:e}),i.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return c.displayName="onLoaderError",t.get(h)(a).then(s,c),i.promise};if(l&&(o=t.get(l),!o.get||!o.put))throw new Error("Couldn't use storage '"+l+"', missing get() or put() method!");if(T.length){var K=function(e){var n=t.get(e);n.setLocale(i||c),Y[n.getInterpolationIdentifier()]=n};K.displayName="interpolationFactoryAdder",angular.forEach(T,K)}var X=function(e){var t=r.defer();if(Object.prototype.hasOwnProperty.call(S,e))t.resolve(S[e]);else if(z[e]){var n=function(e){B(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",z[e].then(n,t.reject)}else t.reject();return t.promise},Z=function(e,t,n,i,o){var a=r.defer(),s=function(r){if(Object.prototype.hasOwnProperty.call(r,t)&&null!==r[t]){i.setLocale(e);var s=r[t];if("@:"===s.substr(0,2))Z(e,s.substr(2),n,i,o).then(a.resolve,a.reject);else{var u=i.interpolate(r[t],n,"service",o,t);u=ue(t,r[t],u,n,e),a.resolve(u)}i.setLocale(c)}else a.reject()};return s.displayName="fallbackTranslationResolver",X(e).then(s,a.reject),a.promise},ee=function(e,t,n,r,i){var o,a=S[e];if(a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){if(r.setLocale(e),o=r.interpolate(a[t],n,"filter",i,t),o=ue(t,a[t],o,n,e,i),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var s=o.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return ee(e,s.substr(2),n,r,i)}else if("@:"===o.substr(0,2))return ee(e,o.substr(2),n,r,i);r.setLocale(c)}return o},te=function(e,n,r,i){return p?t.get(p)(e,c,n,r,i):e},ne=function(e,t,n,i,o,s){var c=r.defer();if(e<a.length){var u=a[e];Z(u,t,n,i,s).then(function(e){c.resolve(e)},function(){return ne(e+1,t,n,i,o,s).then(c.resolve,c.reject)})}else if(o)c.resolve(o);else{var l=te(t,n,o);p&&l?c.resolve(l):c.reject(W(t))}return c.promise},re=function(e,t,n,r,i){var o;if(e<a.length){var s=a[e];o=ee(s,t,n,r,i),o||""===o||(o=re(e+1,t,n,r))}return o},ie=function(e,t,n,r,i){return ne($>0?$:f,e,t,n,r,i)},oe=function(e,t,n,r){return re($>0?$:f,e,t,n,r)},ae=function(e,t,n,i,o,s){var c=r.defer(),u=o?S[o]:S,l=n?Y[n]:D;if(u&&Object.prototype.hasOwnProperty.call(u,e)&&null!==u[e]){var f=u[e];if("@:"===f.substr(0,2))G(f.substr(2),t,n,i,o).then(c.resolve,c.reject);else{var d=l.interpolate(f,t,"service",s,e);d=ue(e,f,d,t,o),c.resolve(d)}}else{var h;p&&!k&&(h=te(e,t,i)),o&&a&&a.length?ie(e,t,l,i,s).then(function(e){c.resolve(e)},function(e){c.reject(W(e))}):p&&!k&&h?i?c.resolve(i):c.resolve(h):i?c.resolve(i):c.reject(W(e))}return c.promise},se=function(e,t,n,r,i){var o,s=r?S[r]:S,c=D;if(Y&&Object.prototype.hasOwnProperty.call(Y,n)&&(c=Y[n]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var u=s[e];"@:"===u.substr(0,2)?o=se(u.substr(2),t,n,r,i):(o=c.interpolate(u,t,"filter",i,e),o=ue(e,u,o,t,r,i))}else{var l;p&&!k&&(l=te(e,t,i)),r&&a&&a.length?(f=0,o=oe(e,t,c,i)):o=p&&!k&&l?l:W(e)}return o},ce=function(e){u===e&&(u=void 0),z[e]=void 0},ue=function(e,n,r,i,o,a){var s=b;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,n,r,i,o,a):r},le=function(e){S[e]||!h||z[e]||(z[e]=J(e).then(function(e){return B(e.key,e.table),e}))};G.preferredLanguage=function(e){return e&&q(e),i},G.cloakClassName=function(){return E},G.nestedObjectDelimeter=function(){return R},G.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(H(e),h&&a&&a.length)for(var t=0,n=a.length;t<n;t++)z[a[t]]||(z[a[t]]=J(a[t]));G.use(G.use())}return s?a[0]:a},G.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=x(a,e);t>-1&&($=t)}else $=0},G.proposedLanguage=function(){return u},G.storage=function(){return o},G.negotiateLocale=U,G.use=function(e){if(!e)return c;var t=r.defer();t.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:e});var i=U(e);return _.length>0&&!i?r.reject(e):(i&&(e=i),u=e,!I&&S[e]||!h||z[e]?z[e]?z[e].then(function(e){return u===e.key&&Q(e.key),t.resolve(e.key),e},function(e){return!c&&a&&a.length>0&&a[0]!==e?G.use(a[0]).then(t.resolve,t.reject):t.reject(e)}):(t.resolve(e),Q(e)):(z[e]=J(e).then(function(n){return B(n.key,n.table),t.resolve(n.key),u===e&&Q(n.key),n},function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),r.reject(e)}),z[e].finally(function(){ce(e)}).catch(angular.noop)),t.promise)},G.resolveClientLocale=function(){return M()},G.storageKey=function(){return V()},G.isPostCompilingEnabled=function(){return w},G.isForceAsyncReloadEnabled=function(){return I},G.isKeepContent=function(){return j},G.refresh=function(e){function t(e){var t=J(e);return z[e]=t,t.then(function(t){S[e]={},B(e,t.table),o[e]=!0},angular.noop),t}if(!h)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:e});var i=r.defer(),o={};if(i.promise.then(function(){for(var e in S)S.hasOwnProperty(e)&&(e in o||delete S[e]);c&&Q(c)},angular.noop).finally(function(){n.$emit("$translateRefreshEnd",{language:e})}),e)S[e]?t(e).then(i.resolve,i.reject):i.reject();else{var s=a&&a.slice()||[];c&&s.indexOf(c)===-1&&s.push(c),r.all(s.map(t)).then(i.resolve,i.reject)}return i.promise},G.instant=function(e,t,n,r,o){var s=r&&r!==c?U(r)||r:c;if(null===e||angular.isUndefined(e))return e;if(r&&le(r),angular.isArray(e)){for(var u={},l=0,f=e.length;l<f;l++)u[e[l]]=G.instant(e[l],t,n,r,o);return u}if(angular.isString(e)&&e.length<1)return e;e&&(e=F.apply(e));var d,h=[];i&&h.push(i),s&&h.push(s),a&&a.length&&(h=h.concat(a));for(var m=0,v=h.length;m<v;m++){var b=h[m];if(S[b]&&"undefined"!=typeof S[b][e]&&(d=se(e,t,n,s,o)),"undefined"!=typeof d)break}if(!d&&""!==d)if(g||y)d=W(e);else{d=D.interpolate(e,t,"filter",o);var _;p&&!k&&(_=te(e,t,o)),p&&!k&&_&&(d=_)}return d},G.versionInfo=function(){return L},G.loaderCache=function(){return v},G.directivePriority=function(){return A},G.statefulFilter=function(){return C},G.isReady=function(){return P};var fe=r.defer();fe.promise.then(function(){P=!0}),G.onReady=function(e){var t=r.defer();return angular.isFunction(e)&&t.promise.then(e),P?t.resolve():fe.promise.then(t.resolve),t.promise},G.getAvailableLanguageKeys=function(){return _.length>0?_:null},G.getTranslationTable=function(e){return e=e||G.use(),e&&S[e]?angular.copy(S[e]):null};var pe=n.$on("$translateReady",function(){fe.resolve(),pe(),pe=null}),de=n.$on("$translateChangeEnd",function(){fe.resolve(),de(),de=null});if(h){if(angular.equals(S,{})&&G.use()&&G.use(G.use()),a&&a.length)for(var he=function(e){return B(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},me=0,ge=a.length;me<ge;me++){var ye=a[me];!I&&S[ye]||(z[ye]=J(ye).then(he))}}else n.$emit("$translateReady",{language:G.use()});return G}]}function r(e,t){"use strict";var n,r={},i="default";return r.setLocale=function(e){n=e},r.getInterpolationIdentifier=function(){return i},r.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},r.interpolate=function(n,r,i,o,a){r=r||{},r=t.sanitize(r,"params",o,i);var s;return angular.isNumber(n)?s=""+n:angular.isString(n)?(s=e(n)(r),s=t.sanitize(s,"text",o,i)):s="",s},r}function i(e,t,n,r,i){"use strict";var a=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(s,c){var u=c.translateValues?c.translateValues:void 0,l=c.translateInterpolation?c.translateInterpolation:void 0,f=s[0].outerHTML.match(/translate-value-+/i),p="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",d="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(s,h,m){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=o(s);var g={},y=function(e,t,n){if(t.translateValues&&angular.extend(e,r(t.translateValues)(s.$parent)),f)for(var i in n)if(Object.prototype.hasOwnProperty.call(t,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i){var o=angular.lowercase(i.substr(14,1))+i.substr(15);e[o]=n[i]}},v=function(e){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var n=a.apply(h.text()),r=n.match(p);if(angular.isArray(r)){s.preText=r[1],s.postText=r[3],g.translate=t(r[2])(s.$parent);var i=n.match(d);angular.isArray(i)&&i[2]&&i[2].length&&(v._unwatchOld=s.$watch(i[2],function(e){g.translate=e,E()}))}else g.translate=n?n:void 0}else g.translate=e;E()},b=function(e){m.$observe(e,function(t){g[e]=t,E()})};y(s.interpolateParams,m,c);var S=!0;m.$observe("translate",function(e){"undefined"==typeof e?v(""):""===e&&S||(g.translate=e,E()),S=!1});for(var _ in m)m.hasOwnProperty(_)&&"translateAttr"===_.substr(0,13)&&_.length>13&&b(_);if(m.$observe("translateDefault",function(e){s.defaultText=e,E()}),u&&m.$observe("translateValues",function(e){e&&s.$parent.$watch(function(){angular.extend(s.interpolateParams,r(e)(s.$parent))})}),f){var O=function(e){m.$observe(e,function(t){var n=angular.lowercase(e.substr(14,1))+e.substr(15);s.interpolateParams[n]=t})};for(var T in m)Object.prototype.hasOwnProperty.call(m,T)&&"translateValue"===T.substr(0,14)&&"translateValues"!==T&&O(T)}var E=function(){for(var e in g)g.hasOwnProperty(e)&&void 0!==g[e]&&w(e,g[e],s,s.interpolateParams,s.defaultText,s.translateNamespace)},w=function(t,n,r,i,o,a){n?(a&&"."===n.charAt(0)&&(n=a+n),e(n,i,l,o,r.translateLanguage).then(function(e){I(e,r,!0,t)},function(e){I(e,r,!1,t)})):I(n,r,!1,t)},I=function(t,r,i,o){if(i||"undefined"!=typeof r.defaultText&&(t=r.defaultText),"translate"===o){(i||!i&&!e.isKeepContent()&&"undefined"==typeof m.translateKeepContent)&&h.empty().append(r.preText+t+r.postText);var a=e.isPostCompilingEnabled(),s="undefined"!=typeof c.translateCompile,u=s&&"false"!==c.translateCompile;(a&&!s||u)&&n(h.contents())(r)}else{var l=m.$attr[o];"data-"===l.substr(0,5)&&(l=l.substr(5)),l=l.substr(15),h.attr(l,t)}};(u||f||m.translateDefault)&&s.$watch("interpolateParams",E,!0),s.$on("translateLanguageChanged",E);var R=i.$on("$translateChangeSuccess",E);h.text().length?v(m.translate?m.translate:""):m.translate&&v(m.translate),E(),s.$on("$destroy",R)}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function a(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(n,r,i){var o,a,c={},u=function(){angular.forEach(o,function(t,o){t&&(c[o]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),e(t,a,i.translateInterpolation,void 0,n.translateLanguage).then(function(e){r.attr(o,e)},function(e){r.attr(o,e)}))}),angular.forEach(c,function(e,t){o[t]||(r.removeAttr(t),delete c[t])})};s(n,i.translateAttr,function(e){o=e},u),s(n,i.translateValues,function(e){a=e},u),i.translateValues&&n.$watch(i.translateValues,u,!0),n.$on("translateLanguageChanged",u);var l=t.$on("$translateChangeSuccess",u);u(),n.$on("$destroy",l)}}}function s(e,t,n,r){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,function(e){n(e),r()},!0),n(e.$eval(t)))}function c(e,t){"use strict";return{compile:function(n){var r=function(t){t.addClass(e.cloakClassName())},i=function(t){t.removeClass(e.cloakClassName())};return r(n),function(n,o,a){var s=i.bind(this,o),c=r.bind(this,o);a.translateCloak&&a.translateCloak.length?(a.$observe("translateCloak",function(t){e(t).then(s,c)}),t.$on("$translateChangeSuccess",function(){e(a.translateCloak).then(s,c)})):e.onReady(s)}}}}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=o(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function f(e,t){"use strict";var n=function(n,r,i,o){if(!angular.isObject(r)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};r=e(r)(a)}return t.instant(n,r,i,o)};return t.statefulFilter()&&(n.$stateful=!0),n}function p(e){"use strict";return e("translations")}return e.$inject=["$translate"],n.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],r.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],a.$inject=["$translate","$rootScope"],c.$inject=["$translate","$rootScope"],f.$inject=["$parse","$translate"],p.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",t),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",n),n.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",r),r.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",a),a.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",c),c.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",u),u.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",f),f.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",p),p.displayName="$translationCache","pascalprecht.translate"})},function(e,t,n){var r,i;!function(n,o){r=[],i=function(){return o()}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this,function(){function e(e,t){"use strict";return function(n){if(!n||!n.url)throw new Error("Couldn't use urlLoader since no url is given!");var r={};return r[n.queryParameter||"lang"]=n.key,t(angular.extend({url:n.url,params:r,method:"GET"},n.$http)).then(function(e){return e.data},function(){return e.reject(n.key);
})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateUrlLoader",e),e.displayName="$translateUrlLoader","pascalprecht.translate"})},function(e,t,n){var r,i;!function(n,o){r=[],i=function(){return o()}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){function t(e,t,n,r){var o=document.createElement("script"),a=i?i:document.getElementsByTagName("body")[0],s=!1;o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"complete"!==o.readyState&&"loaded"!==o.readyState||(o.onreadystatechange=null,r(function(){s||(s=!0,a.removeChild(o),t())},30,!1))}:(o.onload=function(){s||(s=!0,a.removeChild(o),t())},o.onerror=function(){s||(s=!0,a.removeChild(o),n())}),o.src=e,o.async=!0,a.appendChild(o)}function n(e,n,r,i,s,c,f){function p(e,t){a===r&&(angular.forEach(e,function(n,r){t[r]?angular.isArray(t[r])&&(e[r].length=t[r].length):delete e[r]}),angular.forEach(t,function(n,r){angular.isArray(t[r])||angular.isObject(t[r])?(e[r]||(e[r]=angular.isArray(t[r])?[]:{}),p(e[r],t[r])):e[r]=t[r]}))}if(l[r])return a=r,l[r];var d,h=s.defer();return r===a?h.resolve(n):(d=c.get(r))?(a=r,i.$evalAsync(function(){p(n,d),o.put(u,r),i.$broadcast("$localeChangeSuccess",r,n),h.resolve(n)})):(a=r,l[r]=h.promise,t(e,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");p(n,t),c.put(r,t),delete l[r],i.$applyAsync(function(){o.put(u,r),i.$broadcast("$localeChangeSuccess",r,n),h.resolve(n)})},function(){delete l[r],i.$applyAsync(function(){a===r&&(a=n.id),i.$broadcast("$localeChangeError",r),h.reject(r)})},f)),h.promise}var r,i,o,a,s="angular/i18n/angular-locale_{{locale}}.js",c="tmhDynamicLocaleStorageCache",u=e,l={},f={};this.localeLocationPattern=function(e){return e?(s=e,this):s},this.appendScriptTo=function(e){i=e},this.useStorage=function(e){c=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){r=e},this.storageKey=function(e){return e?(u=e,this):u},this.addLocalePatternValue=function(e,t){f[e]=t},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,t,i,l,p,d,h){function m(t){var r={locale:t,angularVersion:angular.version.full};return n(g(angular.extend({},f,r)),l,t,e,p,d,h)}var g=i(s);return o=t.get(c),e.$evalAsync(function(){var e;(e=o.get(u)||r)&&m(e)}),{set:m,get:function(){return a}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e,t){this.tmhDynamicLocale=e,this.$translate=t,this.rtlLanguages=r.getRtlLanguages(),this._direction="ltr"}return e.prototype.getLanguage=function(){return this.$translate.use()},e.prototype.setLanguage=function(e){var t=this;this.$translate.preferredLanguage(e);var n=e.split("_");return n.length>1&&("iw"===n[0]&&(n[0]="he"),n[1]=n[1].toLowerCase()),this.tmhDynamicLocale.set(n.join("-")),this.$translate.use(e).then(function(){t.setPageLanguage()})},Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),e.prototype.setPageLanguage=function(e){var t=this.$translate.use()||e,n=document.getElementById("primoExploreRoot"),r={iw:"he",ji:"yi",in:"id"};if(n&&t&&t.length>=2){var i=t.substring(0,2);r[i]&&(i=r[i]),n.setAttribute("lang",i);var o=void 0;o=this.rtlLanguages.has(i)?"rtl":"ltr",this._direction=o,n.setAttribute("dir",o)}},e}();t.I18n=i,i.$inject=["tmhDynamicLocale","$translate"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(866),o=n(400);t.default=r.module("primo-explore.components",[]).component(i.default.name,i.default.config).service("HighlightService",o.HighlightService)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n(88),function(){function e(e,t,n){this.$element=e,this.$scope=t,this.highlightService=n}return e.prototype.$onInit=function(){this.isNotEmptyTerms()?(this.highlightRegexp=this.highlightService.getTermRegexp(this.terms),this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp)):this.highlightedText=this.text},e.prototype.$onChanges=function(e){"terms"in e?(this.highlightRegexp=this.highlightService.getTermRegexp(this.terms),this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp)):"text"in e&&(this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp))},e.prototype.combineStringLastChar=function(e){return this.highlightService.combineStringLastChar(e)},e.prototype.isNotEmptyTerms=function(){return!!(this.terms&&Array.isArray(this.terms)&&this.terms.filter(function(e){return e.length>0}).length>0)||(console.error("Invalid terms",this.terms),!1)},e.prototype.isEmailMode=function(){return"email"===this.displayMode},e}());r.$inject=["$element","$scope","HighlightService"],t.default={name:"prmHighlight",config:{bindings:{terms:"<",text:"<",displayMode:"<"},controller:r,templateUrl:"components/infra/highlight.html"}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),s=n(5),c=n(0),u=n(10),l=n(8),f=n(1),p=n(122),d=n(7),h=n(4),m=n(186),g=function(){function e(e,t,n,r,i,o,a,c,u,l,p,d,m,g){var y=this;this.primoExploreService=e,this.Idle=t,this.userSessionManagerService=n,this.$element=r,this.$mdDialog=i,this.$scope=o,this.$timeout=a,this.$translate=c,this.$window=u,this.$state=l,this.jwtUtilService=p,this.mediaQueries=d,this.storageutil=m,this.cmIntegrationService=g,this.graceTime=1e3*f.getSessionTimeoutParams().warningTime,o.$on("$stateChangeCancel",function(e,t,n,r,i){t.name===h.STATE_NAMES.COLLECTION_DISCOVERY&&(console.log("state transition canceled retrying!"),a(function(){y.$state.go(t,n,{reload:!0,inherit:!1})},0))}),s.element(u).on("focus",this.handleFocus),o.$on("IdleWarn",function(){return y.handleWarning()}),this.warningShowed=!1,this.userSessionManagerService=n,this.$mdDialog=i,this.$window=u,this.updateResponsiveClass(),s.element(u).bind("resize",function(){return y.$timeout(function(){return y.updateResponsiveClass()},0,!1)}),c(["nui.session.timeout.button","nui.session.timeout.alert","nui.session.timeout.attention"]).then(function(e){y.alertObject=i.alert({textContent:e["nui.session.timeout.alert"],ok:e["nui.session.timeout.button"],title:e["nui.session.timeout.attention"]})})}return e.prototype.$postLink=function(){this.cmIntegrationService.ready()},e.prototype.isEmailTemplateState=function(){return this.$state.current.name===h.STATE_NAMES.EMAIL_TEMPLATE},e.prototype.updateResponsiveClass=function(){var e=this.mediaQueries.createDynamicClass();e!==this.responsiveClass&&(this.responsiveClass&&this.$element.removeClass(this.responsiveClass),this.responsiveClass=e,this.$element.addClass(this.responsiveClass))},e.prototype.handleWarning=function(){this.userSessionManagerService.logout(!0)},e.prototype.handleFocus=function(){window.appPerformance.timeStamps.focusIn=(new Date).getTime()},e=r([c.Component({selector:"primo-explore",template:'<div ui-view></div><prm-explore-footer ng-if="!$ctrl.isEmailTemplateState()"></prm-explore-footer><prm-silent-login></prm-silent-login><prm-login-iframe></prm-login-iframe>'}),o(1,c.Inject("Idle")),o(3,c.Inject("$element")),o(4,c.Inject("$mdDialog")),o(5,c.Inject("$scope")),o(6,c.Inject("$timeout")),o(7,c.Inject("$translate")),o(8,c.Inject("$window")),o(9,c.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof p.PrimoExploreService&&p.PrimoExploreService)&&t||Object,Object,"function"==typeof(n="undefined"!=typeof u.UserSessionManagerService&&u.UserSessionManagerService)&&n||Object,Object,Object,Object,Object,Object,Object,Object,"function"==typeof(g="undefined"!=typeof d.JwtUtilService&&d.JwtUtilService)&&g||Object,"function"==typeof(y="undefined"!=typeof l.MediaQueries&&l.MediaQueries)&&y||Object,"function"==typeof(v="undefined"!=typeof a.StorageUtil&&a.StorageUtil)&&v||Object,"function"==typeof(b="undefined"!=typeof m.CMIntegrationService&&m.CMIntegrationService)&&b||Object])],e);var t,n,g,y,v,b}();t.PrimoExplore=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(869),a=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmSpinner],providers:[],imports:[]})],e)}();t.SpinnerModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(){}return e=r([i.Component({selector:"prm-spinner",templateUrl:"components/spinner/spinner.html"})],e)}();t.PrmSpinner=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(403),a=n(871),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmSourceRecord],providers:[o.SourceRecordService],imports:[]})],e)}();t.SourceRecordModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(403),c=function(){function e(e,t){this.sourceRecordService=e,this.$stateParams=t}return e.prototype.ngOnInit=function(){var e=this;this.sourceRecordService.getSourceRecord(this.$stateParams.docId,this.$stateParams.recordOwner).then(function(t){return e.sourceRecord=t.data})},e.prototype.getTemplateUrl=function(){return this.sourceRecord},e=r([a.Component({selector:"prm-source-record",templateUrl:"components/sourceRecord/source-record.html"}),o(1,a.Inject("$stateParams")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.SourceRecordService&&s.SourceRecordService)&&t||Object,Object])],e);var t}();t.PrmSourceRecord=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(873),a=n(404),s=n(405),c=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmBlankIll],providers:[a.BlankIllService],imports:[s.OpacRequestModule]})],e)}();t.BlankIllModule=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(404),s=n(50),c=n(154),u=n(34),l=n(63),f=function(){function e(e,t,n){this.requestService=e,this.blankIllService=t,this.opacService=n,this.changeTabEvent=new o.EventEmitter,this.defaultTab=s.OPAC_TAB.REQUEST,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new c.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab}return e.prototype.getRequestIsLoading=function(){return this.requestService.requestIsLoading},e.prototype.onChangeTabEvent=function(e){var t=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==t.referer&&this.backToHistoryStack.push(t.referer),t.service&&(this.service=t.service),this.selectedTab=t.dest)},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e.prototype.getResponseMessage=function(){return this.opacService.getResponseMessage()},Object.defineProperty(e.prototype,"displayErrorMessage",{get:function(){return this.requestService.displayErrorMessage},enumerable:!0,configurable:!0}),r([o.Output(),i("design:type","function"==typeof(t="undefined"!=typeof o.EventEmitter&&o.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),e=r([o.Component({selector:"prm-blank-ill",templateUrl:"components/blankIll/blank-ill.html"}),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof l.RequestService&&l.RequestService)&&n||Object,"function"==typeof(f="undefined"!=typeof a.BlankIllService&&a.BlankIllService)&&f||Object,"function"==typeof(p="undefined"!=typeof u.OpacService&&u.OpacService)&&p||Object])],e);var t,n,f,p}();t.PrmBlankIll=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),s=n(5),c=n(0),u=n(181),l=n(63),f=n(34),p=n(78),d=n(10),h=n(26),m=n(2),g=n(114),y=n(114),v=n(39),b=function(){function e(e,t,n,r,i,o,a,s){this.requestServicesService=e,this.opacService=t,this.requestService=n,this.pnxUtil=r,this.userSessionManagerService=i,this.configurationUtil=o,this.$scope=a,this.$rootScope=s,this.changeTabEvent=new c.EventEmitter}return Object.defineProperty(e.prototype,"services",{get:function(){return this.locationServices?this.locationServices:this._services},set:function(e){this._services=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordId",{get:function(){return this._recordId},set:function(e){this._recordId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.requestService.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabId",{get:function(){return 1==this.item.delivery.holding.length?a.OPAC_TAB.ITEMS:a.OPAC_TAB.LOCATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicesListIsLoading",{get:function(){return this._servicesListIsLoading},set:function(e){this._servicesListIsLoading=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.activate(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item),this.$rootScope.$on("silentLogin",function(){return e.reloadServices()})},e.prototype.getServiceAdditionalParams=function(e){return this._servicesAdditionalParams[e.type]},e.prototype.isLoggedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.changeTab=function(e){this.changeTabEvent.emit(e)},e.prototype.reloadServices=function(){this.activate(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item)},e.prototype.activate=function(){this.recordId=this.ripIlsApiId(this.item),this.requestService.ilsApiId=this.recordId,this.getServicesFromIls()},e.prototype.getServicesFromIls=function(){var e=this;if(this.services={},this.servicesListIsLoading=!1,this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),void 0)),this.configurationUtil.isSuprima()||this.isLoggedIn()){this.servicesListIsLoading=!0;var t=this.item.delivery.GetIt1.map(function(e){return e.links}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.inst4opac}).map(function(e){return e.inst4opac})[0],n=this.checkValidUser(t,this.item.delivery.holding);if(this.item.delivery.GetIt1&&n){var r=t||this.item.delivery.holding[0].organization,i=void 0;this.item.delivery&&(i=this.item.delivery.physicalServiceId),this.opacService.getIlsServicesList(this.recordId,r,i,!0).then(function(t){e.services=t.data,e.updateServicesList();var n=t["reply-text"],r=!t.data.serviceinfo||0===t.data.serviceinfo.length||"N"===t.data.serviceinfo[0].allowed;e.isLoggedIn()&&n&&"0000"!==t["reply-code"]&&r&&e.requestService.setMessages(e.requestService.getHtml(e.isLoggedIn(),n)),e.servicesListIsLoading=!1},function(t){e.servicesListIsLoading=!1})}else this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),"requesttab.user.not.valid")),this.servicesListIsLoading=!1}},e.prototype.checkValidUser=function(e,t){var n=e,r=!0;return t.forEach(function(t,i,o){e===t.organization&&(n=e,r=t.isValidUser)}),n&&r},e.prototype.updateServicesList=function(){var e=this;s.forEach(this.services.serviceinfo,function(t,n){var r={path:t["link-to-service"],method:"GET",serviceType:t["service-type"]};e.opacService.updateService(t.type,r)})},e.prototype.ripIlsApiId=function(e){if(e.delivery&&e.delivery.GetIt1){var t=v(e.delivery.GetIt1,function(e){if("Physical Item"===e.category||"Microform"===e.category||"Alma-P"===e.category){var t=e.links;if(!t)return!1;var n=v(t,function(e){return e.ilsApiId});return n}});return t[0].links[0].ilsApiId}},Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this.isLoggedIn()&&this.requestService.reqAlert&&this.requestService.reqAlert.getMsgHtml()===this.requestService.getHtml(!1,void 0)&&this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),void 0)),this.requestService.reqAlert},enumerable:!0,configurable:!0}),e.prototype.filteredServices=function(){return y.filteredServices(this.services.serviceinfo)},e.prototype.ngrsEnabledAndRSLinkIsOnlyService=function(){return g.ngrsEnabledAndRSLinkIsOnlyService(this.services.serviceinfo)},r([c.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof h.PrimoResponse&&h.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([c.Output(),i("design:type","function"==typeof(n="undefined"!=typeof c.EventEmitter&&c.EventEmitter)&&n||Object)],e.prototype,"changeTabEvent",void 0),r([c.Input(),i("design:type",String)],e.prototype,"memberInst",void 0),r([c.Input(),i("design:type",Object)],e.prototype,"locationServices",void 0),e=r([c.Component({selector:"prm-request-services",templateUrl:"components/search/fullView/getit/opac/request/request-services.html"}),o(6,c.Inject("$scope")),o(7,c.Inject("$rootScope")),i("design:paramtypes",["function"==typeof(b="undefined"!=typeof u.RequestServicesService&&u.RequestServicesService)&&b||Object,"function"==typeof(S="undefined"!=typeof f.OpacService&&f.OpacService)&&S||Object,"function"==typeof(_="undefined"!=typeof l.RequestService&&l.RequestService)&&_||Object,"function"==typeof(O="undefined"!=typeof p.PnxUtil&&p.PnxUtil)&&O||Object,"function"==typeof(T="undefined"!=typeof d.UserSessionManagerService&&d.UserSessionManagerService)&&T||Object,"function"==typeof(E="undefined"!=typeof m.ConfigurationUtil&&m.ConfigurationUtil)&&E||Object,Object,Object])],e);var t,n,b,S,_,O,T,E}();t.PrmRequestServices=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(345),a=n(339),s=n(342),c=n(343),u=n(347),l=n(346),f=n(348),p=n(349),d=n(876),h=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.AcquisitionRequest,a.CallslipRequest,s.HoldRequest,c.IllRequest,u.PhotocopyRequest,l.RecallRequest,f.ShortLoanRequest,p.UBRequest],imports:[d.AlmaRequestTypeModule]})],e)}();t.RequestTypesModule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(351),a=n(356),s=n(359),c=n(358),u=n(357),l=n(352),f=n(350),p=n(354),d=n(355),h=n(353),m=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.AlmaDigitization,a.AlmaDigitizationOther,c.AlmaItemDigitization,s.AlmaGeneralDigitization,u.AlmaItemRequest,l.AlmaPurchaseRequest,f.AlmaRequest,p.AlmaRequestAnyItem,d.AlmaRequestOther,h.AlmaResourceSharing],imports:[]})],e)}();t.AlmaRequestTypeModule=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(0),c=n(63),u=n(108),l=n(34),f=n(12),p=n(12),d=n(38),h=n(50),m=n(200),g=n(1),y=n(2),v=n(8),b=n(60),S=n(39),_=n(18),O=n(29),T=n(3),E=function(){function e(e,t,n,r,i,o,a,c,u,l){var f=this;this.requestService=e,this.opacService=t,this.formBuilderService=n,this.dateUtils=r,this.serviceButtonService=i,this.locationsService=o,this.restBaseURLs=a,this.configurationUtil=c,this.$scope=u,this.mediaQueries=l,this.changeTabEvent=new s.EventEmitter,this.vid=g.getVid(),this.formInputChangedSinceLastAvailabilityCheck=!1,this.availabilityCheckRan=!1,this.formSubmited=!1,this.blankRequests={AlmaResourceSharing:{allowed:"Y","link-to-service":"/primaws/rest/priv/ILSServices/titleServices/-1/-1/AlmaResourceSharing?institution=","service-type":"OvP",type:"AlmaResourceSharing"},AlmaPurchaseRequest:{allowed:"Y","link-to-service":"/primaws/rest/priv/ILSServices/titleServices/-1/-1/AlmaPurchaseRequest?institution=","service-type":"OvP",type:"AlmaPurchaseRequest"}},this.subscription=this.requestService.newFormObservable.subscribe(function(){f.availabilityCheckRan=!1,f.isCheckAvailabilityEnabledForForm()&&!f.blankService&&setTimeout(function(){f.checkAvailability()},200)}),this.$scope.$watch("$ctrl.formData",function(){f.onFormInputChange()},!0)}return e.prototype.ngOnInit=function(){if(this.requestService.requestIsLoading=!1,this.requestService.displayErrorMessage=!1,"AlmaResourceSharing"===this.blankService){this.requestService.requestIsLoading=!0,console.log("blankService - AlmaResourceSharing"),this.requestService.service=this.blankRequests.AlmaResourceSharing,this.requestService.service["link-to-service"]=this.requestService.service["link-to-service"]+g.getInstitutionCode();var e={vid:this.vid};this.serviceButtonService.makeIlsRequest(this.requestService.service,e)}if("AlmaPurchaseRequest"===this.blankService){this.requestService.requestIsLoading=!0,this.requestService.service=this.blankRequests.AlmaPurchaseRequest,this.requestService.service["link-to-service"]=this.requestService.service["link-to-service"]+g.getInstitutionCode();var e={vid:this.vid};this.serviceButtonService.makeIlsRequest(this.requestService.service,e)}},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},Object.defineProperty(e.prototype,"serviceType",{get:function(){var e=this.requestService.service;return void 0===e?"":e.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL],!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formReadonly",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL],!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestHeader",{get:function(){switch(this.serviceType){case"ILL":return"nui.ill.header";case"PhotocopyRequest":return"nui.PhotocopyRequest.header";case"HoldRequest":return"nui.HoldRequest.header";case"CallSlip":return"nui.CallSlip.header";case"ShortLoan":return"nui.shortloan.header";case"UBRequest":return"nui.ubrequest.header";case"Recall":return"nui.Recall.header";case"AlmaDigitization":return"almaDigitization.header";case"AlmaPurchaseRequest":return"almaPurchaseRequest.header";case"AlmaRequest":return"almaRequest.header";case"AlmaRequestAnyItem":return"almaRequestAnyItem.header";case"AlmaRequestOther":return"almaRequestOther.header";case"AlmaDigitizationOther":return"almaDigitizationOther.header";case"AlmaGeneralDigitization":return"almaDigitization.header";case"AlmaItemDigitization":return"almaItemDigitization.header";case"AlmaItemRequest":return"almaItemRequest.header";case"AlmaResourceSharing":return"almaResourceSharing.header";default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitLabel",{get:function(){switch(this.serviceType){case"PhotocopyRequest":return"nui.PhotocopyRequest.send";case"AlmaDigitization":return"almaDigitization.send";case"AlmaDigitizationOther":return"almaDigitization.send";case"AlmaItemDigitization":return"almaDigitization.send";case"AlmaGeneralDigitization":return"almaDigitization.send";default:return"nui.request.send"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this.requestService.formData},set:function(e){this.requestService.formData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayForm",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL,p.FormBuilderEnums.UI_TYPE.HIDDEN],!1).length>0},enumerable:!0,configurable:!0}),e.prototype.submit=function(e){var t=this,n=O(this.requestService.service),r=O(this.formData);if(this.isCopyRight(n)&&this.isCopyRight(n)instanceof Array&&this.isCopyRight(n).length>0){var i={referer:h.OPAC_TAB.REQUEST,dest:h.OPAC_TAB.COPYRIGHTS};return void this.changeTabEvent.emit(i)}if("AlmaResourceSharing"===this.serviceType&&g.getPrimoVeAlternativeEmailDigitalResourceSharing()&&this.getFilteredForm(["hidden"],!0).filter(function(e){return"alternativeLocationEmail"===e.key}).length>0){this.opacService.responseStatus=new l.StatusMsg((!1),"the request could not be completed due to configuration issue - please contact your library");var i={referer:h.OPAC_TAB.REQUEST,dest:h.OPAC_TAB.RESPONSE};return void this.changeTabEvent.emit(i)}r.group_id||(r.group_id=this.requestService.ilsApiId);var o=r.item_id||r["request-option"];o&&(n["link-to-service"]=n["link-to-service"]+"/item/"+o);var o=r.item_id||r.itemId||"AlmaPurchaseRequest"===this.serviceType;o||delete r.materialType,"AlmaPurchaseRequest"===this.blankService&&"book"===T(r,"citationType")&&T(r,"isbn")&&(n["link-to-service"]=n["link-to-service"]+"&checkForISBN=true"),this.manipulatePostData(r);var a=o?void 0:r.group_id;this.formSubmited=!0,this.opacService.makeIlsCall(n,r,"POST").then(function(e){t.opacService.responseStatus=new l.StatusMsg("ok"===e.status,e["reply-text"]);var n={referer:h.OPAC_TAB.REQUEST,dest:"requires_approval"===e.status?h.OPAC_TAB.APPROVAL:h.OPAC_TAB.RESPONSE,itemId:o,mmsId:a};t.formSubmited=!1,t.changeTabEvent.emit(n)}).finally(function(){t.formSubmited=!1})},e.prototype.resetForm=function(){this.requestService.setupNewForm(this.requestService.service,this.requestService.ilsData,!0)},e.prototype.isCopyRight=function(e){return this.requestService.isCopyRight(e)},e.prototype.getFilteredForm=function(e,t){return this.requestService.form?this.requestService.form.filter(function(n){return t?b(e,n.uiType)>-1:b(e,n.uiType)<0}):[]},e.prototype.manipulatePostData=function(e){var t=this;_(e,function(n,r){var i=t.getFieldByName(t.requestService.form,r);if(i){if(i.fieldType===p.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete e[r];t.isBookingRequestDateField(e.requestType,i.uiType)?e[r]=t.dateUtils.convertBookingRequestDateANDTimeTypeToIlsDate(e[r]):i.uiType===p.FormBuilderEnums.UI_TYPE.DATE?e[r]=t.dateUtils.convertDateTypeToIlsDateString(e[r]):i.uiType===p.FormBuilderEnums.UI_TYPE.DATE_AND_TIME&&(e[r]=t.dateUtils.convertDateANDTimeTypeToIlsDate(e[r]))}if(("pickupLocation"===r||"pickupLocationFulNet"===r)&&e[r].indexOf("$$")!==-1){var o=e[r].slice(0,e[r].indexOf("$")),a=e[r].slice(e[r].indexOf("$$")+2);e[r]=o,e.pickupLibraryId=o,e.pickupType=a}})},e.prototype.getFieldByName=function(e,t){var n=S(e,function(e){return e.name===t});return n[0]},e.prototype.isCheckAvailabilityEnabledForForm=function(){return"AlmaResourceSharing"===this.serviceType&&this.requestService.isCheckAvailabilityEnabled},e.prototype.checkAvailability=function(){var e=this;this.itemAvailabilityCheckInProgress=!0,this.availabilityCheckRan=!0,this.formInputChangedSinceLastAvailabilityCheck=!1,this.requestService.checkAvailability().then(function(t){e.itemAvailability=null===t.data?void 0:t.data;
},function(t){e.itemAvailability=void 0}).finally(function(){e.itemAvailabilityCheckInProgress=!1})},e.prototype.isCheckAvailabilityButtonDisabled=function(){return this.itemAvailability===!0&&!this.formInputChangedSinceLastAvailabilityCheck},e.prototype.isBookingRequestDateField=function(e,t){return"booking"===e&&(t===p.FormBuilderEnums.UI_TYPE.DATE||t===p.FormBuilderEnums.UI_TYPE.DATE_AND_HOURS||t===p.FormBuilderEnums.UI_TYPE.DATE_AND_TIME)},e.prototype.onFormInputChange=function(){console.log("input changed"),this.formInputChangedSinceLastAvailabilityCheck=!0},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},r([s.Input(),i("design:type",String)],e.prototype,"blankService",void 0),r([s.Input(),i("design:type",Object)],e.prototype,"service",void 0),r([s.Output(),i("design:type","function"==typeof(t="undefined"!=typeof s.EventEmitter&&s.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),e=r([s.Component({selector:"prm-request",templateUrl:"components/search/fullView/getit/opac/request/request.html"}),o(6,a.Inject("restBaseURLs")),o(8,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.RequestService&&c.RequestService)&&n||Object,"function"==typeof(E="undefined"!=typeof l.OpacService&&l.OpacService)&&E||Object,"function"==typeof(w="undefined"!=typeof f.FormBuilderService&&f.FormBuilderService)&&w||Object,"function"==typeof(I="undefined"!=typeof d.DateUtils&&d.DateUtils)&&I||Object,"function"==typeof(R="undefined"!=typeof m.ServiceButtonService&&m.ServiceButtonService)&&R||Object,"function"==typeof(P="undefined"!=typeof u.LocationsService&&u.LocationsService)&&P||Object,Object,"function"==typeof(j="undefined"!=typeof y.ConfigurationUtil&&y.ConfigurationUtil)&&j||Object,Object,"function"==typeof(A="undefined"!=typeof v.MediaQueries&&v.MediaQueries)&&A||Object])],e);var t,n,E,w,I,R,P,j,A}();t.PrmRequest=E},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(26),c=function(){function e(e,t){this.$window=e,this.availabilityLineIcons=t}return e.prototype.hasLocations=function(){return this.item.delivery.holding.length>0},Object.defineProperty(e.prototype,"requestLink",{get:function(){try{var e=this.item.delivery.GetIt1.filter(function(e){return"linktoholdings"===e.links[0].displayText})[0];return e.links[0].link}catch(e){return null}},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-requests-services-ovl",templateUrl:"components/search/fullView/getit/opac/request/request-services-ovl.html"}),o(0,a.Inject("$window")),o(1,a.Inject("availabilityLineIcons")),i("design:paramtypes",[Object,Object])],e);var t}();t.PrmRequestsServicesOvl=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(880),a=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmPurchaseRequest],providers:[],imports:[]})],e)}();t.PurchaseRequestModule=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(50),s=n(154),c=n(34),u=n(63),l=function(){function e(e,t){this.requestService=e,this.opacService=t,this.changeTabEvent=new o.EventEmitter,this.defaultTab=a.OPAC_TAB.REQUEST,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new s.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab}return e.prototype.getRequestIsLoading=function(){return this.requestService.requestIsLoading},e.prototype.onChangeTabEvent=function(e){var t=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==t.referer&&this.backToHistoryStack.push(t.referer),t.service&&(this.service=t.service),this.selectedTab=t.dest)},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e.prototype.getResponseMessage=function(){return this.opacService.getResponseMessage()},Object.defineProperty(e.prototype,"displayErrorMessage",{get:function(){return this.requestService.displayErrorMessage},enumerable:!0,configurable:!0}),r([o.Output(),i("design:type","function"==typeof(t="undefined"!=typeof o.EventEmitter&&o.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),e=r([o.Component({selector:"prm-blank-purchase-request",templateUrl:"components/purchaseRequest/purchase_request.html"}),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof u.RequestService&&u.RequestService)&&n||Object,"function"==typeof(l="undefined"!=typeof c.OpacService&&c.OpacService)&&l||Object])],e);var t,n,l}();t.PrmPurchaseRequest=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(882),a=n(406),s=n(883),c=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmCitationLinker,s.PrmFormField],providers:[a.CitationLinkerService],imports:[]})],e)}();t.CitationLinkerModule=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(406),c=n(9),u=n(12),l=n(1),f=n(1),p=n(6),d=n(0),h=n(1),m=n(2),g=n(8),y=(n(113),n(309)),v=n(60),b=(n(92),n(139)),S=function(){function e(e,t,n,r,i,o){this.citationLinkerService=e,this.mappingTablesCache=t,this.primolyticsService=n,this.$sce=r,this.configurationUtil=i,this.mediaQueries=o,this.tabs=[_.ARTICLE,_.BOOK,_.JOURNAL],this.activeTab=_.ARTICLE,this.vid=l.getVid(),this.baseURL=f.getCitationLinkerBaseURL(),this.institution_code=h.getInstitutionCode(),this.journalTitleDropdown=["contains","exact","startswith"],this.openURLFields={},this.formData={},this.articleMappingFields=[["atitle","jtitle"],["date"],["volume","issue"],["spage","epage"],["issn","doi","pmid"],["aulast","aufirst","auinit"],["publisher","pubdate"]],this.bookMappingFields=[["btitle"],["date"],["volume","part"],["isbn"],["aulast","aufirst","auinit"],["publisher","pubdate"]],this.journalMappingFields=[["jtitle"],["date"],["volume","issue"],["issn","doi"]],this.sortedOpenURLFields=this.initOpenURLFields(_.ARTICLE,this.articleMappingFields),this.initTitleSearch(),this.callBeacon()}return e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.callBeacon=function(){},e.prototype.initTitleSearch=function(){this.isSfx()?this.titleSearch="contains":this.titleSearch="exact"},e.prototype.initOpenURLFields=function(e,t){var n,r,i=this.mappingTablesCache.findByProperties("Citation Linker Definitions",{target:"Yes",source3:this.vid,source1:e});return 0===i.length&&(i=this.mappingTablesCache.findByProperties("Citation Linker Definitions",{target:"Yes",source3:"default",source1:e})),i.length>0&&(r=i.map(function(e){return e.source2}),n=t.map(function(e){return b(e,r)}),n=n.map(function(e){return e.map(function(e){return{name:"rft."+e,label:"date"===e?"nui.citationLinker."+e:"citationLinker."+e,uiType:"date"===e?u.FormBuilderEnums.UI_TYPE.DATE_DROPDOWN:u.FormBuilderEnums.UI_TYPE.TEXT}})}),this.isJtitle=this.isParamInDisplay(r,"jtitle"),this.isDoi=this.isParamInDisplay(r,"doi"),this.isPmid=this.isParamInDisplay(r,"pmid"),this.isDate=this.isParamInDisplay(r,"date")),n},e.prototype.isParamInDisplay=function(e,t){return v(e,t)!==-1},e.prototype.changeTab=function(){var e;this.activeTab===_.ARTICLE?e=this.articleMappingFields:this.activeTab===_.BOOK?e=this.bookMappingFields:this.activeTab===_.JOURNAL&&(e=this.journalMappingFields),this.sortedOpenURLFields=this.initOpenURLFields(this.activeTab,e),this.clearForm()},e.prototype.clearForm=function(){this.formData={},this.initTitleSearch()},e.prototype.isSfx=function(){return"ALMA_OPENURL"!==this.baseURL},e.prototype.getBaseURL=function(){return this.configurationUtil.isSuprima()?"/discovery/openurl":"ALMA_OPENURL"===this.baseURL?"/openurl/"+this.institution_code+"/"+this.vid:this.$sce.trustAsResourceUrl(this.baseURL)},e.prototype.getTitleSearch=function(){return"startswith"===this.titleSearch?"begins":this.titleSearch},e.prototype.isOpenURLFieldFilled=function(e){return!!(y(this.formData,e)&&this.formData[e].length>0)},e.prototype.calcDate=function(){var e="";return this.formData.hasOwnProperty("rft.date")&&this.formData["rft.date"].year&&(e=this.formData["rft.date"].year,this.formData["rft.date"].month&&(e=e+"-"+this.formData["rft.date"].month,this.formData["rft.date"].day&&(e=e+"-"+this.formData["rft.date"].day))),e},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},Object.defineProperty(e.prototype,"viewCode",{get:function(){return this.vid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"institutionCode",{get:function(){return this.institution_code},enumerable:!0,configurable:!0}),r([p.beacon({p:"citation-linker",op:"citationLinkerClick"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"callBeacon",null),e=r([a.Component({selector:"prm-citation-linker",templateUrl:"components/citationLinker/citation-linker.html"}),o(3,d.Inject("$sce")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.CitationLinkerService&&s.CitationLinkerService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.MappingTablesCache&&c.MappingTablesCache)&&n||Object,"function"==typeof(S="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&S||Object,Object,"function"==typeof(O="undefined"!=typeof m.ConfigurationUtil&&m.ConfigurationUtil)&&O||Object,"function"==typeof(T="undefined"!=typeof g.MediaQueries&&g.MediaQueries)&&T||Object])],e);var t,n,S,O,T}();t.PrmCitationLinker=S;var _;!function(e){e.ARTICLE="article",e.BOOK="book",e.JOURNAL="journal"}(_||(_={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(344),s=n(0),c=n(399),u=n(12),l=n(8),f=n(5),p=n(18),d=(n(140),n(69)),h=n(395),m=function(){function e(e,t,n,r){var i=this;this.formFieldService=e,this.actionIcons=t,this.$timeout=n,this.mediaQueries=r,this.filterDates=f.bind(this,this.filterDatesUnbound),this.days=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.months=["01","02","03","04","05","06","07","08","09","10","11","12"],this.hours=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],this.minutes=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],this.yearRegex="\\d+",this.delayForLabels=!1,this.fieldUiTypeHtml={text:"components/infra/formBuilder/field/form-field-text.html",textarea:"components/infra/formBuilder/field/form-field-textarea.html",checkbox:"components/infra/formBuilder/field/form-field-checkbox.html",readonly:"components/infra/formBuilder/field/form-field.html",password:"components/infra/formBuilder/field/form-field.html",dropdown:"components/infra/formBuilder/field/form-field-dropdown.html",comboboxmultiplenew:"components/infra/formBuilder/field/form-field-multiselectdropdown.html",radio:"components/infra/formBuilder/field/form-field-radio.html",date:"components/infra/formBuilder/field/form-field-date.html",label:"components/infra/formBuilder/field/form-field-label.html",multiLabel:"components/infra/formBuilder/field/form-field-multi-label.html",hidden:"components/infra/formBuilder/field/form-field-hidden.html",link:"components/infra/formBuilder/field/form-field-link.html",datetime:"components/infra/formBuilder/field/form-field-datetime.html",dateAndHours:"components/infra/formBuilder/field/form-field-dateAndHours.html",dateAndTime:"components/infra/formBuilder/field/form-field-dateAndTime.html",dateDropdown:"components/infra/formBuilder/field/form-field-date-dropdown.html",dateNgrs:"components/infra/formBuilder/field/form-field-date-needed-by.html"},this.$timeout(function(){i.delayForLabels=!0},400)}return e.prototype.expandList=function(e){document.querySelector('*[name="'+this.field.name+'"]').click()},Object.defineProperty(e.prototype,"formData",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMsgPlaceholders",{get:function(){if(this.field.label.length<=0){var e=this.field.options[0].label;return{idx_0:'<span class="lowercase">{{::"'+e+'" |translate}}</span>'}}return{idx_0:'<span class="lowercase">{{::"'+this.field.label+'" |translate}}</span>'}},enumerable:!0,configurable:!0}),e.prototype.getFormFieldHtml=function(){return this.field&&this.fieldUiTypeHtml[this.field.uiType]||(this.field.uiType.method?this.field.uiType=this.field.uiType.method(this.data):this.field.uiType="text"),this.fieldUiTypeHtml[this.field.uiType]},e.prototype.getCatagories=function(){var e=this;if(!this.field.options)return[];var t=this.field.options.map(function(t,n,r){return e.parseCatagories(t)}).filter(this.filterEmpty);return d(t)},e.prototype.getCurrentDate=function(){var e=new Date;return h(e,"yyyy-mm-dd'T'HH:MM:ss")},e.prototype.parseCatagories=function(e){return e.category},e.prototype.filterEmpty=function(e){return e},e.prototype.filterDatesUnbound=function(e){if(!this.field)return!0;if(this.field.populator&&this.field.populator.params&&this.field.populator.params.allow)return this.field.populator.params.allow===u.FormBuilderEnums.FUTURE_DATES&&e>=(new Date).setHours(0,0,0,0);if(!this.field.options||this.field.options.length<=0)return!0;if(this.field.populator&&this.field.populator.params&&this.field.populator.params.allow)return this.field.populator.params.allow===u.FormBuilderEnums.FUTURE_DATES&&e>=(new Date).setHours(0,0,0,0);if(!this.field.options||this.field.options.length<=0)return!0;var t=!1;return p(this.field.options,function(n){t||(t=e.getDate()===n.day&&e.getMonth()+1===n.month&&e.getFullYear()===n.year)}),t},r([s.Input(),i("design:type","function"==typeof(t="undefined"!=typeof a.IFormField&&a.IFormField)&&t||Object)],e.prototype,"field",void 0),r([s.Input(),i("design:type",Object)],e.prototype,"data",void 0),r([s.Input(),i("design:type",Object)],e.prototype,"form",void 0),e=r([s.Component({selector:"prm-form-field",templateUrl:"components/infra/formBuilder/field/form-field.html"}),o(1,s.Inject("actionIcons")),o(2,s.Inject("$timeout")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.FormFieldService&&c.FormFieldService)&&n||Object,Object,Object,"function"==typeof(m="undefined"!=typeof l.MediaQueries&&l.MediaQueries)&&m||Object])],e);var t,n,m}();t.PrmFormField=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(885),a=n(431),s=n(887),c=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmUploadFile],providers:[a.DepositFormService],imports:[s.UploadFileModule]})],e)}();t.DepositFormModule=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(407),c=function(){function e(e,t,n){this.accountIcons=e,this.Upload=t,this.uploadFileService=n,this.depositfiles=[],this._mode="normal",this._filesFormat="*",this.allowSelect="hover"}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filesFormat",{get:function(){return this._filesFormat},set:function(e){this._filesFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this.uploadFileService.files},set:function(e){this.uploadFileService.files=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filename",{get:function(){return this._filename},set:function(e){this._filename=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileFailed",{get:function(){return this.uploadFileService.fileFailed},enumerable:!0,configurable:!0}),e.prototype.upload=function(){this.uploadFileService.depositProfile=this.depositprofile,this.uploadFileService.amazonInfo=this.amazoninfo,this.uploadFileService.uploadFiles(this.depositfiles)},r([a.Input(),i("design:type",Object)],e.prototype,"amazoninfo",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"depositfiles",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"depositprofile",void 0),e=r([a.Component({selector:"prm-upload-file",templateUrl:"components/infra/deposit/uploadFile/upload-file.html"}),o(0,a.Inject("accountIcons")),o(1,a.Inject("Upload")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.UploadFileService&&s.UploadFileService)&&t||Object])],e);var t}();t.PrmUploadFile=c},function(e,t){!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(e){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,r){e.__listeners[n]=r,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,r,i){n(this),this.__url=r;try{e.apply(this,[t,r,i])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,e.apply(this,[t,"_fix_for_ie_crossdomain__",i]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,r){if("__setXHR_"===t){n(this);var i=r(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=r,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var r=arguments[0],i={url:n.__url,jsonp:!1,cache:!0,complete:function(e,r){e&&angular.isString(e)&&e.indexOf("#2174")!==-1&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&t(n,"status",function(){return 0===r.status&&e&&"abort"!==e?500:r.status}),void 0!==r.statusText&&t(n,"statusText",function(){return r.statusText}),t(n,"readyState",function(){return 4}),void 0!==r.response&&t(n,"response",function(){return r.response});var i=r.responseText||(e&&0===r.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return i}),t(n,"response",function(){return i}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};i.data={},i.files={};for(var o=0;o<r.data.length;o++){var a=r.data[o];null!=a.val&&null!=a.val.name&&null!=a.val.size&&null!=a.val.type?i.files[a.key]=a.val:i.data[a.key]=a.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function t(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var r,i,o,a,s,c=document.createElement("script"),u=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)r=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(o=0;o<u.length;o++)if(s=u[o].src,a=s.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),a>-1){i=s.substring(0,a+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),c.setAttribute("src",r||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(c)}FileAPI.ngfFixIE=function(r,i,o){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var a=function(){r.attr("disabled")?i&&i.removeClass("js-fileapi-wrapper"):(i.attr("__ngf_flash_")||(i.unbind("change"),i.unbind("click"),i.bind("change",function(e){s.apply(this,[e]),o.apply(this,[e])}),i.attr("__ngf_flash_","true")),i.addClass("js-fileapi-wrapper"),e(r)||i.css("position","absolute").css("top",n(r[0]).top+"px").css("left",n(r[0]).left+"px").css("width",r[0].offsetWidth+"px").css("height",r[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",r.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"))};r.bind("mouseenter",a);var s=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var r={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",r)));var i;"load"===r.type?(e.onloadend&&e.onloadend(n("loadend",r)),i=n("load",r),e.onload&&e.onload(i),e.dispatchEvent(i)):"progress"===r.type?(i=n("progress",r),e.onprogress&&e.onprogress(i),e.dispatchEvent(i)):(i=n("error",r),e.onerror&&e.onerror(i),e.dispatchEvent(i))};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,r)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,r)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,r)},this.readAsText=function(e){FileAPI.readAsText(e,r)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var n=angular.module("ngFileUpload",[]);n.version="8.0.4",n.service("UploadBase",["$http","$q","$timeout",function(e,t,r){function i(n){function i(e){u.notify&&u.notify(e),l.progressFunc&&r(function(){l.progressFunc(e)})}function s(e){return null!=n._start&&a?{loaded:e.loaded+n._start,total:n._file.size,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function c(){e(n).then(function(e){a&&n._chunkSize&&!n._finished?(i({loaded:n._end,total:n._file.size,config:n,type:"progress"}),o.upload(n)):(n._finished&&delete n._finished,u.resolve(e))},function(e){u.reject(e)},function(e){u.notify(e)})}n.method=n.method||"POST",n.headers=n.headers||{};var u=n._deferred=n._deferred||t.defer(),l=u.promise;return n.headers.__setXHR_=function(){return function(e){e&&e instanceof XMLHttpRequest&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,i(s(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,i(s(e)))},!1))}},a?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,c()):n.resumeSizeUrl?e.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),c()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,c()},function(e){throw e}):c():c(),l.success=function(e){return l.then(function(t){e(t.data,t.status,t.headers,n)}),l},l.error=function(e){return l.then(null,function(t){e(t.data,t.status,t.headers,n)}),l},l.progress=function(e){return l.progressFunc=e,l.then(null,null,function(t){e(t)}),l},l.abort=l.pause=function(){return n.__XHR&&r(function(){n.__XHR.abort()}),l},l.xhr=function(e){return n.xhrFn=function(t){return function(){t&&t.apply(l,arguments),e.apply(l,arguments)}}(n.xhrFn),l},l}var o=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var a=this.isResumeSupported();this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){var t=new Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.upload=function(e){function t(e){return e instanceof Blob||e.flashId&&e.name&&e.size}function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&a){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function r(i,o,a){if(void 0!==o)if(angular.isDate(o)&&(o=o.toISOString()),angular.isString(o))i.append(a,o);else if(t(o)){var s=n(o,i),c=a.split(",");c[1]&&(s.ngfName=c[1].replace(/^\s+|\s+$/g,""),a=c[0]),e._fileKey=e._fileKey||a,i.append(a,s,s.ngfName||s.name)}else if(angular.isObject(o)){for(var u in o)if(o.hasOwnProperty(u)){var l=null==e.objectKey?"[i]":e.objectKey;o.length&&parseInt(u)>-1&&(l=null==e.arrayKey?l:e.arrayKey),r(i,o[u],a+l.replace(/[ik]/g,u))}}else i.append(a,o)}function s(){e._chunkSize=o.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,i=new FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var o=t[n];e.formDataAppender?e.formDataAppender(i,n,o):r(i,o,n)}return i})}return e._isDigested||(e._isDigested=!0,
s()),i(e)},this.http=function(t){return t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=o.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1e3*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1e6*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1e9*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=n.version}]),n.service("Upload",["$parse","$timeout","$compile","UploadResize",function(e,t,n,r){var i=r;return i.getAttrWithDefaults=function(e,t){return null!=e[t]?e[t]:null==i.defaults[t]?i.defaults[t]:i.defaults[t].toString()},i.attrGetter=function(t,n,r,i){if(!r)return this.getAttrWithDefaults(n,t);try{return i?e(this.getAttrWithDefaults(n,t))(r,i):e(this.getAttrWithDefaults(n,t))(r)}catch(e){if(t.search(/min|max|pattern/i))return this.getAttrWithDefaults(n,t);throw e}},i.updateModel=function(n,r,o,a,s,c,u){function l(){var u=s&&s.length?s[0]:null;if(n){var l=!i.attrGetter("ngfMultiple",r,o)&&!i.attrGetter("multiple",r)&&!m;e(i.attrGetter("ngModel",r)).assign(o,l?u:s)}var f=i.attrGetter("ngfModel",r);f&&e(f).assign(o,s),a&&e(a)(o,{$files:s,$file:u,$newFiles:p,$duplicateFiles:d,$event:c}),t(function(){})}function f(e,t){var n=i.attrGetter("ngfResize",r,o);if(!n||!i.isResizeSupported())return t();for(var a=e.length,s=function(){a--,0===a&&t()},c=function(t){return function(n){e.splice(t,1,n),s()}},u=function(e){return function(t){s(),e.$error="resize",e.$errorParam=(t?(t.message?t.message:t)+": ":"")+(e&&e.name)}},l=0;l<e.length;l++){var f=e[l];f.$error||0!==f.type.indexOf("image")?s():i.resize(f,n.width,n.height,n.quality).then(c(l),u(f))}}var p=s,d=[],h=(n&&n.$modelValue||r.$$ngfPrevFiles||[]).slice(0),m=i.attrGetter("ngfKeep",r,o);if(m===!0){if(!s||!s.length)return;var g=!1;if(i.attrGetter("ngfKeepDistinct",r,o)===!0){for(var y=h.length,v=0;v<s.length;v++){for(var b=0;b<y;b++)if(s[v].name===h[b].name){d.push(s[v]);break}b===y&&(h.push(s[v]),g=!0)}if(!g)return;s=h}else s=h.concat(s)}r.$$ngfPrevFiles=s,u?l():i.validate(s,n,r,o,i.attrGetter("ngfValidateLater",r),function(){if(i.attrGetter("ngfValidOnly",r,o)===!0){var e=[];angular.forEach(s,function(t){t.$error||e.push(t)}),s=e}f(s,function(){t(function(){l()})})});for(var S=h.length;S--;){var _=h[S];window.URL&&_.blobUrl&&(URL.revokeObjectURL(_.blobUrl),delete _.blobUrl)}},i}]),n.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return e.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(e)}function o(e,t,n,r,o,s,c,u){function l(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function f(){return b("ngfChange")||b("ngfSelect")}function p(t){for(var i=t.__files_||t.target&&t.target.files,o=[],a=0;a<i.length;a++)o.push(i[a]);u.updateModel(r,n,e,f(),o.length?o:null,t)}function d(e){if(t!==e)for(var n=0;n<t[0].attributes.length;n++){var r=t[0].attributes[n];"type"!==r.name&&"class"!==r.name&&"id"!==r.name&&"style"!==r.name&&(null!=r.value&&""!==r.value||("required"===r.name&&(r.value="required"),"multiple"===r.name&&(r.value="multiple")),e.attr(r.name,r.value))}}function h(){if(l())return t;var e=angular.element('<input type="file">');return d(e),e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),a.push({el:t,ref:e}),document.body.appendChild(e[0]),e}function m(n){if(t.attr("disabled")||b("ngfSelectDisabled",e))return!1;var r=g(n);return null!=r?r:(y(n),i(navigator.userAgent)?setTimeout(function(){O[0].click()},0):O[0].click(),!1)}function g(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return _=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var n=t?t[0].clientY:0;if(Math.abs(n-_)>20)return!1}}function y(t){b("ngfResetOnClick",e)!==!1&&O.val()&&(O.val(null),u.updateModel(r,n,e,f(),null,t,!0))}function v(e){if(O&&!O.attr("__ngf_ie10_Fix_")){if(!O[0].parentNode)return void(O=null);e.preventDefault(),e.stopPropagation(),O.unbind("click");var t=O.clone();return O.replaceWith(t),O=t,O.attr("__ngf_ie10_Fix_","true"),O.bind("change",p),O.bind("click",v),O[0].click(),!1}O.removeAttr("__ngf_ie10_Fix_")}var b=function(e,t){return u.attrGetter(e,n,t)},S=[];S.push(e.$watch(b("ngfMultiple"),function(){O.attr("multiple",b("ngfMultiple",e))})),S.push(e.$watch(b("ngfCapture"),function(){O.attr("capture",b("ngfCapture",e))})),n.$observe("accept",function(){O.attr("accept",b("accept"))}),S.push(function(){n.$$observers&&delete n.$$observers.accept});var _=0,O=t;l()||(O=h()),O.bind("change",p),l()?t.bind("click",y):t.bind("click touchstart touchend",m),u.registerValidators(r,O,n,e),navigator.appVersion.indexOf("MSIE 10")!==-1&&O.bind("click",v),e.$on("$destroy",function(){l()||O.remove(),angular.forEach(S,function(e){e()})}),s(function(){for(var e=0;e<a.length;e++){var t=a[e];document.body.contains(t.el[0])||(a.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,O,p)}var a=[];return{restrict:"AEC",require:"?ngModel",link:function(i,a,s,c){o(i,a,s,c,e,t,n,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,r,i,o,a,s,c){function u(e){var a=t.attrGetter("ngfNoObjectUrl",o,r);t.dataUrl(e,a).finally(function(){n(function(){var t=(a?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;c?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ngf-hide"):i.addClass("ngf-hide")})})}n(function(){var n=r.$watch(o[a],function(n){var r=s;if("ngfThumbnail"===a&&(r||(r={width:i[0].clientWidth,height:i[0].clientHeight}),0===r.width&&window.getComputedStyle)){var o=getComputedStyle(i[0]);r={width:parseInt(o.width.slice(0,-2)),height:parseInt(o.height.slice(0,-2))}}return angular.isString(n)?(i.removeClass("ngf-hide"),c?i.css("background-image","url('"+n+"')"):i.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(i[0]))||c&&0!==n.type.indexOf("image")?i.addClass("ngf-hide"):r&&t.isResizeSupported()?t.resize(n,r.width,r.height,r.quality).then(function(e){u(e)},function(e){throw e}):u(n))});r.$on("$destroy",function(){n()})})}n.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.dataUrl=function(e,r){if(r&&null!=e.$ngfDataUrl||!r&&null!=e.$ngfBlobUrl){var i=n.defer();return t(function(){i.resolve(r?e.$ngfDataUrl:e.$ngfBlobUrl)}),i.promise}var o=r?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(o)return o;var a=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||e.size<2e4)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!r){var i;try{i=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl="",a.reject()})}t(function(){e.$ngfBlobUrl=i,i&&a.resolve(i)})}else{var o=new FileReader;o.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,a.resolve(n.target.result)})},o.onerror=function(){t(function(){e.$ngfDataUrl="",a.reject()})},o.readAsDataURL(e)}}else t(function(){e[r?"dataUrl":"blobUrl"]="",a.reject()})}),o=r?e.$$ngfDataUrlPromise=a.promise:e.$$ngfBlobUrlPromise=a.promise,o.finally(function(){delete e[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},r}]);var r=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(r[0]),n.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfSrc",e.attrGetter("ngfResize",o,r),!1)}}}]),n.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfBackground",e.attrGetter("ngfResize",o,r),!0)}}}]),n.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){var a=e.attrGetter("ngfSize",o,r);t(e,n,r,i,o,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",o,r))}}}])}(),n.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var o=0;o<i.length;o++){var a=r(i[o]);a.regexp?(t+="("+a.regexp+")",o<i.length-1&&(t+="|")):n=n.concat(a.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}var i=e;return i.registerValidators=function(e,t,n,r){function o(e){angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})}e&&(e.$ngfValidations=[],e.$formatters.push(function(a){return i.attrGetter("ngfValidateLater",n,r)||!e.$$ngfValidated?(i.validate(a,e,n,r,!1,function(){o(e),e.$$ngfValidated=!1}),a&&0===a.length&&(a=null),!t||null!=a&&0!==a.length||t.val()&&t.val(null)):(o(e),e.$$ngfValidated=!1),a}))},i.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");i=null!=e.type&&o.test(e.type)||null!=e.name&&o.test(e.name)}for(var a=n.excludes.length;a--;){var s=new RegExp(n.excludes[a],"i");i=i&&(null==e.type||s.test(e.type))&&(null==e.name||s.test(e.name))}return i},i.validate=function(e,t,n,r,o,a){function s(n,r,i){if(e){for(var o="ngf"+n[0].toUpperCase()+n.substr(1),a=e.length,s=null;a--;){var c=e[a],l=u(o,{$file:c});null==l&&(l=r(u("ngfValidate")||{}),s=null==s||s),null!=l&&(i(c,l)||(c.$error=n,c.$errorParam=l,e.splice(a,1),s=!1))}null!==s&&t.$ngfValidations.push({name:n,valid:s})}}function c(n,r,i,o,s){if(e){var c=0,f=!1,p="ngf"+n[0].toUpperCase()+n.substr(1);e=void 0===e.length?[e]:e,angular.forEach(e,function(e){if(0!==e.type.search(i))return!0;var d=u(p,{$file:e})||r(u("ngfValidate",{$file:e})||{});d&&(l++,c++,o(e,d).then(function(t){s(t,d)||(e.$error=n,e.$errorParam=d,f=!0)},function(){u("ngfValidateForce",{$file:e})&&(e.$error=n,e.$errorParam=d,f=!0)}).finally(function(){l--,c--,c||t.$ngfValidations.push({name:n,valid:!f}),l||a.call(t,t.$ngfValidations)}))})}}t=t||{},t.$ngfValidations=t.$ngfValidations||[],angular.forEach(t.$ngfValidations,function(e){e.valid=!0});var u=function(e,t){return i.attrGetter(e,n,r,t)};if(o)return void a.call(t);if(t.$$ngfValidated=!0,null==e||0===e.length)return void a.call(t);if(e=void 0===e.length?[e]:e.slice(0),s("pattern",function(e){return e.pattern},i.validatePattern),s("minSize",function(e){return e.size&&e.size.min},function(e,t){return e.size>=i.translateScalars(t)}),s("maxSize",function(e){return e.size&&e.size.max},function(e,t){return e.size<=i.translateScalars(t)}),s("validateFn",function(){return null},function(e,t){return t===!0||null===t||""===t}),!e.length)return void a.call(t,t.$ngfValidations);var l=0;c("maxHeight",function(e){return e.height&&e.height.max},/image/,this.imageDimensions,function(e,t){return e.height<=t}),c("minHeight",function(e){return e.height&&e.height.min},/image/,this.imageDimensions,function(e,t){return e.height>=t}),c("maxWidth",function(e){return e.width&&e.width.max},/image/,this.imageDimensions,function(e,t){return e.width<=t}),c("minWidth",function(e){return e.width&&e.width.min},/image/,this.imageDimensions,function(e,t){return e.width>=t}),c("ratio",function(e){return e.ratio},/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++){var o=n[i],a=o.search(/x/i);o=a>-1?parseFloat(o.substring(0,a))/parseFloat(o.substring(a+1)):parseFloat(o),Math.abs(e.width/e.height-o)<1e-4&&(r=!0)}return r}),c("maxDuration",function(e){return e.duration&&e.duration.max},/audio|video/,this.mediaDuration,function(e,t){return e<=i.translateScalars(t)}),c("minDuration",function(e){return e.duration&&e.duration.min},/audio|video/,this.mediaDuration,function(e,t){return e>=i.translateScalars(t)}),c("validateAsyncFn",function(){return null},/./,function(e,t){return t},function(e){return e===!0||null===e||""===e}),l||a.call(t,t.$ngfValidations)},i.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var o=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void o.reject("not image"):void i.dataUrl(e).then(function(t){function r(){var t=s[0].clientWidth,n=s[0].clientHeight;s.remove(),e.$ngfWidth=t,e.$ngfHeight=n,o.resolve({width:t,height:n})}function i(){s.remove(),o.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].clientWidth?r():c>10?i():a())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed");s.on("load",r),s.on("error",i);var c=0;a(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){o.reject("load error")})}),e.$ngfDimensionPromise=o.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},i.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var o=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void o.reject("not media"):void i.dataUrl(e).then(function(t){function r(){var t=s[0].duration;e.$ngfDuration=t,s.remove(),o.resolve(t)}function i(){s.remove(),o.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].duration?r():c>10?i():a())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",r),s.on("error",i);var c=0;a(),angular.element(document.body).append(s)},function(){o.reject("load error")})}),e.$ngfDurationPromise=o.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},i}]),n.service("UploadResize",["UploadValidate","$q","$timeout",function(e,t,n){var r=e,i=function(e,t,n,r){var i=Math.min(n/e,r/t);return{width:e*i,height:t*i}},o=function(e,n,r,o,a){var s=t.defer(),c=document.createElement("canvas"),u=document.createElement("img");return 0===n&&(n=u.width,r=u.height),u.onload=function(){try{var e=i(u.width,u.height,n,r);c.width=e.width,c.height=e.height;var t=c.getContext("2d");t.drawImage(u,0,0,e.width,e.height),s.resolve(c.toDataURL(a||"image/WebP",o||1))}catch(e){s.reject(e)}},u.onerror=function(){s.reject()},u.src=e,s.promise},a=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})};return r.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")},r.resize=function(e,i,s,c){var u=t.defer();return 0!==e.type.indexOf("image")?(n(function(){u.resolve("Only images are allowed for resizing!")}),u.promise):(r.dataUrl(e,!0).then(function(t){o(t,i,s,c,e.type).then(function(t){var n=a(t);n.name=e.name,u.resolve(n)},function(){u.reject()})},function(){u.reject()}),u.promise)},r}]),function(){function e(e,n,r,i,o,a,s,c){function u(){return n.attr("disabled")||d("ngfDropDisabled",e)}function l(e,t,n,r){var i=d("ngfDragOverClass",e,{$event:n}),o="dragover";if(angular.isString(i))o=i;else if(i&&(i.delay&&(y=i.delay),i.accept||i.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=i.pattern||d("ngfPattern",e,{$event:n}),u=a.length;u--;){if("file"!==a[u].kind||!c.validatePattern(a[u],s)){o=i.reject;break}o=i.accept}else o=i.accept}r(o)}function f(e,t,n,r){function i(e,t,n){if(null!=t)if(t.isDirectory){var r=(n||"")+t.name;e.push({name:t.name,type:"directory",path:r});var o=t.createReader(),a=[];c++;var s=function(){o.readEntries(function(r){try{if(r.length)a=a.concat(Array.prototype.slice.call(r||[],0)),s();else{for(var o=0;o<a.length;o++)i(e,a[o],(n?n:"")+t.name+"/");c--}}catch(e){c--,console.error(e)}},function(){c--})};s()}else c++,t.file(function(t){try{c--,t.path=(n?n:"")+t.name,e.push(t)}catch(e){c--,console.error(e)}},function(){c--})}var o=[],c=0,u=e.dataTransfer.items;if(u&&u.length>0&&"file"!==s.protocol())for(var l=0;l<u.length;l++){if(u[l].webkitGetAsEntry&&u[l].webkitGetAsEntry()&&u[l].webkitGetAsEntry().isDirectory){var f=u[l].webkitGetAsEntry();if(f.isDirectory&&!n)continue;null!=f&&i(o,f)}else{var p=u[l].getAsFile();null!=p&&o.push(p)}if(!r&&o.length>0)break}else{var d=e.dataTransfer.files;if(null!=d)for(var h=0;h<d.length&&(o.push(d.item(h)),r||!(o.length>0));h++);}var m=0;!function e(n){a(function(){if(c)10*m++<2e4&&e(10);else{if(!r&&o.length>1){for(l=0;"directory"===o[l].type;)l++;o=[o[l]]}t(o)}},n||0)}()}var p=t(),d=function(e,t,n){return c.attrGetter(e,r,t,n)};if(d("dropAvailable")&&a(function(){e[d("dropAvailable")]?e[d("dropAvailable")].value=p:e[d("dropAvailable")]=p}),!p)return void(d("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));c.registerValidators(i,null,r,e);var h,m=null,g=o(d("ngfStopPropagation")),y=1;n[0].addEventListener("dragover",function(t){if(!u()){if(t.preventDefault(),g(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}a.cancel(m),h||(h="C",l(e,r,t,function(e){h=e,n.addClass(h)}))}},!1),n[0].addEventListener("dragenter",function(t){u()||(t.preventDefault(),g(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(){u()||(m=a(function(){h&&n.removeClass(h),h=null},y||1))},!1),n[0].addEventListener("drop",function(t){u()||(t.preventDefault(),g(e)&&t.stopPropagation(),h&&n.removeClass(h),h=null,f(t,function(n){c.updateModel(i,r,e,d("ngfChange")||d("ngfDrop"),n,t)},d("ngfAllowDir",e)!==!1,d("multiple")||d("ngfMultiple",e)))},!1),n[0].addEventListener("paste",function(t){if(!u()){var n=[],o=t.clipboardData||t.originalEvent.clipboardData;if(o&&o.items){for(var a=0;a<o.items.length;a++)o.items[a].type.indexOf("image")!==-1&&n.push(o.items[a].getAsFile());c.updateModel(i,r,e,d("ngfChange")||d("ngfDrop"),n,t)}}},!1)}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}n.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(t,n,r,i){return{restrict:"AEC",require:"?ngModel",link:function(o,a,s,c){e(o,a,s,c,t,n,r,i)}}}]),n.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),n.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,o,a){if(t()){var s=e(r.attrGetter("ngfDropAvailable",a));n(function(){s(i),s.assign&&s.assign(i,!0)})}}}])}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(407),a=n(408),s=n(888),c=function(){function e(){}return e=r([i.NgModule({declarations:[],providers:[o.UploadFileService],imports:[a,s]})],e)}();t.UploadFileModule=c},function(e,t,n){var r,i,o;!function(a,s){i=[n(5),n(889)],r=s,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";var n="ljungmann.fileMd5";return e.module(n,[]).provider("fileMd5Service",[function(){var n={chunkSize:2097152};this.configure=function(t){return e.extend(n,t),this},this.$get=["$q",function(e){return{md5:function(r){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=0,a=Math.ceil(r.size/n.chunkSize),s=new t.ArrayBuffer,c=e.defer(),u=c.promise,l=function(e){if(s.append(e.target.result),c.notify({loaded:o*n.chunkSize+e.loaded,total:r.size}),o++,o<a)p();else{var t=s.end();c.resolve(t)}},f=function(e){c.reject(e)},p=function(){var e=new FileReader;e.onload=l,e.onerror=f;var t=o*n.chunkSize,a=t+n.chunkSize>=r.size?r.size:t+n.chunkSize;e.readAsArrayBuffer(i.call(r,t,a))};return u.success=function(e){return u.then(function(t){e(t)}),u},u.error=function(e){return u.then(null,function(t){e(t)}),u},u.progress=function(e){return u.then(null,null,function(t){e(t)}),u},p(),u}}}]}]),n})},function(e,t,n){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t,n,r,i,o){return t=b(b(t,e),b(r,o)),b(t<<i|t>>>32-i,n)}function n(e,n,r,i,o,a,s){return t(n&r|~n&i,e,n,o,a,s)}function r(e,n,r,i,o,a,s){return t(n&i|r&~i,e,n,o,a,s)}function i(e,n,r,i,o,a,s){return t(n^r^i,e,n,o,a,s)}function o(e,n,r,i,o,a,s){return t(r^(n|~i),e,n,o,a,s)}function a(e,t){var a=e[0],s=e[1],c=e[2],u=e[3];a=n(a,s,c,u,t[0],7,-680876936),u=n(u,a,s,c,t[1],12,-389564586),c=n(c,u,a,s,t[2],17,606105819),s=n(s,c,u,a,t[3],22,-1044525330),a=n(a,s,c,u,t[4],7,-176418897),u=n(u,a,s,c,t[5],12,1200080426),c=n(c,u,a,s,t[6],17,-1473231341),s=n(s,c,u,a,t[7],22,-45705983),a=n(a,s,c,u,t[8],7,1770035416),u=n(u,a,s,c,t[9],12,-1958414417),c=n(c,u,a,s,t[10],17,-42063),s=n(s,c,u,a,t[11],22,-1990404162),a=n(a,s,c,u,t[12],7,1804603682),u=n(u,a,s,c,t[13],12,-40341101),c=n(c,u,a,s,t[14],17,-1502002290),s=n(s,c,u,a,t[15],22,1236535329),a=r(a,s,c,u,t[1],5,-165796510),u=r(u,a,s,c,t[6],9,-1069501632),c=r(c,u,a,s,t[11],14,643717713),s=r(s,c,u,a,t[0],20,-373897302),a=r(a,s,c,u,t[5],5,-701558691),u=r(u,a,s,c,t[10],9,38016083),c=r(c,u,a,s,t[15],14,-660478335),s=r(s,c,u,a,t[4],20,-405537848),a=r(a,s,c,u,t[9],5,568446438),u=r(u,a,s,c,t[14],9,-1019803690),c=r(c,u,a,s,t[3],14,-187363961),s=r(s,c,u,a,t[8],20,1163531501),a=r(a,s,c,u,t[13],5,-1444681467),u=r(u,a,s,c,t[2],9,-51403784),c=r(c,u,a,s,t[7],14,1735328473),s=r(s,c,u,a,t[12],20,-1926607734),a=i(a,s,c,u,t[5],4,-378558),u=i(u,a,s,c,t[8],11,-2022574463),c=i(c,u,a,s,t[11],16,1839030562),s=i(s,c,u,a,t[14],23,-35309556),a=i(a,s,c,u,t[1],4,-1530992060),u=i(u,a,s,c,t[4],11,1272893353),c=i(c,u,a,s,t[7],16,-155497632),s=i(s,c,u,a,t[10],23,-1094730640),a=i(a,s,c,u,t[13],4,681279174),u=i(u,a,s,c,t[0],11,-358537222),c=i(c,u,a,s,t[3],16,-722521979),s=i(s,c,u,a,t[6],23,76029189),a=i(a,s,c,u,t[9],4,-640364487),u=i(u,a,s,c,t[12],11,-421815835),c=i(c,u,a,s,t[15],16,530742520),s=i(s,c,u,a,t[2],23,-995338651),a=o(a,s,c,u,t[0],6,-198630844),u=o(u,a,s,c,t[7],10,1126891415),c=o(c,u,a,s,t[14],15,-1416354905),s=o(s,c,u,a,t[5],21,-57434055),a=o(a,s,c,u,t[12],6,1700485571),u=o(u,a,s,c,t[3],10,-1894986606),c=o(c,u,a,s,t[10],15,-1051523),s=o(s,c,u,a,t[1],21,-2054922799),a=o(a,s,c,u,t[8],6,1873313359),u=o(u,a,s,c,t[15],10,-30611744),c=o(c,u,a,s,t[6],15,-1560198380),s=o(s,c,u,a,t[13],21,1309151649),a=o(a,s,c,u,t[4],6,-145523070),u=o(u,a,s,c,t[11],10,-1120210379),c=o(c,u,a,s,t[2],15,718787259),s=o(s,c,u,a,t[9],21,-343485551),e[0]=b(a,e[0]),e[1]=b(s,e[1]),e[2]=b(c,e[2]),e[3]=b(u,e[3])}function s(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function c(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function u(e){var t,n,r,i,o,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)a(l,s(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(l,r),t=0;t<16;t+=1)r[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),c=parseInt(i[1],16)||0,r[14]=o,r[15]=c,a(l,r),l}function l(e){var t,n,r,i,o,s,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)a(l,c(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(l,r),t=0;t<16;t+=1)r[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,r[14]=o,r[15]=s,a(l,r),l}function f(e){var t,n="";for(t=0;t<4;t+=1)n+=S[e>>8*t+4&15]+S[e>>8*t&15];return n}function p(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function d(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function h(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}function m(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function g(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function y(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function v(){this.reset()}var b=function(e,t){return e+t&4294967295},S=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==p(u("hello"))&&(b=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,c=this.byteLength,u=t(n,c),l=c;return r!==e&&(l=t(r,c)),u>l?new ArrayBuffer(0):(i=l-u,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,u,i),a.set(s),o)}}(),v.prototype.append=function(e){return this.appendBinary(d(e)),this},v.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)a(this._hash,s(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},v.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=p(this._hash),e&&(n=y(n)),this.reset(),n},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},v.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(a(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,a(this._hash,e)},v.hash=function(e,t){return v.hashBinary(d(e),t)},v.hashBinary=function(e,t){var n=u(e),r=p(n);return t?y(r):r},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(e){var t,n=g(this._buff.buffer,e,!0),r=n.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)a(this._hash,c(n.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=p(this._hash),e&&(n=y(n)),this.reset(),n},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var e=v.prototype.getState.call(this);return e.buff=m(e.buff),e},v.ArrayBuffer.prototype.setState=function(e){return e.buff=h(e.buff,!0),v.prototype.setState.call(this,e)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(e,t){var n=l(new Uint8Array(e)),r=p(n);return t?y(r):r},v})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(891),a=n(253),s=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmDepositsLink],providers:[a.AccountOverviewService],imports:[]})],e)}();t.DepositsLinkModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(253),s=(n(92),n(5),function(){function e(e){this.accountOverviewService=e,this.accountOverviewService.updateCounters()}return Object.defineProperty(e.prototype,"depositsCounter",{get:function(){return this.accountOverviewService.depositsCounter},enumerable:!0,configurable:!0}),e=r([o.Component({selector:"prm-deposits-link",templateUrl:"components/account/depositsLink/deposits-link.html"}),o.Inject(a.AccountOverviewService),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.AccountOverviewService&&a.AccountOverviewService)&&t||Object])],e);var t}());t.PrmDepositsLink=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(409),a=function(){function e(){}return e=r([o.Component({selector:"ng-forward-hack",templateUrl:"components/primoExplore/ng-forward-hack.html"}),i("design:paramtypes",[])],e)}();t.NgForwardHack=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),o=r(i),a=n(410),s=r(a),c=n(245),u=n(411),l=n(188),f=n(418),p=n(246),d=n(247),h=n(897),m=n(111),g=n(417),y=n(898),v=n(189),b=r(v),S=n(416),_=r(S),O=n(899),T=r(O),E=n(419),w=r(E),I=n(148),R=n(32);n(900),t.Module=o.default,t.Metastore=s.default,t.OpaqueToken=c.OpaqueToken,t.Provider=u.Provider,t.provide=u.provide,t.Component=l.Component,t.Directive=f.Directive,t.Inject=p.Inject,t.Injectable=d.Injectable,t.Pipe=h.Pipe,t.Providers=m.Providers,
t.Input=g.Input,t.Output=g.Output,t.StateConfig=y.StateConfig,t.Resolve=y.Resolve,t.events=b.default,t.EventEmitter=_.default,t.bootstrap=T.default,t.bundle=w.default,t.getInjectableName=I.getInjectableName,t.bundleStore=R.bundleStore,t.providerStore=R.providerStore,t.componentStore=R.componentStore},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(416),o=r(i),a=n(895),s=r(a);t.default=function(e,t,n,r){var i=[],a=function(e,n){return n.subscribe(function(n){var r=new s.default(e,{detail:n,bubbles:!1});t[0].dispatchEvent(r)})};for(var c in r)e[c]&&e[c]instanceof o.default&&i.push(a(r[c],e[c]));n.$on("$destroy",function(e){i.forEach(function(e){return e.unsubscribe()})})},e.exports=t.default},function(e,t,n){"use strict";function r(){try{var e=new a("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){return!1}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?{bubbles:!1,cancelable:!1,detail:{}}:arguments[1],n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{bubbles:!1,cancelable:!1,detail:{}}:arguments[1],n=document.createEventObject();return n.type=e,n.bubbles=t.bubbles,n.cancelable=t.cancelable,n.detail=t.detail,n}Object.defineProperty(t,"__esModule",{value:!0});var a=CustomEvent,s=void 0;s=r()?a:"function"==typeof document.createEvent?i:o,t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t={},n=0;n<e.length;n++){for(var r=e[n].split(":"),i=0;i<r.length;i++)r[i]=r[i].trim();if(1===r.length)t[r[0]]=r[0];else{if(2!==r.length)throw new Error('Inputs and outputs must be in the form of "propName: attrName" or in the form of "attrName"');t[r[0]]=r[1]}}return t},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=Function.prototype.bind,a=n(91),s=r(a),c=n(412),u=r(c),l="pipe",f=(0,u.default)(l);t.Pipe=f,s.default.addProvider(l,function(e,t,n,r){r.filter(t,[].concat(i(n),[function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=new(o.apply(e,[null].concat(r)));if(!a.transform)throw new Error("Filters must implement a transform method");return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(a.supports&&!a.supports(e))throw new Error("Filter "+t+" does not support "+e);return a.transform.apply(a,[e].concat(r))}}]))})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(t){u.Providers.apply(void 0,r(e.map(function(e){return e.component})))(t,"while analyzing StateConfig '"+t.name+"' state components"),c.componentStore.set(h,e,t),e.forEach(function(e){if(e.component){var t=c.componentStore.get(d,e.component)||[];c.componentStore.set(d,[].concat(r(t),[e]),e.component)}})}}function a(e){return void 0!==e.name&&"Function"===e.constructor.name}function s(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,n,r){var o=r.value;if(!a(t))throw new Error("@Resolve target must be a static method.");c.componentStore.merge(m,i({},e||n,o),t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.StateConfig=o,t.Resolve=s;var c=n(32),u=n(111),l=n(188),f=n(149),p=n(148),d="ui-router.stateConfigs",h="ui-router.stateChildConfigs",m="ui-router.annotatedResolves",g="ui-router.resolvedMap";l.componentHooks.extendDDO(function(e){e.template&&e.template.replace&&(e.template=e.template.replace(/ng-outlet/g,"ui-view"))}),l.componentHooks.after(function(e,t,n,i){var o=c.componentStore.get(h,e);if(o){if(!Array.isArray(o))throw new TypeError((0,f.createConfigErrorMessage)(e,i,"@StateConfig param must be an array of state objects."));i.config(["$stateProvider",function(e){e&&o.forEach(function(t){function n(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(function(e,t,n){return e[s[n]]=t,e},{});c.componentStore.set(g,i,t.component)}var i=c.bundleStore.get("selector",t.component);t.template=t.template||"<"+i+"></"+i+">";var o=c.componentStore.get(m,t.component)||{};Object.keys(o).forEach(function(e){var t=o[e],n=c.bundleStore.get("$inject",t);t.$inject=n}),t.resolve=Object.assign({},t.resolve,o);var a=c.bundleStore.get("$inject",t.component),s=a?a.map(p.getInjectableName):[];t.controller=t.controller||[].concat(r(s),[n]),e.state(t.name,t)})}])}}),l.componentHooks.beforeCtrlInvoke(function(e,t,n,r,i,o){var a=c.componentStore.get(g,n);Object.assign(o,a)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=s.bundleStore.get("selector",e),r=document.querySelector(n);return(0,a.default)(n,e,t),angular.bootstrap(r,[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(419),a=r(o),s=n(32);e.exports=t.default},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(32),s=n(148),c=function(){function e(){i(this,e)}return o(e,null,[{key:"all",value:function(){return"*"}},{key:"css",value:function(e){return e}},{key:"directive",value:function(e){return a.bundleStore.get("selector",e)}}]),e}();t.By=c,function(e){Object.defineProperties(e,{nativeElement:{get:function(){return this[0]}},componentInstance:{get:function(){if(this._componentInstance)return this._componentInstance;var e=this.isolateScope();return this._componentInstance=e&&e.ctrl||null,this._componentInstance}},componentViewChildren:{get:function(){return[].concat(r(this.children())).map(function(e){return angular.element(e)})}},getLocal:{value:function(e){return(this.injector()||this.inheritedData("$injector")).get((0,s.getInjectableName)(e))}},query:{value:function(e,t){var n=this.queryAll(e,t);return n.length>0?n[0]:null}},queryAll:{value:function(e,t){if(t)throw Error("scope argument not yet supported. All queries are done with Scope.all for now.");return Array.from(this[0].querySelectorAll(e)).map(function(e){return angular.element(e)})}},getDirectiveInstance:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}},triggerEventHandler:{value:function(e,t){throw new Error("Not yet implemented in ng-forward.")}},inject:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}},hasDirective:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}}})}(angular.element.prototype),t.default=angular.element},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),n(368),n(144);var i=n(0),o=n(902),a=n(142),s=n(903),c=n(107),u=n(904),l=n(231),f=n(145),p=n(905),d=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmBrowseSearch,s.PrmBrowseSearchBar,u.PrmBrowseResult,p.PrmScroll],providers:[a.BrowseSearchService,c.BrowseSearchBarService,l.BrowseResultService,f.ScrollService],imports:[]})],e)}();t.BrowseSearchModule=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(142),c=n(11),u=n(107),l=n(4),f=n(1),p=(n(3),n(51)),d=function(){function e(e,t,n,r){var i=this;this.browseSearchService=e,this.searchService=t,this.browseSearchBarService=n,this.$state=r,this.pagingConfiguration={firstPage:!1,paging:!1},this.browseSearchService.resetParams(),this._showPrevButtonPredicate=function(){return void 0!=i.browseSearchService.backTerm},this._showNextButtonPredicate=function(){return void 0!=i.browseSearchService.nextTerm}}return e.prototype.ngOnInit=function(){this.browseSearchBarService.searchBarInput=this.$state.params.browseQuery,this.getData()},Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this.browseSearchBarService.selectedScope},set:function(e){this.browseSearchBarService.selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.getData=function(){var e=this;if(void 0!=this.browseSearchBarService.scopes)this.selectedScope=this.browseSearchBarService.scopes[0],this.deepLinkPref();else{this.browseSearchBarService.scopesProgress=!0;var t=this.browseSearchBarService.getLinkScopes();t.then(function(t){e.browseSearchBarService.scopesProgress=!1,e.browseSearchBarService.scopes=p(t.data,function(e){return parseInt(e.SourceCode5,10)}),e.selectedScope=e.browseSearchBarService.scopes[0],e.browseSearchBarService.setSlectedScope(),e.deepLinkPref()})}},e.prototype.deepLinkPref=function(){var e=this.$state.params.browseScope,t=this.$state.params.browseFirstTerm||this.$state.params.browseQuery,n=this.$state.params.innerPnxIndex,r=this.$state.params.numOfUsedTerms,i=this.$state.params.fn;null!=e&&this.doQuery(i,t,e,n,r)},e.prototype.doQuery=function(e,t,n,r,i){if(void 0==this.$state.params.query){this.browseSearchService.getSearchJson(e,t,n,-1,r,i);for(var o=0,a=this.browseSearchBarService.scopes;o<a.length;o++){var s=a[o];if(s.SourceCode1===n){this.browseSearchBarService.selectedScope=s;break}}}},Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.browseSearchService.inProgress},enumerable:!0,configurable:!0}),e.prototype.showList=function(){return!this.browseSearchService.inProgress&&this.browseResult.length>0},Object.defineProperty(e.prototype,"browseResult",{get:function(){return this.browseSearchService.browseResult},enumerable:!0,configurable:!0}),e.prototype.doNext=function(){var e=this.nextParam;this.$state.go(l.STATE_NAMES.BROWSE_SEARCH,e,{reload:!1})},Object.defineProperty(e.prototype,"nextParam",{get:function(){var e=this.browseSearchService.searchedScope,t=this.$state.params.browseQuery,n=this.browseSearchService.nextTerm,r=this.browseSearchService.lastPnxIndex,i=this.browseSearchService.numOfUsedTerm,o="BrowseNext",a={vid:f.getVid(),browseScope:e,browseQuery:t,browseFirstTerm:n,numOfUsedTerms:i,innerPnxIndex:r,fn:o};return a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevParam",{get:function(){var e=this.browseSearchService.searchedScope,t=this.$state.params.browseQuery,n=this.browseSearchService.backTerm,r=(this.$state.params.innerPnxIndex,this.browseSearchService.numOfUsedTerm),i="BrowseBack",o={vid:f.getVid(),browseScope:e,browseQuery:t,browseFirstTerm:n,fn:i,numOfUsedTerms:r};return o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchState",{get:function(){return l.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),e.prototype.doPrev=function(){var e=this.prevParam;this.$state.go(l.STATE_NAMES.BROWSE_SEARCH,e,{reload:!1})},Object.defineProperty(e.prototype,"showNextButtonPredicate",{get:function(){return this._showNextButtonPredicate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPrevButtonPredicate",{get:function(){return this._showPrevButtonPredicate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=f.getAttributesMap();return"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-browse-search",templateUrl:"components/search/browse/browse-search.html"}),o(3,a.Inject("$state")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.BrowseSearchService&&s.BrowseSearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SearchService&&c.SearchService)&&n||Object,"function"==typeof(d="undefined"!=typeof u.BrowseSearchBarService&&u.BrowseSearchBarService)&&d||Object,Object])],e);var t,n,d}();t.PrmBrowseSearch=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(107),c=n(142),u=n(4),l=n(1),f=n(6),p=n(20),d=n(8),h=n(9),m=n(51),g=function(){function e(e,t,n,r,i,o,a,s,c,f,p){var d=this;this.browseSearchBarService=e,this.browseSearchService=t,this.primolyticsService=n,this.$state=r,this.searchBoxIcons=i,this.changeLangService=o,this.$scope=a,this.$element=s,this.$timeout=c,this.mediaQueries=f,this.mtCache=p,this.searchState=u.STATE_NAMES.BROWSE_SEARCH,this.focusOnSearchInput=!1,this.vid=l.getVid(),this.focusOnSearchInput=1===this.mtCache.getTable(this.mtCache.tables.VIEW_PROPERTIES).filter(function(e){return e.source1===d.vid&&"focus_on_search_input"===e.source2&&"true"===e.target}).length}return e.prototype.ngOnInit=function(){var e=this;if(null!=this.$state.params.docCount){this.browseSearchBarService.scopesProgress=!0;var t=this.browseSearchBarService.getLinkScopes();t.then(function(t){e.browseSearchBarService.scopesProgress=!1,e.browseSearchBarService.scopes=m(t.data,"SourceCode5"),e.browseSearchBarService.setSlectedScope()})}this.$scope.$watch(function(){return e.searchBarInput},function(t,n){e.$timeout(function(){e.removeAriaLabel("md-input-container input")},400)}),this.$timeout(function(){if(e.mediaQueries.gtmd&&e.focusOnSearchInput){var t=document.querySelector("#searchBarBrowse");t&&t.focus()}},0)},Object.defineProperty(e.prototype,"scopes",{get:function(){return this.browseSearchBarService.scopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this.browseSearchBarService.selectedScope},set:function(e){this.browseSearchBarService.selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.performSearch=function(){this.$state.go(this.searchState,{vid:l.getVid(),browseQuery:this.searchBarInput,browseScope:this.selectedScope.SourceCode1,browseFirstTerm:null,innerPnxIndex:-1,numOfUsedTerms:-1,fn:"BrowseSearch"},{reload:!1})},Object.defineProperty(e.prototype,"searchBarInput",{get:function(){return this.browseSearchBarService.searchBarInput},set:function(e){this.browseSearchBarService.searchBarInput=e},enumerable:!0,configurable:!0}),e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e.prototype.removeAriaLabel=function(e){for(var t=this.$element[0].querySelectorAll(e),n=0,r=t;n<r.length;n++){var i=r[n];i.removeAttribute("aria-label")}},e.prototype.onClearSearchInput=function(){this.searchBarInput=void 0,document.querySelector("#searchBarBrowse").focus()},e=r([a.Component({selector:"prm-browse-search-bar",templateUrl:"components/search/browse/browseSearchBar/browse-search-bar.html"}),o(3,a.Inject("$state")),o(4,a.Inject("searchBoxIcons")),o(6,a.Inject("$scope")),o(7,a.Inject("$element")),o(8,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.BrowseSearchBarService&&s.BrowseSearchBarService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.BrowseSearchService&&c.BrowseSearchService)&&n||Object,"function"==typeof(g="undefined"!=typeof f.PrimolyticsService&&f.PrimolyticsService)&&g||Object,Object,Array,"function"==typeof(y="undefined"!=typeof p.ChangeLangService&&p.ChangeLangService)&&y||Object,Object,Object,Object,"function"==typeof(v="undefined"!=typeof d.MediaQueries&&d.MediaQueries)&&v||Object,"function"==typeof(b="undefined"!=typeof h.MappingTablesCache&&h.MappingTablesCache)&&b||Object])],e);var t,n,g,y,v,b}();t.PrmBrowseSearchBar=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(107),u=n(231),l=n(142),f=n(1),p=n(6),d=n(2),h=n(20),m=function(){function e(e,t,n,r,i,o,a,s,c,u){this.browseResultService=e,this.browseSearchBarService=t,this.browseSearchService=n,this.primolyticsService=r,this.$state=i,this.browseIcons=o,this.$element=a,this.configurationUtil=s,this.changeLangService=c,this.$translate=u}return e.prototype.ngOnInit=function(){if(this.browseResultService.browseResult=this.browseResult,!this.haveLink){var e=this.$element[0].querySelector("a");e.style.cursor="default"}},Object.defineProperty(e.prototype,"recString",{get:function(){var e="";for(var t in this.browseResult.displayValue)e+=t;return e+="      number of records = "+this.browseResult.docIds.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefTitle",{get:function(){var e=[];for(var t in this.browseResult.displayValue)e.push(t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfCrossRef",{get:function(){return console.log(this.browseResult.displayValue.length),Object.keys(this.browseResult.displayValue).length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var e="";for(var t in this.browseResult.displayValue)e+=t;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfDocs",{get:function(){return this.configurationUtil.isSuprima()?parseInt(this.browseResult.numberOfResults):this.browseResult.docIds.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumberDoc",{get:function(){return this.browseResult.displayValue.length>1&&console.log("bllue"),this.browseResult.displayValue[this.title]},enumerable:!0,configurable:!0}),e.prototype.getHeaderResultsStateParams=function(){var e;return e=this.configurationUtil.isSuprima()?"Browse: "+this.browseResult.displayValue[this.title]:this.havePref?this.callNumberDoc:this.browseResult.indexTextValue,this.headerQuryResultParam(e)},e.prototype.headerQuryResultParam=function(e){var t,n=this.numberOfDocs;return this.configurationUtil.isSuprima()?(t=JSON.stringify(this.browseResult.searchParams),this.browseResultService.query=e):this.browseResultService.query="browse_"+this.browseSearchBarService.selectedScope.SourceCode1+",exact,"+e,{vid:f.getVid(),query:this.browseResultService.query,sortby:this.browseSearchBarService.selectedScope.SourceCode2,browseQuery:this.browseSearchBarService.searchBarInput,browseScope:this.browseSearchService.searchedScope,browseFirstTerm:this.$state.params.browseFirstTerm,mode:"browse",browseParams:t,innerPnxIndex:this.$state.params.innerPnxIndex,numOfUsedTerms:this.browseSearchService.numOfUsedTerm,fn:this.$state.params.fn,docCount:n}},Object.defineProperty(e.prototype,"havePref",{get:function(){return void 0!=this.browseResult.nonPreferred},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preferred",{get:function(){return this.browseResult.nonPreferred},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"haveType",{get:function(){return void 0!=this.browseResult.type&&0==!this.browseResult.type.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.browseResult.type},enumerable:!0,configurable:!0}),e.prototype.getFullDisplayStateParams=function(){var e={vid:f.getVid(),docid:this.callNumberDoc,browseQuery:this.browseSearchBarService.searchBarInput,browseScope:this.browseSearchService.searchedScope,browseFirstTerm:this.$state.params.browseFirstTerm,mode:"browse",innerPnxIndex:this.$state.params.innerPnxIndex,numOfUsedTerms:this.$state.params.numOfUsedTerms,fn:this.$state.params.fn};return this.configurationUtil.isSuprima()&&(e.context="L"),e},e.prototype.reportUse=function(){},e.prototype.resultLinkPref=function(e){var t=this.browseResult.displayValue[e];return this.$state.href(s.STATE_NAMES.SEARCH,this.headerQuryResultParam(t))},Object.defineProperty(e.prototype,"haveLink",{get:function(){return!this.havePref},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultLink",{get:function(){if(!this.havePref)return this.isCallNumber()?this.$state.href(s.STATE_NAMES.FULL_DISPLAY,this.getFullDisplayStateParams(),{lossy:!1}):this.$state.href(s.STATE_NAMES.SEARCH,this.getHeaderResultsStateParams())},enumerable:!0,configurable:!0}),e.prototype.isCallNumber=function(){return!!this.browseSearchService.searchedScope.startsWith("call")},e.prototype.isSubjectOrAuthor=function(){return!(!this.browseSearchService.searchedScope.startsWith("subject")&&!this.browseSearchService.searchedScope.startsWith("author"))},Object.defineProperty(e.prototype,"author",{get:function(){return this.browseResult.author},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this.browseResult.date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumber",{get:function(){return this.browseResult.callNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exactNumber",{get:function(){return this.configurationUtil.isSuprima()&&this.browseResult.numberOfResults&&this.browseResult.numberOfResults.indexOf("+")!==-1?"+":""},enumerable:!0,configurable:!0}),e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e.prototype.isOneOrMoreRecords=function(){return this.numberOfDocs<=1?"1 "+this.$translate.instant("nui.browse.single_rec"):this.numberOfDocs+" "+this.exactNumber+" "+this.$translate.instant("nui.browse.multiple_rec")},r([a.Input(),i("design:type",Object)],e.prototype,"browseResult",void 0),e=r([a.Component({selector:"prm-browse-result",templateUrl:"components/search/browse/browseResult/browse-result.html"}),o(4,a.Inject("$state")),o(5,a.Inject("browseIcons")),o(6,a.Inject("$element")),o(9,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof u.BrowseResultService&&u.BrowseResultService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.BrowseSearchBarService&&c.BrowseSearchBarService)&&n||Object,"function"==typeof(m="undefined"!=typeof l.BrowseSearchService&&l.BrowseSearchService)&&m||Object,"function"==typeof(g="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&g||Object,Object,Array,Object,"function"==typeof(y="undefined"!=typeof d.ConfigurationUtil&&d.ConfigurationUtil)&&y||Object,"function"==typeof(v="undefined"!=typeof h.ChangeLangService&&h.ChangeLangService)&&v||Object,Object])],e);var t,n,m,g,y,v}();t.PrmBrowseResult=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(145),s=function(){function e(e){this.scrollService=e}return e.prototype.ngOnInit=function(){},e=r([o.Component({selector:"prm-scroll",templateUrl:"components/search/scroller/scroll.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.ScrollService&&a.ScrollService)&&t||Object])],e);var t}();t.PrmScroll=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(8),c=function(){function e(e,t,n){this.$mdToast=e,this.$state=t,this.mediaQueries=n,console.log("opened toast")}return e.prototype.ngOnInit=function(){},e.prototype.onDismiss=function(){this.$mdToast.hide()},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.refreshState=function(){this.onDismiss(),this.$state.reload()},e=r([a.Component({selector:"prm-silent-login-alert-toast",templateUrl:"components/primoExplore/silentLogin/silentLoginAlertToast/silent-login-alert-toast.html"}),o(0,a.Inject("$mdToast")),o(1,a.Inject("$state")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.MediaQueries&&s.MediaQueries)&&t||Object])],e);var t}();t.PrmSilentLoginAlertToast=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(44),u=n(8),l=function(){function e(e,t,n,r,i){this.primolyticsService=e,this.$mdToast=t,this.$timeout=n,this.loginService=r,this.mediaQueries=i}return e.prototype.ngOnInit=function(){},e.prototype.onDismiss=function(){this.$mdToast.hide()},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.handleLogin=function(){var e=this;this.$mdToast.hide(),this.$timeout(function(){e.loginService.handleLoginClick()},200)},r([s.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"handleLogin",null),e=r([a.Component({selector:"prm-timeout-toast",templateUrl:"components/security/timeoutToast/timeout-toast.html"}),o(1,a.Inject("$mdToast")),o(2,a.Inject("$timeout")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof c.LoginService&&c.LoginService)&&n||Object,"function"==typeof(l="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&l||Object])],e);var t,n,l}();t.PrmTimeoutToast=l},function(e,t){!function(n,r){"use strict";var i=["ng","oc.lazyLoad"],o={},a=[],s=[],c=[],u=[],l=n.noop,f={},p=[],d=n.module("oc.lazyLoad",["ng"]);d.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(e,t,d,h,y,v){function b(e,t,r){if(t){var o,a,s,u=[];for(o=t.length-1;o>=0;o--)if(a=t[o],n.isString(a)||(a=O(a)),a&&p.indexOf(a)===-1&&(!E[a]||c.indexOf(a)!==-1)){var d=i.indexOf(a)===-1;if(s=g(a),d&&(i.push(a),b(e,s.requires,r)),s._runBlocks.length>0)for(f[a]=[];s._runBlocks.length>0;)f[a].push(s._runBlocks.shift());n.isDefined(f[a])&&(d||r.rerun)&&(u=u.concat(f[a])),_(e,s._invokeQueue,a,r.reconfig),_(e,s._configBlocks,a,r.reconfig),l(d?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",a),t.pop(),p.push(a)}var h=e.getInstanceInjector();n.forEach(u,function(e){h.invoke(e)})}}function S(e,t){function r(e,t){var r,o=!0;return t.length&&(r=i(e),n.forEach(t,function(e){o=o&&i(e)!==r})),o}function i(e){return n.isArray(e)?C(e.toString()):n.isObject(e)?C(A(e)):n.isDefined(e)&&null!==e?C(e.toString()):e}var a=e[2][0],s=e[1],c=!1;n.isUndefined(o[t])&&(o[t]={}),n.isUndefined(o[t][s])&&(o[t][s]={});var u=function(e,n){o[t][s].hasOwnProperty(e)||(o[t][s][e]=[]),r(n,o[t][s][e])&&(c=!0,o[t][s][e].push(n),l("ocLazyLoad.componentLoaded",[t,s,e]))};if(n.isString(a))u(a,e[2][1]);else{if(!n.isObject(a))return!1;n.forEach(a,function(e,t){n.isString(e)?u(e,a[1]):u(t,e)})}return c}function _(e,t,r,i){if(t){var o,s,c,u;for(o=0,s=t.length;o<s;o++)if(c=t[o],n.isArray(c)){if(null!==e){if(!e.hasOwnProperty(c[0]))throw new Error("unsupported provider "+c[0]);u=e[c[0]]}var l=S(c,r);if("invoke"!==c[1])l&&n.isDefined(u)&&u[c[1]].apply(u,c[2]);else{var f=function(e){var t=a.indexOf(r+"-"+e);(t===-1||i)&&(t===-1&&a.push(r+"-"+e),n.isDefined(u)&&u[c[1]].apply(u,c[2]))};if(n.isFunction(c[2][0]))f(c[2][0]);else if(n.isArray(c[2][0]))for(var p=0,d=c[2][0].length;p<d;p++)n.isFunction(c[2][0][p])&&f(c[2][0][p])}}}}function O(e){var t=null;return n.isString(e)?t=e:n.isObject(e)&&e.hasOwnProperty("name")&&n.isString(e.name)&&(t=e.name),t}function T(e){if(!n.isString(e))return!1;try{return g(e)}catch(e){if(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)return!1}}var E={},w={$controllerProvider:e,$compileProvider:d,$filterProvider:h,$provide:t,$injector:y,$animateProvider:v},I=!1,R=!1,P=[],j={};P.push=function(e){this.indexOf(e)===-1&&Array.prototype.push.apply(this,arguments)},this.config=function(e){n.isDefined(e.modules)&&(n.isArray(e.modules)?n.forEach(e.modules,function(e){E[e.name]=e}):E[e.modules.name]=e.modules),n.isDefined(e.debug)&&(I=e.debug),n.isDefined(e.events)&&(R=e.events)},this._init=function(e){if(0===s.length){var t=[e],o=["ng:app","ng-app","x-ng-app","data-ng-app"],a=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,c=function(e){return e&&t.push(e)};n.forEach(o,function(t){o[t]=!0,c(document.getElementById(t)),t=t.replace(":","\\:"),"undefined"!=typeof e[0]&&e[0].querySelectorAll&&(n.forEach(e[0].querySelectorAll("."+t),c),n.forEach(e[0].querySelectorAll("."+t+"\\:"),c),n.forEach(e[0].querySelectorAll("["+t+"]"),c))}),n.forEach(t,function(t){if(0===s.length){var r=" "+e.className+" ",i=a.exec(r);i?s.push((i[2]||"").replace(/\s+/g,",")):n.forEach(t.attributes,function(e){0===s.length&&o[e.name]&&s.push(e.value)})}})}0!==s.length||(r.jasmine||r.mocha)&&n.isDefined(n.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");
var l=function e(t){if(i.indexOf(t)===-1){i.push(t);var r=n.module(t);_(null,r._invokeQueue,t),_(null,r._configBlocks,t),n.forEach(r.requires,e)}};n.forEach(s,function(e){l(e)}),s=[],u.pop()};var A=function(e){try{return JSON.stringify(e)}catch(r){var t=[];return JSON.stringify(e,function(e,r){if(n.isObject(r)&&null!==r){if(t.indexOf(r)!==-1)return;t.push(r)}return r})}},C=function(e){var t,n,r,i=0;if(0==e.length)return i;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(e,t,r,a,c){function f(t){var n=c.defer();return e.error(t.message),n.reject(t),n.promise}var d,h=a("ocLazyLoad");return I||(e={},e.error=n.noop,e.warn=n.noop,e.info=n.noop),w.getInstanceInjector=function(){return d?d:d=t.data("$injector")||n.injector()},l=function(t,n){R&&r.$broadcast(t,n),I&&e.info(t,n)},{_broadcast:l,_$log:e,_getFilesCache:function(){return h},toggleWatch:function(e){e?u.push(!0):u.pop()},getModuleConfig:function(e){if(!n.isString(e))throw new Error("You need to give the name of the module to get");return E[e]?n.copy(E[e]):null},setModuleConfig:function(e){if(!n.isObject(e))throw new Error("You need to give the module config object to set");return E[e.name]=e,e},getModules:function(){return i},isLoaded:function(e){var t=function(e){var t=i.indexOf(e)>-1;return t||(t=!!T(e)),t};if(n.isString(e)&&(e=[e]),n.isArray(e)){var r,o;for(r=0,o=e.length;r<o;r++)if(!t(e[r]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:O,_getModule:function(e){try{return g(e)}catch(t){throw(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1)&&(t.message='The module "'+A(e)+'" that you are trying to load does not exist. '+t.message),t}},moduleExists:T,_loadDependencies:function(e,t){var r,i,o,a=[],s=this;if(e=s._getModuleName(e),null===e)return c.when();try{r=s._getModule(e)}catch(e){return f(e)}return i=s.getRequires(r),n.forEach(i,function(r){if(n.isString(r)){var i=s.getModuleConfig(r);if(null===i)return void P.push(r);r=i,i.name=void 0}if(s.moduleExists(r.name))return o=r.files.filter(function(e){return s.getModuleConfig(r.name).files.indexOf(e)<0}),0!==o.length&&s._$log.warn('Module "',e,'" attempted to redefine configuration for dependency. "',r.name,'"\n Additional Files Loaded:',o),n.isDefined(s.filesLoader)?void a.push(s.filesLoader(r,t).then(function(){return s._loadDependencies(r)})):f(new Error("Error: New dependencies need to be loaded from external files ("+r.files+"), but no loader has been defined."));if(n.isArray(r)){var c=[];n.forEach(r,function(e){var t=s.getModuleConfig(e);null===t?c.push(e):t.files&&(c=c.concat(t.files))}),c.length>0&&(r={files:c})}else n.isObject(r)&&r.hasOwnProperty("name")&&r.name&&(s.setModuleConfig(r),P.push(r.name));if(n.isDefined(r.files)&&0!==r.files.length){if(!n.isDefined(s.filesLoader))return f(new Error('Error: the module "'+r.name+'" is defined in external files ('+r.files+"), but no loader has been defined."));a.push(s.filesLoader(r,t).then(function(){return s._loadDependencies(r)}))}}),c.all(a)},inject:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=this,o=c.defer();if(n.isDefined(e)&&null!==e){if(n.isArray(e)){var a=[];return n.forEach(e,function(e){a.push(i.inject(e,t,r))}),c.all(a)}i._addToLoadList(i._getModuleName(e),!0,r)}if(s.length>0){var u=s.slice(),l=function e(n){P.push(n),j[n]=o.promise,i._loadDependencies(n,t).then(function(){try{p=[],b(w,P,t)}catch(e){return i._$log.error(e.message),void o.reject(e)}s.length>0?e(s.shift()):o.resolve(u)},function(e){o.reject(e)})};l(s.shift())}else{if(t&&t.name&&j[t.name])return j[t.name];o.resolve()}return o.promise},getRequires:function(e){var t=[];return n.forEach(e.requires,function(e){i.indexOf(e)===-1&&t.push(e)}),t},_invokeQueue:_,_registerInvokeList:S,_register:b,_addToLoadList:m,_unregister:function(e){n.isDefined(e)&&n.isArray(e)&&n.forEach(e,function(e){o[e]=void 0})}}}],this._init(n.element(r.document))}]);var h=n.bootstrap;n.bootstrap=function(e,t,r){return i=["ng","oc.lazyLoad"],o={},a=[],s=[],c=[],u=[],l=n.noop,f={},p=[],n.forEach(t.slice(),function(e){m(e,!0,!0)}),h(e,t,r)};var m=function(e,t,r){(u.length>0||t)&&n.isString(e)&&s.indexOf(e)===-1&&(s.push(e),r&&c.push(e))},g=n.module;n.module=function(e,t,n){return m(e,!1,!0),g(e,t,n)},"undefined"!=typeof e&&"undefined"!=typeof t&&e.exports===t&&(e.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(t,n,r,i,o){return{restrict:"A",terminal:!0,priority:1e3,compile:function(o,a){var s=o[0].innerHTML;return o.html(""),function(o,a,c){var u=i(c.ocLazyLoad);o.$watch(function(){return u(o)||c.ocLazyLoad},function(i){e.isDefined(i)&&t.load(i).then(function(){r.enter(s,a),n(a.contents())(o)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(t,n,r,i){var o=!1,a=!1,s=r.document.getElementsByTagName("head")[0]||r.document.getElementsByTagName("body")[0];return t.buildElement=function(c,u,l){var f,p,d=n.defer(),h=t._getFilesCache(),m=function(e){var t=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+t:e+"&_dc="+t:e+"?_dc="+t};switch(e.isUndefined(h.get(u))&&h.put(u,d.promise),c){case"css":f=r.document.createElement("link"),f.type="text/css",f.rel="stylesheet",f.href=l.cache===!1?m(u):u;break;case"js":f=r.document.createElement("script"),f.src=l.cache===!1?m(u):u;break;default:h.remove(u),d.reject(new Error('Requested type "'+c+'" is not known. Could not inject "'+u+'"'))}f.onload=f.onreadystatechange=function(e){f.readyState&&!/^c|loade/.test(f.readyState)||p||(f.onload=f.onreadystatechange=null,p=1,t._broadcast("ocLazyLoad.fileLoaded",u),d.resolve(f))},f.onerror=function(){h.remove(u),d.reject(new Error("Unable to load "+u))},f.async=l.serie?0:1;var g=s.lastChild;if(l.insertBefore){var y=e.element(e.isDefined(window.jQuery)?l.insertBefore:document.querySelector(l.insertBefore));y&&y.length>0&&(g=y[0])}if(g.parentNode.insertBefore(f,g),"css"==c){if(!o){var v=r.navigator.userAgent.toLowerCase();if(v.indexOf("phantomjs/1.9")>-1)a=!0;else if(/iP(hone|od|ad)/.test(r.navigator.platform)){var b=r.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),S=parseFloat([parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)].join("."));a=S<6}else if(v.indexOf("android")>-1){var _=parseFloat(v.slice(v.indexOf("android")+8));a=_<4.4}else if(v.indexOf("safari")>-1){var O=v.match(/version\/([\.\d]+)/i);a=O&&O[1]&&parseFloat(O[1])<6}}if(a)var T=1e3,E=i(function(){try{f.sheet.cssRules,i.cancel(E),f.onload()}catch(e){--T<=0&&f.onerror()}},20)}return d.promise},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.filesLoader=function(r){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=[],a=[],s=[],c=[],u=null,l=t._getFilesCache();t.toggleWatch(!0),e.extend(i,r);var f=function(n){var r,f=null;if(e.isObject(n)&&(f=n.type,n=n.path),u=l.get(n),e.isUndefined(u)||i.cache===!1){if(null!==(r=/^(css|less|html|htm|js)?(?=!)/.exec(n))&&(f=r[1],n=n.substr(r[1].length+1,n.length)),!f)if(null!==(r=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(n)))f=r[1];else{if(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!t.jsLoader.hasOwnProperty("requirejs"))return void t._$log.error("File type could not be determined. "+n);f="js"}"css"!==f&&"less"!==f||o.indexOf(n)!==-1?"html"!==f&&"htm"!==f||a.indexOf(n)!==-1?"js"===f||s.indexOf(n)===-1?s.push(n):t._$log.error("File type is not valid. "+n):a.push(n):o.push(n)}else u&&c.push(u)};if(i.serie?f(i.files.shift()):e.forEach(i.files,function(e){f(e)}),o.length>0){var p=n.defer();t.cssLoader(o,function(n){e.isDefined(n)&&t.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),p.reject(n)):p.resolve()},i),c.push(p.promise)}if(a.length>0){var d=n.defer();t.templatesLoader(a,function(n){e.isDefined(n)&&t.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),d.reject(n)):d.resolve()},i),c.push(d.promise)}if(s.length>0){var h=n.defer();t.jsLoader(s,function(n){e.isDefined(n)&&(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||t.jsLoader.hasOwnProperty("requirejs"))?(t._$log.error(n),h.reject(n)):h.resolve()},i),c.push(h.promise)}if(0===c.length){var m=n.defer(),g="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return t._$log.error(g),m.reject(g),m.promise}return i.serie&&i.files.length>0?n.all(c).then(function(){return t.filesLoader(r,i)}):n.all(c).finally(function(e){return t.toggleWatch(!1),e})},t.load=function(r){var i,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,c=[],u=n.defer(),l=e.copy(r),f=e.copy(o);if(e.isArray(l))return e.forEach(l,function(e){c.push(a.load(e,f))}),n.all(c).then(function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise;if(e.isString(l)?(s=a.getModuleConfig(l),s||(s={files:[l]})):e.isObject(l)&&(s=e.isDefined(l.path)&&e.isDefined(l.type)?{files:[l]}:a.setModuleConfig(l)),null===s){var p=a._getModuleName(l);return i='Module "'+(p||"unknown")+'" is not configured, cannot load.',t._$log.error(i),u.reject(new Error(i)),u.promise}e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var d=e.extend({},f,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&t.moduleExists(s.name)?t.inject(s.name,d,!0):(t.filesLoader(s,d).then(function(){t.inject(null,d).then(function(e){u.resolve(e)},function(e){u.reject(e)})},function(e){u.reject(e)}),u.promise)},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.cssLoader=function(r,i,o){var a=[];e.forEach(r,function(e){a.push(t.buildElement("css",e,o))}),n.all(a).then(function(){i()},function(e){i(e)})},t.cssLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.jsLoader=function(r,i,o){var a=[];e.forEach(r,function(e){a.push(t.buildElement("js",e,o))}),n.all(a).then(function(){i()},function(e){i(e)})},t.jsLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(t,n,r,i){return t.templatesLoader=function(o,a,s){var c=[],u=t._getFilesCache();return e.forEach(o,function(t){var o=r.defer();c.push(o.promise),i.get(t,s).then(function(r){var i=r.data;e.isString(i)&&i.length>0&&e.forEach(e.element(i),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&n.put(e.id,e.innerHTML)}),e.isUndefined(u.get(t))&&u.put(t,!0),o.resolve()}).catch(function(e){o.reject(new Error('Unable to load template file "'+t+'": '+e.data))})}),r.all(c).then(function(){a()},function(e){a(e)})},t.templatesLoader.ocLazyLoadLoader=!0,t}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(910),c=n(398),u=n(7),l=n(2),f=n(30),p=n(8),d=function(){function e(e,t,n,r,i,o,a){this.$sce=e,this.$compile=t,this.favoritesIcons=n,this.alertBarService=r,this.jwtUtilService=i,this.configurationUtil=o,this.mediaQueries=a}return Object.defineProperty(e.prototype,"templateSrc",{get:function(){switch(this.alertObject.getType()){case f.ALERT_MSG_TYPE.SIGNIN:return"components/infra/widgets/alerts/alertTemplates/signIn.html";case f.ALERT_MSG_TYPE.REQUEST:return"components/infra/widgets/alerts/alertTemplates/requestAlert.html";case f.ALERT_MSG_TYPE.SIMPLE:return"components/infra/widgets/alerts/alertTemplates/simple.html";case f.ALERT_MSG_TYPE.SIMPLE_WITHOUT_DISMISS:return"components/infra/widgets/alerts/alertTemplates/simpleWithoutDismiss.html";case f.ALERT_MSG_TYPE.BROWSE_GAP:return"components/infra/widgets/alerts/alertTemplates/simpleWithoutDismiss.html";default:return"components/infra/widgets/alerts/alertTemplates/general.html"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlMsg",{get:function(){return this.alertObject?this.alertObject.getMsgHtml():null},enumerable:!0,configurable:!0}),e.prototype.clearMessageSessionEnabled=function(){switch(this.alertObject.getType()){case f.ALERT_MSG_TYPE.SIGNIN:return!0;default:return!1}},e.prototype.onClose=function(){if(this.clearMessageSessionEnabled()){var e=this.alertObject.getType()+"_clearClicked";this.alertBarService.messageShouldDisplay(e,!0)}this.alertObject.hide()},e.prototype.showMessage=function(){if(this.clearMessageSessionEnabled()){var e=this.alertObject.getType()+"_clearClicked";return this.alertBarService.messageShouldDisplay(e,null)}},e.prototype.isGuestOrOffcampusForSignIn=function(){if(this.alertObject&&this.alertObject.getAlwaysOn())return!0;var e="GUEST"===this.jwtUtilService.getDecodedToken().userGroup,t="true"!==this.jwtUtilService.getDecodedToken().onCampus,n=this.configurationUtil.getBriefResultConfiguration().groupmessage,r=this.configurationUtil.getBriefResultConfiguration().displaysigninmsg;return!!r&&(0===n&&e||1===n&&t)},r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.IGeneralAlertMsg&&s.IGeneralAlertMsg)&&t||Object)],e.prototype,"alertObject",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"idpLogout",void 0),e=r([a.Component({selector:"prm-alert-bar",templateUrl:"components/infra/widgets/alerts/alert-bar.html"}),o(0,a.Inject("$sce")),o(1,a.Inject("$compile")),o(2,a.Inject("favoritesIcons")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(n="undefined"!=typeof c.AlertBarService&&c.AlertBarService)&&n||Object,"function"==typeof(d="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&d||Object,"function"==typeof(h="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&h||Object,"function"==typeof(m="undefined"!=typeof p.MediaQueries&&p.MediaQueries)&&m||Object])],e);var t,n,d,h,m}();t.PrmAlertBar=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(27),c=n(26),u=n(7),l=n(17),f=n(10),p=n(48),d=n(4),h=n(6),m=n(8),g=n(60),y=function(){function e(e,t,n,r,i,o,a,s,c,u,l,f,p){this.favoritesService=e,this.briefResultService=t,this.jwtUtilService=n,this.storageUtil=r,this.userSessionManagerService=i,this.$state=o,this.$timeout=a,this.actionsIcons=s,this.$window=c,this.$scope=u,this.$compile=l,this.primolyticsService=f,this.mediaQueries=p,this.isFullView=!1}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"recordId",{get:function(){return this.item?this.item.pnx.control.recordid[0]:this.recordid},enumerable:!0,configurable:!0}),e.prototype.showPin=function(){return this.briefResultService.getShowPinForRecordId(this.recordId)},e.prototype.showBookmark=function(){return this.briefResultService.getShowBookmark()},e.prototype.isFavoritesDisabled=function(){return!this.storageUtil.isLocalStorageAvailable&&"GUEST"===this.jwtUtilService.getDecodedToken().userGroup},e.prototype.updateFavorites=function(e){var t=this;this.item?this.performUpdate(e):(this.savingInProgress=!0,this.getRecordFunction(this.recordId).then(function(n){t.item=n,t.performUpdate(e),t.savingInProgress=!1},function(e){t.savingInProgress=!1}))},e.prototype.runCollectionDiscoveryBeacon=function(e){this.favoritesService.addCameFromPinToFavoritesParam(e)},e.prototype.performUpdate=function(e){var t=this.jwtUtilService.getDecodedToken().user;this.userSessionManagerService.isGuest()?this.updateFavoritesForGuest(t,e):this.updateFavoritesForUser(t,e)},e.prototype.updateFavoritesForGuest=function(e,t){var n=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(r){n.userSessionManagerService.area=r;var i=n.isRecordInArea();i==-1?n.userSessionManagerService.updateUserArea(n.item).then(function(){n.doPinItem(t),n.updateRecordFavoritesStatus(!0),n.reloadListInFavoriteStateForGuest(e)}):n.userSessionManagerService.removeRecordFromFavorites(i).then(function(){n.updateRecordFavoritesStatus(!1),n.reloadListInFavoriteStateForGuest(e)})})},e.prototype.updateFavoritesForUser=function(e,t){var n=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){n.userSessionManagerService.area=e;var r=n.isRecordInArea();r==-1?n.briefResultService.addUserFavorite(n.item).then(function(){n.userSessionManagerService.updateUserArea(n.recordId).then(function(){n.doPinItem(t),n.updateRecordFavoritesStatus(!0),n.reloadListInFavoriteStateForUser()})}):n.briefResultService.removeUserFavorite(n.recordId).then(function(){n.userSessionManagerService.removeRecordFromFavorites(r).then(function(){n.updateRecordFavoritesStatus(!1),n.reloadListInFavoriteStateForUser()})})})},e.prototype.isRecordInArea=function(){var e=this,t=this.userSessionManagerService.area.map(function(t){return e.returnRecordIds(t)});return g(t,this.recordId)},e.prototype.returnRecordIds=function(e){return this.userSessionManagerService.isGuest()?e.pnx.control.recordid[0]:e},e.prototype.doPinItem=function(e){if(this.isCollectionDiscovery){var t="collection"===this.item.pnx.display.type.toString()?"collection":"item";this.runCollectionDiscoveryBeacon(t)}var n=angular.element(e.target),r=n.parent("md-button").parent();console.log(r);var i=angular.element(document.getElementById("fixed-buttons-holder")),o=angular.element(document.getElementById("favorites-button")),a=i.prop("offsetLeft")+this.$window.pageXOffset+8,s=i.prop("offsetTop")+this.$window.pageYOffset+-1;console.log("X: "+a+"Y: "+s);var c=r[0].getBoundingClientRect(),u=c.left-1,l=c.top+1+this.$window.pageYOffset,f=angular.element('<div class="pinDummy" style="top:'+l+"px; left:"+u+'px">                <prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon>             </div>');this.$compile(f)(this.$scope),angular.element(document.body).append(f),this.$timeout(function(){f.addClass("animating")},0),this.$timeout(function(){f.css({top:s+"px",left:a+"px"})},100),this.$timeout(function(){o.addClass("animating")},600),this.$timeout(function(){f.remove()},2e3),this.$timeout(function(){o.removeClass("animating")},1800)},e.prototype.reloadListInFavoriteStateForGuest=function(e){this.isFavoriteState()&&this.favoritesService.getItemsFromLocalForage(e)},e.prototype.isFavoriteState=function(){return this.$state.current.name==d.STATE_NAMES.FAVORITES},e.prototype.reloadListInFavoriteStateForUser=function(){this.isFavoriteState()&&this.favoritesService.getItemsFromServer()},e.prototype.unpinFavorites=function(){var e=this.jwtUtilService.getDecodedToken().user;this.isGuest()?this.unpinFavoritesForGuest(e):this.unpinFavoritesForUser(e)},e.prototype.unpinFavoritesForGuest=function(e){var t=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(n){t.userSessionManagerService.area=n;var r=t.isRecordInArea();r!=-1&&t.userSessionManagerService.removeRecordFromFavorites(r).then(function(){t.updateRecordFavoritesStatus(!1),t.favoritesService.getItemsFromLocalForage(e)})})},e.prototype.unpinFavoritesForUser=function(e){var t=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){t.userSessionManagerService.area=e;var n=t.isRecordInArea();t.briefResultService.removeUserFavorite(t.recordId).then(function(){t.userSessionManagerService.removeRecordFromFavorites(n).then(function(){t.updateRecordFavoritesStatus(!1),t.favoritesService.getItemsFromServer()},function(){t.favoritesService.getItemsFromServer()})})})},e.prototype.updateRecordFavoritesStatus=function(e){var t=this;this.$scope.$applyAsync(function(){t.briefResultService.saveJsonOdIdsAndPins(t.recordId,e)})},e.prototype.isFullViweState=function(){return this.$state.current.name===d.STATE_NAMES.FULL_DISPLAY},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof c.PrimoResponse&&c.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFavorites",void 0),r([a.Input(),i("design:type",Number)],e.prototype,"index",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isCollectionDiscovery",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),i("design:type",String)],e.prototype,"recordid",void 0),r([a.Input(),i("design:type",Function)],e.prototype,"getRecordFunction",void 0),r([h.beacon({p:"brief",op:"favorites"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],e.prototype,"updateFavorites",null),r([h.beacon({p:"colldisc",op:"favorites"}),i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",void 0)],e.prototype,"runCollectionDiscoveryBeacon",null),e=r([a.Component({selector:"prm-save-to-favorites-button",templateUrl:"components/favorites/saveToFavoritesButton/save-to-favorites-button.html"}),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),o(7,a.Inject("featuredActionsIcons")),o(8,a.Inject("$window")),o(9,a.Inject("$scope")),o(10,a.Inject("$compile")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof p.FavoritesService&&p.FavoritesService)&&n||Object,"function"==typeof(y="undefined"!=typeof s.BriefResultService&&s.BriefResultService)&&y||Object,"function"==typeof(v="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&v||Object,"function"==typeof(b="undefined"!=typeof l.StorageUtil&&l.StorageUtil)&&b||Object,"function"==typeof(S="undefined"!=typeof f.UserSessionManagerService&&f.UserSessionManagerService)&&S||Object,Object,Object,Object,Object,Object,Object,"function"==typeof(_="undefined"!=typeof h.PrimolyticsService&&h.PrimolyticsService)&&_||Object,"function"==typeof(O="undefined"!=typeof m.MediaQueries&&m.MediaQueries)&&O||Object])],e);var t,n,y,v,b,S,_,O}();t.PrmSaveToFavoritesButton=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(26),c=n(56),u=(n(3),function(){function e(e,t,n){this.collectionDiscoveryService=e,this.$q=t,this.$mdDialog=n}return e.prototype.ngOnInit=function(){var e=this,t=this.collectionDiscoveryService.getDataFromCollectionRecord(this.item);if(t){var n=t.map(function(t){return e.collectionDiscoveryService.getSubColWithPath(t.collectionId,t.institution)});this.$q.all(n).then(function(n){n=n.filter(function(e){return void 0!=e});for(var r=[],i=function(e){r.some(function(t,r,i){return n[e].value.pid.value===t.value.pid.value})||r.push(n[e])},o=0;o<n.length;o++)i(o);n=r,e.paths=n.map(function(e,n){return{institution:t[n].institution,path:e.path.concat({level:e.level,name:e.value.name||e.value.title,pid:e.value.pid.value})}})})}},e.prototype.closeDialog=function(){this.$mdDialog.hide()},r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-record-collection-paths",templateUrl:"components/collectionDiscovery/recordCollectionPaths/record-collection-paths.html"}),o(1,a.Inject("$q")),o(2,a.Inject("$mdDialog")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof c.CollectionDiscoveryService&&c.CollectionDiscoveryService)&&n||Object,Object,Object])],e);var t,n}());t.PrmRecordCollectionPaths=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(56),c=n(4),u=n(6),l=n(3),f=function(){function e(e,t,n,r){this.collectionDiscoveryIcons=e,this.primolyticsService=t,this.$stateParams=n,this.$translate=r,this.COLLECTION_DISCOVERY_STATE=c.STATE_NAMES.COLLECTION_DISCOVERY}return e.prototype.ngOnInit=function(){var e=this;this.$translate("nui.colldiscovery.lobby.toptitle").then(function(t){e._title=e.isRootObject?t:e.pathObject.name}),this._breadcrumbStateParams=this.isRootObject?{collectionId:void 0}:{collectionId:this.pathObject.pid},this._breadcrumbStateParams.vid=this.$stateParams.vid,this.institution&&(this._breadcrumbStateParams.inst=this.institution)},e.prototype.sendLinktoPathBeacon=function(){},e.prototype.sendClickToCollectionBeacon=function(){},e.prototype.runCollectionDiscoveryBeacon=function(){"brief"===this.parentTab?this.sendLinktoPathBeacon():"moreFromTheSame"===this.parentTab&&this.sendClickToCollectionBeacon()},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breadcrumbStateParams",{get:function(){return this._breadcrumbStateParams.query=null,this.isRootObject&&(this._breadcrumbStateParams.sortby=null),this._breadcrumbStateParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return l(this.pathObject,"tooltip")||this.title},enumerable:!0,configurable:!0}),e.prototype.displaySeparator=function(){return"brief"===this.parentTab},r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.ICollectionPathObject&&s.ICollectionPathObject)&&t||Object)],e.prototype,"pathObject",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isRootObject",void 0),r([a.Input(),i("design:type",String)],e.prototype,"institution",void 0),r([a.Input(),i("design:type",String)],e.prototype,"parentTab",void 0),r([u.beacon({p:"brief",op:"linktoPath"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendLinktoPathBeacon",null),r([u.beacon({p:"moreFromTheSame",op:"clickToCollection"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendClickToCollectionBeacon",null),e=r([a.Component({selector:"prm-collection-navigation-breadcrumbs-item",templateUrl:"components/collectionDiscovery/collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collection-navigation-breadcrumbs-item.html"}),o(0,a.Inject("collectionDiscoveryIcons")),o(2,a.Inject("$stateParams")),o(3,a.Inject("$translate")),i("design:paramtypes",[Object,"function"==typeof(n="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&n||Object,Object,Object])],e);var t,n}();t.PrmCollectionNavigationBreadcrumbsItem=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){},r([o.Input(),i("design:type",Array)],e.prototype,"path",void 0),r([o.Input(),i("design:type",String)],e.prototype,"institution",void 0),e=r([o.Component({selector:"prm-collection-navigation-breadcrumbs",templateUrl:"components/collectionDiscovery/collectionNavigationBreadcrumbs/collection-navigation-breadcrumbs.html"}),i("design:paramtypes",[])],e)}();t.PrmCollectionNavigationBreadcrumbs=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(384),i=n(19),o=n(5),e=o.module("sticky",[]);t.default=e,e.directive("sticky",["$window","$timeout",function(e,t){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(n,a,s){function c(){w=n.calculateStickyContentInitialDimensions(),N&&(a[0].getBoundingClientRect().height||(E=n.$watch(function(){return a.height()},function(e,t){e>0&&(w=n.calculateStickyContentInitialDimensions(),q||E())})))}function u(t){var n=l(R,t);return 1===n.length?n[0]:e}function l(e,t){var n,r=[],i=t.parent();do{var o=i[0];if(1!==o.nodeType)break;if(o.tagName.toUpperCase()===e.toUpperCase())return i;n=i.parent(),i=n}while(0!==n.length);return r}function f(t){return"true"===t&&e.innerHeight-(a[0].offsetHeight+parseInt(V))<0}function p(e,t,n){var r="top",i=Math.abs(e-t),o=Math.abs(e-n);return i>o&&(r="bottom"),r}function d(e){a.attr("style",Y),j=!1,x.removeClass($),a.removeClass(A),a.addClass(C),"top"===e?(a.removeClass(D),a.css("z-index",10).css("width",a[0].offsetWidth).css("top",w.top).css("position",w.position).css("left",w.cssLeft).css("margin-top",w.marginTop).css("height",w.height)):"bottom"===e&&B===!0&&(a.addClass(D),m(),a.css("z-index",10).css("width",a[0].offsetWidth).css("top","").css("bottom",0).css("position","absolute").css("left",w.cssLeft).css("margin-top",w.marginTop).css("margin-bottom",w.marginBottom).css("height",w.height)),O&&e===U&&O.remove()}function h(e){j=!0,t(function(){w.offsetWidth=a[0].offsetWidth},0),x.addClass($),a.removeClass(C),a.removeClass(D),a.addClass(A),m(),a.css("z-index","10").css("width",a[0].offsetWidth+"px").css("position","fixed").css("left",a.css("left").replace("px","")+"px").css(U,V+y(L)+"px").css("margin-top",0),"bottom"===U&&a.css("margin-bottom",0)}function m(){F&&(O&&O.remove(),O=o.element("<div>"),O.css("height",a[0].offsetHeight+"px"),a.after(O))}function g(){
return!!(B&&v()>P)}function y(e){var t=0;return e.getBoundingClientRect&&(t=e.getBoundingClientRect().top),t}function v(){var e;return e="undefined"!=typeof L.scrollTop?L.scrollTop:"undefined"!=typeof L.pageYOffset?L.pageYOffset:document.documentElement.scrollTop}function b(){var t;return t=M[0]instanceof HTMLElement?e.getComputedStyle(M[0],null).getPropertyValue("height").replace(/px;?/,""):e.innerHeight,parseInt(t)||0}function S(){var t=s.mediaQuery||!1,n=e.matchMedia;return t&&!(n("("+t+")").matches||n(t).matches)}if(!i.isBrowserIE()){var _,O,T,E,w,I,R="sticky-scroll",P=0,j=!1,A=s.stickyClass||"",C=s.unstickyClass||"",$=s.bodyClass||"",D=s.bottomClass||"",L=u(a),k=o.element(e),M=o.element(L),x=o.element(document.body),F="false"!==s.usePlaceholder,U="bottom"===s.anchor?"bottom":"top",B="true"===s.confine,N=void 0!==s.isStickyLayoutDeferred&&"true"===s.isStickyLayoutDeferred,q=void 0===s.isStickyLayoutWatched||"true"===s.isStickyLayoutWatched,H=a.css("position"),V=s.offset?parseInt(s.offset.replace(/px;?/,"")):0,Y=a.attr("style")||"",z=function(){M.on("scroll",W),c(),n.$watch(K,X),n.$on("$destroy",Q)},G=function(){if(n.disabled===!0||S())return j&&d(),!1;var e,t=v();e="top"===U?B===!0?t>_&&t<=P:t>_:t<=_;var r=p(t,_,P);!e||f(s.stickLimit)||j?!e&&j?d(r,t):B&&!e&&(T=y(a[0]),d(r,t)):h(r)},W=r(G,100),Q=function(){M.off("scroll",W),k.off("resize",J),x.removeClass($),O&&O.remove()},J=function(){d(U),W()},K=function(){return n.disabled===!0?d():"top"===U?(T||y(a[0]))-y(L)+v():y(a[0])-b()+a[0].offsetHeight+v()},X=function(e,t){if((e!==t||"undefined"==typeof _)&&!j&&!g()&&e>0){_=e-V,B&&a.parent().css({position:"relative"});var n=a.parent()[0],r=parseInt(n.offsetHeight)-(F?0:a[0].offsetHeight),i=parseInt(a.css("margin-bottom").replace(/px;?/,""))||0,o=y(a[0]),s=y(n),c=y(L),u=o-c,l=s+r-o;P=u+l-a[0].offsetHeight-i-V+ +v(),W()}};n.getElement=function(){return a},n.getScrollbar=function(){return L},n.getInitialCSS=function(){return w},n.getAnchor=function(){return U},n.isSticking=function(){return j},n.getOriginalInitialCSS=function(){return I},n.processUnStickElement=function(e){d(e)},n.processCheckIfShouldStick=function(){W()},n.calculateStickyContentInitialDimensions=function(){return{zIndex:a.css("z-index"),top:a.css("top"),position:H,marginTop:a.css("margin-top"),marginBottom:a.css("margin-bottom"),cssLeft:a.css("left"),height:a.css("height")}},n.updateStickyContentUpdateDimensions=function(e,t){e&&t&&(w.width=e+"px",w.height=t+"px")},t(function(){I=n.calculateStickyContentInitialDimensions(),z()},0)}},controller:["$scope","$window",function(e,t){this.resetLayout=function(n,r){function i(){"top"===s&&(o===t?t.scrollTo(0,0):o.scrollTop>0&&(o.scrollTop=0))}var o=e.getScrollbar(),a=e.getInitialCSS(),s=e.getAnchor();if(e.isSticking()&&(e.processUnStickElement(s),e.processCheckIfShouldStick()),e.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),a.position=e.getOriginalInitialCSS().position,delete a.offsetWidth,void 0===n&&void 0===r){var c=e.getElement()[0].getBoundingClientRect();n=c.width,r=c.height}e.updateStickyContentUpdateDimensions(n,r),i()},this.getScrollbar=function(){return e.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var e="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(e),function(){return{matches:!0}}}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(259),c=n(109),u=n(27),l=n(19),f=n(26),p=n(2),d=n(11),h=n(260),m=n(89),g=n(3),y=function(){function e(e,t,n,r,i,o,a,s,c,u){this.$http=e,this.$q=t,this.imagesUtil=n,this.resultUtil=r,this.briefResultService=i,this.$state=o,this.$timeout=a,this.configurationUtil=s,this.searchService=c,this.searchResultThumbnailContainerService=u,this.lastPnxId="-1";var l=this.searchResultThumbnailContainerService.getType(this.isFeaturedResult,this.item),f={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:m.getResouceTypeImages()[l]};this.customThumbnailLink=f}return e.prototype.go=function(){var e=this,t=0;this.configurationUtil.isSuprima()&&(t=l.isBrowserIE()?400:100),this.$timeout(function(){return e.searchResultThumbnailContainerService.getThumbnailLinks(e.links,e.isFeaturedResult,e.frbr,e.isFrbrGeneric,e.isVirtualBrowse,e.item).then(function(t){e.selectedThumbnailLink=t})},t,!1)},e.prototype.isMultipleVersions=function(){return!this.isFeaturedResult&&this.resultUtil.displayMultipleVersions(this.item,this.briefResultService.getSearchObject())},e.prototype.getThumbnailFromAmazon=function(e){var t=this;return this.$q(function(n){var r=e.filter(t.searchResultThumbnailContainerService.getSpecificLink,"amazon");r.length>0?t.imagesUtil.getImageLink(r[0]).then(function(e){n(e)},function(){n("")}):n("")})},e.prototype.isFavoriteState=function(){return this.searchResultThumbnailContainerService.isFavoriteState()},e.prototype.getResourceTypeForDisplay=function(){return 1!==this.searchService.getFrbrDisplay()&&this.item?"mediatype."+this.item.pnx.display.type[0]:"mediatype.multiplever"},e.prototype.getSelectedThumbnailLink=function(){return!!g(!this.selectedThumbnailLink,"linkURL")||void 0},r([a.Input(),i("design:type",Object)],e.prototype,"frbr",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFrbrGeneric",void 0),r([a.Input(),i("design:type","function"==typeof(t=("undefined"!=typeof f.PrimoResponse&&f.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Array)],e.prototype,"links",void 0),r([a.Input(),i("design:type",String)],e.prototype,"pnxId",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isVirtualBrowse",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFeaturedResult",void 0),e=r([a.Component({providers:[s.ImagesUtil],selector:"prm-search-result-thumbnail-container",templateUrl:"components/search/searchResult/searchResultThumbnail/search-result-thumbnail-container.html"}),o(0,a.Inject("$http")),o(1,a.Inject("$q")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),i("design:paramtypes",[Object,Object,"function"==typeof(n="undefined"!=typeof s.ImagesUtil&&s.ImagesUtil)&&n||Object,"function"==typeof(y="undefined"!=typeof c.ResultUtil&&c.ResultUtil)&&y||Object,"function"==typeof(v="undefined"!=typeof u.BriefResultService&&u.BriefResultService)&&v||Object,Object,Object,"function"==typeof(b="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&b||Object,"function"==typeof(S="undefined"!=typeof d.SearchService&&d.SearchService)&&S||Object,"function"==typeof(_="undefined"!=typeof h.SearchResultThumbnailContainerService&&h.SearchResultThumbnailContainerService)&&_||Object])],e);var t,n,y,v,b,S,_}();t.PrmSearchResultThumbnailContainer=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(34),a=n(918),s=n(923),c=n(405),u=n(925),l=n(200),f=n(926),p=n(927),d=n(50),h=n(928),m=function(){function e(){}return e=r([i.NgModule({declarations:[f.PrmCopyright,h.PrmRequestApproval,d.PrmOpac,p.PrmOpacBackButton,u.PrmServiceButton],providers:[o.OpacService,l.ServiceButtonService],imports:[s.LocationsFilterModule,a.LocationsOpacModule,c.OpacRequestModule]})],e)}();t.OpacModule=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(360),a=n(108),s=n(919),c=n(920),u=n(921),l=n(922),f=n(420),p=function(){function e(){}return e=r([i.NgModule({declarations:[s.PrmLocation,u.PrmLocationItems,c.PrmLocations,l.PrmStackMap],providers:[o.LocationBuilder,a.LocationsService,f.StackMapService],imports:[]})],e)}();t.LocationsOpacModule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(86),u=function(){function e(e,t,n,r){this.locationService=e,this.opacLocations=t,this.$window=n,this.configurationUtil=r,this.clickEvent=new a.EventEmitter}return e.prototype.onClick=function(){this.isOvp()?this.clickEvent.emit(null):this.$window.open(this.location.holdingURL,"_blank")},e.prototype.isOvp=function(){return this.locationService.isOvpLocation(this.location)},e.prototype.getButtonActionLabel=function(){return this.isOvp()?"nui.aria.locations.expand":"nui.aria.account.links.open"},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.getLibraryName=function(e){return this.locationService.getLibraryName(e)},e.prototype.getSubLibraryName=function(e){return this.locationService.getSubLibraryName(e)},r([a.Input(),i("design:type",Object)],e.prototype,"location",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"clickEvent",void 0),e=r([a.Component({selector:"prm-location",templateUrl:"components/search/fullView/getit/opac/locations/location/location.html"}),o(1,a.Inject("opacLocations")),o(2,a.Inject("$window")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.LocationService&&c.LocationService)&&t||Object,Object,Object,"function"==typeof(n="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&n||Object])],e);var t,n}();t.PrmLocation=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(108),c=n(34),u=n(50),l=n(141),f=n(86),p=n(2),d=n(29),h=n(1),m=n(10),g=n(3),y=n(138),v=function(){function e(e,t,n,r,i,o,s,c){this.configurationUtil=e,this.locationsService=t,this.opacService=n,this.opacLocations=r,this.$scope=i,this.locationsFilterService=o,this.locationService=s,this.userSessionManagerService=c,this.changeTabEvent=new a.EventEmitter,this._displayFiltersButton=!1,this.hideShowmore=!1,this.locationsPrefilterActive=!1,this.relatedLocationsListLimit=10;var u=!1;this.memberInst&&(console.log("memberInst "+this.memberInst),u=!!h.getInstitutionCode()&&!(h.getInstitutionCode()===this.memberInst)),this.locationsPrefilter=this.locationsService.getLocationsPrefilterConf(),this.locationsPrefilterActive=this.locationsPrefilter.length>0&&!u,this._displayFiltersButton=this.configurationUtil.getLocationsConfiguration().displayholdingsfilters}return e.prototype.ngOnInit=function(){var e=this;this.locationsFilterService.deleteFilterOptions(),this.activate(),this.$scope.$watch(function(){return e.isFiltered},function(t,n){!t&&n&&e.clearFilters(e.isLocationsFilterVisible)}),this.$scope.$watch(function(){return e.item.delivery.holding},function(t,n){e.results=e.locationsService.getLocations(e.item)}),this.$scope.$watch(function(){return e.memberInst},function(t,n){y(t,n)||e.activate()})},Object.defineProperty(e.prototype,"results",{get:function(){return this._results},set:function(e){this.locationsPrefilterActive&&this.locationsPrefilter&&this.locationsPrefilter.length>0?(this._results=this.locationsService.preFilterLocations(this.locationsPrefilter,e),g(e,"[0]",[]).length===g(this._results,"[0]",[]).length&&g(e,"[1]",[]).length===g(this._results,"[1]",[]).length&&(this.locationsPrefilterActive=!1)):this._results=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayFiltersButton",{get:function(){return this._displayFiltersButton},enumerable:!0,configurable:!0}),e.prototype.activate=function(){var e=this.locationsService.getLocations(this.item);this.unfilteredResults=d(e),this.results=e,this.isSuprima()?this.isSuprima()&&this.isSingleOvpLocation(this.item)&&this.switchToItemsTab(!1,void 0,!0):this.checkAndSwitchToItemsTabAutomatically(0)},e.prototype.checkAndSwitchToItemsTabAutomatically=function(e){var t=this;e>10||(0!==e||this.isSingleOvpLocation(this.item))&&(this.item.rtaInProgress?(e++,setTimeout(function(){t.checkAndSwitchToItemsTabAutomatically(e)},100)):this.switchToItemsTab(!1,{},!0))},e.prototype.isSingleOvpLocation=function(e){var t=this.results.reduce(function(e,t){return e.concat(t)});return 1==t.length&&this.locationService.isOvpLocation(t[0])},e.prototype.switchToItemsTab=function(e,t,n){var r,i=this.locations.length>0||this.otherLocations.length>0;i&&(r=this.locations[0]?this.locations[0]:this.otherLocations[0]),this.gotoLocationItemsTab(r,!1,e,t,n)},e.prototype.gotoLocationItemsTab=function(e,t,n,r,i){var o=this;r=r||this.filters||{},this.isSuprima()&&(r.location=e.location.libraryCode);var a=!!n&&n,s={referer:u.OPAC_TAB.LOCATIONS,dest:u.OPAC_TAB.ITEMS,loc:e,isFiltered:a,filters:r,locationsFilterVisible:this.isLocationsFilterVisible,dropDownOptions:this.dropDownOptions,cancelFocus:i};if(e.items&&0!==e.items.length)this.changeTabEvent.emit(s);else{window.appPerformance.serverTimeLog=window.appPerformance.serverTimeLog?window.appPerformance.serverTimeLog:[],window.appPerformance.serverTimeLog.getLocItems=-1;var c=this.locationsService.getItems(e,t,a,r);c&&c.then(function(e){o.dropDownOptions=o.locationsService.updateFilterDropDownOptions(g(e,"data.possibleFilters"),g(e,"data.itemInfo.locations")),s.dropDownOptions=o.dropDownOptions,s.restoreServices=!1,o.changeTabEvent.emit(s),1===e.data.itemInfo.locations.length&&(window.appPerformance.serverTimeLog.getLocItems=e.data.beaconO22)}),this.changeTabEvent.emit(s)}},Object.defineProperty(e.prototype,"locations",{get:function(){if(this.results)return this.locToUpdate&&this.isSuprima()&&(this.results=this.locationsService.getLocations(this.item),this.locToUpdate=void 0),this.results[0].filter(function(e){return!e.location.relatedTitle})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"otherLocations",{get:function(){if(this.results)return this.locToUpdate&&this.isSuprima()&&(this.results=this.locationsService.getLocations(this.item),this.locToUpdate=void 0),this.results[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relatedLocations",{get:function(){if(this.results)return this.locToUpdate&&this.isSuprima()&&(this.results=this.locationsService.getLocations(this.item),this.locToUpdate=void 0),this.results[0].filter(function(e){return null!=e.location.relatedTitle&&""!==e.location.relatedTitle})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRelatedLocations",{get:function(){var e=!1;if(!this.results)return e;var t=this.results.reduce(function(e,t){return e.concat(t)});return t.forEach(function(t,n){null!=t.location.relatedTitle&&""!==t.location.relatedTitle&&(e=!0)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRelatedTitle",{get:function(e){return null!=e.relatedTitle&&""!==e.relatedTitle},enumerable:!0,configurable:!0}),e.prototype.filterClick=function(){this.isLocationsFilterVisible=!this.isLocationsFilterVisible,this.isLocationsFilterVisible||this.clearFilters(!1)},e.prototype.clearFilters=function(e){this.locationsService.clearFilters(this.item,!1),this.dropDownOptions=void 0,this.results=d(this.unfilteredResults),this.isLocationsFilterVisible=e,this.filters={}},e.prototype.handleFilterEvent=function(e){var t=this,n=this.locationsService.performFilter(e,this.unfilteredResults);n&&n.then(function(n){t.results=g(n,"data.itemInfo.results")||g(n,"results");var r=t.results[1];t.dropDownOptions=t.locationsService.updateFilterDropDownOptions(g(n,"data.possibleFilters"),g(n,"data.itemInfo.locations")),t.results[0].length+(void 0!=r?r.length:0)===1&&t.switchToItemsTab(!0,{location:e.location,volume:e.volume,year:e.year,description:e.description}),t.$scope.$apply()})},e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},e.prototype.showRegisterUser=function(){return!(!this.isLoggedIn()||"suprima"!==h.getBackendSystem()||"Manual"!==this.registerUser)},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.disableLocationsPrefilter=function(){this.locationsPrefilterActive=!1,this._results=this.unfilteredResults},e.prototype.showMore=function(){this.moreLocs=this.results[0].slice(10),this.hideShowmore=!0},e.prototype.showMoreRelatedLocations=function(){this.relatedLocationsListLimit+=10},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",String)],e.prototype,"memberInst",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isFiltered",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"filters",void 0),r([a.Input(),i("design:type",String)],e.prototype,"registerUser",void 0),r([a.Input(),i("design:type",String)],e.prototype,"locToUpdate",void 0),r([a.Output(),i("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isLocationsFilterVisible",void 0),e=r([a.Component({selector:"prm-locations",templateUrl:"components/search/fullView/getit/opac/locations/locations.html"}),o(3,a.Inject("opacLocations")),o(4,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof p.ConfigurationUtil&&p.ConfigurationUtil)&&n||Object,"function"==typeof(v="undefined"!=typeof s.LocationsService&&s.LocationsService)&&v||Object,"function"==typeof(b="undefined"!=typeof c.OpacService&&c.OpacService)&&b||Object,Object,Object,"function"==typeof(S="undefined"!=typeof l.LocationsFilterService&&l.LocationsFilterService)&&S||Object,"function"==typeof(_="undefined"!=typeof f.LocationService&&f.LocationService)&&_||Object,"function"==typeof(O="undefined"!=typeof m.UserSessionManagerService&&m.UserSessionManagerService)&&O||Object])],e);var t,n,v,b,S,_,O}();t.PrmLocations=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),s=n(5),c=n(0),u=n(108),l=n(10),f=n(141),p=n(63),d=n(2),h=n(1),m=n(86),g=n(18),y=(n(327),n(69),n(3)),v=n(29),b=function(){function e(e,t,n,r,i,o,a,s,u){this.locationsService=e,this.locationService=t,this.opacLocations=n,this.$scope=r,this.$translate=i,this.userSessionManagerService=o,this.locationsFilterService=a,this.requestService=s,this.configurationUtil=u,this.changeTabEvent=new c.EventEmitter,this.filters={},this.configurationUtil=u,this.isExpandAll=!1}return e.prototype.ngOnInit=function(){var e=this;this.results=this.locationsService.getLocations(this.item);var t=this.results.reduce(function(e,t){return e.concat(t)});this.isSingleLocation=1==t.length,this.unfilteredLoc=v(this.loc),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item),this.$scope.$watch(function(){return e.isFiltered},function(t,n){!t&&n&&e.clearFilters(),e.isLocationsFilterVisible=t})},e.prototype.isMoreThanOneLoc=function(e){return e.delivery.holding.length>1},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.isItemsFilterDisable=function(e){return!this.isSuprima()&&e.delivery.holding.length>1},e.prototype.getLibraryName=function(e){return this.locationService.getLibraryName(e)},e.prototype.getSubLibraryName=function(e){return this.locationService.getSubLibraryName(e)},Object.defineProperty(e.prototype,"servicesAdditionalParams",{get:function(){return this._servicesAdditionalParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilter",{get:function(){var e;return e="suprima"===this.configurationUtil.getBackendSystem()?this.isFiltered||y(this,"loc.items",{}).length>1||y(this,"dropDownOptions.years",{}).length>1||y(this,"dropDownOptions.volumes",{}).length>1||y(this,"dropDownOptions.descriptions",{}).length>1:this.isSingleLocation},enumerable:!0,configurable:!0}),e.prototype.getServiceAdditionalParams=function(e,t){var n=this.servicesAdditionalParams[t.type];return!n||s.equals({},n)?e.additionalData:(g(e.additionalData,function(e,t){n[t]=e}),n)},e.prototype.allowService=function(){return this.loc&&this.loc.location&&(!s.isDefined(this.loc.location.isValidUser)||this.loc.location.isValidUser)},e.prototype.goToLocTabAfterClearFilter=function(e,t){var n={referer:a.OPAC_TAB.ITEMS,dest:a.OPAC_TAB.LOCATIONS,clearStack:e,isFiltered:!1,filters:{},locationsFilterVisible:t};this.changeTabEvent.emit(n)},e.prototype.filterClick=function(){this.isLocationsFilterVisible=!this.isLocationsFilterVisible,this.isLocationsFilterVisible||this.clearFilters(!1)},e.prototype.getlocationsItems=function(e,t){return this.isSuprima()&&(this.isFilter||this.locationsFilterService.isFilterClicked)?this.locationsService.getLocationsItems([[e]],t,!1,this.filters):this.locationsService.getLocationsItems([[e]],t,!1)},e.prototype.toggleExpandAll=function(e){e.isExpandAll=!e.isExpandAll,this.currLoc.items.forEach(function(t){t.isExpanded=e.isExpandAll})},Object.defineProperty(e.prototype,"currLoc",{get:function(){var e=this;if(this.loc&&void 0===this.loc.locationNoItems&&(this.loc.locationNoItems=!0),this.itemToUpdate&&this.isSuprima()){var t=this.locationsService.getItemQueueData(this.itemToUpdate,this.loc.location.organization);t.then(function(t){var n=t.itemQueueString,r=e.loc.items.filter(function(e){return e.item==t.itemId}),i=r[0].itemFields[0];i=i.substr(0,i.lastIndexOf("(")),i+=n,r[0].itemFields[0]=i}),this.itemToUpdate=void 0}return this.loc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.locationsService.isItemsResquestInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabId",{get:function(){return a.OPAC_TAB.ITEMS},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},e.prototype.handleFilterEvent=function(e){var t=this,n=this.locationsService.performFilter(e,this.results);this.isFiltered=!0,n&&n.then(function(e){e.data.itemInfo.results[0].length>1?t.goToLocTabAfterClearFilter(!0,!0):(t.loc=e.data.itemInfo.results[0][0],t.dropDownOptions=t.locationsService.updateFilterDropDownOptions(e.data.possibleFilters,e.data.itemInfo.locations))})},e.prototype.clearFilters=function(e){this.isFiltered=!1,this.locationsService.clearFilters(this.item,!0),this.dropDownOptions=void 0,this.filters={},this.isMoreThanOneLoc(this.item)?this.goToLocTabAfterClearFilter(!0,e):"suprima"===this.configurationUtil.getBackendSystem()&&(this.loc=v(this.unfilteredLoc),this.getlocationsItems(this.loc,!1))},e.prototype.isAnyFilterFilled=function(){return"suprima"===this.configurationUtil.getBackendSystem()||(y(this.filters,"location")||y(this.filters,"volume")||y(this.filters,"year")||y(this.filters,"description"))},e.prototype.onChangeTabEvent=function(e){this.changeTabEvent.emit(e)},e.prototype.showRegisterUser=function(){return!(!this.isLoggedIn()||"suprima"!==h.getBackendSystem()||"Manual"!==this.registerUser)},r([c.Input(),i("design:type",Object)],e.prototype,"loc",void 0),r([c.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([c.Input(),i("design:type",Boolean)],e.prototype,"isFiltered",void 0),r([c.Input(),i("design:type",Boolean)],e.prototype,"isLocationsFilterVisible",void 0),r([c.Input(),i("design:type",String)],e.prototype,"registerUser",void 0),r([c.Input(),i("design:type",String)],e.prototype,"itemToUpdate",void 0),r([c.Output(),i("design:type","function"==typeof(t="undefined"!=typeof c.EventEmitter&&c.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),r([c.Input(),i("design:type",Object)],e.prototype,"dropDownOptions",void 0),r([c.Input(),i("design:type",Object)],e.prototype,"filters",void 0),e=r([c.Component({selector:"prm-location-items",templateUrl:"components/search/fullView/getit/opac/locations/location-items.html"}),o(2,c.Inject("opacLocations")),o(3,c.Inject("$scope")),o(4,c.Inject("$translate")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof u.LocationsService&&u.LocationsService)&&n||Object,"function"==typeof(b="undefined"!=typeof m.LocationService&&m.LocationService)&&b||Object,Object,Object,Object,"function"==typeof(S="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&S||Object,"function"==typeof(_="undefined"!=typeof f.LocationsFilterService&&f.LocationsFilterService)&&_||Object,"function"==typeof(O="undefined"!=typeof p.RequestService&&p.RequestService)&&O||Object,"function"==typeof(T="undefined"!=typeof d.ConfigurationUtil&&d.ConfigurationUtil)&&T||Object])],e);var t,n,b,S,_,O,T}();t.PrmLocationItems=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(420),c=n(0),u=function(){function e(e,t){this.stackMapService=e,this.opacLocations=t}return e.prototype.ngOnInit=function(){},r([c.Input(),i("design:type",Object)],e.prototype,"mapUrl",void 0),e=r([a.Component({selector:"prm-stack-map",templateUrl:"components/search/fullView/getit/opac/locations/stackMap/stack-map.html"}),o(1,c.Inject("opacLocations")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.StackMapService&&s.StackMapService)&&t||Object,Object])],e);var t}();t.PrmStackMap=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(141),a=n(924),s=function(){function e(){}return e=r([i.NgModule({declarations:[a.PrmLocationsFilter],providers:[o.LocationsFilterService],imports:[]})],e)}();t.LocationsFilterModule=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(141),c=n(151),u=n(2),l=function(){function e(e,t,n,r,i,o){this.locationsFilterService=e,this.opacLocations=t,this.$translate=n,this.$scope=r,this.stringUtils=i,this.configurationUtil=o,this.filterEvent=new a.EventEmitter,this.clearFiltersEvent=new a.EventEmitter,this.filters={},this.dropdownsChanged=!1,this._locationsFilterVisible=!1}return Object.defineProperty(e.prototype,"changed",{get:function(){return this.filters?this.dropdownsChanged=!0:this.dropdownsChanged=!1,this.dropdownsChanged},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.dropDownOptions},function(t,n){t&&"undefined"!=t&&angular.isDefined(t.locations)||(e.dropDownOptions={locations:[],years:[],volumes:[],descriptions:[]},e.locationsFilterService.setFilterDropDownOptions(e.item,e.dropDownOptions))}),"suprima"===this.configurationUtil.getBackendSystem()?this.templateUrl="components/search/fullView/getit/opac/locationsFilter/alma-locations-filter.html":this.templateUrl="components/search/fullView/getit/opac/locationsFilter/locations-filter.html",this._locationsFilterVisible=!0,this.dropDownOptions||(this.dropDownOptions={locations:[],years:[],volumes:[],descriptions:[]},this.locationsFilterService.setFilterDropDownOptions(this.item,this.dropDownOptions)),this.$scope.$watch(function(){return e.isClearAllFilters},function(t,n){t&&e.clearFilters()})},e.prototype.ngOnDestroy=function(){this.locationsFilterVisible=!1,this.dropdownsChanged=!1},Object.defineProperty(e.prototype,"locationsDropDownOptions",{get:function(){return this.dropDownOptions.locations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearDropDownOptions",{get:function(){return this.dropDownOptions.years},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeDropDownOptions",{get:function(){return this.dropDownOptions.volumes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionDropDownOptions",{get:function(){return this.dropDownOptions.descriptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationsFilterVisible",{get:function(){return this._locationsFilterVisible},set:function(e){this._locationsFilterVisible=e},enumerable:!0,configurable:!0}),e.prototype.onChanged=function(){},e.prototype.throwFilterEvent=function(){this.filterEvent.emit({location:this.locationFilter,volume:this.volumeFilter,year:this.yearFilter,
description:this.descriptionFilter})},Object.defineProperty(e.prototype,"filtersMsg",{get:function(){var e=(this.locationFilter?1:0)+(this.yearFilter?1:0)+(this.volumeFilter?1:0),t=this.$translate.instant("nui.locations.filter.message.and"),n={year:"",volume:"",location:""};this.yearFilter&&(n.year=this.$translate.instant("fulldisplay.locations.yearFilter")+" "+this.yearFilter+(3==e?",":2==e?t:"")),this.volumeFilter&&(n.volume=this.$translate.instant("fulldisplay.locations.volumeFilter")+" "+this.volumeFilter+(this.locationFilter?t:"")),this.locationFilter&&(n.location=this.$translate.instant("fulldisplay.locations.locationFilter")+" "+this.$translate.instant(this.locationFilter));var r=this.$translate.instant("nui.locations.filter.message",n);return r},enumerable:!0,configurable:!0}),e.prototype.getLocationCode=function(e){return e.split(":",2)[0]},e.prototype.getLocationName=function(e){return e.indexOf(":")>-1&&e.indexOf(":")<e.length-1?e.split(":",2)[1]:this.$translate.instant(e)},e.prototype.clearFilters=function(){this.filters={},this.dropDownOptions={locations:[],years:[],volumes:[],descriptions:[]},this.locationsFilterService.setFilterDropDownOptions(this.item,this.dropDownOptions),this.clearFiltersEvent.emit(null)},Object.defineProperty(e.prototype,"locationFilter",{get:function(){return this.filters.location},set:function(e){this.filters.location=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeFilter",{get:function(){return this.filters.volume},set:function(e){this.filters.volume=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearFilter",{get:function(){return this.filters.year},set:function(e){this.filters.year=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionFilter",{get:function(){return this.filters.description},set:function(e){this.filters.description=e},enumerable:!0,configurable:!0}),r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isDisabled",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isAfterFiltering",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"isClearAllFilters",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"filterEvent",void 0),r([a.Output(),i("design:type",Object)],e.prototype,"clearFiltersEvent",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"dropDownOptions",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"filters",void 0),e=r([a.Component({selector:"prm-locations-filter",template:'<div ng-include="$ctrl.templateUrl"></div>'}),o(1,a.Inject("opacLocations")),o(2,a.Inject("$translate")),o(3,a.Inject("$scope")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.LocationsFilterService&&s.LocationsFilterService)&&t||Object,Object,Object,Object,"function"==typeof(n="undefined"!=typeof c.StringUtils&&c.StringUtils)&&n||Object,"function"==typeof(l="undefined"!=typeof u.ConfigurationUtil&&u.ConfigurationUtil)&&l||Object])],e);var t,n,l}();t.PrmLocationsFilter=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(200),c=n(50),u=function(){function e(e,t){this.serviceButtonService=e,this.actionIcons=t,this.changeTabEvent=new a.EventEmitter}return e.prototype.getServiceDetails=function(){var e=this;if("OvL"===this.service["service-type"]){var t=this.service["link-to-service"];void 0!==t&&window.open(t,"_blank")}else this.serviceButtonService.makeIlsRequest(this.service,this.requestParameters).then(function(t){var n={referer:e.parentTab,dest:c.OPAC_TAB.REQUEST};e.changeTabEvent.emit(n)})},r([a.Input(),i("design:type",Object)],e.prototype,"service",void 0),r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof c.OPAC_TAB&&c.OPAC_TAB)&&t||Object)],e.prototype,"parentTab",void 0),r([a.Input(),i("design:type",Object)],e.prototype,"requestParameters",void 0),r([a.Output(),i("design:type","function"==typeof(n="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&n||Object)],e.prototype,"changeTabEvent",void 0),e=r([a.Component({selector:"prm-service-button",templateUrl:"components/search/fullView/getit/opac/service-button.html"}),o(1,a.Inject("actionIcons")),i("design:paramtypes",["function"==typeof(u="undefined"!=typeof s.ServiceButtonService&&s.ServiceButtonService)&&u||Object,Object])],e);var t,n,u}();t.PrmServiceButton=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(34),s=n(63),c=n(50),u=n(38),l=n(12),f=n(2),p=n(39),d=n(18),h=n(29),m=function(){function e(e,t,n){this.opacService=e,this.requestService=t,this.configurationUtil=n,this.changeTabEvent=new o.EventEmitter,this.disable=!1}return Object.defineProperty(e.prototype,"formData",{get:function(){return this.requestService.formData},set:function(e){this.requestService.formData=e},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.disable},e.prototype.getSubmitMessage=function(){return this.disable?"Request in process":"I agree with the terms"},e.prototype.cancel=function(){this.changeTabEvent.emit(null)},e.prototype.commit=function(){var e=this;this.disable=!0;var t=this.requestService.service,n=h(this.formData);n.group_id||(n.group_id=this.requestService.ilsApiId),n.item_id&&(t["link-to-service"]=t["link-to-service"]+"/item/"+n.item_id);var r=n.item_id||n.itemId;this.manipulatePostData(n);var i=r?void 0:n.group_id;n.copyright="Y",this.opacService.makeIlsCall(t,n,"POST").then(function(t){e.disable=!1,e.opacService.responseStatus=new a.StatusMsg("ok"===t.status,t["reply-text"]);var n={dest:c.OPAC_TAB.RESPONSE,itemId:r,mmsId:i};e.changeTabEvent.emit(n)})},e.prototype.manipulatePostData=function(e){var t=this;d(e,function(n,r){var i=t.getFieldByName(t.requestService.form,r);if(i){if(i.fieldType===l.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete e[r];if(i.uiType===l.FormBuilderEnums.UI_TYPE.DATE){var o=new u.DateUtils;e[r]=o.convertDateTypeToIlsDateString(e[r])}}})},e.prototype.getFieldByName=function(e,t){var n=p(e,function(e){return e.name===t});return n[0]},e.prototype.getServiceType=function(){var e=this.requestService.service;if(e)return e.type},e.prototype.getTitleLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.title":"almaDigitization.copyright.title"}return"illrequest.copyright.title"},e.prototype.getMessageLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.message":"almaDigitization.copyright.message"}return"illrequest.copyright.message"},e.prototype.getSubTitleLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.sub_title":"almaDigitization.copyright.sub_title"}return"illrequest.copyright.sub_title"},e.prototype.getAgreeBtnLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResource.agree":"almaDigitization.agree"}return"nui.ill.agree"},e.prototype.getCancelBtnLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.cancel":"almaDigitization.cancel"}return"nui.ill.cancel"},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},r([o.Output(),i("design:type","function"==typeof(t="undefined"!=typeof o.EventEmitter&&o.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),e=r([o.Component({selector:"prm-copyright",templateUrl:"components/search/fullView/getit/opac/copyright/copyright.html"}),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof a.OpacService&&a.OpacService)&&n||Object,"function"==typeof(m="undefined"!=typeof s.RequestService&&s.RequestService)&&m||Object,"function"==typeof(g="undefined"!=typeof f.ConfigurationUtil&&f.ConfigurationUtil)&&g||Object])],e);var t,n,m,g}();t.PrmCopyright=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(154),c=n(50),u=function(){function e(e){this.opacLocations=e,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"label",{get:function(){var e=this.historyStack.peek();switch(e){case c.OPAC_TAB.LOCATIONS:return"nui.locations.back";case c.OPAC_TAB.ITEMS:return"nui.items.back";default:return"eshelf.back"}},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){var e=this.historyStack.pop();this.requestStatus?(e=this.historyStack.pop(),this.changeTabEvent.emit({dest:e,referer:this.historyStack.peek(),updateLocationItems:e===c.OPAC_TAB.ITEMS})):this.changeTabEvent.emit({dest:e})},r([a.Input(),i("design:type","function"==typeof(t="undefined"!=typeof s.LimitedHistoryStack&&s.LimitedHistoryStack)&&t||Object)],e.prototype,"historyStack",void 0),r([a.Input(),i("design:type",Boolean)],e.prototype,"requestStatus",void 0),r([a.Output(),i("design:type","function"==typeof(n="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&n||Object)],e.prototype,"changeTabEvent",void 0),e=r([a.Component({selector:"prm-opac-back-button",templateUrl:"components/search/fullView/getit/opac/back-button.html"}),o(0,a.Inject("opacLocations")),i("design:paramtypes",[Object])],e);var t,n}();t.PrmOpacBackButton=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(34),c=n(63),u=n(50),l=n(38),f=n(12),p=n(6),d=n(1),h=n(39),m=n(18),g=n(29),y=n(3),v=function(){function e(e,t,n,r){this.opacService=e,this.requestService=t,this.$state=n,this.primolyticsService=r,this.changeTabEvent=new a.EventEmitter,this.disable=!1}return Object.defineProperty(e.prototype,"formData",{get:function(){return this.requestService.formData},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.disable},e.prototype.getLink=function(){switch(this.statusMessage){case"isbn_exists":var e=window.appConfig.vid,t=d.getInstitutionCode(),n=y(this.requestService,"formData.isbn");return"/discovery/openurl?institution="+t+"&vid="+e+"&rft.isbn="+n;default:return}},e.prototype.getLinkLabel=function(){switch(this.statusMessage){case"isbn_exists":return"almaPurchaseRequest.approveRequest.link";default:return}},e.prototype.cancel=function(){this.changeTabEvent.emit(null)},e.prototype.commit=function(){var e=this;this.disable=!0;var t=this.requestService.service,n=g(this.formData);n.group_id||(n.group_id=this.requestService.ilsApiId),n.item_id&&(t["link-to-service"]=t["link-to-service"]+"/item/"+n.item_id);var r=n.item_id||n.itemId;this.manipulatePostData(n);var i=r?void 0:n.group_id;n.copyright="Y",this.opacService.makeIlsCall(t,n,"POST").then(function(t){e.disable=!1,e.opacService.responseStatus=new s.StatusMsg("ok"===t.status,t["reply-text"]);var n={dest:u.OPAC_TAB.RESPONSE,itemId:r,mmsId:i};e.changeTabEvent.emit(n)})},e.prototype.manipulatePostData=function(e){var t=this;m(e,function(n,r){var i=t.getFieldByName(t.requestService.form,r);if(i){if(i.fieldType===f.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete e[r];if(i.uiType===f.FormBuilderEnums.UI_TYPE.DATE){var o=new l.DateUtils;e[r]=o.convertDateTypeToIlsDateString(e[r])}}})},e.prototype.getFieldByName=function(e,t){var n=h(e,function(e){return e.name===t});return n[0]},e.prototype.sendLinkClickBeacon=function(){switch(this.statusMessage){case"isbn_exists":this.sendResourceExistBeacon()}},e.prototype.sendResourceExistBeacon=function(){},r([a.Output(),i("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),r([a.Input(),i("design:type",String)],e.prototype,"statusMessage",void 0),r([a.Input(),i("design:type",String)],e.prototype,"header",void 0),r([a.Input(),i("design:type",String)],e.prototype,"message",void 0),r([a.Input(),i("design:type",String)],e.prototype,"approveRequest",void 0),r([a.Input(),i("design:type",String)],e.prototype,"cancelRequest",void 0),r([p.beacon({p:"general",op:"resourceExistLink"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],e.prototype,"sendResourceExistBeacon",null),e=r([a.Component({selector:"prm-request-approval",templateUrl:"components/search/fullView/getit/opac/requestApproval/request-approval.html"}),o(2,a.Inject("$state")),i("design:paramtypes",["function"==typeof(n="undefined"!=typeof s.OpacService&&s.OpacService)&&n||Object,"function"==typeof(v="undefined"!=typeof c.RequestService&&c.RequestService)&&v||Object,Object,"function"==typeof(b="undefined"!=typeof p.PrimolyticsService&&p.PrimolyticsService)&&b||Object])],e);var t,n,v,b}();t.PrmRequestApproval=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),c=n(22),u=n(1),l=n(28),f=n(16),p=n(11),d=n(8),h=n(20),m=function(){function e(e,t,n,r,i,o,a,s,c){this.$stateParams=e,this.$state=t,this.searchService=n,this.journalsService=r,this.databasesService=i,this.newspapersService=o,this.$translate=a,this.changeLangService=s,this.mediaQueries=c,"browse"===this.$stateParams.mode&&this.initBackToBrowseLabel()}return e.prototype.navigateBackToSearchResults=function(){var e={vid:this.$stateParams.vid,query:this.$stateParams.query,search_scope:this.$stateParams.search_scope,tab:this.$stateParams.tab,sortby:this.$stateParams.sortby,facet:this.$stateParams.facet,mode:this.$stateParams.mode,pfilter:this.$stateParams.pfilter,offset:this.$stateParams.offset,journals:this.$stateParams.journals,databases:this.$stateParams.databases,pcAvailability:this.$stateParams.pcAvailability,searchCDI:this.$stateParams.searchCDI},t=s.STATE_NAMES.SEARCH;this.$stateParams.fromFeaturedResult&&(e.tab=this.$stateParams.originTab,e.search_scope=this.$stateParams.originScope,this.$stateParams.originTab=void 0,this.$stateParams.originTab=void 0,this.$stateParams.fromFeaturedResult=void 0),this.journalsService.isJournalSearch()&&(t=s.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(t=s.STATE_NAMES.DB_SEARCH),this.newspapersService.isNewspapersSearch()&&(t=s.STATE_NAMES.NEWSPAPERS),console.log("Back URL from full view: Remove title, decription and schema.org of closed item."),this.searchService.removeSEOData(),this.$state.go(t,e,{reload:!1})},e.prototype.isBackToSearchRequired=function(){return!(!this.$stateParams.query&&"browse"!==this.$stateParams.mode)},e.prototype.initBackToBrowseLabel=function(){var e=this,t={subject:"subjects",author:"authors",title:"titles",series:"series"};this.$stateParams.browseScope.includes("callnumber")?this.$translate("browse.back.to.callnumbers").then(function(t){e.backToBrowseLabel=t}):this.$stateParams.browseScope.includes("subject")?this.$translate("browse.back.to.subjects").then(function(t){e.backToBrowseLabel=t}):this.$translate("browse.back.to."+t[this.$stateParams.browseScope]).then(function(t){e.backToBrowseLabel=t})},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseScope",{get:function(){return this.$stateParams.browseScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseState",{get:function(){return s.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backToBrowseParams",{get:function(){return{vid:u.getVid(),browseQuery:this.$stateParams.browseQuery,browseScope:this.$stateParams.browseScope,browseFirstTerm:this.$stateParams.browseFirstTerm,innerPnxIndex:this.$stateParams.innerPnxIndex,numOfUsedTerms:this.$stateParams.numOfUsedTerms,fn:this.$stateParams.fn}},enumerable:!0,configurable:!0}),e.prototype.isRTL=function(){return"rtl"===this.changeLangService.direction},e=r([a.Component({selector:"prm-back-to-search-results-button",templateUrl:"components/search/fullView/backToSearchResultsButton/back-to-search-results-button.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$state")),o(6,a.Inject("$translate")),i("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof p.SearchService&&p.SearchService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.JournalsService&&c.JournalsService)&&n||Object,"function"==typeof(m="undefined"!=typeof l.DatabasesService&&l.DatabasesService)&&m||Object,"function"==typeof(g="undefined"!=typeof f.NewspapersService&&f.NewspapersService)&&g||Object,Object,"function"==typeof(y="undefined"!=typeof h.ChangeLangService&&h.ChangeLangService)&&y||Object,"function"==typeof(v="undefined"!=typeof d.MediaQueries&&d.MediaQueries)&&v||Object])],e);var t,n,m,g,y,v}();t.PrmBackToSearchResultsButton=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8),s=n(9),c=n(1),u=function(){function e(e,t){this.mediaQueries=e,this.mappingTablesCache=t}return Object.defineProperty(e.prototype,"showICPLicenseFooter",{get:function(){var e=!1,t=c.getShowICPLicenseFooter();return!t||"yes"!==t.toLowerCase()&&"true"!==t.toLowerCase()||(e=!0),e},enumerable:!0,configurable:!0}),e=r([o.Component({selector:"prm-explore-footer",templateUrl:"components/primoExplore/primo-explore-footer.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MediaQueries&&a.MediaQueries)&&t||Object,"function"==typeof(n="undefined"!=typeof s.MappingTablesCache&&s.MappingTablesCache)&&n||Object])],e);var t,n}();t.PrimoExploreFooter=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(8),s=function(){function e(e){this.mediaQueries=e}return e=r([o.Component({selector:"prm-icp-license-footer",templateUrl:"components/primoExplore/footers/icp-license-footer.html"}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MediaQueries&&a.MediaQueries)&&t||Object])],e);var t}();t.PrimoIcpLicenseFooter=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(933),a=n(159),s=n(934),c=n(249),u=function(){function e(){}return e=r([i.NgModule({declarations:[o.PrmChaptersAndReviews,s.PrmChaptersAndReviewsItem],providers:[a.ChaptersAndReviewsService,c.ChaptersAndReviewsItemService],imports:["angular-inview"]})],e)}();t.ChaptersAndReviewsModule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(159),c=n(30),u=n(4),l=n(41),f=n(14),p=n(249),d=n(45),h=n(3),m=function(){function e(e,t,n,r,i,o,a){var s=this;this.chaptersAndReviewsService=e,this.alertService=t,this.$state=n,this.$scope=r,this.searchFieldsService=i,this.chaptersAndReviewsItemService=o,this.$translate=a,this.SEARCH_STATE=u.STATE_NAMES.SEARCH,i.searchParams.query?this.savedSearchParams=d(i.searchParams):this.savedSearchParams={vid:this.$state.params.vid,query:this.$state.params.query,search_scope:this.$state.params.search_scope,tab:this.$state.params.tab},this.$scope.$on("addChaptersEvent",function(e,t){s.onAddRelatedItemsEvent(e,t)}),this._chaptersAlert=t.create(c.ALERT_MSG_TYPE.GENERAL),this._chaptersAlert.show('<span translate="nui.results.relatedItems.chapter2chapter.note"></span>'),this._reviewsAlert=t.create(c.ALERT_MSG_TYPE.GENERAL),this._reviewsAlert.show('<span translate="nui.results.relatedItems.book2review.note"></span>')}return Object.defineProperty(e.prototype,"chaptersAlert",{get:function(){return this._chaptersAlert},set:function(e){this._chaptersAlert=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reviewsAlert",{get:function(){return this._reviewsAlert},set:function(e){this._chaptersAlert=e},enumerable:!0,configurable:!0}),e.prototype.onAddRelatedItemsEvent=function(e,t){var n=this;this.updateItem();var r=t.params;this.chaptersAndReviewsService.performChaptersSearch(r).then(function(){n.chaptersAndReviewsService.updateURLSearchParams(r)})},e.prototype.updateItem=function(){var e=this;this.item=this.chaptersAndReviewsService.item,this.chaptersAndReviewsItemService.relatedItemsObj||(this.item?this.getRelatedItems(this.item):this.chaptersAndReviewsItemService.getItem().then(function(t){e.item=t.data,e.chaptersAndReviewsService.item=e.item,e.getRelatedItems(e.item)}))},e.prototype.ngOnInit=function(){this.updateItem()},e.prototype.getRelatedItems=function(e){this.chaptersAndReviewsService.getRelatedItems(e)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),e.prototype.getRelatedItemsHeaderLabel=function(){if(!this.item)return"";if("reviews"===this.type)return this.$translate.instant("nui.results.relatedItems.book2review.title");if("chapters"===this.type){var e=h(this.item,"pnx.display.type[0]","b").toLowerCase();if("book"===e)return this.$translate.instant("nui.results.relatedItems.book2chapter.title");if("book_chapter"===e)return this.$translate.instant("nui.results.relatedItems.chapter2chapter.title")}return""},Object.defineProperty(e.prototype,"type",{get:function(){return h(this.$state,"params.type")},enumerable:!0,configurable:!0}),e=r([a.Component({selector:"prm-chapters-and-reviews",templateUrl:"components/search/chaptersAndReviews/chapters-and-reviews.html"}),o(2,a.Inject("$state")),o(3,a.Inject("$scope")),o(6,a.Inject("$translate")),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ChaptersAndReviewsService&&s.ChaptersAndReviewsService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.AlertFactory&&c.AlertFactory)&&n||Object,"function"==typeof(m="undefined"!=typeof l.IState&&l.IState)&&m||Object,Object,"function"==typeof(g="undefined"!=typeof f.SearchFieldsService&&f.SearchFieldsService)&&g||Object,"function"==typeof(y="undefined"!=typeof p.ChaptersAndReviewsItemService&&p.ChaptersAndReviewsItemService)&&y||Object,Object])],e);var t,n,m,g,y}();t.PrmChaptersAndReviews=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(249),c=n(21),u=n(11),l=n(159),f=n(42),p=n(155),d=n(1);n(98).Subject,n(35).Observable;n(363);var h=n(3),m=function(){function e(e,t,n,r,i,o,a,s,c,u,l){this.$http=e,this.$translate=n,this.chaptersAndReviewsItemService=r,this.searchStateService=i,this.chaptersAndReviewsService=o,this.$state=a,this.searchService=s,this.templateUtil=c,this.fullViewDialogService=u,this.$stateParams=l,this.vid=d.getVid(),this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"title",{get:function(){return h(this.item,"pnx.display.title[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceType",{get:function(){return"mediatype."+h(this.item,"pnx.display.type[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contributor",{get:function(){return h(this.item,"pnx.display.contributor[0]")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creator",{get:function(){return h(this.item,"pnx.display.creator[0]")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creatorAndContributor",{get:function(){return this.getTextFromVal(this.creator)+(this.creator?" ":"")+this.getTextFromVal(this.contributor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deepLinkPath",{get:function(){if(this.item)return this.templateUtil.getFullDeepLinkAbsPath(this.item)},enumerable:!0,configurable:!0}),e.prototype.openFullView=function(e){var t=this;this.item?this.fullViewDialogService.openFullViewDialog(this.item,e,"chaptersAndReviewsItem"):this.getItemPromise.then(function(){t.fullViewDialogService.openFullViewDialog(t.item,e,"chaptersAndReviewsItem")})},e.prototype.onItemClick=function(e){e.preventDefault(),this.openFullView(e)},e.prototype.getTextFromVal=function(e){return e&&e.includes("$$Q")?e.split("$$Q")[0]:e},r([a.Input(),i("design:type",Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-chapters-and-Reviews-item",templateUrl:"components/search/chaptersAndReviews/chapters-and-reviews-item.html"}),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),o(6,a.Inject("$state")),o(10,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof s.ChaptersAndReviewsItemService&&s.ChaptersAndReviewsItemService)&&t||Object,"function"==typeof(n="undefined"!=typeof c.SearchStateService&&c.SearchStateService)&&n||Object,"function"==typeof(m="undefined"!=typeof l.ChaptersAndReviewsService&&l.ChaptersAndReviewsService)&&m||Object,Object,"function"==typeof(g="undefined"!=typeof u.SearchService&&u.SearchService)&&g||Object,"function"==typeof(y="undefined"!=typeof f.TemplateUtil&&f.TemplateUtil)&&y||Object,"function"==typeof(v="undefined"!=typeof p.FullViewDialogService&&p.FullViewDialogService)&&v||Object,Object])],e);var t,n,m,g,y,v}();t.PrmChaptersAndReviewsItem=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(){}return e=r([o.Injectable(),i("design:paramtypes",[])],e)}();t.OrganizationsService=a}]);


angular.module('primo-explore.config').run(['$templateCache', function($templateCache) {$templateCache.put('components/infra/formBuilder/field/form-field-radio.html','<md-input-container layout="row" layout-align="start start">\r\n    <md-radio-group ng-model="$ctrl.formData[$ctrl.field.name]" title="{{$ctrl.field.tooltip}}"\r\n    \t\t\t    layout="{{$ctrl.mediaQueries.gtxs ? ($ctrl.field.style && $ctrl.field.style.layout ? $ctrl.field.style.layout : \'row\') : \'column\'}}"\r\n    \t\t\t    layout-align="{{$ctrl.mediaQueries.gtxs&&(!$ctrl.field.style||$ctrl.field.style.layout != \'column\' ) ? \'start center\': \'center start\'}}" >\r\n        <p ng-if="$ctrl.field.label" class="label" flex="noshrink" for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></p>\r\n        <div {{$ctrl.field.style && $ctrl.field.style.layout === \'column\' ? \'flex\' : \'\'}}\r\n        \tlayout="row" layout-align="start center"\r\n        \tclass="layout-align-start-center layout-row\r\n        \t\t{{$ctrl.field.style && $ctrl.field.style.layout === \'column\' ? \'flex\' : \'\'}}"\r\n        \tng-repeat="option in $ctrl.field.options">\r\n\r\n\t        <md-radio-button  value="{{option.value}}"\r\n\t        \t\t\t\t (click)="$ctrl.field.events.onClick($ctrl.field.events.params)" >\r\n\t        \t{{option.label | translate}}\r\n\r\n\t\t        <div ng-if="option.info" class="inline-help ng-scope">\r\n\t\t        \t<md-tooltip>\r\n\t \t\t\t\t\t{{option.info | translate}}\r\n\t \t\t\t\t</md-tooltip>\r\n\r\n\t\t        \t<prm-icon\r\n\t\t\t              [icon-type]="::$ctrl.actionIcons.info.type"\r\n\t\t\t              [svg-icon-set]="::$ctrl.actionIcons.info.iconSet"\r\n\t\t\t              [icon-definition]="::$ctrl.actionIcons.info.icon">\r\n\t\t\t\t    </prm-icon>\r\n\r\n\t\t        </div>\r\n\t        </md-radio-button>\r\n        </div>\r\n    </md-radio-group>\r\n</md-input-container>\r\n');
$templateCache.put('components/account/account.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar [links]="$ctrl.skipLinks"></prm-topbar></div><md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="row"><div flex="0" flex-md="5" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div><md-button aria-label="{{\'nui.aria.account.back\' | translate}}" ng-show="$ctrl.displayBackToSearchLink" class="back-button offset-to-left" (click)="$ctrl.backToSearch()" id="backtosearch" role="link"><md-tooltip md-delay="400"><span translate="nui.aria.account.back"></span></md-tooltip><prm-icon svg-icon-set="{{::$ctrl.accountIcons.backToSearch.iconSet}}" icon-type="{{::$ctrl.accountIcons.backToSearch.type}}" icon-definition="{{::$ctrl.accountIcons.backToSearch.icon}}"></prm-icon></md-button><md-divider class="toolbar-divider visible"></md-divider><h1 class="toolbar-title"><span ng-if="$ctrl.isOvp()" translate="menu.myaccount.my_library_card"></span> <span ng-if="!$ctrl.isOvp()" translate="nui.details.header.ovl"></span></h1><prm-linked-user-selector></prm-linked-user-selector></div></md-toolbar><md-content layout="row" layout-fill class="padded-container" layout-align="center start"><div flex="0" flex-md="$ctrl.numOfInstitutions() ? 0 : 5 " flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div><div class="main" layout="row" flex><prm-account-overview ng-if="$ctrl.isOvp()" layout-fill></prm-account-overview><prm-personal-info flex ng-if="!$ctrl.isOvp()" layout-fill></prm-personal-info></div><div flex="0" flex-md="5" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div></md-content><prm-account-after parent-ctrl="$ctrl"></prm-account-after>');
$templateCache.put('components/blankIll/blank-ill.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.blankIll"></h1></div><prm-spinner ng-if="$ctrl.getRequestIsLoading()" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-tabs md-dynamic-height md-dynamic- md-selected="$ctrl.selectedTab" ng-show="!$ctrl.getRequestIsLoading()" class="tabs-as-app hidden-tabs"><md-tab></md-tab><md-tab></md-tab><md-tab label="Request Form"><md-content><prm-request blank-service="AlmaResourceSharing" (change-tab-event)="$ctrl.onChangeTabEvent($event)" layout="column"></prm-request></md-content></md-tab><md-tab label="copyrights"><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply"><md-content><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span translate-default="{{$ctrl.getResponseMessage()}}" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content></md-tab></md-tabs><div ng-if="$ctrl.displayErrorMessage && !$ctrl.getRequestIsLoading()" class="margin-bottom-medium zero-padding-bottom ng-scope" layout="row" layout-align="center center"><div flex-gt-lg="15" flex="0"></div><md-card class="default-card"><md-card-content><h2 class="light-text" translate="nui.search.error.blankill.header"></h2><p><span class="display-block" translate="nui.search.error.blankill.description1"></span> <span class="display-block" translate="nui.search.error.blankill.description2"></span></p></md-card-content></md-card><div flex-gt-lg="15" flex="0" class="flex-gt-lg-15 flex-0"></div></div><prm-blank-ill-after parent-ctrl="$ctrl"></prm-blank-ill-after>');
$templateCache.put('components/citationLinker/citation-linker.html','<div id="citationLinker"><header layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div class="padding-medium padding-bottom-zero margin-bottom-medium" flex><h1 class="light-text margin-bottom-tiny" ng-style="$mdMedia(\'xs\') && {\'font-size\': \'1.5em\'}"><span translate="nui.citationLinker.title1"></span> <small translate="nui.citationLinker.title2"></small></h1><p><span translate="nui.citationLinker.helptext1"></span><br><span translate="nui.citationLinker.helptext2"></span></p></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div></header><main tabindex="-1" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div class="padding-left-medium padding-right-medium margin-bottom-large" layout="column" flex><div class="form-focus" layout="column" flex><form class="request-form" ng-cloak action="{{$ctrl.getBaseURL()}}" name="citationLinker" method="get" target="_blank" enctype="application/x-www-form-urlencoded; charset=utf-8"><div class="form-shaded-content padding-medium" layout="row"><md-radio-group layout="row" ng-model="$ctrl.activeTab" ng-change="$ctrl.changeTab()"><md-radio-button ng-repeat="tab in ::$ctrl.tabs" value="{{tab}}"><span translate="citationLinker.{{tab}}"></span></md-radio-button></md-radio-group></div><input ng-if="$ctrl.isSuprima()" type="hidden" name="institution" id="institution" value="{{$ctrl.institutionCode}}"/> <input ng-if="$ctrl.isSuprima()" type="hidden" name="vid" id="vid" value="{{$ctrl.vid}}"/> <input type="hidden" name="ctx_ver" id="ctx_ver" value="Z39.88-2004"/> <input type="hidden" name="rft.genre" id="rft.genre" value="{{$ctrl.activeTab}}"/> <input type="hidden" name="ctx_enc" id="ctx_enc" value="info:ofi/enc:UTF-8"/> <input type="hidden" name="url_ver" id="url_ver" value="Z39.88-2004"/> <input type="hidden" name="url_ctx_fmt" id="url_ctx_fmt" value="infofi/fmt:kev:mtx:ctx"/> <input type="hidden" name="rfr_id" id="rfr_id" value="info:sid/primo.exlibrisgroup.com:primo4-{{$ctrl.activeTab}}-cLinker"/> <input type="hidden" name="rft_val_fmt" id="rft_val_fmt" value="info:ofi/fmt:kev:mtx:{{$ctrl.activeTab}}"/> <input type="hidden" name="isCitationLinker" id="isCitationLinker" value="Y"/> <input ng-if="$ctrl.isJtitle && !$ctrl.isSuprima()" type="hidden" name="sfx.title_search" id="sfx.title_search" value="{{$ctrl.getTitleSearch()}}"/> <input ng-if="$ctrl.isDate" type="hidden" name="rft.date" id="isCitationLinker" value="{{$ctrl.calcDate()}}"/> <input ng-if="$ctrl.isDoi && $ctrl.isOpenURLFieldFilled(\'rft.doi\')" type="hidden" name="rft_id" id="rft_id" value="info:doi/{{$ctrl.formData[\'rft.doi\']}}"/> <input ng-if="$ctrl.isPmid && $ctrl.isOpenURLFieldFilled(\'rft.pmid\')" type="hidden" name="rft_id" id="rft_id" value="info:pmid/{{$ctrl.formData[\'rft.pmid\']}}"/><div class="padding-large" layout="column" layout-align-gt-xs="start start" layout-align-xs="strech"><div class="request-form-group" layout="row" layout-xs="column" ng-repeat="group in $ctrl.sortedOpenURLFields"><div ng-class="{\'request-form-group-item\':!$ctrl.detectMobile()}" layout="row" layout-xs="column" ng-repeat="field in group"><prm-form-field [field]="field" [data]="$ctrl.formData" [form]="::this.citationLinker"></prm-form-field><md-input-container class="underlined-input" ng-if="$ctrl.isSfx() && field.name == \'rft.jtitle\'"><md-select ng-model="$ctrl.titleSearch"><md-option ng-repeat="option in $ctrl.journalTitleDropdown" ng-value="option" translate="citationLinker.{{option}}"></md-option></md-select></md-input-container></div></div></div><div class="padding-small" layout="row"><md-button (click)="$ctrl.clearForm()" class="button-secondary button-with-icon" aria-label="{{(\'nui.citationLinker.reset\' | translate)}}"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_refresh_24px"></prm-icon><span translate="nui.citationLinker.reset"></span></md-button><span flex></span><md-button type="submit" ng-disabled="citationLinker.$invalid" class="button-confirm button-large button-with-icon" aria-label="{{\'nui.aria.newspapers.submitForm\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span translate="nui.citationLinker.submit"></span></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-lg-plus="" flex-xl="30"></div></main></div><prm-citation-linker-after parent-ctrl="$ctrl"></prm-citation-linker-after>');
$templateCache.put('components/clipboard/copy-clipboard-btn.html','<md-button ng-click="$ctrl.saveOffset()"\r\n           ng-if="$ctrl.isSupported"\r\n           ng-hide="$ctrl.copySuccessful"\r\n           clipboard\r\n           type="button"\r\n           text="$ctrl.textToCopy"\r\n           on-copied="$ctrl.clipboardSuccess() | translate"\r\n           on-error="$ctrl.clipboardFailure(err) | translate"\r\n           id="copy-citation-button"\r\n           class="button-confirm button-with-icon"\r\n           aria-label="{{$ctrl.buttonText | translate}}">\r\n    <prm-icon icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="clipboard">\r\n    </prm-icon>\r\n    <span translate="{{$ctrl.buttonText}}"></span>\r\n</md-button>\r\n\r\n<md-button ng-if="!$ctrl.isSupported"\r\n           ng-hide="$ctrl.copySuccessful"\r\n           ng-click="$ctrl.clipboardSuccess()"\r\n           type="button"\r\n           id="copy-citation-button"\r\n           class="button-confirm button-with-icon">\r\n    <prm-icon icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="clipboard">\r\n    </prm-icon>\r\n    <span translate="{{$ctrl.buttonText}}"></span>\r\n</md-button>\r\n\r\n<div ng-if="$ctrl.copySuccessful"\r\n     layout="row"\r\n     layout-align="center center"\r\n     layout-padding\r\n     class="zero-padding-top">\r\n    <prm-icon icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="check">\r\n    </prm-icon>\r\n    <span translate="{{$ctrl.buttonText}}" role="alert"></span>\r\n</div>\r\n\r\n\n<prm-copy-clipboard-btn-after parent-ctrl="$ctrl"></prm-copy-clipboard-btn-after>');
$templateCache.put('components/collection/collection-discovery.html','<div class="collections-wrapper"><md-toolbar><div class="md-toolbar-tools"><div class="collection-nav" layout="column"><prm-collection-breadcrumbs coll_id="{{$ctrl.colId}}" curr_col_name="{{$ctrl.highlightedCollection.name}}" bvid="{{$ctrl.vid}}" colayout="{{$ctrl.colayout}}" inst="{{$ctrl.inst}}"></prm-collection-breadcrumbs><h2 class="collection-title" layout="row" layout-align="start center" ng-show="$ctrl.highlightedCollection"><prm-icon icon-type="{{$ctrl.collectionIcons.leftArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.leftArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.leftArrow.icon}}"></prm-icon><span>{{$ctrl.highlightedCollection.name}}</span></h2></div><span flex></span><div layout="row" class="collection-actions" ng-init="toggleList={layoutParam : $ctrl.colayout, materailLayout : ($ctrl.colayout === \'list\' ? \'column\' : \'row\')}"><md-button class="md-icon-button" aria-label="{{\'nui.aria.collection.list\' | translate}}" aria-label="View Collections as List" (click)="toggleList={layoutParam : \'list\' , materailLayout :  \'column\' };"><prm-icon id="noam" class="md-icon-button" icon-type="{{$ctrl.collectionIcons.listView.type}}" svg-icon-set="{{$ctrl.collectionIcons.listView.iconSet}}" icon-definition="{{$ctrl.collectionIcons.listView.icon}}"></prm-icon></md-button><md-button class="md-icon-button" aria-label="{{\'nui.aria.collection.grid\' | translate}}" (click)="toggleList={layoutParam : \'grid\' , materailLayout :  \'row\' };"><prm-icon class="md-icon-button selected" icon-type="{{$ctrl.collectionIcons.gridView.type}}" svg-icon-set="{{$ctrl.collectionIcons.gridView.iconSet}}" icon-definition="{{$ctrl.collectionIcons.gridView.icon}}"></prm-icon></md-button></div></div></md-toolbar><md-content><div class="collections-container tile-view" layout="row" layout-fill layout-wrap><md-card class="collection-cover" layout="row" ng-show="$ctrl.highlightedCollection != \'\'"><div class="cover-image-container" flex flex-order="1" flex-order-gt-xs="2"><img class="md-card-image" src="{{$ctrl.highlightedCollection.thumbnail}}"></div><md-card-content flex><p ng-bind-html="$ctrl.highlightedCollection.description"></p><div class="md-actions" layout="row" layout-align="end center"><md-button aria-label="{{\'nui.aria.collection.focus\' | translate:\'{name: \\\'\'+$ctrl.highlightedCollection.name+\'\\\'}\'}}" class="anchor-link" (click)="$ctrl.handleViewHighlightedCol($ctrl.highlightedCollection)" ng-show="$ctrl.colId==0 && $ctrl.highlightedCollection.collections"><span translate="colldiscovery.viewcoll.toplevel"></span></md-button><md-button aria-label="{{\'nui.aria.collection.items\' | translate:\'{name: \\\'\'+$ctrl.highlightedCollection.name+\'\\\'}\'}}" class="anchor-link" ng-href="/primo_library/libweb/action/dlSearch.do?vid={{$ctrl.vid}}&institution={{$ctrl.inst}}&query=cdparentid,exact,{{$ctrl.colId}}&loc=scope:({{$ctrl.inst}})&displayquery=false" ng-show="$ctrl.highlightedCollection.items==\'Y\'"><span translate="colldiscovery.viewitems"></span></md-button></div></md-card-content></md-card><section class="collection-section"><div ng-class="\'layout-\'+toggleList.materailLayout" layout="{{toggleList.materailLayout}}" layout-xs="column" layout-sm="column" layout-wrap flex="100"><div class="collection-item keep" flex-gt-lg="25" flex-lg="33" flex-md="50" flex-xs="100" flex-sm="100" ng-repeat="item in $ctrl.allCollections" ng-if="item!=$ctrl.highlightedCollection"><md-card layout="row"><div class="md-card-image keep" style="background-image: url({{item.thumbnail}});" flex-order="2" layout="column"></div><md-card-content layout="column" flex="60"><h2 class="md-title">{{item.name}}</h2><p ng-bind-html="item.description"></p><section layout="row" layout-xs="column" layout-sm="column" layout-align-gt-md="start end" layout-align="start start" layout-wrap><span layout="row" layout-gt-md="column" flex="100"><md-button aria-label="{{\'nui.aria.collection.focus\' | translate:\'{name: \\\'\'+item.name+\'\\\'}\'}}" class="md-raised" ng-href="collectionDiscovery.do?collectionId={{item.pid.value}}&vid={{$ctrl.vid}}&colayout={{toggleList.layoutParam}}&inst={{$ctrl.inst}}"><span translate="colldiscovery.viewcoll.sub"></span><span class="chevron-right"></span></md-button></span></section></md-card-content></md-card></div></div></section></div></md-content></div><prm-collection-after parent-ctrl="$ctrl"></prm-collection-after>');
$templateCache.put('components/collectionDiscovery/collection-discovery.html','<prm-collection-gallery-header [is-gallery-lobby]="::$ctrl.isGalleryLobby" [current-collection]="::$ctrl.currentCollection" [current-collection-record]="::$ctrl.currentCollectionRecord" [path]="::$ctrl.path" [institution]="::$ctrl.institution"></prm-collection-gallery-header><prm-collection-gallery ng-if="::$ctrl.currentCollection" [is-gallery-lobby]="::$ctrl.isGalleryLobby" [current-collection]="::$ctrl.currentCollection" [path]="::$ctrl.path"></prm-collection-gallery><prm-collection-discovery-after parent-ctrl="$ctrl"></prm-collection-discovery-after>');
$templateCache.put('components/favorites/favorites.html','<prm-favorites-tool-bar layout="column"></prm-favorites-tool-bar><div layout="row" role="application"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-tabs flex md-selected="$ctrl.selectedTabIndex" md-dynamic-height md-border-bottom class="default-tabs"><md-tab id="tab1" md-on-select="$ctrl.onSavedItemsSelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.overview\'});"><md-tab-label><span translate="nui.favorites.records.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><div flex><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true"></prm-search-result-list></div><div class="sidebar" flex-md="25" flex-lg="20" flex-xl="20" layout="column" id="favoritesLabels" role="contentinfo" ng-show="$ctrl.mediaQueries.gtsm || $ctrl.showMobileFacets"><div class="sidebar-section margin-bottom-small margin-left-medium compensate-padding-left" layout="row" ng-if="$ctrl.getItems().length > 1"><div layout="row" layout-align="start center" class="section-title"><h3 class="section-title-header"><span translate="nui.favorites.sortby" translate-attr-title="nui.favorites.sortby.tooltip"></span></h3><md-input-container class="static-select empty-select-on-init" layout="row" ng-if="!$ctrl.sortInProgress"><md-select ng-model="$ctrl.favoritesService.sortBy" ng-change="$ctrl.favoritesService.sortAllFavFromDropdown()" aria-label="{{\'nui.aria.favorites.sortByFavorites\' | translate}}"><md-option ng-repeat="sort in $ctrl.favoritesService.sortOptions" value="{{sort}}"><span translate="nui.favorites.sort.{{sort}}"></span></md-option></md-select></md-input-container></div></div><prm-favorites-labels ng-if="$ctrl.getItems().length > 0" class="layout-full-width"></prm-favorites-labels></div></md-content><md-toolbar ng-if="$ctrl.showMobileFacets" class="default-toolbar bottom-fixed-toolbar" hide-gt-sm><div class="md-toolbar-tools" layout="row" layout-align="center "><md-button id="sidebar-trigger" class="button-with-icon layout-full-height" aria-label="{{::(\'nui.facets.title\' | translate)}}" (click)="$ctrl.showMobileFacets = !$ctrl.showMobileFacets"><prm-icon ng-if="$ctrl.showMobileFacets" icon-type="svg" svg-icon-set="primo-ui" icon-definition="filterOut"></prm-icon><prm-icon ng-if="!$ctrl.showMobileFacets" icon-type="svg" svg-icon-set="primo-ui" icon-definition="filter"></prm-icon><span ng-if="!$ctrl.showMobileFacets" translate="nui.favorites.labels.header"></span> <span ng-if="$ctrl.showMobileFacets" translate="nui.facets.close"></span></md-button></div></md-toolbar></md-tab-body></md-tab><md-tab ng-if="$ctrl.isSignedIn() && $ctrl.requiredTabsList.indexOf(\'loans\') !== -1" md-on-select="$ctrl.onSavedQueriesSelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'});" id="tab2"><md-tab-label><span translate="nui.favorites.search.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><prm-saved-queries flex></prm-saved-queries></md-content></md-tab-body></md-tab><md-tab ng-if="($ctrl.requiredTabsList.indexOf(\'loans\') !== -1) && ($ctrl.showSearchHistoryTab())" md-on-select="$ctrl.onSearchHistorySelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'});" id="tab2"><md-tab-label><span translate="nui.favorites.history.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><prm-search-history flex></prm-search-history></md-content></md-tab-body></md-tab></md-tabs><div flex="0" flex-md="0" flex-lg="5" flex-xl="10" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-favorites-after parent-ctrl="$ctrl"></prm-favorites-after>');
$templateCache.put('components/icon/icon.html','<md-icon ng-if="::(!$ctrl.isCustom && !$ctrl.isEmailMode())" md-svg-icon="{{::$ctrl.svgIconSet}}:{{::$ctrl.iconDefinition}}" alt=""></md-icon><md-icon ng-if="::($ctrl.isCustom && !$ctrl.isEmailMode())" md-svg-icon="custom-ui:{{::$ctrl.iconDefinition}}" alt=""></md-icon><prm-icon-after parent-ctrl="$ctrl"></prm-icon-after>');
$templateCache.put('components/newspapers/back-to-library-search.html','<md-toolbar class="default-toolbar zero-padding" sticky sticky-class="is-stuck" disabled-sticky="true"><div class="md-toolbar-tools zero-padding" layout="row"><div flex="0" flex-md="0" flex-lg="10" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20"></div><md-button class="back-button has-text" ng-click="$ctrl.backToSearch()" aria-label="{{\'nui.backTo.librarySearch\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="nui.newspapers.back"></span></md-button></div></md-toolbar><prm-back-to-library-search-after parent-ctrl="$ctrl"></prm-back-to-library-search-after>');
$templateCache.put('components/newspapers/newspapers-home.html','<md-content ng-if="$ctrl.firstTimeInLandingPage" class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div layout="column" layout-sm="column" layout-xs="column" flex layout-align="center start"><div class="padding-large"><h2 translate="nui.newspapers_search.title"></h2><p ng-if="!$ctrl.displayFeaturedNewspapers()" translate="nui.newspapers_search.desc_nofeatured"></p><p ng-if="$ctrl.displayFeaturedNewspapers()" translate="nui.newspapers_search.desc_withfeatured"></p></div><div ng-if="$ctrl.displayFeaturedNewspapers()" class="padding-large layout-full-width"><div class="margin-bottom-large" layout="row" layout-align="start end"><h2 class="margin-bottom-zero margin-right-medium" translate="nui.newspapers_search.featured.title"></h2></div><div layout="row" layout-wrap class="newspapers-card-container"><md-card ng-repeat="feature in $ctrl.featuredNewspapers" class="default-card" flex="auto"><md-button ng-click="$ctrl.goToFeaturedNewspaper($index)"><h3>{{ \'nui.newspapers_search.featured.\'+feature.name | translate }}</h3><p ng-if="feature.description">{{ \'nui.newspapers_search.featured.\'+feature.description | translate}}</p></md-button></md-card></div></div></div><div flex="0" flex-md="20" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></md-content><prm-search ng-if="!$ctrl.firstTimeInLandingPage"></prm-search><prm-newspapers-home-after parent-ctrl="$ctrl"></prm-newspapers-home-after>');
$templateCache.put('components/journals/atoz-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20" ng-class="{\'flex-lgPlus-15\' : $ctrl.mediaQueries.lgPlus}"></div><div layout="column" flex flex-sm="85" flex-md="75" flex-lg="{{$ctrl.isSuprima() ? \'55\' : \'60\'}}" flex-xl="{{$ctrl.isSuprima() ? \'50\' : \'60\'}}"><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.onSubmit()" class="layout-full-width"><input type="submit" class="accessible-only"/><div class="classic-input simple-search-wrapper" layout="row" layout-fill tabindex="-1"><div class="search-scope journal-search-tile" layout="column" layout-align="center start"><span translate="{{::$ctrl.title}}"></span></div><md-autocomplete flex md-no-float id="autoComplete" md-input-id="searchBarJournal" md-search-text="$ctrl.mainSearchField" md-selected-item-change="$ctrl.onSubmit()" md-items="item in $ctrl.getAutoCompleteItems()" md-item-text="item.display" md-min-length="0" placeholder="{{$ctrl.placeHolderText}}"><md-item-template><span ng-bind="item.display"></span></md-item-template></md-autocomplete><md-button class="submit-button button-confirm" aria-label="{{\'nui.aria.submitSearch\' | translate}}" (click)="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></form></div><div ng-if="$ctrl.enableAtoZView()" tabindex="-1" layout="row"><prm-alphabet-toolbar flex (selected-letter)="$ctrl.onSubmit($event)" [cur-active-letter]="$ctrl.selectedLetter"></prm-alphabet-toolbar></div><div layout="row" ng-if="$ctrl.showSignIn"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20"></div><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><div class="padding-left-medium" flex="0" flex-md="25" flex-lg="10" flex-xl="15" hide-xs></div><div flex="0" flex-md="0" flex-sm="10" flex-lg="20" flex-xl="20"></div></div></div></div><prm-atoz-search-bar-after parent-ctrl="$ctrl"></prm-atoz-search-bar-after>');
$templateCache.put('components/journals/databases-full-view.html','<prm-full-view-page></prm-full-view-page><prm-databases-full-view-after parent-ctrl="$ctrl"></prm-databases-full-view-after>');
$templateCache.put('components/journals/databases.html','<prm-search></prm-search><prm-databases-after parent-ctrl="$ctrl"></prm-databases-after>');
$templateCache.put('components/journals/journals-full-view.html','<prm-full-view-page></prm-full-view-page><prm-journals-full-view-after parent-ctrl="$ctrl"></prm-journals-full-view-after>');
$templateCache.put('components/journals/journals-search.html','<prm-search></prm-search><prm-journals-after parent-ctrl="$ctrl"></prm-journals-after>');
$templateCache.put('components/journals/search-within-journal.html','<p class="margin-bottom-large" translate="nui.journalsearch.searchwithin.desc"></p><div class="classic-input" layout="row"><form layout="row" flex ng-submit="$ctrl.onSubmit()"><md-input-container flex><label translate="nui.journalsearch.searchwithin.help"></label> <input ng-model="$ctrl.searchInput" autocomplete="off"></md-input-container><md-button class="submit-button button-confirm" aria-label="Search" ng-click="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></form></div><prm-search-within-journal-after parent-ctrl="$ctrl"></prm-search-within-journal-after>');
$templateCache.put('components/infra/highlight.html','<span ng-if="::$ctrl.isEmailMode()" ng-bind-html="$ctrl.text" dir="auto"></span> <span ng-if="::(!$ctrl.isEmailMode())" ng-bind-html="$ctrl.highlightedText" dir="auto"></span><span ng-if="::$ctrl.combineStringLastChar($ctrl.highlightedText)">&#8207</span>');
$templateCache.put('components/primoExplore/login-iframe.html','<iframe style="display:none !important;" id="login-iframe" ng-src="{{$ctrl.getUrl()}}" ng-if="::$ctrl.isSilentIframeEnabled()"/><prm-login-iframe-after parent-ctrl="$ctrl"></prm-login-iframe-after>');
$templateCache.put('components/primoExplore/ng-forward-hack.html','<ng-forward-hack-after parent-ctrl="$ctrl"></ng-forward-hack-after>');
$templateCache.put('components/primoExplore/primo-explore-footer.html','<prm-icp-license-footer ng-if="$ctrl.showICPLicenseFooter"></prm-icp-license-footer><prm-explore-footer-after parent-ctrl="$ctrl"></prm-explore-footer-after>');
$templateCache.put('components/primoExplore/primo-explore-main.html','<prm-performance-monitor ng-if="$ctrl.showPerformanceMonitor"></prm-performance-monitor><div layout="column" class="header topbar-wrapper relative-position" ng-show="::$ctrl.allowSearch()"><prm-topbar ng-class="{\'transparent-top-bar\': $ctrl.isCollectionDiscoveryFocused}"></prm-topbar><h1 class="accessible-only" ng-if="!$ctrl.isCollectionDiscovery() && !$ctrl.isCitationLinker() && !$ctrl.isCitationTrails() && !$ctrl.isFavorites()">{{($ctrl.showStatName() | translate)}}</h1><prm-search-bar ng-if="$ctrl.showSearchBar() && !$ctrl.isAtozSearch && !$ctrl.showBroseSearchBar && !$ctrl.isNewspapersSearch && !$ctrl.showChaptersAndReviews" has-search-results="{{$ctrl.hasSearchResults()}}" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-search-bar><prm-atoz-search-bar ng-if="$ctrl.isAtozSearch && $ctrl.showSearchBar()" (search-event)="$ctrl.onSearchBarSearchEvent($event)" class="animate-search-bar"></prm-atoz-search-bar><prm-newspapers-search-bar ng-if="$ctrl.isNewspapersSearch" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-newspapers-search-bar><prm-browse-search-bar ng-if="$ctrl.showBroseSearchBar"></prm-browse-search-bar><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text" layout="row" layout-align="center center"></prm-spinner></div><prm-back-to-search-results-button ng-if="$ctrl.isBrowseMode"></prm-back-to-search-results-button><prm-back-to-library-search ng-if="$ctrl.isNewspapersSearch && $ctrl.cameFromSearch"></prm-back-to-library-search><prm-search-result-title ng-if="$ctrl.isNewspapersSearch && $ctrl.cameFromFeaturedSearch"></prm-search-result-title><ui-view ng-show="::$ctrl.allowSearch()"></ui-view><ng-forward-hack></ng-forward-hack><prm-explore-main-after parent-ctrl="$ctrl"></prm-explore-main-after>');
$templateCache.put('components/purchaseRequest/purchase_request.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.purchaseRequest"></h1></div><prm-spinner ng-if="$ctrl.getRequestIsLoading()" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-tabs md-dynamic-height md-dynamic- md-selected="$ctrl.selectedTab" ng-show="!$ctrl.getRequestIsLoading()" class="tabs-as-app hidden-tabs"><md-tab></md-tab><md-tab></md-tab><md-tab label="Request Form"><md-content><prm-request blank-service="AlmaPurchaseRequest" (change-tab-event)="$ctrl.onChangeTabEvent($event)" layout="column"></prm-request></md-content></md-tab><md-tab label="copyrights"><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply"><md-content><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span translate-default="{{$ctrl.getResponseMessage()}}" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content></md-tab><md-tab label="Request approval"><md-content layout="column"><prm-request-approval (change-tab-event)="$ctrl.onChangeTabEvent($event)" [status-message]="::$ctrl.opacService.responseStatus.msg" [header]="\'almaPurchaseRequest.isbnExist\'" [message]="\'almaPurchaseRequest.submit\'" [approve-request]="\'almaPurchaseRequest.approveRequest.yes\'" [cancel-request]="\'almaPurchaseRequest.approveRequest.no\'"></prm-request-approval></md-content></md-tab></md-tabs><div ng-if="$ctrl.displayErrorMessage && !$ctrl.getRequestIsLoading()" class="margin-bottom-medium zero-padding-bottom ng-scope" layout="row" layout-align="center center"><div flex-gt-lg="15" flex="0"></div><md-card class="default-card"><md-card-content><h2 class="light-text" translate="nui.search.error.blankill.header"></h2><p><span class="display-block" translate="nui.search.error.blankill.description1"></span> <span class="display-block" translate="nui.search.error.blankill.description2"></span></p></md-card-content></md-card><div flex-gt-lg="15" flex="0" class="flex-gt-lg-15 flex-0"></div></div><prm-blank-purchase-request-after parent-ctrl="$ctrl"></prm-blank-purchase-request-after>');
$templateCache.put('components/servicesPage/services-page.html','<h1 class="accessible-only" translate="nui.aria.page.services"></h1><prm-full-view-cont [item]="$ctrl.item"></prm-full-view-cont><prm-services-page-after parent-ctrl="$ctrl"></prm-services-page-after>');
$templateCache.put('components/search/search.html','<prm-alert-bar ng-if="!$ctrl.isLoggedInIDP() && !$ctrl.isShowPartsOnCitationTrails() && !$ctrl.isChaptersAndReviewsState()" flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><prm-alert-bar ng-if="!$ctrl.searchInProgress && $ctrl.containsBrowseGap()" flex [alert-object]="$ctrl.browseGapAlert"></prm-alert-bar><prm-alert-bar ng-if="$ctrl.isFromRedirectFilter()" flex [alert-object]="$ctrl.afterRedirectAlert"></prm-alert-bar><prm-back-to-library-search-button></prm-back-to-library-search-button><md-content class="main" ng-if="!$ctrl.isSearchDone() && !$ctrl.isAtozSearch && !$ctrl.isOrgListSearch()" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-25\': $ctrl.facetToLeft}"></div><prm-static section="homepage" flex class="md-padding"></prm-static><div flex="0" flex-md="10" flex-lg="25" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-30\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}"></div></md-content><md-content layout="row" layout-align="center start" flex ng-if="$ctrl.displayDialog()"><div flex="0" flex-sm="0" flex-lg="15" flex-xl="20" ng-class="{\'facet-to-left-spacer\': $ctrl.facetToLeft&&!$ctrl.mediaQueries.xl && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs, \'flex-xl-25\': $ctrl.facetToLeft}"></div><prm-personalization-dialog tabindex="0" id="personalizationDialog" flex (keydown)="$ctrl.keydownSupport($event)"></prm-personalization-dialog><div flex="0" flex-sm="0" flex-md="0" flex-lg="30" flex-xl="30" ng-class="{\'flex-lg-25 flex-lgPlus-25\': $ctrl.facetToLeft && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs}"></div></md-content><div style="width: 340px; min-width: 315px" class="databases-categories" tabindex="0" ng-if="($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)\n) &&  $ctrl.isCategories && ($ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm)" ng-class="{\'as-a-drawer\': $ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm, \'is-visible\': $ctrl.isMobileDBSlider}"><prm-databases-categorize style="display: block" tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (search-event)="$ctrl.onSearchBarSearchEvent($event)" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)" [categories-type]="::$ctrl.getCategoriesType()"></prm-databases-categorize></div><div ng-if="($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)\n) &&  $ctrl.isCategories && ($ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm)"><md-toolbar class="default-toolbar" layout="row"><div class="md-toolbar-tools" layout="row"><md-button ng-click="$ctrl.openMobileDBSlider()" aria-label="{{\'nui.aria.dbcategories.mobileCategories\' | translate}}" class="button-with-icon zero-margin"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="file-tree"></prm-icon><span translate="nui.dbcategories.mobileCategories"></span></md-button></div></md-toolbar></div><div layout="row" role="application"><md-content class="main" style="overflow-y: hidden; display: block" layout="row" ng-if="(($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && !$ctrl.isSearchFromBarDBorJournals()) || ($ctrl.isOrgListSearch() && !$ctrl.isSearchFromOrgListCategory())" flex-md="25" flex-lg="20" flex-xl="20" ng-class="{\'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus, \'padded-container\': $ctrl.mediaQueries.gtxs, \'facet-to-left\': $ctrl.facetToLeft}"><div ng-if="!$ctrl.facetToLeft" flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-order-3\': (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchFromBarDBorJournals())}"></div><div tabindex="-1" ng-if="$ctrl.displayDBCategories" id="dBcategorize" role="complementary" class="sidebar" flex-md="25" flex-lg="25" flex-xl="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft,  \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}" ng-show="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-databases-categorize style="display: block" tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (search-event)="$ctrl.onSearchBarSearchEvent($event)" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)" [categories-type]="::$ctrl.getCategoriesType()"></prm-databases-categorize></div><div tabindex="-1" ng-if="$ctrl.isOrgListSearch() && $ctrl.haveOrgListCategories && !$ctrl.isSearchFromOrgListCategory()" id="orgListcategorize" role="complementary" class="sidebar" flex-md="25" flex-lg="25" flex-xl="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft,  \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}" ng-show="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-orglist-categorize style="display: block" tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (search-event)="$ctrl.onSearchBarSearchEvent($event)" (set-have-org-list-categories)="$ctrl.setHaveOrgListCategories($event)" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)"></prm-orglist-categorize></div></md-content><md-content class="main" ng-if="($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && !$ctrl.isSearchDone()" flex><div class="padding-medium" flex-md="50" flex-lg="50" flex-xl="50" ng-class="{\'flex-lgPlus-70\': $ctrl.mediaQueries.lgPlus}"><md-card class="default-card"><md-card-title><h2 translate="{{$ctrl.getCategoriesCode(\'databases\')}}"></h2></md-card-title><md-card-content><span translate="{{$ctrl.getCategoriesCode(\'description\')}}"></span><ul><li translate="{{$ctrl.getCategoriesCode(\'option1\')}}"></li><li translate="{{$ctrl.getCategoriesCode(\'option2\')}}" ng-if="!$ctrl.isPrimoVE"></li><li translate="{{$ctrl.getCategoriesCode(\'option3\')}}"></li></ul></md-card-content></md-card></div></md-content><md-content class="main" ng-if="$ctrl.isOrgListSearch() && !$ctrl.isSearchDone()" flex><div class="padding-medium" flex-md="50" flex-lg="50" flex-xl="50" ng-class="{\'flex-lgPlus-70\': $ctrl.mediaQueries.lgPlus}"><md-card class="default-card"><md-card-title><h2 translate="orglist.searchtitle"></h2></md-card-title><md-card-content><span translate="orglist.description"></span><ul><li translate="orglist.option1"></li><li translate="orglist.option2"></li><li translate="orglist.option3"></li></ul></md-card-content></md-card></div></md-content><md-content class="main" ng-if="$ctrl.isSearchDone()" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs, \'facet-to-left\': $ctrl.facetToLeft}"><div ng-if="!$ctrl.facetToLeft" flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft,\n                \'flex-order-3\': (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchFromBarDBorJournals()),\n                \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft && ($ctrl.isSearchFromCategoryTree() || $ctrl.isOrgListSearch()),\n                \'flex-order-1\': !$ctrl.facetToLeft && ((($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchFromCategoryTree()) || $ctrl.isOrgListSearch()),\n                \'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft && $ctrl.isSearchFromBarDBorJournals() && !$ctrl.isJournalSearch()}"></div><div flex ng-class="{\'flex-order-2\': $ctrl.facetToLeft || (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchFromBarDBorJournals()) || $ctrl.isOrgListSearch()}"><div ng-if="::$ctrl.isRapido()"><prm-ngrs-results-button ng-if="$ctrl.hasSearchResults() || ($ctrl.searchInfo && $ctrl.searchInfo.total == 0)" class="ngrs-btn"></prm-ngrs-results-button></div><prm-resource-recommender [query]="$ctrl.parseSearchTerm($ctrl.searchService.getSearchObject().query)" (resource-recommender-event)="$ctrl.setShowResourceRecommender($event)" ng-if="::$ctrl.isRecommendationsEnabled() && !$ctrl.isCitationState()" ng-show="$ctrl.showResourceRecommender"></prm-resource-recommender><div class="list-item-wrapper margin-top-small margin-bottom-medium default-shadow" layout="column" ng-if="$ctrl.refEntryActive() &&  $ctrl.showPcAvailabilityForScopeWithNFT(scope) && !$ctrl.hasFacets() && $ctrl.isReferenceEntry" ng-show="$ctrl.hasSearchResults()"><prm-reference-entry-item [term]="$ctrl.parseSearchTerm($ctrl.searchService.getSearchObject().query)" (item-not-exist)="$ctrl.hideReferenceEntryItem($event)"></prm-reference-entry-item></div><prm-search-result-list role="list" flex ng-if="$ctrl.isSearchDone()" [itemlist]="$ctrl.searchResults" [featured-result]="$ctrl.featuredResult" [is-favorites]="::(false)" [links]="$ctrl.skipLinks" [query]="$ctrl.parseSearchTerm($ctrl.searchService.getSearchObject().query)" [facet-to-left]="$ctrl.facetToLeft" [categories-type]="::$ctrl.getCategoriesType()" tabindex="-1"></prm-search-result-list></div><div tabindex="-1" id="facets" ng-if="!($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) || (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories))&& $ctrl.isSearchFromBarDBorJournals())" role="complementary" class="sidebar" flex-md="25" flex-lg="20" flex-xl="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft || (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchFromBarDBorJournals()) || $ctrl.isOrgListSearch(), \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}" ng-show="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-facet tabindex="-1" ng-if="!$ctrl.isShowPartsOnCitationTrails()  && !$ctrl.isChaptersAndReviewsState()  && $ctrl.showTimer" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)" [categories-type]="::$ctrl.getCategoriesType()"></prm-facet></div><div flex="0" flex-md="0" flex-lg="0" flex-xl="10" ng-style="($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) &&\n             $ctrl.isSearchFromBarDBorJournals() && !$ctrl.facetToLeft && {\'display\':\'none\'}" ng-class="{\'flex-order-4\': $ctrl.facetToLeft, \'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus, \'flex-lg-15 flex-xl-25\': $ctrl.facetToLeft, \'flex-lg-5\': !$ctrl.facetToLeft, \'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus && $ctrl.isSearchFromCategoryTree() && $ctrl.facetToLeft}"></div></md-content></div><prm-view-overlay ng-class="{\'visible\': viewOverlayVisible}" layout="row"><div class="prm-view-overlay-close-button" layout="column" layout-align="center center" ng-if="viewOverlayVisible" flex><md-button class="button-large" ng-click="viewOverlayVisible = false">Close</md-button></div><div class="prm-view-overlay-inner" ng-if="viewOverlayVisible"></div><div class="prm-view-overlay-backdrop" ng-if="viewOverlayVisible"></div></prm-view-overlay><prm-search-after parent-ctrl="$ctrl"></prm-search-after>');
$templateCache.put('components/security/username-password-login.html','<md-input-container><label>User Name</label> <input type="text" ng-model="$ctrl.username"></md-input-container><md-input-container><label>Password</label> <input type="password" ng-model="$ctrl.password"></md-input-container><md-button class="md-raised" (click)="$ctrl.login()">Submit</md-button><prm-username-password-login-after parent-ctrl="$ctrl"></prm-username-password-login-after>');
$templateCache.put('components/sfx/getit1.html','<ion-modal-view class="EXLArticlPreviewContent"><ion-header-bar><h1 class="title">{{sfxCtrl.modalHeader}}</h1></ion-header-bar><ion-content class="EXLGetIt1Content" direction="xy"><iframe ng-src="{{sfxCtrl.targetLink | trustUrl}}" class="EXLGetIt1Iframe" ng-if="sfxCtrl.targetLink"/></ion-content></ion-modal-view>');
$templateCache.put('components/sfx/sfx-menu.html','<md-content ng-repeat="(service, targets) in sfxCtrl.getSfxResults().services"><md-toolbar class="item-stable" (click)="sfxCtrl.toggleService(service)" ng-class="{active: sfxCtrl.isServiceShown(service)}"><i class="icon" ng-class="sfxCtrl.isServiceShown(service) ? \'ion-minus\' : \'ion-plus\'"></i> &nbsp; {{service}}</md-toolbar><md-list><div><md-item class="item-accordion item-icon-right" ng-repeat="target in targets" ng-show="sfxCtrl.isServiceShown(service)"><md-item-content>{{target.target_public_name}} <i class="icon ion-arrow-right-c" (click)="sfxCtrl.openTargetLink(target)" ng-if="target.target_url"></i></md-item-content></md-item></div></md-list></md-content>');
$templateCache.put('components/spinner/spinner.html','<div class="spinner-wrapper" layout="row" layout-align="space-between" ng-init="loadingText = \'\'"><div class="loader"><div class="diamond"></div><div class="diamond"></div><div class="diamond"></div></div><div ng-if="loadingText" class="loader-text">{{loadingText}}</div></div>');
$templateCache.put('components/sourceRecord/source-record.html','<h1 class="accessible-only" translate="nui.aria.page.sourceRecord"></h1><pre>{{$ctrl.sourceRecord}}</pre><prm-source-record-after parent-ctrl="$ctrl"></prm-source-record-after>');
$templateCache.put('components/tabs/details_pane.html','<md-card><img src="{{listCtrl.selectedItem[\'thumbnail\']}}" class="md-card-image"><h3><span ng-bind-html="listCtrl.selectedItem[\'title\']"></span> <span ng-hide="!listCtrl.selectedItem[\'date\']">[<span ng-bind-html="listCtrl.selectedItem[\'date\']"></span>]</span></h3><span ng-hide="!listCtrl.selectedItem[\'creator\']"><h4><span ng-bind-html="listCtrl.selectedItem[\'creator\']"></span></h4></span><div layout="row"><md-card class="md-whiteframe-z5 EXLExploreDetailsCard EXLExploreDetailsRecordCard" flex="33"><md-card-content><md-item><md-item-content><div class="md-tile-content"><span ng-hide="!listCtrl.selectedItem[\'description\']"><p><span ng-bind-html="listCtrl.selectedItem[\'description\']"></span></p></span><span ng-hide="!listCtrl.selectedItem[\'isPartOf\']"><p><span ng-bind-html="listCtrl.selectedItem[\'isPartOf\']"></span></p></span><span ng-hide="!listCtrl.selectedItem[field]"><p ng-repeat="field in [\'publisher\',\'lccn\',\'isbn\']"><span><span class="EXLExploreDetailsLabel">{{field}}:</span> <span ng-bind-html="listCtrl.selectedItem[field]"></span></span></p></span></div></md-item-content></md-item></md-card-content></md-card><md-card flex="33"><facets-list-display element-type="[\'source\']" element-label="[\'Sources\']" elements-array="listCtrl.selectedItem[\'source\']"></facets-list-display><facets-list-display element-type="[\'subject\']" element-label="[\'Subjects\']" elements-array="listCtrl.selectedItem[\'subject\']"></facets-list-display></md-card></div></md-card>');
$templateCache.put('components/tabs/images_pane.html','<md-toolbar class="md-tall EXLExploreImagesBar" ng-show="listCtrl.imagesBarFillersList"><div class="EXLExploreImagesBarImageContainer" layout="row"><div flex="20"></div><div flex="60"><div class="EXLExploreImagesBarBigCol"><div class="EXLExploreImagesBarBigImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[0].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[0].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarSmallCol"><div class="EXLExploreImagesBarSmallImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[1].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[1].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[2].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[2].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarMediumCol EXLExploreImagesBarMediumImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[4].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[4].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[5].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[5].link}}" alt=""/></a></div><div class="EXLExploreImagesBarBigCol"><div class="EXLExploreImagesBarBigImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[6].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[6].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarMediumCol EXLExploreImagesBarMediumImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[7].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[7].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[8].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[8].link}}" alt=""/></a></div></div><div flex="20"></div></div></md-toolbar>');
$templateCache.put('components/tabs/locations_pane.html','<ils-items></ils-items><div ng-controller="GoogleMapsController as googleMapsCtrl"><ui-gmap-google-map center="googleMapsCtrl.center" zoom="googleMapsCtrl.zoom"><ui-gmap-marker ng-repeat="location in searchCtrl.selectedItem.locations" idKey="location.libraryCode" coords="googleMapsCtrl.getLocationByLibraryCode(location.libraryCode)"></ui-gmap-marker></ui-gmap-google-map></div>');
$templateCache.put('components/tags/tags.html','<div layout="column" class="header topbar-wrapper relative-position"><prm-topbar></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.tags"></h1><prm-tags-search-bar></prm-tags-search-bar><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div></div><ui-view></ui-view><prm-tags-results ng-if="$ctrl.isInSearch()"></prm-tags-results><md-content id="tags" ng-if="!$ctrl.isInSearch()" class="padded-container" layout="row" layout-align="center start" flex><h2 class="accessible-only" translate="results.title"></h2><div flex="0" flex-md="10" flex-lg="20" flex-xl="25"></div><div layout-sm="column" layout-xs="column" layout-gt-sm="row" flex layout-align="center start"><md-card class="default-card" flex tabindex="0"><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mostpopular"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.popularTags" [editable]="false" sortBy="count"></prm-tags-list></md-card-content></md-card><md-card class="default-card" flex><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mostrecent"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.recentTags" [editable]="false"></prm-tags-list></md-card-content></md-card><md-card class="default-card" ng-if="$ctrl.userLoggedIn()" flex><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mytags"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.myTags" [editable]="false"></prm-tags-list></md-card-content></md-card></div><div flex="0" flex-md="10" flex-lg="20" flex-xl="25"></div></md-content><prm-tags-after parent-ctrl="$ctrl"></prm-tags-after>');
$templateCache.put('components/account/accountLinks/account-links.html','<a ng-repeat="link in $ctrl.links" href="{{$ctrl.getTarget(link)}}" target="_blank" class="bold-text margin-left-small"><span translate="{{link.source2}}"></span><prm-icon icon-type="{{$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.externalLinkIcon.icon}}"></prm-icon></a><prm-account-links-after parent-ctrl="$ctrl"></prm-account-links-after>');
$templateCache.put('components/account/deposits/deposit-confirm-dialog.html','<md-dialog class="in-element-dialog" layout="column"><form layout="row" layout-align="end center" layout-fill><md-dialog-content><div class="md-dialog-content bold-text" layout-align="center"><span translate="nui.deposit.confirm.message"></span></div></md-dialog-content><div class="md-actions" layout="row"><md-button ng-click="ctrl.hide()"><span translate="nui.deposit.confirm.no"></span></md-button><md-button class="dialog-primary button-confirm" ng-click="ctrl.cancelIt(); ctrl.hide();"><span translate="nui.deposit.confirm.ok"></span></md-button></div></form></md-dialog>');
$templateCache.put('components/account/deposits/deposits.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.deposits.header"></span></h2></div><div class="header-subtitle"><span class="items-count"><em ng-if="$ctrl.depositsCounter" translate="nui.deposits.counter" translate-values="$ctrl.getDepositsCountPlaceHolder()"></em><prm-account-links tab-name="deposits"></prm-account-links></span></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center"><div layout="row" layout-align="start center" ng-if="$ctrl.depositsCounter"><md-input-container class="static-select" layout="row" style="padding-bottom: 8px;"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.sortDepositsDisplay()"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.depositsCounter"></md-divider><div layout="row" layout-align="start center" ng-show="$ctrl.showCreateDeposit()"><md-menu><md-button ng-click="$ctrl.openMenu($mdOpenMenu, $event)"><span translate="nui.deposits.createDeposit"></span></md-button><md-menu-content width="3" layout="column"><md-menu-item ng-repeat="profileOption in $ctrl.depositProfilesOptions"><md-button ng-click="$ctrl.showDepositForm(\'\', $index)"><span md-menu-align-target>{{profileOption.depositProfileName}}</span></md-button></md-menu-item></md-menu-content></md-menu></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.depositsCounter"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all deposit items button" ng-if="$ctrl.depositsCounter"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}"></prm-icon></span></md-button></div></div><div class="bar success-bar" layout-margin layout="row" ng-if="$ctrl.depositInProcess" layout-align="start center"><span translate="nui.deposits.submittedDepositInProcess" class="zero-margin"></span></div><div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch" ng-if="!$ctrl.depositsCounter || $ctrl.depositsCounter === \'0\'"><div layout="column"><div ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.nodeposits"></span></div></div></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="depositDisplay in $ctrl.depositsDisplay | limitTo:200" ng-hide="actionSuccessful" ng-class="depositDisplay.isExpanded?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><span class="item-index">{{$index + 1}}</span><div flex flex-xs="100"><a ng-if="::(depositDisplay.firstLineLeft && depositDisplay.deliveryUrl)" class="arrow-link" href="{{::depositDisplay.deliveryUrl}}" target="_blank"><h3>{{::depositDisplay.firstLineLeft}}<prm-icon ng-if="::(depositDisplay.firstLineLeft && depositDisplay.deliveryUrl)" external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new" class="deposit-external-link"></prm-icon></h3></a><h3 ng-if="::(depositDisplay.firstLineLeft && !depositDisplay.deliveryUrl)">{{::depositDisplay.firstLineLeft}}</h3><h4 ng-if="::depositDisplay.secondLineLeft">{{::depositDisplay.secondLineLeft}}</h4></div><div flex flex-xs="100" class="weak-text"><p class="bold-text" ng-if="::depositDisplay.firstLineRight" ng-style="::(deposit.new && {\'color\':\'#5cb85c\'})"><prm-icon ng-if="::depositDisplay.isAlert" style="color: #5cb85c;" icon-type="{{::$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.depositsAlertIcon.icon}}"></prm-icon><span>{{depositDisplay.firstLineRight}}</span></p><p ng-if="::depositDisplay.secondLineRight"><span translate="nui.deposits.updatedOn"></span> <span>{{::depositDisplay.secondLineRight}}</span></p></div><div layout-align="end center" layout="row" layout-wrap flex-xs="400" flex-sm="80" flex class="list-item-actions"><md-button ng-if="{\'rotate-180\':depositDisplay.isExpanded}" class="button-with-icon button-link" ng-hide="depositDisplay.isSubmitted" (click)="$ctrl.showDepositForm($index, -1)" aria-label="cancel deposit button"><prm-icon icon-type="{{::$ctrl.accountIcons.editIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.editIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.editIcon.icon}}"></prm-icon><span translate="nui.deposits.edit"></span></md-button><div class="skewed-divider" ng-hide="depositDisplay.isSubmitted"></div><md-button ng-if="{\'rotate-180\':depositDisplay.isExpanded}" class="button-link" ng-hide="depositDisplay.isSubmitted" (click)="$ctrl.showCancelPrompt($event,depositDisplay.depositId)" aria-label="cancel deposit button"><prm-icon icon-type="{{::$ctrl.accountIcons.removeIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.removeIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.removeIcon.icon}}"></prm-icon><span translate="nui.deposits.withdraw"></span></md-button><div class="item-respond" ng-if="$ctrl.failedDepositId === depositDisplay.depositId"><span class="error-response">{{$ctrl.failedDepositMessage}}</span></div></div></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{::(\'nui.aria.account.deposits.expandcollapse\' | translate)}}" (click)="depositDisplay.isExpanded = !depositDisplay.isExpanded"><prm-icon ng-class="{\'rotate-180\':depositDisplay.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button></div></div></md-list-item></md-list><prm-deposits-after parent-ctrl="$ctrl"></prm-deposits-after>');
$templateCache.put('components/account/depositsLink/deposits-link.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar [links]="$ctrl.skipLinks"></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.deposit"></h1></div><div layout="row" ng-class="{\'deposits-margin\' : !$ctrl.depositsCounter}"><div flex="0" flex-gt-md="25"></div><prm-deposits [deposits-counter]="$ctrl.depositsCounter" flex></prm-deposits><div flex="0" flex-gt-md="25"></div></div><prm-deposits-link-after parent-ctrl="$ctrl"></prm-deposits-link-after>');
$templateCache.put('components/account/fines/fines.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.fines.header"></span></h2></div><div class="header-subtitle"><span ng-if="$ctrl.finesBalance" class="items-count"><em translate="nui.fines.balance" translate-values="$ctrl.getFinesBalancePlaceHolder()"></em> </span><span ng-if="$ctrl.demeritsBalance" class="items-count"><em translate="nui.fines.demerits" translate-values="$ctrl.getDemeritsBalancePlaceHolder()"></em></span><md-button ng-if="$ctrl.payFinesLink" class="button-as-link button-external-link inline-button" ng-href="{{::$ctrl.payFinesLink}}" target="_blank"><span translate="fines.payfinelink"></span><prm-icon icon-type="{{::$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.externalLinkIcon.icon}}"></prm-icon></md-button><prm-account-links tab-name="fines"></prm-account-links></div><div ng-if="!$ctrl.finesDisplay.length || $ctrl.finesDisplay.length === \'0\'" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.emoticonCool.type}}" svg-icon-set="{{$ctrl.accountIcons.emoticonCool.iconSet}}" icon-definition="{{$ctrl.accountIcons.emoticonCool.icon}}"></prm-icon><div><span translate="nui.overview.nofines"></span></div></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.finesDisplay.length"><div layout="row" layout-align="start center"><md-input-container class="static-select" layout="row"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select id="fines-focus" ng-model="$ctrl.sortBy" ng-change="$ctrl.sortFinesDisplay()" aria-label="{{::(\'nui.librarycard.sortby\' | translate)}}"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all request items button"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}"></prm-icon></span></md-button></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="fine in $ctrl.finesDisplay| limitTo:200" ng-class="fine.isExpanded?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex aria-live="assertive"><div class="md-list-item-text" layout="row" layout-wrap flex><span class="item-index">{{$index + 1}}</span><div flex flex-xs="100"><h3 ng-if="::fine.firstLineLeft" ng-class="::(fine.isAlert? \'prm-warn has-icon-on-left\': \'\')"><div ng-if="::fine.isAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div><span>{{::fine.firstLineLeft}}</span></h3><h4 ng-if="::fine.secondLineLeft"><span translate="nui.fine.brief.1"></span> <span>{{::fine.secondLineLeft}}</span></h4></div><div flex flex-xs="100" class="weak-text"><p ng-if="::fine.firstLineRight" class="bold-text"><span>{{::fine.firstLineRight}}</span></p><p ng-if="::fine.secondLineRight"><span translate="nui.fine.brief.2"></span> <span>{{::fine.secondLineRight}}</span></p><p ng-if="fine.isExpanded" ng-repeat="line in ::fine.expandedDisplay"><span translate="{{::line.label}}"></span> <span>{{::line.data}}</span></p></div></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}" (click)="$ctrl.toggleSingleExpand(fine)"><prm-icon ng-class="{\'rotate-180\':fine.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\' ;\r\n                     messageRemoved = \'close\' " class="accessible-only" aria-label="{{fine.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{fine.isExpanded ? messageAdded : messageRemoved}}</div></div></div></md-list-item></md-list><prm-fines-after parent-ctrl="$ctrl"></prm-fines-after>');
$templateCache.put('components/account/linkedUserSelector/linked-user-selector.html','<md-input-container ng-if="$ctrl.numOfInstitutions>1" layout="row" class="toolbar-select-input" layout-align="center" hide-gt-sm><md-select ng-model="$ctrl.selectedInstitution" ng-change="$ctrl.updateData()" aria-label="select linked user institution"><md-option ng-repeat="inst in $ctrl.institutionsList" style="max-width: 306px" ng-value="inst.value"><span translate="{{inst.label}}"></span></md-option></md-select></md-input-container><prm-linked-user-selector-after parent-ctrl="$ctrl"></prm-linked-user-selector-after>');
$templateCache.put('components/account/messagesAndBlocks/messages-and-blocks.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div class="layout-column"><h2 class="zero-margin" layout="row" layout-align="start center"><span class="title" translate="nui.blocks.header"></span></h2><span class="header-subtitle"><prm-account-links tab-name="blocks"></prm-account-links></span><div ng-if="!$ctrl.numOfMessages || $ctrl.numOfMessages === \'0\'" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beach.type}}" svg-icon-set="{{$ctrl.accountIcons.beach.iconSet}}" icon-definition="{{$ctrl.accountIcons.beach.icon}}"></prm-icon><div><span translate="nui.overview.noblocks"></span></div></div></div><div class="tab-header-actions"></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" ng-if="$ctrl.patronBlock" class="md-3-line has-expand" ng-class="libraryItemExpand?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row"><div flex><h3 translate="block.patron"></h3><h4 ng-repeat="item in $ctrl.patronBlockText">{{item}}</h4></div></div></div></md-list-item><div ng-repeat="(institutionCode, institution) in $ctrl.messagesDisplay"><div ng-repeat="(mainLocationCode, messages) in institution"><p class="unmuted-text">{{institutionCode}}<span ng-if="mainLocationCode">-{{mainLocationCode}}</span></p><md-list-item class="md-3-line {{message.new}}" ng-repeat="message in messages"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row"><span class="item-index">{{message.index}}</span><div flex><p ng-if="message.ilsinstitutionname">{{message.ilsinstitutionname}}</p><p ng-if="message.text">{{message.text}}</p></div></div></div></md-list-item></div></div></md-list><prm-messages-and-blocks-after parent-ctrl="$ctrl"></prm-messages-and-blocks-after>');
$templateCache.put('components/account/loans/loan.html','<div class="md-list-item-text md-list-item-with-checkbox" layout="row" layout-wrap flex aria-live="assertive"><md-checkbox ng-model="$ctrl.selectedIds[$ctrl.item.loanid]" aria-label="Checkbox {{$index}}" ng-change="$ctrl.toggleSelected($ctrl.item.loanid)" ng-disabled="!$ctrl.item[$ctrl.selector] && !$ctrl.isRenewAvailable()"></md-checkbox><span class="item-index">{{$ctrl.index}}</span><div flex="40" flex-xs="100"><div layout="row" class="title-row" ng-class="{\'is-hovered\': isHovered && $ctrl.item[$ctrl.selector]}" ng-mouseenter="isHovered = true" ng-mouseleave="isHovered = false"><h3 ng-if="::$ctrl.item.title" title="{{::$ctrl.item.title}}"><a ng-click="$event.stopPropagation();" ng-if="$ctrl.item[$ctrl.selector]" class="arrow-link" aria-label="{{$ctrl.item.title}}{{\' \'}}{{\'nui.aria.newWindow\' | translate}}" target="_blank" ui-sref="fulldisplay({\r\n\t   \t\t\t\tvid:\'{{$ctrl.vid}}\',\r\n\t   \t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t   \t\t\t\ttab:\'{{$ctrl.queryOptions.tab}}\',\r\n\t   \t\t\t\tid:\'{{$ctrl.item.mmsid}}\',\r\n\t   \t\t\t\tinst:\'{{$ctrl.item.ilsinstitutioncode}}\',\r\n\t   \t\t\t\tcontext:\'L\'\r\n   \t\t\t\t})" ui-sref-opts="{reload: true}">{{::$ctrl.item.title}} </a><span ng-if="!$ctrl.item[$ctrl.selector]">{{::$ctrl.item.title}}</span></h3><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon></div><h4 ng-class="{\'loans-brief-display\':!$ctrl.isExpanded}"><span translate="nui.loan.brief.1"></span> {{::($ctrl.item.getBriefDisplayLine(1))}}</h4></div><div flex="40" flex-xs="100" class="weak-text"><div ng-if="::$ctrl.item.isActiveLoan()"><p class="normal-text" ng-style="$ctrl.item.isDueAlert() && {\'color\':\'tomato\'}"><prm-icon ng-if="::$ctrl.item.isDueAlert()" class="alert-red" icon-type="{{::$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.timerIcon.icon}}"></prm-icon><span translate="{{$ctrl.item.getCodeAlert()}}"></span>: {{($ctrl.item.getDateForBriefDisplay())}}. <span ng-if="::($ctrl.item.isFine())"><span translate="nui.loan.fine"></span>: {{::$ctrl.item.fine}}</span></p></div><div ng-if="::(!$ctrl.item.isActiveLoan())"><span translate="loans.return_date"></span> {{::($ctrl.item.getDateForBriefDisplay())}}</div><p class="normal-text" ng-class="{\'loans-brief-display\':!$ctrl.isExpanded}"><span translate="nui.loan.brief.2"></span>{{::($ctrl.item.getBriefDisplayLine(2))}}</p><div ng-if="$ctrl.isExpanded"><p ng-repeat="line in ::$ctrl.item.fullDisplayValues" class="normal-text"><span translate="loans.{{::line.key}}"></span> {{::line.value}}</p></div></div><div layout-align="start center" layout="row" flex="20" flex-xs="100" ng-class="{\'not-clickable\': $ctrl.renewAllInProgress}" class="list-item-actions"><div ng-if="$ctrl.isRenewable && !$ctrl.isRenewed && !$ctrl.renewInProgress" class="renewable"><md-button class="button-with-icon zero-margin button-link" (click)="$ctrl.renewLoan()" aria-label="{{\'nui.loans.renew\' | translate}}"><prm-icon class="h-flipped" icon-type="{{::$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.renewLoanIcon.icon}}"></prm-icon><span translate="nui.loans.renew"></span></md-button></div><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.renewInProgress"></prm-spinner><div class="item-respond" ng-if="$ctrl.isRenewed"><span ng-style="$ctrl.renewResponse.renewed === \'N\' && {\'color\':\'tomato\'} || $ctrl.renewResponse.renewed === \'Y\' && {\'color\':\'green\'}"><span translate="{{$ctrl.renewResponse.renewed === \'Y\' ? \'loans.renewed.\' + $ctrl.renewResponse.renewed : $ctrl.renewResponse.response || \'loans.renewed.\' + $ctrl.renewResponse.renewed}}"></span></span></div><div ng-if="($ctrl.isNotRenewable || $ctrl.isPendingApproval) && !$ctrl.renewInProgress && !$ctrl.isRenewed" class="not-renewable weak-text" aria-label="{{$ctrl.isNotRenewable ? \'nui.loans.notRenewable\' : \'loans.pendingApproval\' | translate}}" aria-hidden="false" layout-align="start center"><prm-icon ng-if="$ctrl.isNotRenewable" icon-type="{{::$ctrl.accountIcons.notRenewableIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.notRenewableIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.notRenewableIcon.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isPendingApproval" class="h-flipped" icon-type="{{::$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.renewLoanIcon.icon}}"></prm-icon><span ng-if="$ctrl.isNotRenewable" translate="nui.loans.notRenewable"></span> <span ng-if="$ctrl.isPendingApproval" translate="loans.pendingApproval"></span><md-tooltip ng-if="$ctrl.notRenewableReasonsArray.length > 0" md-direction="down" md-delay="400" class="multi-row-tooltip slide-tooltip-anim"><span class="popover animate-popover" translate="nui.loans.cannotRenewThisItem"></span><br/><span ng-if="::$ctrl.isNotRenewableWithCause" class="tooltip-content" ng-repeat="reason in $ctrl.notRenewableReasonsArray | limitTo:2">{{reason}}<br/></span><span ng-if="::$ctrl.isNotRenewableWithCause && $ctrl.notRenewableReasonsArray.length > 2" class="tooltip-content">...</span></md-tooltip><div ng-if="$ctrl.notRenewableReasonsArray.length > 0" class="accessible-only"><span class="popover animate-popover" translate="nui.loans.cannotRenewThisItem"></span><br/><span ng-if="::$ctrl.isNotRenewableWithCause" class="tooltip-content" ng-repeat="reason in $ctrl.notRenewableReasonsArray | limitTo:2">{{reason}}<br/></span><span ng-if="::$ctrl.isNotRenewableWithCause && $ctrl.notRenewableReasonsArray.length > 2" class="tooltip-content">...</span></div></div></div></div><div class="align-self-stretch" flex-xs="50"><md-button class="item-expand-button" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}" (click)="$ctrl.toggleDisplayMode()"><prm-icon ng-class="{\'rotate-180\':$ctrl.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\' ;\r\n                      messageRemoved = \'close\' " class="accessible-only" aria-label="{{$ctrl.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.isExpanded ? messageAdded : messageRemoved}}</div></div><prm-loan-after parent-ctrl="$ctrl"></prm-loan-after>');
$templateCache.put('components/account/loans/loans-list.html','<div ng-if="!$ctrl.isLoadingLoans" class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row" layout-align="start center"><h2 class="zero-margin"><span translate="nui.loans.header"></span></h2><md-input-container ng-if="$ctrl.hasHistoricLoans" class="prm-primary-color"><md-select id="loans-focus" ng-model="$ctrl.loanType" ng-change="$ctrl.changeLoansType()" aria-label="{{::(\'nui.aria.account.loans.types\' | translate)}}"><md-option ng-repeat="type in ::$ctrl.loanTypes" value="{{type}}"><span translate="nui.loan.{{::type}}"></span></md-option></md-select></md-input-container></div><div class="header-subtitle"><span class="items-count"><prm-account-links tab-name="loans"></prm-account-links></span></div><div ng-if="(!$ctrl.loans || $ctrl.loans.length === 0)" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beer.type}}" svg-icon-set="{{$ctrl.accountIcons.beer.iconSet}}" icon-definition="{{$ctrl.accountIcons.beer.icon}}"></prm-icon><div><span translate="nui.overview.noloans"></span></div></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.loans.length > 1"><div layout="row" layout-align="start center"><md-input-container class="static-select empty-select-on-init" layout="row" ng-if="!$ctrl.sortInProgress"><label class="bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.sortAllLoans()" aria-label="{{\'nui.aria.account.loans.sort\' | translate}}"><md-option ng-repeat="sort in $ctrl.sortByOptions" value="{{sort}}"><span translate="nui.loan.sort.{{sort}}"></span></md-option></md-select></md-input-container><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.sortInProgress"></prm-spinner></div><md-divider class="vertical-divider transparent-divider"></md-divider><div layout="column" ng-if="$ctrl.loanType !== \'history\' && $ctrl.hasRenewableLoans()"><md-button ng-if="!$ctrl.renewAllInProgress" class="button-with-icon button-link" aria-label="{{$ctrl.multipleRenewLabel | translate}}" (click)="$ctrl.renewMultipleLoans()" ng-disabled="$ctrl.renewAllInProgress"><prm-icon class="h-flipped" icon-type="{{$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.renewLoanIcon.icon}}"></prm-icon><span translate="{{$ctrl.multipleRenewLabel}}"></span></md-button><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.renewAllInProgress"></prm-spinner></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.loanType !== \'history\' && $ctrl.hasRenewableLoans()"></md-divider><md-button class="md-icon-button" (click)="$ctrl.toggleExpandAll()" aria-label="{{\'nui.aria.account.expandacollapse\' | translate}}"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isExpandAll" translate="nui.loans.collapse"></span> <span ng-if="!$ctrl.isExpandAll" translate="nui.loans.expand"></span></md-tooltip><prm-icon ng-if="!$ctrl.isExpandAll" icon-type="{{$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.expandAllIcon.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isExpandAll" icon-type="{{$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.collapseAllIcon.icon}}"></prm-icon></md-button></div></div><div role="application"><div layout="row" style="height: 40px; position: relative" layout-align="start center" ng-if="!$ctrl.isLoadingLoans && $ctrl.loans.length > 0"><div class="header-count" style="padding-left: 10px;"><span class="items-count margin-right-small" layout="column" ng-if="$ctrl.hasRenewableLoans() || $ctrl.isDefinedAnySelector()"><md-checkbox aria-label="Checkbox {{$index}}" ng-checked="$ctrl.isSelectAll" md-indeterminate="$ctrl.indeterminateState" ng-click="$ctrl.toggleAll()"><span class="results-count" hide-sm hide-md><span translate="nui.loans.counter" translate-values="$ctrl.getLoansBalancePlaceHolder()"></span></span></md-checkbox></span><span class="items-count margin-right-small" layout="column" ng-if="!$ctrl.hasRenewableLoans() && !$ctrl.isDefinedAnySelector()"><span class="results-count" hide-sm hide-md><span translate="nui.loans.counter" translate-values="$ctrl.getLoansBalancePlaceHolder()"></span></span></span></div><span flex></span><div layout="row" ng-if="$ctrl.isDefinedAnySelector()"><md-button class="md-icon-button unpin-button" aria-label="{{$ctrl.isChosenFav() | translate}}" (click)="$ctrl.updateFavorites($event)"><md-tooltip md-delay="400"><span translate="nui.favorites.pin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" icon-type="{{::$ctrl.favoritesIcons.pin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.pin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.pin.icon}}"></prm-icon></md-button><md-button class="md-icon-button has-bottom-arrow" ng-class="$ctrl.showPushtoActions ? \'arrow-showing\' : \'\' " aria-label="{{$ctrl.isChosenActions()}}" (click)="$ctrl.switchShowPushtoActions($event);$ctrl.closeOpenTabs($event);$event.stopPropagation()"><md-tooltip md-delay="400"><span translate="nui.favorites.pushto.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.favoritesIcons.favoriteActionsList.type}}" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" svg-icon-set="{{::$ctrl.favoritesIcons.favoriteActionsList.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.favoriteActionsList.icon}}"></prm-icon></md-button><div class="account-actions-list"><div class="action-list-content" ng-if="$ctrl.showPushtoActions"><prm-action-list [display-all]="false" [item]="$ctrl.selectedItems()" [selected-ids]="$ctrl.selectedIdsArray" [display-close-icon]="true" flex role="application" style="margin: 8px" (close-modal)="$ctrl.switchShowPushtoActions()"></prm-action-list><div flex="0" flex-md="25" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></div></div></div></div><prm-alert-bar ng-if="!$ctrl.isLoadingLoans" flex [alert-object]="$ctrl.renewResponseAlert"></prm-alert-bar><md-list class="separate-list-items gapped-list" layout="column" infinite-scroll="$ctrl.loadMoreLoans()" infinite-scroll-disabled="$ctrl.inProgress" infinite-scroll-distance="0"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="loan in $ctrl.loans" ng-class="{\'item-expanded\':loan.isExpanded}"><prm-loan [item]="::loan" index="{{$index + 1}}" [selected-ids]="$ctrl.selectedIds" [selector]="$ctrl.LOAN_ID_SELECTOR" (toggle-event)="$ctrl.handleToggleEvent($event)" class="in-element-dialog-context" layout="row" flex></prm-loan></md-list-item></md-list></div><prm-spinner ng-if="$ctrl.isLoadingLoans" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner><prm-loans-after parent-ctrl="$ctrl"></prm-loans-after>');
$templateCache.put('components/account/overview/account-overview.html','<md-content flex id="accountoverview" tabindex="-1" role="main" layout="row"><div ng-if="$ctrl.numOfInstitutions() > 1" hide-xs hide-sm class="institutions-list"><md-list><md-list-item class="md-2-line" ng-repeat="inst in $ctrl.institutionsList()" ng-click="$ctrl.selectedInstitution1(inst.value)" ng-class="{\'is-selected\': $ctrl.selectedInstitution.institutionCode === inst.value.institutionCode}"><div class="md-list-item-text"><h3 class="institution-name">{{inst.label | translate}}</h3></div></md-list-item></md-list></div><md-tabs md-selected="$ctrl.selectedTabIndex" md-dynamic-height md-border-bottom class="static-tabs default-tabs" flex><md-tab id="tab1" md-on-select="$ctrl.updateSelectedSection(\'overview\');\r\n        \t\t\t\t\t\t\t\t$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.overview\'}, undefined, $ctrl.primolyticsService.getTimestamp()); "><md-tab-label><span translate="nui.overview.header"></span></md-tab-label><md-tab-body><div class="gridListdemoDynamicTiles"><div class="tiles-grid"><prm-loans-overview ng-if="$ctrl.requiredTabsList.indexOf(\'loans\') !== -1" ng-class="{\'display-block\': $ctrl.isBrowserChrome() && !$ctrl.isBrowserEdge()}" [loans-counters]="$ctrl.loansCounters" (link-to-loans-event)="$ctrl.handleOpenTabEvent($event,\'loans\')"></prm-loans-overview><prm-requests-overview ng-if="$ctrl.requiredTabsList.indexOf(\'requests\') !== -1" ng-class="{\'display-block\': $ctrl.isBrowserChrome() && !$ctrl.isBrowserEdge()}" [requests-counters]="$ctrl.requestsCounter" (link-to-requests-event)="$ctrl.handleOpenTabEvent($event,\'requests\')"></prm-requests-overview><prm-fines-overview ng-if="$ctrl.requiredTabsList.indexOf(\'fines\') !== -1" ng-class="{\'display-block\': $ctrl.isBrowserChrome() && !$ctrl.isBrowserEdge()}" [fines-counters]="$ctrl.finesCounters" [demerits-counter]="$ctrl.demeritsCounter" (link-to-fines-event)="$ctrl.handleOpenTabEvent($event,\'fines\')"></prm-fines-overview><prm-messages-and-blocks-overview ng-if="$ctrl.requiredTabsList.indexOf(\'blocks\') !== -1" ng-class="{\'display-block\': $ctrl.isBrowserChrome() && !$ctrl.isBrowserEdge()}" (link-to-messages-event)="$ctrl.handleOpenTabEvent($event,\'blocks\')"></prm-messages-and-blocks-overview><prm-deposits-overview ng-if="$ctrl.requiredTabsList.indexOf(\'deposits\') !== -1" ng-class="{\'display-block\': $ctrl.isBrowserChrome() && !$ctrl.isBrowserEdge()}" [deposits-counters]="$ctrl.depositsCounter" (link-to-deposits-event)="$ctrl.handleOpenTabEvent($event,\'deposits\')"></prm-deposits-overview></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'loans\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'loans\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'loans\')" id="tab2"><md-tab-label><div layout="row"><span translate="nui.loans.header"></span><prm-icon ng-if="$ctrl.isLoansAlerts()" class="prm-warn" icon-type="{{$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.timerIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-loans [loans-counter]="$ctrl.loansCounters" [history-loans-counter]="$ctrl.historyLoansCounters" class="actions-list-spacer" flex></prm-loans><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'requests\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'requests\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.requests\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'requests\')" id="tab3" label="Requests"><md-tab-label><div layout="row"><span translate="nui.requests.header"></span><prm-icon ng-if="$ctrl.requestsGeneralAlert" class="prm-positive" icon-type="{{$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.requestsAlertIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-requests [requests-counter]="$ctrl.requestsCounter" class="actions-list-spacer" flex></prm-requests><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'fines\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'fines\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.finesAndFees\'}, undefined, $ctrl.primolyticsService.getTimestamp());\r\n                $ctrl.focusFirstElement(\'fines\')" id="tab4"><md-tab-label><div layout="row"><span translate="nui.fines.header"></span><div ng-if="$ctrl.finesGeneralAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon class="prm-warn" icon-type="{{$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div></div></md-tab-label><md-tab-body><div layout="row"><prm-fines [fines-counters]="$ctrl.finesCounters" [demerits-counter]="$ctrl.demeritsCounter" flex></prm-fines><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'blocks\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'blocks_messages\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.blocksAndMessages\'}, undefined, $ctrl.primolyticsService.getTimestamp())" id="tab5"><md-tab-label><div layout="row"><span translate="nui.blocks.header"></span><prm-icon ng-if="$ctrl.messagesGeneralAlert" class="prm-notice" icon-type="{{$ctrl.accountIcons.messagesAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.messagesAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.messagesAlertIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-messages-and-blocks flex></prm-messages-and-blocks><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'personal_settings\') !== -1" id="tab6" md-on-select="$ctrl.updateSelectedSection(\'personal_details\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.personalDetails\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'personal_settings\')"><md-tab-label><span translate="nui.details.header"></span></md-tab-label><md-tab-body><div layout="row"><prm-personal-info flex></prm-personal-info><div flex="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'deposits\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'deposits\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.deposits\'})" id="tab7" label="Deposits"><md-tab-label><div layout="row"><span translate="nui.deposits.header"></span><prm-icon ng-if="$ctrl.depositsGeneralAlert" class="prm-positive" icon-type="{{$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.depositsAlertIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-deposits [deposits-counter]="$ctrl.depositsCounter" flex></prm-deposits><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab></md-tabs></md-content><prm-account-overview-after parent-ctrl="$ctrl"></prm-account-overview-after>');
$templateCache.put('components/account/personalInfo/personal-info.html','<div class="tab-content-header" layout="row" layout-align="space-between end"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.details.header"></span></h2></div><div class="header-subtitle"><div ng-repeat="inst in $ctrl.generalSection" class="header-subtitle"><div ng-repeat="cur in inst" layout="column"><em class="first-letter-uppercase"><span ng-if="cur.institution" translate="nui.details.patronstatus.institution" translate-values="$ctrl.getPlaceHolders(cur)"></span> <span ng-if="cur.expiryDate" translate="nui.details.patronstatus.expirydate" translate-values="$ctrl.getPlaceHolders(cur)"></span> <span ng-if="cur.patronGroup" translate="nui.details.patronstatus.group" translate-values="$ctrl.getPlaceHolders(cur)"></span></em></div></div><prm-account-links tab-name="personalsettings"></prm-account-links></div></div></div><div layout="row" layout-wrap layout-align="center start" style="z-index: 1;"><md-card class="default-card card-with-header-actions" id="personalDetails" ng-class="{\'editable editable-active\':$ctrl.formMode == \'Edit\', \'error-warning\':$ctrl.formMode == \'Error\'}" flex flex-sm="100" flex-xs="100"><div class="bar success-bar" ng-repeat="msg in $ctrl.successMessages" layout-margin ng-if="$ctrl.successMessages.length > 0" layout="row" layout-align="start center"><span translate="{{msg}}" class="zero-margin"></span></div><div class="bar error-bar" ng-repeat="msg in $ctrl.errorMessages" layout-margin ng-if="$ctrl.errorMessages.length > 0" layout="row" layout-align="start center"><span translate="{{msg}}" class="zero-margin"></span></div><md-card-header class="transparent-toolbar" layout-fill><div class="md-toolbar-tools"><span flex></span><md-button id="personal_settings-focus" ng-if="$ctrl.isEditable() && $ctrl.formMode == \'View\'" class="button-with-icon button-link" (click)="$ctrl.editDetails()" aria-label="{{\'nui.details.edit\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.editIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.editIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.editIcon.icon}}"></prm-icon><span translate="nui.details.edit"></span></md-button><md-button ng-if="$ctrl.formMode != \'View\'" class="button-with-icon button-warn" (click)="$ctrl.discardChanges()" aria-label="{{\'nui.details.discard\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.discardChangesIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.discardChangesIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.discardChangesIcon.icon}}"></prm-icon><span class="ng-scope" translate="nui.details.discard"></span></md-button><md-button ng-if="$ctrl.formMode != \'View\'" class="button-with-icon button-confirm" (click)="$ctrl.save()" aria-label="{{\'nui.details.Save\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.saveChangesIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.saveChangesIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.saveChangesIcon.icon}}"></prm-icon><span translate="nui.details.Save"></span></md-button></div></md-card-header><md-card-content class="presentable-disabled-inputs animate-form-inputs" layout="row" layout-wrap><div class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h3 class="accessible-only" layout-fill><span translate="nui.details.addressSection"></span></h3><div ng-if="!groupFields.hidden" ng-repeat="groupFields in $ctrl.addressSection" class="input-containers-group" flex-xs="100" flex-gt-xs="50" flex-gt-md="33" layout="column"><div layout-margin><md-input-container ng-repeat="field in groupFields" ng-if="field.uiType!==\'hidden\'" class="underlined-input" layout="column"><label for="prm_{{field.label}}" translate="{{field.label}}"></label> <input ng-model="$ctrl.personalInfo[field.name]" type="text" disabled="disabled" ng-disabled="$ctrl.formMode == \'View\' || field.uiType == \'readonly\'"></md-input-container></div></div></div><md-divder class="card-divider margin-bottom-large" layout-margin></md-divder><div class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h3 class="accessible-only" layout-fill><span translate="nui.details.phoneNumberSection"></span></h3><div ng-repeat="groupFields in $ctrl.phoneNumberSection" class="input-containers-group" flex-xs="100" flex-gt-xs="50" flex-gt-md="50" layout="column"><div layout-margin><md-input-container ng-repeat="field in groupFields" class="underlined-input" layout="column"><label ng-if="field.uiType===\'text\' || field.uiType == \'readonly\'" for="prm_{{field.label}}" translate="{{field.label}}"></label> <input ng-if="field.uiType===\'text\' || field.uiType == \'readonly\'" ng-model="$ctrl.personalInfo[field.name]" type="text" disabled="disabled" ng-disabled="$ctrl.formMode == \'View\' || field.uiType == \'readonly\'"><md-checkbox ng-if="field.uiType===\'checkbox\'" ng-model="$ctrl.personalInfo[field.name]" ng-disabled="$ctrl.formMode == \'View\'" ng-true-value="\'Y\'" ng-false-value="\'N\'"><span translate="{{field.label}}"></span></md-checkbox></md-input-container></div></div></div><md-divder ng-if="false" class="card-divider margin-bottom-medium" layout-margin></md-divder><div ng-if="false" class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><div flex flex-gt-xs="45" flex-gt-md="30"><div layout-margin><md-input-container ng-hide="true" layout="row" class="underlined-input"><label><span translate="nui.details.mailing"></span></label><md-select ng-model="$ctrl.mailSelectedOption"><md-option ng-repeat="option in $ctrl.mailOptions" value="{{option.value}}"><span translate="results.sortby.option.{{option.text}}"></span></md-option></md-select></md-input-container></div></div></div><md-divder ng-if="$ctrl.showActionSection()" class="card-divider margin-bottom-medium" layout-margin></md-divder><div ng-if="$ctrl.showActionSection()" class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h4 class="card-content-section-title" layout-fill><span translate="nui.details.actionSection"></span></h4><md-checkbox ng-repeat="cur in $ctrl.actionSection" class="has-small-text zero-margin" ng-model="$ctrl.personalInfo[cur.name]" ng-disabled="$ctrl.formMode == \'View\'" flex="50"><div layout="column"><span translate="{{cur.label}}"></span></div></md-checkbox></div></md-card-content></md-card><md-card class="default-card" flex-sm="100" flex-xs="100"><md-card-content layout="column" layout-align="space-around center"><prm-change-lang label-type="text" layout="column" layout-align="center center"></prm-change-lang><md-divider class="card-divider" layout-margin></md-divider><md-button ng-if="$ctrl.showPasswordSection()" class="button-link" aria-label="{{\'nui.aria.account.details.editpassword\' | translate}}" ng-click="$ctrl.showLoginDialog()"><span translate="contact.header.changePassword"></span></md-button></md-card-content></md-card></div><prm-personal-info-after parent-ctrl="$ctrl"></prm-personal-info-after>');
$templateCache.put('components/account/requests/request-confirm-dialog.html','<md-dialog class="in-element-dialog" layout="column"><form layout="row" layout-align="end center" layout-fill><md-dialog-content><div class="md-dialog-content bold-text" layout-align="center"><span translate="nui.request.confirm.message"></span></div></md-dialog-content><div class="md-actions" layout="row"><md-button ng-click="ctrl.hide()"><span translate="nui.request.confirm.no"></span></md-button><md-button class="dialog-primary button-confirm" ng-click="ctrl.cancelIt(); ctrl.hide();"><span translate="nui.request.confirm.ok"></span></md-button></div></form></md-dialog>');
$templateCache.put('components/account/requests/requests.html','<div ng-if="!$ctrl.isLoadingRequests" class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.requests.header"></span></h2></div><div class="header-subtitle"><span class="items-count margin-right-small"><em translate="nui.requests.counter" translate-values="$ctrl.getRequestsCountPlaceHolder()" ng-if="!$ctrl.isDefinedAnySelector() && $ctrl.requestsCounter"></em><prm-account-links tab-name="requests"></prm-account-links></span></div><div ng-if="(!$ctrl.requestsCounter || $ctrl.requestsCounter === \'0\')" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.norequests"></span></div></div></div><div class="tab-header-actions requests-header-actions-layout" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.requestsCounter"><prm-multi-select-filter filter-label="nui.librarycard.request.filter_request_type" [filter-options]="$ctrl.filterOptions" [filter-values]="$ctrl.filterValues" (values-change)="$ctrl.setFilterValues($event)"></prm-multi-select-filter><md-divider class="vertical-divider transparent-divider hide-on-extra-small"></md-divider><div layout="row" layout-align="start center"><md-input-container class="static-select empty-select-on-init" layout="row"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select id="requests-focus" ng-model="$ctrl.sortBy" ng-change="$ctrl.sortRequestsDisplay()" aria-label="{{::(\'nui.librarycard.sortby\' | translate)}}"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all request items button"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}"></prm-icon></span></md-button></div></div><div role="application"><div ng-if="$ctrl.isDefinedAnySelector() && !$ctrl.isLoadingRequests" layout="row" style="height: 40px; position: relative" layout-align="start center"><div class="header-count" style="padding-left: 10px;"><span class="items-count margin-right-small" layout="column"><md-checkbox aria-label="Checkbox {{$index}}" ng-checked="$ctrl.isSelectAll" md-indeterminate="$ctrl.indeterminateState" ng-click="$ctrl.toggleAll()"><span translate="nui.requests.counter" translate-values="$ctrl.getRequestsCountPlaceHolder()"></span></md-checkbox></span></div><span flex></span><div layout="row"><md-button class="md-icon-button unpin-button" aria-label="{{$ctrl.isChosenFav() | translate}}" (click)="$ctrl.updateFavorites($event)"><md-tooltip md-delay="400"><span translate="nui.favorites.pin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" icon-type="{{::$ctrl.favoritesIcons.pin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.pin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.pin.icon}}"></prm-icon></md-button><md-button class="md-icon-button has-bottom-arrow" ng-class="$ctrl.showPushtoActions ? \'arrow-showing\' : \'\' " aria-label="{{$ctrl.isChosenActions()}}" (click)="$ctrl.switchShowPushtoActions($event);$ctrl.closeOpenTabs($event);$event.stopPropagation()"><md-tooltip md-delay="400"><span translate="nui.favorites.pushto.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.favoritesIcons.favoriteActionsList.type}}" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" svg-icon-set="{{::$ctrl.favoritesIcons.favoriteActionsList.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.favoriteActionsList.icon}}"></prm-icon></md-button><div class="account-actions-list"><div class="action-list-content" ng-if="$ctrl.showPushtoActions"><prm-action-list [display-all]="false" [item]="$ctrl.selectedItems()" [selected-ids]="$ctrl.selectedIdsArray" [display-close-icon]="true" flex style="margin: 8px" (close-modal)="$ctrl.switchShowPushtoActions()"></prm-action-list><div flex="0" flex-md="25" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></div></div></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="requestDisplay in $ctrl.requestsByType() | limitTo:200" ng-hide="actionSuccessful" ng-class="requestDisplay.isExpanded?\'item-expanded\':\'\'" ng-init="$ctrl.addFilterOption(requestDisplay)"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text md-list-item-with-checkbox" layout="row" layout-wrap flex aria-live="assertive"><md-checkbox ng-model="$ctrl.selectedIds[requestDisplay[$ctrl.REQUEST_ID]]" aria-label="Checkbox {{$index}}" ng-change="$ctrl.toggleSelected(requestDisplay[$ctrl.REQUEST_ID])" ng-if="requestDisplay[$ctrl.REQUEST_ID_SELECTOR]"></md-checkbox><span class="item-index">{{$index + 1}}</span><div flex="40" flex-xs="100"><div layout="row" class="title-row" ng-class="{\'is-hovered\': isHovered && requestDisplay[$ctrl.REQUEST_ID_SELECTOR]}" ng-mouseenter="isHovered = true" ng-mouseleave="isHovered = false"><h3 ng-if="::requestDisplay.firstLineLeft" title="{{::requestDisplay.firstLineLeft}}"><a ng-click="$event.stopPropagation();" ng-if="requestDisplay[$ctrl.REQUEST_ID_SELECTOR]" class="arrow-link" aria-label="{{::requestDisplay.firstLineLeft}}{{\' \'}}{{\'nui.aria.newWindow\' | translate}}" target="_blank" ui-sref="fulldisplay({\r\n\t\t\t   \t\t\t\tvid:\'{{$ctrl.vid}}\',\r\n\t\t\t   \t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t\t\t   \t\t\t\ttab:\'{{$ctrl.queryOptions.tab}}\',\r\n\t\t\t   \t\t\t\tid:\'{{requestDisplay[$ctrl.REQUEST_ID_SELECTOR]}}\',\r\n\t\t\t   \t\t\t\tinst:\'{{requestDisplay.ilsinstitutioncode}}\',  \r\n\t\t\t   \t\t\t\tcontext:\'L\'\r\n\t\t   \t\t\t\t})" ui-sref-opts="{reload: true}">{{::requestDisplay.firstLineLeft}} </a><span ng-if="!requestDisplay[$ctrl.REQUEST_ID_SELECTOR]">{{::requestDisplay.firstLineLeft}}</span></h3><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon></div><h4 ng-if="::requestDisplay.secondLineLeft"><span translate="nui.request.brief.1"></span> {{::requestDisplay.secondLineLeft}}</h4></div><div flex flex-xs="100" class="weak-text"><p class="bold-text" ng-if="::requestDisplay.firstLineRight" ng-style="::(request.new && {\'color\':\'#5cb85c\'})"><prm-icon ng-if="::requestDisplay.isAlert" style="color: #5cb85c;" icon-type="{{::$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.requestsAlertIcon.icon}}"></prm-icon><span class="text-uppercase"><span translate="{{::(\'request.\'+requestDisplay.requestType+\'.request_type\')}}"></span></span>.{{requestDisplay.firstLineRight}}</p><p ng-if="requestDisplay.isRapidoRequest && !$ctrl.isRapidoDigitalRequest(requestDisplay.rapidoFormat) && !$ctrl.showRapidoPickupUntil() && $ctrl.showRapidoDate(requestDisplay.dates.pickupOrDeliveryDate)" class="request-location"><span translate="nui.ngrs.request.date.pickup"></span>&nbsp;{{$ctrl.getDateFormat(requestDisplay.dates.pickupOrDeliveryDate)}}</p><p ng-if="requestDisplay.isRapidoRequest && !$ctrl.isRapidoDigitalRequest(requestDisplay.rapidoFormat) && $ctrl.showRapidoDate(requestDisplay.expirationDate)" class="request-location pickup-until"><span translate="nui.ngrs.request.date.pickup_until"></span>&nbsp;{{$ctrl.getDateFormat(requestDisplay.expirationDate)}}</p><p ng-if="requestDisplay.isRapidoRequest && $ctrl.isRapidoDigitalRequest(requestDisplay.rapidoFormat) && $ctrl.showRapidoDate(requestDisplay.dates.pickupOrDeliveryDate)" class="request-location"><span translate="nui.ngrs.request.date.delivery"></span>&nbsp;{{$ctrl.getDateFormat(requestDisplay.dates.pickupOrDeliveryDate)}}</p><p ng-if="::$ctrl.showPickupLocation(requestDisplay)" class="request-location"><span translate="nui.request.brief.2"></span> {{::requestDisplay.secondLineRight}}</p><div ng-if="requestDisplay.isExpanded"><p ng-repeat="line in ::requestDisplay.expandedDisplay"><span ng-if="line.label != \'request_id\'"><span translate="{{::(line.label)}}"></span> {{::line.data}}</span></p><p ng-if="requestDisplay.isRapidoRequest && !$ctrl.isRapidoDigitalRequest(requestDisplay.rapidoFormat) && $ctrl.showRapidoDate(requestDisplay.dates.dueDate)" class="request-location"><span translate="nui.ngrs.request.date.due_date"></span>&nbsp;{{$ctrl.getDateFormat(requestDisplay.dates.dueDate)}}</p></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" flex class="list-item-actions"><md-button ng-if="::(requestDisplay.isCancelable)" class="button-with-icon zero-margin button-link" ng-hide="$ctrl.cancelPromptDisplayId === requestDisplay.requestId || $ctrl.failedRequestId === requestDisplay.requestId" ng-disabled="$ctrl.isInCancelAction" (click)="$ctrl.showCancelPrompt($event,requestDisplay.requestId, requestDisplay.requestType)" aria-label="cancel request button"><prm-icon class="h-flipped" icon-type="{{::$ctrl.accountIcons.removeIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.removeIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.removeIcon.icon}}"></prm-icon><span translate="nui.requests.cancel"></span></md-button><div class="item-respond" ng-if="$ctrl.failedRequestId === requestDisplay.requestId"><span class="error-response">{{$ctrl.failedRequestMessage}}</span></div></div><prm-progress-bar class="ngrs-progress-bar" ng-if="requestDisplay.isRapidoRequest && requestDisplay.isExpanded" [status]="$ctrl.getRapidoStatus(requestDisplay.statusCode)" [requestid]="requestDisplay.requestId" [format]="requestDisplay.rapidoFormat" [dates]="requestDisplay.dates"></prm-progress-bar></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{::(\'nui.aria.account.requests.expandcollapse\' | translate)}}" (click)="requestDisplay.isExpanded = !requestDisplay.isExpanded"><prm-icon ng-class="{\'rotate-180\':requestDisplay.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\';\r\n                      messageRemoved = \'close\' " class="accessible-only" aria-label="{{requestDisplay.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{requestDisplay.isExpanded ? messageAdded : messageRemoved}}</div></div></div></md-list-item></md-list></div><prm-spinner ng-if="(!$ctrl.requestsCounter || $ctrl.requestsCounter === \'0\') && $ctrl.isLoadingRequests" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner><prm-requests-after parent-ctrl="$ctrl"></prm-requests-after>');
$templateCache.put('components/analytics/performanceMonitor/performance-monitor.html','<div ng-if="$ctrl.displayMonitor"><span>Client monitor</span><ul><li>total search time: {{$ctrl.totalSearchTime}}</li><li>search api response time: {{$ctrl.searchApiTime}}</li><li>results render time: {{$ctrl.resultsRenderTime}}</li></ul><span>Server monitor</span><ul ng-if="!$ctrl.isSuprima"><li>total search api time: {{$ctrl.totalSearchServerTime}}</li><li>search time: {{$ctrl.searchServerTime}}</li><li>delivery manager time: {{$ctrl.deliveryManagerServerTime}}</li></ul><ul ng-if="$ctrl.isSuprima"><li style="overflow-y: scroll;height: 7em;"><pre>\r\n                    <code>\r\n                    {{$ctrl.formattedServerTimeLog}}\r\n                    </code>\r\n                </pre></li></ul></div><prm-performance-monitor-after parent-ctrl="$ctrl"></prm-performance-monitor-after>');
$templateCache.put('components/collection/collectionBreadcrumbs/collectionBreadcrumbs.html','<div class="breadcrumbs-bar" layout="row" layout-wrap layout-align="start center"><md-button aria-label="{{\'nui.aria.collectionDiscovery.topNodeButton\' | translate}}" ng-href="collectionDiscovery.do?collectionId=0&vid={{$ctrl.bvid}}&colayout={{$ctrl.colayout}}&inst={{$ctrl.inst}}"><span translate="colldiscovery.collpath.topnode"></span></md-button><prm-icon icon-type="{{$ctrl.collectionIcons.rightArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.rightArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.rightArrow.icon}}"></prm-icon><md-button ng-repeat="item in $ctrl.breadcrumbs" ng-href="collectionDiscovery.do?collectionId={{item.pid}}&vid={{$ctrl.bvid}}&colayout={{$ctrl.colayout}}&inst={{$ctrl.inst}}">{{item.name}}<prm-icon icon-type="{{$ctrl.collectionIcons.rightArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.rightArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.rightArrow.icon}}"></prm-icon></md-button></div><prm-collection-breadcrumbs-after parent-ctrl="$ctrl"></prm-collection-breadcrumbs-after>');
$templateCache.put('components/collectionDiscovery/collectionGalleryHeader/collection-gallery-header.html','<div class="collection-header-inner has-transparent-topbar" ng-class="{\'has-backdrop-image\': $ctrl.thumbnailUrl}" layout="column" ng-style="$ctrl.thumbnailUrl && {\'background-image\': \'url(\' + $ctrl.thumbnailUrl + \')\'}"><div layout="row" class="margin-top-medium"><div flex="0" flex-lg="10" flex-xl="20"></div><div flex><prm-collection-navigation-breadcrumbs ng-if="::!$ctrl.isGalleryLobby" [path]="::$ctrl.path"></prm-collection-navigation-breadcrumbs></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div><div layout="row"><div flex="0" flex-lg="10" flex-xl="20"></div><div layout="column" flex><div class="collection-info"><h1 class="collection-title bold-text">{{::$ctrl.title}}</h1><div class="item-actions result-item-actions"><prm-save-to-favorites-button ng-if="::$ctrl.currentCollectionRecord" [item]="::$ctrl.currentCollectionRecord" [is-collection-discovery]="true"></prm-save-to-favorites-button></div><p>{{::$ctrl.description}}</p></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div></div><prm-collection-gallery-header-after parent-ctrl="$ctrl"></prm-collection-gallery-header-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/collection-gallery.html','<prm-collection-search ng-if="!$ctrl.isGalleryLobby" (on-collection-search-event)="$ctrl.searchQuery = $event; $ctrl.deeplinkQuery()" (on-collection-sort-event)="$ctrl.sortBy = $event; $ctrl.deeplinkSortBy()"></prm-collection-search><md-content class="padded-container" layout="row" layout-align="center start" flex id="mainCollResults"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div><div flex class="results-container"><div class="ui-blocker" ng-if="vm.state.searchInProgress"></div><div class="results-title" layout="row" layout-align="start center" style="font-style: italic; position: relative; top: -7px; padding-left: 10px;"><span flex></span></div><prm-gallery-collections-list [collections]="::$ctrl.collections" [next-path]="::$ctrl.nextPath" [is-gallery-lobby]="$ctrl.isGalleryLobby" [search-query]="$ctrl.searchQuery" [sort-by]="$ctrl.sortBy"></prm-gallery-collections-list><prm-gallery-items-list [search-query]="$ctrl.searchQuery" [sort-by]="$ctrl.sortBy"></prm-gallery-items-list></div><div flex="0" flex-md="0" flex-lg="10" flex-xl="15"></div></md-content><prm-collection-gallery-after parent-ctrl="$ctrl"></prm-collection-gallery-after>');
$templateCache.put('components/collectionDiscovery/collectionSearch/collection-search.html','<md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="{{$ctrl.isMobileWithSortAndCol()}}"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div><div layout="row" layout-align="start center" class="search-margin-medium search-margin-small"><span class="search-margin-small">{{\'nui.colldiscovery.sortby\' | translate}}</span><md-input-container layout="row" class="toolbar-select-input sortWithSearch" layout-align="center"><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.onSortCollections(); $ctrl.sendCollectionSortBeacon()" aria-label="{{\'nui.aria.results.sortBy\' | translate}}"><md-option value="{{option}}" ng-repeat="option in $ctrl.sortOptions"><span role="button">{{$ctrl.getSortLabel(option) | translate}}</span></md-option></md-select></md-input-container></div><md-divider class="toolbar-divider visible" ng-if="$ctrl.mediaQueries.gtxs"></md-divider><div layout="row" class="search-within" ng-class="{\'search-margin-medium\': $ctrl.mediaQueries.gtxs}" layout-align="start center"><div layout="row" layout-align="start center" ng-if="!$ctrl.searchQueryFilter"><form ng-submit="$ctrl.clickSearch(); $ctrl.collectionSearchBeacon()"><md-input-container class="search-input sortWithSearch" flex md-no-float ng-if="$ctrl.showSearchInput"><input ng-model="$ctrl.searchQuery" class="search-within-input" ng-change="" placeholder="{{\'nui.colldiscovery.search\' | translate}}" aria-label="{{\'nui.aria.collection.search\' | translate}}" ng-focus="$ctrl.searchInputFocused = true" ng-blur="$ctrl.searchInputFocused = false" type="text" id="searchWithinInput"><md-button tabindex="{{$ctrl.searchQuery.length ? 0 : -1 }}" ng-if="$ctrl.searchQuery.length > 0" class="md-icon-button clear-button" ng-click="$ctrl.onClearSearchInput()" ng-class="{\'is-visible\': $ctrl.searchQuery.length }" aria-label="{{\'nui.searchField.clear\' | translate}}" type="button"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></md-input-container><md-button type="submit" class="search-button" ng-disabled="!$ctrl.searchQuery.length" aria-label="{{\'nui.aria.collection.searchButton\' | translate}}" ng-class="{\'is-shifted\': $ctrl.searchInputFocused || $ctrl.searchQuery.length}"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon><span class="search-button-text" ng-if="$ctrl.mediaQueries.gtxs">{{\'nui.colldiscovery.searchButton\' | translate}}</span></md-button></form></div><div ng-if="$ctrl.searchQueryFilter" layout="row" layout-align="start center"><span class="margin-right-small">{{\'nui.colldiscovery.show\' | translate}}</span><div class="filter-chip"><span class="bold-text">{{$ctrl.searchQueryFilter}}</span><md-button class="md-icon-button" ng-click="$ctrl.onRemoveSearchFilter()" aria-label="{{\'nui.aria.collection.close\' | translate:\'{searchTerm: \\\'\'+$ctrl.searchQuery+\'\\\'}\'}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div></div></div></div><prm-spinner ng-if="$ctrl.searchInProgress" style="transform: rotate(90deg); height: 100px;" class="half-transparent no-text overlay-cover" layout="row" layout-align="center end" layout-margin></prm-spinner></md-toolbar><prm-collection-search-after parent-ctrl="$ctrl"></prm-collection-search-after>');
$templateCache.put('components/collectionDiscovery/collectionNavigationBreadcrumbs/collection-navigation-breadcrumbs.html','<div layout="row" layout-align="start center" layout-wrap><prm-collection-navigation-breadcrumbs-item layout="row" layout-align="start center" class="root-item" [path-object]="pathObject" [is-root-object]="true" [institution]="$ctrl.institution" [parent-tab]="\'brief\'"></prm-collection-navigation-breadcrumbs-item><prm-collection-navigation-breadcrumbs-item layout="row" layout-align="start center" ng-repeat="pathObject in $ctrl.path" [path-object]="pathObject" [institution]="$ctrl.institution" [parent-tab]="\'brief\'"></prm-collection-navigation-breadcrumbs-item></div><prm-collection-navigation-breadcrumbs-after parent-ctrl="$ctrl"></prm-collection-navigation-breadcrumbs-after>');
$templateCache.put('components/collectionDiscovery/recordCollectionPaths/record-collection-paths.html','<div ng-if="::$ctrl.paths" layout="row" layout-xs="column" class="layout-block-xs"><div flex-gt-sm="20" flex-gt-xs="25" flex><span class="bold-text" translate="nui.colldiscovery.details.paths" translate-attr-title="nui.colldiscovery.details.paths"></span></div><div flex (click)="$ctrl.closeDialog()"><prm-collection-navigation-breadcrumbs ng-repeat="pathObject in $ctrl.paths" [path]="::pathObject.path" [institution]="::pathObject.institution"></prm-collection-navigation-breadcrumbs></div></div><prm-record-collection-paths-after parent-ctrl="$ctrl"></prm-record-collection-paths-after>');
$templateCache.put('components/favorites/favoritesEditLabelsMenu/favorites-edit-labels-menu.html','<md-menu><md-button prm-brief-internal-button-marker class="labels-menu-button prm-primary" ng-click="$ctrl.openMenu($mdOpenMenu, $event)" aria-label="{{$ctrl.isChosenLabels() | translate}}" ng-class="$ctrl.returnAssignedLabels().length ? \'md-icon-button\':\'button-with-icon\'"><md-tooltip md-delay="400"><span translate="nui.favorites.labels.tooltip"></span></md-tooltip><prm-icon ng-init="iconDef=$ctrl.isSection ? $ctrl.favoritesIcons.addLabelTop : $ctrl.favoritesIcons.addLabelRecord" ng-class="{\'disabledFavTool\':$ctrl.disable}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span ng-if="!$ctrl.returnAssignedLabels().length" translate="nui.favorites.labels.add" ng-class="{\'disabledFavTool\':$ctrl.disable}"></span></md-button><md-menu-content width="4" layout="column" class="menu-with-footer"><md-menu-item ng-repeat="label in $ctrl.returnAssignedLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.assigned"></span></div><md-button md-autofocus ng-click="$ctrl.removeLabel(label)" aria-label="{{\'nui.aria.account.favorites.removelabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{label}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon></span></md-button></md-menu-item><md-menu-divider ng-if="$ctrl.returnOtherLabels().length && $ctrl.returnAssignedLabels().length"></md-menu-divider><md-menu-item ng-repeat="otherLabel in $ctrl.returnOtherLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.other"></span></div><md-button ng-click="$ctrl.addLabel(otherLabel)" aria-label="{{\'nui.aria.account.favorites.addlabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{otherLabel}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.addLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.addLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.addLabel.icon}}"></prm-icon></span></md-button></md-menu-item><div class="menu-footer"><md-menu-divider ng-if="$ctrl.returnOtherLabels().length || $ctrl.returnAssignedLabels().length" class="zero-margin-top"></md-menu-divider><form ng-submit="$ctrl.addNewLabel()" class=""><div layout="row" layout-fill layout-align="center center"><md-input-container flex="80"><label translate="nui.favorites.labels.new"></label> <input ng-model="$ctrl.newLabel" type="text" autocomplete="off" md-autofocus></md-input-container></div></form></div></md-menu-content></md-menu><prm-favorites-edit-labels-menu-after parent-ctrl="$ctrl"></prm-favorites-edit-labels-menu-after>');
$templateCache.put('components/favorites/favoritesRecordLabels/favorites-record-labels.html','<div class="media-labels md-chips md-chips-wrap" layout="row" layout-align="start start" layout-wrap><div class="label-item md-chip outline-chip md-readonly animate-opacity-and-scale" ng-repeat="label in ::$ctrl.returnLabelsOfItem() track by $index"><div class="md-chip-content"><strong>{{label}}</strong></div></div><div ng-if="::$ctrl.getUser()"><prm-favorites-edit-labels-menu [item]="::$ctrl.item" [is-section]="false"></prm-favorites-edit-labels-menu></div></div><prm-favorites-record-labels-after parent-ctrl="$ctrl"></prm-favorites-record-labels-after>');
$templateCache.put('components/favorites/favoritesLabels/favorites-labels.html','<div layout="column" ng-if="$ctrl.getUser()" sticky offset="84" disabled-sticky="!$ctrl.mediaQueries.gtsm"><div class="sidebar-inner-wrapper padding-left-large" layout="column"><h2 class="sidebar-title" translate="nui.favorites.labels.header"></h2><div class="sidebar-section" layout="column" layout-align="start start"><div class="md-chips chips-column" layout="column" layout-align="start start"><div class="md-chip toggleable-chip rounded-chip hovered-chip" ng-repeat="labels in $ctrl.favoritesService.getSortedLabels()" ng-class="{\'chip-toggled-on\': $ctrl.isSelectedLabel(labels[0])}" ng-click="$ctrl.checkSelectedLabels(labels[0])" aria-label="{{labels[0]}} Tag" layout-row><md-tooltip md-delay="800"><span ng-if="!$ctrl.isSelectedLabel(labels[0])" translate="nui.favorites.selectFilter.tooltip"></span> <span ng-if="$ctrl.isSelectedLabel(labels[0])" translate="nui.favorites.removeFilter.tooltip"></span></md-tooltip><div class="md-chip-content"><strong>{{$ctrl.getLabel(labels[0])}}</strong> &nbsp; <span class="text-in-brackets text-italic">{{labels[1]}}</span></div><div class="md-chip-remove-container" ng-if="$ctrl.isSelectedLabel(labels[0])" ng-mouseenter="showRemoveIcon = true" ng-mouseleave="showRemoveIcon = false"><button class="md-chip-remove ng-scope" type="button" aria-hidden="true" tabindex="-1"><prm-icon icon-type="{{$ctrl.favoritesIcons.labelChecked.type}}" svg-icon-set="{{$ctrl.favoritesIcons.labelChecked.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.labelChecked.icon}}" ng-if="!showRemoveIcon"></prm-icon><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close" ng-if="showRemoveIcon" class="close-button"></prm-icon><span class="_md-visually-hidden ng-binding" translate="nui.favorites.remove"></span></button></div></div></div><div class="margin-top-small margin-bottom-medium animate-enter-leave-scale-bounce" ng-if="$ctrl.selectedLabels.length > 0"><md-button class="button-as-link link-alt-color zero-margin" (click)="$ctrl.clearAll()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon><span class="bold-text" translate="nui.favorites.labels.clear"></span></md-button></div></div></div></div><prm-favorites-labels-after parent-ctrl="$ctrl"></prm-favorites-labels-after>');
$templateCache.put('components/favorites/favoritesToolBar/favorites-tool-bar.html','<md-toolbar class="default-toolbar" sticky sticky-class="is-stuck" ng-class="{\'is-visible\': !$ctrl.mediaQueries.gtxs && ($ctrl.showButtons() || $ctrl.showSavedSearchesActions()) }"><div class="md-toolbar-tools" layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\':$ctrl.mediaQueries.lgPlus}"></div><h1 translate="nui.favorites.header" class="toolbar-title" ng-hide="$ctrl.showButtons() && !$ctrl.mediaQueries.gtxs"></h1><md-divider class="toolbar-divider" ng-class="{\'visible\':true || $ctrl.showSavedSearchesActions()}"></md-divider><div layout="row"><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.showSearchHistoryActions() || ($ctrl.showSavedSearchesActions() && $ctrl.getUser())"><prm-saved-searches-group-actions></prm-saved-searches-group-actions></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites() && $ctrl.getUser()"><prm-favorites-edit-labels-menu [disable]="!$ctrl.showButtons()" [is-section]="true"></prm-favorites-edit-labels-menu></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites()"><md-button class="md-icon-button unpin-button" aria-label="{{$ctrl.isChosenFav() | translate}}" (click)="$ctrl.unpinFromFavorites()"><md-tooltip md-delay="400"><span translate="nui.favorites.unpin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" icon-type="{{::$ctrl.favoritesIcons.unPin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.unPin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.unPin.icon}}"></prm-icon></md-button></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites()"><md-button class="md-icon-button has-bottom-arrow" ng-class="$ctrl.showPushtoActions ? \'arrow-showing\' : \'\' " aria-label="{{$ctrl.isChosenActions() | translate}}" (click)="$ctrl.switchShowPushtoActions($event);$ctrl.closeOpenTabs($event);$event.stopPropagation()"><md-tooltip md-delay="400"><span translate="nui.favorites.pushto.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.favoritesIcons.favoriteActionsList.type}}" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" svg-icon-set="{{::$ctrl.favoritesIcons.favoriteActionsList.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.favoriteActionsList.icon}}"></prm-icon></md-button></div></div></div></md-toolbar><div class="favorites-action-list" ng-if="$ctrl.showPushtoActions && $ctrl.showButtons()" sticky offset="64" sticky-class="is-stuck"><div class="action-list-content" ng-keydown="$ctrl.keyDownSupport($event)"><md-content layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><prm-action-list [display-all]="false" displaymode="favorites" [item]="$ctrl.selectedItems()" [display-close-icon]="true" flex style="margin: 8px" (close-modal)="$ctrl.switchShowPushtoActions()"></prm-action-list><div flex="0" flex-md="25" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></md-content></div></div><prm-favorites-tool-bar-after parent-ctrl="$ctrl"></prm-favorites-tool-bar-after>');
$templateCache.put('components/favorites/saveToFavoritesButton/save-to-favorites-button.html','<div tabindex="-1" ng-click="$event.stopPropagation()" aria-live="assertive" ng-if="::(!$ctrl.isFavorites  && $ctrl.showBookmark())" class="pin-button"><md-button ng-if="!$ctrl.showPin()" ng-class="{\'pinned\':!$ctrl.showPin(), \'pin-icon-on-mobile\': (($ctrl.isOverlayFullView || $ctrl.isFullViweState()) && $ctrl.mediaQueries.xs)}" ng-disabled="::$ctrl.isFavoritesDisabled()" class="md-icon-button custom-button pin-button" aria-label="{{::(\'nui.aria.favorites.pin\' | translate:\'{index: \\\'\'+$ctrl.index +\'\\\'}\')}}" ng-click="$event.stopPropagation(); $event.preventDefault(); $ctrl.updateFavorites($event);"><md-tooltip md-delay="400"><span translate="{{\'nui.favorites.add.tooltip\' | translate:\'{index: \\\'\'+$ctrl.index +\'\\\'}\'}}"></span></md-tooltip><prm-icon [icon-type]="::$ctrl.actionsIcons.pin.type" [svg-icon-set]="::$ctrl.actionsIcons.pin.iconSet" [icon-definition]="::$ctrl.actionsIcons.pin.icon"></prm-icon></md-button><md-button ng-if="$ctrl.showPin()" ng-class="{\'unpinned\':$ctrl.showPin(), \'pin-icon-on-mobile\': (($ctrl.isOverlayFullView || $ctrl.isFullViweState()) && $ctrl.mediaQueries.xs)}" class="md-icon-button custom-button unpin-button" aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}" ng-click="$event.stopPropagation();$event.preventDefault();$ctrl.updateFavorites($event);"><md-tooltip md-delay="400"><span translate="{{::(\'nui.favorites.remove.tooltip\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}"></span></md-tooltip><prm-icon [icon-type]="::$ctrl.actionsIcons.unPin.type" [svg-icon-set]="::$ctrl.actionsIcons.unPin.iconSet" [icon-definition]="::$ctrl.actionsIcons.unPin.icon"></prm-icon></md-button><div ng-init="messageAdded = (\'nui.aria.favorites.in\' | translate) ;messageRemoved = (\'nui.aria.favorites.out\' | translate)" class="accessible-only" aria-label="{{$ctrl.showPin() ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.showPin() ? messageAdded : messageRemoved}}</div></div><md-button ng-if="::($ctrl.isFavorites  && $ctrl.showBookmark())" class="md-icon-button custom-button prm-primary" aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+($ctrl.index)+\'\\\'}\')}}" ng-click="$event.stopPropagation();$event.preventDefault();$ctrl.unpinFavorites();"><md-tooltip md-delay="400" translate="nui.favorites.remove.tooltip"></md-tooltip><prm-icon [icon-type]="::$ctrl.actionsIcons.unPin.type" [svg-icon-set]="::$ctrl.actionsIcons.unPin.iconSet" [icon-definition]="::$ctrl.actionsIcons.unPin.icon"></prm-icon></md-button><prm-save-to-favorites-button-after parent-ctrl="$ctrl"></prm-save-to-favorites-button-after>');
$templateCache.put('components/favorites/savedQueries/savedQueries.html','<div><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true" [is-saved-query]="true"></prm-search-result-list></div><prm-saved-queries-after parent-ctrl="$ctrl"></prm-saved-queries-after>');
$templateCache.put('components/favorites/searchHistory/search-history.html','<div><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true" [is-saved-query]="true" [is-search-history]="true"></prm-search-result-list></div><prm-search-history-after parent-ctrl="$ctrl"></prm-search-history-after>');
$templateCache.put('components/delivery/almaViewer/almaViewer.html','<div ng-if="(!$ctrl.showLogo||$ctrl.showLogo==\'true\')&&!$ctrl.mode" layout="column" layout-fill class="header relative-position"><prm-topbar [links]="$ctrl.skipLinks"></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.deposit"></h1></div><div layout="row"><prm-representation-viewer ng-if="!$ctrl.denied && $ctrl.data" [data]="$ctrl.data" [mode]="$ctrl.mode" [allowdownload]="$ctrl.allowDownload" [copyrightsfilecontent]="$ctrl.copyRightsFileContent" [isobtrusivecopyrights]="$ctrl.isObtrusiveCopyrights" [hiderepeatedlabels]="$ctrl.hideRepeatedLabels" [res]="$ctrl.res" [social]="$ctrl.social" [requestid]="$ctrl.requestId" [filetype]="$ctrl.fileType" [remoteurl]="$ctrl.embedUrl" flex></prm-representation-viewer><prm-denied-access ng-if="$ctrl.denied && $ctrl.deniedNote" [deniednote]="$ctrl.deniedNote" flex></prm-denied-access></div><div ng-if="!$ctrl.mode" class="footer" hide-xs><span>&copy; <span translate="c.copyright"/></span> {{$ctrl.date| date:\'yyyy\'}}&nbsp;</div><prm-alma-viewer-after parent-ctrl="$ctrl"></prm-alma-viewer-after>');
$templateCache.put('components/delivery/copyrights/copyrights.html','<div flex="{{$ctrl.copyrightsFlexSize}}" flex-xs="10" class="copyrights-full-height copyright-content-panel" style="{{$ctrl.copyStyle}}"><div layout-align="center center" class="panel panel-primary copyrights-full-height primaryColorBorder" dir="ltr" layout="row"><div hide-xs class="icon-container" layout="column"><div class="Ellipse-2"><img src="img/copyrights.png" srcset="img/copyrights_2x.png 2x, img/copyrights_3x.png 3x" class="layer"></div></div><div flex="50" flex-xs="90" layout="column"><md-card-title><md-card-title-text><h1 hide-xs class="header" translate="repDeliveryViewer.copyrightStatement"></h1><h1 hide-gt-xs class="md-headline" translate="repDeliveryViewer.copyrightStatement"></h1></md-card-title-text></md-card-title><div class="nano"><div class="nano-content"><div class="panel-body panel-body-fix" id="main-file-body"><div class="copyrightContent" ng-bind-html="$ctrl.copyrightsfilecontent"></div></div></div></div><div class="text-center primaryColorBG closeCopyrightsLink"><md-button class="close-copyrights" (click)="$ctrl.hideCopyrights()"><span translate="repDeliveryViewer.closeCopyrights"/></md-button></div></div><div hide-xs flex="30" flex-gt-md="30"></div></div></div><prm-copyrights-after parent-ctrl="$ctrl"></prm-copyrights-after>');
$templateCache.put('components/delivery/deniedAccess/deniedAccess.html','<md-toolbar><div layout="column" layout-align="space-between end"><h1 class="full-width header" translate="repDeliveryViewer.accessRights"></h1><h1 class="full-width denied-note" translate="repDeliveryViewer.repCannotView"></h1><div class="full-width"><div class="Ellipse-2"><img src="img/lock.jpg" srcset="img/lock_2x.jpg 2x, img/lock_3x.jpg 3x" class="lock"></div></div><div class="full-width denied-note" ng-bind-html="$ctrl.deniednote"></div></div></md-toolbar><prm-denied-access-after parent-ctrl="$ctrl"></prm-denied-access-after>');
$templateCache.put('components/delivery/hlsViewer/hlsViewer.html','<div><video class="video-to-play video-js vjs-default-skin" preload="metadata" controls data-setup=\'{ "aspectRatio":"640:267", "playbackRates": [1, 1.5, 2,2.5,3] }\' vjs-video></video></div><hls-video-after parent-ctrl="$ctrl"></hls-video-after>');
$templateCache.put('components/delivery/representationViewer/representationViewer.html','<md-toolbar ng-if="((!$ctrl.embed||$ctrl.embed==\'false\')&&!$ctrl.isScreenSizeXs&&!$ctrl.quickAccess)" class="default-toolbar zero-padding" ng-class="{\'quickAccess\':$ctrl.quickAccess}"><div layout="row" layout-align="space-between end" class="md-toolbar-tools zero-padding"><div flex="90" flex-gt-md="90"><h1 class="toolbar-title"><span class="ng-scope">{{::$ctrl.representationTitle}}</span></h1></div><md-button ng-if="$ctrl.copyrightsfilecontent" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link share-viewer" (click)="$ctrl.showCopyrights()" aria-label="show copyrights button"><prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_copyrights_24px"></prm-icon></md-button><prm-social-menu [socialmap]="::$ctrl.socialMap" [pid]="::$ctrl.data.id" [fileid]="$ctrl.files[$ctrl.index.index].fileId" class="share-viewer"></prm-social-menu></div></md-toolbar><md-toolbar ng-if="::$ctrl.isScreenSizeXs" class="default-toolbar"><div layout="row" layout-align="space-between end" class="md-toolbar-tools"><md-button id="thumbnails-button" ng-if="::$ctrl.files.length>1" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" (click)="$ctrl.showThumbnails()" aria-label="show thumbnails button"><prm-icon class="inactive-button" icon-type="svg" svg-icon-set="file" icon-definition="ic_folder_mobile_24px"></prm-icon><prm-icon class="active-button" icon-type="svg" svg-icon-set="file" icon-definition="ic_folder_mobile_active_24px"></prm-icon></md-button><md-button id="main-file-button" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" (click)="$ctrl.showMainFile()" aria-label="show main file button"><prm-icon class="inactive-button" icon-type="svg" svg-icon-set="image" icon-definition="ic_image_mobile_24px"></prm-icon><prm-icon class="active-button" icon-type="svg" svg-icon-set="image" icon-definition="ic_image_mobile_active_24px"></prm-icon></md-button><md-button id="metedata-button" ng-if="::!$ctrl.embed" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" (click)="$ctrl.showMetadata()" aria-label="show metadata button"><prm-icon class="inactive-button" icon-type="svg" svg-icon-set="action" icon-definition="ic_info_mobile_24px"></prm-icon><prm-icon class="active-button" icon-type="svg" svg-icon-set="action" icon-definition="ic_info_mobile_active_24px"></prm-icon></md-button><md-button id="copyrights-button" ng-if="::$ctrl.copyrightsfilecontent" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" (click)="$ctrl.showCopyrights()" aria-label="show copyrights button"><prm-icon class="inactive-button" icon-type="svg" svg-icon-set="action" icon-definition="ic_copyrights_mobile_24px"></prm-icon><prm-icon class="active-button" icon-type="svg" svg-icon-set="action" icon-definition="ic_copyrights_mobile_active_24px"></prm-icon></md-button></div></md-toolbar><div layout="row" layout-align="space-between end"><md-content style="overflow: hidden;" layout-xs="column" layout="row" class="main-content"><div flex="5" flex-gt-md="5"></div><div ng-if="$ctrl.isShowThumbnailList&&$ctrl.files.length>1&&!$ctrl.quickAccess" flex="10" flex-xl="10" flex-xs="100" layout="column" id="thumbnail-list" class="thumbnail-list" style="{{$ctrl.mainFileStyle}}"><prm-thumbnail-list [files]="::$ctrl.files" [links]="::$ctrl.links" [delay]="::$ctrl.delay" [index]="$ctrl.index" flex></prm-thumbnail-list></div><prm-copyrights flex="{{$ctrl.copyrightsFlexSize}}" flex-xs="100" layout="column" ng-if="$ctrl.copyrightsfilecontent&&$ctrl.isShowCopyrights" [copyrightsfilecontent]="::$ctrl.copyrightsfilecontent" [embed]="::$ctrl.embed" class="copyrights-full-height"></prm-copyrights><div ng-if="$ctrl.isShowMainFile" flex="{{$ctrl.mainFileflexSize}}" flex-xs="100" layout="column" id="main-file" class="main-file" style="{{$ctrl.mainFileStyle}}"><div class="default-card" dir="ltr"><div class="main-file-container" layout="row"><div flex="10" flex-xs="0" style="/*position: relative;*/"><a ng-if="::$ctrl.files.length>1" ng-disabled="$ctrl.index.index==0" id="prev" class="prev-button md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" role="button" style="line-height: 48px;" (click)="$ctrl.prevFile()" href="#"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left-big"></prm-icon></a></div><div ng-if="$ctrl.files[$ctrl.index.index].fileType==\'IMAGE\'" id="myModal" class="modal"><span class="close cursor" (click)="$ctrl.closeModal()">&times;</span><div class="modal-content"><img src="{{$ctrl.files[$ctrl.index.index].url}}" style="width:100%"></div></div><div flex="80" flex-xs="100" layout="column" id="file-container"><div layout="row" layout-align="space-between end" class="head-row"><h3 class="md-headline" dir="auto" style="text-align:left; margin-left:15px;line-height:normal" title="{{$ctrl.files[$ctrl.index.index].fileLabel}}">{{$ctrl.files[$ctrl.index.index].fileMidLabel}}</h3><div id="buttons" layout style="text-align: right;"><md-button ng-if="$ctrl.allowdownload && !$ctrl.isScreenSizeXs && $ctrl.files[$ctrl.index.index].isAccessRightsOk && $ctrl.files[$ctrl.index.index].fileType!=\'HLS\'" id="downloadButton" role="button" (click)="$ctrl.downloadAnalitics()" href="{{$ctrl.files[$ctrl.index.index].downloadUrl}}" title="{{$ctrl.files[$ctrl.index.index].fileLabel}} ({{$ctrl.files[$ctrl.index.index].fileSize}})" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link share-viewer file-button"><prm-icon icon-type="svg" svg-icon-set="file" icon-definition="ic_download_24px"/></md-button><md-button ng-if="::$ctrl.quickAccess" role="button" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" (click)="$ctrl.openInNewWindow($ctrl.files[$ctrl.index.index].fileId)" aria-label="open window button"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon></md-button><md-button ng-if="$ctrl.files[$ctrl.index.index].fileType==\'IMAGE\'  && $ctrl.files[$ctrl.index.index].isAccessRightsOk&&!$ctrl.quickAccess" class="downloadButton md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link share-viewer file-button" role="button" (click)="$ctrl.openModal()"><prm-icon icon-type="svg" svg-icon-set="maps" icon-definition="ic_zoom_out_map_24px"/></md-button></div></div><div ng-if="$ctrl.files[$ctrl.index.index].fileType!=\'PDF\'" layout="column" layout-align="center center" style="height:100%"><object ng-if="::$ctrl.filetype ==\'EMBED\'" class="show-main-file pdf-container shadow" width="100%" height="100%" data="{{::$ctrl.remoteurl}}" data-remote="{{::$ctrl.remoteurl}}"><embed width="100%" height="100%" src="{{::$ctrl.remoteurl}}"/></object><div ng-repeat="file in ::$ctrl.files" ng-if="$ctrl.allowdownload && file.fileType==\'IMAGE\' && $index==$ctrl.index.index && file.isAccessRightsOk" class="show-main-file" layout-align="center center" layout-padding id="{{::file.fileId}}" data-size="1208x755" data-med-size="1208x755"><img src="{{::file.url}}" id="objId" class="shadow" style="max-height:600px;"></div><div ng-repeat="file in ::$ctrl.files" oncontextmenu="return false;" ng-if="!$ctrl.allowdownload && file.fileType==\'IMAGE\' && $index==$ctrl.index.index" layout-align="center center" layout-padding id="{{::file.fileId}}" data-size="1208x755" data-med-size="1208x755" class="show-main-file img-container"><img src="{{::file.url}}" class="shadow" style="max-height:600px;" id="objId"></div><audio ng-repeat="file in ::$ctrl.files" ng-if="$ctrl.allowdownload  && file.isAccessRightsOk &&  file.fileType==\'AUDIO\' && $index==$ctrl.index.index" id="{{file.fileId}}" name="AUDIO" width="100%" src="{{file.url}}" type="{{file.contentType}}" height="100%" class="show-main-file audio-container" data-remote="{{file.url}}" controls></audio><audio ng-repeat="file in ::$ctrl.files" oncontextmenu="return false;" ng-if="!$ctrl.allowdownload &&  file.fileType==\'AUDIO\' && $index==$ctrl.index.index" id="{{file.fileId}}" name="AUDIO" src="{{file.url}}" type="{{file.contentType}}" height="100%" class="show-main-file audio-container" data-remote="{{file.url}}" controls controlsList="nodownload"></audio><div class="vjs-video-wrap" ng-repeat="file in ::$ctrl.files" ng-if="$ctrl.allowdownload  && file.isAccessRightsOk &&  file.fileType==\'VIDEO\' && $index==$ctrl.index.index" layout-align="center center"><video data-video-id="{{file.fileId}}" name="VIDEO" class="video-js vjs-default-skin show-main-file pdf-container shadow" src="{{file.url}}" type="{{file.contentType}}" width="100%" height="100%" controls data-setup=\'{ "aspectRatio":"440:267", "playbackRates": [1, 1.5, 2, 2.5, 3] }\' vjs-video></video></div><div class="vjs-video-wrap" ng-repeat="file in ::$ctrl.files" ng-if="!$ctrl.allowdownload &&  file.fileType==\'VIDEO\' && $index==$ctrl.index.index" layout-align="center center"><video oncontextmenu="return false;" data-video-id="{{file.fileId}}" name="VIDEO" class="video-js vjs-default-skin show-main-file pdf-container shadow" src="{{file.url}}" type="{{file.contentType}}" width="100%" height="100%" controls controls controlsList="nodownload" data-setup=\'{ "aspectRatio":"440:267", "playbackRates": [1, 1.5, 2, 2.5, 3] }\' vjs-video></video></div><div ng-repeat="file in ::$ctrl.files" id="xml_{{$index}}" ng-if="file.contentType==\'application/xml\' && $index==$ctrl.index.index && $ctrl.xmlflage && file.isAccessRightsOk" class="show-main-file xml-container shadow"><pre style="padding: 0px;\n    font-size: inherit;\n    text-align: left;\n    background-color: #fff;\n    border: none;\n    overflow: auto;\n    /* width: 100%; */\n    position: relative;\n    max-height: 600px;\n    height: 100%;\n    margin:0;\n    \n    /* overflow: scroll; */">\n{{$ctrl.getXmlContent($index,file.url)}}\n\t\t{{$ctrl.xmlData}}\n\t</pre></div><prm-spinner class="inline-loader dark-on-light" ng-if="($ctrl.files[$ctrl.index.index].extension == \'docx\'|| $ctrl.files[$ctrl.index.index].extension == \'doc\')&&$ctrl.isOnLoad && $ctrl.files[$ctrl.index.index].isAccessRightsOk"></prm-spinner><div id="docdiv_{{$index}}" ng-repeat="file in ::$ctrl.files" class="show-main-file pdf-container shadow" ng-if="(file.extension == \'docx\'|| file.extension == \'doc\') &&   $index==$ctrl.index.index && file.isAccessRightsOk" style="background-color: #fff;">{{$ctrl.getDocContent($index)}}</div><hls-video ng-repeat="file in ::$ctrl.files" ng-if="file.fileType==\'HLS\'  &&file.contentType!=\'application/xml\' && $index==$ctrl.index.index && file.isAccessRightsOk" width="100%" height="100%" streaming-src="{{file.url}}" controls="" class="show-main-file img-container shadow"></hls-video><div ng-repeat="file in ::$ctrl.files" oncontextmenu="return false;" ng-if=" file.isAccessRightsOk && file.fileType!=\'HLS\'&&file.fileType!=\'VIDEO\'&&file.fileType!=\'AUDIO\'&&file.fileType!=\'IMAGE\'&&file.fileType!=\'PDF\' && file.fileType!=\'ESPLORO_LINK\' && file.extension != \'docx\'&& file.extension != \'doc\'&& file.extension != \'xml\' && $index==$ctrl.index.index" layout-align="center center" layout-padding layout-margin layout="column" id="{{file.fileId}}" data-size="1208x755" data-med-size="1208x755" class="show-main-file"><img src="{{file.thumbnail_url}}" id="objId" title="{{file.fileLabel}}"> <a ng-if="$ctrl.allowdownload" href="{{file.downloadUrl}}" download="{{file.fileLabel}}"><span ng-if="$ctrl.allowdownload" translate="repDeliveryViewer.download"></span> ({{file.fileLabel}}.{{file.extension}}, {{file.fileSize}})</a> <span ng-if="!$ctrl.allowdownload">({{file.fileLabel}}.{{file.extension}}, {{file.fileSize}})</span></div><object ng-repeat="linkEsploro in ::$ctrl.files" ng-if="$ctrl.files[$ctrl.index.index].fileType==\'ESPLORO_LINK\' && $index==$ctrl.index.index" class="show-main-file pdf-container" width="100%" height="100%" data="{{$ctrl.files[$ctrl.index.index].url}}" data-remote="{{$ctrl.files[$ctrl.index.index].url}}"><embed width="100%" height="100%" src="{{$ctrl.files[$ctrl.index.index].url}}"/></object><prm-denied-access ng-if="!$ctrl.files[$ctrl.index.index].isAccessRightsOk && !$ctrl.remoteurl" [deniednote]="$ctrl.files[$ctrl.index.index].deniedMessage" width="100%" height="100%" class="img-container"></prm-denied-access></div><div ng-if="$ctrl.files[$ctrl.index.index].fileType==\'PDF\' && $ctrl.isOnLoad && $ctrl.files[$ctrl.index.index].isAccessRightsOk && $ctrl.files[$ctrl.index.index].requiresPDFCoverPage" layout="column" layout-align="center center" style="height: 100%;" class="layout-align-center-center layout-column"><prm-spinner class="inline-loader dark-on-light" ng-if="$ctrl.files[$ctrl.index.index].fileType==\'PDF\' && $ctrl.isOnLoad && $ctrl.files[$ctrl.index.index].isAccessRightsOk && $ctrl.files[$ctrl.index.index].requiresPDFCoverPage"></prm-spinner></div><div id="pdfdiv_{{$index}}" ng-repeat="file in ::$ctrl.files" class="show-main-file pdf-container shadow" ng-if="file.fileType==\'PDF\' && $index==$ctrl.index.index && file.isAccessRightsOk && file.requiresPDFCoverPage" style="background-color: #fff;">{{$ctrl.getPDFWithCoverPageContent($index)}}</div><div ng-repeat="file in ::$ctrl.files" ng-if="$ctrl.allowdownload  && file.isAccessRightsOk && file.fileType==\'PDF\' && !file.requiresPDFCoverPage && $index==$ctrl.index.index" class="pdfjs pdf-container shadow"><object id="{{file.fileId}}" type="text/html" class="show-main-file hidden-xs hidden-sm" width="100%" height="100%" data="{{file.url}}" data-remote="{{file.url}}"><embed width="100%" height="100%" type="application/pdf" src="{{file.url}}"/></object></div><prm-denied-access ng-if="!$ctrl.files[$ctrl.index.index].isAccessRightsOk && !$ctrl.remoteurl && $ctrl.files[$ctrl.index.index].fileType==\'PDF\'" [deniednote]="$ctrl.files[$ctrl.index.index].deniedMessage" width="100%" height="100%" class="img-container"></prm-denied-access><pdfjs-viewer ng-repeat="file in ::$ctrl.files" ng-if="!$ctrl.allowdownload && $index==$ctrl.index.index && file.fileType==\'PDF\' && $ctrl.delay.delay" download="false" print="false" class="pdfjs" src="{{file.url}}"></pdfjs-viewer></div><div flex="10" flex-xs="0" style="/*position: relative;*/"><a ng-if="::$ctrl.files.length>1" ng-disabled="$ctrl.index.index==($ctrl.files.length-1)" id="next" class="next-button md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link" role="button" style="line-height: 48px;" ng-click="$ctrl.nextFile()" href="#"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right-big"></prm-icon></a></div></div></div></div><md-toolbar ng-if="$ctrl.isShowMainFile" hide-gt-xs class="default-toolbar main-page showIfXs"><div layout="row" layout-align="space-between center" class="md-toolbar-tools zero-padding mobile-foot-toolbar"><md-button ng-if="$ctrl.allowdownload && $ctrl.files[$ctrl.index.index].isAccessRightsOk && $ctrl.files[$ctrl.index.index].fileType!=\'HLS\'" id="downloadButton" role="button" href="{{$ctrl.files[$ctrl.index.index].downloadUrl}}" title="{{$ctrl.files[$ctrl.index.index].fileLabel}} ({{$ctrl.files[$ctrl.index.index].fileSize}})" class="downloadButton button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link xs-footer-button"><span translate="repDeliveryViewer.download"></span><prm-icon icon-type="svg" svg-icon-set="file" icon-definition="ic_download_24px"/></md-button><prm-social-menu [socialmap]="::$ctrl.socialMap" [pid]="::$ctrl.data.id" [fileid]="$ctrl.files[$ctrl.index.index].fileId" class="downloadButton button-over-dark md-button md-primoExplore-theme md-ink-ripple button-with-icon button-link xs-footer-button"></prm-social-menu></div></md-toolbar><div ng-if="!$ctrl.quickAccess&&!$ctrl.embed&&$ctrl.isShowMetadata" flex="20" flex-xs="100" layout="column" class="metadata-list"><md-card class="default-card" dir="auto" ng-class="{\'expanded\':$ctrl.metadataIsExpanded&&$ctrl.fulltextIsExpanded&&$ctrl.files[$ctrl.index.index].fulltext.url,\'collapsed-card\':$ctrl.files[$ctrl.index.index].fulltext.url}"><div layout="row" layout-align="space-between-end"><h2><span class="md-headline" translate="repDeliveryViewer.descriptiveInformation"/></h2><md-button ng-if="$ctrl.files[$ctrl.index.index].fulltext.url" (click)="$ctrl.metadataIsExpanded = !$ctrl.metadataIsExpanded" class="md-icon-button expansion"><prm-icon ng-class="{\'rotate-180\':!$ctrl.metadataIsExpanded}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button></div><md-list ng-if="$ctrl.metadataIsExpanded||!$ctrl.files[$ctrl.index.index].fulltext.url" class="primo-scrollbar" style="overflow-y: auto;" layout="column"><md-list-item ng-if="::!$ctrl.details" ng-repeat="item in ::$ctrl.metadata" layout="column" layout-xs="column" class="metadata-information"><br ng-if="$index>0&&!item.isHideLabel"><div layout="row" ng-if="::!item.isHideLabel"><span class="bold-text" class="bold-text" data-details-label="{{item.label}}" translate="fulldisplay.{{item.label}}" translate-attr-title="fulldisplay.{{item.label}}"></span> <span>:</span></div><div layout="row"><div class="item-details-element" ng-bind-html="item.value"></div></div></md-list-item><md-list-item ng-if="::$ctrl.details" ng-repeat="detail in ::$ctrl.details" layout="column" layout-xs="column" class="metadata-information"><div layout="row"><span class="bold-text" data-details-label="{{detail.label}}" translate="fulldisplay.{{detail.label}}" translate-attr-title="fulldisplay.{{detail.label}}"></span> <span>:</span></div><div ng-repeat="value in detail.values[0].values" layout="row"><div class="item-details-element" ng-bind-html="$ctrl.getTextFromVal(value)"></div><span ng-show="!$last">{{detail.values[0].delimiter}}</span></div><br></md-list-item></md-list></md-card><md-card ng-repeat="file in $ctrl.files" ng-if="$index==$ctrl.index.index&&$ctrl.files[$ctrl.index.index].fulltext.url" class="default-card fulltext-card collapsed-card primo-scrollbar" style="overflow-y:scroll;overflow-x:hidden;" dir="auto"><div layout="row" layout-align="space-between-end" style="position:sticky; top:0; z-index:1; background:inherit;"><h2><span class="md-headline" translate="repDeliveryViewer.fulltext"/></h2><md-button (click)="$ctrl.fulltextIsExpanded = !$ctrl.fulltextIsExpanded" class="md-icon-button expansion"><prm-icon ng-class="{\'rotate-180\':!$ctrl.fulltextIsExpanded}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button></div><div ng-if="$ctrl.fulltextIsExpanded"><div id="fulltext-object_{{$index}}" class="show-main-file fulltext" type="text/html">{{$ctrl.getFulltext($ctrl.index.index)}} {{$ctrl.textData}}</div></div></md-card></div><div flex="5" flex-gt-md="5"/></md-content></div><prm-representation-viewer-after parent-ctrl="$ctrl"></prm-representation-viewer-after>');
$templateCache.put('components/delivery/thumbnailList/thumbnailList.html','<md-card style="max-height: calc(100% - 8px);" class="default-card" dir="auto"><div id="collapseDiv"><h2 id="collapseTitle" class="collapse-title-opened"><span class="md-headline" translate="repDeliveryViewer.allFileTypes"/></h2><md-button hide-xs id="collapseButton" class="button-with-icon button-link share-viewer collapse-button-opened" (click)="$ctrl.collapse()" aria-label="collapse"><prm-icon icon-type="svg" svg-icon-set="hardware" icon-definition="ic_chevrons_left_24px"/></md-button></div><md-list id="listItem" class="separate-list-items gapped-list primo-scrollbar"><md-list-item class="md-2-line" ng-repeat="file in $ctrl.files" flex flex-xs="100"><div id="thumbnail-{{$index}}" class="md-list-item-text" ng-class="{\'selected-object\':$index==$ctrl.index.index}"><div class="fulltext-icon"><prm-icon ng-if="$ctrl.hasFulltext({file})" icon-type="svg" svg-icon-set="file" icon-definition="ic_fulltext_24px"></prm-icon></div><a ng-click="$ctrl.fileClick({$index})" layout-xs="row" flex flex-xs="100" href="#"><img class="thumbnail-img" alt="" title="{{file.fileLabel}}.{{file.extension}} ({{file.fileSize}})" src="{{file.thumbnail_url}}"/><p title="{{file.fileLabel}}">{{file.fileShortLabel}}</p></a></div></md-list-item></md-list></md-card><prm-thumbnail-list-after parent-ctrl="$ctrl"></prm-thumbnail-list-after>');
$templateCache.put('components/delivery/socialMenu/socialMenu.html','<md-menu ng-if="$ctrl.socialmap[0]&&!$ctrl.isScreenSizeXs" md-offset="0 60" md-position-mode="target-right target" class="button-with-icon"><md-button id="social-menu-button" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-link" ng-click="$mdOpenMenu($event)" aria-label="share representation button"><prm-icon icon-type="svg" svg-icon-set="social" icon-definition="ic_share_24px"></prm-icon></md-button><md-menu-content id="share-menu" width="3" class="prm-user-menu-content"><md-checkbox name="shareDisplayedFile" ng-true-value="true" ng-model="$ctrl.shareDisplayedFile" style="margin-top: 5px;   margin-left: 15px;  padding: 5px;"><span translate="repDeliveryViewer.shareFile"></span></md-checkbox><md-menu-item ng-repeat="item in $ctrl.socialmap"><md-button ng-if="item.key!=\'copyurl\'" ng-click="$ctrl.shareAnalitics()" socialshare-url="{{$ctrl.url}}" socialshare-body="{{$ctrl.url}}" socialshare socialshare-provider="{{item.key}}"><prm-icon icon-type="svg" svg-icon-set="social" icon-definition="ic_{{item.key}}_24px"></prm-icon>{{item.value}}</md-button><md-button ng-if="item.key==\'copyurl\'" (click)="$ctrl.copyRepresentationLink()"><prm-icon icon-type="svg" svg-icon-set="file" icon-definition="ic_copy_24px"></prm-icon>{{item.value}}</md-button></md-menu-item></md-menu-content></md-menu><md-menu ng-if="$ctrl.socialmap[0]&&$ctrl.isScreenSizeXs" md-offset="0 60" md-position-mode="target-right target" class="button-with-icon"><md-button id="social-menu-button" class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple button-link" ng-click="$mdOpenMenu($event);$ctrl.openShareMenu()" aria-label="share representation button"><span ng-if="$ctrl.isScreenSizeXs" translate="repDeliveryViewer.share"></span><prm-icon icon-type="svg" svg-icon-set="social" icon-definition="ic_share_24px"></prm-icon></md-button><md-menu-content flex-xs="100" layout-align="space-between end" id="share-menu" width="3" class="prm-user-menu-content social-menu" style="flex-direction: column; position: absolute;background-color:#4d6b82; opacity: 0.9;\n    bottom: 0px;"><md-checkbox name="shareDisplayedFile" style="color:#f3f3f3; align-self: flex-start; margin: 5px;" ng-true-value="true" ng-model="$ctrl.shareDisplayedFile"><span translate="repDeliveryViewer.shareFile"></span></md-checkbox><div layout="row" style="height:100px;  overflow-x:scroll;   overflow-y:hidden; width:-webkit-fill-available;  \n    max-width: 100%;"><md-menu-item ng-repeat="item in $ctrl.socialmap"><md-button ng-click="$ctrl.shareAnalitics()" style="height:90px; padding-top:5px; background-color:transparent;align-items:center;" layout-xs="column" ng-if="item.key!=\'copyurl\'" socialshare-url="{{$ctrl.url}}" socialshare-body="{{$ctrl.url}}" socialshare socialshare-provider="{{item.key}}"><prm-icon id="share_{{item.key}}" style="color:#f3f3f3;\n    padding-left: 8px;" icon-type="svg" svg-icon-set="social" icon-definition="ic_{{item.key}}_24px"></prm-icon><span style="color:#f3f3f3">{{item.value}}<span></span></span></md-button><md-button layout-xs="column" style="height:90px;padding-top:5px" ng-if="item.key==\'copyurl\'" (click)="$ctrl.copyRepresentationLink()"><prm-icon id="share_copyurl" style="color:#f3f3f3; \n    padding-left: 8px;" icon-type="svg" svg-icon-set="file" icon-definition="ic_copy_24px"></prm-icon><span style="color:#f3f3f3">{{item.value}}</span></md-button></md-menu-item></div></md-menu-content></md-menu><prm-social-menu-after parent-ctrl="$ctrl"></prm-social-menu-after>');
$templateCache.put('components/newspapers/newspapersFacet/newspapers-facet.html','<md-button (click)="$ctrl.goToNewspapers()" class="button-as-link zero-margin arrow-link-button"><md-tooltip><span translate="facets.facet.facet_rtype_newspapers.tooltip" md-delay="400"></span></md-tooltip><span translate="facets.facet.facet_rtype_newspapers" class="bold-text"></span><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></md-button><prm-newspapers-facet-after parent-ctrl="$ctrl"></prm-newspapers-facet-after>');
$templateCache.put('components/newspapers/newspapersFullView/newspapers-full-view.html','<prm-full-view-page></prm-full-view-page><prm-newspapers-full-view-after parent-ctrl="$ctrl"></prm-newspapers-full-view-after>');
$templateCache.put('components/newspapers/newspapersSearchBar/newspapers-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div layout="column" flex><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.onSubmit()" class="layout-full-width"><div class="classic-input" layout="row" layout-fill><div class="search-scope" layout="column" layout-align="center start"><div layout="row" layout-align="center center" class="center-drop-down"><md-input-container ng-if="::$ctrl.displayFeaturedNespapersDropDown()" layout="row" class="zero-margin zero-padding" layout-align="start center"><md-select ng-model="$ctrl.scope"><md-option ng-repeat="scope in ::$ctrl.scopes" ng-value="scope"><span translate="nui.newspapers.searchbox.{{scope}}"></span></md-option></md-select></md-input-container><span ng-if="::!$ctrl.displayFeaturedNespapersDropDown()" class="static-text bold-text" layout="column" layout-align="center start" style="font-size: .8em;\r\n                            text-transform: uppercase;letter-spacing: 0.03em"><span translate="nui.newspapers.searchbox.title" class="bold-text"></span></span></div></div><md-input-container flex md-no-float><input id="searchBar" ng-model="$ctrl.mainSearchField" placeholder="{{\'nui.newspapers.searchbox.help\' | translate}}" autocomplete="off"></md-input-container><button type="button" tabindex="0" ng-if="$ctrl.mainSearchField" ng-click="$ctrl.clear()" class="md-button md-icon-button" style="top: 0; bottom: 0; margin: auto"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon><span class="_md-visually-hidden">Clear</span></button><div class="search-options" layout="row" layout-align="start center"><md-divider ng-if="$ctrl.showFeaturedOptions" class="skewed-divider"></md-divider><md-input-container ng-if="$ctrl.showFeaturedOptions" class="zero-margin" layout="row" layout-align="start center"><md-select ng-model="$ctrl.featuredScope"><md-option ng-repeat="scope in ::$ctrl.featuredScopes" ng-value="scope"><span>{{ \'nui.newspapers_search.featured.\'+ scope | translate}}</span></md-option></md-select></md-input-container></div><md-button class="submit-button button-confirm" aria-label="Search" (click)="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></form></div></div><div flex="0" flex-md="25" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-newspapers-search-bar-after parent-ctrl="$ctrl"></prm-newspapers-search-bar-after>');
$templateCache.put('components/newspapers/newspapersSpotlight/newspapers-spotlight.html','<div class="spotlight-element margin-top-small" layout="row" tabindex="0"><div class="spotlight-image"><img ng-src="{{::$ctrl.thumbnail}}" alt=""></div><div class="spotlight-body"><h3 class="spotlight-title"><a (click)="$ctrl.goToNewspapers()" class="arrow-link bold-text" tabindex="0" href=""><span translate="nui.newspapers.title"></span><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></h3><p translate="nui.newspapers.description"></p></div></div><prm-newspapers-spotlight-after parent-ctrl="$ctrl"></prm-newspapers-spotlight-after>');
$templateCache.put('components/newspapers/searchResultTitle/search-result-title.html','<md-toolbar class="default-toolbar zero-padding"><div layout="row"><div flex="0" flex-md="0" flex-lg="10" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20"></div><div flex class="padding-large" ng-class="{ \'padding-top-zero\': vm.state.showBackButton }"><h2>{{\'nui.newspapers_search.featured.\' + $ctrl.featuredTitle | translate}}</h2><p ng-if="$ctrl.featuredDescription">{{\'nui.newspapers_search.featured.\' + $ctrl.featuredDescription | translate}}</p></div><div flex="0" flex-md="20" flex-lg="25" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="30"></div></div></md-toolbar><prm-search-result-title-after parent-ctrl="$ctrl"></prm-search-result-title-after>');
$templateCache.put('components/journals/alphabetToolbar/alphabet-toolbar.html','<div layout="row" class="padding-medium layout-xs-column layout-align-center-center layout-row" layout-xs="column" layout-align="center center" flex><div ng-if="$ctrl.listLanguages.length > 1" class="language-selector"><md-input-container layout="column" style="padding-bottom: 8px;" class="md-input-has-value"><label for="select_15" class="language-selector"><span>Languages</span></label><md-select id="select_15" ng-model="$ctrl.AtoZSelectedLang" ng-change="$ctrl.AtoZLanguageDisplay()" class="ng-pristine ng-valid ng-empty ng-touched" tabindex="0" aria-disabled="false" role="listbox" aria-expanded="false" aria-multiselectable="false" aria-owns="select_container_16" aria-invalid="false"><md-option ng-repeat="langOption in ::$ctrl.listLanguages" value="{{::langOption.LanguageCode}}" class="md-text ng-binding"><span translate="{{\'nui.AZList.\'+langOption.LanguageCode}}">{{::langOption.Language}}</span></md-option></md-select></md-input-container></div><div layout-wrap class="language-characters layout-wrap layout-align-center-stretch layout-row layout-wrap" ng-class="{\'hebrew-characters\' : $ctrl.isHebrewLang()}"><md-button ng-href="#" ng-repeat="character in $ctrl.aToZList" (click)="$ctrl.sendSelected(character.lang+character.letter)" aria-label="{{$ctrl.getAraiaLabelForLetter(character.lang+character.letter)}}" ng-class="{\'active\' : $ctrl.activeLetter === (character.lang+character.letter), \'letter-button\' : character.type === \'alphabet\'}" translate="{{\'nui.AZ.\'+((character.lang)?character.langcode:\'en_US\')+\'.\'+character.letter}}"><md-tooltip md-delay="800" md-autohide="true"><span translate="{{::$ctrl.tooltipText}}" translate-values="{\'idx_0\' : $ctrl.getTranslatedLetter(character.letter)}"></span></md-tooltip></md-button></div></div><prm-alphabet-toolbar-after parent-ctrl="$ctrl"></prm-alphabet-toolbar-after>');
$templateCache.put('components/journals/databasesCategorize/databases-categorize.html','<div layout="row"><div ng-if="::($ctrl.isDBSearch && !$ctrl.isSearchDone())" flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><div style="width: 100%; min-width: 315px" class="databases-categories" tabindex="0" ng-class="{\'as-a-drawer\': $ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm, \'is-visible\': $ctrl.isMobileDBSlider}"><div class="sticking-wrapper" id="stickyDB"><div layout="row" layout-align="space-between center"><h2 translate="{{$ctrl.title}}"></h2><md-button class="md-icon-button close-categories-button zero-margin" ng-click="$ctrl.closeMobileDBSlider()" ng-if="$ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div><prm-tree-nav [item]="$ctrl.dbCategories" loading="!$ctrl.dbCategories" loader-message="Loading categories" ng-if="::$ctrl.dbCategories" (selected-category)="$ctrl.onSubmit($event)" [categories-type]="$ctrl.categoriesType"></prm-tree-nav></div></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div></div><prm-databases-categorize-after parent-ctrl="$ctrl"></prm-databases-categorize-after>');
$templateCache.put('components/journals/databasesCategorize/databases-results.html','<md-content class="padded-container" layout="row" layout-align="center start" flex><div flex layout="column"><div class="margin-bottom-small">{{vm.state.databasesResults.length}} databses found for <span class="bold-text">{{vm.state.selectedBranch}}</span></div><md-list class="prm-list prm-linkable-list-items prm-dense-list has-list-nav zero-padding" flex><md-list-item class="md-2-line md-long-text" ng-repeat="result in vm.state.databasesResults | orderBy: \'Title\'  | limitTo:vm.databasesResultsLimit" ng-click="null" href=""><div class="item-actions"><md-button class="md-icon-button add-to-favorites"><md-tooltip md-delay="400"><span>Save databases to favorites</span></md-tooltip><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon></md-button></div><div class="md-list-item-text" style="float: left"><h3 class="item-title bold-text"><span>{{result.name}}</span></h3><p>{{result.description}}</p></div></md-list-item></md-list><div layout="row" layout-align="center center"><md-button class="button-large button-confirm" ng-click="vm.loadMore()">Load more</md-button></div></div></md-content><prm-databases-results-after parent-ctrl="$ctrl"></prm-databases-results-after>');
$templateCache.put('components/journals/databasesCategorize/tree-nav.html','<md-list><md-list-item class="display-block" ng-repeat="item in ::$ctrl.bdcategoryitems" ng-class="::{\'toggled\': item.toggled, \'has-branches\': $ctrl.haveSubCategories(item)}" ng-style="::($ctrl.isBrowserIE() && {\'display\':\'block\'})" aria-live="assertive"><div class="inner"><md-button class="branch-arrow" layout="row" ng-if="::$ctrl.haveSubCategories(item)" ng-click="$ctrl.onArrowClick($event, item);$ctrl.categoryExpandBeacon();" aria-label="{{$ctrl.getAraiaLabelForCategory(item.name)}}"><prm-icon class="arrow" ng-class="{\'toggled\': item.open}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down"></prm-icon></md-button><md-button class="branch-name" ng-click="$ctrl.onBranchSelect(item)" layout="row" title="{{$ctrl.categoriesType == \'orgList\' ? \'\' : $ctrl.getAraiaLabelForCategory(item.name)}}" ng-class="::{\'is-selected\': item.selected}"><p>{{item.displayValue}}</p></md-button></div><prm-tree-nav (selected-category)="$ctrl.commitCategory($event)" [item]="item" [pathdelimiter]="$ctrl.pathdelimiter" [categories-type]="$ctrl.categoriesType" ng-if="$ctrl.openSubTree(item) "></prm-tree-nav></md-list-item></md-list><prm-tree-nav-after parent-ctrl="$ctrl"></prm-tree-nav-after>');
$templateCache.put('components/journals/orgListCategorize/orgList-categorize.html','<div layout="row"><div ng-if="::($ctrl.isOrgListSearch && !$ctrl.isSearchDone())" flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><div style="width: 340px; min-width: 315px" class="orgList-categories" tabindex="0" ng-class="{\'as-a-drawer\': $ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm, \'is-visible\': $ctrl.isMobileDBSlider}"><md-button class="md-icon-button close-categories-button" ng-click="$ctrl.closeMobileDBSlider()" ng-if="$ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button><div class="sticking-wrapper" id="stickyOrgList"><h2 translate="orglist.title"></h2><prm-tree-nav [item]="$ctrl.orgListCategories" [pathdelimiter]="$ctrl.orgListDelimiter" loading="!$ctrl.orgListCategories" loader-message="Loading categories" ng-if="::$ctrl.orgListCategories" (selected-category)="$ctrl.onSubmit($event)" [categories-type]="$ctrl.orgListType"></prm-tree-nav></div></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div></div><prm-orglist-categorize-after parent-ctrl="$ctrl"></prm-orglist-categorize-after>');
$templateCache.put('components/journals/organizationOrFacetToggle/organization-or-facet-toggle.html','<md-button class="button-as-link button-switch zero-margin" ng-click="$ctrl.changeToggle()" ng-class="$ctrl.isOrganizationTree ? \'toggled\' : \'link-alt-color\'" aria-label="{{($ctrl.isOrganizationTree ? \'nui.aria.organizationtree.icon.label.gotofacets\' : \'nui.aria.organizationtree.icon.label.gotoresearchunits\') | translate}}" hide-xs hide-sm><md-tooltip><span>{{$ctrl.getOrganizationTreeTooltip()}}</span></md-tooltip><md-switch ng-model="$ctrl.isOrganizationTree" tabindex="-1" md-no-ink class="tiny-switch zero-margin"><span class="bold-text">{{$ctrl.getOrganizationTreeLabel()}}</span></md-switch></md-button><prm-organization-or-facet-toggle-after parent-ctrl="$ctrl"></prm-organization-or-facet-toggle-after>');
$templateCache.put('components/journals/organizations/organizations.html','<prm-search></prm-search><prm-organizations-after parent-ctrl="$ctrl"></prm-organizations-after>');
$templateCache.put('components/infra/deposit/deposit-form.html','<form name="depositForm" class="padded-container"><md-dialog-content><div class="deposit-section"><div layout="column"><div class="light-text margin-bottom-medium" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.deposit.depositDetails"></span></h2></div><div class="italic-text"><span class="items-count" ng-bind-html="$ctrl.depositInfo.depositProfileInfo.depositProfileInstruction"></span></div></div><md-input-container class="underlined-input deposit-dialog-container" ng-class="{\'md-required\':true}" ng-hide="$ctrl.hasCustomizedForm()"><label translate="nui.deposit.title"></label> <input ng-required="true" name="depositTitle" ng-model="$ctrl.depositInfo.title" type="text" autocomplete="off"/><div ng-messages="depositForm.depositTitle.$error" class="help-block" ng-messages-multiple ng-if="depositForm.depositIAgree.$touched || depositForm.depositTitle.$touched"><div ng-message="required"><span translate="nui.deposit.validation.mandatoryTitle"></span></div></div></md-input-container><md-input-container class="underlined-input deposit-dialog-container" ng-hide="$ctrl.hasCustomizedForm()"><label translate="nui.deposit.abstract"></label> <textarea class="deposit-textarea" ng-model="$ctrl.depositInfo.abstract" columns="3"></textarea></md-input-container><div layout="column" layout-align="start"><prm-form-field ng-repeat="field in $ctrl.form" ng-if="field.uiType !== \'hidden\'" [field]="field" [data]="$ctrl.formData" [form]="::this.depositForm" class="underlined-input deposit-dialog-container"></prm-form-field></div><div layout="row" layout-align="start center" ng-show="$ctrl.depositInfo.depositProfileInfo.accessrightslist !== undefined && $ctrl.depositInfo.depositProfileInfo.accessrightslist.length > 1"><md-input-container class="underlined-input" layout="row"><label><span translate="nui.deposit.accessRights"></span></label><md-select ng-model="$ctrl.depositInfo.accessrightsid"><md-option ng-repeat="x in ::$ctrl.depositInfo.depositProfileInfo.accessrightslist" value="{{x.accessrightsid}}">{{x.accessrightsname}}</md-option></md-select></md-input-container></div><prm-upload-file upload-to-amazon="true" [amazoninfo]="::$ctrl.depositInfo.amazonInfo" [depositfiles]="::$ctrl.depositInfo.depositFiles" [depositprofile]="::$ctrl.depositInfo.depositProfileInfo" allow-delete="!item.id" use-cached-files="true" source="addItem" on-upload="fileFunction(file)" on-grobid="grobid(grobidResponse)" on-remove="removeFileFunction()" reset="resetFileUpload" id="uploadItem"></prm-upload-file><div class="mandatory-files-error" ng-if="$ctrl.errorMessages.length > 0"><span translate="nui.deposit.validation.mandatoryFiles"></span></div><div class="mandatory-files-error" ng-if="$ctrl.isExceededMaxNoOfFiles()"><span translate="nui.deposit.maxNoOfFilesExceeded" translate-values="::$ctrl.getMaxDepositFilesCountPlaceHolder()"></span></div><div class="mandatory-files-error" ng-if="$ctrl.isExceededMaxFileSize()"><span translate="nui.deposit.maxFileSizeExceeded" translate-values="::$ctrl.getMaxDepositFilesSizePlaceHolder()"></span></div><div class="mandatory-files-error" ng-if="$ctrl.isNotAllowedFileExtension()"><span translate="nui.deposit.fileExtensionAllowed" translate-values="::$ctrl.getAllowFileExtensionsPlaceHolder()"></span></div><md-list layout="column" ng-show="mode != \'hover\' && $ctrl.depositInfo.depositFiles" class="separate-list-items"><md-list-item ng-repeat="file in $ctrl.depositInfo.depositFiles track by $index" class="md-3-line in-element-dialog-parent"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text uploaded-file-list" layout="row" layout-wrap flex><div flex flex-xs="100"><div layout="row" class="uploaded-filename" ng-if="file.isUploaded"><span>{{file.fileName}}</span></div><div layout="row" class="uploaded-filename" ng-if="!file.isUploaded"><span style="color: red;"><i><prm-icon icon-type="svg" title=" {{\'nui.deposit.uploadFailed\' | translate}}" svg-icon-set="alert" icon-definition="ic_error_24px"/>&nbsp;</i>{{file.fileName}}</span></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" ng-show="file.isUploaded"><md-input-container class="underlined-input uploaded-file-list"><input ng-model="file.label" type="text" autocomplete="off" ng-change="$ctrl.updateLabelAction($index)"></md-input-container></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" ng-show="file.inProgress"><div class="underlined-input uploaded-file-list"><div class="progress progress-striped progress-default active" ng-show="file.file.progress >= 0"><div class="progress-bar" style="width: {{file.file.progress}}%">{{file.file.progress}}%</div></div><span><em>({{file.file.size}} bytes)</em></span></div></div></div><div class="align-self-stretch"><md-button class="md-icon-button" (click)="$ctrl.deleteFile($index)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="trash"></prm-icon></md-button></div></div></md-list-item></md-list><md-input-container class="underlined-input deposit-dialog-container"><label translate="nui.deposit.note"></label> <input ng-model="$ctrl.depositInfo.note" type="text" autocomplete="off"></md-input-container><div ng-hide="$ctrl.hideTOU()"><div class="form-section"><button type="button" class="btn btn-link btn-deposit" id="more-details-button" ng-click="$ctrl.showTOU(!$ctrl.displayTOU)"><span translate="nui.deposit.TOU"></span> <span ng-class="{\'deposit-caret-up\' : $ctrl.displayTOU, \'deposit-caret-down\' : !$ctrl.displayTOU}" class="deposit-caret-down"></span></button></div><div class="form-section collapsed deposit-tou" ng-class="$ctrl.displayTOU ? \'\' : \'collapsed\' "><span ng-bind-html="$ctrl.depositInfo.termsOfUse"></span></div><md-input-container><md-checkbox name="depositIAgree" aria-label="nui.deposit.TOU.Iagree" ng-change="isSubmitAllowed()" ng-true-value="true" ng-model="$ctrl.IAgree"><span translate="nui.deposit.TOU.Iagree"></span></md-checkbox></md-input-container></div><div ng-show="$ctrl.depositInfo.previousNotes.length"><div class="form-section"><button type="button" class="btn btn-link btn-deposit" id="more-details-button" ng-click="$ctrl.showNotes(!$ctrl.displayNotes)"><span translate="nui.deposit.previousNotes"></span> <span ng-class="{\'deposit-caret-up\' : $ctrl.displayNotes, \'deposit-caret-down\' : !$ctrl.displayNotes}" class="deposit-caret-down"></span></button></div><div class="form-section collapsed" ng-class="$ctrl.displayNotes ? \'\' : \'collapsed\' "><md-list ng-show="$ctrl.depositInfo.previousNotes" class="separate-list-items"><md-list-item ng-repeat="note in $ctrl.depositInfo.previousNotes | orderBy:\'+\':true" class="md-2-line md-long-text"><div class="md-list-item-text"><span class="item-index">{{$index + 1}}</span> <span>{{note.content}}</span><p class="italic-text">{{note.updatedby}}, {{note.date}}</p></div></md-list-item></md-list></div></div></div></md-dialog-content><md-dialog-actions layout="row" class="layout-row deposit-dialog-actions"><md-button (click)="$ctrl.close()"><span translate="nui.deposit.cancel"></span></md-button><md-button ng-disabled="!$ctrl.depositInfo.editMode && !$ctrl.IAgree" class="button-confirm" (click)="$ctrl.depositInfo.saveAsDraft= true; $ctrl.commit(this.depositForm)"><span translate="nui.deposit.saveAsDraft"></span></md-button><md-button ng-disabled="!$ctrl.depositInfo.editMode && !$ctrl.IAgree" class="button-confirm" (click)="$ctrl.depositInfo.saveAsDraft= false; $ctrl.commit(this.depositForm)"><span translate="nui.deposit.submit"></span></md-button></md-dialog-actions></form>');
$templateCache.put('components/infra/lang/change-lang.html','<div ng-if="::($ctrl.getLabelType() == \'text\')"><span translate="nui.mypref.label.interface_languages"></span></div><md-input-container layout="row" layout-align="center center"><prm-icon ng-if="::($ctrl.getLabelType() == \'icon\')" [icon-type]="::$ctrl.topBarIcons.language.type" [svg-icon-set]="::$ctrl.topBarIcons.language.iconSet" [icon-definition]="::$ctrl.topBarIcons.language.icon"></prm-icon><md-select ng-model="$ctrl.selectedLanguage" ng-change="$ctrl.changeLanguage()" aria-label="{{\'nui.aria.account.details.langaugesselect\' | translate}}"><md-option ng-repeat="language in ::$ctrl.languages" value="{{::language}}"><span translate="mypref.language.option.{{::language}}"></span></md-option></md-select></md-input-container>');
$templateCache.put('components/infra/password/change-password.html','<form class="padded-container"><h2 class="light-text margin-bottom-medium" layout-margin><span translate="contact.header.changePassword"></span></h2><ul layout-margin><li ng-repeat="error in $ctrl.errorMessages"><span translate="{{error}}" style="color:tomato"></span></li></ul><div layout="column" layout-margin><md-input-container ng-repeat="field in $ctrl.displayFields" class="underlined-input margin-bottom-medium"><label for="prm_{{field.label}}" translate="{{field.label}}"></label> <input type="{{field.uiType}}" ng-model="$ctrl.form[field.name]"/></md-input-container></div></form><md-dialog-actions><md-button (click)="$ctrl.close()"><span translate="preferences.cancel"></span></md-button><md-button class="button-confirm" (click)="$ctrl.commit()"><span translate="mypref.button.save"></span></md-button></md-dialog-actions>');
$templateCache.put('components/primoExplore/footers/icp-license-footer.html','<div layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div flex class="md-padding"></div><div flex="0" flex-md="10" flex-lg="25" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus , \'flex-xl-30\': $ctrl.mediaQueries.xl}"><div prm-text="" dir="auto"><span style="position:fixed;right:1em;bottom:0.01em;z-index:14;font-size:60%"><p>\u4EACICP\u590717047030\u53F7-2</p></span></div></div></div><prm-icp-license-footer-after parent-ctrl="$ctrl"></prm-icp-license-footer-after>');
$templateCache.put('components/primoExplore/silentLogin/silent-login.html','<prm-silent-login-after parent-ctrl="$ctrl"></prm-silent-login-after>');
$templateCache.put('components/search/breadcrumbs/breadcrumbs.html','<div><h2 class="sidebar-title" translate="nui.facets.activefilter"></h2></div><div class="md-chips md-chips-wrap wrapping-chip" layout="row" layout-wrap><div class="md-chip animate-chip" ng-repeat="facet in ::$ctrl.selectedFacets" ng-class="::{\'facet-excluded\': (facet.type === \'exclude\'), \'persistent-facet\': facet.persistent}" layout="row" layout-align="space-between center" ng-if="facet.persistent"><div class="md-chip-content" layout="row" layout-align="start center"><md-button class="persistence-button md-icon-button md-primary" ng-click="$ctrl.removeStickyFacet(facet)" aria-label="{{\'nui.facets.cancel_persistent\' | translate}} {{::$ctrl.getFacetTitleTranslated(facet)}}"><md-tooltip md-delay="600"><span class="bold-text" translate="nui.facets.cancel_persistent"></span></md-tooltip><prm-icon class="show-on-hover" icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove-persistent"></prm-icon><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="persistent"></prm-icon></md-button><md-tooltip md-delay="600"><span class="uppercase-bold" translate="nui.facets.persistent.tootltip"></span> <b ng-if="::!(facet.type === \'exclude\')" translate="nui.facets.including.tooltip"></b> <b ng-if="::(facet.type === \'exclude\')" translate="nui.facets.excluding.tooltip"></b> <strong title="{{::$ctrl.getFacetTitleTranslated(facet)}}">{{::$ctrl.getFacetTitleTranslated(facet)}}</strong></md-tooltip><strong class="{{::$ctrl.getTextDirection(facet)}}">{{::$ctrl.getFacetTitleTranslated(facet)}}</strong></div><div class="md-chip-remove-container"><button role="button" class="md-chip-remove ng-scope" aria-label="{{facet.tooltip}}" ng-click="$ctrl.removeFacet(facet)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove"></prm-icon><md-tooltip>{{facet.tooltip}}</md-tooltip></button></div></div></div><div class="md-chips md-chips-wrap" layout="row" layout-wrap><div class="md-chip animate-chip wrapping-chip" ng-repeat="facet in ::$ctrl.selectedFacets" ng-class="::{\'facet-excluded\': (facet.type == \'exclude\') }" layout="row" layout-align="space-between center" ng-if="!facet.persistent"><div class="md-chip-content"><md-button ng-if="facet.name !== \'frbrgroupid\'" class="persistence-button md-icon-button md-primary" ng-click="$ctrl.addStickyFacet(facet, true)" aria-label="{{\'nui.facets.set_persistent\' | translate}} {{::$ctrl.getFacetTitleTranslated(facet)}}"><md-tooltip md-delay="1000"><span class="bold-text" translate="nui.facets.set_persistent"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove-persistent"></prm-icon><prm-icon class="show-on-hover" icon-type="svg" svg-icon-set="primo-ui" icon-definition="persistent"></prm-icon></md-button><md-tooltip md-delay="600"><b ng-if="::!(facet.type === \'exclude\')" translate="nui.facets.including.tooltip"></b> <b ng-if="::(facet.type === \'exclude\')" translate="nui.facets.excluding.tooltip"></b> <strong title="{{::$ctrl.getFacetTitleTranslated(facet)}}">{{::$ctrl.getFacetTitleTranslated(facet)}}</strong></md-tooltip><strong class="{{::$ctrl.getTextDirection(facet)}}">{{::$ctrl.getFacetTitleTranslated(facet)}}</strong></div><div class="md-chip-remove-container"><button role="button" aria-label="{{::$ctrl.getTranslatedRemoveTooltip(facet)}}" class="md-chip-remove ng-scope" ng-click="$ctrl.removeFacet(facet)\t"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove"></prm-icon><md-tooltip>{{::$ctrl.getTranslatedRemoveTooltip(facet)}}</md-tooltip></button></div></div></div><div><md-button class="button-as-link link-alt-color zero-margin" layout="row" layout-align="start center" ng-click="$ctrl.rememberSelectedFilters()" aria-label="{{$ctrl.getRememberFiltersLabels() | translate}}" ng-class="{\'disabledLockButton\' : $ctrl.allFiltersAlreadySelected()}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="persistent"></prm-icon><md-tooltip md-delay="400"><span translate="nui.facets.remember.tooltip"></span></md-tooltip><span class="bold-text sticky-facet-actions margin-left-small" translate="nui.facets.rememberFilters"></span></md-button><span class="accessible-only" role="alert" translate="nui.facets.allLockedAlert.tooltip" ng-if="$ctrl.sendAllLockedAlert"></span><md-button class="button-as-link link-alt-color zero-margin" layout="row" layout-align="start center" (click)="$ctrl.clearAllFacets()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="replay"></prm-icon><span class="bold-text sticky-facet-actions margin-left-small" translate="nui.facets.reset"></span></md-button></div><prm-breadcrumbs-after parent-ctrl="$ctrl"></prm-breadcrumbs-after>');
$templateCache.put('components/search/actions/action-list.html','<md-nav-bar md-selected-nav-item="$ctrl.activeAction"><div layout="row" class="scroll-hidden actions-layout" id="scrollActionList" ng-style="::(($ctrl.mediaQueries.gtxs && !$ctrl.isfullViewOrOverlay()) && {\'padding\':\'0 35px\'})"><md-nav-item layout="column" class="actions-names" tabindex="-1" id="{{actionName}}" ng-class="::{\'marg-nav-item\':$ctrl.requiredActionsList.length < 8 && !$ctrl.isLeftScrollDisabled && !$ctrl.isRightScrollDisabled,\'safari-wrapper\':$ctrl.isSafariBrowse()}" ng-repeat="actionName in ::$ctrl.requiredActionsList" name="{{actionName}}" ng-if="$ctrl.showMe(actionName)" md-nav-click="$ctrl.performAction(actionName)"><div layout="column"><prm-icon style="z-index:1;" icon-type="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].type}}" svg-icon-set="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].iconSet}}" icon-definition="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].icon}}"></prm-icon><span class="button-text" translate="{{::(\'fulldisplay.command.\' + $ctrl.actionLabelNamesMap[actionName])}}"></span></div></md-nav-item></div></md-nav-bar><prm-action-container (close-tabs-event)="$ctrl.closeAllTabs()" [item]="::$ctrl.item" [selected-ids]="::$ctrl.selectedIds" [action-name]="$ctrl.selectedAction" [on-toggle]="::$ctrl.onToggle" [is-full-view]="::$ctrl.isFullView"></prm-action-container><div layout="row" layout-align="center center" ng-if="$ctrl.showAccessibleCloseButton() || $ctrl.displayCloseIcon"><md-button (keydown)="$ctrl.keydownSupport($event)" ng-class="{\'accessible-close button-link\': !$ctrl.displayCloseIcon}" (click)="$ctrl.closeModalActions($event)" translate-attr="{\'aria-label\': \'nui.aria.close_actions\' }" style="margin: 0 0 1em 0"><span translate="nui.aria.fulldisplay.closeButton.short"></span></md-button></div><prm-action-list-after parent-ctrl="$ctrl"></prm-action-list-after>');
$templateCache.put('components/search/briefResult/briefResult.html','<span ng-if="$ctrl.zoteroParamsString && (!$ctrl.isFullViewOverlayOpen || $ctrl.isFullView)" class="Z3988" title="{{::$ctrl.zoteroParamsString}}" aria-hidden="true"></span> <span ng-if="(!$ctrl.isFullViewOverlayOpen || $ctrl.isFullView)" class="urlToXmlPnx" title="{{::$ctrl.getPnxInXmlUrl()}}" aria-hidden="true" data-url="{{::$ctrl.getPnxInXmlUrl()}}"></span><h3 class="item-title" ng-style="::($ctrl.isEmailMode() && {\'margin\':\'0\'})" ng-class="::{\'string-to-rtl\': $ctrl.changeStringDirectionToRtl($ctrl.firstLine.values), \'is-chapter-state\': $ctrl.isChaptersAndReviewsState()}"><a ng-class="::{\'full-view-mouse-pointer\':$ctrl.isFullView}" ng-href="{{::$ctrl.deepLink}}" ng-click="$ctrl.sendBeacon()" data-emailref="{{::$ctrl.recordId}}" (keydown)="$ctrl.keydownSupport($event)"><span data-field-selector="::{{item.key}}" ng-repeat="item in ::$ctrl.firstLine.values"><span ng-if="::$ctrl.firstLine.delimiter" class="media-delimiter" ng-show="::(!$first)" ng-bind-html="::$ctrl.firstLine.delimiter" ng-style="::($first && $ctrl.isEmailMode() && {\'display\':\'none\'})"></span><div ng-if="::!$ctrl.firstLine.delimiter" class="media-delimiter" ng-show="::(!$first)"></div><prm-highlight ng-class="::item.codes[$index]" terms="::$ctrl.hl(item.key)" text="::$ctrl.getDisplayValFromVal(val, $ctrl.firstLine.delimiter)" ng-repeat="val in ::$ctrl.filterAndNormalize(item.values)" display-mode="::$ctrl.displayMode"></prm-highlight></span></a></h3><div ng-repeat="displayLine in ::$ctrl.otherLines" class="item-detail" ng-class="::{\'{{$ctrl.getClassForIdentifier()}}\' : displayLine.values[0].key === \'identifier\',\'string-to-rtl\' : $ctrl.changeStringDirectionToRtl(displayLine.values), \'reduce-lines-display\': !($ctrl.isFullViewOverlayOpen || $ctrl.isFullView) && !$ctrl.isIe, \'reduce-line-display-ie\': !($ctrl.isFullViewOverlayOpen || $ctrl.isFullView) && $ctrl.isIe}" ng-style="::((!($ctrl.isFullViewOverlayOpen || $ctrl.isFullView) && !$ctrl.isIe) && {\'-webkit-box-orient\':\'vertical\'})"><span ng-repeat="item in ::displayLine.values"><span class="media-delimiter" ng-show="::(!$first)" ng-bind-html="::displayLine.delimiter" ng-style="::($first && $ctrl.isEmailMode() && {\'display\':\'none\'})"></span> <span data-field-selector="{{::item.key}}" ng-repeat="val in ::$ctrl.filterAndNormalize(item.text) track by $index"><prm-highlight ng-class="::item.codes[$index]" terms="::$ctrl.hl(item.key)" text="::$ctrl.getDisplayValFromVal(val, displayLine.delimiter, item.key)" display-mode="::$ctrl.displayMode"></prm-highlight><span class="media-delimiter" ng-show="::(!$last)" ng-bind-html="::displayLine.delimiter" ng-style="::($ctrl.isEmailMode() && {\'display\':\'none\'})">{{::$ctrl.logTimeStamp}}</span></span></span></div><prm-brief-result-after parent-ctrl="$ctrl"></prm-brief-result-after>');
$templateCache.put('components/search/briefResult/briefResultContainer.html','<div ng-click="$ctrl.handleDetails($ctrl.item,$event, true)" class="list-item-primary-content result-item-primary-content" ng-class="{\'has-checkbox\': ($ctrl.isfavorites || ($ctrl.isSearchState() && !$ctrl.detectMobile()) ||\r\n     \t\t\t\t\t ($ctrl.isSearchState() && $ctrl.detectMobile() && $ctrl.isToolBarEnabled)),\r\n     \t\t\t\t\t \'new-result-item\' : ($ctrl.index && $ctrl.newMetalibItem())}" data-recordid="{{::$ctrl.recordId}}" id="SEARCH_RESULT_RECORDID_{{::$ctrl.recordId}}" layout="row"><span class="list-item-count" ng-if="::(!$ctrl.isFullView && !$ctrl.isEmailMode())"><span>{{::$ctrl.index}}</span><md-tooltip ng-if="::($ctrl.index && $ctrl.newMetalibItem())"><span translate="brief.New_Result"></span></md-tooltip></span><md-checkbox ng-if="($ctrl.isfavorites || ($ctrl.isSearchState() && !$ctrl.detectMobile()) || ($ctrl.isSearchState() && $ctrl.detectMobile() && $ctrl.isToolBarEnabled)) &&\r\n\t\t\t\t \t\t\t\t!$ctrl.isFullView && !$ctrl.isEmailMode()" flex="5" class="hide-thumbnail" aria-label="{{::(\'nui.aria.brief.select\' | translate)}}{{\' \'}}{{::$ctrl.index}}" ng-change="$ctrl.sendBriefBeacon()" ng-click="$event.stopPropagation()" ng-model="$ctrl.isChosen"></md-checkbox><div class="result-item-image" layout="column" ng-if="::(!$ctrl.mediaQueries.xs && (!$ctrl.isDBSearch() || $ctrl.isFullView) && !$ctrl.isEmailMode())"><div class="media-content-images"><div class="media-thumbnail"><a tabindex="-1" ng-click="$event.preventDefault(); $ctrl.sendBeacon()" ng-href="{{::$ctrl.getDeepLinkPath()}}" class="a-tag-as-wrapper" ng-style="::$ctrl.isFullView && {\'cursor\': \'default\'}"><prm-search-result-thumbnail-container class="media-content-images" ng-class="::{\'dedup-images-holder\' : $ctrl.isMultipleVersions() && !$ctrl.isFavoriteState()}" [item]="$ctrl.item" [links]="$ctrl.links" [frbr]="::$ctrl.isMultipleVersions()" [is-frbr-generic]="::$ctrl.isFrbrGeneric()"></prm-search-result-thumbnail-container></a></div></div></div><div class="text-selector-spacer"></div><div class="result-item-text" layout="column" layout-fill flex><div class="media-content-type align-self-start"><span ng-if="::$ctrl.showItemType && (!$ctrl.isDBSearch() || $ctrl.isFullView)" translate="{{::$ctrl.getResourceTypeForDisplay()}}"></span><span ng-if="::($ctrl.isPc() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isFavoriteForDisplayFrbr && !$ctrl.isEmailMode())"><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index"></prm-search-result-frbr-line></span></div><div ng-if="::(!$ctrl.isPc() && !$ctrl.isFrbrGeneric() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isFavoriteForDisplayFrbr && !$ctrl.isEmailMode())"><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index"></prm-search-result-frbr-line></div><prm-brief-result class="result-item-details" [item]="$ctrl.item" [resource-type-for-display]="::$ctrl.getResourceTypeForDisplay()" [deep-link]="::$ctrl.getDeepLinkPath()" [is-full-view]="::$ctrl.isFullView" [is-collection-discovery-collection]="::$ctrl.isCollectionDiscoveryCollection" [display-mode]="::$ctrl.displayMode" layout="column"></prm-brief-result><prm-snippet [record]="::$ctrl.item"></prm-snippet><prm-search-result-journal-indication-line ng-if="::$ctrl.isSuprima" [item]="::$ctrl.item"></prm-search-result-journal-indication-line><div ng-if="::$ctrl.isDBSearch()" class="item-detail" style="z-index:100">{{::$ctrl.getDescription()}}</div><div ng-if="::(!$ctrl.isSuprima && ($ctrl.isPeerDocument || $ctrl.isOpenAccessDocument ||  $ctrl.isCourseDocument))" class="badges" layout="row" layout-align="start start"><div class="peer-reviewed-mark" ng-if="::$ctrl.isPeerDocument"><prm-icon class="peer-reviewed-mark-icon" icon-type="{{::$ctrl.actionsIcons.peerreviewed.type}}" svg-icon-set="{{::$ctrl.actionsIcons.peerreviewed.iconSet}}" icon-definition="{{::$ctrl.actionsIcons.peerreviewed.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><span translate="fulldisplay.constants.peer_reviewed_icon"><md-tooltip><span translate="fulldisplay.constants.peer_reviewed_tooltip"></span></md-tooltip></span></div><div class="open-access-mark" ng-if="::$ctrl.isOpenAccessDocument"><span class="icon-after-icon" ng-if="::$ctrl.isPeerDocument"></span><prm-icon class="open-access-mark-icon" icon-type="{{::$ctrl.actionsIcons.openaccess.type}}" svg-icon-set="{{::$ctrl.actionsIcons.openaccess.iconSet}}" icon-definition="{{::$ctrl.actionsIcons.openaccess.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><span translate="fulldisplay.constants.open_access_icon"><md-tooltip><span translate="fulldisplay.constants.open_access_tooltip"></span></md-tooltip></span></div><div class="course-info-mark" ng-if="::$ctrl.isCourseDocument"><span class="icon-after-icon" ng-if="::($ctrl.isPeerDocument || $ctrl.isOpenAccessDocument)"></span><prm-icon class="course-info-mark-icon" icon-type="{{::$ctrl.actionsIcons.course.type}}" svg-icon-set="{{::$ctrl.actionsIcons.course.iconSet}}" icon-definition="{{::$ctrl.actionsIcons.course.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><span translate="fulldisplay.constants.course_icon"><md-tooltip><span translate="fulldisplay.constants.course_tooltip"></span></md-tooltip></span></div></div><div class="search-result-availability-line-wrapper" ng-style="::($ctrl.isEmailMode() && {\'margin-top\':\'1em\'})"><prm-search-result-availability-line ng-if="::($ctrl.delivery &&(!$ctrl.isGenericRecord() || $ctrl.isPc()))" tabindex="-1" [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [is-overlay-full-view]="$ctrl.isOverlayFullView" [collection-discovery-data]="::$ctrl.collectionDiscoveryData" ng-click="$event.stopPropagation()" (open-full-display-with-getit1)="$ctrl.handleDetails($ctrl.item, $event, false);" (open-full-display-with-ngrs)="$ctrl.handleDetails($ctrl.item, $event, false);" [display-mode]="::$ctrl.displayMode"></prm-search-result-availability-line></div><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index" ng-if="::($ctrl.isFrbrGeneric() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isPc() && !$ctrl.isFavoriteForDisplayFrbr && !$ctrl.isEmailMode())"></prm-search-result-frbr-line><prm-chapters-results-line ng-click="$event.stopPropagation()" tabindex="-1" [item]="::$ctrl.item" ng-if="$ctrl.hasRelatedItems () && ($ctrl.isFullViewOverlayOpen || $ctrl.isFullView) && !$ctrl.isEmailMode()"></prm-chapters-results-line><prm-favorites-record-labels [item]="::$ctrl.item" ng-if="::$ctrl.isfavorites"></prm-favorites-record-labels><form ng-if="::$ctrl.displayCTOButton()" class="request-form" ng-cloak action="{{::$ctrl.ctoUrl()}}" method="post" target="_blank"><input type="hidden" name="doc" id="doc" value="{{::$ctrl.getItme()}}"/><md-button type="submit" ng-click="$event.stopPropagation()"><span>DISPLAY CTO</span></md-button></form></div></div><div ng-if="((!$ctrl.isGenericRecord() || $ctrl.isPc()) && !$ctrl.isEmailMode() && $ctrl.showTimer)" role="region" translate-attr="{\'aria-label\': \'nui.aria.actionsFor\'}" translate-values="{\'title\':  \'{{$ctrl.escapeString($ctrl.getRecordTitle())}}\' }" class="result-item-actions" layout="row" ng-keydown="$ctrl.keyDownSupport($event)"><prm-citation-trails-indication-container ng-if="(!$ctrl.detectMobile() && !$ctrl.isOverlayFullView && !$ctrl.isFullView && $ctrl.isShowCitationTrails())" [record]="::$ctrl.item"></prm-citation-trails-indication-container><md-button ng-repeat="action in ::$ctrl.upFrontActions" aria-label="{{::(\'nui.aria.action.nameTitle\' | translate: $ctrl.getNameTitleParams([\'name\',\'title\'],action))}}" ng-if="::(!$ctrl.isFullView)" class="md-icon-button custom-button prm-primary" data-custom-button="action" (click)="$ctrl.openTab($event, action)" hide-xs><md-tooltip md-delay="400"><span translate="{{::(\'fulldisplay.command.\'+$ctrl.getActionLabel(action))}}"></span></md-tooltip><prm-icon class="md-icon-button-custom" icon-type="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].type}}" svg-icon-set="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].iconSet}}" icon-definition="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon></md-button><prm-save-to-favorites-button [item]="::$ctrl.item" [index]="::$ctrl.index" [is-favorites]="::$ctrl.isFavorites" [is-overlay-full-view]="$ctrl.isOverlayFullView"></prm-save-to-favorites-button><md-button id="briefResultMoreOptionsButton" ng-if="::!$ctrl.isFullView" class="md-icon-button more-options-button" translate-attr="{\'aria-label\' : \'nui.aria.moreActions\' }" (click)="$ctrl.closeOpenTabs($event);$ctrl.toggleItemMenu($event);$event.stopPropagation();" hide-xs><md-tooltip md-delay="600" md-autohide="true"><span>{{$ctrl.getLessMoreOptionsButtonText()}}</span></md-tooltip><prm-icon [icon-type]="::$ctrl.actionsIcons.moreActions.type" class="open-icon" [svg-icon-set]="::$ctrl.actionsIcons.moreActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.moreActions.icon" [display-mode]="::$ctrl.displayMode"></prm-icon><prm-icon [icon-type]="::$ctrl.actionsIcons.closeActions.type" class="close-icon" [svg-icon-set]="::$ctrl.actionsIcons.closeActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.closeActions.icon" [display-mode]="::$ctrl.displayMode"></prm-icon></md-button></div><div class="action-list-content" ng-style="{\'padding-top\': $ctrl.itemHeight}" ng-if="::(!$ctrl.isFullView && !$ctrl.isEmailMode())" ng-keydown="$ctrl.keyDownSupport($event)"><md-content ng-if="$ctrl.isExpanded" ng-class="::{\'secondary-content-holder\': !$ctrl.isFullView}"><md-divider></md-divider><prm-action-list ng-if="$ctrl.isExpanded2 && !$ctrl.isGenericRecord() || $ctrl.isPc()" ng-class="{ \'visible\': $ctrl.isExpanded3 }" [display-all]="true" [display-close-icon]="false" [item]="::$ctrl.item" [(selected-action)]="$ctrl.selectedAction" (close-modal)="$ctrl.closeOpenTabs($event);$ctrl.toggleItemMenu($event);$event.stopPropagation();$ctrl.focusOnXButton()"></prm-action-list></md-content></div><prm-brief-result-container-after parent-ctrl="$ctrl"></prm-brief-result-container-after>');
$templateCache.put('components/search/browse/browse-search.html','<h2 class="accessible-only" translate="results.title" ng-if="$ctrl.showList()"></h2><prm-spinner ng-if="$ctrl.inProgress" class="half-transparent no-text" layout="row" layout-align="center center" style="padding-top: 5em"></prm-spinner><md-content class="padded-container" ng-class="{\'facet-to-left\': $ctrl.facetToLeft}" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><div flex><div layout="row" layout-sm="column" layout-align="space-around" ng-show="$ctrl.inProgress"><md-progress-circular class="md-accent" md-diameter="40"></md-progress-circular></div><md-list ng-if="$ctrl.showList()" ng-hide="$ctrl.inProgress" id="mainResults" class="prm-list prm-linkable-list-items prm-dense-list has-list-nav zero-padding" flex><prm-browse-result ng-repeat="obj in $ctrl.browseResult" [browse-result]="obj"></prm-browse-result></md-list></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><prm-page-nav-menu ng-if="$ctrl.showList()" (load-prev-results-event)="$ctrl.doPrev()" (load-next-results-event)="$ctrl.doNext()" [current-page]="$ctrl.pageInView" [num-of-results]="$ctrl.searchInfo.total" [show-components]="$ctrl.pagingConfiguration" [mode]="\'browse\'" [show-next-button-predicate]="::$ctrl.showNextButtonPredicate" [show-prev-button-predicate]="::$ctrl.showPrevButtonPredicate"></prm-page-nav-menu></md-content><prm-browse-search-after parent-ctrl="$ctrl"></prm-browse-search-after>');
$templateCache.put('components/search/chaptersAndReviews/chapters-and-reviews-item.html','<md-card tabindex="-1"><md-card-content ng-if="$ctrl.item" layout="column" tabindex="-1"><div class="media-content-type"><span translate="{{$ctrl.resourceType}}"></span></div><h4 class="md-subhead item-title"><a tabindex="0" aria-label="" title="" ng-href="{{::$ctrl.deepLinkPath}}" ng-click="$ctrl.onItemClick($event)"><span>{{$ctrl.title}}</span></a></h4><p title="">{{$ctrl.creatorAndContributor}}</p></md-card-content></md-card><prm-chapters-and-Reviews-item-after parent-ctrl="$ctrl"></prm-chapters-and-Reviews-item-after>');
$templateCache.put('components/search/chaptersAndReviews/chapters-and-reviews.html','<md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="row"><div flex="0" flex-md="5" flex-lg="15" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-button class="back-button offset-to-left" aria-label="{{\'fulldisplay.deatiles.back\' | translate}}" ui-state="$ctrl.SEARCH_STATE" ui-state-params="$ctrl.savedSearchParams" ui-sref-opts="{reload: true, inherit:false}"><prm-icon class="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><md-tooltip md-delay="400"><span translate="{{::(\'fulldisplay.deatiles.back\'+$ctrl.getActionLabel(action))}}"></span></md-tooltip></md-button><md-divider class="toolbar-divider visible"></md-divider><h2 class="toolbar-title"><span>{{$ctrl.getRelatedItemsHeaderLabel()}}</span></h2></div></md-toolbar><div class="prm-horizontal-content no-scrollbar stacked-items prm-background prm-hue1" layout="row" layout-align="space-between center"><div hide-xs hide-sm flex-md="0" flex-lg="15" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div class="display-block" flex layout="row"><prm-chapters-and-reviews-item [item]="$ctrl.item"></prm-chapters-and-reviews-item></div><div hide-xs hide-sm flex-md="0" flex-lg="30" flex-gt-lg="30" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-alert-bar flex [alert-object]="::$ctrl.chaptersAlert " ng-if="$ctrl.type === \'chapters\'"></prm-alert-bar><prm-alert-bar flex [alert-object]="::$ctrl.reviewsAlert " ng-if="$ctrl.type === \'reviews\'"></prm-alert-bar><prm-search></prm-search><prm-chapters-and-reviews-after parent-ctrl="$ctrl"></prm-chapters-and-reviews-after>');
$templateCache.put('components/search/controlledVocabulary/controlled-vocabulary.html','<p class="zero-margin"><span translate="nui.results.controlVocabulary.including" translate-values="$ctrl.getEquivalentTerm()"></span> <a ui-state="$ctrl.STATE" ui-state-params="$ctrl.stateParams" ui-sref-opts="{reload: true, inherit:false}" translate="nui.results.controlVocabulary.searchOnly" translate-values="$ctrl.getOriginalQuery()"></a></p><prm-controlled-vocabulary-after parent-ctrl="$ctrl"></prm-controlled-vocabulary-after>');
$templateCache.put('components/search/citationTrails/citation-trails-breadcrumbs.html','<md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="row" ng-hide="citationLimit == 0"><div flex="0" flex-md="5" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-button class="back-button offset-to-left" aria-label="{{\'fulldisplay.deatiles.back\' | translate}}" ui-state="$ctrl.SEARCH_STATE" ui-state-params="$ctrl.savedSearchParams" ui-sref-opts="{reload: true, inherit:false}" ref=""><prm-icon class="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><md-tooltip md-delay="400"><span translate="{{::(\'fulldisplay.deatiles.back\'+$ctrl.getActionLabel(action))}}"></span></md-tooltip></md-button><md-divider class="toolbar-divider visible"></md-divider><h2 class="toolbar-title"><span aria-label="{{\'nui.citation_trail.link.header\' | translate}}" translate="{{\'nui.citation_trail.link.header\' + $ctrl.getActionLabel(action)}}"></span></h2></div></md-toolbar><div class="prm-horizontal-content no-scrollbar stacked-items prm-background prm-hue1" layout="row" aria-label="{{\'nui.aria.current.path\' | translate}}"><div hide-xs hide-sm flex-md="0" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div flex class="horizontal-content-container citations-container"><md-button class="horizontal-content-control left-button" ng-if="$ctrl.isShowLeftArrow()" tabindex="0" ng-click="$ctrl.onLeftArrowClick()" aria-label="{{\'nui.citation_trail.link.left.tooltip\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon><md-tooltip><span translate="nui.citation_trail.link.left.tooltip"></span></md-tooltip></md-button><div class="horizontal-content-scroller citations-scroller" role="list" layout="row" ng-class="{\'left-button-visible\': $ctrl.isShowLeftArrow(), \'right-button-visible\': $ctrl.isShowRightArrow()}"><div class="horizontal-content-scroll-offseter" layout="row"><prm-citation-trails-item id="citationItem{{$index}}" ng-init="index = $index" tabindex="-1" ng-repeat="seed in $ctrl.seedList" ng-class="{\'active-item\':$index === $ctrl.getActiveLevel()}" aria-label="{{::(\'nui.aria.citation_path_item_number\' | translate)}}{{\' \'}}{{::$index+1}}{{\' \'}}{{$ctrl.isActive($index) | translate}}" [seed]="seed" [active]="$index === $ctrl.getActiveLevel()" [active-level]="$ctrl.getActiveLevel()" [index]="$index" class="{{$ctrl.isActive}} horizontal-content-item" (change-active-seed-event)="$ctrl.onChangeActiveSeedEvent(seed, $index)" [z-order]="$index > $ctrl.getActiveLevel() ? ($ctrl.seedList.length - $index) : \'\' "></prm-citation-trails-item></div></div><md-button class="horizontal-content-control right-button" ng-hide="$ctrl.hideArrows" tabindex="0" ng-if="$ctrl.isShowRightArrow()" ng-click="$ctrl.onRightArrowClick()" aria-label="{{\'nui.citation_trail.link.right.tooltip\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon><md-tooltip><span translate="nui.citation_trail.link.right.tooltip"></span></md-tooltip></md-button></div><div hide-xs hide-sm flex-md="0" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-alert-bar flex [alert-object]="::$ctrl.citingAlert " ng-if="$ctrl.citationTraisLength && $ctrl.activeSeedTypeCiting"></prm-alert-bar><prm-alert-bar flex [alert-object]="::$ctrl.citedByAlert " ng-if="$ctrl.citationTraisLength && !$ctrl.activeSeedTypeCiting"></prm-alert-bar><prm-search></prm-search><prm-citation-trails-breadcrumbs-after parent-ctrl="$ctrl"></prm-citation-trails-breadcrumbs-after>');
$templateCache.put('components/search/citationTrails/citation-trails-fullview-link.html','<div ng-if="$ctrl.shouldDisplayCitationTrial"><span ng-if="!$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.Find\' + $ctrl.getActionLabel(action)}}"></span> <span ng-if="!$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.sources\' + $ctrl.getActionLabel(action)}}"></span> <span ng-if="$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.findSource\' + $ctrl.getActionLabel(action)}}"></span><prm-citation-trails-indication ng-if="$ctrl.hasCitedby()" [record]="::$ctrl.record" [is-full-view]="true" type="cited_by" class="margin-left-small"></prm-citation-trails-indication><span ng-if="$ctrl.hasCitedby() && $ctrl.hasCiting()" aria-label="{{\'nui.citation_trail.link.or\' | translate}}" translate="{{::(\'nui.citation_trail.link.or\'+$ctrl.getActionLabel(action))}}"></span><prm-citation-trails-indication ng-if="$ctrl.hasCiting()" [record]="::$ctrl.record" [is-full-view]="true" type="citing" class="margin-left-small"></prm-citation-trails-indication></div><prm-times-cited ng-if="$ctrl.shouldDisplayTimesCited" [item]="$ctrl.record"></prm-times-cited><prm-citation-trails-fullview-link-after parent-ctrl="$ctrl"></prm-citation-trails-fullview-link-after>');
$templateCache.put('components/search/citationTrails/citation-trails-indication-container.html','<div ng-if="::$ctrl.record.extras && $ctrl.record.extras.citationTrails" layout="row"><prm-citation-trails-indication ng-if="::$ctrl.citedby.length > 0" [record]="::$ctrl.record" type="cited_by"></prm-citation-trails-indication><prm-citation-trails-indication ng-if="::$ctrl.citing.length > 0" [record]="::$ctrl.record" type="citing"></prm-citation-trails-indication></div><prm-citation-trails-indication-container-after parent-ctrl="$ctrl"></prm-citation-trails-indication-container-after>');
$templateCache.put('components/search/citationTrails/citation-trails-indication.html','<md-button aria-label="{{$ctrl.getLabel() | translate:\'{title: \\\'\'+ $ctrl.getRecordTitle()+\'\\\'}\'}}" data-custom-button="action" prm-brief-internal-button-marker ui-state="$ctrl.CITATION_TRAILS_STATE" ui-state-params="$ctrl.citationsStateParams" ui-sref-opts="{reload: true, inherit:true}" ng-click="$ctrl.onClick($event, $ctrl.type)" ng-class="::{\'button-with-icon citation-trails-fullview\' : $ctrl.isFullView, \'md-icon-button citation-trails-brief\' : !$ctrl.isFullView}" href=""><md-tooltip md-delay="400" ng-if="::!$ctrl.isFullView"><span translate="{{::($ctrl.isCitationStatTooltip() + $ctrl.getActionLabel(action))}}"></span></md-tooltip><prm-icon svg-icon-set="primo-ui" icon-definition="{{::$ctrl.getIconName()}}"></prm-icon><span ng-if="::$ctrl.isFullView" translate="{{::($ctrl.getLabel())}}"></span></md-button><prm-citation-trails-indication-after parent-ctrl="$ctrl"></prm-citation-trails-indication-after>');
$templateCache.put('components/search/citationTrails/citation-trails-item.html','<md-card tabindex="-1"><md-button id="citationTrail" ng-href="{{::$ctrl.deepLinkPath}}" ng-click="$ctrl.onItemClick($ctrl.index, citation, $event)" tabindex="0" ng-style="{\'z-index\':$ctrl.zOrder}" title="{{::$ctrl.activeCitationType()+\' \' +$ctrl.seed.title}}" aria-label="{{::(\'nui.aria.citation_path_item_number\' | translate)}}{{\' \'}}{{::$ctrl.index+1}}{{\' \'}}{{$ctrl.isActiveSeed() | translate}}"><md-card-content layout="column" tabindex="-1"><span class="item-type" ng-show="!$ctrl.isActive()"><prm-icon ng-if="$ctrl.citationType === \'citing\' " class="rotate-180" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citing"></prm-icon><prm-icon ng-if="$ctrl.citationType === \'citedby\' " icon-type="svg" svg-icon-set="primo-ui" icon-definition="citedBy"></prm-icon></span><h3 class="item-type" layout="row" tabindex="-1" ng-show="$ctrl.isActive()"><prm-icon ng-if="$ctrl.citationType === \'citing\' " class="rotate-180" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citing"></prm-icon><prm-icon ng-if="$ctrl.citationType === \'citedby\' " icon-type="svg" svg-icon-set="primo-ui" icon-definition="citedBy"></prm-icon><span>{{$ctrl.activeCitationType()}}</span></h3><h4 class="md-subhead item-title" tabindex="-1" title="{{::$ctrl.seed.title}}"><span>{{::$ctrl.seed.title}}</span></h4><p ng-if="$ctrl.isActive()" title="{{::$ctrl.seed.creator}}">{{::$ctrl.seed.creator}}</p></md-card-content></md-button></md-card><prm-citation-trails-item-after parent-ctrl="$ctrl"></prm-citation-trails-item-after>');
$templateCache.put('components/search/facet/facet-group.html','<div data-facet-group="{{$ctrl.facetGroup.name}}"><prm-facet-exact tabindex="-1" ng-if="::($ctrl.displayedType === \'exact\')" [facet-group]="::$ctrl.facetGroup"></prm-facet-exact><prm-facet-range tabindex="-1" ng-if="::($ctrl.displayedType === \'range\')" [facet-group]="::$ctrl.facetGroup"></prm-facet-range></div>');
$templateCache.put('components/search/facet/facet.html','<div tabindex="-1" class="primo-scrollbar" sticky offset="24" sticky-class="is-stuck" disabled-sticky="!$ctrl.mediaQueries.gtsm" ng-class="$ctrl.activeMultipleFacets ? \'multifacets-active\' : \'\'"><prm-organization-or-facet-toggle ng-if="::$ctrl.isOrgListSearch()"></prm-organization-or-facet-toggle><div tabindex="-1" class="sidebar-inner-wrapper" layout="column" ng-if="$ctrl.showFacetSection()"><div ng-if="::$ctrl.isShowFetchMoreResultButton()" class="sidebar-section compensate-padding-left margin-bottom-large"><h2 class="sidebar-title" translate="nui.facets.remote.title"></h2><p translate="nui.facets.remote.description" class="remote-description"></p><md-button (click)="$ctrl.fetchMoreResults()" translate="nui.facets.remote.button" class="zero-margin button-confirm button-large"></md-button></div><div ng-class="{\'up-z-index\': $ctrl.showUIBlocker}" tabindex="-1" ng-if="::($ctrl.selectedFacets).length || $ctrl.isFiltered()" class="sidebar-section filtered-facets-section animate-chip-section margin-bottom-large"><prm-breadcrumbs></prm-breadcrumbs></div><div ng-if="::($ctrl.showPersonalizationSection() && $ctrl.notLocal() && $ctrl.personalizationToggled())"><div tabindex="-1" class="sidebar-section compensate-padding-left margin-bottom-large personalization-section" ng-class="::{\'is-active\':$ctrl.personalizationToggled()}"><h2 class="sidebar-title prm-personalization" translate="nui.pyr.search.label"></h2><div class="section-content"><md-checkbox ng-model="$ctrl.recentness"><span translate="nui.pyr.search.recent_date"></span></md-checkbox><ul class="sidebar-list margin-bottom-zero margin-top-small" layout="column" layout-align="start start" tabindex="-1"><li ng-repeat="discipline in ::$ctrl.getPersonalization()" layout="row" layout-align="start center"><strong title="{{discipline}}">{{::$ctrl.getDiscipline(discipline)}} </strong><span class="button-container"><md-button class="md-icon-button" ng-click="$ctrl.removeDiscipline(discipline)" translate-attr="{\'aria-label\': $ctrl.getRemoveLabel() + \' \' + $ctrl.getDiscipline(discipline)}"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px"></prm-icon><md-tooltip md-delay="400"><span>{{::$ctrl.getRemoveLabel() + \' \' + $ctrl.getDiscipline(discipline)}}</span></md-tooltip></md-button></span></li></ul><md-button class="button-as-link link-alt-color zero-margin" ng-click="$ctrl.edit()"><b translate="nui.pyr.search.edit"></b></md-button></div></div></div><div tabindex="-1" ng-if="::($ctrl.totalResults > 1 || $ctrl.showPcAvailability)" class="sidebar-section compensate-padding-left"><h2 class="sidebar-title" translate="{{::$ctrl.isFromEsploro() ? \'nui.facets.ResearchRepository.title\' : \'nui.facets.title\'}}"></h2></div><div tabindex="-1" ng-if="::(!$ctrl.isRapido() && (($ctrl.showPcAvailability && !$ctrl.searchInProgress) || ($ctrl.isNewspapersSearch && !$ctrl.searchInProgress)))" class="sidebar-section margin-top-small margin-bottom-medium compensate-padding-left"><md-checkbox ng-model="$ctrl.pcAvailability" ng-change="$ctrl.changePcAvailability()" translate-attr="{\'aria-label\': \'expandresults\'}"><span translate="expandresults"></span></md-checkbox></div><div ng-if="::$ctrl.totalResults > 1" class="sidebar-section margin-bottom-small compensate-padding-left" layout="row"><div layout="row" layout-align="start center" class="section-title"><h3 class="section-title-header"><span translate="nui.results.sortby" translate-attr-title="nui.results.sortby.tooltip"></span></h3><prm-search-result-sort-by (sort-by-change)="$ctrl.sortByChange.emit(null)"></prm-search-result-sort-by></div></div><div ng-if="::$ctrl.totalResults > 1" class="sidebar-section available-facets multiselect-facet-group" ng-repeat="facetGroup in $ctrl.facets" ng-class="$ctrl.activeMultipleFacets ? \'multiselect-active\' : \'multiselect-inactive\'"><prm-facet-group [facet-group]="::facetGroup" [displayed-type]="::facetGroup.displayedType"></prm-facet-group></div><div ng-if="::($ctrl.totalResults == 1 && $ctrl.isFiltered())"><span translate="nui.facets.nofacets"></span></div></div><div tabindex="-1" ng-if="($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && $ctrl.isSearchDone() &&  $ctrl.isCategories" id="dBcategorizeSearchDone" role="complementary" flex-md="25" flex-lg="25" flex-xl="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft,\r\n             \'padding-left-medium\': !$ctrl.pageRtlDirection(), \'padding-right-medium\': $ctrl.pageRtlDirection()}" ng-if="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-databases-categorize style="display: block" tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (search-event)="$ctrl.onSearchBarSearchEvent($event)" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)" [categories-type]="::$ctrl.categoriesType"></prm-databases-categorize></div><div tabindex="-1" ng-if="$ctrl.isOrgListSearch() && $ctrl.isSearchDone() &&  $ctrl.haveOrgListCategories && $ctrl.isShowingOrganizationTree()" id="orgListCategorizeSearchDone" role="complementary" flex-md="25" flex-lg="25" flex-xl="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft,\r\n             \t\t\t\t\'padding-left-medium\': !$ctrl.pageRtlDirection(), \'padding-right-medium\': $ctrl.pageRtlDirection()}" ng-if="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-orgList-categorize style="display: block" tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (search-event)="$ctrl.onSearchBarSearchEvent($event)" (set-have-org-list-categories)="$ctrl.setHaveOrgListCategories($event)" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)"></prm-orgList-categorize></div><div ng-if="($ctrl.totalResults > 1 && $ctrl.activeMultipleFacets) && !($ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm)" class="multiselect-submit" ng-class="::{\'is-active\': $ctrl.activeMultipleFacets}"><div flex-md="25" flex-lg="20" class="multiselect-submit-inner" layout="row" ng-class="{\'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus, \'flex-xl-20\': $ctrl.mediaQueries.xl, \'flex-xl-25\': $ctrl.mediaQueries}"><md-button ng-click="$ctrl.clearMultiFacets()"><span translate="nui.facets.clear"></span></md-button><md-button class="md-primary button-large md-button md-ink-ripple" ng-click="$ctrl.applyMultiFacets()"><span translate="nui.facets.applyfilters"></span></md-button></div></div><md-toolbar ng-if="($ctrl.totalResults > 1 && $ctrl.activeMultipleFacets)" class="default-toolbar bottom-fixed-toolbar mobile-toolbar" style="z-index: 13;" hide-gt-sm><div flex-md="25" flex-lg="20" layout="row" layout-align="space-between center" style="height: 60px; max-height: 60px" ng-class="{\'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus, \'flex-xl-20\': $ctrl.mediaQueries.xl, \'flex-xl-25\': $ctrl.mediaQueries}"><md-button ng-click="$ctrl.clearMultiFacets()" class="mobile-toolbar-text clear-button mobile-action-button"><span translate="nui.facets.clear"></span></md-button><md-button class="button-large md-button md-ink-ripple mobile-toolbar-text" ng-click="$ctrl.applyMultiFacets()"><span translate="nui.facets.applyfilters"></span></md-button><md-button id="sidebar-trigger" layout-align="end end" class="mobile-toolbar-text close-button mobile-action-button" translate-attr="{\'aria-label\': \'nui.facets.title\'}" (click)="$ctrl.showMobileFacets = !$ctrl.showMobileFacets"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div></md-toolbar></div><prm-facet-after parent-ctrl="$ctrl"></prm-facet-after>');
$templateCache.put('components/search/didUMean/did-u-mean.html','<p class="zero-margin"><span translate="nui.results.didumean"></span> <a ui-state="$ctrl.STATE" ui-state-params="$ctrl.stateParams" ui-sref-opts="{reload: true, inherit:false}" aria-label="{{(\'nui.results.didumean\' | translate) + $ctrl.didUMean}}">{{$ctrl.didUMean}} </a>?</p><prm-did-u-mean-after parent-ctrl="$ctrl"></prm-did-u-mean-after>');
$templateCache.put('components/search/moreLikeThis/more-like-this.html','<div class="more-from-the-same-box"><div ng-class="{\'animate-max-height\':$ctrl.externalLinksCollapse}" class="external-links"><div ng-repeat="item in $ctrl.sameByFields" class="courseLinks" ng-style="$ctrl.sameByFields.length === 1 && {\'flex-basis\':\'100%\'} || $ctrl.sameByFields.length === 2 && {\'flex-basis\':\'50%\'}" ng-if="$ctrl.sameByField === \'crs\'"><a class="arrow-link" ng-if="item.isLinkable" ng-click="$ctrl.sendLinkToLegantoBeacon()" href="{{item.link}}" target="_BLANK" aria-label="{{item.tooltip}}" title="{{item.tooltip}}"><span>{{item.name}}</span><prm-icon external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon></a><span title="{{item.name}}" ng-if="!item.isLinkable">{{item.name}}</span></div><div ng-repeat="item in $ctrl.sameByFields" class="collectionsLinks" ng-style="$ctrl.sameByFields.length === 1 && {\'flex-basis\':\'100%\'} || $ctrl.sameByFields.length === 2 && {\'flex-basis\':\'50%\'}" ng-if="$ctrl.sameByField === \'col\'" (click)="$ctrl.closeDialog()"><prm-collection-navigation-breadcrumbs-item layout="row" class="arrow-link" [path-object]="item" [is-root-object]="false" [institution]="$ctrl.institution" [parent-tab]="\'moreFromTheSame\'"></prm-collection-navigation-breadcrumbs-item></div></div><md-button ng-if="$ctrl.isExternalBtnShown()" class="section-title expend-more-links" layout="row" layout-align="end center" layout-fill hide-xs aria-expanded="{{$ctrl.externalLinksCollapse}}" (click)="$ctrl.toggleFacet($event)" ng-class="{\'collapsed\':  $ctrl.externalLinksCollapse}" aria-label="{{$ctrl.getExpandAriaLabel() | translate}}" translate-attr-title=""><div layout="row" layout-align="start center"><h4 class="all-curses-title" translate="{{$ctrl.getExpandTabType()}}"></h4><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down" ng-class="{\'rotate-180\': $ctrl.externalLinksCollapse}"></prm-icon></div></md-button></div><md-divider flex="" class="md-primoExplore-theme flex" style="margin-top: 1em;"></md-divider><div style="position: relative" class="horizontal-content-scroller"><div tabindex="-1" class="container-nav-controls"><md-button tabindex="-1" aria-label="{{\'nui.aria.moreFromTheSame.previous\' | translate}}" ng-disabled="$ctrl.isLeftScrollDisabled" ng-keypress="$ctrl.previous($event)" ng-mousedown="$ctrl.scrollLeftMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-left"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.previous\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon></md-button></div><md-virtual-repeat-container dir="ltr" role="tablist" id="prm-more-like-this" md-top-index="$ctrl.currentIndex" ng-keyup="$ctrl.handleKeyUp($event)" md-orient-horizontal><ul tabindex="-1" role="listbox" layout="row" layout-align="start start"><div id="scrollCourseList"><li in-view="$ctrl.onItemInView($index, $inview, $inviewInfo)" in-view-options="{generateDirection: true, throttle: 50}" md-virtual-repeat="moreInTheSameCourseItem in $ctrl.dynamicMoreLikeThisItems" ng-click="$ctrl.navigateToItemFullView(moreInTheSameCourseItem, $index);$event.stopPropagation();" id="moreFromTheSameID{{$ctrl.sameByField}}{{$index}}" tabindex="0" role="tab" ng-focus="$ctrl.focusSupport($event)" ng-blur="$ctrl.focusOutSupport($event)" ng-keydown="$ctrl.keyDownSupport($event,moreInTheSameCourseItem);" md-item-size="110" md-on-demand ng-mouseenter="highlightItem = true" ng-mouseleave="highlightItem = false" ng-class="{\'md-whiteframe-2dp\': highlightItem, \'md-whiteframe-5dp current-item\': $index == $ctrl.focusedIndex}"><a tabindex="-1" ui-state="$ctrl.getStateName()" ui-state-params="$ctrl.getItemFullViewParams(moreInTheSameCourseItem)" ui-sref-opts="{reload: true}"><prm-more-like-this-item ng-style="{\'color\': \'hsl({{(($index+50)*$index)/2}}, 30%, 70%)\'}" [item]="$ctrl.item" [more-in-the-same-course-item]="moreInTheSameCourseItem"></prm-more-like-this-item></a></li></div></ul></md-virtual-repeat-container><div tabindex="-1" class="container-nav-controls"><md-button tabindex="0" aria-label="{{\'nui.aria.moreFromTheSame.next\' | translate}}" ng-disabled="$ctrl.isRightScrollDisabled" ng-keypress="$ctrl.next($event)" ng-mousedown="$ctrl.scrollRightMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-right"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.next\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button></div></div><prm-more-like-this-after parent-ctrl="$ctrl"></prm-more-like-this-after>');
$templateCache.put('components/search/fullView/full-view-container.html','<div layout="column" layout-fill class="header topbar-wrapper"><prm-topbar></prm-topbar><h1 class="accessible-only" translate="nui.aria.page.fulldisplay"></h1><prm-search-bar class="display-none-print" ng-if="::($ctrl.showSearch  && !$ctrl.isAtozSearch && !$ctrl.isBrowseMode && !$ctrl.isNewspapersSearch)" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-search-bar><prm-atoz-search-bar ng-if="::($ctrl.showSearch  && $ctrl.isAtozSearch)" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-atoz-search-bar><prm-newspapers-search-bar ng-if="::($ctrl.showSearch  && $ctrl.isNewspapersSearch)" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-newspapers-search-bar><prm-browse-search-bar ng-if="$ctrl.isBrowseMode"></prm-browse-search-bar></div><prm-back-to-search-results-button class="display-none-print"></prm-back-to-search-results-button><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div><md-content layout="row" layout-fill class="padded-container"><h2 class="accessible-only" translate="nui.aria.fullDisResult"></h2><div class="display-none-print" flex="0" flex-md="0" flex-lg="10" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20" ng-if="!$ctrl.isRestrictedRecord()"></div><div layout="row" flex><div flex="0"></div><prm-full-view id="fullView" ng-if="$ctrl.item" [item]="$ctrl.item" flex role="dialog"></prm-full-view><div flex="0"></div></div></md-content><prm-full-view-cont-after parent-ctrl="$ctrl"></prm-full-view-cont-after>');
$templateCache.put('components/search/fullView/full-view-dialog-template.html','<div layout="row" (keydown)="$ctrl.keydownSupport($event)"><md-dialog aria-label="Full Display" class="md-dialog-full prm-full-view-dialog"><md-dialog-content layout="row" style="overflow-y: hidden"><md-toolbar class="default-toolbar is-stuck zero-padding" layout="row" ng-if="!$ctrl.mediaQueries.gtsm"><div class="md-toolbar-tools zero-padding display-block" layout="row"><md-button class="back-button has-text padding-left-right-small" (click)="$ctrl.handleHideDetails()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button></div><div class="next-prev-buttons" style="display: flex" layout="row" layout-align="center center" hide-gt-md><md-button aria-label="{{::(\'nui.aria.fulldisplay.goToPreviousButton\' | translate)}}" ng-if="!$ctrl.isFirstRecord()" class="md-icon-button md-button md-ink-ripple close-button prev-rec-btn" ng-click="$ctrl.getPreviousRecord()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button><md-button aria-label="{{::(\'nui.aria.fulldisplay.goToNextButton\' | translate)}}" ng-if="!$ctrl.isLastRecordByState()" class="md-icon-button md-button md-ink-ripple close-button next-rec-btn" ng-click="$ctrl.getNextRecord()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down"></prm-icon></md-button></div></md-toolbar><sticky-scroll flex="100" style="overflow-y: scroll;"><prm-full-view flex="100" ng-repeat="item in $ctrl.currentStateResults()" ng-if="$ctrl.dialogOpened.val && $index === $ctrl.currentResultIndex()" [load-full-view-additional-services]="$ctrl.loadFullViewAdditionalServices.val" [is-overlay-full-view]="true" [isfavorites]="$ctrl.isfavorites" [item]="::item" [focus-id]="$ctrl.getFocusId()" [originator]="$ctrl.originator" id="fullView" tabindex="-1" role="contentinfo" [is-first-item]="$ctrl.isFirstRecord()" [is-last-item]="$ctrl.isLastRecordByState()" ng-class="{\'padding-top-medium\':$ctrl.mediaQueries.xs}"></prm-full-view></sticky-scroll></md-dialog-content></md-dialog><md-button aria-label="{{::(\'nui.aria.fulldisplay.goToPreviousButton\' | translate)}}" class="md-icon-button md-button md-ink-ripple close-button full-view-navigation" ng-if="$ctrl.mediaQueries.gtsm && !$ctrl.isFirstRecord()" ng-click="$ctrl.getPreviousRecord()" style="position: absolute;\r\n            top: 0;\r\n           /* left: 0;*/\r\ntransform: translateY(-80%);"><md-tooltip md-direction="top"><span translate="nui.results.previous.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button><md-button class="md-icon-button close-button full-view-navigation" ng-if="$ctrl.mediaQueries.gtsm" (click)="$ctrl.handleHideDetails()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button><md-button aria-label="{{::(\'nui.aria.fulldisplay.goToNextButton\' | translate)}}" class="md-icon-button md-button md-ink-ripple close-button full-view-navigation" ng-if="$ctrl.mediaQueries.gtsm && !$ctrl.isLastRecordByState() " ng-click="$ctrl.getNextRecord()" style="position: absolute;\r\n            bottom: 0;\r\n            /*left: 0;*/\r\ntransform: translateY(80%);"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.next.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down"></prm-icon></md-button></div>');
$templateCache.put('components/search/fullView/full-view.html','<div aria-labelledby="modalTitle" aria-describedby="modalDescription"><div role="document"><div id="modalDescription" ng-if="$ctrl.isSearchResults()" class="accessible-only" translate="{{\'nui.fulldisplay.dialog.description\' | translate:\'{title: \\\'\'+($ctrl.getRecoredTitle($ctrl.firstLine.values[0].text[0]))+\'\\\'}\'}}"></div><h1 class="accessible-only" id="modalTitle" ng-if="$ctrl.isSearchResults()">{{\'nui.aria.page.searchResults\' | translate}}</h1><div ng-if="!$ctrl.isRestrictedRecord()" class="layout-column-print" ng-class="{\'\': $ctrl.isOverlayFullView , \'layout-row\': !$ctrl.isOverlayFullView && $ctrl.mediaQueries.gtsm, \'layout-column\': !$ctrl.isOverlayFullView && $ctrl.mediaQueries.sm}"><div class="full-view-container flex" layout-xs="column" layout-sm="column" layout-gt-sm="row" id="full-view-container" flex><div class="full-view-inner-container" flex ng-class="{\'flex-basis-auto-ie11\': !$ctrl.isOverlayFullView }"><div class="services-index-under" hide-xs role="navigation"><div id="services-index" layout="column" layout-align="start start" sticky offset="35"><div ng-if="!$ctrl.isOverlayFullView" style="height: 2em;"></div><md-button aria-label="{{service.title|translate}}" class="zero-margin button-right-align button-link" ng-class="($ctrl.shouldAddSearchWithinClass(service)) ? \'search-within-p-only\' : \'\'" ng-repeat="service in $ctrl.services track by $index" ng-click="$ctrl.scrollToElementIdWithBeacon(service.scrollId);$ctrl.sendNavigateToTabBeacon(service.scrollId);" ng-if="!service.isDisabled && $ctrl.showConditionalService(service) && !service.isHidden"><span translate="{{service.title}}"></span><md-tooltip md-delay="400" md-direction="left"><span translate="{{service.title}}"></span></md-tooltip></md-button><div ng-if="::($ctrl.enableSU())" class="accessible-hide"></div><md-button ng-if="::$ctrl.isOverlayFullView && !$ctrl.isLastRecordByState()" class="accessible-close zero-margin button-link" (click)="$ctrl.getNextRecord()" aria-label="{{::(\'nui.aria.fulldisplay.goToNextButton\' | translate)}}"><span translate="nui.aria.fulldisplay.nextButton.short"></span></md-button><md-button ng-if="::$ctrl.isOverlayFullView && !$ctrl.isFirstRecord()" class="accessible-close zero-margin button-link" (click)="$ctrl.getPreviousRecord()" aria-label="{{::(\'nui.aria.fulldisplay.goToPreviousButton\' | translate)}}"><span translate="nui.aria.fulldisplay.previousButton.short"></span></md-button><md-button ng-if="::$ctrl.isOverlayFullView" class="accessible-close zero-margin button-link" (click)="$ctrl.closeDialog()" aria-label="{{::(\'nui.aria.fulldisplay.closeButton\' | translate)}}"><span translate="nui.aria.fulldisplay.closeButton.short"></span></md-button></div></div><div ng-attr-id="{{$ctrl.services[0].scrollId}}"><prm-full-view-service-container [load-additional-services]="$ctrl.loadFullViewAdditionalServices || !$ctrl.isOverlayFullView" [item]="::$ctrl.item" [isfavorites]="$ctrl.isfavorites" [service]="$ctrl.services[0]" [is-overlay-full-view]="$ctrl.isOverlayFullView"></prm-full-view-service-container></div><div class="full-view-section" ng-class="($ctrl.shouldAddSearchWithinClass(service)) ? \'search-within-p-only\' : \'\'" ng-repeat="service in $ctrl.services.slice(1) track by $index" ng-attr-id="{{service.scrollId}}" ng-if="!service.isDisabled && (service.serviceName!=\'quickaccess\'||!$ctrl.isScreenSizeXs) "><div class="full-view-section-content" ng-if="$ctrl.showConditionalService(service)"><prm-full-view-service-container [load-additional-services]="$ctrl.loadFullViewAdditionalServices || !$ctrl.isOverlayFullView" [item]="::$ctrl.item" [service]="service" [index]="::$index" [is-overlay-full-view]="::$ctrl.isOverlayFullView"></prm-full-view-service-container></div></div><div ng-if="::($ctrl.enableSU())" class="syndetic-unbound-section"><prm-syndetic-unbound [item]="::$ctrl.item"></prm-syndetic-unbound></div></div><div ng-if="::(($ctrl.bxdisplay || $ctrl.enableSU()) && $ctrl.isOverlayFullView)" class="full-view-aside" flex-md="25" flex-lg="25" flex-xl="20" flex><prm-recomendations [item]="::$ctrl.item" [(bxdisplay)]="$ctrl.bxdisplay"></prm-recomendations><div class="unbound_similar"></div></div><div ng-if="::(($ctrl.bxdisplay || $ctrl.enableSU()) && $ctrl.isOverlayFullView)" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div class="full-view-spacer" ng-if="::(!($ctrl.bxdisplay || $ctrl.enableSU())  && $ctrl.isOverlayFullView)" flex="0" flex-md="0" flex-lg="20" flex-xl="30" ng-class="{\'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus}"></div></div><div ng-if="::(($ctrl.bxdisplay || $ctrl.enableSU()) && !$ctrl.isOverlayFullView)" flex-md="25" flex-lg="25" flex-xl="20" flex><prm-recomendations [item]="::$ctrl.item" [bxenable]="::$ctrl.bxenable" [(bxdisplay)]="::$ctrl.bxdisplay"></prm-recomendations><div class="unbound_similar"></div></div><div ng-if="::(($ctrl.bxdisplay || $ctrl.enableSU()) && !$ctrl.isOverlayFullView)" flex="0" flex-gt-md="5" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div><div class="full-view-spacer" ng-if="::(!($ctrl.bxdisplay || $ctrl.enableSU())  && !$ctrl.isOverlayFullView)" flex="0" flex-md="0" flex-lg="20" flex-xl="30" ng-class="{\'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus}"></div></div><div ng-if="$ctrl.isRestrictedRecord()" class="margin-bottom-medium zero-padding-bottom ng-scope" layout="row" layout-align="center center"><prm-sign-in-to-view flex-sm="50" flex-xs="90" flex-lg="30"></prm-sign-in-to-view></div></div></div><prm-full-view-after parent-ctrl="$ctrl"></prm-full-view-after>');
$templateCache.put('components/search/fullView/sign-in-to-view.html','<div flex-gt-lg="15" flex="0"></div><md-card class="default-card"><md-card-content><h2 class="light-text" translate="nui.search.error.permalink.header"></h2><p><span ng-repeat="message in $ctrl.getMessages()" class="display-block" translate="{{message}}"></span></p><md-card-actions class="md-actions layout-padding layout-align-end-center layout-row" layout="row" layout-align="end center" ng-if="$ctrl.displaySignInButton()"><button ng-click="$ctrl.handleLogin()" class="button-confirm zero-margin button-with-icon md-button md-ink-ripple" type="button" aria-label="{{\'nui.search.error.aria.permalink.signIn\' | translate}}"><prm-icon icon-type="{{$ctrl.signInIcon.signInToViewPermalimk.type}}" svg-icon-set="{{$ctrl.signInIcon.signInToViewPermalimk.iconSet}}" icon-definition="{{$ctrl.signInIcon.signInToViewPermalimk.icon}}"></prm-icon><span class="ng-scope" translate="nui.search.error.permalink.signIn"></span><div class="md-ripple-container"></div></button></md-card-actions></md-card-content></md-card><div flex-gt-lg="15" flex="0" class="flex-gt-lg-15 flex-0"></div><prm-sign-in-to-view-after parent-ctrl="$ctrl"></prm-sign-in-to-view-after>');
$templateCache.put('components/search/preFilters/pre-filters.html','<div layout="row" class="container" flex flex-xs="100"><md-input-container ng-repeat="(type, filter) in $ctrl.filters" ng-class="{\'is-active\': $ctrl.isActive(filter)}" ng-if="filter.display"><md-select ng-if="filter.options" ng-model="filter.selection" ng-change="$ctrl.onChanged(type, filter.selection)"><md-option ng-repeat="option in filter.options" value="{{option}}"><span>{{$ctrl.getLabel(filter.translatePrefix,option)}}</span></md-option></md-select></md-input-container><md-button class="accessible-close zero-margin md-icon-button" (click)="$ctrl.search()" aria-label="{{\'nui.aria.submitSearch\' | translate}}"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div><div class="accessible-only" ng-if="$ctrl.isPreFiltersAlert()" role="alert" aria-live="assertive">{{$ctrl.getPreFiltersAlert()}}</div><prm-pre-filters-after parent-ctrl="$ctrl"></prm-pre-filters-after>');
$templateCache.put('components/search/referenceEntry/reference-entry-item.html','<div ng-cloak class="reference-entry-item-inner" ng-if="$ctrl.item"><div class="reference-entry-content" ng-class="{\'is-cropped\': $ctrl.descCropped }" layout="column"><span class="reference-entry-type"><span translate="reference_entry.mediatype.about_the_topic"></span></span><h3 class="item-title">{{$ctrl.item.pnx.display.title[0]}}</h3><div layout="row" class="ref-entry-info-row"><div class="margin-right-large relative-position" flex="75"><p id="reference-entry-description">{{$ctrl.description[0]}}</p><md-button aria-label="{{$ctrl.getViewMoreButtonText() | translate}}" class="md-primary" ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}" ng-if="$ctrl.showViewMoreButton" ng-click="$ctrl.toggleDescCropped(); $event.stopPropagation();"><span translate="{{$ctrl.getViewMoreButtonText()}}"/></md-button></div><div class="margin-right-large" flex="25"><p><span class="bold-text" translate="reference_entry.source"></span> {{$ctrl.item.pnx.display.source[0]}}</p><p><span class="bold-text" translate="reference_entry.created"></span> {{$ctrl.item.pnx.display.creationdate[0]}}</p></div></div></div><div class="reference-entry-footer" layout="row"><div class="search-result-availability-line-wrapper"><prm-search-result-availability-line tabindex="-1" [result]="::$ctrl.item" ng-click="$event.stopPropagation()" [is-ref-entry]="true"></prm-search-result-availability-line></div></div></div><prm-reference-entry-item-after parent-ctrl="$ctrl"></prm-reference-entry-item-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-card-content.html','<div ng-class="::{\'layout-row\': $ctrl.resource.resourceType != \'library_information\'}"><div class="resource-image" ng-if="::$ctrl.resource.image_url"><div class="resource-image-inner" ng-class="::{\'person-image\': $ctrl.resource.resourceType===\'person\', \'normlized-resource-image\': $ctrl.resource.resourceType!=\'library_information\'}"><img class="md-card-image" ng-src="{{::$ctrl.resource.image_url}}"/></div></div><div class="resource-content" layout-fill><h3 class="normal-text resource-title"><div><span ng-if="::(!$ctrl.resource.url_text && !$ctrl.resource.url) || $ctrl.resource.url_text">{{::$ctrl.resource.name}}</span></div><a ng-if="::$ctrl.resource.url" ng-href="{{::$ctrl.resource.url}}" target="_blank" ng-click="$ctrl.handle_click()" aria-label="{{((\'nui.aria.resRecomm.recommendedRsrc.type.label.\'+$ctrl.resource.resourceType) | translate)}}{{::($ctrl.resource.url_text|| $ctrl.resource.name || $ctrl.resource.url)}}">{{::($ctrl.resource.url_text|| $ctrl.resource.name || $ctrl.resource.url)}}</a></h3><div ng-if="::$ctrl.resource.description"><p ng-if="::$ctrl.resource.description" style="word-wrap: break-word">{{::$ctrl.resource.description}}</p></div><div ng-if="::$ctrl.resource.email"><p ng-if="::$ctrl.resource.email" style="word-wrap: break-word"><a ng-if="::$ctrl.resource.email" ng-href="mailto:{{::$ctrl.resource.email}}" aria-label="{{((\'nui.aria.resRecomm.recommendedRsrc.type.label.\'+$ctrl.resource.resourceType) | translate)}}{{::$ctrl.resource.email_text||$ctrl.resource.email}}"><prm-icon class="md-icon-button-custom" icon-type="svg" svg-icon-set="primo-actions" icon-definition="email"></prm-icon>{{::$ctrl.resource.email_text||$ctrl.resource.email}}</a></p></div></div></div><prm-resource-recommender-card-content-after parent-ctrl="$ctrl"></prm-resource-recommender-card-content-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-dialog-template.html','<div layout="row"><md-dialog aria-label="Full Display" class="prm-resource-recommendations-fullview md-dialog-full prm-full-view-dialog"><md-dialog-content layout="row" style="overflow-y: hidden; height: 100%;"><md-toolbar class="default-toolbar is-stuck zero-padding" ng-if="!$ctrl.mediaQueries.gtsm"><div class="md-toolbar-tools zero-padding" layout="row"><md-button class="back-button has-text padding-left-medium" (click)="$ctrl.dialog.hide()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button></div></md-toolbar><sticky-scroll flex="100" style="overflow-y: scroll;"><prm-resource-recommender-full-view [query]="$ctrl.query" [resources]="$ctrl.resources"></prm-resource-recommender-full-view></sticky-scroll></md-dialog-content></md-dialog><md-button class="md-icon-button close-button" ng-click="$ctrl.dialog.hide()" ng-if="$ctrl.mediaQueries.gtsm"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-full-view.html','<div class="padding-large prm-recommendations-fullview" layout="column"><div class="padding-medium"><h2 translate="nui.resRecomm.full.title" class="zero-margin-bottom"></h2><span translate="nui.resRecomm.full.description"></span> <span class="bold-text italic-text">{{$ctrl.query}}</span></div><div class="padding-medium padding-left-large" layout="row" ng-class="{\'margin-left-small\': $ctrl.mediaQueries.gtxs}"><div flex="60" layout="column"><div class="resource-item" ng-repeat="resource in $ctrl.otherResources"><span class="resource-count ng-binding">{{$index + 1}}</span><div class="resource-type" translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"></div><prm-resource-recommender-card-content [resource]="resource"></prm-resource-recommender-card-content></div></div><div class="max-width-100" layout="column" flex="40" ng-class="{\'padding-left-large\': $ctrl.mediaQueries.gtxs}"><md-card ng-repeat="resource in $ctrl.libraryResources"><md-card-title><md-card-title-text translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"><br></md-card-title-text></md-card-title><md-card-content layout="row"><prm-resource-recommender-card-content [resource]="resource"></prm-resource-recommender-card-content></md-card-content></md-card></div></div></div><prm-resource-recommender-full-view-after parent-ctrl="$ctrl"></prm-resource-recommender-full-view-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender.html','<div layout="column" layout-sm="column" ng-if="$ctrl.previewResources && $ctrl.previewResources.length"><h2 class="accessible-only"><span translate="nui.aria.resource.resourceRecommender"></span></h2><div layout="row"><div layout="row" flex><md-card ng-repeat="resource in $ctrl.previewResources| limitTo:$ctrl.resourceRecommenderLimit()" ng-class="$ctrl.previewClass" class="one-slot"><div class="resource-header" layout="column" layout-align="center start" translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"></div><md-card-content layout="row"><prm-resource-recommender-card-content [resource]="::resource" class="max-width-100"></prm-resource-recommender-card-content></md-card-content></md-card></div></div><div layout="column" layout-align="center end"><md-button class="button-as-link link-alt-color zero-margin" ng-click="$ctrl.openFullView()" ng-if="$ctrl.showAdditionalResourcesLink()"><span class="bold-text ng-binding ng-scope" translate="nui.resRecomm.brief.fullviewLink" translate-values="{\'idx_0\' : $ctrl.numOfResources()}"></span></md-button></div></div><prm-resource-recommender-after parent-ctrl="$ctrl"></prm-resource-recommender-after>');
$templateCache.put('components/search/scroller/scroll.html','<prm-scroll-after parent-ctrl="$ctrl"></prm-scroll-after>');
$templateCache.put('components/search/searchBar/advanced-search-header.html','<form class="search-element layout-full-width" name="advancedSearch" (submit)="advancedSearch.$valid && $ctrl.search()"><div layout="column" class="form-focus"><div layout="row" class="advanced-search-tabs padded-container" layout-align="space-between center" layout-wrap><div class="input-cell" ng-if="$ctrl.searchTabs.length > 1" layout="row" layout-wrap layout-align="start center"><span translate="search-advanced.search.title" class="bold-text"></span><md-radio-group ng-model="$ctrl.selectedSearchTab" layout="row" ng-change="$ctrl.changeSearchFields()" layout-wrap><md-radio-button ng-repeat="tab in $ctrl.searchTabs" value="{{tab}}" class="md-primary" aria-label="{{\'tabbedmenu.\'+tab+\'.label\' | translate}}"><span translate="tabbedmenu.{{tab}}.label"></span><md-tooltip md-delay="400"><span translate="tabbedmenu.{{tab}}.tooltip"></span></md-tooltip></md-radio-button></md-radio-group></div><div class="input-cell"><md-input-container ng-if="$ctrl.scopesOptions.length > 1" class="underlined-input zero-margin" layout="row" layout-align="start center"><label translate="search-advanced.scopes.label" class="bold-text width-auto"></label><md-select ng-model="$ctrl.scope" ng-change="$ctrl.onChange()"><md-option ng-repeat="scope in $ctrl.scopesOptions" value="{{scope}}"><span translate="scopes.option.{{scope}}" role="button" alt="{{\'search-advanced.scopes.label\' | translate}}"></span></md-option></md-select></md-input-container></div></div><div layout="row" flex layout-xs="column"><md-card layout="column" layout-align="start start" flex class="zero-margin marginless-inputs padded-container" role="region" translate-attr="{\'aria-label\': \'nui.aria.queryParts\'}"><div layout="column" layout-align="start start" class="layout-full-width"><div layout="row" ng-repeat="row in $ctrl.rowArray | limitTo: $ctrl.limit" class="inputs-row animate-input layout-full-width"><md-input-container class="underlined-input tiny-bold uppercase" ng-if="!$first && $ctrl.boolOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.boolean\' | translate:\'{number: \\\'\'+($indexi+1)+\'\\\'}\'}}" ng-model="row.boolOperator " ng-change="$ctrl.onChange()"><md-option ng-repeat="bool in $ctrl.boolOptions" ng-value="bool"><span translate="search-advanced.boolOperator.option.{{bool}}" role="button"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.searchCategoryOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.field\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" ng-disabled="row.searchOperator == \'startswith\'" ng-model="row.searchCategory" ng-change="$ctrl.onChange()"><md-option ng-repeat="category in $ctrl.searchCategoryOptions" ng-value="category"><span translate="search-advanced.scope.option.nui.advanced.index.{{category}}" role="button"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input italics" ng-if="$ctrl.serachOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.percision\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" ng-model="row.searchOperator" ng-change="$ctrl.changeOperator($index)"><md-option ng-repeat="operator in $ctrl.serachOptions" ng-value="operator"><span translate="search-advanced.precisionOperator.option.{{operator}}" role="button"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input bold-text" flex ng-if="$ctrl.boolOptions.length > 0 || $ctrl.searchCategoryOptions.length > 0\r\n                            || $ctrl.serachOptions.length > 0 "><input aria-label="{{\'nui.aria.advanced.query\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" name="textField" ng-model="row.searchQuery"/></md-input-container></div></div><md-divider class="margin-top-small margin-bottom-small"></md-divider><div layout="row" layout-align="start center" class="margin-top-small"><md-button aria-label="{{\'nui.search-advanced.add\' | translate}}" class="button-with-icon md-primary zero-margin button-with-icon" ng-click="$ctrl.incrementLimit()" ng-hide="$ctrl.limit >= 7" ng-if="$ctrl.boolOptions.length > 0 || $ctrl.searchCategoryOptions.length > 0|| $ctrl.serachOptions.length > 0 "><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="plus"></prm-icon><span translate="nui.search-advanced.add"></span></md-button><span class="margin-right-small"></span><md-button ng-if="$ctrl.clearForm || $ctrl.textAppears()" class="button-with-icon zero-margin button-notice button-with-icon" ng-click="$ctrl.clearSearchForm()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="replay"></prm-icon><span translate="link.title.search.clear"></span></md-button></div></md-card><md-card flex-gt-sm="30" flex class="zero-margin marginless-inputs padded-container" layout="column" role="region" translate-attr="{\'aria-label\': \'nui.aria.searchFilters\'}"><div layout="column"><md-input-container class="underlined-input" ng-if="$ctrl.materialType.label && $ctrl.materialType.displayOptions.length > 0"><label translate="search-advanced.label.material_type"></label><md-select ng-disabled="$ctrl.materialType.displayOptions.length == 1" ng-model="$ctrl.materialType.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="material in $ctrl.materialType.displayOptions" ng-value="material"><span translate="search-advanced.mediaType.option.{{material}}" role="button" alt="{{\'search-advanced.label.material_type\' | translate}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.language.label && $ctrl.language.displayOptions.length > 0"><label translate="search-advanced.label.language"></label><md-select ng-disabled="$ctrl.language.displayOptions.length == 1" ng-model="$ctrl.language.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="language in $ctrl.langsList track by $index" ng-value="$ctrl.getLangCode(language)"><span role="button" alt="{{\'search-advanced.label.language\' | translate}}">{{language}}</span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.publicationData.label && $ctrl.publicationData.displayOptions.length > 0"><label translate="search-advanced.label.publication_date"></label><md-select ng-disabled="$ctrl.publicationData.displayOptions.length == 1" ng-model="$ctrl.publicationData.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="publication in $ctrl.publicationData.displayOptions" ng-value="publication"><span translate="{{$ctrl.getCodeForPublicationDate(publication)}}{{publication}}" role="button" alt="{{\'search-advanced.label.publication_date\' | translate}}"></span></md-option></md-select></md-input-container><div role="group"><div layout="row" ng-if="$ctrl.specificDate()" class="date-range-inputs animate-input"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.DateRangeStart" id="dayStartListBox"></label><md-select ng-model="$ctrl.startDay.selection" md-on-open="$ctrl.onOpen(); $ctrl.setSelectedCompStr(\'days\')" md-on-close="$ctrl.onClose()" ng-change="$ctrl.onChange()" aria-labelledby="dayStartListBox"><md-option ng-repeat="day in $ctrl.startDay.displayOptions" ng-value="day"><span translate-default="{{day}}" role="button" translate="search-advanced.drStartDay.option.{{day}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input"><md-select ng-model="$ctrl.startMonth.selection" md-on-open="$ctrl.onOpen(); $ctrl.setSelectedCompStr(\'months\')" md-on-close="$ctrl.onClose()" ng-change="$ctrl.onChange()"><md-option ng-repeat="month in $ctrl.startMonth.displayOptions" ng-value="month"><span translate-default="{{month}}" role="button" translate="search-advanced.drStartMonth.option.{{month}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input hidden-label"><input placeholder="{{\'search-advanced.DateRange.label.Year\' | translate}}" type="text" ng-model="$ctrl.startYear" maxlength="5" size="5" name="startYear" ng-pattern="$ctrl.yearRegex"/></md-input-container></div><div ng-messages="advancedSearch.startYear.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div><div layout="row" ng-if="$ctrl.specificDate()" class="date-range-inputs animate-input"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.DateRangeEnd" id="dayEndListBox"></label><md-select ng-model="$ctrl.endDay.selection" md-on-open="$ctrl.onOpen(); $ctrl.setSelectedCompStr(\'days\')" md-on-close="$ctrl.onClose()" ng-change="$ctrl.onChange()" aria-labelledby="dayEndListBox"><md-option ng-repeat="day in $ctrl.endDay.displayOptions" ng-value="day"><span translate-default="{{day}}" role="button" translate="search-advanced.drEndDay.option.{{day}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input"><md-select ng-model="$ctrl.endMonth.selection" md-on-open="$ctrl.onOpen(); $ctrl.setSelectedCompStr(\'months\')" md-on-close="$ctrl.onClose()" ng-change="$ctrl.onChange()"><md-option ng-repeat="month in $ctrl.endMonth.displayOptions" ng-value="month"><span translate-default="{{month}}" role="button" translate="search-advanced.drEndMonth.option.{{month}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input hidden-label"><input placeholder="{{\'search-advanced.DateRange.label.Year\' | translate}}" type="text" ng-model="$ctrl.endYear" maxlength="5" size="5" name="endYear" ng-pattern="$ctrl.yearRegex"></md-input-container></div><div ng-messages="advancedSearch.endYear.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div><span translate="{{$ctrl.errorCode}}" ng-if="$ctrl.errorCode && $ctrl.specificDate()" style="color:tomato"></span><span ng-if="$ctrl.specificDate()" role="alert" class="accessible-only" translate="{{$ctrl.isDayOrMonthListIsOpen ? \'nui.aria.advancedSearch.DayMonthListOpened\' :\'nui.aria.advancedSearch.DayMonthListClosed\'}}" translate-values="$ctrl.getPlaceHolders()"></span></div></div></md-card></div><div layout="row" class="advanced-search-output" flex ng-if="$ctrl.textAppears()"><md-card class="marginless-inputs layout-full-width" layout-align="center start"><div layout="row" ng-if="$ctrl.textAppears()" layout-align="start center" layout-align-xs="center" class="layout-full-width"><div class="search-string padding-right-medium" layout="column" flex hide-xs><div><div ng-repeat="row in $ctrl.rowArray | limitTo: $ctrl.limit" ng-if="row.searchQuery" class="string-block animate-scale middle" ng-class="{\'clear-row\': row.boolOperator == \'OR\'}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="keyboard-return" ng-if="$ctrl.firstQuery() == $index" class="prm-positive h-flipped"></prm-icon><span ng-hide="$ctrl.firstQuery() == $index" ng-if="$ctrl.boolOptions.length > 0"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="keyboard-return" ng-if="$ctrl.rowArray[$index].boolOperator == \'OR\'" class="prm-positive h-flipped"></prm-icon><md-input-container class="tiny-bold uppercase string-field"><md-select aria-label="{{\'nui.aria.advanced.boolean\' | translate}}" ng-model="row.boolOperator " ng-change="$ctrl.onChange()"><md-option ng-repeat="bool in $ctrl.boolOptions" ng-value="bool"><span translate="search-advanced.boolOperator.option.{{bool}}" role="button"></span></md-option></md-select></md-input-container></span><span><md-input-container class="string-field" ng-if="$ctrl.searchCategoryOptions.length > 0"><md-select ng-disabled="row.searchOperator == \'startswith\'" ng-model="row.searchCategory" ng-change="$ctrl.onChange()" aria-label="{{\'nui.aria.advanced.field\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}"><md-option ng-repeat="category in $ctrl.searchCategoryOptions" ng-value="category"><span role="button" translate="search-advanced.scope.option.nui.advanced.index.{{category}}"></span></md-option></md-select></md-input-container></span><span><md-input-container class="italic-text string-field" ng-if="$ctrl.serachOptions.length > 0"><md-select ng-model="row.searchOperator" ng-change="$ctrl.changeOperator($index)" aria-label="{{\'nui.aria.advanced.percision\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}"><md-option ng-repeat="operator in $ctrl.serachOptions" ng-value="operator"><span translate="search-advanced.precisionOperator.option.{{operator}}" role="button"></span></md-option></md-select></md-input-container></span><span class="string-field bold-text"><input type="text" ng-model="row.searchQuery" title="{{row.searchQuery}}" pu-elastic-input pu-elastic-input-maxwidth="none" ng-readonly="$ctrl.isEdgeOrIE" ng-focus="$ctrl.removeReadonly($event)" ng-blur="$ctrl.addReadonly($event)"/></span></div></div></div><div layout="row"><md-button type="submit" class="button-confirm button-large button-with-icon" aria-label="{{\'nui.aria.submitSearch\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon><span translate="link.title.search.search"></span></md-button></div></div></md-card></div></div><div ng-if="$ctrl.showSignIn"><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar></div></form><prm-advanced-search-after parent-ctrl="$ctrl"></prm-advanced-search-after>');
$templateCache.put('components/search/searchBar/search-bar.html','<div layout="column" layout-fill tabindex="-1" role="search" ng-class="{\'zero-padding\': $ctrl.showTabsAndScopesVal()}"><div class="search-wrapper dark-toolbar prm-top-bar-container main-header-row" div layout="row" ng-class="{\'facet-to-left\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xs && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.md}"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'facet-to-left-spacer\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xl && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs, \'flex-xl-25\': $ctrl.facetToLeft}"></div><div class="search-elements-wrapper" layout="column" flex flex-sm="90" flex-md="75" flex-lg="65" flex-xl="50" ng-class="(!$ctrl.advancedSearch ?\'simple-mode\' : \'advanced-mode\')  + \' \' + ($ctrl.mainSearchField ? \'has-input\' : \'\') + \' \' + ($ctrl.mediaQueries.lgPlus ? \'flex-lgPlus-55\' : \'\') + \' \' + ($ctrl.facetToLeft? \'facet-to-left-search-bar\' : \'\')"><div class="simple-search-wrapper layout-full-width" ng-if="!$ctrl.advancedSearch"><form class="layout-full-height" layout="column" name="search-form" ng-submit="$ctrl.onSubmit()"><input type="submit" class="accessible-only" tabindex="-1" aria-hidden="true" aria-label="{{$ctrl.getSubmitAriaLabelCode() | translate}}"/><div class="layout-full-width"><div class="search-element-inner layout-full-width"><div class="search-input" ng-class="{\'flex-sm-40\': ($ctrl.isLandscapeView && $ctrl.showTabsAndScopesVal())}"><prm-autocomplete class="search-input-container EXLPRMHeaderAutoComplete" md-input-id="searchBar" md-search-text="$ctrl.mainSearchField" md-search-text-change="$ctrl.autocompleteQuery($ctrl.mainSearchField)" md-selected-item="$ctrl.selectedItem" md-selected-item-change="$ctrl.onSelectItem()" md-item-text="item.display || $ctrl.typedQuery " md-min-length="2" md-delay="200" md-autofocus="false" md-no-cache="true" md-items="item in ::$ctrl.autoCompleteItems" md-item-text="item" placeholder="{{::$ctrl.placeHolderText}}" clear="{{::$ctrl.clearButtonText}}" searchField="{{::$ctrl.searchFieldText}}" flex><md-item-template><div ng-if="::item.tab"><span md-highlight-text="$ctrl.mainSearchField">{{$ctrl.mainSearchField}}</span><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon><span class="suggestion-scope" translate="{{::\'tabbedmenu.\'+item.tab+\'.label\'}}"></span></div><div ng-if="::!item.tab" md-highlight-text="$ctrl.mainSearchField">{{::item.shortDisplay}}</div></md-item-template></prm-autocomplete></div><div class="search-options" ng-class="::{\'flex-sm-0 flex-0 hide-on-xs\':!$ctrl.showTabsAndScopesVal(), \'flex-sm-40 visible\':$ctrl.showTabsAndScopesVal()}"><prm-tabs-and-scopes-selector ng-if="::$ctrl.showTabsAndScopesVal()" [(selected-scope)]="$ctrl.scopeField" [(selected-tab)]="$ctrl.selectedTab" ng-class="::{\'is-displayed\':$ctrl.showTabsAndScopesVal()}" (update-find-in-db-event)="$ctrl.updateShowFindDBButton($event)" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-tabs-and-scopes-selector></div><div class="search-actions" ng-if="::(!$ctrl.scopesDialerConfiguration.display)" layout-align-xs="start center"><md-button ng-if="::$ctrl.showVoiceSearchButton" id="voiceSearchButton" translate-attr="{\'aria-label\': \'nui.aria.voiceSearch.open\'}" class="zero-margin button-link large-icon" (click)="$ctrl.onVoiceSearchStart()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="voice-search"></prm-icon></md-button><md-button class="zero-margin button-confirm large-icon" aria-label="{{$ctrl.getSubmitAriaLabelCode() | translate}}" (click)="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></div></div></form></div><div class="advanced-search-wrapper layout-full-width" layout="row" ng-if="$ctrl.advancedSearch" ng-cloak><prm-advanced-search tabindex="0" id="advanced-search" [(selected-scope)]="$ctrl.scopeField" [(selected-tab)]="$ctrl.selectedTab" [(show-tab-and-scopes)]="$ctrl.showTabsAndScopes" [(typed-query)]="$ctrl.mainSearchField" (update-find-in-db-event)="$ctrl.updateShowFindDBButton($event)"></prm-advanced-search><md-button class="switch-to-simple zero-margin md-icon-button" ng-click="$ctrl.switchAdvancedSearch()" hide-gt-xs><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div><div ng-if="$ctrl.isShowFindDBButton || $ctrl.isPreFilterEnable" class="search-extras layout-full-width"><div layout="row" class="pre-filters-container"><prm-pre-filters ng-if="$ctrl.isPreFilterEnable" [(selected-tab)]="$ctrl.selectedTab" [pre-filters]="$ctrl.pFilters" (search-event)="$ctrl.search($event)" flex="" class="ng-scope ng-isolate-scope flex"></prm-pre-filters><span flex ng-if="!$ctrl.isPreFilterEnable"></span><md-button ng-if="$ctrl.isShowFindDBButton" class="button-with-icon" ng-class="{\'button-over-dark\': !$ctrl.advancedSearch}" (click)="::$ctrl.openFdbIframe();" translate-attr-title="mainmenu.label.moreoptions" aria-label="{{::(\'finddb.sb.title\' | translate)}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="database"></prm-icon><span translate="finddb.sb.title"></span></md-button></div></div></div><div class="search-switch-buttons" layout-sm="column" layout-align-sm="start stretch" hide-xs ng-class="{\'facet-to-left-advanced-search\': $ctrl.facetToLeft}"><md-button translate-attr="{\'aria-label\': \'nui.aria.searchBar.advancedLink\'}" class="switch-to-advanced zero-margin button-with-icon" ng-if="!$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()"><span layout="row" layout-align="start center"><span translate="label.advanced_search"></span></span></md-button><md-button class="switch-to-simple zero-margin button-with-icon" ng-if="$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()"><span layout="row" layout-align="start center"><span translate="label.simple_search"></span></span></md-button></div><div flex="0" flex-md="0" flex-sm="0" flex-lg="15" flex-xl="15" ng-class="{\'flex-lgPlus-10\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xs}"></div></div><div layout="row" ng-if="!$ctrl.advancedSearch && $ctrl.showSignIn"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20"></div><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><div class="padding-left-medium" flex="0" flex-md="25" flex-lg="10" flex-xl="15" hide-xs></div><div flex="0" flex-md="0" flex-sm="10" flex-lg="20" flex-xl="20"></div></div></div><div class="advanced-search-backdrop" ng-class="{\'visible\': $ctrl.advancedSearch}"></div><prm-search-bar-after parent-ctrl="$ctrl"></prm-search-bar-after>');
$templateCache.put('components/search/searchBar/voice-search-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" id="voiceSearchToast" class="md-toast-content voice-search-toast relative-position"><span role="alert" class="accessible-only" translate="{{$ctrl.isVoiceSearchToastOpen ? \'nui.aria.voiceSearch.voiceSearch.Listening\' :\'nui.aria.voiceSearch.voiceSearch.closed\'}}"></span><div layout="column" layout-align="center center" style="height: 100%" class="md-toast-content voice-mobile-view"><div layout="row" layout-align="start center" class="voice-search-mobile-layout"><span class="md-toast-text" ng-if="true" aria-live="assertive">{{$ctrl.voiceSearchTitle}}</span><div class="voice-search-button-big blink-icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="voice-search"></prm-icon></div></div><div layout="row" layout-align="end start" class="md-toast-content change-lang-content" ng-class="{\'start-content\':!$ctrl.detectMobile()}"><label class="bold-text"><span translate="nui.voice_language"></span></label><md-input-container ng-if="$ctrl.showVoiceSearchLanguages" class="static-select empty-select-on-init" layout="row"><md-select id="voiceSearchLanguageButton" (keydown)="$ctrl.keydownSupportVoiceSearchLanguage($event)" ng-model="$ctrl.voiceSearchLanguage" ng-change="$ctrl.changeVoiceSearchLanguage(); $ctrl.voiceSearchChangeLanguageBeacon();" aria-label="{{\'nui.aria.voiceSearch.changeLanguage\' | translate}}"><md-option ng-repeat="language in ::$ctrl.languages" value="{{::language}}"><span translate="{{::language}}"></span></md-option></md-select></md-input-container><span class="margin-left-small" ng-if="!$ctrl.showVoiceSearchLanguages" translate="{{::$ctrl.languages[0]}}"></span></div></div><md-button class="md-icon-button absolute-position" (keydown)="$ctrl.keydownSupportVoiceCloseButton($event)" id="voiceSearchCloseButton" aria-label="{{\'nui.aria.voiceSearch.close\' | translate}}" ng-click="$ctrl.onDismiss()"><prm-icon class="close-icon" [icon-type]="::$ctrl.actionsIcons.closeActions.type" [svg-icon-set]="::$ctrl.actionsIcons.closeActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.closeActions.icon"></prm-icon></md-button></md-toast><prm-voice-search-toast-after parent-ctrl="$ctrl"></prm-voice-search-toast-after>');
$templateCache.put('components/search/snippet/snippet.html','<span ng-if="::$ctrl.getSnippet()"><prm-icon class="open-quote" icon-type="{{::$ctrl.actionIcons.citations.type}}" svg-icon-set="{{::$ctrl.actionIcons.citations.iconSet}}" icon-definition="{{::$ctrl.actionIcons.citations.icon}}"></prm-icon><prm-highlight class="italic-text" terms="$ctrl.highlights()" text="::$ctrl.getSnippet()"></prm-highlight><prm-icon class="close-quote" icon-type="{{::$ctrl.actionIcons.citations.type}}" svg-icon-set="{{::$ctrl.actionIcons.citations.iconSet}}" icon-definition="{{::$ctrl.actionIcons.citations.icon}}"></prm-icon></span><prm-snippet-after parent-ctrl="$ctrl"></prm-snippet-after>');
$templateCache.put('components/search/timesCited/times-cited.html','<div id="timesCited" class="margin-top-small" ng-if="$ctrl.shouldDisplayTimesCited"><div ng-if="$ctrl.isTimesCitedExists()" ng-repeat="item in $ctrl.citedData" layout="row"><div class="logo-item" layout="column" style="width: 100px;"><img src="{{$ctrl.vendorLogo(item)}}" alt="" class="cited_logo"></div><div><div><a ng-href="{{$ctrl.citedLink(item)}}" (click)="$ctrl.reportBeacon()" target="_blank" class="arrow-link" style="line-height: 2.7em; padding: 0px 40px 0px 0px;" aria-label="{{$ctrl.getAraiaLabelForTimeCited(item)}}{{\' \'}}{{\'results.scopes.for\' | translate}}{{\' \'}}{{$ctrl.getTimeCitedType(item) | translate}}" title="{{$ctrl.getAraiaLabelForTimeCited(item)}}{{\' \'}}{{\'results.scopes.for\' | translate}}{{\' \'}}{{$ctrl.getTimeCitedType(item) | translate}}"><span ng-if="$ctrl.extensionVal(item)>1" translate="nui.citation.multicited" translate-values="{\'idx_0\' : $ctrl.extensionVal(item)}"></span> <span ng-if="$ctrl.extensionVal(item) ==1" translate="nui.citation.singlecited"></span> <strong>{{$ctrl.scopOrWosTrans(item)}}</strong><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div><br></div></div></div><prm-times-cited-after parent-ctrl="$ctrl"></prm-times-cited-after>');
$templateCache.put('components/search/topbar/topbar.html','<prm-top-bar-before parent-ctrl="$ctrl"></prm-top-bar-before><div class="top-nav-bar" layout="row" tabindex="-1" role="banner"><prm-skip-to tabindex="-1"></prm-skip-to><prm-logo></prm-logo><div ng-if="$ctrl.isDeposit()"><div class="layout-column layout-align-center-center" style="height: 100%; width: max-content; padding-left: 0.75em;"><header><span translate="repDeliveryViewer.alma" class="md-headline" style="font-weight: 400;"></span></header></div></div><div flex="50" hide-xs></div><prm-main-menu role="navigation" ng-class="{\'isServicePage\': $ctrl.isServicePage(), \'isSummonOverAlma\': $ctrl.isSummonOverAlma(), \'isDeposit\': $ctrl.isDeposit()}" menu-type="menu" flex="50" hide-xs></prm-main-menu><div flex="50" flex-xs="100"></div><prm-search-bookmark-filter ng-show="$ctrl.displayFavorites" class="view-switcher" layout-align="end center" layout="row" flex="noshrink"></prm-search-bookmark-filter><prm-user-area hide-gt-xs ng-if="$ctrl.mediaQueries.xs"></prm-user-area><prm-user-area-expandable hide-xs ng-if="!$ctrl.mediaQueries.xs"></prm-user-area-expandable></div><prm-topbar-after parent-ctrl="$ctrl"></prm-topbar-after>');
$templateCache.put('components/search/virtualBrowse/virtual-browse.html','<div tabindex="-1" class="container-nav-controls"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}" ng-disabled="$ctrl.isLeftScrollDisabled" ng-keypress="$ctrl.previous($event)" ng-mousedown="$ctrl.scrollLeftMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-left"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.previous\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon></md-button></div><md-virtual-repeat-container dir="ltr" role="tablist" id="prm-virtual-browse" md-top-index="$ctrl.currentIndex" ng-keyup="$ctrl.handleKeyUp($event)" md-orient-horizontal><ul tabindex="-1" role="listbox" layout="row" layout-align="start start" style="min-width:100%"><li in-view="$ctrl.onItemInView($index, $inview, $inviewInfo)" in-view-options="{generateDirection: true, throttle: 50, threshold: 1}" md-virtual-repeat="virtualBrowseItem in $ctrl.dynamicVirtualBrowseItems" ng-click="$ctrl.navigateToItemFullView(virtualBrowseItem, $index);$event.stopPropagation();" id="vBrowseid{{$index}}" tabindex="0" role="tab" ng-focus="$ctrl.focusSupport($event)" ng-blur="$ctrl.focusOutSupport($event)" ng-keydown="$ctrl.keyDownSupport($event,virtualBrowseItem);" md-item-size="110" md-on-demand ng-mouseenter="highlightItem = true" ng-mouseleave="highlightItem = false" ng-class="{\'md-whiteframe-2dp\': highlightItem, \'md-whiteframe-5dp current-item\': $index == $ctrl.focusedIndex}"><a tabindex="-1" ui-state="$ctrl.getStateName()" ui-state-params="$ctrl.getItemFullViewParams(virtualBrowseItem)" ui-sref-opts="{reload: true}"><prm-virtual-browse-item ng-style="{\'color\': \'hsl({{($index*$index)/2}}, 30%, 70%)\'}" ng-class="{\'hide-disabled-virtual-browse-items\': $index < $ctrl.leftFinalIndex || $index > $ctrl.rightFinalIndex}" [virtual-browse-item]="virtualBrowseItem"></prm-virtual-browse-item></a></li></ul></md-virtual-repeat-container><div tabindex="-1" class="container-nav-controls"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}" ng-disabled="$ctrl.isRightScrollDisabled" ng-keypress="$ctrl.next($event)" ng-mousedown="$ctrl.scrollRightMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-right"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.next\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button></div><prm-virtual-browse-after parent-ctrl="$ctrl"></prm-virtual-browse-after>');
$templateCache.put('components/security/login/login.html','<prm-spinner ng-if="showLoader" class="light-on-dark no-text overlay-cover" layout="row" layout-align="center center"></prm-spinner><form class="layout-full-width" layout="column" ng-submit="$ctrl.login()"><div layout="row" layout-align="center center" style="margin-top: 1.5em; min-height: 40px;"><div class="animate-enter-leave-scale-bounce" style="width: 0;position: absolute; top: 1em; z-index: 10; left: 0" ng-if="$ctrl.showBackButton()"><md-button class="md-icon-button icon-button-large" aria-label="{{\'nui.aria.login.backBtn\' | translate}}" ng-click="$ctrl.handleBackButtonClick()"><prm-icon [icon-type]="::$ctrl.loginIcons.backIcon.type" [svg-icon-set]="::$ctrl.loginIcons.backIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.backIcon.icon"></prm-icon></md-button></div><h2 class="md-headline light-text" layout="row" layout-align="center center" flex><span translate="{{$ctrl.getLoginTitleForDisplay()}}"></span></h2></div><md-dialog-content (keydown)="$ctrl.keydownSupportGustLogin($event)"><md-tabs md-dynamic-height md-border-bottom md-selected="$ctrl.selectedTab" class="hidden-tabs"><md-tab label="one"><md-content><md-list role="list" class="padded-container"><md-list-item ng-repeat="authenticationMethod in $ctrl.authenticationMethods" class="md-2-line md-long-text" ng-click="$ctrl.handleLoginClick( authenticationMethod )" aria-label="{{($ctrl.getProfileLinkForDisplay($index) | translate)}}{{\' \'}}{{($ctrl.getProfileLinkDescriptionForDisplay($index) | translate)}}"><prm-login-item [authentication-method]="authenticationMethod"></prm-login-item><div class="md-secondary"><prm-icon [icon-type]="::$ctrl.loginIcons.gotoLinkIcon.type" [svg-icon-set]="::$ctrl.loginIcons.gotoLinkIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.gotoLinkIcon.icon"></prm-icon></div></md-list-item></md-list></md-content></md-tab><md-tab label="two" md-on-select="showBackButton()"><md-content class="md-padding"><span ng-if="$ctrl.showError" role="alert" class="error-warning-message error-color"><prm-icon [icon-type]="::$ctrl.loginIcons.errorIcon.type" [svg-icon-set]="::$ctrl.loginIcons.errorIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.errorIcon.icon"></prm-icon><span translate="{{ $ctrl.getErrorForDisplay() }}" translate-values="$ctrl.getPlaceHolders()" translate-compile></span></span><div class="dialog-inputs overflow-hidden" layout="column" layout-align="start center"><md-input-container class="centered-input"><label translate="login.userid" class="text-uppercase"></label> <input type="text" ng-model="$ctrl.username" id="LoginUserName"/></md-input-container><md-input-container class="centered-input"><label translate="login.password" class="text-uppercase"></label> <input type="password" ng-model="$ctrl.password" id="LoginPassword"/></md-input-container></div><div class="dialog-divider transparent-divider"></div><prm-login-help ng-if="$ctrl.displaySigninHelp" [authentication-method]="$ctrl.selectedAuthenticationMethod"></prm-login-help></md-content></md-tab></md-tabs></md-dialog-content><md-dialog-actions class="animate-enter-leave-scale-bounce" layout="row" layout-align="center center" ng-if="!hideActionsBar"><md-button ng-if="!$ctrl.standAlone() || $ctrl.isUnionCatalogLogin()" class="button-large" ng-click="$ctrl.cancelLogin()" aria-label="{{\'nui.aria.login.cancel\' | translate}}"><span translate="login.cancel"></span></md-button><md-button ng-if="$ctrl.showSubmitButton()" class="button-large button-confirm animate-scale animate-enter-leave-scale-bounce" type="submit" style="margin-right:20px;"><span translate="login.login"></span></md-button></md-dialog-actions></form><prm-login-after parent-ctrl="$ctrl"></prm-login-after>');
$templateCache.put('components/security/login/stand-alone-login.html','<body><prm-spinner ng-if="$ctrl.isSingleAuthenticationMethodExternal()" class="light-on-dark no-text overlay-cover" layout="row" layout-align="center center"></prm-spinner><div ng-hide="$ctrl.isSingleAuthenticationMethodExternal()" layout="column" layout-fill layout-align="start center"><div flex="5"></div><div class="login-header"><prm-logo></prm-logo></div><md-card class="login-card login-dialog"><md-card-content><prm-login [authentication-methods]="$ctrl.getAuthenticationMethods()" [is-stand-alone]="true"></prm-login></md-card-content></md-card><div flex="10"></div></div></body><prm-stand-alone-login-after parent-ctrl="$ctrl"></prm-stand-alone-login-after>');
$templateCache.put('components/security/timeoutToast/timeout-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" class="md-toast-content"><div layout="row" layout-align="center center" class="md-toast-content" ng-class="{\'end-content\':!$ctrl.detectMobile()}"><span class="md-toast-text"><span translate="session.timeout.redirectMessage"></span></span></div><div layout="row" layout-align="start start" class="md-toast-content" ng-class="{\'start-content\':!$ctrl.detectMobile()}"><md-button ng-click="$ctrl.handleLogin()" ng-class="{\'mobile-size\':$ctrl.detectMobile()}" md-no-ink="true" class="md-higlight settings-button" aria-label="refresh the application"><div layout="row"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="sign-in"></prm-icon><span translate="eshelf.signin.title"></span></div></md-button><md-button ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}} "><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div></md-toast><prm-timeout-toast-after parent-ctrl="$ctrl"></prm-timeout-toast-after>');
$templateCache.put('components/tags/tagsList/tags-list.html','<div layout="column" layout-align="start start"><div ng-if="$ctrl.tagslist.length > 0"><md-chips ng-model="$ctrl.tagslist" name="{{$chip.tagName}}" readonly="true" md-removable="false"><md-chip-template><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="tag-outline"></prm-icon><a (click)="$ctrl.closeDialog()" ui-sref="exploreMain.search({{::$ctrl.resultSearchUrl($chip.tagName)}})" ui-sref-opts="{reload: true}"><strong>{{$chip.tagName}}</strong> </a><em class="tagNameRTL" ng-if="$chip.count > 0">({{$chip.count}})</em></md-chip-template></md-chips><md-button class="button-as-link link-alt-color zero-margin" ng-if="$ctrl.isFullDisplay && !$ctrl.showAllNonUserTags" (click)="$ctrl.showAllRecordNonUserTags()"><span class="bold-text" translate="nui.facets.showmore"></span></md-button></div><div ng-if="$ctrl.editable && $ctrl.userLoggedIn()"><form name="chipsAutocompleteForm"><md-chips ng-model="$ctrl.usertagslist" md-require-match="false" md-transform-chip="$ctrl.addTag($chip)" md-enable-chip-edit="true" delete-button-label="Remove Tag" delete-hint="Press delete to remove tag" md-on-add="$ctrl.onTagAdd($chip)" md-on-remove="$ctrl.onTagRemove($chip)"><md-autocomplete ng-show="$ctrl.usertagslist.length>0 || $ctrl.editTagsMode" md-selected-item="$ctrl.selectedItem" md-search-text="$ctrl.searchText" md-dropdown-items="5" md-input-name="autocompleteTagField" md-items="item in $ctrl.querySearch($ctrl.searchText)" md-item-text="item.tagName" placeholder="{{\'nui.tags.add.more\' | translate}}" md-min-length="0" md-input-minlength="0" md-autocomplete-snap="width" md-input-id="own-tags-input"><md-item-template><span md-highlight-text="$ctrl.searchText">{{item.tagName}}</span></md-item-template></md-autocomplete><md-chip-template><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="tag-outline"></prm-icon><md-tooltip><span translate="nui.tags.delete.tooltip"></span></md-tooltip><a (click)="$ctrl.closeDialog()" ui-sref="exploreMain.search({{::$ctrl.resultSearchUrl($chip.tagName)}})" ui-sref-opts="{reload: true}"><strong>{{$chip.tagName}}</strong> </a><em class="tagNameRTL" ng-if="$chip.count > 0">({{$chip.count}})</em></md-chip-template></md-chips><span translate="nui.tags.search.invalidtag" ng-if="!$ctrl.isSearchTextValid" class="error-response"></span></form><md-button class="button-link button-with-icon margin-left-zero" ng-if="!$ctrl.editTagsMode && $ctrl.usertagslist.length===0" ng-click="$ctrl.editTags()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span translate="nui.tags.add"></span></md-button></div><md-button class="button-link button-with-icon margin-left-zero" ng-if="$ctrl.editable && !$ctrl.userLoggedIn()" ng-click="$ctrl.handleLoginClick()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span translate="nui.tags.add"></span></md-button></div><prm-tags-list-after parent-ctrl="$ctrl"></prm-tags-list-after>');
$templateCache.put('components/tags/tagsResults/tags-results.html','<md-content class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="20" flex-xl="30"></div><div flex><prm-tags-results-list><h2 class="accessible-only" translate="results.title" ng-if="$ctrl.tagsSearchResult.length > 0"></h2><div class="results-title" layout="row" layout-align="start center" aria-hidden="false"><i class="results-count" ng-if="$ctrl.tagsSearchResult.length === 1">1 {{\'nui.tags.search.tagFound\'| translate}}</i> <i class="results-count" ng-if="$ctrl.tagsSearchResult.length > 1">{{$ctrl.tagsSearchResult.length}} {{\'nui.tags.search.tagsFound\'| translate}}</i> <span flex></span><prm-toggle-button><md-button class="margin-zero" ng-click="doToggle = !doToggle" ng-class="doToggle? \'toggle-one\':\'toggle-two\'"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="toggle-items"></prm-icon><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="toggle-list"></prm-icon></md-button></prm-toggle-button></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text" layout="row" layout-align="center center" style="padding-top: 5em"></prm-spinner><md-list class="prm-list prm-linkable-list-items prm-dense-list has-list-nav zero-padding" ng-class="{\'prm-bricks-list\': doToggle}" flex><span translate="nui.tags.search.noresults" ng-if="$ctrl.tagsSearchResult.length===0"></span><md-list-item class="md-2-line" ng-repeat="tag in $ctrl.tagsSearchResult | orderBy: \'tagName\'  | limitTo:$ctrl.tagsResultsLimit" ng-href="{{::$ctrl.resultSearchUrl(tag.tagName)}}"><div class="md-list-item-text" layout="row"><div layout="column" layout-align="center start" flex><h3 class="item-title bold-text"><span>{{tag.tagName}}</span> <span ng-if="doToggle">({{tag.count}})</span></h3></div><div ng-if="!doToggle" flex="20" layout-align="center start" layout="column"><span ng-if="tag.count === 1">1 {{\'nui.tags.search.record\'| translate}}</span> <span ng-if="tag.count > 1">{{tag.count}} {{\'nui.tags.search.records\'| translate}}</span></div></div></md-list-item></md-list></prm-tags-results-list></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="30"></div></md-content><prm-tags-results-after parent-ctrl="$ctrl"></prm-tags-results-after>');
$templateCache.put('components/tags/tagsResults/toggle-button.html','');
$templateCache.put('components/tags/tagsSearchBar/tags-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div layout="column" flex><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.doTagsSearch()" class="layout-full-width"><div class="classic-input" layout="row" layout-fill><div class="search-scope" layout="column" layout-align="center start"><div layout="row" layout-align="center center"><span class="static-text bold-text" layout="column" layout-align="center start" style="font-size: .8em; text-transform: uppercase;letter-spacing: 0.03em"><span class="bold-text" translate="nui.tags.yellow1"></span> <span class="bold-text" translate="nui.tags.yellow2"></span></span></div></div><md-input-container flex md-no-float><input id="searchBarTags" tabindex="0" ng-model="$ctrl.mainSearchField" placeholder="{{\'nui.tags.search.text\' | translate}}" autocomplete="off"></md-input-container><md-button class="submit-button button-confirm" aria-label="Search" ng-click="$ctrl.doTagsSearch()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div></div><div ng-if="$ctrl.withAlphabet === \'true\'" tabindex="0" layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div><prm-alphabet-toolbar flex></prm-alphabet-toolbar><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div></div><prm-tags-search-bar-after parent-ctrl="$ctrl"></prm-tags-search-bar-after>');
$templateCache.put('components/account/overview/depositsOverview/deposits-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" (click)="$ctrl.triggerLinkToDepositsSection()"><span translate="nui.deposits.header"></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="deposit in $ctrl.depositsOverviewDisplay" ng-click="$ctrl.triggerLinkToDepositsSection(deposit.depositId)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text" layout-fill><h3 ng-if="::deposit.firstLineLeft"><span>{{::deposit.firstLineLeft}}</span></h3><h4 ng-if="::deposit.secondLineLeft"><span>{{::deposit.secondLineLeft}}</span></h4><p class="no-wrap-line" ng-if="::deposit.firstLineRight" ng-class="{\'has-icon-on-left prm-positive\':deposit.isAlert}"><prm-icon ng-if="::deposit.isAlert" icon-type="{{::$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.depositsAlertIcon.icon}}"></prm-icon><span>{{::deposit.firstLineRight}}</span></p><p ng-if="::deposit.secondLineRight" class="weak-text"><span translate="nui.deposits.updatedOn"></span> <span>{{::deposit.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfDeposits || $ctrl.numOfDeposits === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.nodeposits"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfDeposits > 3" (click)="$ctrl.triggerLinkToDepositsSection()" aria-label="View all"><span translate="nui.overview.deposits.viewall" translate-values="{placeholders:$ctrl.getViewAllPlaceHolder()}" translate-compile></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-deposits-overview-after parent-ctrl="$ctrl"></prm-deposits-overview-after>');
$templateCache.put('components/account/overview/finesOverview/fines-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToFinesSection()" tabindex="0"><span translate="nui.fines.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2><md-button ng-if="$ctrl.payFinesLink" class="button-link" ng-href="{{$ctrl.payFinesLink}}" target="_blank" aria-label="Pay fines button"><span translate="fines.payfinelink"></span><prm-icon icon-type="{{$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.externalLinkIcon.icon}}"></prm-icon></md-button></div><div layout="row" ng-if="$ctrl.finesBalance"><em><span translate="nui.fines.balance" translate-values="$ctrl.getFinesBalancePlaceHolder()"></span></em></div><div layout="row" ng-if="$ctrl.demeritsBalance"><em><span translate="nui.fines.demerits" translate-values="$ctrl.getDemeritsBalancePlaceHolder()"></span></em></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="fine in $ctrl.finesOverviewDisplay" ng-click="$ctrl.triggerLinkToFinesSection(fine.fineid)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="fine.firstLineLeft" class="has-icon-on-left prm-warn"><div ng-if="fine.isAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon icon-type="{{$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div><span>{{fine.firstLineLeft}}</span></h3><h4 ng-if="fine.secondLineLeft"><span translate="nui.fine.brief.1"></span> <span>{{fine.secondLineLeft}}</span></h4><p ng-if="fine.firstLineRight" class="bold-text weak-text"><span>{{fine.firstLineRight}}</span></p><p ng-if="fine.secondLineRight" class="weak-text"><span translate="nui.fine.brief.2"></span> <span>{{fine.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfFines || $ctrl.numOfFines === 0" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.emoticonCool.type}}" svg-icon-set="{{$ctrl.accountIcons.emoticonCool.iconSet}}" icon-definition="{{$ctrl.accountIcons.emoticonCool.icon}}"></prm-icon><div><span translate="nui.overview.nofines"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfFines > 3" (click)="$ctrl.triggerLinkToFinesSection()" aria-label="view fines button"><span translate="nui.overview.fines.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-fines-overview-after parent-ctrl="$ctrl"></prm-fines-overview-after>');
$templateCache.put('components/account/overview/loansOverview/loans-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToLoansSection()" tabindex="0"><span translate="nui.loans.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2><md-button ng-if="$ctrl.hasRenewableLoans()" class="button-link" (click)="$ctrl.triggerLinkToLoansSection(); $ctrl.renewAllLoans()" aria-label="{{::(\'nui.loans.renewall\' | translate)}}"><prm-icon class="h-flipped" icon-type="{{$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.renewLoanIcon.icon}}"></prm-icon><span translate="nui.loans.renewall"></span></md-button></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="item in $ctrl.loansOverviewDisplay" ng-click="$ctrl.triggerLinkToLoansSection(item.loanid)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="item.title">{{item.title}}</h3><h4 class="loans-brief-display" ng-if="item.getBriefDisplayLine(1)"><span translate="nui.loan.brief.1"></span> {{item.getBriefDisplayLine(1)}}</h4><p class="no-wrap-line" ng-class="{\'has-icon-on-left prm-warn\': item.isDueAlert()}" ng-if="item.isActiveLoan()"><prm-icon ng-if="item.isDueAlert()" icon-type="{{$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.timerIcon.icon}}"></prm-icon><span translate="{{item.getCodeAlert()}}"></span>: <span>{{item.getDateForBriefDisplay()}}</span></p><p class="normal-text loans-brief-display no-wrap-line weak-text"><span translate="nui.loan.brief.2"></span> {{item.getBriefDisplayLine(2)}}</p></div><div ng-if="!item.isActiveLoan()"><span translate="loans.return_date"></span>: <span>{{item.getDateForBriefDisplay()}}</span></div><div class="tile-item-arrow"><prm-icon icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfLoans || $ctrl.numOfLoans === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beer.type}}" svg-icon-set="{{$ctrl.accountIcons.beer.iconSet}}" icon-definition="{{$ctrl.accountIcons.beer.icon}}"></prm-icon><div><span translate="nui.overview.noloans"></span></div></div><md-button class="button-with-icon overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfLoans > 3" (click)="$ctrl.triggerLinkToLoansSection()" aria-label="view all loans button"><span translate="nui.overview.loans.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-loans-overview-after parent-ctrl="$ctrl"></prm-loans-overview-after>');
$templateCache.put('components/account/overview/messagesAndBlocksOverview/messages-and-blocks-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToMessagesSection()" tabindex="0"><span translate="nui.blocks.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="message in $ctrl.messagesOverviewDisplay" ng-click="$ctrl.triggerLinkToMessagesSection()"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="message.ilsinstitutionname" class="no-wrap-line"><span>{{message.ilsinstitutionname}}</span></h3><h4 ng-if="message.text" class="no-wrap-line"><span>{{message.text}}</span></h4></div><div class="tile-item-arrow"><prm-icon icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="$ctrl.numOfMessages === 0" ng-cloak layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beach.type}}" svg-icon-set="{{$ctrl.accountIcons.beach.iconSet}}" icon-definition="{{$ctrl.accountIcons.beach.icon}}"></prm-icon><div><span translate="nui.overview.noblocks"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfMessages > 3" (click)="$ctrl.triggerLinkToMessagesSection()" aria-label="view all messages button"><span translate="nui.overview.blocks.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-messages-and-blocks-overview-after parent-ctrl="$ctrl"></prm-messages-and-blocks-overview-after>');
$templateCache.put('components/account/overview/requestsOverview/requests-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToRequestsSection()" tabindex="0"><span translate="nui.requests.header"></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="request in $ctrl.requestsOverviewDisplay" ng-click="$ctrl.triggerLinkToRequestsSection(request.requestId)" class="display-block"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text" layout-fill><h3 ng-if="::request.firstLineLeft"><span>{{::request.firstLineLeft}}</span></h3><h4 ng-if="::request.secondLineLeft"><span translate="nui.request.brief.1"></span> <span>{{::request.secondLineLeft}}</span></h4><p class="no-wrap-line" ng-if="::request.firstLineRight" ng-class="{\'has-icon-on-left prm-positive\':request.isAlert}"><prm-icon ng-if="::request.isAlert" icon-type="{{::$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.requestsAlertIcon.icon}}"></prm-icon><span class="text-uppercase" translate="{{::(\'request.\'+request.requestType+\'.request_type\')}}"></span>. <span>{{::request.firstLineRight}}</span></p><p ng-if="::request.secondLineRight" class="weak-text"><span translate="nui.request.brief.2"></span> <span>{{::request.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfRequests || $ctrl.numOfRequests === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.norequests"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfRequests > 3" (click)="$ctrl.triggerLinkToRequestsSection()" aria-label="View all"><span translate="nui.overview.requests.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-requests-overview-after parent-ctrl="$ctrl"></prm-requests-overview-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/collectionDiscoveryViewSwitcher/collection-discovery-view-switcher.html','<span class="margin-right-small">{{\'nui.colldiscovery.view\' | translate}}</span><md-button class="md-icon-button zero-margin" style="top: -8px;font-style: normal;" ng-click="$ctrl.setResultsViewStyle(\'grid\')" ng-class="{\'is-active\': $ctrl.resultsViewStyle === \'grid\'}"><md-tooltip><span>{{\'nui.colldiscovery.view.grid.tooltip\' | translate}}</span></md-tooltip><prm-icon availability-type icon-type="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.icon}}"></prm-icon></md-button><md-button class="md-icon-button zero-margin" style="top: -8px;font-style: normal;" ng-click="$ctrl.setResultsViewStyle(\'gallery\')" ng-class="{\'is-active\': $ctrl.resultsViewStyle === \'gallery\'}"><md-tooltip><span>{{\'nui.colldiscovery.view.gallery.tooltip\' | translate}}</span></md-tooltip><prm-icon availability-type icon-type="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.icon}}"></prm-icon></md-button><prm-collection-discovery-view-switcher-after parent-ctrl="$ctrl"></prm-collection-discovery-view-switcher-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryCollectionsList/gallery-collections-list.html','<div ng-if="$ctrl.showCollections()" layout="column" class="is-gallery-view" style="margin-top: 10px;"><div class="padding-left-small margin-bottom-medium" ng-if="true" layout="row" layout-align="start center"><h2 ng-if="!$ctrl.isGalleryLobby" class="margin-zero">{{\'nui.colldiscovery.subcollections.title\' | translate}}</h2><h2 ng-if="$ctrl.isGalleryLobby" class="margin-zero">{{\'nui.colldiscovery.collections.title\' | translate}}</h2><span class="results-count text-italic margin-left-medium" style="position: relative; top: .2em;" ng-if="$ctrl.collections.length > 0 && $ctrl.isGalleryLobby">{{\'nui.colldiscovery.lobby.no.collections\' | translate: {\'idx_1\': $ctrl.collections.length} }} </span><span class="results-count text-italic margin-left-medium" style="position: relative; top: .2em;" ng-if="$ctrl.collections.length > 0 && !$ctrl.isGalleryLobby">{{\'nui.colldiscovery.lobby.no.subcollections\' | translate: {\'idx_1\': $ctrl.collections.length} }}</span></div><div layout="row" class="margin-bottom-small" flex ng-if="$ctrl.collections.length > 0" layout-wrap><prm-gallery-collection ng-repeat="collection in $ctrl.finalCollections" [collection]="collection" [next-path]="::$ctrl.nextPath" [index]="::1 + $index" [total-collections]="::$ctrl.collections.length" [is-gallery-lobby]="::$ctrl.isGalleryLobby" ng-class="{\'ie-gallery-collection\': $ctrl.isIE}"></prm-gallery-collection></div><prm-spinner ng-if="$ctrl.loadCollectionsInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner><div layout="row" class="margin-bottom-small" flex ng-if="!$ctrl.collections.length" layout-wrap><prm-gallery-collection [collection]="$ctrl.collections" [next-path]="::$ctrl.nextPath" [total-collections]="1" ng-class="{\'ie-gallery-collection\': $ctrl.isIE}"></prm-gallery-collection></div></div><prm-gallery-collections-list-after parent-ctrl="$ctrl"></prm-gallery-collections-list-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryItemsList/gallery-items-list.html','<div layout="column" ng-if="$ctrl.showItems()"><div class="padding-left-small margin-bottom-medium" ng-if="::$ctrl.itemsList" layout="row" layout-align="start center"><h2 class="margin-zero"><span translate="nui.colldiscovery.items.title"></span> <span translate="nui.colldiscovery.items.titlClarification" class="small-text"></span></h2><span class="text-italic margin-left-medium" style="position: relative; top: .2em;">{{\'nui.colldiscovery.lobby.no.items\' | translate: {\'idx_1\': $ctrl.totalItems} }} </span><span flex></span><prm-collection-discovery-view-switcher style="height: 19px; margin-left: 1em; margin-right: 15px; font-style: normal" layout="row"></prm-collection-discovery-view-switcher></div><div layout="row"><div deckgrid source="$ctrl.itemsList" class="is-gallery-view" ng-if="$ctrl.itemsViewStyle === \'gallery\'"><prm-gallery-item [item]="::card" [index]="::1 + card.$index" [total-items]="::mother.$ctrl.totalItems"></prm-gallery-item></div><div class="is-grid-view" ng-if="$ctrl.itemsViewStyle === \'grid\'" layout="row" layout-wrap><prm-gallery-item ng-repeat="item in $ctrl.itemsList" [item]="item" [index]="::1 + $index" [total-items]="::$ctrl.totalItems"></prm-gallery-item></div></div><div layout="row" layout-align="center center" ng-hide="$ctrl.searchInProgress" class="padding-top-large"><md-button ng-if="$ctrl.hasNextResults" (click)="$ctrl.getMoreResults()" class="button-confirm button-large" aria-label="{{\'nui.aria.brief.items.loadMore\' | translate}}" translate="nui.brief.items.loadMore"></md-button></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></div><div layout="column" ng-if="$ctrl.itemsList.length === 0 && $ctrl.searchQuery && !$ctrl.itemsSearchInProgress"><div class="padding-left-small margin-bottom-medium" ng-if="::$ctrl.itemsList" layout="row" layout-align="start center"><h2 class="margin-zero"><span translate="nui.colldiscovery.items.title"></span></h2><span class="text-italic margin-left-medium" style="position: relative; top: .2em;">{{\'nui.colldiscovery.lobby.no.items\' | translate: {\'idx_1\': $ctrl.totalItems} }}</span></div></div><prm-gallery-items-list-after parent-ctrl="$ctrl"></prm-gallery-items-list-after>');
$templateCache.put('components/collectionDiscovery/collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collection-navigation-breadcrumbs-item.html','<md-button class="button-as-link link-alt-color" href ng-click="vm.handleNavClick(collection); $ctrl.runCollectionDiscoveryBeacon()" ng-class="{\'button-with-icon\': $ctrl.isRootObject}" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.breadcrumbStateParams" ui-sref-opts="{reload: true, inherit:false}" aria-label="{{$ctrl.tooltip}}" title="{{$ctrl.tooltip}}"><prm-icon ng-if="::$ctrl.isRootObject" icon-type="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.icon}}"></prm-icon><span>{{::$ctrl.title}}</span></md-button><md-divider class="skewed-divider" ng-if="$ctrl.displaySeparator()"></md-divider><prm-collection-navigation-breadcrumbs-item-after parent-ctrl="$ctrl"></prm-collection-navigation-breadcrumbs-item-after>');
$templateCache.put('components/infra/dataStructures/model/model.html','<md-toolbar class="md-primay"><div class="md-toolbar-tools" layout="row" layout-align="space-between center" layout-padding><md-switch ng-model="$ctrl.active" aria-label="Switch Model Debug Mode on/off">Model Debug Mode: {{ $ctrl.active}}</md-switch><span flex></span><h2><span>Primo Model</span></h2><span flex></span></div></md-toolbar><header layout="column" class="topbar-wrapper"></header><md-content layout="row" class="padded-container" layout-align="center start"><div class="main" layout="row" flex><div flex="0" flex-gt-sm="5" flex-gt-md="10" flex-gt-lg="20"></div><div flex><md-tabs md-dynamic-height md-border-bottom ng-if="$ctrl.active"><md-tab ng-repeat="(key, val) in ($ctrl.model)" label="{{key}}"><md-content class="md-padding"><h1 class="md-display-2">{{key}}</h1><md-card><md-card-content><textarea style="height:100em;width: 100%;" ng-if="!$ctrl.isJsonArray(val)">{{::($ctrl.beautifyJson(val))}}</textarea></md-card-content></md-card><md-card ng-if="$ctrl.isJsonArray(val)" ng-repeat="item in val"><md-card-title>Batch {{::($index +1)}}</md-card-title><md-card-content><textarea style="height:100em;width: 100%;">\r\n                            {{::($ctrl.beautifyJson(item))}}</textarea></md-card-content></md-card></md-content></md-tab></md-tabs></div><div class="sidebar" flex-gt-sm="25" flex-gt-lg="20" class="sidebar" layout="row"></div><div flex="0" flex-gt-sm="5" flex-gt-lg="10"></div></div></md-content>');
$templateCache.put('components/favorites/favoritesToolBar/saved-searches-group-actions/saved-searches-group-actions.html','<div layout="row"><div ng-if="!$ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button unpin-button" (click)="$ctrl.removeSelectedSearches()" aria-label="{{$ctrl.isChosenFav() | translate}}"><md-tooltip md-delay="400"><span translate="nui.favorites.search.unpin.multiple.tooltip"></span></md-tooltip><prm-icon ng-if="!item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.isLoggedIn() && $ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.saveSelectedSearchHistoryItemsToSavedSearches()" aria-label="{{$ctrl.isChosenKeepItem() | translate}}"><md-tooltip md-delay="400"><span translate="nui.favorites.search.save.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.isLoggedIn() && $ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.removeSelectedSearchHistoryItemFromSavedSearches()" aria-label="{{$ctrl.isChosenFav() | translate}}"><md-tooltip md-delay="400"><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.removeSearchHistorySelectedItems()" aria-label="{{$ctrl.isChosenRemove() | translate}}"><md-tooltip md-delay="400"><span translate="nui.favorites.search.remove.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_delete_24px" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div></div><prm-saved-searches-group-actions-after parent-ctrl="$ctrl"></prm-saved-searches-group-actions-after>');
$templateCache.put('components/infra/deposit/uploadFile/upload-file.html','<div ng-show="badFormat" class="Error">File fomrat not supported!</div><div class="form-group" ng-show="$ctrl.mode == \'hover\' || !$ctrl.filename"><div class="input-row" class="FullWidth"><div class="file-drop-zone-wrapper"><div class="input-message warning-inverse" ng-if="fileFailed && !f.upload.aborted">{{\'file.upload.error.message\' | translate}}</div><div class="input-message warning-inverse" ng-if="fileTooLarge && !f.upload.aborted">{{\'file.upload.error.too.large\' | translate:{size:$ctrl.formatBytes($ctrl.userMaxFileSize)} }}</div><div ngf-drop="$ctrl.upload()" ngf-select="$ctrl.upload()" ngf-drop-disabled="disabled && $ctrl.mode == \'hover\'" ngf-select-disabled="$ctrl.mode == \'hover\'" ng-model="$ctrl.files" class="file-drop-zone" id="dragAndDropBtn" ngf-drag-over-class="{accept:\'dragover\', reject:\'dragover-err\', delay:100}" ng-model-rejected="rejFiles" ngf-multiple="true" ngf-allow-dir="true" accept="{{$ctrl.filesFormat}}" ngf-accept="$ctrl.filesFormat"><span ng-if="$ctrl.mode != \'hover\'"><span class="guidance-text-out">{{\'nui.deposit.dragFiles\' | translate}}<br><span class="small">{{\'nui.deposit.browseFiles\' | translate}}</span> </span><span class="guidance-text-on">{{\'nui.deposit.dropIt\' | translate}}</span></span></div></div></div></div>');
$templateCache.put('components/infra/widgets/alerts/alert-bar.html','<div ng-if="$ctrl.htmlMsg" role="alert" aria-live="assertive" layout-align="center center" ng-include src="$ctrl.templateSrc"></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-checkbox.html','<md-input-container ng-class="{\'md-required\':({{::$ctrl.field.mandatory}})}"><label for="prm_{{::$ctrl.field.label}}" translate="{{::$ctrl.field.label}}"></label><md-checkbox ng-repeat="option in ::$ctrl.field.options" aria-label="{{option.label}}" ng-change="::$ctrl.field.events.onChange($ctrl.field.events.params)" ng-true-value="\'Yes\'" ng-model="::$ctrl.formData[$ctrl.field.name]" , name="{{::$ctrl.field.name}}" , ng-required="::$ctrl.field.mandatory"><span translate="{{option.label}}"></span></md-checkbox><div ng-messages="::$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted"><div ng-message="required"><span translate="nui.mandatory.checkbox" translate-values="::$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-date-dropdown.html','<div ng-if="$ctrl.delayForLabels" layout="row"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.Year"></label> <input type="text" ng-model="$ctrl.formData[$ctrl.field.name].year" ng-model-options="{allowInvalid: true}" maxlength="4" size="4" ng-pattern="$ctrl.yearRegex"/><div ng-messages="$ctrl.form.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div></md-input-container><md-input-container class="underlined-input"><label translate="search-advanced.drStartMonth.option.start_month"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name].month"><md-option ng-repeat="month in $ctrl.months"><span>{{month}}</span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-class="{\'md-required\':$ctrl.field.mandatory}"><label translate="search-advanced.drStartDay.option.start_day"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name].day"><md-option ng-repeat="day in $ctrl.days"><span>{{day}}</span></md-option></md-select></md-input-container></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-date.html','<label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><div class="service-form-item" layout="column"><md-tooltip>{{\'nui.datePicker.tooltip\' | translate}}</md-tooltip><md-datepicker ng-model="$ctrl.formData[$ctrl.field.name]" name="{{$ctrl.field.name}}" md-placeholder="{{($ctrl.field.placeHolder | translate)||(\'nui.datePicker.pickupDate\' | translate)}}" md-date-filter="$ctrl.filterDates" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" ng-required="$ctrl.field.mandatory" title="{{$ctrl.field.tooltip}}"></md-datepicker><md-input-container><div ng-messages="$ctrl.form[$ctrl.field.name].$error" class="validation-messages" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div><div ng-message="valid"><span translate="nui.valid.date"></span></div><div ng-message="mindate"><span translate="nui.valid.date.early"></span></div></div></md-input-container></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-dateAndHours.html','<label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><div class="service-form-item" layout="row"><md-tooltip>{{\'nui.datePicker.tooltip\' | translate}}</md-tooltip><md-datepicker ng-model="$ctrl.formData[$ctrl.field.name].date" name="{{$ctrl.field.name}}_date" md-placeholder="{{\'nui.datePicker.pickupDate\' | translate}}" md-date-filter="$ctrl.filterDates" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" ng-required="$ctrl.field.mandatory"></md-datepicker><md-select ng-model="$ctrl.formData[$ctrl.field.name].hour" ng-required="$ctrl.field.mandatory" name="{{$ctrl.field.name}}_hour" placeholder="{{\'nui.datePicker.hour\' | translate}}" style="margin: 0 20px 0 26px"><md-option ng-repeat="hour in $ctrl.hours" ng-value="hour"><span>{{hour}}</span></md-option></md-select></div><md-input-container><div ng-messages="$ctrl.form[$ctrl.field.name+\'_date\'].$error" class="validation-messages" ng-if="$ctrl.form.$submitted"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div></div><div ng-messages="$ctrl.form[$ctrl.field.name+\'_hour\'].$error" class="validation-messages" ng-if="$ctrl.form.$submitted && !$ctrl.form[$ctrl.field.name+\'_date\'].$error.required"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-dateAndTime.html','<label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><div class="service-form-item" layout="row"><md-tooltip>{{\'nui.datePicker.tooltip\' | translate}}</md-tooltip><md-datepicker ng-model="$ctrl.formData[$ctrl.field.name].date" name="{{$ctrl.field.name}}_date" md-placeholder="{{\'nui.datePicker.pickupDate\' | translate}}" md-date-filter="$ctrl.filterDates" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" ng-required="$ctrl.field.mandatory"></md-datepicker><md-select ng-model="$ctrl.formData[$ctrl.field.name].hour" ng-required="$ctrl.field.mandatory" name="{{$ctrl.field.name}}_hour" placeholder="{{\'nui.datePicker.hour\' | translate}}" style="margin: 0 20px 0 26px"><md-option ng-repeat="hour in $ctrl.hours" ng-value="hour"><span>{{hour}}</span></md-option></md-select><md-select ng-model="$ctrl.formData[$ctrl.field.name].minute" ng-required="$ctrl.field.mandatory" name="{{$ctrl.field.name}}_minute" class="aaa" placeholder="{{\'nui.datePicker.minute\' | translate}}" style="margin: 0 20px 0 26px"><md-option ng-repeat="minute in $ctrl.minutes" ng-value="minute"><span>{{minute}}</span></md-option></md-select></div><md-input-container><div ng-messages="$ctrl.form[$ctrl.field.name+\'_date\'].$error" class="validation-messages" ng-if="$ctrl.form.$submitted"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div></div><div ng-messages="$ctrl.form[$ctrl.field.name+\'_hour\'].$error" class="validation-messages" ng-if="$ctrl.form.$submitted && !$ctrl.form[$ctrl.field.name+\'_date\'].$error.required"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div></div><div ng-messages="$ctrl.form[$ctrl.field.name+\'_minute\'].$error" class="validation-messages" ng-if="$ctrl.form.$submitted && !$ctrl.form[$ctrl.field.name+\'_date\'].$error.required && !$ctrl.form[$ctrl.field.name+\'_hour\'].$error.required"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-datetime.html','<md-input-container ng-class="{\'md-required\':($ctrl.field.mandatory || $ctrl.field.mandatoryIndicator)}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label> <input ng-model="$ctrl.formData[$ctrl.field.name]" type="datetime-local" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" value="{{$ctrl.getCurrentDate()}}" min="{{$ctrl.getCurrentDate()}}"/><div ng-messages="$ctrl.form[$ctrl.field.name].$error" style="color:maroon" class="help-block" ng-if="$ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.text" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-dropdown.html','<prm-icon ng-if="$ctrl.field.disabled" icon-type="svg" svg-icon-set="primo-ui" icon-definition="lock"></prm-icon><md-button ng-click="$ctrl.expandList(\'prm_\'+$ctrl.field.label)" alt="{{$ctrl.field.label}}" tabindex="1" class="dummy-dragon-button absolute-position"></md-button><md-input-container class="underlined-input" ng-class="{\'md-required\':($ctrl.field.mandatory || $ctrl.field.mandatoryIndicator)}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name]" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" aria-label="{{$ctrl.field.label}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" title="{{$ctrl.field.tooltip}}"><md-option id="prm_{{$ctrl.field.label}}" ng-repeat="option in $ctrl.field.options" value="{{option.value}}" ng-if="!$ctrl.field.populator.params.byCategory || !$ctrl.getCatagories() ||  $ctrl.getCatagories().length===0"><span role="button">{{option.label}}</span></md-option><md-optgroup ng-if="$ctrl.field.populator.params.byCategory" ng-repeat="category in $ctrl.getCatagories()" label="{{category}}"><md-option ng-repeat="option in $ctrl.field.options | filter: {category: category }" value="{{option.value}}"><span role="button">{{option.label}}</span></md-option></md-optgroup></md-select><div ng-messages="$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.drop-down" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container><prm-icon ng-if="$ctrl.field.disabled" class="animate-enter-leave-scale"><md-tooltip md-direction="right" md-autohide="true" ng-if="$ctrl.field.disabled">Reset request form to edit category</md-tooltip><md-icon md-svg-icon="./images/lock-outline.svg"></md-icon></prm-icon>');
$templateCache.put('components/infra/formBuilder/field/form-field-hidden.html','');
$templateCache.put('components/infra/formBuilder/field/form-field-label.html','<div class="label-dummy" flex-order="1" translate="{{$ctrl.field.label}}"></div><div layout="row" flex-order="2"><div layout="row"><span>{{$ctrl.field.value}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-link.html','<span><a href="{{$ctrl.formData[$ctrl.field.name]}}" target="_blank"><span translate="{{$ctrl.field.label}}"></span></a></span>');
$templateCache.put('components/infra/formBuilder/field/form-field-multi-label.html','<div class="label-dummy" flex-order="1" translate="{{field.label}}"></div><div ng-repeat="option in $ctrl.field.options" layout="row" flex-order="2"><div layout="row"><span>{{option.label}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-multiselectdropdown.html','<prm-icon ng-if="$ctrl.field.disabled" icon-type="svg" svg-icon-set="primo-ui" icon-definition="lock"></prm-icon><md-button ng-click="$ctrl.expandList(\'prm_\'+$ctrl.field.label)" alt="{{$ctrl.field.label}}" tabindex="1" class="dummy-dragon-button absolute-position"></md-button><md-input-container class="underlined-input" ng-class="{\'md-required\':($ctrl.field.mandatory || $ctrl.field.mandatoryIndicator)}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><md-select multiple="multiple" ng-model="$ctrl.formData[$ctrl.field.name]" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" aria-label="{{$ctrl.field.label}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" title="{{$ctrl.field.tooltip}}"><md-option id="prm_{{$ctrl.field.label}}" class="prm-select-checkbox" ng-repeat="option in $ctrl.field.options" value="{{option.value}}" ng-if="!$ctrl.field.populator.params.byCategory || !$ctrl.getCatagories() ||  $ctrl.getCatagories().length===0"><span role="button">{{option.label}}</span></md-option><md-optgroup ng-if="$ctrl.field.populator.params.byCategory" ng-repeat="category in $ctrl.getCatagories()" label="{{category}}"><md-option ng-repeat="option in $ctrl.field.options | filter: {category: category }" value="{{option.value}}"><span role="button">{{option.label}}</span></md-option></md-optgroup></md-select><div ng-messages="$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.drop-down" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container><prm-icon ng-if="$ctrl.field.disabled" class="animate-enter-leave-scale"><md-tooltip md-direction="right" md-autohide="true" ng-if="$ctrl.field.disabled">Reset request form to edit category</md-tooltip><md-icon md-svg-icon="./images/lock-outline.svg"></md-icon></prm-icon>');
$templateCache.put('components/infra/formBuilder/field/form-field-readonly.html','<md-input-container><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label> <input ng-model="$ctrl.formData[$ctrl.field.name]" type="text" ng-disabled="true" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory"><div ng-messages="requestForm[$ctrl.field.name].$error" role="alert"><div ng-message="required">You did not enter a field</div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-text.html','<md-input-container class="underlined-input" ng-class="{\'md-required\':$ctrl.field.mandatory, \'{{$ctrl.field.css}}\' :$ctrl.field.css}"><label translate="{{$ctrl.field.label}}"></label> <input ng-model="$ctrl.formData[$ctrl.field.name]" type="{{$ctrl.field.inputType? $ctrl.field.inputType : \'text\'}}" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" maxlength="{{$ctrl.field.maxlength}}" ng-pattern="$ctrl.field.validPattern" title="{{$ctrl.field.tooltip}}"/><div ng-messages="$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.text" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div><div ng-message="pattern"><span translate="nui.validPattern.invalid"></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-textarea.html','<md-input-container class="underlined-input" ng-class="{\'md-required\':$ctrl.field.mandatory, \'{{$ctrl.field.css}}\' :$ctrl.field.css}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label> <textarea ng-required="$ctrl.field.mandatory" name="{{$ctrl.field.name}}" ng-model="$ctrl.formData[$ctrl.field.name]" columns="1" title="{{$ctrl.field.tooltip}}"></textarea><div ng-messages="$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.text" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div><div ng-message="pattern"><span translate="nui.validPattern.invalid"></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field.html','<div ng-include src="$ctrl.getFormFieldHtml()" class="relative-position"></div>');
$templateCache.put('components/infra/widgets/breadcrumbs/breadcrumbs.html','<md-toolbar><div class="default-toolbar" layout="row" ng-hide="citationLimit == 0"><div class="md-toolbar-tools"><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div><md-button class="back-button offset-to-left" aria-label="back to search results" ng-click="refreshPage()"><prm-icon class="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citationBack"></prm-icon></md-button><md-divider class="toolbar-divider visible"></md-divider><span class="md-headline">Your Current Citation Path</span><md-button class="save-path-btn"><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon><span class="bold-text ng-scope">Save Path</span></md-button></div></div></md-toolbar><prm-horizontal-content class="stacked-items no-scrollbar" layout="row" ng-init="scrollWatch()"><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div><div flex class="horizontal-content-container citations-container"><div class="horizontal-content-controls" ng-if="!hideArrows"><md-button class="left-button" ng-if="showLeftArrow" aria-label="button"><prm-icon><md-icon aria-hidden="true"><svg width="100%" height="100%" viewBox="0 0 24 24" y="480" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/></svg></md-icon></prm-icon></md-button><md-button class="right-button" ng-if="showRightArrow" ng-hide="!showRightArrow" aria-label="button"><prm-icon><md-icon aria-hidden="true"><svg width="100%" height="100%" viewBox="0 0 24 24" y="480" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/></svg></md-icon></prm-icon></md-button></div><md-list role="list"><md-list-item><prm-citation-trails-item [item]="::ctrl.item" class="citation-item horizontal-content-item" id="citationItem{{$index}}" ng-class="{\'current-item \': $index == currentItem}" layout="row" ng-style="($index > currentItem) && {\'z-index\' : citations.length - $index } || {\'z-index\': \'\'}"></prm-citation-trails-item></md-list-item></md-list></div><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div></prm-horizontal-content>');
$templateCache.put('components/infra/widgets/breadcrumbs/crumb.html','');
$templateCache.put('components/primoExplore/silentLogin/silentLoginAlertToast/silent-login-alert-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" class="md-toast-content"><div layout="row" layout-align="center center" class="md-toast-content" ng-class="{\'end-content\':!$ctrl.detectMobile()}"><span class="md-toast-text"><span translate="nui.message.silent_login"></span></span></div><div layout="row" layout-align="start start" class="md-toast-content" ng-class="{\'start-content\':!$ctrl.detectMobile()}"><md-button ng-click="$ctrl.refreshState()" ng-class="{\'mobile-size\':$ctrl.detectMobile()}" md-no-ink="true" class="md-higlight settings-button" aria-label="refresh the application"><div layout="row"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_refresh_24px" class="custom-button"></prm-icon><span style="text-transform: none;white-space: normal;" translate="nui.message.refresh_button"></span></div></md-button><md-button ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}} "><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div></md-toast><prm-silent-login-alert-toast-after parent-ctrl="$ctrl"></prm-silent-login-alert-toast-after>');
$templateCache.put('components/search/actions/citation/citation.html','<div class="send-actions-content-item"><md-content><div layout="row" ng-class="\'layout-\'+$ctrl.layoutPos"><md-nav-bar md-selected-nav-item="$ctrl.selectedStyle" class="vertical-nav-bar primo-scrollbar is-stuck" flex="nogrow" ng-style="$ctrl.isSafariBrowse() && {\'max-height\':\'inherit\'}"><md-nav-item ng-repeat="style in ::$ctrl.getStyles()" md-nav-click="$ctrl.getCitation(style)" name="{{style}}"><span translate="citation.labels.{{::style}}" class="text-no-case" style="white-space: normal; text-align: left"></span></md-nav-item></md-nav-bar><div data-tab-pane="cite" flex><div layout="column" layout-padding layout-align="start center"><div class="form-focus" layout-padding layout="row" layout-align="center center"><div ng-if="$ctrl.inProgress" layout="row" layout-align="center center" layout-padding layout-margin><span translate="nui.citation.labels.inprogress"></span><prm-spinner class="inline-loader dark-on-light" layout="row" layout-align="start center"></prm-spinner></div><div id="{{::$ctrl.getCitationId()}}" ng-if="!$ctrl.inProgress && !$ctrl.isError" ng-bind-html="$ctrl.lastCitation"></div><div ng-if="!$ctrl.inProgress && $ctrl.isError" layout="row" layout-align="center">{{\'nui.citation.error\' | translate}}</div></div><prm-copy-clipboard-btn ng-if="::$ctrl.displayCopyButton()" ng-hide="$ctrl.inProgress || $ctrl.isError" class="zero-padding-top" (click)="$ctrl.selectText()" [text]="$ctrl.lastCitationDecoded()" action="citation"></prm-copy-clipboard-btn><span class="zero-padding-top bold-text">{{\'citation.labels.disclaimer\' | translate}}</span></div></div></div></md-content></div><prm-citation-after parent-ctrl="$ctrl"></prm-citation-after>');
$templateCache.put('components/search/actions/actionContainer/action-container.html','<prm-send-email ng-if="($ctrl.actionName===\'E-mail\')" (finished-email-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [selected-ids]="::$ctrl.selectedIds" [toggleform]="::$ctrl.toggleActionCotent" [user]="::\'\'" [is-full-view]="::$ctrl.isFullView"></prm-send-email><prm-citation ng-if="($ctrl.actionName===\'Citation\')" [item]="::$ctrl.item"></prm-citation><prm-permalink ng-if="($ctrl.actionName===\'Permalink\')" [item]="::$ctrl.item" [selected-ids]="::$ctrl.selectedIds"></prm-permalink><prm-print-item ng-if="($ctrl.actionName===\'Print\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-print-item><prm-endnote ng-if="($ctrl.actionName===\'EndNote\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-endnote><prm-easybib ng-if="($ctrl.actionName===\'EasyBib\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-easybib><prm-refworks ng-if="($ctrl.actionName===\'RefWorks\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-refworks><prm-export-ris ng-if="($ctrl.actionName===\'RISPushTo\')" [item]="::$ctrl.item" [selected-ids]="::$ctrl.selectedIds"></prm-export-ris><prm-export-bibtex ng-if="($ctrl.actionName===\'BibTeXPushTo\')" [item]="::$ctrl.item" [selected-ids]="::$ctrl.selectedIds"></prm-export-bibtex><prm-leganto ng-if="($ctrl.actionName===\'Leganto\')" (finished-leganto-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-leganto><prm-mendeley ng-if="($ctrl.actionName===\'Mendeley\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-mendeley><prm-action-container-after parent-ctrl="$ctrl"></prm-action-container-after>');
$templateCache.put('components/search/actions/easyBibAction/easybib.html','<prm-easybib-after parent-ctrl="$ctrl"></prm-easybib-after>');
$templateCache.put('components/search/actions/endNoteAction/endnote.html','<prm-endnote-after parent-ctrl="$ctrl"></prm-endnote-after>');
$templateCache.put('components/search/actions/exportRISAction/export-ris.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding><md-input-container><label>{{\'fulldisplay.command.pushto.option.RISPushTo.encoding\' | translate}}</label><md-select ng-model="$ctrl.encodingVal" class="form-control" aria-label="encoding"><md-option ng-repeat="option in ::$ctrl.encodingList track by option" value="{{::option}}"><span translate="{{::option}}"></span></md-option></md-select></md-input-container></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.RISPushTo.importToCitationManager\' | translate}}" (click)="$ctrl.getFile()"><span translate="fulldisplay.command.pushto.option.RISPushTo.download"></span></md-button></div></div></form></md-content></div><prm-export-ris-after parent-ctrl="$ctrl"></prm-export-ris-after>');
$templateCache.put('components/search/actions/mendeleyAction/mendeley.html','<prm-mendeley-after parent-ctrl="$ctrl"></prm-mendeley-after>');
$templateCache.put('components/search/actions/exportBibTexAction/export-bibtex.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding><md-input-container><label>{{\'fulldisplay.command.pushto.option.RISPushTo.encoding\' | translate}}</label><md-select ng-model="$ctrl.encodingVal" class="form-control" aria-label="encoding"><md-option ng-repeat="option in ::$ctrl.encodingList track by option" value="{{::option}}"><span translate="{{::option}}"></span></md-option></md-select></md-input-container></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.RISPushTo.importToCitationManager\' | translate}}" (click)="$ctrl.getFile()"><span translate="fulldisplay.command.pushto.option.RISPushTo.download"></span></md-button></div></div></form></md-content></div><prm-export-bibtex-after parent-ctrl="$ctrl"></prm-export-bibtex-after>');
$templateCache.put('components/search/actions/legantoAction/leganto.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center" (submit)="$ctrl.pushRecord($event);"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding flex><div layout-margin><div layout="column" ng-if="$ctrl.legantoService.showTemplateType === \'userSelection\'"><div ng-if="$ctrl.pushToOptions.length > 1" layout="row" layout-align="start center" flex><span translate="fulldisplay.command.pushto.option.LegantoPushTo.pushToText"></span><span>:</span> <span flex></span></div><div class="input-cell margin-bottom-small" ng-if="$ctrl.pushToOptions.length > 1" layout="row" layout-wrap layout-align="start center"><md-radio-group ng-model="$ctrl.selectedPushToOption" layout="row" ng-change="$ctrl.changedPushToOption()" layout-wrap><md-radio-button ng-repeat="option in $ctrl.pushToOptions" value="{{option}}" class="md-primary" aria-label="{{option}}"><span translate="fulldisplay.command.pushto.option.LegantoPushTo.{{option}}"></span></md-radio-button></md-radio-group></div><div ng-show="$ctrl.showLists === \'show\'"><md-input-container class="underlined-input zero-padding layout-full-width"><label translate="fulldisplay.command.pushto.option.LegantoPushTo.list.select"></label><md-select ng-model="$ctrl.selectedUserList" class="form-control" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.list.select\' | translate}} {{\'fulldisplay.command.pushto.option.LegantoPushTo.list.vocal\' | translate}}" ng-change="$ctrl.changedUserList()"><md-option ng-repeat="list in $ctrl.userLists" value="{{list.id}}"><span title="{{list.name}}">{{list.name | limitTo: 70}}{{list.name.length > 70 ? \'...\' : \'\'}}</span></md-option></md-select></md-input-container><div class="color-Tomato" ng-messages="true" ng-if="$ctrl.noSectionsError === \'show\'"><span aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.section.notExists\' | translate}}" aria-live="assertive" translate="fulldisplay.command.pushto.option.LegantoPushTo.section.notExists"></span></div></div><div ng-show="$ctrl.showSections === \'show\'"><md-input-container class="underlined-input zero-padding layout-full-width"><label translate="fulldisplay.command.pushto.option.LegantoPushTo.section.select"></label><md-select ng-model="$ctrl.selectedUserSection" class="form-control" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.section.select\' | translate}}" ng-change="$ctrl.changedUserSection()"><md-option ng-repeat="section in $ctrl.userSections" value="{{::section.id}}"><span title="{{section.name}}">{{section.name | limitTo: 70}}{{section.name.length > 70 ? \'...\' : \'\'}}</span></md-option></md-select></md-input-container></div></div><div ng-if="$ctrl.legantoService.showTemplateType === \'signIn\'" class="bar alert-bar" layout="row" layout-align="start center" flex><span translate="fulldisplay.command.pushto.option.LegantoPushTo.signInMessage"></span><prm-authentication flex="none"></prm-authentication><span flex></span></div><div ng-if="$ctrl.legantoService.showTemplateType === \'error\'" layout-align="center center"><span aria-live="assertive" aria-label="{{$ctrl.legantoService.statusMessage}}">{{$ctrl.legantoService.statusMessage}}</span></div><div ng-if="$ctrl.legantoService.showSpinner === \'show\'" layout="row" layout-align="center center" layout-padding layout-margin><prm-spinner class="inline-loader dark-on-light no-text" layout="row" layout-align="start center" layout-margin></prm-spinner></div><div ng-if="$ctrl.legantoService.showTemplateType === \'noListsExist\'" layout="row" layout-align="start center" flex><span translate="{{$ctrl.legantoService.noListsMessage}}"></span> <span flex></span></div></div></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.add\' | translate}}" ng-style="!$ctrl.pushAllowed ? { \'z-index\':\'0\' } : { }" ng-disabled="!$ctrl.legantoService.pushAllowed"><span translate="fulldisplay.command.pushto.option.LegantoPushTo.add"></span></md-button></div></div></form></md-content></div><prm-leganto-after parent-ctrl="$ctrl"></prm-leganto-after>');
$templateCache.put('components/search/actions/permalinkAction/permalink.html','<div class="send-actions-content-item" layout="row"><md-content layout-wrap layout-padding layout-fill><div layout="column"><div class="form-focus long-permalink" layout="row" layout-padding><div layout-margin layout-fill class="word-break-all"><span id="{{::(\'permalink\'+ $ctrl.getRecordId())}}" layout-fill>{{$ctrl.permalink}}</span></div></div><div class="long-permalink" ng-if="::$ctrl.displayCopyButton()" layout="row" layout-align="center center"><prm-copy-clipboard-btn (click)="$ctrl.selectText();" [text]="$ctrl.permalink" action="permalink"></prm-copy-clipboard-btn></div><div class="form-focus short-permalink" layout="row" layout-padding><div layout-margin layout-fill class="word-break-all"><span id="{{::(\'permalink\'+ $ctrl.getRecordId())}}" layout-fill>{{$ctrl.shortPermalink}}</span></div></div><div class="short-permalink" ng-if="::$ctrl.displayCopyButton()" layout="row" layout-align="center center"><prm-copy-clipboard-btn (click)="$ctrl.selectText();" [text]="$ctrl.shortPermalink" action="permalink"></prm-copy-clipboard-btn></div></div></md-content></div><prm-permalink-after parent-ctrl="$ctrl"></prm-permalink-after>');
$templateCache.put('components/search/actions/refworksAction/refworks.html','<prm-refworks-after parent-ctrl="$ctrl"></prm-refworks-after>');
$templateCache.put('components/search/actions/printAction/print-item.html','<prm-print-item-after parent-ctrl="$ctrl"></prm-print-item-after>');
$templateCache.put('components/search/actions/sendEmailAction/send-email.html','<div class="send-actions-content-item" layout="row"><md-content layout-wrap layout-padding layout-fill><form name="emailForm" novalidate layout="column" layout-align="center center" (submit)="$ctrl.sendEmail($event);"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding flex><div layout-margin><div layout="column"><label translate="email.subject"></label><div name="subject">{{$ctrl.subject}}</div><md-input-container class="underlined-input md-required"><label translate="email.to"></label> <input ng-model="$ctrl.addresses" name="addresses" type="text" required ng-pattern="::$ctrl.emailRegEx" ng-change="$ctrl.changeAddress(emailForm)" aria-describedby="emailErrorMessage"><div ng-messages="emailForm.addresses.$error" ng-if="emailForm.$submitted || emailForm.addresses.$touched  || emailForm.addresses.$dirty"><div ng-message="validationError" ng-if="$ctrl.isUser()"><span translate="too.many.emails.nonguest"></span></div><div ng-message="validationError" ng-if="$ctrl.isGuest()"><span translate="too.many.emails.guest"></span></div><div ng-message="pattern, required "><span translate="nui.email.invalidaddress" id="emailErrorMessage"></span></div></div></md-input-container><md-input-container style="display:none"><label translate="email.to"></label> <input ng-model="$ctrl.honeypot" name="testEmail" type="text"></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.isUser()"><label translate="email.note"></label> <textarea ng-model="$ctrl.note" name="note" columns="1" rows="1" ng-change="$ctrl.changeNote(emailForm)"></textarea><div ng-messages="emailForm.note.$error" ng-if="emailForm.$submitted || emailForm.note.$touched  || emailForm.note.$dirty"><div ng-message="validationError"><span translate="html.in.email.notes"></span></div></div></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.isCaptcha"><div vc-recaptcha key="$ctrl.capchaPublicKey" on-create="$ctrl.setWidgetId(widgetId)" on-success="$ctrl.setResponse(response)" lang="$ctrl.$translate.use()" on-expire="$ctrl.cbExpiration()"></div><span class="recaptcha-error-info" ng-show="emailForm.$submitted && (emailForm.recaptchaResponse.$invalid || emailForm.$error.recaptcha.length)"><span translate="captcha.notselected"></span></span></md-input-container></div></div></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="Send the result by email" ng-style="$ctrl.sendMailInProgress || $ctrl.templateRenderingInProgress ? { \'z-index\':\'0\' } : { }" ng-disabled="$ctrl.sendMailInProgress || $ctrl.templateRenderingInProgress"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span translate="email.popup.link.send"></span></md-button></div><md-tooltip ng-if="$ctrl.templateRenderingInProgress"><span translate="nui.sendemail.tooltip"></span></md-tooltip></div><div ng-if="$ctrl.sendEmailService.isTemplateSupported($ctrl.itemsToArray($ctrl.item))" style="display: none;" ng-init="itemsArray=$ctrl.itemsToArray($ctrl.item)"><div flex="20" flex-sm="10" hide-xs></div><prm-email-template id="{{$ctrl.isFullView ? \'email-template-full\' : \'email-template-brief\'}}" [items]="itemsArray" [note]="$ctrl.note" (email-template-items-event)="$ctrl.renderedItems = $event"></prm-email-template><div flex="20" flex-sm="10" hide-xs></div></div></form></md-content></div><prm-send-email-after parent-ctrl="$ctrl"></prm-send-email-after>');
$templateCache.put('components/search/browse/browseResult/browse-result.html','<md-list-item ng-class="{\'not-link\':!$ctrl.haveLink}" class="md-2-line main-results" ng-click="$ctrl.reportUse()" ng-href="{{::$ctrl.resultLink}}" class="browse-result-link" aria-label="{{$ctrl.title}}{{\' \'}}{{$ctrl.isOneOrMoreRecords()}}"><div class="md-list-item-text" layout="row" layout-align="center center" ng-if="!$ctrl.isCallNumber() && !$ctrl.isSubjectOrAuthor()"><div layout="column" layout-align="center start" flex style="padding-right: 1em;"><h3 class="item-title bold-text" style="align-self: flex-start; max-width: 100%"><span><prm-highlight terms="" text="$ctrl.title"></prm-highlight></span></h3></div><div flex="20" layout-align="center start" layout="column"><span><span ng-if="$ctrl.numberOfDocs <= 1">1 {{\'nui.browse.single_rec\'| translate}}</span> <span ng-if="$ctrl.numberOfDocs > 1">{{$ctrl.numberOfDocs}} {{$ctrl.exactNumber}} {{\'nui.browse.multiple_rec\'| translate}}</span></span></div></div><div class="md-list-item-text" layout="row" layout-align="center center" ng-if="$ctrl.isCallNumber()"><div layout="column" layout-align="center start" flex style="padding-right: 1em;"><h3 class="item-title"><span><prm-highlight terms="" text="$ctrl.title"></prm-highlight></span></h3><h4 class="call-number-description"><span>{{$ctrl.author}}</span> <span>{{$ctrl.date}}</span></h4></div><div flex="20" layout-align="center start" layout="column"><span layout="column" style="line-height: 1.3em;"><span translate="nui.browse.col.callno"></span> <strong ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}">{{$ctrl.callNumber}}</strong></span></div></div><div class="md-list-item-text" layout="row" layout-align="center center" ng-if="$ctrl.isSubjectOrAuthor()"><div layout="column" layout-align="center start" flex ng-class="$ctrl.switchToLtrString() ? \'padding-left-small\' : \'padding-right-small\'"><h3 class="item-title bold-text" style="align-self: flex-start; max-width: 100%"><span ng-if="$ctrl.havePref" style="font-weight: 400; color: initial"><prm-highlight terms="" text="$ctrl.preferred"></prm-highlight></span><span ng ng-if="$ctrl.haveType && $ctrl.havePref">&nbsp;</span> <span ng ng-if="$ctrl.haveType && $ctrl.havePref" class="text-italic text-in-brackets" style="color: black">{{$ctrl.type}}</span> <span ng-if="$ctrl.havePref" translate="nui.browse.crossref.see"></span> <span ng-repeat="title in $ctrl.prefTitle.reverse() "><span ng-if="!$first">,</span> <a ng-if="$ctrl.havePref" ng-href="{{::$ctrl.resultLinkPref(title)}}"><prm-highlight terms="" text="title"></prm-highlight></a><span ng-if="!$ctrl.havePref"><prm-highlight terms="" text="title"></prm-highlight></span></span><span ng ng-if="$ctrl.haveType && !$ctrl.havePref">&nbsp;</span> <span ng ng-if="$ctrl.haveType && !$ctrl.havePref" class="text-italic text-in-brackets" style="color: black">{{$ctrl.type}}</span></h3></div><div flex="20" layout-align="center start" layout="column"><span ng-if="!$ctrl.havePref"><span ng-if="$ctrl.numberOfDocs <= 1">1 {{\'nui.browse.single_rec\'| translate}}</span> <span ng-if="$ctrl.numberOfDocs > 1">{{$ctrl.numberOfDocs}} {{$ctrl.exactNumber}} {{\'nui.browse.multiple_rec\'| translate}}</span></span></div></div></md-list-item><prm-browse-result-after parent-ctrl="$ctrl"></prm-browse-result-after>');
$templateCache.put('components/search/facet/facetExact/facet-exact.html','<md-button class="section-title" layout-fill aria-expanded="{{!$ctrl.facetGroup.facetGroupCollapsed}}" (click)="$ctrl.toggleFacet($event)" ng-class="{\'collapsed\': $ctrl.facetGroup.facetGroupCollapsed}" translate-attr="{\'aria-label\': \'facets.facet.facet_{{::$ctrl.facetGroup.name}}\'}" translate-attr-title="{{$ctrl.facetGroup.facetGroupCollapsed ? \'nui.facets.expand.tooltip\' :\'nui.facets.collapse.tooltip\'}}"><div layout="row" layout-align="start center"><h3 ng-if="::$ctrl.facetGroup.labelParam" class="section-title-header"><span translate="facets.facet.facet_{{::$ctrl.facetGroup.name}}" translate-values="{\'idx_0\' : $ctrl.facetGroup.labelParam}"></span></h3><h3 ng-if="::!$ctrl.facetGroup.labelParam" class="section-title-header"><span ng-if="::$ctrl.isLocalFacet()" translate-default="{{::$ctrl.facetGroup.name}}" translate="fulldisplay.{{::$ctrl.facetGroup.name}}" translate-attr-title="fulldisplay.{{::$ctrl.facetGroup.name}}"></span> <span ng-if="::!$ctrl.isLocalFacet()" translate-default="{{::$ctrl.facetGroup.name}}" translate="facets.facet.facet_{{::$ctrl.facetGroup.name}}" translate-attr-title="facets.facet.facet_{{::$ctrl.facetGroup.name}}"></span></h3><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up" ng-class="{\'rotate-180\': $ctrl.facetGroup.facetGroupCollapsed}"></prm-icon></div></md-button><div ng-if="!$ctrl.facetGroup.facetGroupCollapsed" class="section-content animate-max-height-variable"><div class="md-chips md-chips-wrap"><div class="md-chip animate-opacity-and-scale facet-element-marker-{{::$ctrl.facetGroup.name}} wrapping-chip facet-title-row {{facet.facetType===\'exclude\' ? \'facet-excluded\' : \'\'}}" ng-if="!$ctrl.facetGroup.facetGroupCollapsed && $ctrl.containLegalFacetByLang(facet)" ng-repeat="facet in $ctrl.getFacetGroupValues() | limitTo:$ctrl.facetGroup.displayedCount" ng-class="facet.facetType===\'exclude\' ? \'facet-excluded\' : \'\'; {\'is-hovered\': isHovered}" data-facet-value="{{::facet.name}}-{{::facet.value}}"><div class="md-chip-content" layout="row" layout-align="start center"><md-checkbox ng-click="$ctrl.toggleMultiFacet(facet)" ng-checked="facet.checked" aria-label="{{::$ctrl.ariaLabelForFacetCheckbox(facet)}}"></md-checkbox><strong dir="auto" class="facet-title" layout-align="end" layout="row" ng-click="$ctrl.addFacet(facet)" aria-label="{{::$ctrl.ariaLabelForFacetTitle(facet)}}"><span class="text-number-space" title="{{::$ctrl.getFacetTitleTranslated(facet)}}">{{::$ctrl.getFacetTitleTranslated(facet)}}</span> <span ng-if="::facet.count>0 && $ctrl.isShowCount(facet)" class="text-italic text-in-brackets text-rtl facet-counter">{{::$ctrl.getCountsummary(facet)}}</span></strong><div ng-if="::($ctrl.facetGroup.name!==\'tlevel\' || facet.value !== \'online_resources\')" class="md-chip-remove-container"><md-button class="md-icon-button zero-margin" ng-click="$ctrl.toggleIncludeExclude(facet)" ng-class="facet.facetType===\'exclude\' ? \'button-include\': \'button-exclude\'" aria-label="{{$ctrl.ariaLabelForFacet(facet.facetType===\'exclude\' ? \'include\' : \'exclude\')}} {{::$ctrl.getFacetTitleTranslated(facet)}}"><prm-icon icon-type="{{::$ctrl.facetsIcons.excludeFacet.type}}" ng-if="(facet.facetType !== \'exclude\')" svg-icon-set="{{::$ctrl.facetsIcons.excludeFacet.iconSet}}" icon-definition="{{::$ctrl.facetsIcons.excludeFacet.icon}}"></prm-icon><prm-icon icon-type="{{::$ctrl.facetsIcons.includeFacet.type}}" ng-if="(facet.facetType === \'exclude\')" svg-icon-set="{{::$ctrl.facetsIcons.includeFacet.iconSet}}" icon-definition="{{::$ctrl.facetsIcons.includeFacet.icon}}"></prm-icon><md-tooltip><span>{{$ctrl.ariaLabelForFacet(facet.facetType === \'exclude\' ? \'include\' : \'exclude\') }} {{::$ctrl.getFacetTitleTranslated(facet)}}</span></md-tooltip></md-button></div></div></div></div><div class="expand-section-button compensate-padding-left" ng-if="$ctrl.isShowMore($ctrl.facetGroup)" ng-mousedown="$ctrl.toggleMoreFacets($ctrl.facetGroup,0)" ng-keypress="$event.keyCode == 13 || $event.keyCode == 32 ? $ctrl.toggleMoreFacets($ctrl.facetGroup,1) : null" aria-label="{{::$ctrl.facetGroup.name}}"><md-button class="button-as-link link-alt-color zero-margin"><span class="bold-text" translate="nui.facets.showmore" translate-attr-title="nui.facets.showmore" aria-label="{{\'nui.aria.facets.showmore\' | translate:\'{name: \\\'\'+$ctrl.facetGroupHeader+\'\\\'}\'}}"></span></md-button></div><div ng-init="messageAdded = \'\';\r\n                  messageRemoved = (\'nui.aria.facets.showmore\' | translate:\'{name: \\\'\'+$ctrl.facetGroupHeader+\'\\\'}\')" ng-if="$ctrl.isShowMore($ctrl.facetGroup)" class="accessible-only" aria-label="{{::$ctrl.isShowMore($ctrl.facetGroup) ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.isShowMore($ctrl.facetGroup) ? messageAdded : messageRemoved}}</div></div><div class="link-as-facet" ng-if="$ctrl.isRtypeFacet($ctrl.facetGroup.name) && $ctrl.displayNewspapersLink() && !$ctrl.facetGroup.facetGroupCollapsed"><prm-newspapers-facet></prm-newspapers-facet></div><prm-facet-exact-after parent-ctrl="$ctrl"></prm-facet-exact-after>');
$templateCache.put('components/search/browse/browseSearchBar/browse-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div><div layout="column" flex><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.performSearch()" class="layout-full-width"><div class="classic-input" layout="row" layout-fill><div class="search-scope" layout="column" layout-align="center start"><div layout="row" layout-align="center center"><md-input-container layout="row" layout-xs="column" class="zero-margin" layout-align="start center"><label tabindex="-1" translate="nui.browse.browseby" class="_md-container-ignore bold-text"></label><md-select ng-model="$ctrl.selectedScope" aria-label="{{\'nui.browse.browseBy\' | translate}}"><md-option ng-repeat="opt in $ctrl.scopes" ng-value="opt"><span role="button" translate="nui.browse.{{opt.SourceCode1}}" alt="{{\'nui.browse.browseby\' | translate}}"></span></md-option></md-select></md-input-container></div></div><md-input-container flex md-no-float><input ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}" ng-model="$ctrl.searchBarInput" ng-change="vm.onMessageChange()" placeholder="{{\'nui.browse.placeholder\' | translate}}" autocomplete="off" id="searchBarBrowse"></md-input-container><md-button tabindex="{{$ctrl.searchBarInput.length ? 0 : -1 }}" ng-click="$ctrl.onClearSearchInput()" ng-class="{\'is-visible\': $ctrl.searchBarInput.length }" aria-label="{{\'nui.searchField.clear\' | translate}}" type="button" class="md-button md-icon-button clear-button" style="top: 0; bottom: 0; margin: auto"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button><md-button class="submit-button button-confirm" aria-label="{{\'nui.aria.submitSearch\' | translate}}" (click)="$ctrl.performSearch()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div><prm-browse-search-bar-after parent-ctrl="$ctrl"></prm-browse-search-bar-after>');
$templateCache.put('components/search/facet/facetRange/facet-range.html','<md-button class="section-title" layout-fill aria-expanded="{{!$ctrl.facetGroup.facetGroupCollapsed}}" (click)="$ctrl.toggleFacet($event)" ng-class="{\'collapsed\': $ctrl.facetGroup.facetGroupCollapsed}" translate-attr="{\'aria-label\': \'facets.facet.facet_{{::$ctrl.facetGroup.name}}\'}" translate-attr-title="{{$ctrl.facetGroup.facetGroupCollapsed ? \'nui.facets.expand.tooltip\' :\'nui.facets.collapse.tooltip\'}}"><div layout="row" layout-align="start center"><h3 class="section-title-header"><span translate="facets.facet.facet_{{::$ctrl.facetGroup.name}}" translate-attr-title="facets.facet.facet_{{::$ctrl.facetGroup.name}}"></span></h3><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up" ng-class="{\'rotate-180\': $ctrl.facetGroup.facetGroupCollapsed}"></prm-icon></div></md-button><div class="section-content animate-max-height-variable md-chip" ng-hide="$ctrl.facetGroup.facetGroupCollapsed"><div layout="row" layout-align="start center" class="md-range-content"><md-checkbox tabindex="0" aria-label="{{$ctrl.ariaLabelForFacet(facet.facetType)}}{{\' \'}}{{::(\'facets.facet.facet_\'+ $ctrl.facetGroup.name | translate)}}{{\' \'}}{{\'nui.multiple.selection\' | translate}}" ng-click="$ctrl.toggleMultiRangeFacet($ctrl.rangeFacetValue)" ng-checked="$ctrl.facetService.activeRangeMultiFacet"></md-checkbox><md-input-container><label translate="facets.date.slider.from"></label> <input type="number" min="{{::$ctrl.facetGroup.additionalData.min}}" max="{{::$ctrl.facetGroup.additionalData.selectedMax}}" step="{{::$ctrl.facetGroup.additionalData.step}}" ng-model="$ctrl.facetGroup.additionalData.selectedMin" value="{{$ctrl.facetGroup.additionalData.selectedMin}}" ng-change="$ctrl.changeMultiFacetVal($ctrl.rangeFacetValue)" translate-attr="{\'aria-label\': \'nui.aria.from\'}"></md-input-container><md-input-container><label translate="facets.date.slider.to"></label> <input type="number" min="{{::$ctrl.facetGroup.additionalData.selectedMin}}" max="{{::$ctrl.facetGroup.additionalData.max}}" step="{{::$ctrl.facetGroup.additionalData.step}}" ng-model="$ctrl.facetGroup.additionalData.selectedMax" value="{{$ctrl.facetGroup.additionalData.selectedMax}}" ng-change="$ctrl.changeMultiFacetVal($ctrl.rangeFacetValue)" translate-attr="{\'aria-label\': \'nui.aria.to\'}"></md-input-container><md-button (click)="$ctrl.addFacet(\'searchcreationdate\', $ctrl.rangeFacetLabel, $ctrl.rangeFacetValue,\'include\', $ctrl.facetGroup.displayedType, $ctrl.rangeFacetMinValue, $ctrl.rangeFacetMaxValue,\'add\')" class="button-as-link link-alt-color zero-margin" translate-attr="{\'aria-label\': \'facets.date.slider.refine\'}"><span translate="facets.date.slider.refine"></span></md-button></div></div><prm-facet-range-after parent-ctrl="$ctrl"></prm-facet-range-after>');
$templateCache.put('components/search/moreLikeThis/moreLikeThisItem/more-like-this-item.html','<md-card><md-tooltip class="multi-row-tooltip" md-visible="isVisible" md-direction="top" md-delay="$ctrl.tooltipDelay"><prm-more-like-this-item-info [more-in-the-same-course-item]="$ctrl.moreInTheSameCourseItem"></prm-more-like-this-item-info></md-tooltip><div class="card-image"><prm-search-result-thumbnail-container ng-if="$ctrl.renderFlag" class="md-card-image" [item]="$ctrl.moreInTheSameCourseItem" [links]="$ctrl.moreInTheSameCourseItem.delivery.link" [more-in-the-same-course-item]="moreInTheSameCourseItem"></prm-search-result-thumbnail-container></div><md-card-title><md-card-title-text><span dir="auto">{{$ctrl.moreOfTheSameItemTitle()}}</span> <span>{{$ctrl.moreOfTheSameItemVerTitle()}}</span></md-card-title-text></md-card-title></md-card><prm-more-like-this-item-after parent-ctrl="$ctrl"></prm-more-like-this-item-after>');
$templateCache.put('components/search/moreLikeThis/moreLikeThisItemInfo/more-like-this-item-info.html','<div layout="column"><h3 class="bold-text">{{$ctrl.courseItemTitle() + " " + $ctrl.courseItemVerTitle()}}</h3><p><span>{{$ctrl.courseItemCreator()}}</span></p></div><prm-more-like-this-item-info-after parent-ctrl="$ctrl"></prm-more-like-this-item-info-after>');
$templateCache.put('components/search/fullView/backToSearchResultsButton/back-to-search-results-button.html','<div ng-if="::$ctrl.isBackToSearchRequired()"><md-toolbar class="default-toolbar zero-padding" sticky sticky-class="is-stuck" disabled-sticky="$ctrl.isBrowseMode"><div class="md-toolbar-tools zero-padding" layout="row"><div flex="0" flex-md="0" flex-lg="15" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20"></div><md-button ng-if="!$ctrl.isBrowseMode" class="back-button has-text" ng-style="($ctrl.isRTL()) && {\'margin-right\': \'10px\'}" ng-click="$ctrl.navigateBackToSearchResults()" aria-label="{{$ctrl.backToBrowseLabel}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button><md-button ng-if="$ctrl.isBrowseMode" class="back-button has-text" ui-state="$ctrl.browseState" ui-state-params="$ctrl.backToBrowseParams" aria-label="{{$ctrl.backToBrowseLabel}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span>{{$ctrl.backToBrowseLabel}}</span></md-button></div></md-toolbar></div><prm-back-to-search-results-button-after parent-ctrl="$ctrl"></prm-back-to-search-results-button-after>');
$templateCache.put('components/search/fullView/details/service-details.html','<div class="section-body" id="item-details"><div class="spaced-rows" layout="column"><div ng-repeat="detail in ::$ctrl.details" layout="row" layout-xs="column" class="layout-block-xs"><div flex-gt-sm="20" flex-gt-xs="25" flex><span class="bold-text word-break" data-details-label="{{detail.label}}" translate="fulldisplay.{{detail.label}}" translate-attr-title="fulldisplay.{{detail.label}}"></span></div><div class="item-details-element-container" flex><div class="item-details-element" ng-class="{\'item-details-element-multiple\': (detail.values && detail.values.length > 1)}" ng-repeat="value in detail.values"><div ng-show="$first || !detail.isCollapsible || !detail.showMore" ng-repeat="curValue in $ctrl.getValuesOfValueItems(value) track by $index" layout="column" class="word-break"><ng-container ng-init="chainArray = $ctrl.getChainArray(curValue, value.chainDelimiter)"></ng-container><div ng-show="value.isLinkable" ng-class="{\'string-to-rtl-details\': ($ctrl.dontChangeStringDirectionToRtl(curValue) && !value.chainDelimiter), \'chain-display-space\':(chainArray.length > 1 && !$last)}"><prm-highlight ng-if="$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getPrefix(curValue)"></prm-highlight><a (click)="$ctrl.setCameFromIndicationLateral(value)" ng-if="$ctrl.isSubfieldExist(curValue, \'$$Z\') && !$ctrl.isSubfieldExist(curValue, \'$$R\') && !$ctrl.isSubfieldExist(curValue, \'$$T\')" class="arrow-link" aria-label="{{$ctrl.getTextFromVal(curValue)}}" ui-sref="fulldisplay({\r\n\t\t\t\t\t\t\t   \t\t\t\tvid:\'{{$ctrl.queryOptions.vid}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\ttab:\'{{$ctrl.queryOptions.tab}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tdocid:\'alma{{$ctrl.getSubfieldFromVal(curValue, \'$$Z\')}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tcontext:\'L\'\r\n\t\t\t\t\t\t\t   \t\t\t\t})" ui-sref-opts="{reload: true}"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><a (click)="$ctrl.setCameFromIndicationLateral(value)" ng-if="$ctrl.isSubfieldExist(curValue, \'$$Z\') && !$ctrl.isSubfieldExist(curValue, \'$$R\') && $ctrl.isSubfieldExist(curValue, \'$$T\')" class="arrow-link" aria-label="{{$ctrl.getTextFromVal(curValue)}}" href="{{::$ctrl.getSubfieldFromVal(curValue, \'$$Z\')}}" target="_blank"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><a (click)="$ctrl.setCameFromIndicationLateral(value);$ctrl.setIsFacetExact(value);" ng-if="!$ctrl.isSummonOverAlma() && curValue && !$ctrl.isSubfieldExist(curValue, \'$$Z\') && !$ctrl.isSubfieldExist(curValue, \'$$R\') && !$ctrl.isSubfieldExist(curValue, \'$$L\')" class="arrow-link" aria-label="{{$ctrl.getTextFromVal(chainValue)}}" ng-repeat="chainValue in chainArray track by $index" ng-class="{\'chain-display\':chainArray.length > 1}" ui-sref="exploreMain.search({\r\n\t\t\t\t\t\t\t\t\t\t\tvid:\'{{$ctrl.queryOptions.vid}}\',\r\n\t\t\t\t\t\t\t\t\t\t\tquery: \'{{$ctrl.getQuery(value,chainValue)}}\',\r\n\t\t\t\t\t\t\t\t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t\t\t\t\t\t\t\t\t\t\tfacet:\'{{$ctrl.getFacet(value,chainValue)}}\',\r\n\t\t\t\t\t\t\t\t\t\t\tmode:\'{{$ctrl.serachMode}}\'\r\n\t\t\t\t\t\t\t\t\t\t\t})" ui-sref-opts="{reload: true}"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(chainValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><a (click)="$ctrl.setCameFromIndicationLateral(value)" ng-if="$ctrl.isSummonOverAlma() && curValue && !$ctrl.isSubfieldExist(curValue, \'$$Z\') && !$ctrl.isSubfieldExist(curValue, \'$$R\')" class="arrow-link" aria-label="{{$ctrl.getTextFromVal(curValue)}}" href="{{::$ctrl.createSummonOverAlmaLink(value,curValue)}}" target="_blank"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><a (click)="$ctrl.runLinkToLegantoBeacon()" ng-if="curValue && $ctrl.isSubfieldExist(curValue, \'$$R\')" class="arrow-link" aria-label="{{$ctrl.getTextFromVal(curValue)}}" title="{{::$ctrl.getToolTip(value) | translate}}" href="{{::$ctrl.createLegantoLink(curValue)}}" target="_blank"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><prm-highlight ng-if="$ctrl.isSubfieldExist(curValue, \'$$L\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getTextFromVal(curValue)"></prm-highlight></div><div ng-show="!value.isLinkable" ng-class="{\'string-to-rtl-details\': $ctrl.dontChangeStringDirectionToRtl(curValue)}" ng-style="($ctrl.dontChangeStringDirectionToRtl(curValue) && !$ctrl.isLtr()) && {\'text-align\':\'right\'}"><prm-highlight ng-if="$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getPrefix(curValue) + $ctrl.getTextFromVal(curValue)"></prm-highlight><prm-highlight ng-if="!$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getTextFromVal(curValue)"></prm-highlight></div></div></div><md-button ng-show="detail.isCollapsible" (click)="detail.showMore=!detail.showMore" aria-label="show.hide.{{detail.label}}"><span ng-show="detail.showMore" translate="proquest.collections.more"></span> <span ng-show="!detail.showMore" translate="proquest.collections.more.hide"></span> <span ng-show="detail.showMore"><i class="icon arrow-icon fa fa-chevron-down"></i></span> <span ng-show="!detail.showMore"><i class="icon arrow-icon fa fa-chevron-up"></i></span></md-button></div></div><prm-record-collection-paths ng-if="$ctrl.isCDEnabled()" [item]="::$ctrl.item"></prm-record-collection-paths></div></div><prm-service-details-after parent-ctrl="$ctrl"></prm-service-details-after>');
$templateCache.put('components/search/fullView/fullViewPage/full-view-page.html','<prm-full-view-cont ng-if="!$ctrl.showPnx" [item]="$ctrl.currentItem"></prm-full-view-cont><div style="height: inherit"><textarea ng-if="$ctrl.showPnx" style="border:none; width: 100%; resize:none; overflow:hidden;" ng-style="{ \'height\': $ctrl.pnxLength + \'vw\' }" disabled="disabled">{{$ctrl.currentItem.pnx}}</textarea></div><prm-full-view-page-after parent-ctrl="$ctrl"></prm-full-view-page-after>');
$templateCache.put('components/search/fullView/fullViewServiceContainer/full-view-service-container.html','<div class="section-head"><prm-service-header ng-if="$ctrl.service.serviceName!==\'brief\'" [title]="$ctrl.service.tabTitle || $ctrl.service.title"></prm-service-header></div><div class="section-body {{$ctrl.mashupServiceClassName()}}"><prm-brief-result-container ng-if="$ctrl.service.serviceName===\'brief\'" [is-full-view]="true" [is-overlay-full-view]="$ctrl.isOverlayFullView" [is-favorite-for-display-frbr]="$ctrl.isfavorites" [item]="$ctrl.item" [links]="$ctrl.item.delivery.link"></prm-brief-result-container><prm-action-list ng-if="$ctrl.service.serviceName===\'action_list\'" [is-full-view]="true" [display-all]="true" [item]="::$ctrl.item" [selected-action]="\'none\'" class="list-item-secondary-content result-item-secondary-content visible" ng-style="{\'padding-top\': $ctrl.itemHeight}" ng-keydown="$ctrl.keyDownSupport($event)"></prm-action-list><div ng-if="$ctrl.loadAdditionalServices"><prm-login-alma-mashup ng-if="$ctrl.service.serviceName===\'activate\'" [item]="::$ctrl.service" [index]="::$ctrl.index"></prm-login-alma-mashup><prm-alma-mashup ng-if="$ctrl.service.serviceName===\'activate\' && $ctrl.isMashupLink()" [links-array]="$ctrl.service.linkElement.links" class="margin-bottom-large display-block"></prm-alma-mashup><prm-alma-more-inst ng-if="$ctrl.service.serviceName ===\'activate\' && $ctrl.isMoreAlmaInst() && $ctrl.isAlmaGetit()" [item]="::$ctrl.item"></prm-alma-more-inst><prm-view-online ng-if="$ctrl.service.serviceName===\'display\' " [item]="::$ctrl.service"></prm-view-online><prm-alma-viewit ng-if="$ctrl.service.serviceName===\'Viewit\' && $ctrl.hackForAlma()" [item]="::$ctrl.item"></prm-alma-viewit><prm-quick-access ng-if="$ctrl.service.serviceName===\'quickaccess\' && $ctrl.isQuickAccess()" [item]="::$ctrl.item"></prm-quick-access><prm-opac ng-if="$ctrl.service.serviceName===\'ovp\' || $ctrl.service.serviceName===\'ovl\'" [item]="$ctrl.item" [service-mode]="::$ctrl.service.serviceName" [service-scroll-id]="::$ctrl.service.scrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView"></prm-opac><alma-htgi-svc ng-if="$ctrl.service.serviceName===\'howovp\' " [item]="$ctrl.item" [service-scroll-id]="::$ctrl.service.scrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView"></alma-htgi-svc><prm-alma-other-units ng-if="$ctrl.configurationUtil.isSuprima() && $ctrl.isMoreAlmaUnits() && ($ctrl.service.serviceName===\'howovp\' || $ctrl.service.serviceName===\'Viewit\')" [item]="::$ctrl.item" [is-collapsed]="true"></prm-alma-other-units><prm-alma-other-members ng-if="$ctrl.configurationUtil.isSuprima() && $ctrl.isMoreAlmaInst(\'P\') && ($ctrl.service.serviceName===\'howovp\' || $ctrl.service.serviceName===\'ovp\')" [item]="::$ctrl.item" [service-mode]="::$ctrl.service.serviceName" [service-scroll-id]="::$ctrl.service.scrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView" [is-collapsed]="false" [availability-type]="\'P\'"></prm-alma-other-members><prm-alma-other-members ng-if="$ctrl.configurationUtil.isSuprima() && $ctrl.isMoreAlmaInst(\'E\') && ($ctrl.service.serviceName===\'howovp\' || $ctrl.service.serviceName===\'Viewit\')" [item]="::$ctrl.item" [service-mode]="::$ctrl.service.serviceName" [service-scroll-id]="::$ctrl.service.scrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView" [is-collapsed]="true" [availability-type]="\'E\'"></prm-alma-other-members><prm-service-details ng-if="$ctrl.service.serviceName===\'details\'" [item]="::$ctrl.item"></prm-service-details><prm-usage-metrics ng-if="$ctrl.service.serviceName===\'esploroUsage\'" [item]="::$ctrl.item"></prm-usage-metrics><prm-tags-list ng-if="$ctrl.service.serviceName===\'tags\'" [item]="::$ctrl.item" [tagslist]="$ctrl.recordNonUserTags" [usertagslist]="$ctrl.recordUserTags" [editable]="true" [is-full-display]="true"></prm-tags-list><prm-service-ngrs ng-if="$ctrl.service.serviceName===\'ngrs\'" [item]="::$ctrl.item"></prm-service-ngrs><prm-service-links ng-if="$ctrl.service.serviceName===\'links\'" [item]="::$ctrl.item"></prm-service-links><prm-virtual-browse ng-if="$ctrl.service.serviceName===\'virtualBrowse\'" [item]="$ctrl.item"></prm-virtual-browse><prm-more-like-this ng-if="$ctrl.service.serviceName===\'moreLikeThisCourse\'" [is-course]="$ctrl.isCourse" [item]="$ctrl.item" [more-like-this-unfiltered-items]="$ctrl.moreLikeThisItems" same-by-field="crs"></prm-more-like-this><prm-more-like-this ng-if="$ctrl.service.serviceName===\'moreLikeThisCollection\'" [is-collection]="$ctrl.isCollection" [item]="$ctrl.item" [more-like-this-unfiltered-items]="$ctrl.moreLikeThisItems" same-by-field="col"></prm-more-like-this><prm-citation-trails-fullview-link ng-if="$ctrl.service.serviceName === \'citationTrails\' || $ctrl.service.serviceName === \'timesCited\'" [record]="$ctrl.item"></prm-citation-trails-fullview-link><prm-search-within-journal ng-if="$ctrl.service.serviceName===\'searchWithinJournal\'" [item]="$ctrl.item"></prm-search-within-journal></div></div><prm-full-view-service-container-after parent-ctrl="$ctrl"></prm-full-view-service-container-after>');
$templateCache.put('components/search/fullView/fullViewServiceContainer/login-alma-mashup.html','<div ng-show="!$ctrl.isLoggedIn() && !$ctrl.isLoggedInIDP() && $ctrl.index == $ctrl.getIndexFullView()" class="bar alert-bar" layout="row" layout-align="center center"><span translate="getit.signin_link.sign_in" class="margin-right-small"></span><prm-authentication [is-logged-in]="$ctrl.userName().length > 0"></prm-authentication></div><prm-login-alma-mashup-after parent-ctrl="$ctrl"></prm-login-alma-mashup-after>');
$templateCache.put('components/search/fullView/legantoGetIt/leganto-getit.html','<prm-opac ng-if="$ctrl.currentItem" [item]="$ctrl.currentItem" [service-mode]="\'ovp\'"></prm-opac><prm-leganto-getit-after parent-ctrl="$ctrl"></prm-leganto-getit-after>');
$templateCache.put('components/search/fullView/links/service-links.html','<div class="spaced-rows"><div ng-repeat="link in $ctrl.getLinks()"><a (click)="$ctrl.setLinkType(link)" class="arrow-link" ng-href="{{link.linkURL}}" target="_blank"><span ng-if="link.linkURL.length > 0 && link.displayLabel.indexOf(\'$$E\') != 0" ng-bind-html="link.displayLabel"></span> <span ng-if="link.linkURL.length > 0 && link.displayLabel.indexOf(\'$$E\') == 0" translate-default="{{$ctrl.getDefaultLabel(link.displayLabel.substring(3))}}" translate="{{$ctrl.getLabel(link)}}"></span><prm-icon ng-if="link.linkURL.length>0" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-if="link.linkURL.length>0" link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a><div><p class="italic-text weak-text" ng-if="link.publicNote.length > 0" ng-bind-html="link.publicNote"></p></div></div><div ng-if="$ctrl.hasSourceRecordLink()"><a class="arrow-link" target="_blank" ui-sref="sourceRecord({\r\n   \t\t\tvid:\'{{$ctrl.vid}}\',\r\n   \t\t\tdocId:\'{{$ctrl.getRecordId()}}\',\r\n   \t\t\trecordOwner:\'{{$ctrl.getRecordOwner()}}\'\r\n   \t\t\t})" ui-sref-opts="{reload: true}"><span translate="{{$ctrl.getSourceRecordLinkName()}}"></span><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div></div><prm-service-links-after parent-ctrl="$ctrl"></prm-service-links-after>');
$templateCache.put('components/search/fullView/ngrs/ngrs.html','<div class="section-body" id="item-ngrs" ng-if="$ctrl.isAlmaRSServiceAvailable()"><prm-alert-bar [alert-object]="$ctrl.signInLink" ng-if="!$ctrl.isSignedIn() && $ctrl.showSignInMsg()"></prm-alert-bar><div class="main-tile" ng-if="!$ctrl.showDigitalForm() && !$ctrl.showPhysicalForm()"><div ng-class="$ctrl._hasBothOffers ? \'grid-for-two-offers\' : \'grid-for-one-offer\' "><div ng-class="$ctrl._hasBothOffers ? \'best-offer-tile-for-two-offers\' : \'best-offer-tile-for-one-offer\' " style="{{$ctrl.display()}}" ng-if="$ctrl._physicalOfferFound"><prm-service-physical-best-offer [item]="::$ctrl.item" [isdigitaloffer]="false" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [openphysicalform]="$ctrl._openPhysicalForm" [opendigitalform]="$ctrl._openDigitalForm" [bestoffer]="$ctrl._bestOffer" [piclocs]="$ctrl._picLocs" [showmessagebar]="$ctrl._showMessageBar" [openblankform]="$ctrl._openBlankForm" ng-if="$ctrl.isShowBestOffer()" style="position: relative;"></prm-service-physical-best-offer></div><div class="or-separator" ng-if="$ctrl._hasBothOffers && $ctrl.isShowBestOffer()"><div class="or"><div class="word"><div translate="nui.ngrs.bestOffers.or"></div></div></div><div class="wrapper"><div class="line"></div></div></div><div ng-class="$ctrl._hasBothOffers ? \'best-offer-tile-for-two-offers\' : \'best-offer-tile-for-one-offer\' " style="{{$ctrl.display()}}" ng-if="$ctrl._digitalOfferFound"><prm-service-physical-best-offer [item]="::$ctrl.item" [isdigitaloffer]="true" [digitalbestoffer]="$ctrl._digitalBestOffer" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [openphysicalform]="$ctrl._openPhysicalForm" [opendigitalform]="$ctrl._openDigitalForm" [bestoffer]="$ctrl._bestOffer" [openblankform]="$ctrl._openBlankForm" ng-if="$ctrl.isShowBestOffer()" style="position: relative;"></prm-service-physical-best-offer></div></div></div><div class="rapido-content" style="{{$ctrl.display()}}" ng-if="!$ctrl.offerFound()"><prm-service-no-offer-found [item]="::$ctrl.item" [opennoofferform]="$ctrl._openBlankForm" style="position: relative;"></prm-service-no-offer-found></div><div class="get-it-request" id="physicalGetItRequest" style="{{$ctrl.display()}}" ng-if="$ctrl.showPhysicalForm()"><prm-get-it-request [item]="::$ctrl.item" [isdigitaloffer]="false" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [showmessagebar]="$ctrl._showMessageBar" [bestoffer]="$ctrl._bestOffer" [digitalbestoffer]="$ctrl._digitalBestOffer" [piclocs]="$ctrl._picLocs" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [isblankform]="false" [openblankform]="$ctrl._openBlankForm"></prm-get-it-request></div><div class="get-it-request" id="digitalGetItRequest" style="{{$ctrl.display()}}" ng-if="$ctrl.showDigitalForm()"><prm-get-it-request [item]="::$ctrl.item" [isdigitaloffer]="true" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [showmessagebar]="$ctrl._showMessageBar" [bestoffer]="$ctrl._digitalBestOffer" [digitalbestoffer]="$ctrl._digitalBestOffer" [piclocs]="$ctrl._picLocs" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [isblankform]="false" [openblankform]="$ctrl._openBlankForm"></prm-get-it-request></div><md-content class="msg-bar" layout="column" ng-if="$ctrl.showSuceesBar()"><div ng-class="$ctrl.isRequestOK() ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span role="alert" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content><div class="rapido-content" ng-if="$ctrl.offerFound() && !$ctrl.isShowMoreDeliveryOptions()" style="{{$ctrl.display()}}"><prm-physical-delivery-options [showmoredeliveryoptions]="$ctrl.getShowMoreDeliveryOptions()"></prm-physical-delivery-options></div><div class="no-offer-found-content" ng-if="$ctrl.isShowMoreDeliveryOptions()"><prm-physical-delivery-options-table [offers]="$ctrl.getOffers()" [showmoredeliveryoptions]="$ctrl.getShowMoreDeliveryOptions()" [mmsid]="$ctrl.getMmsId()" [openphysicalform]="$ctrl._openPhysicalForm" [bestoffer]="$ctrl._bestOffer"></prm-physical-delivery-options-table></div><div class="rapido-content" ng-if="$ctrl.offerFound()" style="{{$ctrl.display()}}"><prm-libraries-around-bar></prm-libraries-around-bar></div></div><div><prm-spinner class="margin-left-medium inline-loader dark-on-light" layout="row" layout-align="space-between" ng-if="$ctrl.showLoader()"></prm-spinner></div><prm-service-ngrs-after parent-ctrl="$ctrl"></prm-service-ngrs-after>');
$templateCache.put('components/search/fullView/quickAccess/quickAccess.html','<prm-representation-viewer style="width:80%" ng-if="$ctrl.data" [data]="$ctrl.data" [mode]="\'quickaccess\'" [allowdownload]="$ctrl.allowDownload" [copyrightsfilecontent]="$ctrl.copyRightsFileContent" [isobtrusivecopyrights]="$ctrl.isObtrusiveCopyrights" [hiderepeatedlabels]="$ctrl.hideRepeatedLabels" [res]="$ctrl.res" [social]="$ctrl.social" [requestid]="$ctrl.requestId" [filetype]="$ctrl.fileType" [remoteurl]="$ctrl.embedUrl" flex></prm-representation-viewer><prm-quick-access-after parent-ctrl="$ctrl"></prm-quick-access-after>');
$templateCache.put('components/search/fullView/recomendation/recomendationItem.html','<div class="media-element" ng-mouseenter="hoverItem = true" ng-mouseleave="hoverItem = false"><a ng-href="{{$ctrl.getLink()}}" ng-click="$ctrl.sendBeacon()" target="_blank" class="a-tag-as-wrapper" layout="row"><div class="media-figure" ng-if="$ctrl.rec.image"><img ng-src="{{$ctrl.rec.image}}" alt=""></div><div class="media-body" flex><h3 class="recommendations-title" ng-class="{\'hover\': hoverItem}" title="{{$ctrl.rec.title }}"><span class="line-clamp-2"><span>{{ $ctrl.rec.title }}</span></span><prm-icon external-link ng-class="{\'visible\': hoverItem}" icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon></h3><p class="recommendation-details" title="{{$ctrl.rec.line1}}, {{$ctrl.rec.line2}}" layout="column"><span ng-if="$ctrl.rec.line1" ng-bind-html="$ctrl.rec.line1"></span> <span ng-if="$ctrl.rec.line2" ng-bind-html="$ctrl.rec.line2"></span></p><p class="weak-text" ng-if="$ctrl.rec.suggestion || $ctrl.rec.suggestionText"><span class="tiny-uppercase-text" translate="nui.suggestion.bx.type" translate-values="$ctrl.getPlaceHolders($ctrl.rec)"></span> <span><span style="font-size: .95em" translate="nui.suggestion.bx.message"></span><img ng-if="$ctrl.rec.suggestion == \'BX\'" src="img/bxlogo.png" alt="" style="width: 18px; position: relative; top: 3px;"/> <img ng-if="$ctrl.rec.suggestion == \'bibtip\'" ng-src="img/bibtiplogo.png" alt="" style="position: relative; top: 3px; height: .9em; width: auto; margin-left: .2em;"/> <img ng-if="$ctrl.rec.suggestion == \'worldcat\'" ng-src="img/bibtiplogo.png" alt="" style="position: relative; top: 3px; height: .9em; width: auto; margin-left: .2em;"/></span></p></div></a></div><prm-recomendation-item-after parent-ctrl="$ctrl"></prm-recomendation-item-after>');
$templateCache.put('components/search/fullView/recomendation/recomendations.html','<div class="recommendations-wrapper" layout="column" layout-align="start start" ng-if="$ctrl.bxenable"><div class="section-head" layout="column" layout-align="start start"><h2 class="section-title md-title light-text" translate="nui.suggestions.header"></h2><p class="section-description"><span translate="nui.suggestions.tooltip"></span></p></div></div><div class="recommendations-list"><div class="recommendations-item animate-opacity-and-scale" layout="row" ng-repeat="pnx in $ctrl.recommendations.docs | limitTo:$ctrl.quantity"><prm-recomendation-item [item]="::pnx" [index]="$index"></prm-recomendation-item></div></div><md-button class="button-link prm-alt-link" ng-if="$ctrl.more" ng-click="$ctrl.moreSuggestions()"><span translate="nui.suggestions.more"></span></md-button><prm-recomendations-after parent-ctrl="$ctrl"></prm-recomendations-after>');
$templateCache.put('components/search/fullView/serviceHeader/service-header.html','<div layout="row" layout-align="center center"><h4 class="section-title md-title light-text" translate="{{$ctrl.title}}"></h4><md-divider flex></md-divider></div><prm-service-header-after parent-ctrl="$ctrl"></prm-service-header-after>');
$templateCache.put('components/search/fullView/syndeticUnbound/syndeticUnbound.html','<prm-syndetic-unbound-after parent-ctrl="$ctrl"></prm-syndetic-unbound-after>');
$templateCache.put('components/search/personalization/personalizationButton/personalize-results-button.html','<md-button ng-if="$ctrl.personalizationEnabled && !$ctrl.displayDialog()" class="button-as-link button-switch zero-margin" ng-click="$ctrl.doPersonalization()" ng-class="$ctrl.enable ? \'toggled\' : \'link-alt-color\'" aria-label="{{($ctrl.enable ? \'nui.pyr.aria.tooltip.active\' : \'nui.pyr.icon.aria.inactive\') | translate}}" hide-xs hide-sm><md-tooltip ng-if="!$ctrl.enable"><span translate="nui.pyr.icon.tooltip.inactive"></span></md-tooltip><md-tooltip ng-if="$ctrl.enable"><span translate="nui.pyr.icon.tooltip.active"></span></md-tooltip><md-switch ng-model="$ctrl.enable" tabindex="-1" md-no-ink class="tiny-switch zero-margin"><span class="bold-text" ng-if="!$ctrl.enable" translate="nui.pyr.icon.label.inactive"></span> <span class="bold-text" ng-if="$ctrl.enable" translate="nui.pyr.icon.label.active"></span></md-switch></md-button><md-button ng-click="$ctrl.doPersonalization()" class="button-link padding-zero facet-filter button-as-link-mobile link-alt-color" aria-label="{{::(\'nui.facets.title\' | translate)}}" ng-if="$ctrl.personalizationEnabled && !$ctrl.displayDialog()" ng-class="{\'personalization-mobile-btn\':$ctrl.enable}" id="mobilePersonalization" hide-gt-sm><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="personalize-results"></prm-icon></md-button><prm-personalize-results-button-after parent-ctrl="$ctrl"></prm-personalize-results-button-after>');
$templateCache.put('components/search/fullView/usageMetrics/usage-metrics.html','<div class="local-metrics"><div class="local-metric-item"><prm-icon class="local-metric-icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="download"></prm-icon><span class="local-metric-info"><span class="local-metric-count">{{$ctrl.numOfDownloads()}}</span> <span translate="fulldisplay.constants.num_of_downloads"></span></span></div><div class="local-metric-item"><prm-icon class="local-metric-icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="views"></prm-icon><span class="local-metric-info"><span class="local-metric-count">{{ $ctrl.numOfViews()}}</span> <span translate="fulldisplay.constants.num_of_abstract_views"></span></span></div></div><div class="altmetrics-wrapper" ng-if="$ctrl.assetDoi()"><div class="altmetric-embed" data-badge-type="donut" data-badge-details="right" data-doi="{{$ctrl.assetDoi()}}" data-link-target="_blank"></div></div><prm-usage-metrics-after parent-ctrl="$ctrl"></prm-usage-metrics-after>');
$templateCache.put('components/search/personalization/personalizationDialog/personalization-dialog.html','<div class="personalization-dialog" layout="column" ng-class="{\'is-active\': $ctrl.displayDialog()}" ng-keydown="$ctrl.keyDownSupport($event)" role="application"><div class="personalization-dialog-inner form-focus" layout="column"><div class="dialog-content" flex><h2 translate="nui.pyr.popup.label" class="zero-margin-bottom"></h2><p translate="nui.pyr.popup.help"></p><div class="margin-top-medium"><form><div class="checkboxes-tree" layout="row" role="list"><div flex><div class="checkbox-tree-branch" ng-repeat="discipline in ::$ctrl.sortedDisc.slice(0, $ctrl.getSliceLen($ctrl.sortedDisc))" role="listitem"><md-checkbox ng-model="$ctrl.selectedDisc[discipline[0]]" ng-disabled="$ctrl.isDisabled(discipline)" ng-class="{\'is-disabled\' : $ctrl.isDisabled(discipline)}"><b>{{discipline[1]}}</b></md-checkbox><div layout="column" class="checkbox-tree-branch" role="list"><md-checkbox ng-model="$ctrl.selectedDisc[sub[0]]" ng-repeat="sub in ::$ctrl.getsubDisciplines(discipline[0])" ng-disabled="$ctrl.isDisabledSub(sub)" ng-class="{\'is-disabled\' : $ctrl.isDisabledSub(sub)}">{{sub[1]}}</md-checkbox></div></div></div><div flex><div class="checkbox-tree-branch" ng-repeat="discipline in ::$ctrl.sortedDisc.slice($ctrl.getSliceLen($ctrl.sortedDisc),$ctrl.sortedDisc.length)" role="listitem"><md-checkbox ng-model="$ctrl.selectedDisc[discipline[0]]" ng-disabled="$ctrl.isDisabled(discipline)" ng-class="{\'is-disabled\' : $ctrl.isDisabled(discipline)}"><b>{{discipline[1]}}</b></md-checkbox><div layout="column" class="checkbox-tree-branch" role="list"><md-checkbox ng-model="$ctrl.selectedDisc[sub[0]]" ng-repeat="sub in ::$ctrl.getsubDisciplines(discipline[0])" ng-disabled="$ctrl.isDisabledSub(sub)" ng-class="{\'is-disabled\' : $ctrl.isDisabledSub(sub)}">{{sub[1]}}</md-checkbox></div></div></div></div></form></div></div><div class="dialog-warning" layout="row" flex="noshrink" ng-if="$ctrl.countSelectedDisc() > 5"><prm-alert-bar flex [alert-object]="$ctrl.maxDisciplines" role="alert" aria-live="assertive"></prm-alert-bar></div><div class="dialog-actions" layout="row" flex="noshrink"><md-button class="button-with-icon button-notice" ng-click="$ctrl.resetPersonalization()" ng-if="$ctrl.isPreferredSaved()"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_refresh_24px"></prm-icon><span translate="nui.pyr.popup.reset"></span></md-button><span flex></span><md-button translate="nui.pyr.popup.cancel" ng-click="$ctrl.cancel(e)"></md-button><md-button class="button-confirm" ng-click="$ctrl.personalize()" ng-disabled="$ctrl.countSelectedDisc() > 5"><span translate="nui.pyr.popup.submit.inactive" ng-if="!$ctrl.isPreferredSaved()"></span> <span translate="nui.pyr.popup.submit.active" ng-if="$ctrl.isPreferredSaved()"></span></md-button></div><div layout="row" layout-align="center center"><md-button (keydown)="$ctrl.keydownSupport($event)" class="accessible-close button-link" (click)="$ctrl.cancel(e)" aria-label="{{::(\'nui.aria.pyr.close.personalizationDialog\' | translate)}}" style="margin: 0 0 1em 0"><span translate="nui.pyr.popup.close"></span></md-button></div></div></div><prm-personalization-dialog-after parent-ctrl="$ctrl"></prm-personalization-dialog-after>');
$templateCache.put('components/search/savedQueries/addAlertToast/add-alert-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" class="md-toast-content" role="alert" aria-live="assertive"><div layout="row" layout-align="center center" class="md-toast-content" ng-class="{\'end-content\':!$ctrl.detectMobile()}"><span class="md-toast-text"><span ng-if="!$ctrl.addMode" translate="nui.favorites.search.alert.message"></span> <span ng-if="$ctrl.addMode" translate="nui.savesearch.message.description"></span> <strong ng-if="!$ctrl.addMode">{{$ctrl.email}}</strong></span></div><div layout="row" layout-align="start start" class="md-toast-content" ng-class="{\'start-content\':!$ctrl.detectMobile()}"><md-button ng-if="$ctrl.displayAlertForm()" ng-class="{\'mobile-size\':$ctrl.detectMobile()}" md-no-ink="true" class="md-higlight settings-button" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" ng-click="$ctrl.openMoreInfo($event)" aria-label="Change email address"><div layout="row"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="alert" class="custom-button"></prm-icon><span ng-if="!$ctrl.addMode" style="text-transform: none" translate="nui.favorites.search.alert.set_email"></span> <span ng-if="$ctrl.addMode" style="text-transform: none;white-space: normal;" translate="nui.savesearch.message.set_alert"></span></div></md-button><md-button ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}} "><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div></md-toast><prm-add-alert-toast-after parent-ctrl="$ctrl"></prm-add-alert-toast-after>');
$templateCache.put('components/search/savedQueries/editNotificationSettings/edit-notification-settings.html','<form name="emailForm" novalidate (submit)="$ctrl.saveEmail()"><div class="md-dialog-content"><h2 class="h2-title" translate="nui.savesearch.alert.header"></h2><p ng-if="$ctrl.addMode===\'true\'"><span translate="nui.savesearch.alert.description"></span></p><p><span translate="nui.savesearch.alert.set_email"></span></p><md-input-container class="underlined-input md-required"><label translate="nui.savesearch.alert.email"></label> <input id="input-mail-saved-searches" tabindex="0" ng-model="$ctrl.email" name="addresses" type="text" required ng-pattern="::$ctrl.emailRegEx" value="$ctrl.email"><div ng-messages="emailForm.addresses.$error" ng-show="emailForm.addresses.$touched"><div ng-message="pattern, required "><span translate="nui.email.invalidaddress"></span></div></div></md-input-container></div><md-dialog-actions layout="row"><span flex></span><md-button ng-click="$ctrl.close()"><span translate="nui.savesearch.alert.close"></span></md-button><md-button type="submit" class="button-confirm"><span translate="nui.savesearch.alert.save"></span></md-button></md-dialog-actions></form><prm-edit-notification-settings-after parent-ctrl="$ctrl"></prm-edit-notification-settings-after>');
$templateCache.put('components/search/searchBar/tabsAndScopesSelector/tabs-and-scopes-selector.html','<div layout="row"><md-divider ng-if="$ctrl.showTabsSelect()" class="skewed-divider"></md-divider><md-input-container layout="row" class="zero-margin" layout-align="start center" ng-if="$ctrl.showTabsSelect()"><md-select ng-model="$ctrl.tab" ng-change="$ctrl.onTabChange()" aria-label="{{\'nui.search.selectSearch\' | translate}}"><md-option ng-repeat="tab in $ctrl.tabOptions" value="{{tab}}"><span translate="{{\'tabbedmenu.\'+tab+\'.label\'}}" role="button"></span></md-option></md-select></md-input-container><md-divider ng-if="$ctrl.showScopesSelect()" class="skewed-divider"></md-divider><md-input-container layout="row" class="zero-margin" layout-align="start center" ng-if="$ctrl.showScopesSelect()"><md-select ng-model="$ctrl.scope" aria-label="{{\'nui.search.selectScope\' | translate}}"><md-option ng-repeat="scope in $ctrl.scopeOptions track by scope[\'scope-id\']" value="{{scope[\'scope-id\']}}"><span translate="{{\'scopes.option.\'+scope[\'scope-id\']}}" role="button"></span> <span ng-if="scope.accessibility" translate="{{\'option.accessibility.\'+scope.accessibility}}"></span></md-option></md-select></md-input-container></div><prm-tabs-and-scopes-selector-after parent-ctrl="$ctrl"></prm-tabs-and-scopes-selector-after>');
$templateCache.put('components/search/searchResult/featuredResults/featured-result-item.html','<md-card ng-class="{ \'is-article\' : $ctrl.formatType == \'article\',  \'is-book\' : $ctrl.formatType === \'book\',\r\n                       \'is-image\': $ctrl.formatType == \'image\'}" tabindex="-1"><md-button ng-href="{{::$ctrl.fullDisplayParam()}}" ng-click="$ctrl.sendFeaturedResultsItemBeacon($ctrl.recordId)" tabindex="0" ng-focus="itemTooltipVisible" ng-style="{\'background-color\': \'hsl({{$ctrl.index*40}}, 30%, 70%)\'}" style="min-height: 5px"><md-tooltip class="content-tooltip bright-tooltip" md-visible="itemTooltipVisible" md-delay="400" md-direction="bottom" md-autohide="true"><div layout="column"><h3 class="prm-citation-title md-subhead bold-text">{{$ctrl.title}}</h3><p><span>{{$ctrl.displayLines}}</span></p></div></md-tooltip><div class="card-image" ng-if="$ctrl.formatType ===\'book\'"><prm-search-result-thumbnail-container class="md-card-image" [is-virtual-browse]="true" [is-featured-result]="true" [links]="$ctrl.getImage()" [pnx-id]="$ctrl.recordId"></prm-search-result-thumbnail-container></div><md-card-title ng-if="$ctrl.formatType != \'image\'" id="featuredResultTitle" ng-class="{\'book-height\':$ctrl.formatType == \'book\'}"><md-card-title-text ng-class="{\'has-ellipsis\': $ctrl.showEllipsis}">{{$ctrl.title}}</md-card-title-text></md-card-title><md-card-content ng-if="$ctrl.formatType == \'image\'" style="padding: 0px!important;min-height: 50px"><figure><div layout="column"><prm-search-result-thumbnail-container alt="Washed Out" class="md-card-image" [is-virtual-browse]="true" [is-featured-result]="true" [links]="$ctrl.getImage()" [pnx-id]="$ctrl.recordId"></prm-search-result-thumbnail-container></div></figure></md-card-content></md-button></md-card><prm-featured-result-item-after parent-ctrl="$ctrl"></prm-featured-result-item-after>');
$templateCache.put('components/search/searchResult/featuredResults/featured-results.html','<div class="margin-top-medium" layout="row"><div class="margin-right-medium" flex="15"><h3 ng-if="!$ctrl.isSuprima || !$ctrl.title" class="normal-text">{{\'search-advanced.mediaType.option.\' + $ctrl.type| translate}} {{\'featuredresults.labels.in\'| translate}} {{\'scopes.option.\' + $ctrl.scope| translate}} {{\'featuredresults.labels.matching\'| translate}}</h3><h3 ng-if="$ctrl.isSuprima && $ctrl.title" class="normal-text">{{$ctrl.title | translate}}</h3><md-button ng-if="$ctrl.totalHits?($ctrl.totalHits>$ctrl.featuredResultItems.length):($ctrl.leftArrowShowing || $ctrl.isShowRightArrow)" ng-href="{{::$ctrl.searchLink()}}" ng-click="$ctrl.sendDisplayAllResultsBeacon()" class="featured-results-link button-as-link zero-margin" href><span class="bold-text">{{\'featuredresults.labels.displayall\'| translate}}</span></md-button></div><div class="prm-horizontal-content no-scrollbar" layout="row" flex aria-label="" ng-keyup="$ctrl.handleKeyUp($event)"><div flex class="horizontal-content-container"><md-button class="horizontal-content-control left-button" tabindex="0" ng-click="$ctrl.scrollContent(\'left\')" aria-label="" ng-if="$ctrl.leftArrowShowing"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon><md-tooltip><span></span></md-tooltip></md-button><div class="horizontal-content-scroller" role="list" layout="row" ng-class="{\'left-button-visible\': $ctrl.leftArrowShowing, \'right-button-visible\': $ctrl.isShowRightArrow,\'safari-hide\': $ctrl.isSafari}"><div class="horizontal-content-scroll-offseter" layout="row"><prm-featured-result-item [featured-result-item]="item" [index]="$index" [tab]="$ctrl.tab" [format]="$ctrl.format" [scope]="$ctrl.scope" [adaptor]="$ctrl.adaptor" ng-repeat="item in $ctrl.featuredResultItems"></prm-featured-result-item></div></div><md-button class="horizontal-content-control right-button" tabindex="0" ng-click="$ctrl.scrollContent(\'right\')" aria-label="" ng-if="$ctrl.isShowRightArrow"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon><md-tooltip><span></span></md-tooltip></md-button></div></div></div><prm-featured-results-after parent-ctrl="$ctrl"></prm-featured-results-after>');
$templateCache.put('components/search/searchResult/explain/search-explain.html','<span ng-repeat="link in $ctrl.getLinks()">&nbsp;&nbsp;&bull;&nbsp;&nbsp; <a href="{{$ctrl.baseUrl}}{{link.url}}">{{link.name}}</a> </span><span ng-repeat="link in $ctrl.testBaseUrls">&nbsp;&nbsp;&bull;&nbsp;&nbsp; <a href="{{$ctrl.getTestUrl()}}{{link.url}}" target="_blank">{{link.name}}</a> </span><span ng-if="$ctrl.isStored()"><br><br>Stored Fields: <span ng-repeat="field in $ctrl.getFields()">&bull; <a href="{{$ctrl.baseUrl}}nodb,jaguar_internal_src_id;{{field}},100,;">{{field}}</a></span></span><br><br><span ng-if="$ctrl.isRecordExplain()"><div>Record: <b>{{$ctrl.header.record}}</b>&nbsp;&nbsp;&bull;&nbsp;&nbsp; Score: <b>{{$ctrl.header.score}}</b>&nbsp;&nbsp;&bull;&nbsp;&nbsp; Place: <b>{{$ctrl.header.place}}</b>&nbsp;&nbsp;&bull;&nbsp;&nbsp; Slice: <b>{{$ctrl.header.index}}</b>&nbsp;&nbsp;&bull;&nbsp;&nbsp; ID: <b>{{$ctrl.header.id}}</b></div><br><table cellspacing="2" border="1" cellpadding="10"><tr><th><b>Query Type</b></th><th><b>Total Weight</b></th><th><b>Search Term</b></th><th><b>Found in Field</b></th><th><b>Query Weight</b></th><th><b>Field Weight</b></th><th><b>Field Boost</b></th><th><b>IDF</b></th><th><b>TF</b></th></tr><tr ng-repeat="entry in $ctrl.getEntries() track by $index"><td>{{ entry.qType }}</td><td>{{ entry.weight }}</td><td>{{ entry.term }}</td><td>{{ entry.field }}</td><td>{{ entry.queryWeight }}</td><td>{{ entry.fieldWeight }}</td><td>{{ entry.boost }}</td><td>{{ entry.docFreq }} / {{ entry.maxDocs }}</td><td>{{ entry.tf }}</td></tr></table></span><span ng-if="$ctrl.isParams()"><li ng-repeat="line in $ctrl.getLines()"><span ng-bind-html="line">{{line}}</span></li></span><span ng-if="!$ctrl.isRecordExplain() && !$ctrl.isRecordIds() &&!$ctrl.isParams()"><li ng-repeat="line in $ctrl.getLines() track by $index"><span>{{line}}</span></li></span><span ng-if="$ctrl.isRecordIds()"><br><br>Explain:<li ng-repeat="line in $ctrl.getRecords() track by $index"><a href="{{$ctrl.baseUrl}}{{line}}">{{line}}</a></li>{{$ctrl.hits}}</span><prm-search-explain-after parent-ctrl="$ctrl"></prm-search-explain-after>');
$templateCache.put('components/search/savedQueries/addQueryToSavedSearches/add-query-to-saved-searches.html','<md-button class="button-as-link link-alt-color" (click)="$ctrl.add()" aria-label="{{\'nui.aria.savequery\' | translate}}" ng-class="{\'button-as-link-mobile\':$ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm}"><md-tooltip><span translate="nui.savesearch.tooltip"></span></md-tooltip><prm-icon class="pin-icon" [icon-type]="::$ctrl.actionsIcons.pin.type" [svg-icon-set]="::$ctrl.actionsIcons.pin.iconSet" [icon-definition]="::$ctrl.actionsIcons.pin.icon"></prm-icon><span class="bold-text" translate="results.savequery" hide-xs hide-sm></span></md-button><prm-add-query-to-saved-searches-after parent-ctrl="$ctrl"></prm-add-query-to-saved-searches-after>');
$templateCache.put('components/search/searchResult/savedQueriesList/saved-queries-list.html','<div class="content-tab saved-query-list" ng-init="selectedCounter=0;"><h2 class="accessible-only"><span>{{$ctrl.getSavedQueriesHeader()}}</span></h2><md-list aria-label="{{\'nui.aria.savedQueriesList.list\' | translate}}"><md-subheader><div layout="row" sticky sticky-class="is-stuck" offset="56"><md-checkbox ng-if="$ctrl.itemlist.length > 0" aria-label="Select All" ng-checked="$ctrl.isAllChecked()" md-indeterminate="$ctrl.getCheckedItems().length > 0  && $ctrl.getCheckedItems().length < $ctrl.itemlist.length" ng-click="$ctrl.selectAllToggle()"></md-checkbox><span>{{$ctrl.getSavedQueriesHeader()}}</span></div></md-subheader><md-list-item tabindex="0" class="md-2-line saved-query-list-2-line" aria-label="{{\'nui.aria.savedQueriesList.item\' | translate}}" ng-repeat="item in $ctrl.itemlist track by $index" layout="row"><div class="has-checkbox" flex="5"><span class="list-item-count">{{$index+1}}</span><md-checkbox flex="5" aria-live="assertive" aria-label="{{$ctrl.decodeString(item.query.split(\',\')[2])}} {{\'nui.aria.brief.select\' | translate}} {{$index+1}}" ng-model="item.checked"></md-checkbox></div><div id="{{item.ID}}" class="md-list-item-text" layout="column" flex="80" layout-align="start start" layout-fill><a ng-href="{{$ctrl.isSearchHistory ? item.deepLink + \'&came_from=search_history\' : item.deepLink + \'&came_from=saved_queries\'}}" target="_self" class="bold-text"><h3 class="item-title"><div ng-if="item.mode === \'simple\'"><span ng-if="!(item.query.split(\',\')[0]===\'any\' && item.query.split(\',\')[1]===\'contains\')" class="ng-binding"><span>{{$ctrl.getFieldLabel(item.query.split(\',\')[0])}} </span><span translate="search-advanced.precisionOperator.option.{{item.query.split(\',\')[1]}}"></span> </span><span>{{$ctrl.decodeString(item.query.split(\',\')[2])}}</span></div><span ng-init="prevBoolOper=\'AND\'"></span><div ng-if="item.mode === \'advanced\'" ng-repeat="q in item.query.split(\';\') track by $index" class="string-block animate-scale middle" ng-class="{\'clear-row\': prevBoolOper === \'OR\'}" ng-init="prevBoolOper = item.query.split(\';\')[$index-1].split(\',\')[3];multipleQueryItems=item.query.split(\';\').length>1"><prm-icon ng-if="$index===0 || prevBoolOper === \'OR\'" icon-type="svg" svg-icon-set="primo-ui" icon-definition="keyboard-return" class="prm-positive h-flipped"></prm-icon><span ng-if="$index!==0 && prevBoolOper !== \'OR\'">&nbsp;</span><span ng-if="$index!==0" class="ng-binding"><span translate="search-advanced.boolOperator.option.{{prevBoolOper}}"></span></span> <span class="ng-binding"><span ng-if="multipleQueryItems || !(item.query.split(\',\')[0]===\'any\' && item.query.split(\',\')[1]===\'contains\')" class="ng-binding"><span translate="search-advanced.scope.option.nui.advanced.index.{{q.split(\',\')[0]}}"></span> <span translate="search-advanced.precisionOperator.option.{{q.split(\',\')[1]}}"></span> </span>{{$ctrl.decodeString(q.split(\',\')[2])}}</span></div></h3></a><h4><strong><span translate="nui.favorites.search.scope"></span></strong> <span translate="{{\'tabbedmenu.\'+ item.tab +\'.label\'}}"></span> <i>/</i> <span translate="scopes.option.{{item.scope}}"></span></h4><p class="weak-text text-ellipsis"><prm-saved-query-filter [item]="item"></prm-saved-query-filter><md-tooltip><prm-saved-query-filter [item]="item"></prm-saved-query-filter></md-tooltip></p><h4>{{$ctrl.convertDate(item.creationDate)}}</h4><div class="md-secondary item-actions saved-query-actions result-item-actions" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-align="center center"><md-button ng-if="!$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.favorites.search.rss.tooltip\' | translate}}" ng-click="$ctrl.createRSS(item)"><prm-icon ng-if="!item.rsscreated" icon-type="svg" svg-icon-set="primo-ui" icon-definition="rss" class="custom-button"></prm-icon><prm-icon ng-if="item.rsscreated" icon-type="svg" svg-icon-set="primo-ui" icon-definition="rss" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.rss.tooltip"></span></md-tooltip></md-button><md-button ng-if="!$ctrl.isSearchHistory && $ctrl.isDisplayAlert(item)" class="md-icon-button" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" ng-click="$ctrl.updateAlert(item,item.email)"><prm-icon ng-if="!item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="alert" class="custom-button"></prm-icon><prm-icon ng-if="item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="alerted" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.alert.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="!$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.aria.savedQueriesList.remove\' | translate}}" ng-click="$ctrl.removeSearch(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isLoggedIn() && $ctrl.isSearchHistory   && $ctrl.isSearchHistoryItemInSavedSearches(item)" class="md-icon-button" aria-label="{{\'nui.favorites.search.unpin.single.tooltip\' | translate}}" ng-click="$ctrl.removeSearchHistoryItemFromSavedSearches(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isLoggedIn() && $ctrl.isSearchHistory  && !$ctrl.isSearchHistoryItemInSavedSearches(item)" class="md-icon-button" aria-label="{{\'nui.favorites.search.save.single.tooltip\' | translate}}" ng-click="$ctrl.saveSearchHistoryItemToSavedSearches(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.save.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.favorites.search.remove.single.tooltip\' | translate}}" ng-click="$ctrl.removeSearchHistoryItem(item.ID)"><prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_delete_24px" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.remove.single.tooltip"></span></md-tooltip></md-button></div></div><div flex="20" flex-xs="0" flex-md="0" flex-lg="20" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></md-list-item></md-list><form method="post" id="RRSFORM" name="RssForm" action="/" target="rssWindow"><input type="hidden" name="ver" value="2_1_4"> <input type="hidden" name="gatherpagestat" value="true"> <input type="hidden" name="subscribeRSS" value="A=Primo_Local&amp;I=VOLCANO&amp;S=F4CE012EC5946271B54EED773A411568&amp;G=&amp;IP=10.1.234.133&amp;SRVR=il-primoqa02.corp.exlibrisgroup.com&amp;P=rssSubscription&amp;OP=click&amp;TYP=Page_View_4.9.9.0&amp;O=%26%26rank%26%26VOLCANO%26VOLCANO%26%26&amp;O1=&amp;O2=primo_alma&amp;O3=&amp;O4=&amp;O5=972EXL.PCO.PSTG&amp;O6=&amp;O7=0&amp;O8=war&amp;O9=Auto1&amp;O10=&amp;O11=&amp;O12=0&amp;O13=&amp;O14=&amp;O15=&amp;O16=&amp;O17=default_tab&amp;O18=&amp;O19=&amp;O20=&amp;O23=Primo&amp;"> <input type="hidden" name="boombaseurl" value="https://beacon01.alma.exlibrisgroup.com/boom/apache_pb.gif"></form><div layout="row" layout-align="center center" class="padding-top-large"><md-button (click)="$ctrl.nextResults()" ng-if="$ctrl.hasNextResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div></div><prm-saved-queries-list-after parent-ctrl="$ctrl"></prm-saved-queries-list-after>');
$templateCache.put('components/search/searchResult/errorMessage/search-error-message.html','<md-card layout="row"><div class="message-image"><span ng-if="$ctrl.showNoResultsIcon()"><prm-icon icon-type="{{$ctrl.errorMessageIcons.errorNoResults.type}}" svg-icon-set="{{$ctrl.errorMessageIcons.errorNoResults.iconSet}}" icon-definition="{{$ctrl.errorMessageIcons.errorNoResults.icon}}"></prm-icon></span><span ng-if="$ctrl.showAttentionIcon()"><prm-icon icon-type="{{$ctrl.errorMessageIcons.errorAttention.type}}" svg-icon-set="{{$ctrl.errorMessageIcons.errorAttention.iconSet}}" icon-definition="{{$ctrl.errorMessageIcons.errorAttention.icon}}" class="warning"></prm-icon></span></div><div><md-card-title><md-card-title-text style="padding: 0px"><h2 class="margin-bottom-zero">{{$ctrl.getErrorHeader()}}</h2></md-card-title-text></md-card-title><md-card-content style="padding: 0px 20px"><p>{{$ctrl.getErrorDescription()}}</p><p class="message-suggestion">{{$ctrl.getErrorSuggestionHeader()}}</p><ul><li ng-repeat="suggestionDescription in $ctrl.getErrorSuggestionsDescription()"><span>{{suggestionDescription}}</span></li></ul></md-card-content></div></md-card><prm-search-error-message-after parent-ctrl="$ctrl"></prm-search-error-message-after>');
$templateCache.put('components/search/searchResult/searchResultAddToFavoritesMenu/search-result-add-to-favorites-menu.html','<md-menu><md-button id="addFavAndLabeluser" ng-click="$ctrl.openMenu($mdOpenMenu, $event)" aria-label="{{$ctrl.isChosenFavAndLabels() | translate}}" class="md-icon-button pin-button"><md-tooltip md-delay="400"><span translate="nui.favorites.pin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\':$ctrl.disable || $ctrl.searchInProgress}" icon-type="{{::$ctrl.favoritesIcons.pin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.pin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.pin.icon}}"></prm-icon></md-button><md-menu-content width="4" layout="column" class="menu-with-footer"><md-menu-item><md-button id="addToFavUser" md-autofocus ng-click="$ctrl.pinToFavoritesFromMenu()" aria-label="{{::(\'nui.brief.bulk.addToFavorites\' | translate)}}" style="margin: 0 0 1em 0"><prm-icon class="pin-icon" style="color: #45aab4" [icon-type]="::$ctrl.actionsIcons.pin.type" [svg-icon-set]="::$ctrl.actionsIcons.pin.iconSet" [icon-definition]="::$ctrl.actionsIcons.pin.icon"></prm-icon><span class="tiny-uppercase-text" translate="nui.brief.bulk.addToFavorites"></span></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><span class="tiny-uppercase-text" translate="nui.brief.bulk.addToFavoritesUsingLabels"></span></md-menu-item><md-menu-item ng-repeat="label in $ctrl.returnAssignedLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.assigned"></span></div><md-button md-autofocus ng-click="$ctrl.removeLabel(label)" aria-label="{{\'nui.aria.account.favorites.removelabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{label}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon></span></md-button></md-menu-item><md-menu-divider ng-if="$ctrl.returnOtherLabels().length && $ctrl.returnAssignedLabels().length"></md-menu-divider><md-menu-item ng-repeat="otherLabel in $ctrl.returnOtherLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.other"></span></div><md-button ng-click="$ctrl.pinToFavoritesFromMenu(); $ctrl.addLabelAfterPinned(otherLabel)" md-autofocus aria-label="{{\'nui.aria.account.favorites.addlabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{otherLabel}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.addLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.addLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.addLabel.icon}}"></prm-icon></span></md-button></md-menu-item><div class="menu-footer"><md-menu-divider ng-if="$ctrl.returnOtherLabels().length || $ctrl.returnAssignedLabels().length" class="zero-margin-top"></md-menu-divider><form ng-submit="$ctrl.pinToFavoritesFromMenu(); $ctrl.addLabelAfterPinned()" class=""><div layout="row" layout-fill layout-align="center center"><prm-icon style="color: #45aab4" icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><md-input-container flex="80"><label translate="nui.favorites.labels.new"></label> <input ng-model="$ctrl.newLabel" type="text" autocomplete="off" (keydown)="$ctrl.keydownSupport($event)"></md-input-container></div></form></div></md-menu-content></md-menu><prm-search-result-add-to-favorites-menu-after parent-ctrl="$ctrl"></prm-search-result-add-to-favorites-menu-after>');
$templateCache.put('components/search/searchResult/searchResultAvailability/searchResultAvailabilityLine.html','<div ng-repeat="availability in $ctrl.displayedAvailability track by $index" layout="row" layout-align="start start"><div layout="flex" ng-if="::!$ctrl.isCollectionDiscoveryCollection" ng-if="$ctrl.showTimer"><prm-icon ng-if="::$ctrl.isOnline($index,availability) && !$ctrl.isGlobalRapidoRecord()" availability-type icon-type="{{::$ctrl.availabilityLineIcons.onlineMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.onlineMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.onlineMaterial.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><prm-icon ng-if="::$ctrl.isPhysical($index,availability) && !$ctrl.isGlobalRapidoRecord()" availability-type icon-type="{{::$ctrl.availabilityLineIcons.physicalMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.physicalMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.physicalMaterial.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><prm-icon ng-if="::$ctrl.isGlobalRapidoRecord()" availability-type icon-type="svg" svg-icon-set="primo-ui" icon-definition="rapido-search-globe" [display-mode]="::$ctrl.displayMode"></prm-icon><md-button prm-brief-internal-button-marker ng-if="::!$ctrl.isEmailMode()" ng-click="$ctrl.handleAvailability($index, $event);$event.preventDefault();" class="neutralized-button arrow-link-button" aria-label="{{$ctrl.getTranslatedLine(\'delivery.code.\'+availability)}}{{::($ctrl.isDirectLink($index) ? \'nui.aria.newWindow\' : \'\') | translate}}" title="{{$ctrl.getTranslatedLine(\'delivery.code.\'+availability)}}{{::($ctrl.isDirectLink($index) ? \'nui.aria.newWindow\' : \'\') | translate}}"><span class="button-content"><span class="availability-status {{availability}}" ng-style="::$ctrl.getNgrsStyle()" ng-class="::{\'text-rtl\': $ctrl.switchToLtrString()}" translate="delivery.code.{{$ctrl.handleDueDate(availability)}}" translate-values="::$ctrl.getPlaceHolders($ctrl.result)" translate-compile></span><span ng-if="::($ctrl.showDisplayOtherLocations() || $ctrl.showDisplayLocation()  || $ctrl.showOtherLibraries(availability)) && $ctrl.isPhysical($index)" ng-bind-html="&nbsp;"></span> <span ng-if="::($ctrl.showDisplayOtherLocations() || $ctrl.showDisplayLocation()) && $ctrl.isPhysical($index)  && !$ctrl.showOtherLibraries(availability)" translate="delivery.and.other.locations"></span> <span ng-if="::$ctrl.showOtherLibraries(availability)" translate="delivery.code.ngrs.other_libraries"></span><prm-icon ng-if="::$ctrl.isDirectLink($index)" external-link icon-type="{{::$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.externalLink.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon></span><prm-spinner class="inline-loader display-inline dark-on-light half-transparent" ng-if="$ctrl.result.rtaInProgress"></prm-spinner><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon></md-button><span class="button-content" ng-if="::$ctrl.isEmailMode()"><span class="availability-status {{::availability}}" ng-style="::$ctrl.getNgrsStyle()" ng-class="::{\'text-rtl\': $ctrl.switchToLtrString()}" translate="delivery.code.{{::$ctrl.handleDueDate(availability)}}" translate-values="$ctrl.getPlaceHolders($ctrl.result)" translate-compile></span><span ng-if="::($ctrl.showDisplayOtherLocations() || $ctrl.showDisplayLocation() || $ctrl.showOtherLibraries(availability)) && $ctrl.isPhysical($index)" ng-bind-html="&nbsp;"></span> <span ng-if="::($ctrl.showDisplayOtherLocations() || $ctrl.showDisplayLocation()) && $ctrl.isPhysical($index) && !$ctrl.showOtherLibraries(availability)" translate="delivery.and.other.locations"></span> <span ng-if="(::$ctrl.showOtherLibraries(availability))" translate="delivery.code.ngrs.other_libraries"></span></span></div></div><div ng-if="::($ctrl.isCollectionDiscoveryCollection && !$ctrl.isEmailMode())" layout="row" layout-align="start start"><prm-icon availability-type icon-type="{{::$ctrl.availabilityLineIcons.physicalMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.physicalMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.physicalMaterial.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon><md-button prm-brief-internal-button-marker ng-click="$ctrl.runCollectionDiscoveryBeacon()" class="neutralized-button arrow-link-button" translate translate-attr-title="{{\'delivery.code.collection\'}}" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.collectionStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><span class="button-content"><span translate="delivery.code.collection" translate-compile></span><prm-icon ng-if="::$ctrl.isDirectLink($index)" external-link icon-type="{{::$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.externalLink.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon></span><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}" [display-mode]="::$ctrl.displayMode"></prm-icon></md-button></div><prm-search-result-availability-line-after parent-ctrl="$ctrl"></prm-search-result-availability-line-after>');
$templateCache.put('components/search/searchResult/searchResultJournalIndication/searchResultJournalIndicationLine.html','<div ng-if="::($ctrl.isPeerreviewed() || $ctrl.isOpenaccess() || $ctrl.isCourseDocument())" class="badges" layout="row" layout-align="start start"><div ng-if="::$ctrl.isPeerreviewed()" layout="row" class="badge-item prm-peer-reviewed"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.journalsearch.peer_reviewed.tooltip"></span></md-tooltip><prm-icon class="badge-icon" icon-type="{{::$ctrl.journalLineIcons.peerreviewed}}" svg-icon-set="{{::$ctrl.journalLineIcons.peerreviewed.iconSet}}" icon-definition="{{::$ctrl.journalLineIcons.peerreviewed.icon}}"></prm-icon><span class="badge-label" translate="nui.results.journalsearch.peer_reviewed"></span></div><div ng-if="::$ctrl.isOpenaccess()" layout="row" class="badge-item prm-open-access"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.journalsearch.open_access.tooltip"></span></md-tooltip><prm-icon class="badge-icon" icon-type="{{::$ctrl.journalLineIcons.openaccess}}" svg-icon-set="{{::$ctrl.journalLineIcons.openaccess.iconSet}}" icon-definition="{{::$ctrl.journalLineIcons.openaccess.icon}}"></prm-icon><span class="badge-label" translate="nui.results.journalsearch.open_access"></span></div><div ng-if="::$ctrl.isCourseDocument()" layout="row" class="badge-item prm-course"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.journalsearch.course.tooltip"></span></md-tooltip><prm-icon class="badge-icon" icon-type="{{::$ctrl.journalLineIcons.course}}" svg-icon-set="{{::$ctrl.journalLineIcons.course.iconSet}}" icon-definition="{{::$ctrl.journalLineIcons.course.icon}}"></prm-icon><span class="badge-label" translate="nui.results.journalsearch.course"></span></div></div><prm-search-result-journal-indication-line-after parent-ctrl="$ctrl"></prm-search-result-journal-indication-line-after>');
$templateCache.put('components/search/searchResult/searchResultFrbr/searchResultFrbrLine.html','<span ng-if="::($ctrl.isPc())"><md-divider></md-divider><span translate="nui.pcgroup.display"></span>. <a href="javascript:void(0)" (click)="$ctrl.getFrbrRecords(); $event.stopPropagation();" translate-attr="{\'aria-label\':\'nui.frbLine.seeAll\' }"><span translate="nui.pcgroup.link"></span></a></span><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button" ng-if="::(!$ctrl.isPc())" (click)="$ctrl.getFrbrRecords(); $event.stopPropagation(); $event.preventDefault();"><span class="button-content"><prm-icon icon-type="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.type}}" svg-icon-set="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.iconSet}}" icon-definition="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.icon}}"></prm-icon><span class="prm-notice"><span translate="nui.frbrversion.found" translate-values="$ctrl.getPlaceHolders($ctrl.result)"></span>. </span><span translate="nui.frbrversion.found.link"></span></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button><prm-search-result-frbr-line-after parent-ctrl="$ctrl"></prm-search-result-frbr-line-after>');
$templateCache.put('components/search/searchResult/searchResultSortBy/searchResultSortBy.html','<md-input-container class="zero-margin"><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.onSortChange()" class="form-control" translate-attr="{\'aria-label\': \'nui.aria.results.sortBy\'}"><md-option ng-repeat="option in ::$ctrl.options track by option.value" value="{{::option.value}}"><span role="button" translate="results.sortby.option.{{::option.text}}" alt="{{\'nui.aria.results.sortBy\' | translate}}"></span></md-option></md-select></md-input-container><prm-search-result-sort-by-after parent-ctrl="$ctrl"></prm-search-result-sort-by-after>');
$templateCache.put('components/search/searchResult/searchResultList/noSearchResult.html','<md-card class="default-card zero-margin"><md-card-title><md-card-title-text><h2 translate class="md-headline">nui.noresults.title</h2></md-card-title-text></md-card-title><md-card-content><p><span ng-bind-html="$ctrl.description"></span></p><p><span translate class="bold-text">nui.noresults.suggestions</span></p><ul><li ng-repeat="suggestionDescription in $ctrl.getErrorSuggestionsDescriptionList()"><span ng-bind-html="suggestionDescription"></span></li></ul></md-card-content></md-card><prm-no-search-result-after parent-ctrl="$ctrl"></prm-no-search-result-after>');
$templateCache.put('components/search/searchResult/searchResultList/search-result-list.html','<span ng-if="$ctrl.explainMessage"><prm-search-explain [explain]="$ctrl.explainMessage"></prm-search-explain></span><div ng-show="$ctrl.resultsExists || $ctrl.isFavorites" class="list-items-list pages-separated-with-gaps relative-position" ng-class="{\'single-page\': ($ctrl.searchInfo.total <= 10) }" layout="column" id="mainResults" tabindex="0" role="main"><h2 class="accessible-only" ng-if="$ctrl.resultsExists && !$ctrl.isFavorites"><span translate="results.title"></span></h2><h2 class="accessible-only" ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && $ctrl.favoritesService.getAllItems()"><span translate="nui.favorites.items" translate-values="$ctrl.getPlaceHolders()"></span></h2><div class="margin-bottom-medium" ng-if="$ctrl.didUMean && !$ctrl.isFavorites && !$ctrl.controlledVocabulary && !$ctrl.isCitationState() && !$ctrl.isChaptersAndReviewsState()"><md-card class="default-card padded-container-medium zero-margin"><prm-did-u-mean [did-u-mean]="$ctrl.didUMean"></prm-did-u-mean></md-card></div><div class="margin-bottom-medium" ng-if="!$ctrl.isFavorites && $ctrl.controlledVocabulary && !$ctrl.isCitationState() && !$ctrl.isChaptersAndReviewsState()" ng-hide="$ctrl.searchInProgress"><md-card class="default-card padded-container-medium zero-margin"><prm-controlled-vocabulary [equivalent-term]="$ctrl.controlledVocabulary.errorMessages[1]" [query]="$ctrl.query"></prm-controlled-vocabulary></md-card></div><div class="margin-bottom-medium" ng-if="$ctrl.errorCode && !$ctrl.isFavorites" id="errorCodeMsg"><prm-search-error-message [error-Code]="$ctrl.errorCode" [error-Message]="$ctrl.errorMessage"></prm-search-error-message></div><div ng-if="$ctrl.searchInfo.total == 0 && !$ctrl.isFavorites && !$ctrl.errorCode && !$ctrl.explainMessage" class="margin-bottom-medium"><prm-no-search-result [term]="$ctrl.searchString"></prm-no-search-result></div><prm-search-result-tool-bar [current-page-num]="$ctrl.pageInView" [total-results]="$ctrl.searchInfo.total" [max-results]="$ctrl.searchInfo.maxTotal" [total-result-version]="$ctrl.totalResultVersion" [show-partial-results-warning]="$ctrl.showPartialResultsWarning()" [toggle-in-mobile]="$ctrl.isSearchState() && $ctrl.detectMobile() && $ctrl.toggleMode" (on-click-disable-tool-bar)="$ctrl.disableToolBar($event)" ng-if="$ctrl.resultsExists && (($ctrl.isSearchState() && !$ctrl.detectMobile()) || ($ctrl.isSearchState() && $ctrl.detectMobile() && $ctrl.toggleMode))" ng-hide="$ctrl.searchInfo.total == 0" ng-class="{\'search-result-tool-bar-mobile\': $ctrl.isToolBareEnable() && $ctrl.detectMobile()}" ng-style="($ctrl.controlledVocabulary || $ctrl.didUMean) && {\'top\':\'60px\'} || ($ctrl.errorCode) && {\'top\': $ctrl.getDynamicTop()}"></prm-search-result-tool-bar><div ng-if="$ctrl.resultsExists && !$ctrl.isFavorites && (!$ctrl.isSearchState() || $ctrl.detectMobile())" ng-hide="$ctrl.searchInfo.total == 0" class="results-title" layout="column" ng-style="(!$ctrl.isSearchState() && $ctrl.mediaQueries.gtsm) && {\'top\':\'-16px\'}"><span class="results-count" ng-if="$ctrl.totalResultVersion ==0 && $ctrl.isCategoriesSearch()" role="alert" aria-live="assertive">{{$ctrl.searchInfo.total | number}} <span ng-if="$ctrl.searchInfo.maxTotal > 0">(</span><span ng-if="$ctrl.searchInfo.maxTotal > 0" translate="brief.results.outof"></span> <span ng-if="$ctrl.searchInfo.maxTotal > 0">{{$ctrl.searchInfo.maxTotal | number}})</span> <span translate="{{$ctrl.categoryResultCode}}"></span> <span class="bold-text">{{$ctrl.categoryDisplayValue}}</span> </span><span id="partialResultsWarning" ng-if="$ctrl.showPartialResultsWarning()" role="alert" aria-live="assertive" style="padding: 0px 5px"><span class="text-italic" translate="nui.search.partial.results.part1"></span> <span class="bold-text" translate="nui.search.partial.results.part2"></span> <span class="text-italic" translate="nui.search.partial.results.part3"></span> </span><span ng-if="$ctrl.totalResultVersion>0" translate="nui.results.linkedpnx.frbr" translate-values="{\'idx_0\' : $ctrl.searchInfo.total, \'idx_1\' : $ctrl.totalResultVersion}"></span><div ng-class="{\'mobile-actions\': !$ctrl.mediaQueries.gtsm}" layout="row" layout-align="end center" flex><md-button ng-click="$ctrl.showMobileFacets = !$ctrl.showMobileFacets" class="zero-margin padding-zero facet-filter button-as-link-mobile link-alt-color" id="sidebar-trigger" aria-label="{{::(\'nui.facets.title\' | translate)}}" ng-if="(($ctrl.hasSearchResults() || $ctrl.showPcAvailabilityForScope(scope)) &&\r\n             (!$ctrl.isJournalSearch() || ($ctrl.isJournalSearch() && !$ctrl.isSearchFromLettersJS())) &&\r\n             (!($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) ||\r\n             (($ctrl.isDBSearch() || ($ctrl.isJournalSearch() && $ctrl.isPrimoVE && $ctrl.isJournalCategories)) && !$ctrl.isSearchFromLetters() && !$ctrl.isSearchFromCategoryTree())) && $ctrl.totalResults > 1 && $ctrl.showFacetSection() && !$ctrl.isChaptersAndReviewsState())" hide-gt-sm><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="facets-filter"></prm-icon></md-button><prm-add-query-to-saved-searches ng-if="$ctrl.isSignedIn() && !$ctrl.isCitationState()  && !$ctrl.isAtozSearch  && !$ctrl.isNewspapersSearch && !$ctrl.isBrowsHeaderResults() && !$ctrl.isChaptersAndReviewsState()"></prm-add-query-to-saved-searches><prm-personalize-results-button ng-if="!$ctrl.isCitationState() && !$ctrl.isAtozSearch && !$ctrl.isNewspapersSearch && !$ctrl.isChaptersAndReviewsState() && !$ctrl.isBrowsHeaderResults() && $ctrl.notLocal()"></prm-personalize-results-button><md-button ng-if="!$ctrl.toggleMode && $ctrl.isSearchState() && $ctrl.detectMobile()" class="button-link padding-zero facet-filter button-as-link-mobile link-alt-color" ng-click="$event.stopPropagation(); $event.preventDefault(); $ctrl.enableToolBar();"><prm-icon icon-type="svg" ng-show="!$ctrl.toggleMode" svg-icon-set="primo-ui" icon-definition="multiple-selection"></prm-icon></md-button></div><span class="results-count" layout-align="center start" ng-if="$ctrl.totalResultVersion ==0 && !$ctrl.isCategoriesSearch()" role="alert" aria-live="assertive">{{$ctrl.searchInfo.total | number}} <span ng-if="$ctrl.searchInfo.maxTotal > 0">(</span><span ng-if="$ctrl.searchInfo.maxTotal > 0" translate="brief.results.outof"></span> <span ng-if="$ctrl.searchInfo.maxTotal > 0">{{$ctrl.searchInfo.maxTotal | number}})</span> <span translate="results.title"></span></span></div><div ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && $ctrl.favoritesService.getAllItems()" class="results-title results-title-favorites" layout="row"><span ng-if="$ctrl.isFetchingAllItems()" translate="nui.favorites.fetchingItems" translate-values="$ctrl.getPlaceHolders()"></span><prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.isFetchingAllItems()"></prm-spinner><md-checkbox aria-label="{{\'nui.favorites.SelectAll\' | translate}} {{(\'nui.favorites.items\' | translate:$ctrl.getPlaceHolders())}}" ng-if="!$ctrl.isFetchingAllItems()" ng-click="$ctrl.selectOrUnselectAll()" ng-checked="$ctrl.allIn" md-indeterminate="$ctrl.indeterminateState"><span class="results-count" hide-sm hide-md><span translate="nui.favorites.items" translate-values="$ctrl.getPlaceHolders()"></span></span></md-checkbox></div><div ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && !$ctrl.favoritesService.getAllItems()" class="results-title results-title-favorites" layout="row"><md-checkbox aria-label="Select all items" ng-model="$ctrl.briefResultService.selectAll" ng-change="$ctrl.selectAll()"><span class="results-count" hide-sm hide-md><span translate="nui.favorites.items" translate-values="$ctrl.getPlaceHoldersForFilter()"></span></span></md-checkbox></div><div ng-if="::(!$ctrl.isFavorites)"><div class="results-container zero-padding" layout="column" ng-disabled="search$ctrl.searchInProgress" ng-class="{\'search-results-container\':$ctrl.isSearchState() && !$ctrl.detectMobile()}"><div class="list-item-wrapper" ng-class="{\'menu-open\':$ctrl.isExpanded($index), \'item-expanded\':$ctrl.isExpanded($index), \'last-item\': $last, \'first-in-page\':$ctrl.firstInPage($index)}" data-page="Page {{::$ctrl.calcPage($index)}}" ng-repeat-start="item in $ctrl.itemlist"><md-subheader in-view="$ctrl.onTopOfPageInView($ctrl.calcPage($index), $inview, $inviewInfo)" in-view-options="{generateDirection: true, throttle: 50}" id="searchResultPage{{::$ctrl.calcPage($index)}}" ng-if="::$ctrl.firstInPage($index) && !($ctrl.searchInfo.total <= $ctrl.PAGE_SIZE)"><span class="text tiny-uppercase-text">{{::\'nui.paging.pagenumber\' | translate}} {{::$ctrl.calcPage($index)}}</span> <span class="sep"></span></md-subheader><prm-brief-result-container class="list-item" (load-next-results-event)="$ctrl.nextResults()" ng-class="{\'item-bookmarked\' : $ctrl.showPin(item)}" [item]="item" [links]="item.delivery.link" [index]="::$ctrl.getItemIndex($index)" [isfavorites]="::$ctrl.isFavorites" [is-expanded]="$ctrl.isExpanded($index)" [item-height]="$ctrl.expandedItemHeight" (expand-item-event)="$ctrl.setExpandedItem($event, $index)"></prm-brief-result-container></div><prm-featured-results ng-repeat-end ng-if="$ctrl.showFeaturedResults($index) && $ctrl.showTimer" [featured-results]="$ctrl.featuredResult" ng-if="$ctrl.featuredResult"></prm-featured-results><div ng-if="$ctrl.displayNewspapersLink() && !$ctrl.isCitationState() && !$ctrl.isChaptersAndReviewsState()" class="padding-large"><prm-newspapers-spotlight></prm-newspapers-spotlight></div><div layout="row" layout-align="center center" ng-if="$ctrl.isShowMoreResultButton() && $ctrl.searchInfo.total != 0" ng-hide="$ctrl.searchInProgress" class="padding-top-large"><md-button ng-if="$ctrl.hasNextResults()" (click)="$ctrl.nextResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div><prm-spinner ng-if="$ctrl.resultsExists && $ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></div><prm-page-nav-menu ng-if="$ctrl.shouldDisplayPagingWidget() && $ctrl.resultsExists && !$ctrl.searchInProgress" (load-next-results-event)="$ctrl.nextResults()" [current-page]="$ctrl.pageInView" [num-of-results]="$ctrl.searchInfo.total" [num-of-loaded-pages]="$ctrl.numOfLoadedPages" [show-components]="$ctrl.pagingConfigutation" [facet-to-left]="$ctrl.facetToLeft"></prm-page-nav-menu></div><md-list class="results-container" ng-if="::($ctrl.isFavorites && !$ctrl.isSavedQuery)" layout="column"><md-list-item class="list-item-wrapper" ng-repeat="item in $ctrl.itemlist" ng-class="{\'menu-open\':$ctrl.isExpanded($index), \'item-expanded\':$ctrl.isExpanded($index), \'last-item\': $last}"><prm-brief-result-container class="list-item" [item]="::item" [links]="item.delivery.link" [index]="($index + 1)" [isfavorites]="::$ctrl.isFavorites" [is-expanded]="$ctrl.isExpanded($index)" [item-height]="$ctrl.expandedItemHeight" (expand-item-event)="$ctrl.setExpandedItem($event, $index)"></prm-brief-result-container></md-list-item><div layout="row" layout-align="center center" ng-if="$ctrl.itemlist && $ctrl.itemlist.length > 0" class="padding-top-large"><md-button ng-if="$ctrl.favoritesService.hasNextResults()" (click)="$ctrl.favoritesService.nextResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div><prm-spinner ng-if="$ctrl.resultsExists && $ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></md-list><prm-saved-queries-list ng-if="$ctrl.isSavedQuery" [(itemlist)]="$ctrl.itemlist" [(is-search-history)]="$ctrl.isSearchHistory"></prm-saved-queries-list><div class="list-spacer-small" ng-class="{\'list-spacer\': $ctrl.listBottomSpacer}"></div></div><prm-search-result-list-after parent-ctrl="$ctrl"></prm-search-result-list-after>');
$templateCache.put('components/search/searchResult/searchResultThumbnail/search-result-thumbnail-container.html','<div><img class="fallback-img fallback-static" style="display: none" ng-if="::$ctrl.getSelectedThumbnailLink()" ng-src="{{::$ctrl.defaultThumbnailLink.linkURL}}" alt="" onload="this.style.display=\'\'"/> <img class="fallback-img" style="display: none" ng-if="::!$ctrl.isMultipleVersions() && !$ctrl.selectedThumbnailLink.linkURL && !!$ctrl.defaultThumbnailLink.linkURL && !$ctrl.isVirtualBrowse" ng-src="{{::$ctrl.defaultThumbnailLink.linkURL}}" alt="" onload="this.style.display=\'\'"/> <img class="main-img fan-img-1" style="display: none" ng-class="::{\'fan-img\' : $ctrl.isMultipleVersions() && !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL}" ng-if="::$ctrl.selectedThumbnailLink.linkURL" ng-src="{{::$ctrl.selectedThumbnailLink.linkURL}}" alt="" onload="this.style.display=\'\'"/> <img class="fan-img fan-img-2" style="display: none" aria-hidden="true" ng-if="::$ctrl.isMultipleVersions() &&  !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL" ng-src="{{::$ctrl.selectedThumbnailLink.linkURL}}" alt="" onload="this.style.display=\'\'"/> <img class="fan-img fan-img-3" style="display: none" aria-hidden="true" ng-if="::$ctrl.isMultipleVersions() && !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL" ng-src="{{::$ctrl.selectedThumbnailLink.linkURL}}" alt="" onload="this.style.display=\'\'"/></div><div ng-if="::$ctrl.links" ng-init="$ctrl.go()"></div><prm-search-result-thumbnail-container-after parent-ctrl="$ctrl"></prm-search-result-thumbnail-container-after>');
$templateCache.put('components/search/searchResult/searchResultToolBar/search-result-tool-bar.html','<div sticky sticky-class="is-stuck"><md-toolbar class="md-toolbar-tools results-title" ng-class="{\'is-visible\': !$ctrl.mediaQueries.gtxs && ($ctrl.showButtons()) }" layout="row" layout-align="start center"><div class="main-checkbox animate-enter-leave-scale-bounce staggered underlined-input"><prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.isFetchingAllItems()"></prm-spinner><md-checkbox aria-label="{{$ctrl.getSelectAriaLabel()}}" ng-if="!$ctrl.isFetchingAllItems()" ng-click="$ctrl.selectOrUnselectAll(); $ctrl.focusOnSelectTopMax()" ng-checked="$ctrl.allIn" md-indeterminate="$ctrl.indeterminateState"></md-checkbox><span class="results-count"><span translate="nui.brief.bulk.selected" translate-values="$ctrl.getPlaceHolders($ctrl.selectedItems().length)"></span></span></div><div class="search-toolbar-title" layout="row" ng-hide="$ctrl.toggleInMobileStatus"><span class="text tiny-uppercase-text" ng-hide="::$ctrl.totalResultsNum <= $ctrl.PAGE_SIZE">{{\'nui.paging.pagenumber\' | translate}} {{$ctrl.currPageNum}}</span> <span class="results-count" role="alert" ng-if="::$ctrl.totalResultVersion ==0" aria-live="assertive">{{::$ctrl.totalResultsNum | number}} <span ng-if="::$ctrl.maxResults > 0">(</span><span ng-if="::$ctrl.maxResults > 0" translate="brief.results.outof"></span> <span ng-if="::$ctrl.maxResults > 0">{{::$ctrl.maxResults | number}})</span> <span translate="results.title"></span> </span><span id="partialResultsWarning" ng-if="::$ctrl.showPartialResultsWarning" role="alert" aria-live="assertive" style="padding: 0px 5px"><span class="text-italic" translate="nui.search.partial.results.part1"></span> <span class="bold-text" translate="nui.search.partial.results.part2"></span> <span class="text-italic" translate="nui.search.partial.results.part3"></span> </span><span ng-if="::$ctrl.totalResultVersion>0" translate="nui.results.linkedpnx.frbr" translate-values="{\'idx_0\' : $ctrl.totalResultsNum, \'idx_1\' : $ctrl.totalResultVersion}"></span></div><div class="search-toolbar-title" layout="row" hide-xs ng-if="::!$ctrl.mediaQueries.sm"><prm-add-query-to-saved-searches ng-if="::$ctrl.getUser"></prm-add-query-to-saved-searches><prm-personalize-results-button ng-if="::$ctrl.notLocal()"></prm-personalize-results-button></div><div layout="row" layout-align="end center" flex class="toolbar-actions"><div layout="row" id="slideTopMaxAlert" aria-live="{{$ctrl.getAriaLive()}}" layout-align="center center" class="floated-max-results-message" ng-style="$ctrl.needToShowSlide && (($ctrl.getDir() === \'left\') ? {\'left\' : \'0\'} : {\'right\' : \'0\'})"><span translate="nui.brief.bulk.numberOfSelectedRecords" translate-values="$ctrl.getPlaceHolders($ctrl.selectedItems().length)"></span><md-button id="chooseTopMax" tabindex="{{$ctrl.getTabIndex()}}" class="button-link" aria-label="{{::(\'nui.aria.bulk.chooseTop\' | translate:\'{max: \\\'\'+ $ctrl.numOfTopMax +\'\\\'}\')}}" aria-label="{{\'nui.aria.bulk.chooseTop\' | translate}}" ng-class="{\'disabledSlideButtonTool\': $ctrl.searchInProgress}" ng-click="$ctrl.loadAndSelectTopMax(); $ctrl.onTopMaxSlideClose()" translate="nui.brief.bulk.chooseTopMaxResults" translate-values="$ctrl.getPlaceHolders($ctrl.numOfTopMax)"></md-button><md-divider class="md-primoExplore-theme"></md-divider><md-button class="dismiss-link" tabindex="{{$ctrl.getTabIndex()}}" ng-class="{\'disabledSlideButtonTool\': $ctrl.searchInProgress}" ng-click="$ctrl.onTopMaxSlideClose(); $ctrl.updateNoNeedToInsertSlideAfterDismiss();" translate-attr="{\'aria-label\': \'nui.message.dismiss\'}"><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss"></span></md-button></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="!$ctrl.getUser"><md-button class="md-icon-button pin-button" aria-label="{{$ctrl.isChosenFav() | translate}}" ng-click="$ctrl.pinToFavorites($event)"><md-tooltip md-delay="400"><span translate="nui.favorites.pin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\': !$ctrl.showButtons() || $ctrl.searchInProgress}" icon-type="{{::$ctrl.favoritesIcons.pin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.pin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.pin.icon}}"></prm-icon></md-button></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.getUser"><prm-search-result-add-to-favorites-menu [disable]="!$ctrl.showButtons()" [is-section]="true" (on-add-to-favorites-event)="$ctrl.pinToFavorites($event)"></prm-search-result-add-to-favorites-menu></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button has-bottom-arrow" ng-class="$ctrl.showPushtoActions ? \'arrow-showing\' : \'\' " aria-label="{{$ctrl.isChosenActions() | translate}}" ng-click="$ctrl.switchShowPushtoActions($event);$ctrl.closeOpenTabs($event);$event.stopPropagation();"><md-tooltip md-delay="400"><span translate="eshelf.send_to.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.favoritesIcons.favoriteActionsList.type}}" ng-class="{\'disableActionTool\': !$ctrl.showButtons() || $ctrl.searchInProgress}" svg-icon-set="{{::$ctrl.favoritesIcons.favoriteActionsList.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.favoriteActionsList.icon}}"></prm-icon></md-button></div></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.toggleInMobileStatus"><md-button class="zero-margin button-link padding-zero facet-filter button-as-link-mobile link-alt-color" ng-click="$event.stopPropagation(); $event.preventDefault(); $ctrl.disableToolBar();"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div></md-toolbar><div class="search-action-list" ng-if="$ctrl.showPushtoActions && $ctrl.showButtons()"><div class="action-list-content" ng-keydown="$ctrl.keyDownSupport($event)"><md-content layout="row"><prm-action-list [display-all]="false" [item]="$ctrl.selectedItems()" [display-close-icon]="true" flex style="margin: 8px" (close-modal)="$ctrl.switchShowPushtoActions()"></prm-action-list></md-content></div></div></div><div layout="row" flex="noshrink" class="dialog-warning" sticky offset="64" sticky-class="is-stuck" ng-if="$ctrl.needToshowErrorAlert"><prm-alert-bar style="position: fixed; bottom: 0px;width: 53.5%;" flex [alert-object]="$ctrl.topMaxAlert" role="alert" aria-live="assertive"></prm-alert-bar></div><prm-search-result-tool-bar-after parent-ctrl="$ctrl"></prm-search-result-tool-bar-after>');
$templateCache.put('components/search/searchResult/searchResultsChaptersAndReviews/chapters-results-line.html','<div layout="column"><div ng-if="::$ctrl.getBookChapters()"><prm-icon icon-type="svg" chapters-type svg-icon-set="primo-ui" icon-definition="chapters"></prm-icon><md-button href="" ng-click="$ctrl.onClick($event, \'chapters\')" class="neutralized-button arrow-link-button" ui-state="$ctrl.CHAPTERS_STATE" ui-state-params="$ctrl.chaptersStateParams(\'chapters\')" ui-sref-opts="{reload: true, inherit:true}"><span class="button-content"><span>{{::$ctrl.getChaptersLabel()}}</span></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button></div><div ng-if="::$ctrl.isBookRecordType() && $ctrl.getBookReviews()"><prm-icon icon-type="svg" chapters-type svg-icon-set="primo-ui" icon-definition="chapters"></prm-icon><md-button href="" class="neutralized-button arrow-link-button" ui-state="$ctrl.CHAPTERS_STATE" ui-state-params="$ctrl.chaptersStateParams(\'reviews\')" ui-sref-opts="{reload: true, inherit:true}" ng-click="$ctrl.onClick($event, \'reviews\')"><span class="button-content"><span translate="{{\'nui.results.relatedItems.book2review.link\' | translate:\'{counter: \\\'\'+$ctrl.getNumberOfReviews()+\'\\\'}\'}}"></span></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button></div></div><prm-chapters-results-line-after parent-ctrl="$ctrl"></prm-chapters-results-line-after>');
$templateCache.put('components/search/searchResult/searchResultsChaptersAndReviews/reviews-results-line.html','<prm-reviews-results-line-after parent-ctrl="$ctrl"></prm-reviews-results-line-after>');
$templateCache.put('components/search/topbar/bookmarkFilter/search-bookmark-filter.html','<md-button ng-if="!$ctrl.isFavorites && $ctrl.showSearchHistoryTab()" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.gohistory.tooltip\' | translate}}" ng-click="$ctrl.goToSearchHistory()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.searchHistoryParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.gohistory.tooltip"></span></md-tooltip><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="restore"></prm-icon></md-button><div id="fixed-buttons-holder" ng-class="{\'fixed-to-top\': $ctrl.fixedToTop(), \'mobile-bookmarkFilter-pos\': (($ctrl.isToolBareEnable() && ($ctrl.mediaQueries.xs || $ctrl.mediaQueries.sm)) ||  ($ctrl.facetToLeft && $ctrl.mediaQueries.md))}" ng-style="($ctrl.mediaQueries.xs && {\'right\': \'0\'})" layout="row" layout-align="center center"><md-button ng-if="$ctrl.isFavorites" id="search-button" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.goSearch.tooltip\' | translate}}" ng-click="$ctrl.goToSearch()" ui-state="$ctrl.uiState" ui-state-params="$ctrl.searchStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.goSearch.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass" layout="row"></prm-icon></md-button><md-button ng-if="!$ctrl.isFavorites" id="favorites-button" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.goFavorites.tooltip\' | translate}}" ng-click="$ctrl.goToFavorties()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.favoritesStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.goFavorites.tooltip"></span></md-tooltip><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon></md-button><div ng-if="$ctrl.fixedToTop()" class="ng-scope"><md-button id="back-to-top-button" class="zero-margin md-icon-button md-button md-ink-ripple" type="button" aria-label="{{\'nui.results.backToTop.tooltip\' | translate}}" ng-click="$ctrl.backToTop()"><md-tooltip md-delay="400"><span translate="nui.results.backToTop.tooltip"></span></md-tooltip><prm-icon icon-type="{{$ctrl.backToTopIcon.backToTop.type}}" svg-icon-set="{{$ctrl.backToTopIcon.backToTop.iconSet}}" icon-definition="{{$ctrl.backToTopIcon.backToTop.icon}}"></prm-icon><div class="md-ripple-container"></div></md-button></div></div><prm-search-bookmark-filter-after parent-ctrl="$ctrl"></prm-search-bookmark-filter-after>');
$templateCache.put('components/search/topbar/logo/logo.html','<div class="product-logo" id="banner" aria-label="{{\'nui.aria.logo.link.open\' | translate}}" ng-if="!$ctrl.disableLogo"><a ng-href="{{::$ctrl.logoURL}}" aria-label="{{\'nui.aria.logo.link.open\' | translate}}"><a ng-if="::!$ctrl.needSref" ng-href="{{::$ctrl.logoURL}}" ng-click="$ctrl.logoClick()"><img class="logo-image" ng-if="::!$ctrl.isEmailMode()" id="logoImage" data-logo="email-template" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/> <img class="logo-image" ng-if="::$ctrl.isEmailMode()" height="35" id="logoImage" data-logo="email-template" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/></a><md-button ng-if="::$ctrl.needSref" ui-state="\'exploreMain.search\'" ui-state-params="{vid: \'{{$ctrl.vid}}\'}" ui-state-opts="{reload: true, inherit: false}" href="" ng-click="$ctrl.logoClick()"><img class="logo-image" ng-if="::!$ctrl.isEmailMode()" id="logoImage" data-logo="email-template" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/> <img ng-if="::$ctrl.isEmailMode()" class="logo-image" id="logoImage" height="35" data-logo="email-template" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/></md-button></a></div><div class="product-logo" id="banner" aria-label="{{\'nui.aria.logo.link.open\' | translate}}" ng-if="$ctrl.disableLogo" style="cursor:auto"><img class="logo-image" ng-if="::!$ctrl.isEmailMode()" id="logoImage" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/> <img class="logo-image" ng-if="::$ctrl.isEmailMode()" height="35" id="logoImage" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{::$ctrl.iconLink}}"/></div><prm-logo-after parent-ctrl="$ctrl"></prm-logo-after>');
$templateCache.put('components/search/topbar/skipTo/skip-to.html','<md-button href="" tabindex="0" ng-repeat="link in $ctrl.skipLinks track by link" (click)="$ctrl.scrollToElementId(link)" aria-label="{{\'nui.aria.skip.\'+$ctrl.getLabelValue(link) | translate}}"><span translate>{{::(\'nui.aria.skip.\'+$ctrl.getLabelValue(link))}}</span></md-button><prm-skip-to-after parent-ctrl="$ctrl"></prm-skip-to-after>');
$templateCache.put('components/search/topbar/mainMenu/find-db-dialog-template.html','<md-dialog aria-label="List dialog" style="width: 100%"><md-dialog-content><iframe flex style="border-width:0px;width:100%;min-height:470px" src="{{ctrl.getUrl()}}"></iframe></md-dialog-content><md-dialog-actions layout="row"><span flex></span><md-button ng-click="ctrl.closeDialog()" class=""><span translate="nui.finddb.closeTooltip"></span></md-button><span ng-if="ctrl.displayFDBNothingSelectedErr" translate="finddb.nodatabases" class="prm-warn"></span><md-button ng-click="ctrl.goToSearch()" class="button-confirm"><span translate="nui.finddb.go.to.search"></span></md-button></md-dialog-actions></md-dialog>');
$templateCache.put('components/search/topbar/mainMenu/main-menu-full.html','<div ng-class="::{\'mobile-main-menu-bg\' : $ctrl.mediaQueries.xs && $ctrl.isSignedIn()}"><md-content class="overlay-menu-content layout-full-height" layout="column" layout-align-gt-sm="start center" layout-align="start start"><div role="document"><div layout="column" layout-align="center start"><md-button md-autofocus id="mainMenuFullCloseButton" ng-click="$ctrl.closeLinksMenu()" class="md-icon-button close-button zero-margin" aria-label="{{\'default.nui.aria.links.close\' | translate}}" tabindex="0"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button><div class="prm-user-menu-content" ng-if="$ctrl.isSignedIn()"><div class="user-menu-header" layout="row"><div layout="column" flex=""><span class="tiny-uppercase-text" translate="eshelf.menu.signedInAs"></span> <span class="ng-binding" style="font-size: small">{{$ctrl.userName()}}</span></div></div></div><div layout-gt-xs="row" class="settings-container align-self-stretch" layout-align="center start"><div layout="row" layout-xs="column" class="padded-container-medium" layout-align="center center" layout-align-xs="start start"><prm-library-card-menu (action-event)="$ctrl.closeLinksMenu()" ng-if="!$ctrl.isDepositDisplay"></prm-library-card-menu><md-divider class="vertical-divider" ng-if="$ctrl.displayLanguage" tabindex="-1" hide-xs></md-divider><div class="overlay-menu-item" ng-if="$ctrl.displayLanguage" tabindex="-1" layout="row" layout-align="center center"><prm-icon icon-type="svg" tabindex="-1" svg-icon-set="primo-ui" icon-definition="earth"></prm-icon><prm-change-lang tabindex="-1" (change-lang-event)="$ctrl.closeLinksMenu()"></prm-change-lang></div><div tabindex="-1" layout="row" layout-align="center center" hide-gt-xs><md-button class="button-with-icon zero-margin" ng-if="!$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon><span translate="label.advanced_search"></span></md-button></div><md-divider class="vertical-divider" tabindex="-1" hide-xs></md-divider><prm-authentication [is-logged-in]="$ctrl.isLoggedIn" layout="column" layout-align="start start"></prm-authentication></div></div><md-divider style="width: 80%;" ng-if="!$ctrl.isDepositDisplay" tabindex="-1"></md-divider><div class="custom-links-container" layout="row" layout-wrap layout-align="center start" layout-align-sm="start start" ng-if="!$ctrl.isDepositDisplay"><div ng-repeat="link in $ctrl.viewUrlsList" class="main-menu-button"><md-button ng-if="link[\'href\']" href="{{link[\'href\']}}" target="{{::$ctrl.getTargetAttribute(link)}}" class="transparent-card" layout="column" layout-align="center center" ng-click="$ctrl.closeLinksMenuAfterNavigation();$ctrl.performAction(link);" ng-hide="$ctrl.dispalyResourceSharing(link.url) || $ctrl.hideLegantoMenuLink(link.url,link.label)" aria-label="{{$ctrl.getMenuLabel(link) | translate}}{{$ctrl.newWindowIndication(link)}}"><span class="md-headline" translate="{{::$ctrl.getMenuLabel(link)}}"></span> <span class="md-subhead" translate="{{::$ctrl.getMenuTooltip(link)}}"></span> <span class="accessible-only">{{$ctrl.newWindowIndication(link)}}</span></md-button><md-button ng-if="link[\'sref\']" href="" target="{{::$ctrl.getTargetAttribute(link)}}" ui-state="link[\'sref\'][\'state\']" ui-state-params="link[\'sref\'][\'params\']" ui-state-opts="link[\'sref\'][\'opts\']" class="transparent-card" layout="column" layout-align="center center" ng-click="$ctrl.closeLinksMenuAfterNavigation();$ctrl.performAction(link);" ng-hide="$ctrl.dispalyResourceSharing(link.url) || $ctrl.hideLegantoMenuLink(link.url,link.label)" aria-label="{{$ctrl.getMenuLabel(link) | translate}}{{$ctrl.newWindowIndication(link)}}"><span class="md-headline" translate="{{::$ctrl.getMenuLabel(link)}}"></span> <span class="md-subhead" translate="{{::$ctrl.getMenuTooltip(link)}}"></span> <span class="accessible-only">{{$ctrl.newWindowIndication(link)}}</span></md-button></div></div></div></div></md-content></div>');
$templateCache.put('components/search/topbar/mainMenu/main-menu.html','<div class="top-nav-bar-links buttons-group" id="mainMenu" tabindex="-1" layout="row" layout-align="center center" flex="100"><div data-main-menu-item="{{urlConfig.label}}" ng-repeat="urlConfig in $ctrl.viewUrlsList |limitTo:$ctrl.showCount()" style="height: 100%"><md-button ng-if="::urlConfig[\'href\']" href="{{::urlConfig[\'href\']}}" target="{{::$ctrl.getTargetAttribute(urlConfig)}}" class="zero-margin flex-button multi-line-button button-over-dark" layout="column" layout-align="center center" (click)="::$ctrl.performAction(urlConfig)" ng-disabled="::$ctrl.dispalyResourceSharing(urlConfig.url)" ng-hide="::$ctrl.hideLegantoMenuLink(urlConfig.url,urlConfig.label)" aria-label="{{$ctrl.getMenuLabel(urlConfig) | translate}}{{::$ctrl.newWindowIndication(urlConfig)}}"><span class="item-content" translate="{{::$ctrl.getMenuLabel(urlConfig)}}"></span><md-tooltip md-direction="down" md-delay="400" class="multi-row-tooltip slide-tooltip-anim"><span class="item-description popover animate-popover" translate="{{::$ctrl.getMenuTooltip(urlConfig)}}"></span></md-tooltip></md-button><md-button ng-if="::urlConfig[\'sref\']" href="" target="{{::$ctrl.getTargetAttribute(urlConfig)}}" ui-state="urlConfig[\'sref\'][\'state\']" ui-state-params="urlConfig[\'sref\'][\'params\']" ui-state-opts="urlConfig[\'sref\'][\'opts\']" class="zero-margin flex-button multi-line-button button-over-dark" layout="column" layout-align="center center" (click)="::$ctrl.performAction(urlConfig)" ng-disabled="::$ctrl.dispalyResourceSharing(urlConfig.url)" ng-hide="::$ctrl.hideLegantoMenuLink(urlConfig.url,urlConfig.label)" aria-label="{{$ctrl.getMenuLabel(urlConfig) | translate}}{{::$ctrl.newWindowIndication(urlConfig)}}"><span class="item-content" translate="{{::$ctrl.getMenuLabel(urlConfig)}}"></span><md-tooltip md-direction="down" md-delay="400" class="multi-row-tooltip slide-tooltip-anim"><span class="item-description popover animate-popover" translate="{{::$ctrl.getMenuTooltip(urlConfig)}}"></span></md-tooltip></md-button></div><md-button tabindex="0" role="listitem" class="zero-margin flex-button align-self-stretch" layout="column" layout-align="center center" ng-if="$ctrl.showMoreOptionsButton()" (click)="$ctrl.disableMobileMenu()" id="more-links-button" translate-attr-title="mainmenu.label.moreoptions"><span class="item-content" aria-label="More Options" translate-attr-title="mainmenu.label.moreoptions"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="dots-horizontal"></prm-icon></span><md-tooltip md-direction="down"><span class="item-description popover animate-popover" translate="nui.mainmenu.description.more"></span></md-tooltip></md-button><prm-top-nav-bar-links-after parent-ctrl="$ctrl"></prm-top-nav-bar-links-after></div><prm-main-menu-after parent-ctrl="$ctrl"></prm-main-menu-after>');
$templateCache.put('components/search/topbar/userArea/authentication.html','<md-button ng-if="!$ctrl.isLoggedInIDP()" ng-click="$ctrl.handleLogin();" aria-label="{{\'eshelf.signin.title\' | translate}}" class="button-with-icon zero-margin"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="sign-in"></prm-icon><span translate="eshelf.signin.title"></span></md-button><md-button ng-if="$ctrl.isLoggedInIDP()" ng-click="$ctrl.handleLogout(authenticationMethod);" aria-label="{{\'eshelf.signout.title.link\' | translate}}" class="button-with-icon zero-margin"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="sign-out"></prm-icon><span ng-if="!$ctrl.idpLogout" translate="eshelf.signout.title.link"></span> <span ng-if="$ctrl.idpLogout" translate="nui.bor_info_failed.signout"></span></md-button><prm-authentication-after parent-ctrl="$ctrl"></prm-authentication-after>');
$templateCache.put('components/search/topbar/userArea/user-area-expandable.html','<md-button id="signInBtn" class="user-button sign-in-btn-ctm" ng-click="$ctrl.handleLogin()" ng-if="!$ctrl.isSignedIn()" translate-attr="{\'aria-label\': \'nui.aria.signin\'}"><span ng-if="!$ctrl.isSignedIn()" translate="eshelf.signin.title"></span> <span ng-if=""><prm-spinner class="inline-loader" ng-if="$ctrl.showSpinner()"></prm-spinner></span></md-button><md-menu md-position-mode="{{$ctrl.isRTL() ? \'target-left\' : \'target-right\'}} target" md-offset="0 60" ng-if="!$ctrl.isSignedIn()"><md-button class="button-with-menu-arrow" translate-attr="{\'aria-label\': \'eshelf.signin.menu\'}" ng-click="$mdOpenMenu($event); $ctrl.mainMenuFocusedDialog()"><span translate="eshelf.signin.menu"></span> <span class="menu-arrow"></span></md-button><md-menu-content width="4" class="prm-user-menu-content"><h2 class="accessible-only" translate="nui.menu" ng-if="$ctrl.isOpenMenuDialog"></h2><md-menu-item ng-if="$ctrl.displayLanguage" class="my-languages-ctm"><md-button translate-attr="{\'aria-label\': \'nui.aria.clickToChange\'}" ng-click="$ctrl.showLoginDialog()" id="changeLang"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="earth"></prm-icon><span translate="eshelf.menu.displayLangNew"></span>&nbsp; <span class="bold-text" translate="mypref.language.option.{{::$ctrl.getLang()}}"></span></md-button></md-menu-item><md-menu-divider ng-if="::$ctrl.displayLanguage && $ctrl.showUserArea"></md-menu-divider><md-menu-item class="my-library-card-ctm" ng-if="::$ctrl.showUserArea"><md-button class="button-with-icon" ng-click="$ctrl.goToMyLibraryCard()" translate-attr="{\'aria-label\': \'nui.aria.menu.librarycard\'}"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="account-card-details"></prm-icon><span translate="nui.menu.librarycard"></span></md-button></md-menu-item><md-menu-item ng-if="::!$ctrl.isOvp() && $ctrl.showUserArea" class="ovl-button-ctm"><md-button class="button-with-icon" ng-click="$ctrl.goToUserSettings()" translate-attr="{\'aria-label\': \'nui.aria.goSettings\'}"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="account-card-details"></prm-icon><span translate="nui.details.header.ovl"></span></md-button></md-menu-item><md-menu-divider ng-if="::$ctrl.showUserArea"></md-menu-divider><md-menu-item class="my-refworks-ctm" ng-if="::$ctrl.isRefworksActionEnabled() && $ctrl.showUserArea"><md-button class="button-with-icon refworks-user-area-btn" href="https://refworks.proquest.com/" ng-click="$ctrl.refworksWithBeacon()" target="refworks-main-menu" translate-attr="{\'aria-label\': \'nui.aria.refWorks\'}"><prm-icon icon-type="svg" svg-icon-set="primo-actions" icon-definition="refworks"></prm-icon><span translate="eshelf.menu.refworks"></span></md-button></md-menu-item><md-menu-divider class="my-refworks-separator-ctm" ng-if="::$ctrl.isRefworksActionEnabled()  && $ctrl.showUserArea"></md-menu-divider><md-menu-item class="my-favorties-ctm" ng-if="::$ctrl.showUserArea && !$ctrl.isSummonOverAlma()"><md-button class="button-with-icon" ng-click="$ctrl.goToFavorties()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.favoritesStateParams" ui-sref-opts="{reload: true, inherit:false}" translate-attr="{\'aria-label\': \'nui.aria.favorites.goFavorites\'}"><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon><span translate="eshelf.menu.savedItems"></span></md-button></md-menu-item><md-menu-item class="my-search-history-ctm" ng-if="::$ctrl.showUserArea && !$ctrl.isSummonOverAlma()"><md-button class="button-with-icon" ng-click="$ctrl.goToSearchHistory()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.searchHistoryParams" ui-sref-opts="{reload: true, inherit:false}" translate-attr="{\'aria-label\': \'nui.aria.goHistory\'}" (keydown)="$ctrl.keydownSupportSignOut($event)"><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="restore"></prm-icon><span translate="eshelf.menu.searchHistory"></span></md-button></md-menu-item></md-menu-content></md-menu><md-menu ng-if="$ctrl.isSignedIn()" md-position-mode="{{$ctrl.isRTL() ? \'target-left\' : \'target-right\'}} target" md-offset="0 71"><md-button aria-label="{{($ctrl.userName().length==0 ?  \'nui.clisckSignIn.tooltip\'  : \'nui.clisckSignOut.tooltip\') | translate}}" class="user-button user-menu-button button-with-menu-arrow" ng-click="$mdOpenMenu($event); $ctrl.mainMenuFocusedDialog()"><span class="user-name">{{::$ctrl.userName()}}</span> <span class="menu-arrow"></span></md-button><md-menu-content width="5" class="prm-user-menu-content"><h2 class="accessible-only" translate="nui.menu"></h2><div class="user-menu-header"><div layout="column" flex><span class="tiny-uppercase-text" translate="eshelf.menu.signedInAs"></span> <span class="bold-text" style="padding-right:1rem">{{$ctrl.userName()}}</span></div><div><md-button class="md-primary" id="signOutButton" ng-click="$ctrl.handleLogout(authenticationMethod)" aria-label="{{\'nui.aria.signOut\' | translate}}"><span class="bold-text" translate="eshelf.menu.signOut"></span></md-button></div></div><md-menu-divider ng-if="::$ctrl.showUserArea"></md-menu-divider><md-menu-item ng-if="::!$ctrl.isOvp() && $ctrl.showUserArea" class="ovl-button-ctm"><md-button class="button-with-icon" ng-click="$ctrl.goToUserSettings()"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="account-card-details"></prm-icon><span translate="nui.details.header.ovl"></span></md-button></md-menu-item><md-menu-item class="my-library-card-ctm" ng-if="::$ctrl.showUserArea"><md-button class="button-with-icon" ng-click="$ctrl.goToMyLibraryCard()" aria-label="{{\'nui.aria.menu.librarycard\' | translate}}"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="account-card-details"></prm-icon><span translate="nui.menu.librarycard"></span></md-button></md-menu-item><md-menu-item class="menu-item-indented my-loans-ctm" ng-if="::$ctrl.isOvp() && $ctrl.showUserArea"><md-button ng-click="$ctrl.goToLoans()" aria-label="{{\'nui.aria.menu.myLoans\' | translate}}"><span translate="eshelf.menu.myLoans"></span></md-button></md-menu-item><md-menu-item class="menu-item-indented my-requests-ctm" ng-if="::$ctrl.isOvp() && $ctrl.showUserArea"><md-button ng-click="$ctrl.goToRequests()" aria-label="{{\'nui.aria.menu.myRequests\' | translate}}"><span translate="eshelf.menu.myRequests"></span></md-button></md-menu-item><md-menu-divider ng-if="::$ctrl.showUserArea"></md-menu-divider><md-menu-item class="my-refworks-ctm" ng-if="::$ctrl.isRefworksActionEnabled()  && $ctrl.showUserArea"><md-button class="button-with-icon refworks-user-area-btn" href="https://refworks.proquest.com/" ng-click="$ctrl.refworksWithBeacon()" target="refworks-main-menu" aria-label="{{\'nui.aria.refWorks\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-actions" icon-definition="refworks"></prm-icon><span translate="eshelf.menu.refworks"></span></md-button></md-menu-item><md-menu-divider class="my-refworks-separator-ctm" ng-if="::$ctrl.isRefworksActionEnabled()  && $ctrl.showUserArea"></md-menu-divider><md-menu-item class="my-favorties-ctm" ng-if="::$ctrl.showUserArea && !$ctrl.isSummonOverAlma()"><md-button class="button-with-icon" ng-click="$ctrl.goToFavorties()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.favoritesStateParams" ui-sref-opts="{reload: true, inherit:false}" aria-label="{{\'nui.aria.favorites.goFavorites\' | translate}}"><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon><span translate="eshelf.menu.savedItems"></span></md-button></md-menu-item><md-menu-item class="my-search-history-ctm" ng-if="::$ctrl.showUserArea && !$ctrl.isSummonOverAlma()"><md-button class="button-with-icon" ng-click="$ctrl.goToSearchHistory()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.searchHistoryParams" ui-sref-opts="{reload: true, inherit:false}" aria-label="{{\'nui.aria.goHistory\' | translate}}"><prm-icon class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="restore"></prm-icon><span translate="eshelf.menu.searchHistory"></span></md-button></md-menu-item><md-menu-divider ng-if="$ctrl.displayLanguage"></md-menu-divider><md-menu-item ng-if="$ctrl.displayLanguage" class="my-languages-ctm"><md-button aria-label="{{\'nui.aria.clickToChange\' | translate}}" ng-click="$ctrl.showLoginDialog()" (keydown)="$ctrl.keydownSupportSignIn($event)"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="earth"></prm-icon><span translate="eshelf.menu.displayLangNew"></span>&nbsp; <span class="bold-text" translate="mypref.language.option.{{::$ctrl.getLang()}}"></span></md-button></md-menu-item></md-menu-content></md-menu><prm-user-area-expandable-after parent-ctrl="$ctrl"></prm-user-area-expandable-after>');
$templateCache.put('components/search/topbar/userArea/user-area.html','<span id="loggedInIndicator" role="alert" class="accessible-only hidden" ng-style="::{\'display\': $ctrl.isBlocked}">{{::$ctrl.getRoleAlertMessage()}}</span><md-button tabindex="-1" class="user-menu-button accessible-only" aria-label="{{::$ctrl.signInOrOutTooltipLabel}}" ng-click="$event.stopPropagation();$ctrl.enableMobileMenu()" hide-xs><div class="user-button-text" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}} </span><span class="user-language text-uppercase" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div></md-button><md-button class="user-menu-button" aria-label="{{::$ctrl.signInOrOutTooltipLabel}}" (click)="$ctrl.changUserStatus()" hide-xs><div class="user-menu-button-loader ng-scope layout-align-center-center layout-row" layout="row" layout-align="center center"><prm-spinner class="inline-loader ng-isolate-scope half-transparent no-text" ng-if="$ctrl.showSpinner()"></prm-spinner></div><div ng-if="!$ctrl.showSpinner()" ng-class="{\'user-button-text\': $ctrl.userName().length > 0}" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}} </span><span class="user-language text-uppercase" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div><md-tooltip md-direction="down" md-delay="400"><span ng-if="$ctrl.userName().length == 0" translate="nui.clisckSignIn.tooltip"></span> <span ng-if="$ctrl.userName().length > 0" translate="nui.clisckSignOut.tooltip"></span></md-tooltip></md-button><md-button class="mobile-menu-button zero-margin" aria-label="{{::$ctrl.signInOrOutTooltipLabel}}" (click)="$ctrl.enableMobileMenu()" style="min-width: 60px" ng-if="$ctrl.detectMobile()"><prm-icon [icon-type]="::$ctrl.topBarIcons.more.type" [svg-icon-set]="::$ctrl.topBarIcons.more.iconSet" [icon-definition]="::$ctrl.topBarIcons.more.icon"></prm-icon></md-button><md-fab-toolbar md-direction="left" md-open="$ctrl.showUserMenu" hide-xs (keydown)="$ctrl.keydownSupport($event)"><md-fab-trigger class="align-with-text" ng-class="{\'show-user-info\': $ctrl.userName().length > 0}"><md-button aria-hidden="true" tabindex="-1" class="button-with-icon zero-margin" aria-label="{{::$ctrl.signInOrOutTooltipLabel}}"><div style="opacity: 0;" class="user-button-text" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}}</span> <span class="user-language" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div></md-button></md-fab-trigger><md-toolbar><md-fab-actions class="md-toolbar-tools zero-padding buttons-group"><prm-authentication layout="flex" [is-logged-in]="$ctrl.userName().length > 0"></prm-authentication><prm-change-lang aria-label="{{\'eshelf.signin.title\' | translate}}" ng-if="$ctrl.displayLanguage" label-type="icon"></prm-change-lang><prm-library-card-menu ng-if="::$ctrl.showUserArea"></prm-library-card-menu></md-fab-actions></md-toolbar></md-fab-toolbar><prm-user-area-after parent-ctrl="$ctrl"></prm-user-area-after>');
$templateCache.put('components/search/virtualBrowse/virtualBrowseItem/virtual-browse-item.html','<md-card><md-tooltip class="multi-row-tooltip" md-visible="isVisible" md-direction="top" md-delay="$ctrl.tooltipDelay"><prm-virtual-browse-item-info [virtual-browse-item]="$ctrl.virtualBrowseItem"></prm-virtual-browse-item-info></md-tooltip><div class="card-image"><prm-search-result-thumbnail-container ng-if="$ctrl.renderFlag && $ctrl.virtualBrowseItem.recordId" class="md-card-image" [is-virtual-browse]="true" [links]="$ctrl.virtualBrowseItem.thumbnails" [pnx-id]="$ctrl.virtualBrowseItem.recordId"></prm-search-result-thumbnail-container></div><md-card-title><md-card-title-text>{{$ctrl.virtualBrowseItem.title}}</md-card-title-text></md-card-title><md-card-content><p class="zero-margin"><span class="weak-text">{{$ctrl.virtualBrowseItem.date}}</span></p></md-card-content></md-card><prm-virtual-browse-item-after parent-ctrl="$ctrl"></prm-virtual-browse-item-after>');
$templateCache.put('components/search/virtualBrowse/virtualBrowseItemInfo/virtual-browse-item-info.html','<div layout="column"><h3 class="bold-text">{{$ctrl.virtualBrowseItem.title}}</h3><p><span>{{$ctrl.virtualBrowseItem.author}}</span> <span>{{$ctrl.virtualBrowseItem.date}}</span></p><p><span>{{$ctrl.virtualBrowseItem.callNumber}}</span></p></div><prm-virtual-browse-item-info-after parent-ctrl="$ctrl"></prm-virtual-browse-item-info-after>');
$templateCache.put('components/security/login/loginHelp/login-help.html','<div layout="column" layout-align="center center " class="collapsable-container" ng-class="$ctrl.showMoreInfo ? \'collapsed\':\'expanded\' "><md-button class="button-as-link" ng-show="$ctrl.showMoreInfoButton" ng-click="$ctrl.toggleShowMoreInfo()" tabindex="-1 "><span translate="nui.login.help"></span></md-button><md-content layout="column" layout-padding ng-show="$ctrl.showMoreInfo"><div ng-repeat="helpLink in $ctrl.loginHelpLinks"><a href="{{ helpLink.linkURL }}" target="_blank"><span translate="{{helpLink.label}}"></span><prm-icon external-link [icon-type]="::$ctrl.loginIcons.externalLinkIcon.type" [svg-icon-set]="::$ctrl.loginIcons.externalLinkIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.externalLinkIcon.icon"></prm-icon></a></div><p ng-show="$ctrl.showHelpDescription" translate="nui.help.description"></p></md-content></div><prm-login-help-after parent-ctrl="$ctrl"></prm-login-help-after>');
$templateCache.put('components/security/login/loginItem/login-item.html','<div class="md-list-item-text" layout="column"><div layout="row"><h3 class="list-item-title md-display-3" translate="{{$ctrl.getProfileLinkForDisplay( $ctrl.authenticationMethod.index )}}"></h3><prm-icon external-link ng-show="$ctrl.authenticationMethod.isExternal()" icon-type="{{::$ctrl.loginIcons.externalLinkIcon.type}}" svg-icon-set="{{::$ctrl.loginIcons.externalLinkIcon.iconSet}}" icon-definition="{{::$ctrl.loginIcons.externalLinkIcon.icon}}"></prm-icon></div><p translate="{{$ctrl.getProfileLinkDescriptionForDisplay( $ctrl.authenticationMethod.index )}}"></p></div><prm-login-item-after parent-ctrl="$ctrl"></prm-login-item-after>');
$templateCache.put('components/security/login/unionCatalogLogin/union-catalog-login.html','<div class="layout-full-width" layout="column"><div layout="row" layout-align="center center" style="margin-top: 1.5em; min-height: 40px;" class="layout-align-center-center layout-row"><h2 class="md-headline light-text" layout="row" layout-align="center center"><span translate="login.dual.title"></span></h2></div><md-dialog-content><md-content><md-list role="list" class="padded-container"><div class="filter-institution-union-catalog" layout="column" layout-align="start center"><md-input-container class="centered-input"><label translate="login.union.title" class="text-uppercase"></label> <input type="text" ng-model="searchText"/></md-input-container></div><md-list-item ng-repeat="institutionDetails in $ctrl.unionCatalogInstitutionsList | filter:searchText | orderBy:\'name\'" class="md-2-line md-long-text" ng-click="$ctrl.goToInstitutionLogin( institutionDetails )" aria-label="{{institutionDetails.name}}"><prm-union-catalog-login-institution-item [institution-details]="institutionDetails"></prm-union-catalog-login-institution-item><div class="md-secondary"><prm-icon [icon-type]="::$ctrl.loginIcons.gotoLinkIcon.type" [svg-icon-set]="::$ctrl.loginIcons.gotoLinkIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.gotoLinkIcon.icon"></prm-icon></div></md-list-item></md-list></md-content></md-dialog-content><md-dialog-actions class="animate-enter-leave-scale-bounce" layout="row" layout-align="center center" ng-if="!hideActionsBar"><md-button ng-if="!$ctrl.standAlone()" class="button-large" ng-click="$ctrl.cancelLogin()" aria-label="{{\'nui.aria.login.cancel\' | translate}}"><span translate="login.cancel"></span></md-button></md-dialog-actions></div><prm-union-catalog-login-after parent-ctrl="$ctrl"></prm-union-catalog-login-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryItemsList/galleryItem/gallery-item.html','<div class="collection-element" ng-click="$ctrl.openFullViewDialog($event)" ng-if="::$ctrl.itemsViewStyle === \'gallery\'" ng-mouseenter="$ctrl.itemInFocus = true" ng-mouseleave="$ctrl.itemInFocus = false" ng-class="{\'is-active\': $ctrl.itemInFocus}" aria-label="{{::\'nui.aria.collectionDiscovery.collectionItem\' | translate: {\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalItems} }}"><figure><div class="image-holder" layout="row" layout-align="center center"><prm-search-result-thumbnail-container class="media-content-images" ng-class="::{\'dedup-images-holder\' : $ctrl.isMultipleVersions() && !$ctrl.isFavoriteState()}" [item]="::$ctrl.item" [links]="::$ctrl.item.delivery.link" [frbr]="false" [is-frbr-generic]="false"></prm-search-result-thumbnail-container></div></figure><div class="item-info"><span class="resource-type"><span class="tiny-uppercase-text">{{::\'mediatype.\'+$ctrl.type | translate}}</span></span><h3 class="item-title">{{::$ctrl.title}}</h3><p class="item-displayLine">{{card.DisplayLine1}}</p></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [item]="$ctrl.item" [is-favorites]="false" [index]="$ctrl.index + 1" [is-collection-discovery]="true"></prm-save-to-favorites-button></div></div><div class="collection-element" ng-click="$ctrl.openFullViewDialog($event)" layout="column" ng-if="::$ctrl.itemsViewStyle === \'grid\'" ng-mouseenter="$ctrl.itemInFocus = true" ng-mouseleave="$ctrl.itemInFocus = false" ng-class="{\'is-active\': $ctrl.itemInFocus}" aria-label="{{::\'nui.aria.collectionDiscovery.collectionItem\' | translate: {\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalItems} }}"><figure><div class="image-holder" layout="row" layout-align="center center"><prm-search-result-thumbnail-container class="media-content-images" ng-class="::{\'dedup-images-holder\' : $ctrl.isMultipleVersions() && !$ctrl.isFavoriteState()}" [item]="::$ctrl.item" [links]="::$ctrl.item.delivery.link" [frbr]="false" [is-frbr-generic]="false"></prm-search-result-thumbnail-container></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [item]="$ctrl.item" [is-favorites]="false" [index]="$ctrl.index + 1" [is-collection-discovery]="true"></prm-save-to-favorites-button></div></figure><div class="item-info"><span class="resource-type"><span class="tiny-uppercase-text">{{::\'mediatype.\'+$ctrl.type | translate}}</span></span><h3 class="item-title">{{::$ctrl.title}}</h3><p class="item-displayLine">{{item.DisplayLine1}}</p></div></div><prm-gallery-item-after parent-ctrl="$ctrl"></prm-gallery-item-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryCollectionsList/galleryCollection/gallery-collection.html','<a class="collection-folder" layout="column" ng-mouseenter="$ctrl.showFolderInfo = true" ng-mouseleave="$ctrl.showFolderInfo = false" ng-class="{\'is-active\': $ctrl.showFolderInfo}" ng-click="$ctrl.runCollectionDiscoveryBeacon()" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.collectionStateParams" ui-sref-opts="{reload: true, inherit:false, }" aria-label="{{::$ctrl.title | translate}}{{\' \'}}{{::(\'nui.aria.collectionDiscovery.collectionFolder\' | translate:{\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalCollections})}}{{\' \'}}{{$ctrl.description | translate}}"><div class="collection-overlay" layout="column" layout-align="start-start"><div class="item-title" layout="column" layout-align="start start"><div class="item-meta" layout-align="start-center"><span ng-if="!$ctrl.isGalleryLobby" class="item-type">{{\'nui.colldiscovery.subcollection.title\' | translate}}</span> <span ng-if="$ctrl.isGalleryLobby" class="item-type">{{\'nui.colldiscovery.collection.title\' | translate}}</span></div><h3><span>{{::$ctrl.title}}</span></h3></div><div class="item-info"><div class="item-meta" layout-align="start-center"><span class="item-type">{{\'nui.colldiscovery.subcollections.title\' | translate}}</span></div><h3><span>{{$ctrl.title}}</span></h3><p>{{$ctrl.description}}</p></div></div><div class="collection-images" layout="row" layout-wrap flex><div ng-repeat="thumbnail in $ctrl.thumbnails track by $index" style="background-image: url({{thumbnail}}); height: inherit"></div></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [recordid]="::$ctrl.collectionRecordId" [get-record-function]="::$ctrl.getRecordFunction" [is-collection-discovery]="true"></prm-save-to-favorites-button></div></a><prm-gallery-collection-after parent-ctrl="$ctrl"></prm-gallery-collection-after>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/general.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text margin-right-small" dynamic-html="$ctrl.htmlMsg"></span><md-button (click)="$ctrl.onClose()"><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss"></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/requestAlert.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center" dynamic-html="$ctrl.htmlMsg"></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/signIn.html','<div layout="row" class="bar alert-bar" layout-align="center center" ng-if="$ctrl.showMessage() && $ctrl.isGuestOrOffcampusForSignIn()"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span><prm-authentication [is-logged-in]="$ctrl.userName().length > 0" [idp-logout]="$ctrl.idpLogout" flex="none"></prm-authentication><md-divider></md-divider><md-button aria-label="{{::(\'nui.message.dismiss\' | translate)}}" (click)="$ctrl.onClose()" class="dismiss-alert-button zero-margin" ng-class="$ctrl.mediaQueries.xs ? \'md-icon-button\' : \'button-with-icon\' "><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss" hide-xs></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/simple.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span><md-button (click)="$ctrl.onClose()"><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss"></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/simpleWithoutDismiss.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span></div>');
$templateCache.put('components/search/actions/mendeleyAction/mendeleyToast/mendeley-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" class="md-toast-content" role="alert"><div ng-if="$ctrl.isSuccess && !$ctrl.inProgress" layout="row" layout-align="center center" class="md-toast-content" style="justify-content: center;"><prm-icon class="prm-positive md-toast-icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="check"></prm-icon><div class="md-toast-text"><span translate="nui.mendeley.message.exported"></span><span ng-if="$ctrl.title"><span>:</span><span>&nbsp;</span><span class="md-toast-text-block"><span>"</span><span class="md-toast-text-ellipsis" dir="auto">{{$ctrl.title}}</span><span>"</span></span></span></div></div><div ng-if="$ctrl.inProgress" layout="row" layout-align="center center" class="md-toast-content" style="justify-content: center;"><span class="md-toast-text" translate="nui.mendeley.message.exporting"></span></div><div ng-if="!$ctrl.isSuccess && !$ctrl.inProgress" layout="row" layout-align="center center" class="md-toast-content" style="justify-content: center;"><prm-icon class="prm-warn md-toast-icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="error-outline"></prm-icon><div class="md-toast-text"><span translate="nui.mendeley.message.failed"></span><span ng-if="$ctrl.title"><span>:</span><span>&nbsp;</span><span class="md-toast-text-block"><span>"</span><span class="md-toast-text-ellipsis" dir="auto">{{$ctrl.title}}</span><span>"</span></span></span></div><md-button ng-if="!$ctrl.detectMobile()" ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}}"><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div><div ng-if="!$ctrl.isSuccess && !$ctrl.inProgress && $ctrl.detectMobile()" div layout="row" layout-align="center center" class="md-toast-content" style="justify-content: center;"><md-button ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}}"><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div></md-toast><prm-mendeley-toast-after parent-ctrl="$ctrl"></prm-mendeley-toast-after>');
$templateCache.put('components/search/fullView/getit/almaMoreInst/alma-more-inst.html','<h3 class="medium-uppercase-bold"><span translate="nui.brief.results.tabs.getit_other"></span></h3><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Institutions List" id="{{$ctrl.TABS.INST_LIST}}"><md-content><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="almaInst in $ctrl.getInstitutions()"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.selectedTab = $ctrl.TABS.MASHUP; $ctrl.loadMashup(almaInst)"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text"><h3 translate="{{almaInst.inst}}"></h3><p><span class="availability-status {{almaInst.availabilityStatus}}" translate="fulldisplay.availabilty.{{almaInst.availabilityStatus}}"></span></p></div><prm-icon icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></md-button></md-list-item></md-list></md-content></md-tab><md-tab label="Alma Mashup" id="{{$ctrl.TABS.MASHUP}}"><md-button (click)="$ctrl.selectedTab = $ctrl.TABS.INST_LIST; $ctrl.unloadMashup()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}"></prm-icon><span translate="nui.getit_other.back"></span></md-button><prm-alma-mashup ng-if="$ctrl.links.length > 0" [links-array]="$ctrl.links"></prm-alma-mashup></md-tab></md-tabs><prm-alma-more-inst-after parent-ctrl="$ctrl"></prm-alma-more-inst-after>');
$templateCache.put('components/search/fullView/getit/almaOtherMembers/alma-other-members.html','<md-button class="section-title" layout-fill aria-expanded="{{!$ctrl.isCollapsed}}" (click)="$ctrl.collapseSection($event)" ng-class="{\'collapsed\': $ctrl.isCollapsed}"><div layout="row" layout-align="start center"><h3 class="medium-uppercase-bold"><br><span translate="{{::$ctrl.label}}"></span><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right" ng-class="{\'rotate-90\': !$ctrl.isCollapsed}"></prm-icon></h3></div></md-button><prm-spinner class="margin-left-medium inline-loader dark-on-light ng-scope ng-isolate-scope" ng-if="$ctrl.loadOtherMemberInProgress || $ctrl.opacRequestInProgress"></prm-spinner><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs section-content animate-max-height-variable" ng-hide="$ctrl.isCollapsed"><md-tab label="Institutions List" id="{{$ctrl.TABS.INST_LIST}}"><md-content><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="almaInst in $ctrl.getInstitutions()"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.selectedTab = $ctrl.TABS.OPAC; $ctrl.loadOtherMember(almaInst)"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text"><h3>{{almaInst.instName}}</h3><p><span class="availability-status {{almaInst.availabilityStatus}}" translate="fulldisplay.otherMembers.availabilty.{{almaInst.availabilityStatus}}"></span></p></div><prm-icon icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></md-button></md-list-item></md-list></md-content></md-tab><md-tab label="Alma Member Getit" id="{{$ctrl.TABS.OPAC}}"><md-button (click)="$ctrl.selectedTab = $ctrl.TABS.INST_LIST" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}"></prm-icon><span translate="nui.getit_other.back"></span></md-button><prm-opac ng-if="$ctrl.memberItem && $ctrl.availabilityType === \'P\' && !$ctrl.loadOtherMemberInProgress" [item]="$ctrl.memberItem" [member-inst]="$ctrl.memberInst" [service-mode]="$ctrl.serviceMode" [register-user]="$ctrl.registerUser" [service-scroll-id]="::$ctrl.serviceScrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView"></prm-opac><prm-alma-viewit-items ng-repeat="service in ::$ctrl.servicesList" ng-if="$ctrl.memberItem && $ctrl.availabilityType === \'E\' && !$ctrl.loadOtherMemberInProgress && $ctrl.getServices(service.name) && $ctrl.getServices(service.name).length" [services]="::$ctrl.getServices(service.name)" [read-only]="true" [header]="service.header"></prm-alma-viewit-items></md-tab></md-tabs><prm-alma-other-members-after parent-ctrl="$ctrl"></prm-alma-other-members-after>');
$templateCache.put('components/search/fullView/getit/almaMashup/almaMashup.html','<form target="{{$ctrl.getTargetName()}}" method="post" action="{{$ctrl.linkPart}}" id="{{$ctrl.serviceName}}MashupForm" ng-if="::$ctrl.isFormAvailable()" style="display: none"><input type="hidden" ng-repeat="param in $ctrl.jsonPart" name="{{param.name}}" value="{{param.value}}"><md-button type="submit"></md-button></form><iframe iframe-onload="{{::$ctrl.iframeResize()}}" class="mashup-iframe" ng-src="{{$ctrl.getLink()}}" style="width:100%;border:none;" ng-if="::$ctrl.isLinkAvailable() && !$ctrl.isAlmaGetit()" name="AlmaviewitMashupIframe" ng-style="::(!$ctrl.isAlmaIframe && {\'height\':\'211px\'})"></iframe><iframe iframe-onload="{{::$ctrl.iframeResize()}}" class="mashup-iframe" ng-src="{{$ctrl.getLink()}}" ng-style="::(!$ctrl.isAlmaIframe && {\'height\':\'211px\'})" style="width:100%;border:none;" ng-if="::$ctrl.isLinkAvailable() && $ctrl.isAlmaGetit()" name="AlmagetitMashupIframe"></iframe><prm-alma-mashup-after parent-ctrl="$ctrl"></prm-alma-mashup-after>');
$templateCache.put('components/search/fullView/getit/almaOtherUnits/alma-other-units.html','<md-button class="section-title" layout-fill aria-expanded="{{!$ctrl.isCollapsed}}" (click)="$ctrl.collapseSection($event)" ng-class="{\'collapsed\': $ctrl.isCollapsed}"><div layout="row" layout-align="start center"><h3 class="medium-uppercase-bold"><br><span translate="{{::$ctrl.label}}"></span><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right" ng-class="{\'rotate-90\': !$ctrl.isCollapsed}"></prm-icon></h3></div></md-button><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs section-content animate-max-height-variable" ng-hide="$ctrl.isCollapsed"><md-tab label="Units List" id="{{::$ctrl.TABS.UNITS_LIST}}"><md-content><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="almaUnit in ::$ctrl.getUnits()"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.selectedTab = $ctrl.TABS.UNIT_SERVICES; $ctrl.selectedUnit = almaUnit"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text"><h3>{{::almaUnit.unitName}}</h3><p><span class="availability-status available_online" translate="fulldisplay.otherMembers.availabilty.available_online"></span></p></div></div></md-button></md-list-item></md-list></md-content></md-tab><md-tab label="Alma Unit Viewit" id="{{::$ctrl.TABS.UNIT_SERVICES}}"><md-button (click)="$ctrl.selectedTab = $ctrl.TABS.UNITS_LIST; $ctrl.selectedUnit = undefined" class="back-button button-with-icon zero-margin"><span translate="nui.getit_other.back"></span></md-button><prm-alma-viewit-items ng-if="$ctrl.selectedUnit" [services]="$ctrl.selectedUnit.services" [read-only]="true" [header]="\'viewit.fulltext\'"></prm-alma-viewit-items></md-tab></md-tabs><prm-alma-other-units-after parent-ctrl="$ctrl"></prm-alma-other-units-after>');
$templateCache.put('components/search/fullView/getit/almaViewit/almaViewit.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcDone"></prm-spinner><prm-alert-bar [alert-object]="$ctrl.signInLink" ng-if="$ctrl.showSignInLink()"></prm-alert-bar><prm-alma-viewit-items ng-repeat="service in $ctrl.servicesList" ng-if="($ctrl.isCalculateSvcDone && $ctrl.getServices(service.name) && $ctrl.getServices(service.name).length)" [services]="$ctrl.getServices(service.name)" [read-only]="false" [header]="service.header"></prm-alma-viewit-items><prm-alma-viewit-after parent-ctrl="$ctrl"></prm-alma-viewit-after>');
$templateCache.put('components/search/fullView/getit/almaViewit/almaViewitItems.html','<div class="spaced-rows"><span translate="{{$ctrl.header}}" class="bold-text"/></div><md-list layout="column" ng-if="$ctrl.services && !$ctrl.isEsploroService()" class="separate-list-items"><md-list-item ng-repeat="item in $ctrl.services track by $index" class="md-3-line in-element-dialog-parent" (click)="$ctrl.onClick($event, item)" tabindex="0" aria-label="{{item.packageName}} {{$ctrl.viewItAvailability(item)}} {{\'nui.aria.newWindow\' | translate}}" ng-class="{\'pointer\' : $ctrl.isLinkable(item)}"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><div flex flex-xs="100"><p ng-if="item.relatedTitle && item.serviceType===\'ELECTRONIC_RELATED\'" ng-bind="item.relatedTitle"></p><h3 ng-if="item.serviceDescription"><span ng-bind="item.serviceDescription">{{item.serviceDescription}}</span></h3><h3 ng-if="item.packageName"><a class="item-title" ng-if="$ctrl.isLinkable(item)" ng-href="{{item.serviceUrl}}" ng-click="$event.preventDefault()">{{$ctrl.getPackageName(item.packageName)}}</a> <span ng-if="!$ctrl.isLinkable(item)" ng-bind="item.packageName"></span></h3><h4 ng-if="item.availiability" ng-repeat="ava in item.parsedAvailiability">{{ava}}</h4><h4 ng-if="item.numberOfFiles || item.fileType"><span ng-if="item.numberOfFiles">{{item.numberOfFiles + \' \'}}</span> <span ng-if="item.numberOfFiles" translate="c.searchhtmlCreator.files"></span> <span ng-if="item.fileType">{{\' (\' + item.fileType + \')\'}}</span></h4><h4 ng-if="item.serviceNotAvailable"><span ng-bind="item.serviceNotAvailable"></span> <span ng-if="item.serviceNotAvailableReason" translate="due to"></span> <span ng-if="item.serviceNotAvailableReason" ng-bind="item.serviceNotAvailableReason"></span></h4><p class="text-italic ng-scope layout-row weak-text" ng-if="item.authNote" layout="row"><span flex="none" class="flex-none"><prm-icon ng-class="" icon-type="{{$ctrl.viewItIcons.authNote.type}}" svg-icon-set="{{$ctrl.viewItIcons.authNote.iconSet}}" icon-definition="{{$ctrl.viewItIcons.authNote.icon}}"></prm-icon></span><span class="ng-binding" ng-bind="item.authNote"></span></p><p class="text-italic ng-scope layout-row weak-text" ng-if="item.publicNote" layout="row"><span flex="none" class="flex-none"><prm-icon ng-class="" ng-if="item.serviceType != \'DIGITAL\'" icon-type="{{$ctrl.viewItIcons.publicNote.type}}" svg-icon-set="{{$ctrl.viewItIcons.publicNote.iconSet}}" icon-definition="{{$ctrl.viewItIcons.publicNote.icon}}"></prm-icon><prm-icon ng-class="" ng-if="item.serviceType === \'DIGITAL\' && !item.hasAccess && !$ctrl.readOnly" icon-type="{{$ctrl.viewItIcons.lock.type}}" svg-icon-set="{{$ctrl.viewItIcons.lock.iconSet}}" icon-definition="{{$ctrl.viewItIcons.lock.icon}}"></prm-icon></span><span ng-bind-html="item.publicNote" id="public-note"/></p><p (click)="$ctrl.disableClick($event)" ng-if="item.toggleLicense" class="ng-scope license" style="padding: 1em 1.5em"><span class="ng-binding ng-scope" ng-repeat="line in item.licence track by $index" ng-bind-html="line+\'<br/>\'"></span></p></div></div><div class="_md-secondary-container"><md-button ng-if="item.licenceExist===\'true\'" class="button-link" prm-aria-label="{{\'nui.aria.almaViewitItems.license\' | translate}}" (click)="$ctrl.getLicense(item,$event)" aria-label="license"><span ng-if="!item.toggleLicense" class="ng-scope" translate="c.uresolver.viewit.license.show_license"></span> <span ng-if="item.toggleLicense" class="ng-scope" translate="c.uresolver.viewit.license.hide_license"></span></md-button><prm-icon ng-if="!$ctrl.readOnly && (item.serviceType != \'DIGITAL\' || item.hasAccess===true)" layout-margin icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-class="" ng-if="item.serviceType === \'DIGITAL\' && item.hasAccess===false && !$ctrl.readOnly" layout-margin icon-type="{{$ctrl.viewItIcons.lock.type}}" svg-icon-set="{{$ctrl.viewItIcons.lock.iconSet}}" icon-definition="{{$ctrl.viewItIcons.lock.icon}}"></prm-icon></div></div></md-list-item></md-list><md-list layout="column" ng-if="$ctrl.services && $ctrl.isEsploroService()" flex><md-list-item class="md-3-line in-element-dialog-parent md-list-item-inner" ng-if="$ctrl.services[0].researchFileList" ng-repeat="item in $ctrl.services[0].researchFileList track by $index" ng-disabled="item.haveAccessRight ? \'disabled\' : null" (click)="$ctrl.onClickEsploro($event, $ctrl.services[0].serviceUrl + \'#\' + item.pid, item.haveAccessRight)" tabindex="0" aria-label="{{item.fileName}}{{\' \'}}{{!item.haveAccessRight ? \'nui.aria.newWindow\' : \'\' | translate}}" ng-class="{\'pointer\' : !item.haveAccessRight}"><div class="md-avatar" layout="column"><prm-icon ng-if="$ctrl.isPdfFile(item)" icon-type="svg" svg-icon-set="primo-ui" icon-definition="pdf"></prm-icon><prm-icon ng-if="$ctrl.isTextFile(item)" icon-type="svg" svg-icon-set="primo-ui" icon-definition="txt"></prm-icon><prm-icon ng-if="$ctrl.isZipFile(item)" icon-type="svg" svg-icon-set="primo-ui" icon-definition="zip"></prm-icon><prm-icon ng-if="$ctrl.isGenericFile(item)" icon-type="svg" svg-icon-set="primo-ui" icon-definition="generic-file"></prm-icon><span class="avatar-text">{{ item.format }}</span></div><div class="md-list-item-text" layout="column"><h3 class="item-title" style="white-space: normal"><span ng-if="item.fileType" class="entity-type">{{ item.fileType }}</span> <span ng-if="item.fileType">\u2014 </span>{{ item.fileName }} ({{item.size}})</h3><h4 ng-if="item.description"><span ng-if="item.description">{{ item.description }}</span></h4><p><span ng-if="item.licenseUrl"><a target="_blank" (click)="$ctrl.onClickLicenseUrl(item.licenseUrl)">{{ item.licenseName ? item.licenseName : item.licenseUrl}}</a> </span><span ng-if="item.licenseName && !item.licenseUrl">{{ item.licenseName }}</span> <span ng-if="item.licenseName && item.accessRightStatement">, </span><span ng-if="item.accessRightStatement">{{ item.accessRightStatement }}</span> <span ng-if="item.accessRightStatement && item.accessRightDeniedNote">, </span><span ng-if="item.accessRightDeniedNote">{{ item.accessRightDeniedNote }}</span></p></div><div class="_md-secondary-container"><prm-icon ng-if="item.haveAccessRight === false" layout-margin icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-class="" ng-if="item.haveAccessRight === true" layout-margin icon-type="{{$ctrl.viewItIcons.lock.type}}" svg-icon-set="{{$ctrl.viewItIcons.lock.iconSet}}" icon-definition="{{$ctrl.viewItIcons.lock.icon}}"></prm-icon></div></md-list-item><md-list-item class="md-3-line in-element-dialog-parent md-list-item-inner" ng-if="$ctrl.services[0].researchLinksList" ng-repeat="item in $ctrl.services[0].researchLinksList track by $index" (click)="$ctrl.onClickEsploro($event, item.displayInViewer ? $ctrl.services[0].serviceUrl + \'#\' + item.linkPid : item.linkURL,false)" tabindex="0" aria-label="{{item.linkTitle ? item.linkURL : item.linkTitle}}{{\' \'}}{{\'nui.aria.newWindow\' | translate}}" ng-class="{\'pointer\' : true}"><div class="md-avatar" layout="column"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="link"></prm-icon><span class="avatar-text">{{\'c.uresolver.viewit.esploro.typeurl\' | translate}}</span></div><div class="md-list-item-text" layout="column"><h3 class="item-title"><span ng-if="item.linkType" class="entity-type">{{ item.linkType }}</span> <span ng-if="item.linkType">\u2014 </span><span ng-if="item.linkTitle">{{ item.linkTitle }}</span> <span ng-if="!item.linkTitle">{{ item.linkURL }}</span></h3><h4 ng-if="item.linkDescription"><span ng-if="item.linkDescription">{{ item.linkDescription }}</span></h4><p><span ng-if="item.linkLicenseURL"><a target="_blank" (click)="$ctrl.onClickLicenseUrl(item.linkLicenseURL)">{{ item.linkLicenseName ? item.linkLicenseName : item.linkLicenseURL}}</a> </span><span ng-if="item.linkLicenseName && !item.linkLicenseURL">{{ item.linkLicenseName }}</span> <span ng-if="item.linkLicenseName && item.linkRights">, </span><span ng-if="item.linkRights">{{ item.linkRights }}</span></p></div><div class="_md-secondary-container"><prm-icon layout-margin icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon></div></md-list-item></md-list><prm-alma-viewit-items-after parent-ctrl="$ctrl"></prm-alma-viewit-items-after>');
$templateCache.put('components/search/fullView/getit/opac/back-button.html','<md-button ng-if="!$ctrl.historyStack.isEmpty()" (click)="$ctrl.goBack()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}"></prm-icon><span translate="{{$ctrl.label}}"></span></md-button><prm-opac-back-button-after parent-ctrl="$ctrl"></prm-opac-back-button-after>');
$templateCache.put('components/search/fullView/getit/opac/opac.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><div layout="column" layout-fill><prm-request-services ng-if="$ctrl.serviceMode ===\'ovp\' && $ctrl.isCalculateSvcIdDone" [item]="$ctrl.item" [member-inst]="$ctrl.memberInst" [location-services]="$ctrl.locationServices" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-request-services><prm-requests-services-ovl ng-if="$ctrl.serviceMode ===\'ovl\'" [item]="$ctrl.item" [member-inst]="$ctrl.memberInst"></prm-requests-services-ovl><prm-request-services ng-if="$ctrl.serviceMode ===\'howovp\' && $ctrl.isCalculateSvcIdDone && $ctrl.memberInst" [item]="$ctrl.item" [member-inst]="$ctrl.memberInst" [location-services]="$ctrl.locationServices" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-request-services></div><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs" ng-if="$ctrl.serviceMode ===\'ovp\' || $ctrl.hasLocations()"><md-tab label="Main" md-on-select="requestsLimit(15); showRequestOptions(); $ctrl.focusOnLocations();"><prm-opac-back-button [history-stack]="$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content class="overflow-hidden"><prm-locations ng-if="$ctrl.isCalculateSvcIdDone && $ctrl.isServicesListIsLoadingDone" [item]="$ctrl.item" [member-inst]="$ctrl.memberInst" action="" (change-tab-event)="$ctrl.onChangeTabEvent($event)" [is-filtered]="$ctrl.isLocationFiltered" [filters]="$ctrl.filters" [is-locations-filter-visible]="$ctrl.isLocationsFilterVisible" [register-user]="$ctrl.registerUser" [loc-to-update]="$ctrl.mmsId"></prm-locations></md-content></md-tab><md-tab label="two" md-on-select="showBackButton(); hideRequestOptions()"><div class="tab-header"><prm-opac-back-button ng-if="$ctrl.displayBackToLocationButton()" [history-stack]="$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button></div><md-content class="overflow-hidden"><prm-location-items ng-if="$ctrl.isCalculateSvcIdDone && $ctrl.isServicesListIsLoadingDone" [item]="$ctrl.item" [loc]="$ctrl.loc" (change-tab-event)="$ctrl.onChangeTabEvent($event)" [is-filtered]="$ctrl.isLocationFiltered" [filters]="$ctrl.filters" [is-locations-filter-visible]="$ctrl.isLocationsFilterVisible" [drop-down-options]="$ctrl.dropDownOptions" [register-user]="$ctrl.registerUser" [item-to-update]="$ctrl.itemId"></prm-location-items></md-content></md-tab><md-tab label="Request Form" md-on-select="showBackButton(); checkForRequestOptions()"><prm-opac-back-button [history-stack]="$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content><prm-request (change-tab-event)="$ctrl.onChangeTabEvent($event)" [item]="$ctrl.item" [service]="$ctrl.service" layout="column"></prm-request></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><prm-opac-back-button [history-stack]="$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><prm-opac-back-button [history-stack]="$ctrl.backToHistoryStack" [request-status]="$ctrl.responseStatus.isSuccess" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content layout="column"><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span translate-default="{{$ctrl.getResponseMessage()}}" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content></md-tab></md-tabs><prm-opac-after parent-ctrl="$ctrl"></prm-opac-after>');
$templateCache.put('components/search/fullView/getit/opac/service-button.html','<md-button ng-if="$ctrl.service.allowed === \'Y\' && $ctrl.service[\'link-to-service\']" class="button-as-link" (click)="$ctrl.getServiceDetails()" ng-class="{\'button-external-link\': $ctrl.service[\'service-type\'] == \'OvL\' && $ctrl.service[\'link-to-service\']}" aria-label="{{\'$ctrl.service.type\' | translate}}"><span translate="{{$ctrl.service.type}}"></span><prm-icon external-link ng-if="$ctrl.service[\'service-type\'] == \'OvL\' && $ctrl.service[\'link-to-service\']" [icon-type]="::$ctrl.actionIcons.externalLinkIcon.type" [svg-icon-set]="::$ctrl.actionIcons.externalLinkIcon.iconSet" [icon-definition]="::$ctrl.actionIcons.externalLinkIcon.icon"></prm-icon></md-button><prm-service-button-after parent-ctrl="$ctrl"></prm-service-button-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/howovp.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.servicesListIsLoading"></prm-spinner><div ng-if="$ctrl.services.serviceinfo && $ctrl.services.serviceinfo.length > 0 && !$ctrl.ngrsEnabledAndRSLinkIsOnlyService()"><md-list layout="column" class="separate-list-items"><md-list-item ng-repeat="service in $ctrl.filteredServices() track by $index"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.onClick(service)" md-ink-ripple="red"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text layout-wrap flex" layout="row"><div flex flex-xs="100" layout="column"><span ng-if="service[\'service-type\'] !== \'OvL\'" translate="{{service.type}}"></span> <span ng-if="service[\'service-type\'] === \'OvL\'"><a ng-href="{{service[\'link-to-service\']}}" ng-click="$event.preventDefault()" translate="{{service.type}}"></a></span> <span class="italic-text weak-text" ng-if="service.publicNote.length > 0">{{service.publicNote}}</span> <span ng-if="!service.publicNote.length > 0">&nbsp;</span></div><prm-icon ng-if="!$ctrl.isOvp(service)" class="padding-right-small" icon-type="{{$ctrl.opacLocations.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.externalLinkIcon.icon}}"><span translate="{{service.type}}"></span></prm-icon><prm-icon ng-if="$ctrl.isOvp(service)" class="padding-right-small" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></div></md-button></md-list-item></md-list></div><div ng-if="$ctrl.isLoggedIn() && (!$ctrl.services.serviceinfo || $ctrl.services.serviceinfo.length == 0)"><span translate="nui.request.norequests"></span></div><alma-howovp-after parent-ctrl="$ctrl"></alma-howovp-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-back-button.html','<md-button ng-if="!$ctrl.historyStack.isEmpty()" (click)="$ctrl.goBack()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}"></prm-icon><span translate="{{$ctrl.label}}"></span></md-button><alma-htgi-back-button-after parent-ctrl="$ctrl"></alma-htgi-back-button-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-service.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><div layout="column" layout-fill><alma-htgi-tabs ng-if="$ctrl.isCalculateSvcIdDone" [item]="$ctrl.item" [service-scroll-id]="::$ctrl.serviceScrollId" [is-overlay-full-view]="::$ctrl.isOverlayFullView"></alma-htgi-tabs></div><alma-htgi-svc-after parent-ctrl="$ctrl"></alma-htgi-svc-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-tabs.html','<prm-alert-bar [alert-object]="$ctrl.reqAlert"></prm-alert-bar><prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Requests List"><md-content><alma-howovp [item]="$ctrl.item" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-howovp></md-content></md-tab><md-tab label="Dummy"/><md-tab label="Request Form"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content><prm-request (change-tab-event)="$ctrl.onChangeTabEvent($event)" [item]="$ctrl.item" [service]="$ctrl.service" layout="column"></prm-request></md-content></md-tab><md-tab label="copyrights" md-on-select="$ctrl.onCopyRightSelected()"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" [request-status]="$ctrl.responseStatus.isSuccess" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content layout="column"><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span translate-default="{{$ctrl.getResponseMessage()}}" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content></md-tab></md-tabs><alma-htgi-tabs-after parent-ctrl="$ctrl"></alma-htgi-tabs-after>');
$templateCache.put('components/search/fullView/getit/viewOnline/viewOnline.html','<div ng-repeat="link in $ctrl.getLinks()"><a class="arrow-link" href="{{link.link}}" target="_blank"><span ng-if="link.link.length>0" ng-bind-html="$ctrl.getCode(link)"></span><prm-icon ng-if="link.link.length>0" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-if="link.link.length>0" link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div><prm-view-online-after parent-ctrl="$ctrl"></prm-view-online-after>');
$templateCache.put('components/search/fullView/ngrs/backToLibrarySearchButton/back-to-library-search-button.html','<div ng-if="::$ctrl.isBackToSearchRequired()"><md-toolbar class="default-toolbar zero-padding" sticky sticky-class="is-stuck" disabled-sticky="$ctrl.isBrowseMode"><div class="md-toolbar-tools zero-padding" layout="row"><div flex="0" flex-md="0" flex-lg="15" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20"></div><md-button class="back-button has-text" ng-click="$ctrl.navigateBackToSearchResults()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="nui.ngrs.backto.btn"></span></md-button></div></md-toolbar></div><prm-back-to-library-search-button-after parent-ctrl="$ctrl"></prm-back-to-library-search-button-after>');
$templateCache.put('components/search/fullView/ngrs/librariesAroundBar/librariesAroundBar.html','<div class="main_tile"><md-button prm-brief-internal-button-marker (click)="$ctrl.getPhysicalResult()" ng-keydown="$event.stopPropagation()" class="neutralized-button arrow-link-button"><div class="tile"><div class="icon"><md-icon alt="" class="ng-scope my_icon md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-location"></prm-icon></md-icon></div><div class="button-content text"><span id="text_line"><span translate="nui.ngrs.physical.book.yourself"></span><div class="second_line"><span style="font-style:normal;font-weight:bold;" translate="nui.ngrs.physical.libraries.around"></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></div></span></div></div></md-button></div><prm-libraries-around-bar-after parent-ctrl="$ctrl"></prm-libraries-around-bar-after>');
$templateCache.put('components/search/fullView/ngrs/getItRequest/bookGetItRequest.html','<div id="offer_request_main_tile" class="main_tile_request_form" ng-if="$ctrl.isSignedIn()" (click)="$ctrl.stopPro($event)"><div class="getItNgrs"><h4 class="form_title" translate="nui.ngrs.request.physical.title" ng-if="!$ctrl.isDigitalOffer()"></h4><h4 class="form_title" translate="nui.ngrs.request.digital.title" ng-if="$ctrl.isDigitalOffer()"></h4><div class="offer_details_main_tail_s"><prm-offer-details-tile [item]="::$ctrl.item" [bestoffer]="$ctrl._bestOffer" [isdigitaloffer]="$ctrl.isdigitaloffer"></prm-offer-details-tile></div><div class="validation_msg" ng-if="$ctrl.isDigitalOffer() && !$ctrl.isDigitalFormValidation()"><span role="alert" translate="nui.ngrs.request.validation_msg"></span></div><form class="fill_details" name="getItNgrs" layout="column" ng-if="!$ctrl.isDigitalOffer()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-location"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.locationField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-volume"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.volumeField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-not-needed-after"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.dateField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-note"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.noteField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="margin-buttons"><md-button class="button-with-icon button-confirm submit_btn" type="submit" (keydown)="$ctrl.keydownSupport($event)" (click)="$ctrl.submitForm($event)" ng-disabled="citationLinker.$invalid"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{"nui.ngrs.send.request" | translate}}</span></md-button></div></form><form class="fill_details" name="getItNgrs" layout="column" ng-if="$ctrl.isDigitalOffer()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-form-envelope"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.emailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item" ng-if="$ctrl.showAlternativeEmail()"><div class="icon_border alternativeEmail"></div><prm-form-field class="form_field" [field]="$ctrl.alternativeEmailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-chapter"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.chapterTitleField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-author"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.chapterAuthorField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-volume"></prm-icon></div><div class="form_field_parent"><prm-form-field class="form_field_2 first" [field]="$ctrl.chapterNumberField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field><prm-form-field class="form_field_2" [field]="$ctrl.volumeField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-pages"></prm-icon></div><div class="form_field_parent"><prm-form-field class="form_field_2 first" [field]="$ctrl.fromPageField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field><prm-form-field class="form_field_2" [field]="$ctrl.toPageField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-note"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.noteField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="margin-buttons"><md-button class="button-with-icon button-confirm submit_btn" type="submit" (keydown)="$ctrl.keydownSupport($event)" (click)="$ctrl.submitForm($event)" ng-disabled="citationLinker.$invalid"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{"nui.ngrs.send.request" | translate}}</span></md-button></div></form><md-button (click)="$ctrl.cancelForm($event)" class="close_s">x</md-button></div><div class="offer_details_main_tail"><md-button (click)="$ctrl.cancelForm($event)" class="close">x</md-button><prm-offer-details-tile [item]="::$ctrl.item" [bestoffer]="$ctrl._bestOffer" [isdigitaloffer]="$ctrl.isdigitaloffer"></prm-offer-details-tile></div></div><prm-alert-bar class="alert-bar" [alert-object]="$ctrl.getSignInLink()" ng-if="!$ctrl.isSignedIn()"></prm-alert-bar>');
$templateCache.put('components/search/fullView/ngrs/getItRequest/getItRequest.html','<div ng-include src="$ctrl.getRequestHtml()" class="relative-position"></div><prm-get-it-request-after parent-ctrl="$ctrl"></prm-get-it-request-after>');
$templateCache.put('components/search/fullView/ngrs/getItRequest/jornalGetItRequest.html','');
$templateCache.put('components/search/fullView/ngrs/getItRequest/lastResortGetItRequest.html','<div id="no_offer_request_main_tile" class="main_tile_request_form" ng-if="$ctrl.isSignedIn()" (click)="$ctrl.stopPro($event)"><div class="getItNgrs"><h4 class="form_title" translate="nui.ngrs.request.no_offer.title"></h4><div class="validation_msg" ng-if="!$ctrl.isDigitalFormValidation()"><span translate="nui.ngrs.request.validation_msg"></span></div><div class="validation_msg" ng-if="!$ctrl.isMatrialTypeChosen()"><span translate="nui.ngrs.request.material_type_validation_msg"></span></div><form class="fill_details" name="getItNgrs" layout="column"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-not-needed-after"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.dateField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-note"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.noteField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_material_type_item" ng-if="!$ctrl.isArtical() && !$ctrl.isJournal()"><span class="material_type_title" translate="nui.ngrs.request.no_offer.book_material_type" ng-if="$ctrl.getResourceType() == \'book\'"></span> <span class="material_type_title" translate="nui.ngrs.request.no_offer.material_type" ng-if="$ctrl.getResourceType() != \'book\'"></span><div class="material_type_container"><md-radio-group layout="row"><md-radio-button ng-repeat="item in $ctrl._materialTypes" value="{{::$ctrl.getMatrialTypeLabel($index)}}" ng-click="$ctrl.updateSelectedMaterialType($index)"><span translate="{{::$ctrl.getMatrialTypeLabel($index)}}"></span></md-radio-button></md-radio-group></div></div><div ng-if="$ctrl.isMatrialTypeChecked(0) || $ctrl.isJournal()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-location"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.locationField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-volume"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.volumeField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div><div ng-if="$ctrl.isMatrialTypeChecked(1) || $ctrl.isArtical()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-form-envelope"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.emailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item" ng-if="$ctrl.showAlternativeEmail()"><div class="icon_border alternativeEmail"></div><prm-form-field class="form_field" [field]="$ctrl.alternativeEmailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-chapter"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.chapterTitleField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-author"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.chapterAuthorField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-volume"></prm-icon></div><div class="form_field_parent"><prm-form-field class="form_field_2 first" [field]="$ctrl.chapterNumberField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field><prm-form-field class="form_field_2" [field]="$ctrl.volumeField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-pages"></prm-icon></div><div class="form_field_parent"><prm-form-field class="form_field_2 first" [field]="$ctrl.fromPageField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field><prm-form-field class="form_field_2" [field]="$ctrl.toPageField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div></div><div class="allow_other_formats" ng-if="$ctrl.isMatrialTypeChecked(0)"><md-checkbox aria-label="{{::$ctrl.getAllowOtherLabel()}}" name="material_type" ng-click="$ctrl.updateAllowOtherFormats()"><span translate="{{::$ctrl.getAllowOtherLabel()}}"></span></md-checkbox></div><div ng-if="$ctrl.isAllowOtherFormatsChecked() && $ctrl.isMatrialTypeChecked(0)"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-form-envelope"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.emailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item" ng-if="$ctrl.showAlternativeEmail()"><div class="icon_border alternativeEmail"></div><prm-form-field class="form_field" [field]="$ctrl.alternativeEmailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div></div><div class="margin-buttons"><md-button class="button-with-icon button-confirm submit_btn" type="submit" (keydown)="$ctrl.keydownSupport($event)" (click)="$ctrl.submitForm($event)" ng-disabled="citationLinker.$invalid"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{"nui.ngrs.send.request" | translate}}</span></md-button></div></form><md-button (click)="$ctrl.cancelForm($event)" class="close_s">x</md-button></div><div class="offer_details_main_tail no_offer"><md-button (click)="$ctrl.cancelForm($event)" class="close">x</md-button></div></div><prm-alert-bar class="alert-bar" [alert-object]="$ctrl.getSignInLink()" ng-if="!$ctrl.isSignedIn()"></prm-alert-bar>');
$templateCache.put('components/search/fullView/ngrs/getItRequest/otherGetItRequest.html','<div id="offer_request_main_tile" class="main_tile_request_form" ng-if="$ctrl.isSignedIn()" (click)="$ctrl.stopPro($event)"><div class="getItNgrs"><h4 class="form_title" translate="nui.ngrs.request.physical.title" ng-if="!$ctrl.isDigitalOffer()"></h4><h4 class="form_title" translate="nui.ngrs.request.digital.title" ng-if="$ctrl.isDigitalOffer()"></h4><div class="offer_details_main_tail_s"><prm-offer-details-tile [item]="::$ctrl.item" [bestoffer]="$ctrl._bestOffer" [isdigitaloffer]="$ctrl.isdigitaloffer"></prm-offer-details-tile></div><div class="material_type_msg" ng-if="!$ctrl.isArtical()"><span translate="nui.ngrs.request.material_type_msg"></span></div><form class="fill_details" name="getItNgrs" layout="column" ng-if="!$ctrl.isDigitalOffer()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-location"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.locationField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-not-needed-after"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.dateField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-note"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.noteField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="margin-buttons"><md-button class="button-with-icon button-confirm submit_btn" type="submit" (keydown)="$ctrl.keydownSupport($event)" (click)="$ctrl.submitForm($event)" ng-disabled="citationLinker.$invalid"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{"nui.ngrs.send.request" | translate}}</span></md-button></div></form><form class="fill_details" name="getItNgrs" layout="column" ng-if="$ctrl.isDigitalOffer()"><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-form-envelope"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.emailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item" ng-if="$ctrl.showAlternativeEmail()"><div class="icon_border alternativeEmail"></div><prm-form-field class="form_field" [field]="$ctrl.alternativeEmailField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="form_item"><div class="icon_border"><prm-icon class="form_icon" icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-note"></prm-icon></div><prm-form-field class="form_field" [field]="$ctrl.noteField" [data]="$ctrl.formData" [form]="::this.getItNgrs"></prm-form-field></div><div class="margin-buttons"><md-button class="button-with-icon button-confirm submit_btn" type="submit" (keydown)="$ctrl.keydownSupport($event)" (click)="$ctrl.submitForm($event)" ng-disabled="citationLinker.$invalid"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{"nui.ngrs.send.request" | translate}}</span></md-button></div></form><md-button (click)="$ctrl.cancelForm($event)" class="close_s">x</md-button></div><div class="offer_details_main_tail"><md-button (click)="$ctrl.cancelForm($event)" class="close">x</md-button><prm-offer-details-tile [item]="::$ctrl.item" [bestoffer]="$ctrl._bestOffer" [isdigitaloffer]="$ctrl.isdigitaloffer"></prm-offer-details-tile></div></div><prm-alert-bar class="alert-bar" [alert-object]="$ctrl.getSignInLink()" ng-if="!$ctrl.isSignedIn()"></prm-alert-bar>');
$templateCache.put('components/search/fullView/ngrs/multiSelectFilter/multi-select-filter.html','<div layout="row" layout-align="start center" class="prm-requests-filter-control-visibility"><md-input-container class="static-select empty-select-on-init" layout="row"><label class="md-container-ignore bold-text"><span translate="{{$ctrl.filterLabel}}"></span></label><md-select multiple="multiple" ng-model="$ctrl.filterValues" ng-change="$ctrl.changeFilter()" aria-label="{{::($ctrl.filterLabel | translate)}}, {{\'nui.aria.menu.librarycard.requests.MultiSelectfilter\' | translate}}" md-on-open="$ctrl.selectAll()"><md-option ng-repeat="option in ::$ctrl.getSortedFilterOption()" class="prm-select-checkbox" value="{{::option.value}}" ng-selected="$ctrl.isSelected(v)"><span translate="{{::option.key}}"></span></md-option></md-select></md-input-container></div><prm-multi-select-filter-after parent-ctrl="$ctrl"></prm-multi-select-filter-after>');
$templateCache.put('components/search/fullView/ngrs/ngrsBriefResultLine/ngrsBriefResultLine.html','<div id="ngrs_line"><div id="physical_offer"><prm-brief-result-physical-best-offer [item]="::$ctrl.item" [openphysicalform]="$ctrl._openPhysicalForm" [opendigitalform]="$ctrl._openDigitalForm" [offer-found]="$ctrl.isOfferFound()" [loan-period]="$ctrl.getLoanPeriod()" [supply-time]="$ctrl.getSupplyTime()"></prm-brief-result-physical-best-offer></div><div id="digital_offer"><prm-brief-result-digital-best-offer [item]="::$ctrl.item" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [digital-supply-time]="$ctrl.getDigitalSupplyTime()"></prm-brief-result-digital-best-offer></div><div id="delivery_options"><prm-brief-result-delivery-option-link></prm-brief-result-delivery-option-link></div></div><div class="physical_form" ng-if="$ctrl.showPhysicalForm()"><prm-get-it-request [item]="::$ctrl.item" [getitformopen]="$ctrl._getItFormOpen" [openphysicalform]="$ctrl._openPhysicalForm" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [showmessagebar]="$ctrl._showMessageBar" [bestoffer]="$ctrl._physicalBestOffer" [digitalbestoffer]="$ctrl._digitalBestOffer" [piclocs]="$ctrl._picLocs" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [isblankform]="false" [openblankform]="$ctrl._openBlankForm"></prm-get-it-request></div><div class="digital_form" ng-if="$ctrl.showDigitalForm()"><prm-get-it-request [item]="::$ctrl.item" [isdigitaloffer]="true" [getitformopen]="$ctrl._getItFormOpen" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [showmessagebar]="$ctrl._showMessageBar" [bestoffer]="$ctrl._physicalBestOffer" [digitalbestoffer]="$ctrl._digitalBestOffer" [piclocs]="$ctrl._picLocs" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [isblankform]="false" [openblankform]="$ctrl._openBlankForm"></prm-get-it-request></div><prm-ngrs-brief-result-Line-after parent-ctrl="$ctrl"></prm-ngrs-brief-result-Line-after>');
$templateCache.put('components/search/fullView/ngrs/noOfferFound/noOfferFound.html','<div class="main_tile" ng-if="!$ctrl.getShowForm()"><md-button prm-brief-internal-button-marker (click)="$ctrl.setShowForm()" ng-keydown="$event.stopPropagation()" class="neutralized-button arrow-link-button"><div class="tile"><div class="icon"><md-icon alt="" class="my_icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-no-offer"></prm-icon></md-icon></div><div class="button-content text"><span id="text_line_1"><span translate="nui.ngrs.no_offer.line_1"></span></span><div id="text_line_2"><div class="second_line"><span style="font-style:normal;font-weight:bold;" translate="nui.ngrs.no_offer.line_2"></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></div></div></div></div></md-button></div><div ng-if="$ctrl.getShowForm()"><prm-get-it-request [item]="::$ctrl.item" [isdigitaloffer]="false" [offerfound]="$ctrl._offerFound" [display]="$ctrl._display" [showmessagebar]="$ctrl._showMessageBar" [bestoffer]="$ctrl._bestOffer" [digitalbestoffer]="$ctrl._digitalBestOffer" [piclocs]="$ctrl._picLocs" [opendigitalform]="$ctrl._openDigitalForm" [openphysicalform]="$ctrl._openPhysicalForm" [isblankform]="true" [openblankform]="$ctrl._openBlankForm"></prm-get-it-request></div><md-content layout="column" ng-if="$ctrl.showSuceesBar()"><div ng-class="$ctrl.isRequestOK() ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span role="alert" translate="{{$ctrl.getResponseMessage()}}"></span></div></md-content><div class="main_tile"><md-button prm-brief-internal-button-marker (click)="$ctrl.getPhysicalResult()" ng-keydown="$event.stopPropagation()" class="neutralized-button arrow-link-button"><div class="tile"><div class="icon"><md-icon alt="" class="ng-scope my_icon md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-location"></prm-icon></md-icon></div><div class="button-content text"><span id="text_line_2"><span translate="nui.ngrs.physical.book.yourself"></span><div class="second_line"><span style="font-style:normal;font-weight:bold;" translate="nui.ngrs.physical.libraries.around"></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></div></span></div></div></md-button></div><prm-service-no-offer-found-after parent-ctrl="$ctrl"></prm-service-no-offer-found-after>');
$templateCache.put('components/search/fullView/ngrs/physicalDeliveryMoreOptionRow/physicalDeliveryMoreOptionRow.html','<table><tr><td class="space">{{ $ctrl.getDeliveryIn() }} <span translate="nui.ngrs.physical.numofdays"></span></td><td class="space">{{ $ctrl.getKeepFor() }} <span translate="nui.ngrs.physical.numofdays"></span></td><td class="space">{{ $ctrl.getRenewable() }}</td><td class="space"><md-button class="get_it_btn" (click)="$ctrl.getItRequest()"><span translate="nui.ngrs.physical.getitbtn"></span></md-button></td></tr></table><prm-physical-delivery-more-option-row-after parent-ctrl="$ctrl"></prm-physical-delivery-more-option-row-after>');
$templateCache.put('components/search/fullView/ngrs/physicalBestOffer/physicalBestOffer.html','<div class="main_tiles"><div class="icon"><prm-icon icon-type="svg" ng-if="!$ctrl.isDigitalOffer()" svg-icon-set="primo-ui" icon-definition="ngrs-delivery-box-tile"></prm-icon><prm-icon icon-type="svg" ng-if="$ctrl.isDigitalOffer()" svg-icon-set="primo-ui" icon-definition="ngrs-delivery-envelope-tile"></prm-icon></div><div class="offer_details"><div class="first_line"><span translate="nui.ngrs.physical.getcopy" ng-if="!$ctrl.isDigitalOffer()"></span> <span translate="nui.ngrs.digital.OnlyChapter" ng-if="$ctrl.isDigitalOffer() && $ctrl.getResourceType() == \'book\'"></span> <span translate="nui.ngrs.digital.getcopy" ng-if="$ctrl.isDigitalOffer() && $ctrl.getResourceType() != \'book\'"></span></div><div class="delivered_in"><span translate="nui.ngrs.physical.deliverdin"></span> <span class="supply_time">{{$ctrl.getSupplyTime()}}</span> <span class="days" translate="nui.ngrs.physical.numofdays" ng-if="!$ctrl.isDigitalOffer()"></span> <span class="days" translate="nui.ngrs.digital.hours" ng-if="$ctrl.isDigitalOffer()"></span></div><div ng-if="!$ctrl.isDigitalOffer()" class="keep_for"><span translate="nui.ngrs.physical.keepfor"></span>&nbsp;<span>{{$ctrl.getLoanPeriod()}}</span>&nbsp;<span translate="nui.ngrs.physical.keepfordays"></span></div><div ng-if="$ctrl.isDigitalOffer()" class="keep_for"><span translate="nui.ngrs.digital.byEmail"></span></div><md-button ng-class="$ctrl.isDigitalOffer() ? \'get_it_btn_digital\' : \'get_it_btn_physical\'" (click)="$ctrl.getItRequest()"><span translate="nui.ngrs.physical.getitbtn"></span></md-button></div></div><prm-service-physical-best-offer-after parent-ctrl="$ctrl"></prm-service-physical-best-offer-after>');
$templateCache.put('components/search/fullView/ngrs/physicalDeliveryOptions/physicalDeliveryOptions.html','<div class="main_tile"><md-button prm-brief-internal-button-marker (click)="$ctrl.getPhysicalResult()" ng-keydown="$event.stopPropagation()" class="neutralized-button arrow-link-button"><div class="tile"><div class="icon"><md-icon alt="" class="ng-scope my_icon md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="more-options"></prm-icon></md-icon></div><div class="button-content text"><span id="text_line"><span translate="nui.ngrs.more.delivery.options"></span><div class="second_line"><span style="font-style:normal;font-weight:bold;" translate="nui.ngrs.physical.delivery.click"></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></div></span></div></div></md-button></div><prm-physical-delivery-options-after parent-ctrl="$ctrl"></prm-physical-delivery-options-after>');
$templateCache.put('components/search/fullView/ngrs/progressBar/progress-bar.html','<div class="ProgressBar" layout="row" layout-align="space-between start"><prm-progress-checkbox class="ProgressBar-step" [status]="$ctrl.requested"></prm-progress-checkbox><prm-progress-checkbox class="ProgressBar-step" [status]="$ctrl.inProcess"></prm-progress-checkbox><prm-progress-checkbox class="ProgressBar-step" [status]="$ctrl.shipped" ng-if="!$ctrl.isDigitalRequest()"></prm-progress-checkbox><prm-progress-checkbox class="ProgressBar-step" [status]="$ctrl.received" ng-if="!$ctrl.isDigitalRequest()"></prm-progress-checkbox><prm-progress-checkbox class="ProgressBar-step" [status]="$ctrl.sent" ng-if="$ctrl.isDigitalRequest()"></prm-progress-checkbox></div><prm-progress-bar-after parent-ctrl="$ctrl"></prm-progress-bar-after>');
$templateCache.put('components/search/fullView/ngrs/physicalDeliveryOptionsTable/physicalDeliveryOptionsTable.html','<div id="main_tiles"><div class="table_frame"><md-button (click)="$ctrl.close()" class="close">x</md-button><div class="text_line_1"><span class="my_icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="more-options"></prm-icon></span>&nbsp <span class="title-item"><p translate="nui.ngrs.physical.delivery.options"></p></span></div><div class="inner_div"><div class="options_table"><table><tr><th><div class="tr_icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="delivered-in"></prm-icon></div><div translate="nui.ngrs.physical.delivery.in"></div></th><th><div class="tr_icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="clock"></prm-icon></div><div translate="nui.ngrs.physical.delivery.keep.for"></div></th><th><div div class="tr_icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="renewable"></prm-icon></div><div translate="nui.ngrs.physical.delivery.renewable"></div></th><th class="empty_th"></th></tr></table><prm-physical-delivery-more-option-row ng-repeat="policy in $ctrl.getPolicies()" [policy]="policy" [openphysicalform]="$ctrl.openphysicalform" [bestoffer]="$ctrl.bestoffer" [showmoredeliveryoptions]="$ctrl.showmoredeliveryoptions"></prm-physical-delivery-more-option-row></div><div class="filters"><div class="filter_results arrow_filter"><span id="filter_title" translate="nui.ngrs.filter.results.title"></span><md-button type="button" (click)="$ctrl.collapse()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up" ng-class="{\'rotate-180\':!$ctrl.isCollapse()}"></prm-icon></md-button></div><div ng-if="!$ctrl.isCollapse()"><div class="delivered_in"><span id="delivered_in" translate="nui.ngrs.filter.delivered.in"></span></div><div><prm-slider-field></prm-slider-field></div><div class="delivered_in"><span id="keep_for" translate="nui.ngrs.filter.keep.for"></span></div><div><prm-slider-field></prm-slider-field></div></div></div></div></div></div><prm-physical-delivery-options-table-after parent-ctrl="$ctrl"></prm-physical-delivery-options-table-after>');
$templateCache.put('components/search/fullView/ngrs/resultsButton/ngrs-results-button.html','<div class="margin-bottom-medium" aria-hidden="false" style=""><md-card class="default-card padded-container-medium zero-margin _md"><p class="zero-margin" ng-if="::$ctrl.isRapidoExpandRequired()"><span translate="nui.ngrs.didnt_find"></span>&nbsp;<md-button id="global-search" class="neutralized-button arrow-link-button rapido-expand-link horizontal-content-control button-as-link" ng-click="$ctrl.changeSearchScope()" aria-label="{{\'nui.ngrs.aria.expand_link\' | translate}}"><span translate="nui.ngrs.expand_link"></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button></p><p class="zero-margin" ng-if="::$ctrl.isBackToSearchRequired()"><md-button id="local-search" class="horizontal-content-control left-button neutralized-button arrow-link-button rapido-expand-link button-as-link" ng-click="$ctrl.navigateBackToSearchResults()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon><span translate="nui.ngrs.backtolocal.btn"></span></md-button></p></md-card></div><prm-ngrs-results-button-after parent-ctrl="$ctrl"></prm-ngrs-results-button-after>');
$templateCache.put('components/search/fullView/ngrs/sliderField/slider-field.html','<md-slider-container class="slider_cantainer" ng-init="range=10"><md-input-container><input class="input" type="number" ng-model="range"></md-input-container><md-slider min="0" max="100" ng-model="range"></md-slider></md-slider-container><prm-slider-field-after parent-ctrl="$ctrl"></prm-slider-field-after>');
$templateCache.put('components/search/searchResult/searchResultList/pageNavMenu/page-nav-menu.html','<div ng-if="($ctrl.numOfResults > $ctrl.PAGE_SIZE && $ctrl.mediaQueries.gtxs) || $ctrl.mode===\'browse\'" class="page-nav" ng-cloak><div layout="column" layout-align="center start" class="page-nav-inner"><div class="counter-nav counter-first" ng-show="$ctrl.currentPage >= 3" ng-if="!$ctrl.showComponents || $ctrl.showComponents.firstPage"><md-button class="md-fab md-mini" ng-if="$ctrl.currentPage >= 3" ng-click="$ctrl.jumpToPage(1, $event); $ctrl.updatePivInSafari()" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams(1)" ui-sref-opts="{reload: true, inherit:false}" href="" aria-label="{{\'nui.aria.results.firstPage\' | translate}}"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="link.title.results.first_page"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="double-chevron-up"></prm-icon></md-button></div><div class="counter-nav counter-prev" ng-show="$ctrl.showPrevButtonPredicate() || ($ctrl.currentPage && $ctrl.currentPage !== 1)"><md-button aria-label="{{::(\'link.title.results.prev\' | translate)}}" class="md-fab md-mini" ng-click="$ctrl.throwPrevResultsEvent(); $ctrl.jumpToPage($ctrl.currentPage-1, $event)" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams($ctrl.currentPage-1)" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="link.title.results.prev"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button></div><div class="counter-main" role="document" ng-if="!$ctrl.showComponents || $ctrl.showComponents.paging" ng-class="{\'counter-open\': $ctrl.isOpen}"><md-fab-speed-dial md-open="$ctrl.isOpen" md-direction="{{$ctrl.getPageWidgetDirection()}}" ng-class="$ctrl.selectedMode"><md-fab-trigger><md-button aria-label="{{\'nui.aria.pageSelector\' | translate}}" class="md-fab" aria-expanded="{{$ctrl.isOpen}}" ng-click="$ctrl.currentPageFocus()" ng-class="{\'md-mini\': $ctrl.mediaQueries.xs, \'md-is-open\': $ctrl.isOpen}"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.citation_trail.link.pages.tooltip"></span></md-tooltip><span ng-show="!$ctrl.isOpen" layout="column"><span class="counter-text">{{\'nui.paging.pagenumber\' | translate}}</span> <span class="counter-count">{{$ctrl.currentPage}}</span></span><span ng-show="$ctrl.isOpen"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></span></md-button></md-fab-trigger><md-fab-actions ng-cloak><div ng-repeat="i in $ctrl.getPageList() track by $index" tabindex="-1"><md-button tabindex="-1" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams(i)" ui-sref-opts="{reload: true, inherit:false}" href="" id="pageButton{{i}}" aria-label="{{::(\'nui.aria.paging.gotopage\' | translate: {number: i})}}" class="md-fab" ng-class="{\'current\': i === $ctrl.currentPage, \'md-mini\': $ctrl.mediaQueries.xs}" ng-click="$ctrl.jumpToPage(i, $event)">{{i}}</md-button></div></md-fab-actions></md-fab-speed-dial></div><div class="counter-nav counter-next" ng-show="$ctrl.showNextButtonPredicate() || ($ctrl.currentPage && $ctrl.currentPage != $ctrl.maxPage)"><md-button aria-label="{{$ctrl.getNextPageButtonText()}}" class="md-fab md-mini" ng-click="$ctrl.getNextPage($event)" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams($ctrl.currentPage+1)" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span>{{$ctrl.getNextPageButtonText()}}</span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down"></prm-icon></md-button></div></div></div><prm-page-nav-menu-after parent-ctrl="$ctrl"></prm-page-nav-menu-after>');
$templateCache.put('components/search/searchResult/savedQueriesList/savedQueryFilter/saved-query-filter.html','<span ng-repeat="pfilter in $ctrl.item.pfilter.split(\';\') track by $index"><span class="filter-item" ng-init="filterType=$ctrl.getPfilterMap(pfilter.split(\',\')[0]);"><i><span ng-if="!filterType.includes(\'DateRange\')" translate="search-advanced.label.{{filterType}}"></span><span ng-if="!filterType.includes(\'DateRange\')">:</span> <span ng-if="filterType.includes(\'DateRange\')" translate="{{$ctrl.getPrefixCodeAccordingToType(filterType)}}{{filterType}}"></span> &nbsp;</i><span ng-if="!filterType.includes(\'DateRange\')" ng-init="prefixCode=$ctrl.getPrefixCodeAccordingToType(filterType)" class="text-bold" ng-class="pfilter.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'" translate="{{prefixCode}}{{pfilter.split(\',\')[2]}}"></span><span ng-if="filterType.includes(\'DateRange\')" ng-init="prefixCode=$ctrl.getPrefixCodeAccordingToType(filterType)" class="text-bold" ng-class="pfilter.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'">{{$ctrl.convertDate(pfilter.split(\',\')[2])}} </span><span ng-if="$index!== ($ctrl.item.pfilter.split(\';\').length-1) || $ctrl.item.facet" class="text-bold">;</span> </span></span><span ng-repeat="facet in $ctrl.item.facet.split(\';\') track by $index"><span ng-if="facet.length > 0" class="filter-item"><i><span ng-if="::$ctrl.isPrimoVELocalFacet(facet)"><span translate-default="{{facet.split(\',\')[0]}}" translate="fulldisplay.{{$ctrl.facetNameTransfer(facet)}}" translate-attr-title="fulldisplay.{{facet.split(\',\')[0]}}"></span>:&nbsp; </span><span ng-if="::!$ctrl.isPrimoVELocalFacet(facet)"><span translate-default="{{facet.split(\',\')[0]}}" translate="facets.facet.facet_{{$ctrl.facetNameTransfer(facet)}}" translate-attr-title="facets.facet.facet_{{facet.split(\',\')[0]}}"></span>:&nbsp; </span></i><span class="text-bold" ng-class="facet.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'" translate="{{facet.split(\',\')[0]}}.{{$ctrl.decodeString(facet.split(\',\')[2])}}" translate-default="{{$ctrl.defTrans(facet)}}"></span> <span ng-if="$index!== ($ctrl.item.facet.split(\';\').length-1) && $ctrl.item.facet.split(\';\')[$index + 1].length > 0" class="text-bold">;</span></span></span><prm-saved-query-filter-after parent-ctrl="$ctrl"></prm-saved-query-filter-after>');
$templateCache.put('components/search/topbar/userArea/languageSelection/language-selection.html','<md-dialog-content><h2 class="light-text padding-medium padding-bottom-zero layout-align-start-center layout-row" layout="row" layout-align="start center"><prm-icon class="rotate-20" icon-type="svg" svg-icon-set="primo-ui" icon-definition="earth"></prm-icon><span translate="eshelf.menu.displayLang" class="margin-left-small"></span></h2><md-list role="list" layout="column" layout-align="start center"><md-list-item ng-repeat="language in ::$ctrl.languages" layout="row" value="{{::language}}" class="no-padding _md-button-wrap _md md-clickable" role="listitem" tabindex="-1"><div class="md-button md-no-style zero-padding"><button class="md-no-style md-button md-ink-ripple width-100" ng-click="$ctrl.changeLanguage(language) && $ctrl.closeAfterSelectLang()" aria-label="{{$ctrl.selectedLang(language)}}"></button><div class="md-list-item-inner"><p class="ng-binding" translate="mypref.language.option.{{::language}}"></p></div><div class="md-secondary-container"></div></div></md-list-item></md-list></md-dialog-content><md-dialog-actions layout="row" class="layout-row"><button class="md-button" ng-click="$ctrl.close()"><span translate="eshelf.menu.cancel"></span></button></md-dialog-actions><prm-language-selection-after parent-ctrl="$ctrl"></prm-language-selection-after>');
$templateCache.put('components/search/topbar/userArea/libraryCard/library-card-menu.html','<md-button ng-if="!$ctrl.isOvp()" aria-label="{{\'nui.aria.menu.settings\' | translate}}" class="button-with-icon zero-margin" (click)="$ctrl.goToUserSettings();"><prm-icon [icon-type]="::$ctrl.topBarIcons.library.type" [svg-icon-set]="::$ctrl.topBarIcons.library.iconSet" [icon-definition]="::$ctrl.topBarIcons.library.icon"></prm-icon><span translate="nui.details.header.ovl"></span></md-button><md-button aria-label="{{$ctrl.getLibraryCardAriaLabel() | translate}}" class="button-with-icon zero-margin" (click)="$ctrl.goToMyLibraryCard();" (keydown)="$ctrl.keydownSupport($event)"><prm-icon [icon-type]="::$ctrl.topBarIcons.library.type" [svg-icon-set]="::$ctrl.topBarIcons.library.iconSet" [icon-definition]="::$ctrl.topBarIcons.library.icon"></prm-icon><span translate="nui.menu.librarycard"></span></md-button><prm-library-card-menu-after parent-ctrl="$ctrl"></prm-library-card-menu-after>');
$templateCache.put('components/security/login/unionCatalogLogin/unionCatalogLoginInstitutionItem/union-catalog-login-institution-item.html','<div class="md-list-item-text" layout="column"><div layout="row"><h3 class="list-item-title md-display-3">{{$ctrl.institutionName}}</h3></div></div><prm-union-catalog-login-institution-item-after parent-ctrl="$ctrl"></prm-union-catalog-login-institution-item-after>');
$templateCache.put('components/search/fullView/getit/opac/copyright/copyright.html','<form id="copyright-form"><md-dialog-content layout="column" layout-padding layout-margin><h3 class="dialog-title light-text" translate="{{$ctrl.getTitleLabel()}}"></h3><span translate="{{$ctrl.getSubTitleLabel()}}"></span><p ng-if="!$ctrl.isSuprima()" translate="{{$ctrl.getMessageLabel()}}"></p><pre class="pre-copyrights" ng-if="$ctrl.isSuprima()" translate="{{$ctrl.getMessageLabel()}}">\r\n            </pre></md-dialog-content><md-dialog-actions class="md-actions"><md-button class="" (click)="$ctrl.cancel()"><span translate="{{$ctrl.getCancelBtnLabel()}}"></span></md-button><md-button class="button-confirm" ng-disabled="$ctrl.isDisabled()" ng-click="$ctrl.commit()"><span translate="{{$ctrl.getAgreeBtnLabel()}}"></span></md-button></md-dialog-actions></form><prm-copyright-after parent-ctrl="$ctrl"></prm-copyright-after>');
$templateCache.put('components/search/fullView/getit/opac/locationsFilter/alma-locations-filter.html','<div ng-if=" !$ctrl.isDisabled" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px;" layout-fill><span class="margin-right-small bold-text" translate="nui.aria.locationItems.filters"></span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.locationFilter" placeholder="{{\'fulldisplay.locations.locationFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.locationFilter"></md-option><md-option ng-repeat="option in $ctrl.locationsDropDownOptions" value="{{$ctrl.getLocationCode(option)}}"><span>{{$ctrl.getLocationName(option)}}</span></md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.volumeFilter" placeholder="{{\'fulldisplay.locations.volumeFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.volumeFilter"></md-option><md-option ng-repeat="option in $ctrl.volumeDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.yearFilter" placeholder="{{\'fulldisplay.locations.yearFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.yearFilter"></md-option><md-option ng-repeat="option in $ctrl.yearDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.descriptionFilter" placeholder="{{\'fulldisplay.locations.descriptionFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.descriptionFilter"></md-option><md-option ng-repeat="option in $ctrl.descriptionDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button ng-if="$ctrl.changed" class="button-as-link button-with-icon filter-align margin-zero" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters(true)"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}"></prm-icon><span translate="nui.locations.filter.clear"></span></md-button></div>');
$templateCache.put('components/search/fullView/getit/opac/locationsFilter/locations-filter.html','<div ng-if="!$ctrl.isAfterFiltering && !$ctrl.isDisabled" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px;" layout-fill><span class="margin-right-small" translate="nui.aria.locationItems.filters"></span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.locationsDropDownOptions.length > 1" ng-model="$ctrl.locationFilter" placeholder="{{\'fulldisplay.locations.locationFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.locationFilter"></md-option><md-option ng-repeat="option in $ctrl.locationsDropDownOptions" value="{{$ctrl.getLocationCode(option)}}"><span>{{$ctrl.getLocationName(option)}}</span></md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.volumeDropDownOptions.length > 1" ng-model="$ctrl.volumeFilter" placeholder="{{\'fulldisplay.locations.volumeFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.volumeFilter"></md-option><md-option ng-repeat="option in $ctrl.volumeDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.yearDropDownOptions.length > 1" ng-model="$ctrl.yearFilter" placeholder="{{\'fulldisplay.locations.yearFilter\' | translate}}" class="borderless"><md-option value="All" translate="fulldisplay.locations.yearFilter"></md-option><md-option ng-repeat="option in $ctrl.yearDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button ng-if="$ctrl.changed" class="button-as-link" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.throwFilterEvent()"><span translate="nui.locations.filter.apply"></span></md-button><md-button ng-if="$ctrl.changed" class="button-as-link button-with-icon filter-align" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters()"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}"></prm-icon><span translate="nui.locations.filter.clear"></span></md-button></div><div ng-if="$ctrl.isAfterFiltering" class="bar alert-bar" layout="row" layout-align="start center" style="margin-bottom: 1em;"><span ng-bind-html="$ctrl.filtersMsg"></span><md-button class="cancel-align button-as-link button-with-icon" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters()"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}"></prm-icon><span translate="nui.locations.filter.clear" class="text-trim-ellipsis"></span></md-button></div>');
$templateCache.put('components/search/fullView/getit/opac/request/request-services-ovl.html','<div ng-if="!$ctrl.hasLocations() && $ctrl.requestLink && $ctrl.requestLink !== \'ovp\'" layout="row" layout-align="start center" layout-fill><h3 class="block-label medium-uppercase-bold zero-margin"><span translate="nui.request.request"></span></h3><md-content layout="row" layout-fill class="padded-container"><a class="arrow-link" href="{{$ctrl.requestLink}}" target="_blank" layout="row"><span translate="nui.request.link"></span><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></md-content></div><prm-requests-services-ovl-after parent-ctrl="$ctrl"></prm-requests-services-ovl-after>');
$templateCache.put('components/search/fullView/getit/opac/request/request-services.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.servicesListIsLoading"></prm-spinner><div ng-if="$ctrl.services.serviceinfo && $ctrl.services.serviceinfo.length > 0 && !$ctrl.ngrsEnabledAndRSLinkIsOnlyService()"><div class="labeled-block" layout="row"><h3 class="section-title"><span translate="nui.request.request"></span></h3><div flex class="block-body links-block" layout="row" layout-wrap><div class="links-block-item separated-block-item" ng-repeat="service in $ctrl.filteredServices()"><prm-service-button [service]="::service" (change-tab-event)="::$ctrl.changeTab($event)" [parent-tab]="::$ctrl.tabId" [request-parameters]="$ctrl.getServiceAdditionalParams(service)" method="GET"></prm-service-button></div></div></div><md-divider class="inner-divider"></md-divider></div><div ng-if="$ctrl.isLoggedIn() && !$ctrl.servicesListIsLoading && (!$ctrl.services.serviceinfo || $ctrl.services.serviceinfo.length == 0)"><span translate="nui.request.norequests"></span></div><prm-alert-bar ng-if="!$ctrl.isLoggedIn() && !$ctrl.isLoggedInIDP() && !$ctrl.memberInst" [alert-object]="$ctrl.reqAlert" class="margin-bottom-small display-block"></prm-alert-bar><prm-request-services-after parent-ctrl="$ctrl"></prm-request-services-after>');
$templateCache.put('components/search/fullView/getit/opac/request/request.html','<div class="content-header"><h3 class="light-text md-title zero-margin-top">{{$ctrl.requestHeader | translate}}</h3></div><div layout="row" class="form-focus service-form" layout-margin><div class="service-form-loader" ng-if="requestFormLoader"><prm-spinner class="dark-on-light" ng-if="!$ctrl.services.serviceinfo"></prm-spinner></div><div ng-if="$ctrl.formReadonly && $ctrl.formReadonly.length>0" class="service-form-static-panel zero-margin" flex layout="column" layout-padding><form name="requestForm" (submit)="$ctrl.submit()" novalidate class="zero-padding"><div flex layout="row" layout-align="center center"><div class="layout-full-width" layout="column" layout-align="start" layout-padding><div ng-repeat="field in $ctrl.formReadonly" class="md-input-container-dummy dummy-input-has-value" layout="column"><prm-form-field [field]="field" [data]="$ctrl.formData" form-name="requestForm"></prm-form-field></div></div></div><div ng-if="!$ctrl.displayForm" layout="row" layout-align="end" class="layout-full-width"><md-button class="button-with-icon button-confirm" type="submit"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{$ctrl.submitLabel | translate}}</span></md-button></div></form></div><div ng-if="$ctrl.displayForm" class="service-form-dynamic-panel zero-margin" flex layout="column" layout-padding><form name="requestForm" (submit)="requestForm.$valid && $ctrl.submit()" novalidate><div flex layout="row" layout-align="center center"><div layout="column" layout-align="start"><div aria-live="polite" ng-if="$ctrl.isCheckAvailabilityEnabledForForm() && $ctrl.availabilityCheckRan"><div ng-if="$ctrl.itemAvailabilityCheckInProgress" layout="row"><span translate="nui.request.checkAvailability.inProgress"></span><prm-spinner class="dark-on-light inline-loader"></prm-spinner></div><div ng-if="!$ctrl.itemAvailabilityCheckInProgress"><span class="item-available" ng-if="$ctrl.itemAvailability === true" translate="nui.request.checkAvailability.available"></span> <span class="item-not-available" ng-if="$ctrl.itemAvailability === false" translate="nui.request.checkAvailability.notAvailable"></span> <span ng-if="$ctrl.itemAvailability === undefined" translate="nui.request.checkAvailability.checkFailed"></span></div></div><prm-form-field ng-repeat="field in $ctrl.form" ng-if="field.uiType !== \'hidden\'" [field]="field" [data]="$ctrl.formData" [form]="::this.requestForm" class="service-form-item"></prm-form-field></div></div><div layout="row" layout-align="end" ng-if="!$ctrl.detectMobile()"><md-button class="button-with-icon button-secondary" (click)="$ctrl.resetForm()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="reload"></prm-icon><span translate="nui.reset"></span></md-button><span flex></span><md-button ng-if="$ctrl.isCheckAvailabilityEnabledForForm()" ng-disabled="$ctrl.isCheckAvailabilityButtonDisabled()" class="" (click)="$ctrl.checkAvailability()"><span translate="nui.request.checkAvailability.checkButtonText"></span></md-button><md-button class="button-with-icon button-confirm" type="submit" ng-disabled="$ctrl.formSubmited"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{$ctrl.submitLabel | translate}}</span></md-button></div><div layout="column" layout-align="end" ng-if="$ctrl.detectMobile()"><md-button class="button-with-icon button-secondary" (click)="$ctrl.resetForm()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="reload"></prm-icon><span translate="nui.reset"></span></md-button><span flex></span><md-button ng-if="$ctrl.isCheckAvailabilityEnabledForForm()" ng-disabled="$ctrl.isCheckAvailabilityButtonDisabled()" class="" (click)="$ctrl.checkAvailability()"><span translate="nui.request.checkAvailability.checkButtonText"></span></md-button><md-button class="button-with-icon button-confirm" type="submit" ng-disabled="$ctrl.formSubmited"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span>{{$ctrl.submitLabel | translate}}</span></md-button></div></form></div></div><prm-request-after parent-ctrl="$ctrl"></prm-request-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/demo.locations.html','<div layout="column" layout-fill><div ng-if="userSignedIn" class="labeled-block" ng-class="{\'collapsed\':$root.requestOptionsHide}" layout="row" layout-fill ng-mouseenter="unhideRequestOptions($root.requestOptionsHide)" ng-mouseleave="cancelUnhideRequestOptions()"><h3 class="block-label md-title light-text zero-margin">Request:</h3><div flex class="block-body links-block" layout="row" layout-wrap ng-include="\'./modules/requestOptions.html\'"></div></div><div ng-if="!userSignedIn" class="bar alert-bar" layout="row" layout-align="start center" layout-fill><span flex>Please <span class="bold-text">sign in</span> to see request options and to place requests.</span><md-button class="button-as-link button-with-icon" aria-label="Sign in button" style="right: -.5em" (click)="clearLocationFilters = true; $root.userSignedIn = true"><prm-icon><md-icon md-svg-icon="./images/login.svg" aria-label="Login Icon"></md-icon></prm-icon><span>Sign in</span></md-button></div></div><md-divider style="margin-top: 1em; margin-bottom: .5em; opacity: .5;"></md-divider><md-tabs md-dynamic-height md-selected="selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Main" md-on-select="requestsLimit(15); showRequestOptions();"><md-content class="overflow-hidden"><div layout="row" layout-align="space-between center"><h3 class="md-title light-text zero-margin animate-horizontal-swap">Locations:</h3><md-button class="md-icon-button md-mini" aria-label="Filter button" (click)="locationsFilterVisible = !locationsFilterVisible"><md-tooltip>Filter locations</md-tooltip><prm-icon ng-if="!locationsFilterVisible"><md-icon md-svg-icon="./images/filter-outline.svg" aria-label="Filter Icon"></md-icon></prm-icon><prm-icon ng-if="locationsFilterVisible"><md-icon md-svg-icon="./images/filter-remove.svg" aria-label="Filter Icon"></md-icon></prm-icon></md-button></div><div ng-if="locationsFilterVisible" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px;" layout-fill><span class="margin-right-small">Filters:</span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="locationFilter" placeholder="Pickup location" class="borderless"><md-option ng-repeat="option in pickupLocations" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="volumeFilter" placeholder="Volume" class="borderless"><md-option ng-repeat="option in volumes" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-model="issueFilter" placeholder="Issue" class="borderless"><md-option ng-repeat="option in issues" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button class="button-as-link button-with-icon" aria-label="Filter button" style="right: -.5em" (click)="clearLocationsFilter()"><prm-icon><md-icon md-svg-icon="./images/close.svg" aria-label="Clear Icon"></md-icon></prm-icon><span>Clear filters</span></md-button></div><div ng-repeat="inst in locations"><h4 class="md-title zero-margin">{{inst.institution}}</h4><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="ven in inst.venues  | limitTo:2" (click)="selectedVenue(ven); goToLocation(1); $root.locationNoItems = false;"><div class="md-list-item-text"><h3>{{ven.name}}</h3><p><span class="bold-text" style="color: {{ven.statusColor}}">{{ven.status}}</span>, <span>{{ven.category}}; {{ven.code}};</span></p></div><md-icon md-svg-icon="./images/chevron-right.svg"></md-icon></md-list-item><md-list-item class="md-2-line separate-list-items narrow-list-item" (click)="goToNoItems()"><div class="md-list-item-text"><h3>WSU Main Library</h3><p><span class="bold-text" style="color: #C59655">May be available</span>, <span>Main Collection; (TK5101.A1 J114 ).</span></p></div><md-icon md-svg-icon="./images/chevron-right.svg"></md-icon></md-list-item></md-list></div></md-content></md-tab><md-tab label="two" md-on-select="showBackButton(); hideRequestOptions()"><div class="tab-header"><md-button ng-show="backButtonVisible" (click)="backToLocations();" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button></div><md-content class="overflow-hidden"><div class="tab-content-header" layout="row" layout-align="space-between end"><div class="layout-column" ng-if="!locationNoItems"><h4 class="md-title title">{{$root.selectedVenue.name}}</h4><p ng-if="$root.selectedVenue.status"><span class="bold-text" style="color: {{$root.selectedVenue.statusColor}}">{{$root.selectedVenue.status}}</span>, {{$root.selectedVenue.category}}, {{$root.selectedVenue.code}}</p><div ng-if="$root.selectedVenue.summaryShort" class="weak-text"><span>Item summary: {{$root.selectedVenue.summaryShort}}...</span> <span class="text-link" (click)="summaryLinesVisible = !summaryLinesVisible">expand</span><div ng-show="summaryLinesVisible" layout="column"><span ng-repeat="line in $root.selectedVenue.summaryLines">{{line}}</span></div></div></div><div class="layout-column" ng-if="locationNoItems"><h4 class="md-title title">WSU Main Library</h4><p><span class="bold-text" style="color: #C59655">May be available</span>, Main Collection, (TK5101.A1 J114 )</p><div ng-if="$root.selectedVenue.summaryShort" class="weak-text"><span>Item summary: v. 1, no. 1 (2004:enero:01)...</span> <span class="text-link" (click)="summaryLinesVisible = !summaryLinesVisible">expand</span><div ng-show="summaryLinesVisible" layout="column"><span ng-repeat="line in $root.selectedVenue.summaryLines">jasdjsajdsajdas</span></div></div></div><div class="" layout="row" ng-hide="locationNoItems" layout-align="end center"><md-button class="md-icon-button md-mini" aria-label="Filter button" (click)="locationsFilterVisible = !locationsFilterVisible"><md-tooltip>Filter locations</md-tooltip><prm-icon ng-if="!locationsFilterVisible"><md-icon md-svg-icon="./images/filter-outline.svg" aria-label="Filter Icon"></md-icon></prm-icon><prm-icon ng-if="locationsFilterVisible"><md-icon md-svg-icon="./images/filter-remove.svg" aria-label="Filter Icon"></md-icon></prm-icon></md-button><div class="vertical-divider transparent-divider"></div><md-button class="md-icon-button header-action expand-collapse-button" (click)="locationItemExpand = !locationItemExpand"><md-tooltip md-autohide="true"><span ng-if="locationItemExpand">Collapse</span><span ng-if="!locationItemExpand">Expand</span> all items</md-tooltip><span ng-if="!locationItemExpand"><md-icon md-svg-icon="./images/expand-all.svg" aria-label="expand all Icon"></md-icon></span><span ng-if="locationItemExpand"><md-icon md-svg-icon="./images/collapse-all.svg" aria-label="expand all Icon"></md-icon></span></md-button></div></div><div ng-if="locationsFilterVisible" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px;" layout-fill><span class="margin-right-small">Filters:</span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="volumeFilter" placeholder="Volume" class="borderless"><md-option ng-repeat="option in volumes" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-model="issueFilter" placeholder="Issue" class="borderless"><md-option ng-repeat="option in issues" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button class="button-as-link button-with-icon" aria-label="Filter button" style="right: -.5em" (click)="clearLocationsFilter()"><prm-icon><md-icon md-svg-icon="./images/close.svg" aria-label="Clear Icon"></md-icon></prm-icon><span>Clear filters</span></md-button></div><div ng-if="locationNoItems"><div class="bar alert-bar" layout="row" layout-align="start center" style="margin-bottom: 1em;"><span flex ng-if="userSignedIn">We couldn\'t find any items to display for this location. You are welcome to place a request via one of the options above.</span> <span flex ng-if="!userSignedIn">We couldn\'t find any items to display for this location. Please sign in above to see the available request options.</span></div></div><md-list layout="column" ng-hide="locationNoItems"><md-list-item ng-repeat="loc in $root.selectedVenue.locations | limitTo:limitLocationItemsCount" class="md-3-line separate-list-items has-expand in-element-dialog-parent" ng-class="locationItemExpand?\'item-expanded\':\'\'"><div class="item-summary in-element-dialog-context" layout-fill><div class="md-list-item-text" layout="row"><div flex="30"><h3 ng-if="loc.description">{{loc.description}}, {{loc.itemType}}</h3><h4 ng-if="loc.call">{{loc.call}}</h4></div><div flex><p ng-if="loc.status">{{loc.status}}, {{loc.itemStatus}}, no. in queue: {{loc.itemQueue}}</p><div ng-hide="!locationItemExpand"><p ng-if="loc.itemType">Item type: {{loc.itemType}}</p><p ng-if="loc.barcode">Barcode: {{loc.barcode}}</p></div></div><div layout="column" layout-align="center end"><div layout="row"><md-button ng-if="userSignedIn" class="item-action md-secondary" ng-repeat="option in loc.options" (click)="goToLocationRequest(option, loc, $root.selectedVenue); $root.comingFromLocations = true; $root.preselectedRequestDetails = true; $root.hasPreItems = true;"><span>{{option}}</span></md-button></div></div></div></div><md-button class="md-secondary item-expand-button" aria-label="view" (click)="locationItemExpand = !locationItemExpand"><md-icon md-svg-icon="./images/chevron-down.svg" ng-class="locationItemExpand?\'h-flipped-icon\':\'\'"></md-icon></md-button></md-list-item><md-button ng-if="!locationNoItems && $root.selectedVenue.locations.length > $root.limitLocationItemsCount" class="show-more-button zero-margin" (click)="$root.limitLocationItemsCount = $root.selectedVenue.locations.length" ng-hide="$root.limitLocationItemsCount == $root.selectedVenue.locations.length"><span>Show all items ({{$root.selectedVenue.locations.length}})</span></md-button></md-list></md-content></md-tab><md-tab label="Request Form" md-on-select="showBackButton(); checkForRequestOptions()"><md-button ng-if="!locationRequest" ng-show="backButtonVisible" (click)="backToLocations()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button><md-button ng-if="locationRequest" ng-show="backButtonVisible" (click)="backToItems()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to items</span></md-button><md-content layout="column"><h3 class="light-text md-title zero-margin-top">{{requestType}} request</h3><div layout="row" class="form-focus service-form" layout-margin><div class="service-form-loader" ng-if="requestFormLoader"><div class="loader"><div class="diamond"></div><div class="diamond"></div><div class="diamond"></div></div></div><div class="service-form-static-panel" layout="column" layout-padding layout-align="start start" ng-if="hasPreItems"><div layout="column" layout-align="start" layout-padding><div ng-repeat="detail in PreDetails" class="md-input-container-dummy dummy-input-has-value" layout="column" ng-show="detail.type == requestType"><div class="label-dummy" flex-order="1">{{detail.label}}</div><div class="md-select-dummy" layout="row" flex-order="2"><div class="md-select-value-dummy md-select-value" layout="row"><span>{{detail.text}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div></div></div></div><div class="service-form-dynamic-panel" flex layout="column" layout-padding><div ng-include="\'./modules/request-form-dropdowns.html\'" flex layout="row" layout-align="center center" style="padding-left: 1.5em;"></div><div layout="row" layout-align="end" layout-fill><md-button class="button-with-icon button-secondary" (click)="resetRequestForm()" ng-if="requestFormAltered"><prm-icon><md-icon md-svg-icon="./images/replay.svg"></md-icon></prm-icon><span>Reset form</span></md-button><span flex></span><md-button class="button-confirm" (click)="doSendRequest(requestType, $event)">Send request</md-button></div></div></div></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><md-button ng-if="$root.requestReplySuccess" ng-show="backButtonVisible" (click)="backToLocations()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button><md-button ng-if="!$root.requestReplySuccess" ng-show="backButtonVisible" (click)="backToRequestForm()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to request form</span></md-button><md-content layout="column"><div ng-if="$root.requestReplySuccess" class="bar success-bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>Your request was successfully placed</span></div><div ng-if="!$root.requestReplySuccess" class="bar error-bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>Patron has already placed a photocopy request for this item</span></div></md-content></md-tab></md-tabs>');
$templateCache.put('components/search/fullView/getit/opac/locations/location-items.html','<h3 class="section-title" style="margin-bottom: .75em !important;"><span translate="nui.aria.locationItems.locationItems"></span></h3><div layout="row" layout-align="space-between center"><md-button class="button-link link-alt-color zero-margin" ng-if="$ctrl.showRegisterUser()" (click)="$ctrl.reloadWithRegisterUser()" aria-label="{{\'fulldisplay.otherLocations.register\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.otherLocations.register"></span></md-button></div><div class="tab-content-header margin-bottom-small margin-left-medium" layout="row" layout-align="space-between end"><div layout="column" flex><h4 ng-if="$ctrl.currLoc.location && $ctrl.getLibraryName($ctrl.currLoc.location)" class="md-title ng-binding zero-margin">{{$ctrl.currLoc.location.librarycodeTranslation}}</h4><h5 ng-if="$ctrl.currLoc.location.relatedTitle != null && $ctrl.currLoc.location.relatedTitle !== \'\'" class="related-title"><prm-icon icon-type="{{$ctrl.opacLocations.relatedArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.relatedArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.relatedArrow.icon}}" class="related-title-icon h-flipped"></prm-icon><span translate="nui.location.related_title" class="related-title-label"></span> <span class="related-title-name">{{$ctrl.currLoc.location.relatedTitle}}</span></h5><p ng-if="$ctrl.currLoc.location.availabilityStatus" class="ng-binding ng-scope zero-margin"><span class="availability-status {{$ctrl.currLoc.location.availabilityStatus}}" translate="fulldisplay.availabilty.{{$ctrl.currLoc.location.availabilityStatus}}"></span> <span ng-if="$ctrl.currLoc.location.subLocation">,</span> <span ng-if="$ctrl.currLoc.location && $ctrl.currLoc.location.subLocation && $ctrl.getSubLibraryName($ctrl.currLoc.location)" ng-bind-html="$ctrl.currLoc.location.collectionTranslation"></span> <span ng-if="$ctrl.currLoc.location.callNumber"></span> <span ng-if="$ctrl.currLoc.location.callNumber" dir="auto">{{$ctrl.currLoc.location.callNumber}}</span></p><p ng-if="$ctrl.currLoc.location.availabilityStatement" class="ng-binding ng-scope zero-margin">{{$ctrl.currLoc.location.availabilityStatement}}</p><div ng-if="!$ctrl.currLoc.locationNoItems"><div ng-if="!$ctrl.summaryLinesVisible" layout="row" layout-align="start start"><div layout="column" style="max-width: calc(100% - 70px);"><div class="weak-text text-trim-ellipsis" ng-repeat="line in $ctrl.currLoc.summaryHoldings.baseSummaryShort track by $index" layout="row"><div translate="{{line.key}}" class="margin-right-small"></div><span class="summary-brief" class="" layout="row"><a ng-if="line.value.startsWith(\'http:\') || line.value.startsWith(\'https:\')" href="{{line.value}}">{{line.value}}</a> <span title="{{line.value}}" ng-if="!line.value.startsWith(\'http:\') && !line.value.startsWith(\'https:\')">{{line.value}}</span></span></div></div><div><md-button class="button-as-link link-alt-color" (click)="$ctrl.summaryLinesVisible = true" ng-if="!$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" aria-label="{{\'nui.locations.expand\' | translate}}"><span translate="nui.locations.expand" class="bold-text"></span></md-button></div></div><div ng-if="$ctrl.summaryLinesVisible" layout="row" layout-align="start start" class="display-block"><div layout="column"><div ng-repeat="line in $ctrl.currLoc.summaryHoldings.allLines track by $index"><div class="margin-top-small"><span class="bold-text" translate="{{line.key}}"></span></div><div ng-repeat="lineItem in line.value track by $index" class="padding-left-medium"><span><a ng-if="lineItem.startsWith(\'http:\') || lineItem.startsWith(\'https:\')" href="{{lineItem}}">{{lineItem}}</a> <span ng-if="!lineItem.startsWith(\'http:\') && !lineItem.startsWith(\'https:\')" ng-bind-html="lineItem">{{lineItem}}</span></span></div></div></div><md-button class="button-as-link link-alt-color" (click)="$ctrl.summaryLinesVisible = false" ng-if="$ctrl.summaryLinesVisible && \t$ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData"><span translate="nui.locations.collapse" class="bold-text"></span></md-button></div></div><div ng-if="$ctrl.currLoc.locationNoItems" flex layout="row"><div flex="70"><span class="weak-text text-trim-ellipsis" ng-if="$ctrl.summaryLinesVisible" ng-repeat="line in $ctrl.currLoc.summaryHoldings.baseSummaryShort track by $index"><div><div translate="{{line.key}}"></div><a class="text-trim-ellipsis" ng-if="line.value.startsWith(\'http:\') || line.value.startsWith(\'https:\')" href="{{line.value}}">{{line.value}}</a> <span class="text-trim-ellipsis" ng-if="!line.value.startsWith(\'http:\') && !line.value.startsWith(\'https:\')">{{line.value}}<md-tooltip>{{line.value}}</md-tooltip></span></div></span><div ng-if="!$ctrl.summaryLinesVisible"><div ng-repeat="line in $ctrl.currLoc.summaryHoldings.allLines track by $index"><div class="margin-top-small"><span class="bold-text" translate="{{line.key}}"></span></div><div ng-repeat="lineItem in line.value track by $index" class="padding-left-medium"><span><a ng-if="lineItem.startsWith(\'http:\') || lineItem.startsWith(\'https:\')" href="{{lineItem}}">{{lineItem}}</a> <span ng-if="!lineItem.startsWith(\'http:\') && !lineItem.startsWith(\'https:\')" ng-bind-html="lineItem"></span></span></div></div></div></div><div flex><span class="text-link" (click)="$ctrl.summaryLinesVisible = !$ctrl.summaryLinesVisible"><span ng-if="!$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" translate="nui.locations.collapse"></span> <span ng-if="$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" translate="nui.locations.expand"></span></span></div></div></div><div layout="row"><prm-stack-map ng-if="$ctrl.isSuprima() && $ctrl.currLoc.location.stackMapUrl" [map-url]="$ctrl.currLoc.location.stackMapUrl"></prm-stack-map></div><div layout="row" ng-hide="$ctrl.currLoc.locationNoItems" layout-align="end center"><md-button class="md-icon-button md-mini" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" ng-if="($ctrl.isFilter || $ctrl.isFiltered) && $ctrl.isAnyFilterFilled()" (click)="$ctrl.filterClick();"><md-tooltip><span ng-if="$ctrl.isLocationsFilterVisible" translate="nui.aria.locationItems.filterOut"></span> <span ng-if="!$ctrl.isLocationsFilterVisible" translate="nui.aria.locationItems.filter"></span></md-tooltip><prm-icon ng-if="!$ctrl.isLocationsFilterVisible" icon-type="{{$ctrl.opacLocations.filter.type}}" svg-icon-set="{{$ctrl.opacLocations.filter.iconSet}}" icon-definition="{{$ctrl.opacLocations.filter.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isLocationsFilterVisible" icon-type="{{$ctrl.opacLocations.filterOut.type}}" svg-icon-set="{{$ctrl.opacLocations.filterOut.iconSet}}" icon-definition="{{$ctrl.opacLocations.filterOut.icon}}"></prm-icon></md-button><div class="vertical-divider transparent-divider"></div><md-button aria-label="{{\'nui.locItems.collapse\' | translate}}" class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleExpandAll($ctrl.currLoc)"><md-tooltip md-autohide="true"><span ng-if="$ctrl.currLoc.isExpandAll" translate="nui.locItems.collapse"></span> <span ng-if="!$ctrl.currLoc.isExpandAll" translate="nui.locItems.expand"></span></md-tooltip><span ng-if="!$ctrl.currLoc.isExpandAll"><prm-icon icon-type="{{$ctrl.opacLocations.expandAllIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.expandAllIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.expandAllIcon.icon}}"></prm-icon></span><span ng-if="$ctrl.currLoc.isExpandAll"><prm-icon icon-type="{{$ctrl.opacLocations.collapseAllIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.collapseAllIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.collapseAllIcon.icon}}"></prm-icon></span></md-button></div></div><prm-locations-filter ng-if="$ctrl.isLocationsFilterVisible && $ctrl.isAnyFilterFilled()" [item]="$ctrl.item" [is-disabled]="$ctrl.isItemsFilterDisable($ctrl.item)" (filter-event)="$ctrl.handleFilterEvent($event)" [is-after-filtering]="$ctrl.isFiltered" [drop-down-options]="$ctrl.dropDownOptions" [filters]="$ctrl.filters" (clear-filters-event)="$ctrl.clearFilters(true)"></prm-locations-filter><div ng-if="$ctrl.currLoc.locationNoItems" class="padding-left-medium"><div class="bar alert-bar margin-bottom-medium" layout="row" layout-align="start center"><span flex ng-if="$ctrl.isLoggedIn();" translate="nui.locations.noitems.signin"></span> <span flex ng-if="!$ctrl.isLoggedIn();" translate="nui.locations.noitems.guest"></span></div></div><md-list layout="column" ng-hide="$ctrl.currLoc.locationNoItems" class="separate-list-items margin-left-medium"><md-list-item ng-repeat="item in $ctrl.currLoc.items track by $index" class="md-2-line has-expand" ng-if="!$ctrl.currLoc.isMore || !$last" ng-class="item.isExpanded?\'item-expanded\':\'\'" (click)="item.isExpanded = !item.isExpanded"><div layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><div flex-xs="100"><div ng-if="item.itemFields[0]"><h3><span translate="nui.item.brief.1"></span> {{item.itemFields[0]}}</h3><md-tooltip>{{item.itemFields[0]}}</md-tooltip></div><div ng-if="item.itemFields[1]"><h4 class="location-item"><span translate="nui.item.brief.2"></span> {{item.itemFields[1]}}</h4><md-tooltip>{{item.itemFields[1]}}</md-tooltip></div></div><div class="weak-text" flex flex-xs="100"><div ng-if="item.itemFields[2]"><p><span translate="nui.item.brief.3"></span> {{item.itemFields[2]}}</p><md-tooltip>{{item.itemFields[2]}}</md-tooltip></div><div ng-if="item.itemFields[3]"><p><span translate="nui.item.brief.4"></span> {{item.itemFields[3]}}</p><md-tooltip>{{item.itemFields[3]}}</md-tooltip></div><div ng-if="item.isExpanded"><div ng-repeat="full in item.fullItemFields track by $index"><p>{{full}}</p><md-tooltip>{{item.fullItemValues[$index]}}</md-tooltip></div></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30"><div ng-if="!$ctrl.currLoc.location.isValidUser"><span translate="item.request.not_available"></span></div><div ng-if="$ctrl.currLoc.location.isValidUser && item.listOfServices.length === 0"><span translate="item.request.blocked"></span></div><div layout="row" layout-align="center center" ng-repeat="service in item.listOfServices track by $index"><prm-service-button ng-if="$ctrl.allowService() && (service.enableWithoutLogin  || $ctrl.isLoggedIn())" [service]="service" (change-tab-event)="::$ctrl.onChangeTabEvent($event)" [parent-tab]="::$ctrl.tabId" [request-parameters]="$ctrl.getServiceAdditionalParams(item, service)" method="GET"></prm-service-button><div class="skewed-divider" ng-if="!$last"></div></div></div></div><div class="align-self-stretch"><md-button class="md-secondary item-expand-button" aria-label="{{\'nui.aria.locationItems.expandcollapse\' | translate}}"><prm-icon ng-class="{\'rotate-180\': item.isExpanded}" icon-type="{{$ctrl.opacLocations.expandIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.expandIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.expandIcon.icon}}"></prm-icon></md-button></div></div><prm-location-item-after parent-ctrl="$ctrl"></prm-location-item-after></md-list-item><prm-spinner ng-if="$ctrl.inProgress" class="inline-loader half-transparent no-text" layout="row" layout-align="center center"></prm-spinner></md-list><md-button ng-if="!$ctrl.currLoc.locationNoItems && $ctrl.currLoc.isMore" class="button-link link-alt-color zero-margin" (click)="$ctrl.getlocationsItems($ctrl.currLoc, true);" ng-hide="!$ctrl.currLoc.isMore" aria-label="{{\'fulldisplay.locations.showmore\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.locations.showmore"></span></md-button><prm-location-items-after parent-ctrl="$ctrl"></prm-location-items-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/locations.html','<div layout="row" layout-align="space-between center"><h3 class="section-title"><span translate="nui.locations.header"></span></h3><p ng-if="$ctrl.locationsPrefilterActive"><span translate="nui.locations.prefilter.filtered"></span><span> </span><span translate="nui.locations.prefilter.unfilter" tabindex="0" class="disable-prefilter-button" ng-click="$ctrl.disableLocationsPrefilter()"></span></p><md-button class="md-icon-button md-mini" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" ng-if="$ctrl.displayFiltersButton && !$ctrl.locationsPrefilterActive" (click)="$ctrl.filterClick()"><md-tooltip><span translate=""></span> <span ng-if="$ctrl.isLocationsFilterVisible" translate="nui.aria.location.filterOut"></span> <span ng-if="!$ctrl.isLocationsFilterVisible" translate="nui.aria.location.filter"></span></md-tooltip><prm-icon ng-if="!$ctrl.isLocationsFilterVisible" icon-type="{{$ctrl.opacLocations.filter.type}}" svg-icon-set="{{$ctrl.opacLocations.filter.iconSet}}" icon-definition="{{$ctrl.opacLocations.filter.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isLocationsFilterVisible" icon-type="{{$ctrl.opacLocations.filterOut.type}}" svg-icon-set="{{$ctrl.opacLocations.filterOut.iconSet}}" icon-definition="{{$ctrl.opacLocations.filterOut.icon}}"></prm-icon></md-button></div><prm-locations-filter ng-if="$ctrl.isLocationsFilterVisible" (clear-filters-event)="$ctrl.clearFilters(true)" (filter-event)="$ctrl.handleFilterEvent($event)" [is-after-filtering]="$ctrl.filtered" [drop-down-options]="$ctrl.dropDownOptions" [item]="$ctrl.item" [filters]="$ctrl.filters"></prm-locations-filter><div layout="row" layout-align="space-between center"><md-button class="button-link link-alt-color zero-margin" ng-if="$ctrl.showRegisterUser()" (click)="$ctrl.reloadWithRegisterUser()" aria-label="{{\'fulldisplay.otherLocations.register\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.otherLocations.register"></span></md-button></div><div class="padding-left-medium"><div ng-if="$ctrl.locations.length==0 && (!$ctrl.otherLocations || $ctrl.otherLocations.length==0)" class="bar alert-bar" layout="row" layout-align="start center"><span flex translate="nui.filter.noitems"></span></div><md-list class="separate-list-items margin-bottom-medium padding-bottom-zero"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.locations | limitTo:10 track by $index "><prm-location tabindex="-1" class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc, false,$ctrl.isFiltered);"></prm-location></md-list-item></md-list><md-button class="button-link link-alt-color zero-margin" ng-if="$ctrl.locations.length>10 && !$ctrl.hideShowmore" (click)="$ctrl.showMore()" aria-label="{{\'fulldisplay.holdings.showmore\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.holdings.showmore"></span></md-button><md-list class="separate-list-items margin-bottom-medium padding-bottom-zero"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.moreLocs track by $index "><prm-location tabindex="-1" class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc, false,$ctrl.isFiltered);"></prm-location></md-list-item></md-list><h4 ng-if="$ctrl.hasRelatedLocations" class="subsection-title" translate="nui.locations.related_locations"></h4><md-list class="separate-list-items margin-bottom-medium padding-bottom-zero"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.relatedLocations | limitTo: $ctrl.relatedLocationsListLimit track by $index"><prm-location class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc,false ,$ctrl.isFiltered);"></prm-location></md-list-item></md-list><md-button class="button-link link-alt-color zero-margin" ng-if="$ctrl.relatedLocations.length>$ctrl.relatedLocationsListLimit" (click)="$ctrl.showMoreRelatedLocations()" aria-label="{{\'fulldisplay.holdings.showmore\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.holdings.showmore"></span></md-button><h3 ng-if="$ctrl.otherLocations" class="medium-uppercase-bold zero-margin" translate="nui.locations.other_institutions"></h3><md-list class="separate-list-items"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.otherLocations track by $index"><prm-location class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc,false, $ctrl.isFiltered);"></prm-location></md-list-item></md-list></div><prm-locations-after parent-ctrl="$ctrl"></prm-locations-after>');
$templateCache.put('components/search/fullView/getit/opac/requestApproval/request-approval.html','<form id="request-approval-form"><md-dialog-content layout="column" layout-padding layout-margin><h3 class="dialog-title light-text" translate="{{::$ctrl.header}}"></h3><span ng-if="::$ctrl.getLink()"><a ng-click="$ctrl.sendLinkClickBeacon()" href="{{::$ctrl.getLink()}}" target="_blank" translate="{{::$ctrl.getLinkLabel()}}"></a></span><p translate="{{::$ctrl.message}}"></p></md-dialog-content><md-dialog-actions class="md-actions"><md-button class="" (click)="$ctrl.cancel()"><span translate="{{::$ctrl.cancelRequest}}"></span></md-button><md-button class="button-confirm" ng-disabled="$ctrl.isDisabled()" ng-click="$ctrl.commit()"><span translate="{{::$ctrl.approveRequest}}"></span></md-button></md-dialog-actions></form><prm-request-approval-after parent-ctrl="$ctrl"></prm-request-approval-after>');
$templateCache.put('components/search/fullView/ngrs/getItRequest/offerDetailsTile/offerDetailsTile.html','<div class="offer_detail"><div class="details_text"><div class="first_line_s"><span translate="nui.ngrs.physical.deliverdin"></span>&nbsp;<span class="supply_time_s">{{$ctrl.getOfferSupplyTime()}}</span>&nbsp;<span class="days_s" translate="nui.ngrs.search.brief.digital.hours" ng-if="$ctrl.isDigitalOffer()"></span>&nbsp;<span class="days_s" translate="nui.ngrs.search.brief.physical.deliverdin.days" ng-if="!$ctrl.isDigitalOffer()"></span></div><div class="first_line"><span translate="nui.ngrs.search.brief.digital.getAChapter" ng-if="$ctrl.isDigitalOffer() && $ctrl.getResourceType() == \'book\'"></span> <span translate="nui.ngrs.search.brief.digital.getDigitalCopy" ng-if="$ctrl.isDigitalOffer() && $ctrl.getResourceType() != \'book\'"></span> <span translate="nui.ngrs.physical.deliverdin" ng-if="!$ctrl.isDigitalOffer()"></span></div><div class="second_line"><span class="supply_time">{{$ctrl.getOfferSupplyTime()}}</span>&nbsp;<span class="days" translate="nui.ngrs.search.brief.digital.hours" ng-if="$ctrl.isDigitalOffer()"></span><span class="days" translate="nui.ngrs.search.brief.physical.deliverdin.days" ng-if="!$ctrl.isDigitalOffer()"></span></div><div class="third_line" ng-if="!$ctrl.isDigitalOffer()"><span translate="nui.ngrs.form.physical.keepfor"></span>&nbsp;<span>{{$ctrl.getOfferLoanPeriod()}}</span>&nbsp;<span translate="nui.ngrs.search.brief.physical.keepfor.days"></span></div></div></div><prm-offer-details-tile-after parent-ctrl="$ctrl"></prm-offer-details-tile-after>');
$templateCache.put('components/search/fullView/ngrs/ngrsBriefResultLine/briefResultDeliveryOptionLink/briefResultDeliveryOptionLink.html','<a id="options_link"><div class="flex-container"><md-icon class="ng-scope md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-globe"></prm-icon></md-icon><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button"><span class="button-content"><span id="options_text" translate="nui.ngrs.search.brief.options"></span></span></md-button></div></a><prm-brief-result-delivery-option-link-after parent-ctrl="$ctrl"></prm-brief-result-delivery-option-link-after>');
$templateCache.put('components/search/fullView/ngrs/ngrsBriefResultLine/briefResultDigitalBestOffer/briefResultDigitalBestOffer.html','<a id="physical_link" ng-if="$ctrl.isDigitalOfferFound()" class="button-link button-with-icon margin-left-zero ng-scope md-primoExplore-theme md-ink-ripple" type="button"><div class="flex-container"><md-icon class="ng-scope md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-delivery-envelope"></prm-icon></md-icon><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button" (click)="$ctrl.showFormOnClick($event)"><span class="button-content"><span translate="nui.ngrs.search.brief.digital.getAChapter"></span> <span id="supply_time">{{$ctrl.getDigitalSupplyTime()}}</span> <span translate="nui.ngrs.search.brief.digital.hours"></span></span></md-button></div></a><prm-brief-result-digital-best-offer-after parent-ctrl="$ctrl"></prm-brief-result-digital-best-offer-after>');
$templateCache.put('components/search/fullView/ngrs/ngrsBriefResultLine/briefResultPhysicalBestOffer/briefResultPhysicalBestOffer.html','<a id="physical_link" ng-if="$ctrl.offerFound" class="button-link button-with-icon margin-left-zero ng-scope md-primoExplore-theme md-ink-ripple" type="button"><div class="flex-container"><md-icon class="ng-scope md-primoExplore-theme"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="ngrs-delivery-box"></prm-icon></md-icon><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button" data-custom-button="action" hide-xs="" (click)="$ctrl.showFormOnClick($event)"><span class="button-content"><span translate="nui.ngrs.search.brief.physical.deliverdin"></span> <span id="supply_time">{{$ctrl.getSupplyTime()}}</span> <span id="supply_time_days" translate="nui.ngrs.search.brief.physical.deliverdin.days"></span> <span translate="nui.ngrs.search.brief.physical.keepfor"></span> <span id="loan_period">{{$ctrl.getLoanPeriod()}}</span> <span translate="nui.ngrs.search.brief.physical.keepfor.days"></span></span></md-button></div></a><prm-brief-result-physical-best-offer-after parent-ctrl="$ctrl"></prm-brief-result-physical-best-offer-after>');
$templateCache.put('components/search/fullView/ngrs/progressBar/progressCheckBox/progress-check-box.html','<hr ng-class="$ctrl.isChecked()? \'checked\' : \'unchecked\'"><div class="container"><div class="round"><input type="checkbox" id="checkbox" ng-disabled="true" ng-checked="$ctrl.isChecked()"/> <label for="checkbox"></label></div><div class="status"><span translate="{{$ctrl.getStatusLabel()}}"></span></div><div class="date"><span>{{$ctrl.getDate()}}</span></div></div><prm-progress-checkbox-after parent-ctrl="$ctrl"></prm-progress-checkbox-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/location/location.html','<div class="neutralized-button layout-full-width layout-display-flex md-button" tabindex="0" layout="flex" ng-click="$ctrl.onClick()" aria-label="{{$ctrl.location.librarycodeTranslation}} {{$ctrl.location.subLocation | translate}},\r\n                        {{\'fulldisplay.availabilty.\' + $ctrl.location.availabilityStatus | translate}},\r\n                         {{$ctrl.getButtonActionLabel() | translate}}" md-ink-ripple="red"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text" layout="row" layout-wrap flex><div flex flex-xs="100"><h3 ng-if="$ctrl.location && $ctrl.getLibraryName($ctrl.location)">{{$ctrl.location.librarycodeTranslation}}</h3><h5 ng-if="$ctrl.location.relatedTitle != null && $ctrl.location.relatedTitle !== \'\'" class="related-title"><prm-icon icon-type="{{$ctrl.opacLocations.relatedArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.relatedArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.relatedArrow.icon}}" class="related-title-icon h-flipped"></prm-icon><span translate="nui.location.related_title" class="related-title-label"></span> <span class="related-title-name">{{$ctrl.location.relatedTitle}}</span></h5><p><span class="availability-status {{$ctrl.location.availabilityStatus}}" translate="fulldisplay.availabilty.{{$ctrl.location.availabilityStatus}}"></span> <span ng-if="$ctrl.location.subLocation">,</span> <span ng-if="$ctrl.location && $ctrl.location.subLocation && $ctrl.getSubLibraryName($ctrl.location)" ng-bind-html="$ctrl.location.collectionTranslation"></span> <span ng-if="$ctrl.location.callNumber">;</span> <span ng-if="$ctrl.location.callNumber" dir="auto">{{$ctrl.location.callNumber}}</span></p></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" flex class="list-item-actions"><prm-stack-map ng-if="$ctrl.isSuprima() && $ctrl.location.stackMapUrl" [map-url]="$ctrl.location.stackMapUrl"></prm-stack-map></div></div><prm-icon ng-if="!$ctrl.isOvp()" class="padding-right-small" icon-type="{{$ctrl.opacLocations.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.externalLinkIcon.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isOvp()" class="padding-right-small" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></div><prm-location-after parent-ctrl="$ctrl"></prm-location-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/stackMap/stack-map.html','<md-button ng-click="$event.stopPropagation();" href="{{$ctrl.mapUrl}}" class="zero-margin button-with-icon button-link" target="_blank"><prm-icon icon-type="{{$ctrl.opacLocations.locate.type}}" svg-icon-set="{{$ctrl.opacLocations.locate.iconSet}}" icon-definition="{{$ctrl.opacLocations.locate.icon}}"></prm-icon><span translate="nui.locations.locate"></span></md-button><prm-stack-map-after parent-ctrl="$ctrl"></prm-stack-map-after>');}]);
//# sourceMappingURL=bundle.js.map
