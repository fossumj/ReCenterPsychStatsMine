;var oer={};oer.materials={};;oer.validation={};oer.validation.rules={};oer.validation.rules.registration={first_name:{required:true},last_name:{required:true},email:{required:true,email:true},password:{required:true,minlength:5}};oer.validation.rules.reset_password_init={email:{required:true,email:true}};oer.validation.rules.reset_password={password:{required:true,minlength:5},confirm_password:{required:true,minlength:5,equalTo:"[name='password']"}};oer.validation.rules.save_search={title:{required:true}};oer.validation.rules.newsletter={email:{required:true,email:true}};$.validator.setDefaults({errorPlacement:function(error,element){error.appendTo(element.closest(".field").find(".errors"));},submitHandler:function(form){if(!this.been_submited){this.been_submitted=true;form.submit();}else{return false;}}});;(function(){var LoginPopup;LoginPopup=(function(){function LoginPopup(){var passwordField,passwordSwitcher;this.ct=$(".js-login-popup");$(window).resize((function(_this){return function(e){if(_this.ct.is(":visible")){return _this.updatePopupPosition();}};})(this));$(document).keydown((function(_this){return function(e){if(e.which===27){return _this.hide();}};})(this));this.form=this.ct.find("form");this.callback=null;$(document).on("click",(function(_this){return function(e){var target;if(_this.redirectToLoginPage()){return;}
target=$(e.target);if(target.hasClass("js-login")){e.preventDefault();if(!_this.ct.is(":visible")){return _this.show();}else{return _this.hide();}}else if(!$(e.target).closest(".js-login-popup").length){return _this.hide();}};})(this));$(".dropdown-toggle").on("click",(function(_this){return function(e){return _this.hide();};})(this));passwordField=this.form.find("input[type='password']");passwordSwitcher=this.form.find("input.password-toggle");passwordSwitcher.click(function(){if(passwordSwitcher.is(":checked")){return passwordField.prop("type","text");}else{return passwordField.prop("type","password");}});oer.login.init_login_form(this.form);this.submitBtn=this.form.find(":submit");this.globalErrorCt=this.ct.find(".errors.global");this.form.validate({rules:{username:"required",password:"required"},submitHandler:(function(_this){return function(){_this.submit();return false;};})(this)});}
LoginPopup.prototype.updatePopupPosition=function(){var coords,elem;if(window.pageYOffset>50){this.ct.css({top:window.pageYOffset+50});return this.ct.addClass("mod-centered");}else{this.ct.removeClass("mod-centered");elem=$("a.login");if(!elem.length){elem=$(".js-login");}
if(elem.hasClass("header-navbar-dropdown-open-btn")){coords={top:elem.offset().top+elem.height(),left:elem.offset().left-670+elem.width()/2};}else{coords={top:elem.offset().top+30,left:elem.offset().left-670};}
return this.ct.offset(coords);}};LoginPopup.prototype.show=function(callback){if(callback){this.callback=callback;}else{this.callback=null;}
this.updatePopupPosition();this.ct.removeClass("is-hidden");this.ct.removeAttr("aria-hidden");return this.form.find(":input:first").focus();};LoginPopup.prototype.hide=function(){this.ct.addClass("is-hidden");return this.ct.attr("style","");};LoginPopup.prototype.submit=function(){this.ct.addClass("is-loading");this.ct.attr("aria-hidden",true);this.submitBtn.attr("value","Logging in").attr("disabled",true);this.globalErrorCt.empty();return $.post(this.form.attr("action"),this.form.serialize(),(function(_this){return function(response){if(response.status==="success"){if($(".js-login.header-navbar-dropdown-open-btn").length){location.reload();}
$("header span.user-name").text(response["user_name"]);$("body").addClass("authenticated");if(_this.callback){_this.callback();}
$(document).trigger(oer.login.LOGGED_IN_EVENT);_this.hide();if(typeof dataLayerTrackEvent==="function"){dataLayerTrackEvent("login");}}else if(response.status==="error"){if(response.errors["__all__"]!==void 0){_this.globalErrorCt.append('<label class="error" aria-role="alert">'+response.errors["__all__"]+'</label>');delete response.errors["__all__"];}}
_this.ct.removeClass("is-loading");return _this.submitBtn.attr("value","Log in").attr("disabled",false);};})(this));};LoginPopup.prototype.redirectToLoginPage=function(){return $(window).innerWidth()<980;};return LoginPopup;})();window.LoginPopup=LoginPopup;}).call(this);;oer.login={};oer.login.LOGGED_IN_EVENT="oer-login-logged-in";oer.login.LOGGED_OUT_EVENT="oer-login-logged-out";oer.login.is_authenticated=function(){return $("body").hasClass("authenticated");};oer.login.show_popup=function(callback){oer.login.login_popup.show(callback);};oer.login.check_login=function(callback){if(oer.login.is_authenticated()){callback();}else{oer.login.show_popup(callback);}};oer.login.init=function(){if($("body").hasClass("disable-login-popup")){return;}
oer.login.login_popup=new LoginPopup();$(".global a.login").click(function(e){e.preventDefault();oer.login.show_popup();});var loginForm=$("#content .login-form");var passwordField=loginForm.find("input[type='password']")
var passwordSwitcher=loginForm.find("input.password-toggle");passwordSwitcher.click(function(){if(passwordSwitcher.is(":checked")){passwordField.prop("type","text");}else{passwordField.prop("type","password");}});var $next_url_form=$("form[name='next-url']");$(document).delegate("a.require-login","click",function(e){if(oer.login.is_authenticated()){return true;}
e.preventDefault();var $this=$(this);oer.login.show_popup(function(){if($this.hasClass("with-next-url")){$next_url_form.attr("action",$this.attr("href"));$next_url_form.submit();}else{window.location=$this.attr("href");}});});};oer.login.init_login_form=function($form){var username=$form.find("#id_login-username");var mailcheckMsg=$form.find("div.mailcheck-message");if(mailcheckMsg.length){username.blur(function(){username.mailcheck({suggested:function(el,suggestion){mailcheckMsg.find("a").text(suggestion.full);mailcheckMsg.show();},empty:function(el){mailcheckMsg.hide();}});});mailcheckMsg.find("a").click(function(e){e.preventDefault();username.val($(e.target).text());mailcheckMsg.hide();});}};;(function(){var BaseTagWidget;BaseTagWidget=(function(){function BaseTagWidget(){var button,tagsData;this.form=$("#add-tags-form");this.input=this.form.find("#id_tags");this.user_tags=$("ul.user-tags");this.tagElement="li";button=this.form.find(".add-button");$(".item-tags .login a").click(function(e){e.preventDefault();return oer.login.check_login(function(){return location.reload();});});this.form.submit((function(_this){return function(e){return _this.onFormSubmitCallback(e);};})(this));tagsData=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(d){return d.value;},remote:{url:this.input.data("autocomplete-url")+"?term=%QUERY",wildcard:"%QUERY"}});this.input.typeahead({classNames:{menu:"tag-dropdown",dataset:"tag-dataset",suggestion:"tag-suggestion"}},{name:"tags",limit:10,source:tagsData,display:function(d){return d.label;}});this.input.on("typeahead:select",(function(_this){return function(ev,suggestion){return _this.form.submit();};})(this));this.input.keypress((function(_this){return function(e){if(e.which===13){e.preventDefault();return _this.form.submit();}};})(this));button.click((function(_this){return function(e){e.preventDefault();return _this.form.submit();};})(this));this.user_tags.delegate("a.delete","click",(function(_this){return function(e){var li,tag_id;e.preventDefault();li=$(e.currentTarget).closest(_this.tagElement);li.fadeOut(250,function(){return $(this).detach();});tag_id=li.data("id");return $.post("/tags/delete",{id:tag_id},function(response){return _this.onDeleteCallback(response);});};})(this));}
BaseTagWidget.prototype.onFormSubmitCallback=function(e){var existing_tag,value;e.preventDefault();value=$.trim(this.input.val());this.input.val("");if(value){existing_tag=this.findExistingTag(this.user_tags.find("a:not(.delete)"),value);if(existing_tag){existing_tag.effect("pulsate",200);return;}
this.input.addClass("loading");return $.post(this.form.attr("action"),{tags:value},(function(_this){return function(response){_this.input.removeClass("loading");if(!response.tags){StatusMessage.error(response);return;}
return $.each(response.tags,function(i,tag){return _this.onAddCallback(tag);});};})(this));}};BaseTagWidget.prototype.findExistingTag=function(items,value){var item,j,len;for(j=0,len=items.length;j<len;j++){item=items[j];if($.trim(item.textContent||item.innerText||$(item).text()||"").toLowerCase()===$.trim(value).toLowerCase()){return $(item).closest(this.tagElement);}}};BaseTagWidget.prototype.beforeAddCallback=function(){};BaseTagWidget.prototype.onAddCallback=function(tag){if(!this.user_tags.is(":visible")){this.user_tags.show();}
$("#tagTemplate").tmpl(tag).appendTo(this.user_tags);return this.form.resize();};BaseTagWidget.prototype.onDeleteCallback=function(response){if(!this.user_tags.find(".tag").length){this.user_tags.hide();}
return this.form.resize();};return BaseTagWidget;})();window.BaseTagWidget=BaseTagWidget;}).call(this);;(function(){var EvaluationDialog;EvaluationDialog=(function(){function EvaluationDialog(){this.dialog=$("#evaluate-dialog");this.dialogBody=this.dialog.find("div.body");this.tabs=this.dialog.find("div.head ul");this.tabs.delegate("a","click",(function(_this){return function(e){var btn,iframe,tab;e.preventDefault();btn=$(e.currentTarget);tab=btn.parent();if(tab.hasClass("active")){return;}
tab.addClass("active").siblings().removeClass("active");iframe=tab.data("iframe");if(!iframe){iframe=$("<iframe></iframe>").attr("src",btn.attr("href"));iframe.appendTo(_this.dialogBody);tab.data("iframe",iframe);}
iframe.siblings().hide();return iframe.show();};})(this));this.dialog.find("a.minimize").click((function(_this){return function(e){e.preventDefault();return _this.dialog.toggleClass("collapsed");};})(this));this.dialog.find("a.close").click((function(_this){return function(e){e.preventDefault();_this.dialog.hide();return window.top.location.reload();};})(this));}
EvaluationDialog.prototype.open=function(){this.adjustDialogSize();return oer.login.check_login((function(_this){return function(){if(!_this.tabs.find("li.active").length){_this.tabs.find("a").first().click();}
return _this.dialog.show();};})(this));};EvaluationDialog.prototype.adjustDialogSize=function(){var windowWidth;windowWidth=$(window).innerWidth();this.dialog.css("top",window.pageYOffset+30);if(windowWidth<768){this.dialog.width(windowWidth-40);return this.dialog.css("left","20px");}else if(windowWidth<980){this.dialog.width(600);return this.dialog.css({"right":"20px","left":"auto"});}};return EvaluationDialog;})();window.EvaluationDialog=EvaluationDialog;}).call(this);;(function(){var SaveWidget;SaveWidget=(function(){function SaveWidget(el){this.ct=$(el||".js-save-widget");this.saveUrl=this.ct.data("save-url");this.undoUrl=this.ct.data("undo-url");this.reloadUrl=this.ct.data("reload-url");this.popup=this.ct.find(".js-save-widget-popup");this.popup.click((function(_this){return function(e){return e.stopPropagation();};})(this));this.popup.on("click",".js-save-widget-new-target-btn",(function(_this){return function(e){var hasSelectedItems;e.preventDefault();_this.popup.find(".js-save-widget-targets").hide();_this.popup.find(".js-save-widget-new-target").show();_this.popup.find(".js-save-widget-new-target-title").val("").trigger("change");hasSelectedItems=_this.getItems().length>0;_this.popup.find(".js-save-widget-new-target-create-btn").toggle(!hasSelectedItems);_this.popup.find(".js-save-widget-new-target-create-save-btn").toggle(hasSelectedItems);return _this.popup.find(".js-save-widget-new-target-title").focus();};})(this));this.popup.on("click",".js-save-widget-new-target-cancel-btn",(function(_this){return function(e){e.preventDefault();return _this.ct.dropdown("toggle");};})(this));this.popup.on("keydown",":text,select",(function(_this){return function(e){if(e.which===13){return e.preventDefault();}};})(this));this.popup.on("change keyup",".js-save-widget-new-target-title",(function(_this){return function(e){var input,targetTitle;input=$(e.currentTarget);targetTitle=$.trim(input.val());_this.popup.find(".js-save-widget-new-target-create-btn").attr("disabled",targetTitle.length===0);return _this.popup.find(".js-save-widget-new-target-create-save-btn").attr("disabled",targetTitle.length===0);};})(this));this.ct.on("show.bs.dropdown",(function(_this){return function(){_this.popup.find(".js-save-widget-targets").show();return _this.popup.find(".js-save-widget-new-target").hide();};})(this));this.popup.on("click",".js-save-widget-login",(function(_this){return function(e){e.preventDefault();return oer.login.check_login(function(){return location.reload();});};})(this));this.popup.on("click",".js-save-widget-target",(function(_this){return function(e){var btn,data,items;e.preventDefault();btn=$(e.currentTarget);items=_this.getItems();if(!items.length){_this.ct.dropdown("toggle");new PNotify({text:"Please select at least one item.",type:"error",delay:3000});return;}
data={target_id:btn.attr("data-id"),item_ids:items};return _this.save(data);};})(this));this.popup.on("click",".js-save-widget-new-target-create-btn,.js-save-widget-new-target-create-save-btn",(function(_this){return function(e){var data,items,targetTitle;e.preventDefault();targetTitle=$.trim(_this.popup.find(".js-save-widget-new-target-title").val());if(!targetTitle){new PNotify({text:"Please enter name.",type:"error",delay:3000});return;}
data={target_title:targetTitle,parent:_this.popup.find(".js-save-widget-new-target-parent").val()};items=_this.getItems();if(items.length){data["item_ids"]=items;}
return _this.save(data,true);};})(this));$(document).on("target-created folder-created subfolder-created target-updated folder-updated subfolder-updated target-deleted folder-deleted subfolder-deleted",(function(_this){return function(){return _this.reload();};})(this));$(document).on("change",".js-save-widget-item-id",(function(_this){return function(){return _this.contentSelectHandler();};})(this));$(document).on("js-save-widget-item-id-change-state",(function(_this){return function(){return _this.contentSelectHandler();};})(this));if($(".js-save-widget-item-id").length){this.contentSelectHandler();}}
SaveWidget.prototype.save=function(data,reload){var notification;if(reload==null){reload=false;}
this.ct.dropdown("toggle");$(".js-save-widget-item-id:checked").prop("checked",false).trigger("change");notification=new PNotify({text:"Saving...",type:"info",hide:false,before_close:(function(_this){return function(){if($(document.activeElement).hasClass("js-undo")){_this.restoreFocus();}
return true;};})(this)});return $.post(this.saveUrl,data,(function(_this){return function(response){var event;if(response["undo_data"]){notification.update({text:response.message+"&nbsp;&nbsp;<a href=\"#\" class=\"js-undo\">Undo</a>",type:"success",hide:true});notification.container.find(".js-undo").click(function(e){e.preventDefault();_this.undo(response["undo_data"]);notification.remove();return _this.restoreFocus();}).focus();}else{notification.update({text:response.message,type:"success",hide:true});}
if(reload){_this.reload();}
try{event=new CustomEvent("myitems-page-change-folder-items");window.document.dispatchEvent(event);}catch(_error){null;}
return $(document).trigger("saveWidgetSaved");};})(this));};SaveWidget.prototype.getItems=function(){var checkbox;if(this.ct.attr("data-item-id")){return[this.ct.attr("data-item-id")];}
return(function(){var j,len,ref,results;ref=$(".js-save-widget-item-id:checked");results=[];for(j=0,len=ref.length;j<len;j++){checkbox=ref[j];results.push($(checkbox).val());}
return results;})();};SaveWidget.prototype.undo=function(undoData){return $.post(this.undoUrl,undoData);};SaveWidget.prototype.reload=function(){return this.popup.load(this.reloadUrl);};SaveWidget.prototype.contentSelectHandler=function(){if($(".js-save-widget-item-id:checked").length){return this.show();}else{return this.hide();}};SaveWidget.prototype.show=function(){this.ct.removeClass("hidden").attr("aria-hidden",false);$(".js-show-when-content-selected").removeClass("hidden").attr("aria-hidden",false);return $(".js-hide-when-content-selected").addClass("hidden").attr("aria-hidden",true);};SaveWidget.prototype.hide=function(){this.ct.addClass("hidden").attr("aria-hidden",true);$(".js-show-when-content-selected").addClass("hidden").attr("aria-hidden",true);return $(".js-hide-when-content-selected").removeClass("hidden").attr("aria-hidden",false);};SaveWidget.prototype.findFocusOn=function(){var $elements,elem,i,input,j,k,len,len1,ref;$elements=$(".js-save-widget,:input:visible");for(i=j=0,len=$elements.length;j<len;i=++j){elem=$elements[i];if(!$(elem).is(this.ct)){continue;}
ref=$elements.slice(i);for(k=0,len1=ref.length;k<len1;k++){input=ref[k];if($(input).is(":input")){return $(input);}}}};SaveWidget.prototype.restoreFocus=function(){var $focusOn;$focusOn=this.findFocusOn();if($focusOn.length){return $focusOn.focus();}};return SaveWidget;})();window.SaveWidget=SaveWidget;window.createSaveWidgets=function(){return $(".js-save-widget").each((function(_this){return function(index,item){return new SaveWidget(item);};})(this));};}).call(this);;(function(){var Rating;Rating=(function(){function Rating(rateItemURL){this.rateItemURL=rateItemURL;this.rating=$(".stars");this.ratingValue=this.rating.data("rating-value");this.starSelector=".js-star";this.activeStarClass="active-star";this.rating.on("mouseover",this.starSelector,(function(_this){return function(e){var currentStar;currentStar=$(e.currentTarget);currentStar.addClass(_this.activeStarClass);currentStar.nextAll(_this.starSelector).removeClass(_this.activeStarClass);return currentStar.prevAll(_this.starSelector).addClass(_this.activeStarClass);};})(this));this.rating.on("mouseout",this.starSelector,(function(_this){return function(e){return _this.displayRating();};})(this));this.rating.on("click",this.starSelector,(function(_this){return function(e){var currentStar;currentStar=$(e.currentTarget);return oer.login.check_login(function(){var data;data={number:currentStar.data("number"),identifier:_this.rating.data("identifier")};return $.post(_this.rateItemURL,data,function(response){if(response.status==="success"){_this.ratingValue=response.rating_value;StatusMessage.success(response.message);}else{StatusMessage.error(response.message);}
return _this.displayRating();});});};})(this));}
Rating.prototype.displayRating=function(){var intValue;this.rating.find(this.starSelector).removeClass(this.activeStarClass);if(this.ratingValue){intValue=parseInt(this.ratingValue,10);return this.rating.find(this.starSelector).slice(0,intValue).addClass(this.activeStarClass);}};return Rating;})();window.Rating=Rating;}).call(this);;(function(){var Toolbar;Toolbar=(function(){function Toolbar(indexUrl,is_rtl){var evaluateDialog,result,tagActionUrl;this.indexUrl=indexUrl;this.is_rtl=is_rtl;this.resource=null;this.toolbar=$(".toolbar");this.toolbarCollapsed=$(".toolbar-collapsed");this.resourceErrorModal=$(".js-resource-error-modal");this.resourceRedirectModal=$(".js-resource-redirect-modal");this.toggleMenuButton=$(".js-toggle-mobile-menu");this.mobileMenu=$(".js-mobile-menu");this.loading=$(".js-iframe-loading");this.openTags=$(".js-open-tags-form");this.tagsWindow=$(".js-tags-form");this.userTags=$(".js-user-tags");this.addTagsForm=$(".js-add-tags-form");this.mobileTagMenuItem=$(".js-mobile-tags-item");this.openComments=$(".js-open-comments-form");this.commentsWindow=$(".js-comments-form");this.openMobileComments=$(".js-open-mobile-comments-form");this.mobileCommentsWindow=$(".js-mobile-comments-form");this.openEvaluation=$(".js-open-evaluation-form");this.evaluationWindow=$(".js-evaluation-form");this.openMobileEvaluation=$(".js-open-mobile-evaluation-form");tagActionUrl=this.openTags.attr("href");this.assetPageUrl=this.resourceRedirectModal.find(".js-return-to-asset-page").attr("href");this.loading.show();this.installMobileMenu();this.adjustModalFormPosition(this.tagsWindow,this.openTags);this.adjustModalFormPosition(this.commentsWindow,this.openComments);this.adjustModalFormPosition(this.evaluationWindow,this.openEvaluation);$(window).on("resize",(function(_this){return function(e){_this.installMobileMenu();_this.adjustModalFormPosition(_this.tagsWindow,_this.openTags);_this.adjustModalFormPosition(_this.commentsWindow,_this.openComments);return _this.adjustModalFormPosition(_this.evaluationWindow,_this.openEvaluation);};})(this));this.toolbar.on("click",".js-close-toolbar",(function(_this){return function(){if(_this.resource){_this.resource.css("top","0");}else if(_this.oembed){_this.oembed.css("padding-top","0");}
_this.toolbar.hide();return _this.toolbarCollapsed.show();};})(this));this.toolbarCollapsed.on("click",".js-show-toolbar",(function(_this){return function(){_this.toolbarCollapsed.hide();_this.toolbar.show();return _this.adjustIFramePosition();};})(this));this.openTags.on("click",(function(_this){return function(e){e.preventDefault();return oer.login.check_login(function(){if(!_this.tagsWindow.is(":visible")){_this.hideModalForm();_this.addTagsForm.attr("action",tagActionUrl);_this.userTags.empty();return $.getJSON(tagActionUrl.replace("/tags/add/","/tags/get-tags/")+"?randNum="+(new Date).getTime(),function(data){if(data.user_tags.length){$.each(data.user_tags,function(index,tag){_this.userTags.append($("#tagTemplate").tmpl(tag));});}else{_this.userTags.hide();}
$("#id_tags").val("");$(e.currentTarget).closest(".action-item").addClass("mod-popup");_this.tagsWindow.show();_this.mobileTagMenuItem.css("margin-bottom",_this.tagsWindow.outerHeight(true)+10);_this.mobileTagMenuItem.addClass("mod-mobile-open");});}else{return _this.hideModalForm();}});};})(this));this.addTagsForm.on("resize",(function(_this){return function(e){return _this.mobileTagMenuItem.css("margin-bottom",_this.tagsWindow.outerHeight(true)+10);};})(this));this.openComments.on("click",(function(_this){return function(e){e.preventDefault();return oer.login.check_login(function(){if(!_this.commentsWindow.is(":visible")){_this.hideModalForm();$(e.currentTarget).closest(".action-item").addClass("mod-popup");return _this.commentsWindow.show();}else{return _this.hideModalForm();}});};})(this));this.openMobileComments.on("click",(function(_this){return function(e){e.preventDefault();return oer.login.check_login(function(){if(!_this.mobileCommentsWindow.is(":visible")){_this.hideModalForm();return _this.mobileCommentsWindow.show();}else{return _this.hideModalForm();}});};})(this));this.commentsWindow.on("click",".js-submit-comment",(function(_this){return function(e){var form;e.preventDefault();form=$("#comment-form");return $.post(form.attr("action"),form.serialize(),function(data){if(data.status==="success"){form.find("textarea").val("");StatusMessage.success("Comment saved");_this.hideModalForm();}});};})(this));this.mobileCommentsWindow.on("click",".js-submit-comment",(function(_this){return function(e){var form;e.preventDefault();form=$("#mobile-comment-form");return $.post(form.attr("action"),form.serialize(),function(data){if(data.status==="success"){form.find("textarea").val("");StatusMessage.success("Comment saved");_this.mobileCommentsWindow.hide();}});};})(this));if($("#evaluate-dialog").length){evaluateDialog=new EvaluationDialog;result=window.location.hash.match(/^#evaluate(?::(?:(standard|rubric\d+)))?$/);if(result){evaluateDialog.open();}}
this.openEvaluation.on("click",(function(_this){return function(e){e.preventDefault();if($('#evaluate-dialog').length){return oer.login.check_login(function(){if(!_this.evaluationWindow.is(":visible")){_this.hideModalForm();$(e.currentTarget).closest(".action-item").addClass("mod-popup");return evaluateDialog.open();}else{return _this.hideModalForm();}});}};})(this));this.openMobileEvaluation.on("click",(function(_this){return function(e){e.preventDefault();if($('#evaluate-dialog').length){_this.toggleMobileMenu();$('#evaluate-dialog').css("left","30px");$('#evaluate-dialog').width("600px");return evaluateDialog.open();}};})(this));$(".js-close-modal-form").on("click",(function(_this){return function(e){e.preventDefault();return _this.hideModalForm();};})(this));this.toggleMenuButton.on("click",(function(_this){return function(e){e.preventDefault();return _this.toggleMobileMenu();};})(this));$.ajax({url:window.location.href,type:'GET',cache:false,data:{"is_mobile":$(window).innerWidth()<1025},success:(function(_this){return function(data,status,response){_this.loading.hide();if(data.oembed){_this.oembed=$("<div class=\"oembed\">"+data.oembed+"</div>").appendTo($("body"));}
if(data.iframe){$("body").append(data.iframe);_this.resource=$("#resource");}
if(data.is_redirect){_this.resourceRedirectModal.modal("show");}
if(data.resource_error){return _this.resourceErrorModal.modal("show");}};})(this)});this.resourceRedirectModal.on("hide.bs.modal",(function(_this){return function(e){return window.location.replace(_this.assetPageUrl);};})(this));this.resourceRedirectModal.on("click",".js-continue-redirect-button",(function(_this){return function(e){return setTimeout(function(){return _this.resourceRedirectModal.modal("hide");},2000);};})(this));}
Toolbar.prototype.hideModalForm=function(){$(".js-modal-form").hide();this.mobileCommentsWindow.hide();$(".action-item").removeClass("mod-popup");this.mobileTagMenuItem.css("margin-bottom",0);return this.mobileTagMenuItem.removeClass("mod-mobile-open");};Toolbar.prototype.adjustModalFormPosition=function(form,link){var button,formTop,windowWidth;windowWidth=$(window).innerWidth();if(windowWidth>980){button=link.closest(".action-item");form.css("left",button.position().left+button.outerWidth(true)-form.outerWidth(true));return form.css("top","50px");}else{form.width(this.mobileMenu.outerWidth(true)-40);formTop=link.offset().top+link.outerHeight(true)+10;return form.css({"left":"20px","top":formTop});}};Toolbar.prototype.adjustIFramePosition=function(){if(this.resource){return this.resource.css("top",this.toolbar.outerHeight(true));}else if(this.oembed){return this.oembed.css("padding-top",this.toolbar.outerHeight(true));}};Toolbar.prototype.installMobileMenu=function(){var backLink,menuWidth,rating,windowWidth;windowWidth=$(window).innerWidth();if(windowWidth>400){menuWidth=350;}else if(windowWidth<400){menuWidth=250;}
this.mobileMenu.width(menuWidth);this.mobileMenu.height($(document).height()-20);this.mobileCommentsWindow.width(menuWidth-40);if(windowWidth<660&&this.indexUrl&&!this.mobileMenu.find(".js-back-link").length){backLink=$(".js-back-link").clone();backLink.removeClass("back-link").removeClass("action-item").addClass("mobile-menu-item");this.mobileMenu.prepend(backLink);}
if(windowWidth<480&&!this.mobileMenu.find(".js-rating").length){rating=$(".js-rating");rating.removeClass("rating action-item").addClass("mobile-menu-item mobile-rating");return this.mobileMenu.prepend(rating);}};Toolbar.prototype.toggleMobileMenu=function(){var menuPosition;if(this.is_rtl==="True"){menuPosition="right";}else{menuPosition="left";}
this.toggleMenuButton.toggleClass("mod-enabled");this.hideModalForm();$(".toolbar-view").toggleClass("mod-with-mobile-menu");if(this.toggleMenuButton.hasClass("mod-enabled")){$('#evaluate-dialog').hide();this.toolbar.css(menuPosition,this.mobileMenu.outerWidth(true));this.mobileMenu.css(menuPosition,0);this.resource.css(menuPosition,this.mobileMenu.outerWidth(true));return this.resource.css("position","fixed");}else{this.toolbar.css(menuPosition,0);this.mobileMenu.css(menuPosition,"-350px");this.resource.css(menuPosition,0);return this.resource.css("position","absolute");}};return Toolbar;})();window.Toolbar=Toolbar;}).call(this);;(function(){var StatusMessage;StatusMessage=(function(){var DEFAULT_DELAY;DEFAULT_DELAY=3000;function StatusMessage(message,message_type,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
this.pnotify=new PNotify({text:message,type:message_type,hide:autohide,delay:delay});}
StatusMessage.prototype.destroy=function(){return this.pnotify.remove();};StatusMessage.removeAll=function(){return PNotify.removeAll();};StatusMessage.message=function(message,message_type,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
return new StatusMessage(message,message_type,autohide=true,delay=DEFAULT_DELAY);};StatusMessage.info=function(message,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
return this.message(message,"info",autohide,delay);};StatusMessage.success=function(message,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
return this.message(message,"success",autohide,delay);};StatusMessage.warning=function(message,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
return this.message(message,"warning",autohide,delay);};StatusMessage.error=function(message,autohide,delay){if(autohide==null){autohide=true;}
if(delay==null){delay=DEFAULT_DELAY;}
return this.message(message,"error",autohide,delay);};return StatusMessage;})();$(function(){var i,item,len,ref,results;ref=$(".js-status-message");results=[];for(i=0,len=ref.length;i<len;i++){item=ref[i];results.push(StatusMessage.message($(item).data("message"),$(item).data("message-type"),false));}
return results;});window.StatusMessage=StatusMessage;}).call(this);;var Kicksend={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(opts){opts.domains=opts.domains||Kicksend.mailcheck.defaultDomains;opts.topLevelDomains=opts.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains;opts.distanceFunction=opts.distanceFunction||Kicksend.sift3Distance;var result=Kicksend.mailcheck.suggest(encodeURI(opts.email),opts.domains,opts.topLevelDomains,opts.distanceFunction);if(result){if(opts.suggested){opts.suggested(result);}}else{if(opts.empty){opts.empty();}}},suggest:function(email,domains,topLevelDomains,distanceFunction){email=email.toLowerCase();var emailParts=this.splitEmail(email);var closestDomain=this.findClosestDomain(emailParts.domain,domains,distanceFunction);if(closestDomain){if(closestDomain!=emailParts.domain){return{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain};}}else{var closestTopLevelDomain=this.findClosestDomain(emailParts.topLevelDomain,topLevelDomains);if(emailParts.domain&&closestTopLevelDomain&&closestTopLevelDomain!=emailParts.topLevelDomain){var domain=emailParts.domain;closestDomain=domain.substring(0,domain.lastIndexOf(emailParts.topLevelDomain))+closestTopLevelDomain;return{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain};}}
return false;},findClosestDomain:function(domain,domains,distanceFunction){var dist;var minDist=99;var closestDomain=null;if(!domain||!domains){return false;}
if(!distanceFunction){distanceFunction=this.sift3Distance;}
for(var i=0;i<domains.length;i++){if(domain===domains[i]){return domain;}
dist=distanceFunction(domain,domains[i]);if(dist<minDist){minDist=dist;closestDomain=domains[i];}}
if(minDist<=this.threshold&&closestDomain!==null){return closestDomain;}else{return false;}},sift3Distance:function(s1,s2){if(s1==null||s1.length===0){if(s2==null||s2.length===0){return 0;}else{return s2.length;}}
if(s2==null||s2.length===0){return s1.length;}
var c=0;var offset1=0;var offset2=0;var lcs=0;var maxOffset=5;while((c+offset1<s1.length)&&(c+offset2<s2.length)){if(s1.charAt(c+offset1)==s2.charAt(c+offset2)){lcs++;}else{offset1=0;offset2=0;for(var i=0;i<maxOffset;i++){if((c+i<s1.length)&&(s1.charAt(c+i)==s2.charAt(c))){offset1=i;break;}
if((c+i<s2.length)&&(s1.charAt(c)==s2.charAt(c+i))){offset2=i;break;}}}
c++;}
return(s1.length+s2.length)/2-lcs;},splitEmail:function(email){var parts=email.split('@');if(parts.length<2){return false;}
for(var i=0;i<parts.length;i++){if(parts[i]===''){return false;}}
var domain=parts.pop();var domainParts=domain.split('.');var tld='';if(domainParts.length==0){return false;}else if(domainParts.length==1){tld=domainParts[0];}else{for(var i=1;i<domainParts.length;i++){tld+=domainParts[i]+'.';}
if(domainParts.length>=2){tld=tld.substring(0,tld.length-1);}}
return{topLevelDomain:tld,domain:domain,address:parts.join('@')}}}};if(window.jQuery){(function($){$.fn.mailcheck=function(opts){var self=this;if(opts.suggested){var oldSuggested=opts.suggested;opts.suggested=function(result){oldSuggested(self,result);};}
if(opts.empty){var oldEmpty=opts.empty;opts.empty=function(){oldEmpty.call(null,self);};}
opts.email=this.val();Kicksend.mailcheck.run(opts);}})(jQuery);};(function(){var classroomShareButtonOnComplete,classroomShareButtonOnStart;classroomShareButtonOnStart=function(){if(typeof dataLayerTrackEvent==="function"){return dataLayerTrackEvent("googleClassroomStartShare");}};window.classroomShareButtonOnStart=classroomShareButtonOnStart;classroomShareButtonOnComplete=function(){if(typeof dataLayerTrackEvent==="function"){return dataLayerTrackEvent("googleClassroomCompleteShare");}};window.classroomShareButtonOnComplete=classroomShareButtonOnComplete;}).call(this);