!function(e,t,i,n,r,a,s,o,l,c){"use strict";function d(e,t,i,n,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}var u=(0,l.makeLocalizer)("mt-localizations-ordered-subpages",["MindTouch.IDF3.label.reveal.showAll","MindTouch.IDF3.label.reveal.showLess","MindTouch.IDF3.label.drag-n-drop.placeholder","MindTouch.IDF3.warning.page-order-limit-exceeded"]),m=document.getElementById("mt-sortable");function g(){var l;return l=regeneratorRuntime.mark(function l(){var d,g,h,b;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return d=new e.Page(i.settings.get("pageId"),t.standardMartianSettings),g=i.settings.get("pageOrderLimit"),l.next=4,d.getSubpages();case 4:if(!(l.sent.subpages.length>g)){l.next=8;break}return n.ui.Flash(u("MindTouch.IDF3.warning.page-order-limit-exceeded",g),"warning",{hideCloseButton:!0}),l.abrupt("return");case 8:if(null!==m){l.next=10;break}return l.abrupt("return");case 10:(0,a.elementArray)(".mt-listings-simple",m).forEach(function(e){(0,o.revealListing)({showLinkLabel:u("MindTouch.IDF3.label.reveal.showAll"),hideLinkLabel:u("MindTouch.IDF3.label.reveal.showLess")},e)}),"true"===m.dataset.userCanEdit&&(h=u("MindTouch.IDF3.label.drag-n-drop.placeholder"),b=(0,a.elementArray)(".mt-sortable-listing",m).map(function(e){return e.insertBefore((0,r.div)({className:"mt-edit-control mt-icon-drag"},h),e.firstChild),(0,s.hoverableArea)({},e)}),c.Sortable.create({container:m,blockClass:"mt-sortable-listing",handleClass:"mt-icon-drag",placeholderClasses:["mt-sortable-listing","mt-edit-container"],dragOpacity:.7,constrainToElement:!1,ondragstarting:function(e){e.detail.element.querySelector(".mt-edit-section").classList.remove("mt-edit-section-hover"),b.forEach(function(e){e.enableHoverActions(!1)})},ondragended:function(){b.forEach(function(e){e.enableHoverActions(!0)})},onorderchanged:function(i){var n=i.detail.element,r=parseInt(n.dataset.pageId,10),a=n.previousSibling,s=0;a&&(s=parseInt(a.dataset.pageId,10)),new e.Page(r,t.standardMartianSettings).setOrder(s)}}));case 12:case"end":return l.stop()}},l,this)}),(g=function(){var e=this,t=arguments;return new Promise(function(i,n){var r=l.apply(e,t);function a(e){d(r,i,n,a,s,"next",e)}function s(e){d(r,i,n,a,s,"throw",e)}a(void 0)})}).apply(this,arguments)}!function(){g.apply(this,arguments)}()}(this.Deki._mtLib.martianPage,this.Deki._mtLib.srcLibMartianSettings,this.Deki._mtLib.srcCommunitySettings,this.Deki._mtLib.srcCommunityDekiUi,this.Deki._mtLib.srcUiDomBuilder,this.Deki._mtLib.srcUiDomTools,this.Deki._mtLib.srcProUiWidgetEditableArea,this.Deki._mtLib.srcCommunityUiWidgetRevealListing,this.Deki._mtLib.srcUiLocalization,this.Deki._mtLib.srcComponentsSortableSortable);