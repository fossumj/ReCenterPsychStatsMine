webpackJsonp([3],{1e3:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(421),l=function(){function e(e,t){this.$timeout=e,this.representationViewerService=t,this.shareDisplayedFile=!1}return e.prototype.ngAfterViewInit=function(){this.isScreenSizeXs&&this.$timeout(function(){var e=document.getElementById("social-menu-button");null!=e&&e.classList.remove("md-icon-button")},500)},Object.defineProperty(e.prototype,"url",{get:function(){var e=window.location.href.replace(location.hash,"");return this.shareDisplayedFile&&(e=e+"#"+this.fileid),e},enumerable:!0,configurable:!0}),e.prototype.openShareMenu=function(){if(this.isScreenSizeXs){var e=document.getElementById("share-menu"),t=e.parentElement;t.style.marginLeft="-8px",t.style.width="100%",t.style.marginTop="3%";for(var i=document.getElementsByTagName("md-icon"),r=0;r<i.length;r++)i[r].parentElement.id.startsWith("share_")&&(i[r].style.width="50px",i[r].style.height="50px")}},e.prototype.shareAnalitics=function(){this.representationViewerService.updateStatistics(this.pid,"SHARE")},e.prototype.copyRepresentationLink=function(){var e=document.createElement("textarea");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=this.url,document.body.appendChild(e),e.focus(),e.select();try{var t=document.execCommand("copy"),i=t?"successful":"unsuccessful";console.log("Copying text command was "+i)}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(e),this.shareAnalitics()},Object.defineProperty(e.prototype,"isScreenSizeXs",{get:function(){return window.innerWidth<600},enumerable:!0,configurable:!0}),e=r([a.Component({inputs:["socialmap","pid","fileid"],selector:"prm-social-menu",templateUrl:"components/delivery/socialMenu/socialMenu.html"}),o(0,a.Inject("$timeout")),n("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof s.RepresentationViewerService&&s.RepresentationViewerService)&&t||Object])],e);var t}();t.PrmSocialMenu=l},1001:function(e,t,i){(function(e){var t;!function(e,t){"use strict";i(1002),t.exports="720kb.socialshare"}(t,e)}).call(t,i(23)(e))},1002:function(e,t){!function(e){"use strict";var t="socialshare",i="Socialshare",r=["facebook","facebook-messenger","sms","twitter","linkedin","google","pinterest","tumblr","reddit","stumbleupon","buffer","digg","delicious","vk","pocket","wordpress","flipboard","xing","hackernews","evernote","whatsapp","telegram","viber","skype","email","ok","weibo"],n=function(){var t=[{provider:"email",conf:{subject:"",body:"",to:"",cc:"",bcc:"",trigger:"click"}},{provider:"facebook",conf:{url:"",title:"",href:"",quote:"",hashtags:"",text:"",media:"",mobile_iframe:"",type:"",via:"",to:"",from:"",ref:"",display:"",source:"",caption:"",redirectUri:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"facebook-messenger",conf:{url:""}},{provider:"twitter",conf:{url:"",text:"",via:"",hashtags:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"linkedin",conf:{url:"",text:"",description:"",source:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"reddit",conf:{url:"",text:"",subreddit:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"vk",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"ok",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"digg",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"delicious",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"stumbleupon",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"pinterest",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"google",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"tumblr",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"buffer",conf:{url:"",text:"",via:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"pocket",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"flipboard",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"hackernews",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"wordpress",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"xing",conf:{url:"",text:"",media:"",follow:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"evernote",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"whatsapp",conf:{url:"",text:""}},{provider:"sms",conf:{url:"",text:"",to:"",trigger:"click"}},{provider:"telegram",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"viber",conf:{url:"",text:""}},{provider:"skype",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"weibo",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}}];return{configure:function(i){var n,o,a,s,l=0,c=0,u=e.injector(["ng"]).get("$log");if(i&&i.length>0)for(;l<i.length;l+=1)if(i[l].provider&&r.indexOf(i[l].provider)>-1){for(;c<t.length;c+=1)if(s=t[c],s&&s.provider&&i[l].provider===s.provider){for(n=Object.keys(s.conf),o=0;o<n.length;o+=1)a=n[o],a&&i[l].conf[a]&&(s.conf[a]=i[l].conf[a]);c=0;break}}else u.warn("Invalid provider at element "+l+" with name:"+i[l].provider)},$get:function(){return t}}},o=function(e,t){var i;t.socialshareType&&"feed"===t.socialshareType?(i="https://www.facebook.com/dialog/feed?",t.socialshareVia&&(i+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareRedirectUri&&(i+="&redirect_uri="+encodeURIComponent(t.socialshareRedirectUri)),t.socialshareUrl&&(i+="&link="+encodeURIComponent(t.socialshareUrl)),t.socialshareTo&&(i+="&to="+encodeURIComponent(t.socialshareTo)),t.socialshareDisplay&&(i+="&display="+encodeURIComponent(t.socialshareDisplay)),t.socialshareRef&&(i+="&ref="+encodeURIComponent(t.socialshareRef)),t.socialshareFrom&&(i+="&from="+encodeURIComponent(t.socialshareFrom)),t.socialshareSource&&(i+="&source="+encodeURIComponent(t.socialshareSource)),e.open(i,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):t.socialshareType&&"share"===t.socialshareType?(i="https://www.facebook.com/dialog/share?",t.socialshareVia&&(i+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareRedirectUri&&(i+="&redirect_uri="+encodeURIComponent(t.socialshareRedirectUri)),t.socialshareUrl&&(i+="&href="+encodeURIComponent(t.socialshareUrl)),t.socialshareQuote&&(i+="&quote="+encodeURIComponent(t.socialshareQuote)),t.socialshareDisplay&&(i+="&display="+encodeURIComponent(t.socialshareDisplay)),t.socialshareMobileiframe&&(i+="&mobile_iframe="+encodeURIComponent(t.socialshareMobileiframe)),t.socialshareHashtags&&(i+="&hashtag="+encodeURIComponent(t.socialshareHashtags)),e.open(i,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):t.socialshareType&&"send"===t.socialshareType?(i="https://www.facebook.com/dialog/send?",t.socialshareVia&&(i+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareRedirectUri&&(i+="&redirect_uri="+encodeURIComponent(t.socialshareRedirectUri)),t.socialshareUrl&&(i+="&link="+encodeURIComponent(t.socialshareUrl)),t.socialshareTo&&(i+="&to="+encodeURIComponent(t.socialshareTo)),t.socialshareDisplay&&(i+="&display="+encodeURIComponent(t.socialshareDisplay)),e.open(i,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):e.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.socialshareUrl||e.location.href),"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},a=function(e,t){var i="mailto:";t.socialshareTo&&(i+=encodeURIComponent(t.socialshareTo)),i+="?",t.socialshareBody&&(i+="body="+encodeURIComponent(t.socialshareBody)),t.socialshareSubject&&(i+="&subject="+encodeURIComponent(t.socialshareSubject)),t.socialshareCc&&(i+="&cc="+encodeURIComponent(t.socialshareCc)),t.socialshareBcc&&(i+="&bcc="+encodeURIComponent(t.socialshareBcc)),e.self!==e.top?e.open(i,"_blank"):e.open(i,"_self")},s=function(e,t,i){var r="fb-messenger://share?link="+encodeURIComponent(t.socialshareUrl||e.location.href);i.attr("href",r),i.attr("target","_top")},l=function(e,t){var i="https://www.twitter.com/intent/tweet?";t.socialshareText&&(i+="text="+encodeURIComponent(t.socialshareText)),t.socialshareVia&&(i+="&via="+encodeURIComponent(t.socialshareVia)),t.socialshareHashtags&&(i+="&hashtags="+encodeURIComponent(t.socialshareHashtags)),i+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Twitter","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},c=function(e,t){e.open("https://plus.google.com/share?url="+encodeURIComponent(t.socialshareUrl||e.location.href),"Google+","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},u=function(e,t){var i="https://www.reddit.com/";i+=t.socialshareSubreddit?"r/"+t.socialshareSubreddit+"/submit?url=":"submit?url=",t.socialsharePopupWidth<900&&(t.socialsharePopupWidth=900),t.socialsharePopupHeight<650&&(t.socialsharePopupHeight=650),e.open(i+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Reddit","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},d=function(e,t){e.open("https://www.stumbleupon.com/submit?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"StumbleUpon","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},f=function(e,t){var i="https://www.linkedin.com/shareArticle?mini=true";i+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),t.socialshareText&&(i+="&title="+encodeURIComponent(t.socialshareText)),t.socialshareDescription&&(i+="&summary="+encodeURIComponent(t.socialshareDescription)),t.socialshareSource&&(i+="&source="+encodeURIComponent(t.socialshareSource)),e.open(i,"Linkedin","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},h=function(e,t){e.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&media="+encodeURIComponent(t.socialshareMedia)+"&description="+encodeURIComponent(t.socialshareText),"Pinterest","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},p=function(e,t){e.open("https://www.digg.com/submit?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Digg","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},v=function(e,t){if(t.socialshareMedia){var i="https://www.tumblr.com/share/photo?source="+encodeURIComponent(t.socialshareMedia);t.socialshareText&&(i+="&caption="+encodeURIComponent(t.socialshareText)),e.open(i,"Tumblr","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)}else e.open("https://www.tumblr.com/share/link?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&description="+encodeURIComponent(t.socialshareText),"Tumblr","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},y=function(e,t){var i="https://www.vk.com/share.php?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(i+="&title="+encodeURIComponent(t.socialshareText)),t.socialshareMedia&&(i+="&image="+encodeURIComponent(t.socialshareMedia)),t.socialshareDescription&&(i+="&description="+encodeURIComponent(t.socialshareDescription)),e.open(i,"Vk","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},g=function(e,t){e.open("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&st.comments="+encodeURIComponent(t.socialshareText),"Ok","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},m=function(e,t){e.open("https://www.delicious.com/save?v=5&noui&jump=close&url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Delicious","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},b=function(e,t){var i="https://bufferapp.com/add?";t.socialshareText&&(i+="text="+encodeURIComponent(t.socialshareText)),t.socialshareVia&&(i+="&via="+encodeURIComponent(t.socialshareVia)),t.socialshareMedia&&(i+="&picture="+encodeURIComponent(t.socialshareMedia)),i+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Buffer","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},_=function(e,t){var i="https://news.ycombinator.com/submitlink?";t.socialshareText&&(i+="t="+encodeURIComponent(t.socialshareText)+"&"),i+="u="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Hackernews","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},w=function(e,t){var i="https://share.flipboard.com/bookmarklet/popout?v=2&";t.socialshareText&&(i+="title="+encodeURIComponent(t.socialshareText)+"&"),i+="url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Flipboard","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},T=function(e,t){var i="https://getpocket.com/save?";t.socialshareText&&(i+="text="+encodeURIComponent(t.socialshareText)+"&"),i+="url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Pocket","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},S=function(e,t){var i="http://wordpress.com/press-this.php?";t.socialshareText&&(i+="t="+encodeURIComponent(t.socialshareText)+"&"),t.socialshareMedia&&(i+="i="+encodeURIComponent(t.socialshareMedia)+"&"),i+="u="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(i,"Wordpress","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},E=function(e,t){var i="";t.socialshareFollow&&(i="&follow_url="+encodeURIComponent(t.socialshareFollow)),e.open("https://www.xing.com/spi/shares/new?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+i,"Xing","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},k=function(e,t){var i="http://www.evernote.com/clip.action?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(i+="&title="+encodeURIComponent(t.socialshareText)),e.open(i,"Evernote","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},O=function(e,t,i){var r="whatsapp://send?text="+encodeURIComponent(t.socialshareText)+"%0A"+encodeURIComponent(t.socialshareUrl||e.location.href);i.attr("href",r),i.attr("target","_top")},R=function(e,t,i){t.socialshareText.indexOf("%")>=0&&$log.warn('sending sms text with "%" sign is not supported');var r,n=encodeURIComponent(t.socialshareText.replace("%","")),o=t.socialshareTo||"";t.socialshareUrl&&(n+=encodeURIComponent(t.socialshareUrl)),r="sms:"+o+"?&body="+n,i.attr("href",r),i.attr("target","_blank")},C=function(e,t,i){var r="viber://forward?text="+encodeURIComponent(t.socialshareText)+encodeURIComponent(t.socialshareUrl||e.location.href);i.attr("href",r),i.attr("target","_top")},P=function(e,t){var i="https://telegram.me/share/url?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(i+="&text="+encodeURIComponent(t.socialshareText)),e.open(i,"Telegram","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},I=function(e,t){var i="https://web.skype.com/share?source=button&url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(i+="&text="+encodeURIComponent(t.socialshareText)),e.open(i,"Skype","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},A=function(e,t){var i="http://service.weibo.com/share/share.php?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(i+="&title="+encodeURIComponent(t.socialshareText)),e.open(i,"Weibo","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},x=["$window","$log",function(e,t){this.emailShare=a,this.facebookShare=o,this.twitterShare=l,this.stumbleuponShare=d,this.pinterestShare=h,this.googleShare=c,this.bufferShare=b,this.hackernewsShare=_,this.okShare=g,this.deliciousShare=m,this.pocketShare=T,this.vkShare=y,this.flipboardShare=w,this.xingShare=E,this.diggShare=p,this.linkedinShare=f,this.wordpressShare=S,this.telegramShare=P,this.redditShare=u,this.evernoteShare=k,this.tumblrShare=v,this.skypeShare=I,this.smsShare=R,this.weiboShare=A,this.share=function(i){switch(i.provider){case"email":this.emailShare(e,i.attrs);break;case"sms":this.smsShare(e,t,i.attrs);break;case"facebook":this.facebookShare(e,i.attrs);break;case"twitter":this.twitterShare(e,i.attrs);break;case"pinterest":this.pinterestShare(e,i.attrs);break;case"ok":this.okShare(e,i.attrs);break;case"vk":this.vkShare(e,i.attrs);break;case"delicious":this.deliciousShare(e,i.attrs);break;case"digg":this.diggShare(e,i.attrs);break;case"google":this.googleShare(e,i.attrs);break;case"reddit":this.redditShare(e,i.attrs);break;case"hackernews":this.hackernewsShare(e,i.attrs);break;case"skype":this.skypeShare(e,i.attrs);break;case"evernote":this.evernoteShare(e,i.attrs);break;case"pocket":this.pocketShare(e,i.attrs);break;case"tumblr":this.tumblrShare(e,i.attrs);break;case"telegram":this.telegramShare(e,i.attrs);break;case"xing":this.xingShare(e,i.attrs);break;case"buffer":this.bufferShare(e,i.attrs);break;case"stumbleupon":this.stumbleuponShare(e,i.attrs);break;case"linkedin":this.linkedinShare(e,i.attrs);break;case"wordpress":this.wordpressShare(e,i.attrs);break;case"flipboard":this.flipboardShare(e,i.attrs);break;case"weibo":this.weiboShare(e,i.attrs);break;default:return}}}],j=["$window","socialshareConf","Socialshare","$log",function(e,t,i){var n=function(n,o,a){for(var s,l=0,c=(function(){return!(a.socialshareProvider in L)||void L[a.socialshareProvider](e,a,o)});l<t.length;l+=1)if(t[l].provider===a.socialshareProvider){s=t[l];break}r.indexOf(s.provider)===-1&&i.warn("Invalid Provider Name : "+a.socialshareProvider),a.socialshareMobileiframe=a.socialshareMobileiframe||s.conf.mobile_iframe,a.socialshareQuote=a.socialshareQuote||s.conf.quote,a.socialshareTitle=a.socialshareTitle||s.conf.title,a.socialshareUrl=a.socialshareUrl||s.conf.url||s.conf.href,a.socialshareText=a.socialshareText||s.conf.text,a.socialshareMedia=a.socialshareMedia||s.conf.media,a.socialshareType=a.socialshareType||s.conf.type,a.socialshareVia=a.socialshareVia||s.conf.via,a.socialshareTo=a.socialshareTo||s.conf.to,a.socialshareFrom=a.socialshareFrom||s.conf.from,a.socialshareRef=a.socialshareRef||s.conf.ref,a.socialshareDislay=a.socialshareDislay||s.conf.display,a.socialshareSource=a.socialshareSource||s.conf.source,a.socialshareCaption=a.socialshareCaption||s.conf.caption,a.socialshareRedirectUri=a.socialshareRedirectUri||s.conf.redirectUri,a.socialshareTrigger=a.socialshareTrigger||s.conf.trigger,a.socialsharePopupHeight=a.socialsharePopupHeight||s.conf.popupHeight,a.socialsharePopupWidth=a.socialsharePopupWidth||s.conf.popupWidth,a.socialshareSubreddit=a.socialshareSubreddit||s.conf.subreddit,a.socialshareDescription=a.socialshareDescription||s.conf.description,a.socialshareFollow=a.socialshareFollow||s.conf.follow,a.socialshareHashtags=a.socialshareHashtags||s.conf.hashtags,a.socialshareBody=a.socialshareBody||s.conf.body,a.socialshareSubject=a.socialshareSubject||s.conf.subject,a.socialshareCc=a.socialshareCc||s.conf.cc,a.socialshareBcc=a.socialshareBcc||s.conf.bcc,a.socialshareTrigger?o.bind(a.socialshareTrigger,c):c()};return{restrict:"A",link:n}}],L={email:a,facebook:o,"facebook-messenger":s,twitter:l,google:c,reddit:u,stumbleupon:d,linkedin:f,pinterest:h,digg:p,tumblr:v,vk:y,ok:g,delicious:m,buffer:b,hackernews:_,flipboard:w,pocket:T,wordpress:S,xing:E,evernote:k,whatsapp:O,sms:R,telegram:P,viber:C,skype:I,weibo:A};e.module("720kb.socialshare",[]).provider(t+"Conf",n).service(i,x).directive(t,j)}(angular)},1003:function(e,t){+function(){"use strict";var e=angular.module("pdfjsViewer",[]);e.provider("pdfjsViewerConfig",function(){var e={workerSrc:null,cmapDir:null,imageResourcesPath:null,disableWorker:!1,verbosity:null};this.setWorkerSrc=function(t){e.workerSrc=t},this.setCmapDir=function(t){e.cmapDir=t},this.setImageDir=function(t){e.imageDir=t},this.disableWorker=function(t){"undefined"==typeof t&&(t=!0),e.disableWorker=t},this.setVerbosity=function(t){e.verbosity=t},this.$get=function(){return e}}),e.run(["pdfjsViewerConfig",function(e){if(e.workerSrc&&(PDFJS.workerSrc=e.workerSrc),e.cmapDir&&(PDFJS.cMapUrl=e.cmapDir),e.imageDir&&(PDFJS.imageResourcesPath=e.imageDir),e.disableWorker&&(PDFJS.disableWorker=!0),null!==e.verbosity){var t=e.verbosity;"string"==typeof t&&(t=PDFJS.VERBOSITY_LEVELS[t]),PDFJS.verbosity=e.verbosity}}]),e.directive("pdfjsViewer",["$interval",function(e){return{template:'<pdfjs-wrapper>\n    <div id="outerContainer">\n\n      <div id="sidebarContainer">\n        <div id="toolbarSidebar">\n          <div class="splitToolbarButton toggled">\n            <button id="viewThumbnail" class="toolbarButton group toggled" title="Show Thumbnails" tabindex="2" data-l10n-id="thumbs">\n               <span data-l10n-id="thumbs_label">Thumbnails</span>\n            </button>\n            <button id="viewOutline" class="toolbarButton group" title="Show Document Outline (double-click to expand/collapse all items)" tabindex="3" data-l10n-id="document_outline">\n               <span data-l10n-id="document_outline_label">Document Outline</span>\n            </button>\n            <button id="viewAttachments" class="toolbarButton group" title="Show Attachments" tabindex="4" data-l10n-id="attachments">\n               <span data-l10n-id="attachments_label">Attachments</span>\n            </button>\n          </div>\n        </div>\n        <div id="sidebarContent">\n          <div id="thumbnailView">\n          </div>\n          <div id="outlineView" class="hidden">\n          </div>\n          <div id="attachmentsView" class="hidden">\n          </div>\n        </div>\n      </div>  <!-- sidebarContainer -->\n\n      <div id="mainContainer">\n        <div class="findbar hidden doorHanger hiddenSmallView" id="findbar">\n          <label for="findInput" class="toolbarLabel" data-l10n-id="find_label">Find:</label>\n          <input id="findInput" class="toolbarField" tabindex="91">\n          <div class="splitToolbarButton">\n            <button class="toolbarButton findPrevious" title="" id="findPrevious" tabindex="92" data-l10n-id="find_previous">\n              <span data-l10n-id="find_previous_label">Previous</span>\n            </button>\n            <div class="splitToolbarButtonSeparator"></div>\n            <button class="toolbarButton findNext" title="" id="findNext" tabindex="93" data-l10n-id="find_next">\n              <span data-l10n-id="find_next_label">Next</span>\n            </button>\n          </div>\n          <input type="checkbox" id="findHighlightAll" class="toolbarField" tabindex="94">\n          <label for="findHighlightAll" class="toolbarLabel" data-l10n-id="find_highlight">Highlight all</label>\n          <input type="checkbox" id="findMatchCase" class="toolbarField" tabindex="95">\n          <label for="findMatchCase" class="toolbarLabel" data-l10n-id="find_match_case_label">Match case</label>\n          <span id="findResultsCount" class="toolbarLabel hidden"></span>\n          <span id="findMsg" class="toolbarLabel"></span>\n        </div>  <!-- findbar -->\n\n        <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">\n          <div id="secondaryToolbarButtonContainer">\n            <button id="secondaryPresentationMode" class="secondaryToolbarButton presentationMode visibleLargeView" title="Switch to Presentation Mode" tabindex="51" data-l10n-id="presentation_mode">\n              <span data-l10n-id="presentation_mode_label">Presentation Mode</span>\n            </button>\n\n            <button id="secondaryOpenFile" class="secondaryToolbarButton openFile visibleLargeView" title="Open File" tabindex="52" data-l10n-id="open_file">\n              <span data-l10n-id="open_file_label">Open</span>\n            </button>\n\n            <button id="secondaryPrint" class="secondaryToolbarButton print visibleMediumView" title="Print" tabindex="53" data-l10n-id="print">\n              <span data-l10n-id="print_label">Print</span>\n            </button>\n\n            <button id="secondaryDownload" class="secondaryToolbarButton download visibleMediumView" title="Download" tabindex="54" data-l10n-id="download">\n              <span data-l10n-id="download_label">Download</span>\n            </button>\n\n            <a href="#" id="secondaryViewBookmark" class="secondaryToolbarButton bookmark visibleSmallView" title="Current view (copy or open in new window)" tabindex="55" data-l10n-id="bookmark">\n              <span data-l10n-id="bookmark_label">Current View</span>\n            </a>\n\n            <div class="horizontalToolbarSeparator visibleLargeView"></div>\n\n            <button id="firstPage" class="secondaryToolbarButton firstPage" title="Go to First Page" tabindex="56" data-l10n-id="first_page">\n              <span data-l10n-id="first_page_label">Go to First Page</span>\n            </button>\n            <button id="lastPage" class="secondaryToolbarButton lastPage" title="Go to Last Page" tabindex="57" data-l10n-id="last_page">\n              <span data-l10n-id="last_page_label">Go to Last Page</span>\n            </button>\n\n            <div class="horizontalToolbarSeparator"></div>\n\n            <button id="pageRotateCw" class="secondaryToolbarButton rotateCw" title="Rotate Clockwise" tabindex="58" data-l10n-id="page_rotate_cw">\n              <span data-l10n-id="page_rotate_cw_label">Rotate Clockwise</span>\n            </button>\n            <button id="pageRotateCcw" class="secondaryToolbarButton rotateCcw" title="Rotate Counterclockwise" tabindex="59" data-l10n-id="page_rotate_ccw">\n              <span data-l10n-id="page_rotate_ccw_label">Rotate Counterclockwise</span>\n            </button>\n\n            <div class="horizontalToolbarSeparator"></div>\n\n            <button id="toggleHandTool" class="secondaryToolbarButton handTool" title="Enable hand tool" tabindex="60" data-l10n-id="hand_tool_enable">\n              <span data-l10n-id="hand_tool_enable_label">Enable hand tool</span>\n            </button>\n\n            <div class="horizontalToolbarSeparator"></div>\n\n            <button id="documentProperties" class="secondaryToolbarButton documentProperties" title="Document Properties…" tabindex="61" data-l10n-id="document_properties">\n              <span data-l10n-id="document_properties_label">Document Properties…</span>\n            </button>\n          </div>\n        </div>  <!-- secondaryToolbar -->\n\n        <div class="toolbar">\n          <div id="toolbarContainer">\n            <div id="toolbarViewer">\n              <div id="toolbarViewerLeft">\n                <button id="sidebarToggle" class="toolbarButton" title="Toggle Sidebar" tabindex="11" data-l10n-id="toggle_sidebar">\n                  <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>\n                </button>\n                <div class="toolbarButtonSpacer"></div>\n                <button id="viewFind" class="toolbarButton group hiddenSmallView" title="Find in Document" tabindex="12" data-l10n-id="findbar">\n                   <span data-l10n-id="findbar_label">Find</span>\n                </button>\n                <div class="splitToolbarButton">\n                  <button class="toolbarButton pageUp" title="Previous Page" id="previous" tabindex="13" data-l10n-id="previous">\n                    <span data-l10n-id="previous_label">Previous</span>\n                  </button>\n                  <div class="splitToolbarButtonSeparator"></div>\n                  <button class="toolbarButton pageDown" title="Next Page" id="next" tabindex="14" data-l10n-id="next">\n                    <span data-l10n-id="next_label">Next</span>\n                  </button>\n                </div>\n                <input type="number" id="pageNumber" class="toolbarField pageNumber" title="Page" value="1" size="4" min="1" tabindex="15" data-l10n-id="page">\n                <span id="numPages" class="toolbarLabel"></span>\n              </div>\n              <div id="toolbarViewerRight">\n                <button id="presentationMode" class="toolbarButton presentationMode hiddenLargeView" title="Switch to Presentation Mode" tabindex="31" data-l10n-id="presentation_mode">\n                  <span data-l10n-id="presentation_mode_label">Presentation Mode</span>\n                </button>\n\n                <button id="openFile" class="toolbarButton openFile hiddenLargeView" title="Open File" tabindex="32" data-l10n-id="open_file">\n                  <span data-l10n-id="open_file_label">Open</span>\n                </button>\n\n                <button id="print" class="toolbarButton print hiddenMediumView" title="Print" tabindex="33" data-l10n-id="print">\n                  <span data-l10n-id="print_label">Print</span>\n                </button>\n\n                <button id="download" class="toolbarButton download hiddenMediumView" title="Download" tabindex="34" data-l10n-id="download">\n                  <span data-l10n-id="download_label">Download</span>\n                </button>\n                <a href="#" id="viewBookmark" class="toolbarButton bookmark hiddenSmallView" title="Current view (copy or open in new window)" tabindex="35" data-l10n-id="bookmark">\n                  <span data-l10n-id="bookmark_label">Current View</span>\n                </a>\n\n                <div class="verticalToolbarSeparator hiddenSmallView"></div>\n\n                <button id="secondaryToolbarToggle" class="toolbarButton" title="Tools" tabindex="36" data-l10n-id="tools">\n                  <span data-l10n-id="tools_label">Tools</span>\n                </button>\n              </div>\n              <div id="toolbarViewerMiddle">\n                <div class="splitToolbarButton">\n                  <button id="zoomOut" class="toolbarButton zoomOut" title="Zoom Out" tabindex="21" data-l10n-id="zoom_out">\n                    <span data-l10n-id="zoom_out_label">Zoom Out</span>\n                  </button>\n                  <div class="splitToolbarButtonSeparator"></div>\n                  <button id="zoomIn" class="toolbarButton zoomIn" title="Zoom In" tabindex="22" data-l10n-id="zoom_in">\n                    <span data-l10n-id="zoom_in_label">Zoom In</span>\n                   </button>\n                </div>\n                <span id="scaleSelectContainer" class="dropdownToolbarButton">\n                  <select id="scaleSelect" title="Zoom" tabindex="23" data-l10n-id="zoom">\n                    <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">Automatic Zoom</option>\n                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">Actual Size</option>\n                    <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">Fit Page</option>\n                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">Full Width</option>\n                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"></option>\n                    <option title="" value="0.5" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 50 }\'>50%</option>\n                    <option title="" value="0.75" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 75 }\'>75%</option>\n                    <option title="" value="1" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 100 }\'>100%</option>\n                    <option title="" value="1.25" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 125 }\'>125%</option>\n                    <option title="" value="1.5" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 150 }\'>150%</option>\n                    <option title="" value="2" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 200 }\'>200%</option>\n                    <option title="" value="3" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 300 }\'>300%</option>\n                    <option title="" value="4" data-l10n-id="page_scale_percent" data-l10n-args=\'{ "scale": 400 }\'>400%</option>\n                  </select>\n                </span>\n              </div>\n            </div>\n            <div id="loadingBar">\n              <div class="progress">\n                <div class="glimmer">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <menu type="context" id="viewerContextMenu">\n          <menuitem id="contextFirstPage" label="First Page"\n                    data-l10n-id="first_page"></menuitem>\n          <menuitem id="contextLastPage" label="Last Page"\n                    data-l10n-id="last_page"></menuitem>\n          <menuitem id="contextPageRotateCw" label="Rotate Clockwise"\n                    data-l10n-id="page_rotate_cw"></menuitem>\n          <menuitem id="contextPageRotateCcw" label="Rotate Counter-Clockwise"\n                    data-l10n-id="page_rotate_ccw"></menuitem>\n        </menu>\n\n        <div id="viewerContainer" tabindex="0">\n          <div id="viewer" class="pdfViewer"></div>\n        </div>\n\n        <div id="errorWrapper" hidden=\'true\'>\n          <div id="errorMessageLeft">\n            <span id="errorMessage"></span>\n            <button id="errorShowMore" data-l10n-id="error_more_info">\n              More Information\n            </button>\n            <button id="errorShowLess" data-l10n-id="error_less_info" hidden=\'true\'>\n              Less Information\n            </button>\n          </div>\n          <div id="errorMessageRight">\n            <button id="errorClose" data-l10n-id="error_close">\n              Close\n            </button>\n          </div>\n          <div class="clearBoth"></div>\n          <textarea id="errorMoreInfo" hidden=\'true\' readonly="readonly"></textarea>\n        </div>\n      </div> <!-- mainContainer -->\n\n      <div id="overlayContainer" class="hidden">\n        <div id="passwordOverlay" class="container hidden">\n          <div class="dialog">\n            <div class="row">\n              <p id="passwordText" data-l10n-id="password_label">Enter the password to open this PDF file:</p>\n            </div>\n            <div class="row">\n              <!-- The type="password" attribute is set via script, to prevent warnings in Firefox for all http:// documents. -->\n              <input id="password" class="toolbarField">\n            </div>\n            <div class="buttonRow">\n              <button id="passwordCancel" class="overlayButton"><span data-l10n-id="password_cancel">Cancel</span></button>\n              <button id="passwordSubmit" class="overlayButton"><span data-l10n-id="password_ok">OK</span></button>\n            </div>\n          </div>\n        </div>\n        <div id="documentPropertiesOverlay" class="container hidden">\n          <div class="dialog">\n            <div class="row">\n              <span data-l10n-id="document_properties_file_name">File name:</span> <p id="fileNameField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_file_size">File size:</span> <p id="fileSizeField">-</p>\n            </div>\n            <div class="separator"></div>\n            <div class="row">\n              <span data-l10n-id="document_properties_title">Title:</span> <p id="titleField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_author">Author:</span> <p id="authorField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_subject">Subject:</span> <p id="subjectField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_keywords">Keywords:</span> <p id="keywordsField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_creation_date">Creation Date:</span> <p id="creationDateField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_modification_date">Modification Date:</span> <p id="modificationDateField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_creator">Creator:</span> <p id="creatorField">-</p>\n            </div>\n            <div class="separator"></div>\n            <div class="row">\n              <span data-l10n-id="document_properties_producer">PDF Producer:</span> <p id="producerField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_version">PDF Version:</span> <p id="versionField">-</p>\n            </div>\n            <div class="row">\n              <span data-l10n-id="document_properties_page_count">Page Count:</span> <p id="pageCountField">-</p>\n            </div>\n            <div class="buttonRow">\n              <button id="documentPropertiesClose" class="overlayButton"><span data-l10n-id="document_properties_close">Close</span></button>\n            </div>\n          </div>\n        </div>\n        <div id="printServiceOverlay" class="container hidden">\n          <div class="dialog">\n            <div class="row">\n              <span data-l10n-id="print_progress_message">Preparing document for printing…</span>\n            </div>\n            <div class="row">\n              <progress value="0" max="100"></progress>\n              <span data-l10n-id="print_progress_percent" data-l10n-args=\'{ "progress": 0 }\' class="relative-progress">0%</span>\n            </div>\n            <div class="buttonRow">\n              <button id="printCancel" class="overlayButton"><span data-l10n-id="print_progress_close">Cancel</span></button>\n            </div>\n          </div>\n        </div>\n      </div>  <!-- overlayContainer -->\n\n    </div> <!-- outerContainer -->\n    <div id="printContainer"></div>\n  </pdfjs-wrapper>',
restrict:"E",scope:{onInit:"&",onPageLoad:"&",scale:"=?",src:"@?",data:"=?"},link:function(t,i,r){function n(){if(o=!0,"true"===r.removeMouseListeners){window.removeEventListener("DOMMouseScroll",handleMouseWheel),window.removeEventListener("mousewheel",handleMouseWheel);var e=document.querySelectorAll(".page");angular.forEach(e,function(e){angular.element(e).children().css("pointer-events","none")})}t.onInit&&t.onInit()}i.children().wrap('<div class="pdfjs" style="width: 100%; height: 100%;"></div>');var o=!1,a={},s=0;if(!window.PDFJS)return console.warn("PDFJS is not set! Make sure that pdf.js is loaded before angular-pdfjs-viewer.js is loaded.");window.PDFJS.webViewerLoad("");var l=e(function(){if(window.PDFViewerApplication){var e=window.PDFViewerApplication.pdfViewer;e?t.scale!==e.currentScale&&(a={},s=0,t.scale=e.currentScale):console.warn("PDFViewerApplication.pdfViewer is not set");var i=document.querySelectorAll(".page");angular.forEach(i,function(e){var i=angular.element(e),r=i.attr("data-page-number");return i.attr("data-loaded")?void(r in a||(o||n(),t.onPageLoad&&t.onPageLoad({page:r})===!1||(a[r]=!0,s++))):void delete a[r]})}},200);i.on("$destroy",function(){e.cancel(l)}),t.$watchGroup([function(){return t.src},function(){return t.data}],function(e){var t=e[0],i=e[1];(t||i)&&window.PDFViewerApplication.open(t||i)}),t.$watch(function(){return r},function(){"false"===r.open&&(document.getElementById("openFile").setAttribute("hidden","true"),document.getElementById("secondaryOpenFile").setAttribute("hidden","true")),"false"===r.download&&(document.getElementById("download").setAttribute("hidden","true"),document.getElementById("secondaryDownload").setAttribute("hidden","true")),"false"===r.print&&(document.getElementById("print").setAttribute("hidden","true"),document.getElementById("secondaryPrint").setAttribute("hidden","true")),r.width&&(document.getElementById("outerContainer").style.width=r.width),r.height&&(document.getElementById("outerContainer").style.height=r.height)})}}}])}()},1004:function(e,t,i){var r,n,o;!function(a,s){"function".match(/^(object|function)$/)&&i(1005)?(n=[i(5),i(969)],r=s,o="function"==typeof r?r.apply(t,n):r,!(void 0!==o&&(e.exports=o))):"object"==typeof e&&e.exports?e.exports=s(i(5),i(969)):s(a.angular,a.videojs)}(this,function(e,t){"use strict";function i(){return t&&t.VERSION?t.VERSION:"0.0.0"}function r(e){return"VIDEO"===e[0].nodeName||"AUDIO"===e[0].nodeName}var n=e.module("vjs.video",[]);return n.controller("VjsVideoController",["$scope",function(n){function o(e,i){var n,o=null;if(!t)throw new Error("video.js was not found!");if(i){if(n=e[0].querySelectorAll("video, audio"),0===n.length)throw new Error("video tag must be defined within container directive!");if(n.length>1)throw new Error("only one video can be defined within the container directive!");o=n[0]}else{if(!r(e))throw new Error("directive must be attached to a video or audio tag!");o=e[0]}return o}function a(e,t){var i,r,n,o=t,a=document.createElement("style"),s=function(e){var t=e.split(":"),i='the ratio must either be "wide", "standard" or decimal values in the format of w:h';if(2!==t.length)throw new Error(i);if(isNaN(t[0])||isNaN(t[1]))throw new Error(i);if(0===Number(t[0])||0===Number(t[1]))throw new Error("neither the width or height ratio can be zero!");return Number(t[1])/Number(t[0])*100},l=function(e){var t,i=e[0].querySelector(".vjs-tech");if(!i)throw new Error("Failed to find instance of video-js class!");return t="vjs-container-"+i.getAttribute("id"),e[0].setAttribute("id",t),t};switch(o||(o="16:9"),o){case"wide":o="16:9";break;case"standard":o="4:3"}i=l(e),r=s(o),n=["#",i," ",".video-js {padding-top:",r,"%;}\n",".vjs-fullscreen {padding-top: 0px;}"].join(""),a.type="text/css",a.rel="stylesheet",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),e[0].appendChild(a)}function s(e,t){var i,r,n="a sources and/or tracks element must be defined for the vjs-media attribute",o="sources must be an array of objects with at least one item",a="tracks must be an array of objects with at least one item";if(e.vjsMedia){if(!e.vjsMedia.sources&&!e.vjsMedia.tracks)throw new Error(n);if(e.vjsMedia.sources&&!(e.vjsMedia.sources instanceof Array))throw new Error(o);if(e.vjsMedia.tracks&&!(e.vjsMedia.tracks instanceof Array))throw new Error(a);i=document.createElement("div"),e.vjsMedia.sources&&e.vjsMedia.sources.forEach(function(e){r=document.createElement("source"),r.setAttribute("src",e.src||""),r.setAttribute("type",e.type||""),i.appendChild(r)}),e.vjsMedia.tracks&&e.vjsMedia.tracks.forEach(function(e){r=document.createElement("track"),r.setAttribute("kind",e.kind||""),r.setAttribute("label",e.label||""),r.setAttribute("src",e.src||""),r.setAttribute("srclang",e.srclang||""),e.default===!0&&r.setAttribute("default",""),i.appendChild(r)}),t.call(void 0,{element:i})}}function l(o,l,c,u){var d,f=l.vjsSetup||{},h=l.vjsRatio,p=!r(c)&&!i().match(/^5\./);if(!t)return null;l.vjsMedia&&l.vjsMedia.poster&&(f.poster=l.vjsMedia.poster),s(l,u),d=n.$watch(function(){return l.vjsMedia},function(i,r){i&&!e.equals(i,r)&&(d(),p?(t(o).dispose(),n.$emit("vjsVideoMediaChanged")):n.$emit("vjsVideoMediaChanged"))});var v=t(o,f,function(){p&&a(c,h)});v&&n.$emit("vjsVideoReady",{id:o.getAttribute("id"),vid:v,player:v,controlBar:v.controlBar}),n.$on("$destroy",function(){t(o).dispose()})}var c=this;c.initVideoJs=l,c.getVidElement=o}]),n.directive("vjsVideo",["$compile","$timeout",function(e,t){return{restrict:"A",transclude:!0,scope:{vjsSetup:"=?",vjsRatio:"@",vjsMedia:"=?"},controller:"VjsVideoController",controllerAs:"vjsCtrl",bindToController:!0,link:function(r,n,o,a,s){var l,c,u,d,f=function(e){n.children().remove(),n.append(e.element.childNodes)},h=function(){l=a.getVidElement(n),i().match(/^5\./)&&a.vjsRatio&&(a.vjsSetup||(a.vjsSetup={}),a.vjsSetup.aspectRatio=a.vjsRatio),s(function(e){n.append(e),a.initVideoJs(l,a,n,f)})};u=n.clone(),n.parent().hasClass("vjs-video-wrap")||n.wrap('<div class="vjs-video-wrap"></div>'),c=n.parent(),r.$on("vjsVideoMediaChanged",function(){var i=c.children()[0];t(function(){r.$destroy()}),d=u.clone(),c.append(d),d=e(d)(r.$parent),i.remove()}),h()}}}]),n.directive("vjsVideoContainer",[function(){return{restrict:"AE",transclude:!0,template:'<div class="vjs-directive-container"><div ng-transclude></div></div>',scope:{vjsSetup:"=?",vjsRatio:"@",vjsMedia:"=?"},controller:"VjsVideoController",controllerAs:"vjsCtrl",bindToController:!0,link:function(e,t,r,n,o){var a,s,l=function(e){var i=t[0].querySelector("video, audio");if(i){for(;i.firstChild;)i.removeChild(i.firstChild);for(;e.element.childNodes.length>0;)i.appendChild(e.element.childNodes[0])}},c=function(){if(a=n.getVidElement(t,!0),null!==a.getAttribute("vjs-video"))throw new Error("vjs-video should not be used on the video tag when using vjs-video-container!");if(null!==a.getAttribute("vjs-setup")||null!==a.getAttribute("vjs-media")||null!==a.getAttribute("vjs-ratio"))throw new Error("directive attributes should not be used on the video tag when using vjs-video-container!");i().match(/^5\./)?n.vjsRatio&&(n.vjsSetup||(n.vjsSetup={}),n.vjsSetup.aspectRatio=n.vjsRatio):(a.setAttribute("width","auto"),a.setAttribute("height","auto")),n.initVideoJs(a,n,t,l)};o(function(e){s=e.clone()}),e.$on("vjsVideoMediaChanged",function(){t.children().remove(),t.append(s.clone()),c()}),c()}}}]),n})},1005:function(e,t){(function(t){e.exports=t}).call(t,{})},1006:function(e,t){},1007:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){t&&(v=t),h.default.setTimeout(y,e)}t.__esModule=!0,t.hasLoaded=t.autoSetupTimeout=t.autoSetup=void 0;var a=i(938),s=n(a),l=i(945),c=n(l),u=i(939),d=r(u),f=i(940),h=r(f),p=!1,v=void 0,y=function(){if(s.isReal()){var e=d.default.getElementsByTagName("video"),t=d.default.getElementsByTagName("audio"),i=[];if(e&&e.length>0)for(var r=0,n=e.length;r<n;r++)i.push(e[r]);if(t&&t.length>0)for(var a=0,l=t.length;a<l;a++)i.push(t[a]);if(i&&i.length>0)for(var c=0,u=i.length;c<u;c++){var f=i[c];if(!f||!f.getAttribute){o(1);break}if(void 0===f.player){var h=f.getAttribute("data-setup");null!==h&&v(f)}}else p||o(1)}};s.isReal()&&"complete"===d.default.readyState?p=!0:c.one(h.default,"load",function(){p=!0});var g=function(){return p};t.autoSetup=y,t.autoSetupTimeout=o,t.hasLoaded=g},1008:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;for(var n=i(939),o=r(n),a={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=s[0],c=void 0,u=0;u<s.length;u++)if(s[u][1]in o.default){c=s[u];break}if(c)for(var d=0;d<c.length;d++)a[l[d]]=c[d];t.default=a},1009:function(e,t){function i(e,t){var i,r=null;try{i=JSON.parse(e,t)}catch(e){r=e}return[r,i]}e.exports=i},1010:function(e,t,i){"use strict";t.__esModule=!0;var r=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,r){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},n=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),n=Array.prototype.map.call(t,function(e){var t=r(e.track);return e.src&&(t.src=e.src),t});return n.concat(Array.prototype.filter.call(e.textTracks(),function(e){return i.indexOf(e)===-1}).map(r))},o=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()};t.default={textTracksToJson:n,jsonToTextTracks:o,trackToJson_:r}},1011:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(941),c=n(l),u=i(939),d=r(u),f=i(953),h=r(f),p=i(957),v=r(p),y=0,g=1,m=2,b=3,_=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=a(this,e.call(this)),n=void 0,s=r;if(c.IS_IE8){s=d.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(s[l]=t.prototype[l])}var u=new v.default(i);if(s.kind=u.kind,s.src=u.src,s.srclang=u.language,s.label=u.label,s.default=u.default,Object.defineProperty(s,"readyState",{get:function(){return n}}),Object.defineProperty(s,"track",{get:function(){return u}}),n=y,u.addEventListener("loadeddata",function(){n=m,s.trigger({type:"load",target:s})}),c.IS_IE8){var f;return f=s,a(r,f)}return r}return s(t,e),t}(h.default);_.prototype.allowedEvents_={load:"load"},_.NONE=y,_.LOADING=g,_.LOADED=m,_.ERROR=b,t.default=_},1012:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=i(941),s=n(a),l=i(939),c=r(l),u=function(){function e(t){o(this,e);var i=this;if(s.IS_IE8){i=c.default.createElement("custom");for(var r in e.prototype)"constructor"!==r&&(i[r]=e.prototype[r])}if(e.prototype.setCues_.call(i,t),Object.defineProperty(i,"length",{get:function(){return this.length_}}),s.IS_IE8)return i}return e.prototype.setCues_=function(e){var t=this.length||0,i=0,r=e.length;this.cues_=e,this.length_=e.length;var n=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(i=t;i<r;i++)n.call(this,i)},e.prototype.getCueById=function(e){for(var t=null,i=0,r=this.length;i<r;i++){var n=this[i];if(n.id===e){t=n;break}}return t},e}();t.default=u},1013:function(e,t){function i(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=i;var r=Object.prototype.toString},1014:function(e,t){var i=function(e){return e.replace(/^\s+|\s+$/g,"")},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var t={},n=i(e).split("\n"),o=0;o<n.length;o++){var a=n[o],s=a.indexOf(":"),l=i(a.slice(0,s)).toLowerCase(),c=i(a.slice(s+1));"undefined"==typeof t[l]?t[l]=c:r(t[l])?t[l].push(c):t[l]=[t[l],c]}return t}},1015:function(e,t){function i(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)r.call(i,n)&&(e[n]=i[n])}return e}e.exports=i;var r=Object.prototype.hasOwnProperty},1016:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=i(941),s=n(a),l=i(939),c=r(l),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e);var i=this;if(s.IS_IE8){i=c.default.createElement("custom");for(var r in e.prototype)"constructor"!==r&&(i[r]=e.prototype[r])}i.trackElements_=[],Object.defineProperty(i,"length",{get:function(){return this.trackElements_.length}});for(var n=0,a=t.length;n<a;n++)i.addTrackElement_(t[n]);if(s.IS_IE8)return i}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();t.default=u},1017:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(960),c=n(l),u=i(937),d=r(u),f=i(941),h=r(f),p=i(939),v=n(p),y=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);var s=void 0;if(h.IS_IE8){s=v.default.createElement("custom");for(var l in c.default.prototype)"constructor"!==l&&(s[l]=c.default.prototype[l]);for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}return s=i=a(this,e.call(this,n,s)),r=s,a(i,r)}return s(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",d.bind(this,function(){this.trigger("change")}))},t}(c.default);t.default=y},1018:function(e,t,i){var r=i(1019),n=e.exports={WebVTT:i(1020),VTTCue:i(1021),VTTRegion:i(1022)};r.vttjs=n,r.WebVTT=n.WebVTT;var o=n.VTTCue,a=n.VTTRegion,s=r.VTTCue,l=r.VTTRegion;n.shim=function(){r.VTTCue=o,r.VTTRegion=a},n.restore=function(){r.VTTCue=s,r.VTTRegion=l},r.VTTCue||n.shim()},1019:function(e,t,i){(function(t){var i;i="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},e.exports=i}).call(t,i(68))},1020:function(e,t){function i(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function r(e){function t(e,t,i,r){return 3600*(0|e)+60*(0|t)+(0|i)+(0|r)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function n(){this.values=y(null)}function o(e,t,i,r){var n=r?e.split(r):[e];for(var o in n)if("string"==typeof n[o]){var a=n[o].split(i);if(2===a.length){var s=a[0],l=a[1];t(s,l)}}}function a(e,t,a){function s(){var t=r(e);if(null===t)throw new i(i.Errors.BadTimeStamp,"Malformed timestamp: "+u);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(e,t){var i=new n;o(e,function(e,t){switch(e){case"region":for(var r=a.length-1;r>=0;r--)if(a[r].id===t){i.set(e,a[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),o=n[0];i.integer(e,o),i.percent(e,o)?i.set("snapToLines",!1):null,i.alt(e,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical",""),t.line=i.get("line","auto"),t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align","middle"),t.position=i.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function c(){e=e.replace(/^\s+/,"")}var u=e;if(c(),t.startTime=s(),c(),"-->"!==e.substr(0,3))throw new i(i.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+u);e=e.substr(3),c(),t.endTime=s(),c(),l(e,t)}function s(e,t){function i(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var i=t.match(/^([^<]*)(<[^>]*>?)?/);return e(i[1]?i[1]:i[2])}function n(e){return g[e]}function o(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],n);return e}function a(e,t){return!_[t.localName]||_[t.localName]===e.localName}function s(t,i){var r=m[t];if(!r)return null;var n=e.document.createElement(r);n.localName=r;var o=b[t];return o&&i&&(n[o]=i.trim()),n}for(var l,c=e.document.createElement("div"),u=c,d=[];null!==(l=i());)if("<"!==l[0])u.appendChild(e.document.createTextNode(o(l)));else{if("/"===l[1]){d.length&&d[d.length-1]===l.substr(2).replace(">","")&&(d.pop(),u=u.parentNode);continue}var f,h=r(l.substr(1,l.length-2));if(h){f=e.document.createProcessingInstruction("timestamp",h),u.appendChild(f);continue}var p=l.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(f=s(p[1],p[3]),!f)continue;if(!a(u,f))continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),d.push(p[1]),u.appendChild(f),u=f}return c}function l(e){for(var t=0;t<w.length;t++){var i=w[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function c(e){function t(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function i(e){if(!e||!e.length)return null;var r=e.pop(),n=r.textContent||r.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===r.tagName?i(e):r.childNodes?(t(e,r),i(e)):void 0}var r,n=[],o="";if(!e||!e.childNodes)return"ltr";for(t(n,e);o=i(n);)for(var a=0;a<o.length;a++)if(r=o.charCodeAt(a),l(r))return"rtl";return"ltr"}function u(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,r=0,n=0;n<i.length&&i[n]!==t;n++)"showing"===i[n].mode&&r++;return++r*-1}function d(){}function f(e,t,i){var r=/MSIE\s8\.0/.test(navigator.userAgent),n="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";r&&(n="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),d.call(this),this.cue=t,this.cueDiv=s(e,t.text);var a={color:n,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=e.document.createElement("div"),a={textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},r||(a.direction=c(this.cueDiv),a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var l=0;switch(t.positionAlign){case"start":l=t.position;break;case"middle":l=t.position-t.size/2;break;case"end":l=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(l,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(l,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function h(e){var t,i,r,n,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){i=e.div.offsetHeight,r=e.div.offsetWidth,n=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||i,this.bottom=e.bottom||n+(e.height||i),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function p(e,t,i,r){function n(e,t){for(var n,o=new h(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(i,t[s])||e.within(i)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(i))return e;var l=e.intersectPercentage(i);a>l&&(n=new h(e),a=l),e=new h(o)}return n||o}var o=new h(t),a=t.cue,s=u(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var d=o.lineHeight,f=d*Math.round(s),p=i[c]+d,v=l[0];Math.abs(f)>p&&(f=f<0?-1:1,f*=Math.ceil(p/d)*d),s<0&&(f+=""===a.vertical?i.height:i.width,l=l.reverse()),o.move(v,f)}else{var y=o.lineHeight/i.height*100;switch(a.lineAlign){case"middle":s-=y/2;break;case"end":s-=y}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new h(t)}var g=n(o,l);t.move(g.toCSSCompatValues(i))}function v(){}var y=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();i.prototype=y(Error.prototype),i.prototype.constructor=i,i.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},n.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var i;return!!((i=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},b={v:"title",lang:"lang"},_={rt:"ruby"},w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];d.prototype.applyStyles=function(e,t){t=t||this.div;for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},d.prototype.formatStyle=function(e,t){return 0===e?0:e+t},f.prototype=y(d.prototype),f.prototype.constructor=f,h.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},h.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},h.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},h.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},h.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},h.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*i;return r/(this.height*this.width)},h.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},h.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||i};return n},v.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},v.convertCueToDOMTree=function(e,t){return e&&t?s(e,t):null};var T=.05,S="sans-serif",E="1.5%";v.processCues=function(e,t,i){function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=E,i.appendChild(n),r(t)){var o=[],a=h.getSimpleBoxPosition(n),s=Math.round(a.height*T*100)/100,l={font:s+"px "+S};!function(){for(var i,r,s=0;s<t.length;s++)r=t[s],i=new f(e,r,l),n.appendChild(i.div),p(e,i,a,o),r.displayState=i.div,o.push(h.getSimpleBoxPosition(i))}()}else for(var c=0;c<t.length;c++)n.appendChild(t[c].displayState)},v.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},v.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof i))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=u.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,u.buffer=e.substr(t),i}function s(e){var t=new n;if(o(e,function(e,i){switch(e){case"id":t.set(e,i);break;case"width":t.percent(e,i);break;case"lines":t.integer(e,i);break;case"regionanchor":case"viewportanchor":var r=i.split(",");if(2!==r.length)break;var o=new n;if(o.percent("x",r[0]),o.percent("y",r[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,i,["up"])}},/=/,/\s/),t.has("id")){var i=new(u.vttjs.VTTRegion||u.window.VTTRegion);i.width=t.get("width",100),i.lines=t.get("lines",3),i.regionAnchorX=t.get("regionanchorX",0),i.regionAnchorY=t.get("regionanchorY",100),i.viewportAnchorX=t.get("viewportanchorX",0),i.viewportAnchorY=t.get("viewportanchorY",100),i.scroll=t.get("scroll",""),u.onregion&&u.onregion(i),u.regionList.push({id:t.get("id"),region:i})}}function l(e){var t=new n;o(e,function(e,i){switch(e){case"MPEGT":t.integer(e+"S",i);break;case"LOCA":t.set(e+"L",r(i))}},/[^\d]:/,/,/),u.ontimestampmap&&u.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}function c(e){e.match(/X-TIMESTAMP-MAP/)?o(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":l(t)}},/=/):o(e,function(e,t){switch(e){case"Region":s(t)}},/:/)}var u=this;e&&(u.buffer+=u.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;d=t();var f=d.match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new i(i.Errors.BadSignature);u.state="HEADER"}for(var h=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(h?h=!1:d=t(),u.state){case"HEADER":/:/.test(d)?c(d):d||(u.state="ID");continue;case"NOTE":d||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){u.state="NOTE";break}if(!d)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",d.indexOf("-->")===-1){u.cue.id=d;continue}case"CUE":try{a(d,u.cue,u.regionList)}catch(e){u.reportOrThrowError(e),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var p=d.indexOf("-->")!==-1;if(!d||p&&(h=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=d;continue;case"BADCUE":d||(u.state="ID");continue}}}catch(e){
u.reportOrThrowError(e),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new i(i.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=v},1021:function(e,t){function i(e){if("string"!=typeof e)return!1;var t=s[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){if("string"!=typeof e)return!1;var t=l[e.toLowerCase()];return!!t&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)e[r]=i[r]}return e}function o(e,t,o){var s=this,l=/MSIE\s8\.0/.test(navigator.userAgent),c={};l?s=document.createElement("custom"):c.enumerable=!0,s.hasBeenReset=!1;var u="",d=!1,f=e,h=t,p=o,v=null,y="",g=!0,m="auto",b="start",_=50,w="middle",T=50,S="middle";if(Object.defineProperty(s,"id",n({},c,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",n({},c,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",n({},c,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},c,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},c,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},c,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},c,{get:function(){return y},set:function(e){var t=i(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},c,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},c,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},c,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},c,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},c,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},c,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},c,{get:function(){return S},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}var a="auto",s={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=o},1022:function(e,t){function i(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){return"number"==typeof e&&e>=0&&e<=100}function n(){var e=100,t=3,n=0,o=100,a=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var t=i(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");l=t}}})}var o={"":!0,up:!0};e.exports=n},1023:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=i(950),u=r(c),d=i(948),f=r(d),h=function(e){function t(i,r,a){n(this,t);var s=o(this,e.call(this,i,r,a));if(r.playerOptions.sources&&0!==r.playerOptions.sources.length)i.src(r.playerOptions.sources);else for(var c=0,d=r.playerOptions.techOrder;c<d.length;c++){var h=(0,f.default)(d[c]),p=u.default.getTech(h);if(h||(p=l.default.getComponent(h)),p&&p.isSupported()){i.loadTech_(h);break}}return s}return a(t,e),t}(l.default);l.default.registerComponent("MediaLoader",h),t.default=h},1024:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=e.charAt(0).toUpperCase()+e.slice(1);O["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function c(e){O[e]=function(){return this.el_.vjs_getProperty(e)}}t.__esModule=!0;for(var u=i(950),d=n(u),f=i(938),h=r(f),p=i(954),v=r(p),y=i(949),g=i(1025),m=n(g),b=i(936),_=n(b),w=i(940),T=n(w),S=i(942),E=T.default.navigator,k=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return i.source&&n.ready(function(){this.setSource(i.source)},!0),i.startTime&&n.ready(function(){this.load(),this.play(),this.currentTime(i.startTime)},!0),T.default.videojs=T.default.videojs||{},T.default.videojs.Flash=T.default.videojs.Flash||{},T.default.videojs.Flash.onReady=t.onReady,T.default.videojs.Flash.onEvent=t.onEvent,T.default.videojs.Flash.onError=t.onError,n.on("seeked",function(){this.lastSeekTarget_=void 0}),n}return s(t,e),t.prototype.createEl=function(){var e=this.options_;if(!e.swf){var i="5.4.1";e.swf="//vjs.zencdn.net/swf/"+i+"/video-js.swf"}var r=e.techId,n=(0,S.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),o=(0,S.assign)({wmode:"opaque",bgcolor:"#000000"},e.params),a=(0,S.assign)({id:r,name:r,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,n,o,a),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=v.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var i=this.seekable();i.length&&(t=t>i.start(0)?t:i.start(0),t=t<i.end(i.length-1)?t:i.end(i.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function e(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?(0,y.createTimeRange)():(0,y.createTimeRange)(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?(0,y.createTimeRange)():(0,y.createTimeRange)(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return T.default.performance&&"function"==typeof T.default.performance.now?e.creationTime=T.default.performance.now():T.default.performance&&T.default.performance.timing&&"number"==typeof T.default.performance.timing.navigationStart&&(e.creationTime=T.default.Date.now()-T.default.performance.timing.navigationStart),e},t}(d.default),O=k.prototype,R="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),C="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),P=0;P<R.length;P++)c(R[P]),l(R[P]);for(var I=0;I<C.length;I++)c(C[I]);k.isSupported=function(){return k.version()[0]>=10},d.default.withSourceHandlers(k),k.nativeSourceHandler={},k.nativeSourceHandler.canPlayType=function(e){return e in k.formats?"maybe":""},k.nativeSourceHandler.canHandleSource=function(e,t){function i(e){var t=v.getFileExtension(e);return t?"video/"+t:""}var r=void 0;return r=e.type?e.type.replace(/;.*/,"").toLowerCase():i(e.src),k.nativeSourceHandler.canPlayType(r)},k.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},k.nativeSourceHandler.dispose=function(){},k.registerSourceHandler(k.nativeSourceHandler),k.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},k.onReady=function(e){var t=h.getEl(e),i=t&&t.tech;i&&i.el()&&k.checkReady(i)},k.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){k.checkReady(e)},50))},k.onEvent=function(e,t){var i=h.getEl(e).tech,r=Array.prototype.slice.call(arguments,2);i.setTimeout(function(){i.trigger(t,r)},1)},k.onError=function(e,t){var i=h.getEl(e).tech;return"srcnotfound"===t?i.error(4):void i.error("FLASH: "+t)},k.version=function(){var e="0,0,0";try{e=new T.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{E.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(E.plugins["Shockwave Flash 2.0"]||E.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return e.split(",")},k.embed=function(e,t,i,r){var n=k.getEmbedCode(e,t,i,r),o=h.createEl("div",{innerHTML:n}).childNodes[0];return o},k.getEmbedCode=function(e,t,i,r){var n='<object type="application/x-shockwave-flash" ',o="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;"}),i=(0,S.assign)({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},i),Object.getOwnPropertyNames(i).forEach(function(e){a+='<param name="'+e+'" value="'+i[e]+'" />'}),r=(0,S.assign)({data:e,width:"100%",height:"100%"},r),Object.getOwnPropertyNames(r).forEach(function(e){s+=e+'="'+r[e]+'" '}),""+n+s+">"+a+"</object>"},(0,m.default)(k),_.default.registerComponent("Flash",k),d.default.registerTech("Flash",k),t.default=k},1025:function(e,t,i){"use strict";function r(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var i=e.search(/&(?!\w+=)/),r=void 0;return i!==-1?r=i+1:(i=r=e.lastIndexOf("/")+1,0===i&&(i=r=e.length)),t.connection=e.substring(0,i),t.stream=e.substring(r,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,i){var r=e.rtmpSourceHandler.canPlayType(t.type);return r?r:e.isStreamingSrc(t.src)?"maybe":""},e.rtmpSourceHandler.handleSource=function(t,i,r){var n=e.streamToParts(t.src);i.setRtmpConnection(n.connection),i.setRtmpStream(n.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}t.__esModule=!0,t.default=r},1026:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(951),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=i(938),v=r(p),y=i(941),g=r(y),m=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.update(),i.on("posterchange",h.bind(n,n.update)),n}return s(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=v.createEl("div",{className:"vjs-poster",tabIndex:-1});return g.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=v.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(c.default);d.default.registerComponent("PosterImage",m),t.default=m},1027:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function c(e,t,i){try{e.style[t]=i}catch(e){return}}t.__esModule=!0;var u=i(936),d=n(u),f=i(937),h=r(f),p=i(940),v=n(p),y="#222",g="#ccc",m={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},b=function(e){function t(i,r,n){o(this,t);var s=a(this,e.call(this,i,r,n));return i.on("loadstart",h.bind(s,s.toggleDisplay)),i.on("texttrackchange",h.bind(s,s.updateDisplay)),i.ready(h.bind(s,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)return void this.hide();i.on("fullscreenchange",h.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var r={captions:1,subtitles:1},n=this.player_.textTracks(),o=void 0,a=void 0;if(n){for(var s=0;s<n.length;s++){var l=n[s];l.default&&("descriptions"!==l.kind||o?l.kind in r&&!a&&(a=l):o=l)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return s(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof v.default.WebVTT&&v.default.WebVTT.processCues(v.default,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,i=null,r=e.length;r--;){var n=e[r];"showing"===n.mode&&("descriptions"===n.kind?t=n:i=n)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},t.prototype.updateForTrack=function(e){if("function"==typeof v.default.WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),i=[],r=0;r<e.activeCues.length;r++)i.push(e.activeCues[r]);v.default.WebVTT.processCues(v.default,i,this.el_);for(var n=i.length;n--;){var o=i[n];if(o){var a=o.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&c(a.firstChild,"color",l(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&c(a.firstChild,"backgroundColor",l(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?c(a,"backgroundColor",l(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+y+", 2px 2px 4px "+y+", 2px 2px 5px "+y:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+y+", 2px 2px "+y+", 3px 3px "+y:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+g+", 0 1px "+g+", -1px -1px "+y+", 0 -1px "+y:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+y+", 0 0 4px "+y+", 0 0 4px "+y+", 0 0 4px "+y)),t.fontPercent&&1!==t.fontPercent){var s=v.default.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=m[t.fontFamily])}}}},t}(d.default);d.default.registerComponent("TextTrackDisplay",b),t.default=b},1028:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(l.default);l.default.registerComponent("LoadingSpinner",c),t.default=c},1029:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(952),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.mouseused_=!1,a.on("mousedown",a.handleMouseDown),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r)return void this.player_.focus();var n=function(){return r.focus()};if(t&&t.then){var o=function(){};t.then(n,o)}else this.setTimeout(n,1)}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(l.default);d.prototype.controlText_="Play Video",u.default.registerComponent("BigPlayButton",d),t.default=d},1030:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(952),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.controlText(r&&r.controlText||a.localize("Close")),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(l.default);u.default.registerComponent("CloseButton",d),t.default=d},1031:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s);i(1032),i(1033),i(1034),i(1035),i(1036),i(1037),i(1038),i(1044),i(1045),i(1047),i(981),i(1050),i(1053),i(1054),i(1055),i(1057),i(1059),i(1061);var c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(l.default);c.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},l.default.registerComponent("ControlBar",c),t.default=c},1032:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(952),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.on(i,"play",a.handlePlay),a.on(i,"pause",a.handlePause),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(e){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(l.default);d.prototype.controlText_="Play",u.default.registerComponent("PlayToggle",d),t.default=d},1033:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(946),h=n(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"timeupdate",n.updateContent),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),i=this.localize("Current Time"),r=(0,h.default)(t,this.player_.duration());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+i+"</span> "+r)},t}(c.default);c.default.registerComponent("CurrentTimeDisplay",p),t.default=p},1034:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(946),h=n(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"durationchange",n.updateContent),n.on(i,"timeupdate",n.updateContent),n.on(i,"loadedmetadata",n.updateContent),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var i=this.localize("Duration Time"),r=(0,h.default)(t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+i+"</span> "+r}},t}(c.default);c.default.registerComponent("DurationDisplay",p),t.default=p},1035:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(l.default);l.default.registerComponent("TimeDivider",c),t.default=c},1036:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(946),h=n(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"timeupdate",n.updateContent),n.on(i,"durationchange",n.updateContent),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){if(this.player_.duration()){var t=this.localize("Remaining Time"),i=(0,h.default)(this.player_.remainingTime());i!==this.formattedTime_&&(this.formattedTime_=i,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+i)}},t}(c.default);c.default.registerComponent("RemainingTimeDisplay",p),t.default=p},1037:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(c.default);c.default.registerComponent("LiveDisplay",f),t.default=f},1038:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s);i(1039),i(1043);var c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(l.default);c.prototype.options_={children:["seekBar"]},l.default.registerComponent("ProgressControl",c),t.default=c},1039:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(979),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=i(946),v=n(p),y=i(961),g=n(y);i(1040),i(1041),i(1042);var m=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"timeupdate",n.updateProgress),n.on(i,"ended",n.updateProgress),i.ready(h.bind(n,n.updateProgress)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&(n.tooltipProgressBar=n.addChild("TooltipProgressBar")),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(e){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat((0,g.default)(this.player().el(),"width")),i=parseFloat((0,g.default)(this.tooltipProgressBar.tooltip,"width")),r=this.tooltipProgressBar.el().style;r.maxWidth=Math.floor(t-i/2)+"px",r.minWidth=Math.ceil(i/2)+"px",r.right="-"+i/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",(0,v.default)(t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(c.default);m.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},m.prototype.playerEvent="timeupdate",d.default.registerComponent("SeekBar",m),t.default=m},1040:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.partEls_=[],n.on(i,"progress",n.update),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(e){var t=this.player_.buffered(),i=this.player_.duration(),r=this.player_.bufferedEnd(),n=this.partEls_,o=function(e,t){var i=e/t||0;return 100*(i>=1?1:i)+"%"};this.el_.style.width=o(r,i);for(var a=0;a<t.length;a++){var s=t.start(a),l=t.end(a),c=n[a];c||(c=this.el_.appendChild(d.createEl()),n[a]=c),c.style.left=o(s,r),c.style.width=o(l-s,r)}for(var u=n.length;u>t.length;u--)this.el_.removeChild(n[u-1]);n.length=t.length},t}(c.default);c.default.registerComponent("LoadProgressBar",f),t.default=f},1041:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(937),d=r(u),f=i(946),h=n(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.updateDataAttr(),n.on(i,"timeupdate",n.updateDataAttr),i.ready(d.bind(n,n.updateDataAttr)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&n.addClass("vjs-keep-tooltips-inside"),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,h.default)(t,this.player_.duration()))},t}(c.default);c.default.registerComponent("PlayProgressBar",p),t.default=p},1042:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(937),d=r(u),f=i(946),h=n(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.updateDataAttr(),n.on(i,"timeupdate",n.updateDataAttr),i.ready(d.bind(n,n.updateDataAttr)),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),i=(0,h.default)(t,this.player_.duration());this.el_.setAttribute("data-current-time",i),this.tooltip.innerHTML=i},t}(c.default);c.default.registerComponent("TooltipProgressBar",p),t.default=p},1043:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(937),h=r(f),p=i(946),v=n(p),y=i(961),g=n(y),m=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&(n.tooltip=d.createEl("div",{className:"vjs-time-tooltip"}),n.el().appendChild(n.tooltip),n.addClass("vjs-keep-tooltips-inside")),n.update(0,0),i.on("ready",function(){n.on(i.controlBar.progressControl.el(),"mousemove",h.throttle(h.bind(n,n.handleMouseMove),25))}),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),i=this.calculateDistance(e)*t,r=e.pageX-d.findElPosition(this.el().parentNode).left;this.update(i,r)},t.prototype.update=function(e,t){var i=(0,v.default)(e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",i),this.keepTooltipsInside){var r=this.clampPosition_(t),n=t-r+1,o=parseFloat((0,g.default)(this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=i,this.tooltip.style.right="-"+(a-n)+"px"}},t.prototype.calculateDistance=function(e){return d.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat((0,g.default)(this.player().el(),"width")),i=parseFloat((0,g.default)(this.tooltip,"width")),r=i/2,n=e;return e<r?n=Math.ceil(r):e>t-r&&(n=Math.floor(t-r)),n},t}(c.default);c.default.registerComponent("MouseTimeDisplay",m),t.default=m},1044:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(952),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.on(i,"fullscreenchange",a.handleFullscreenChange),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(l.default);d.prototype.controlText_="Fullscreen",u.default.registerComponent("FullscreenToggle",d),t.default=d},1045:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s);i(980);var c=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return i.tech_&&i.tech_.featuresVolumeControl===!1&&a.addClass("vjs-hidden"),a.on(i,"loadstart",function(){i.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(l.default);c.prototype.options_={children:["volumeBar"]},l.default.registerComponent("VolumeControl",c),t.default=c},1046:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(l.default);l.default.registerComponent("VolumeLevel",c),t.default=c},1047:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(937),c=n(l),u=i(936),d=r(u),f=i(1048),h=r(f),p=i(1049),v=r(p),y=i(981),g=r(y),m=i(980),b=r(m),_=function(e){function t(i){function r(){i.tech_&&i.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),void 0===n.inline&&(n.inline=!0),void 0===n.vertical&&(n.inline?n.vertical=!1:n.vertical=!0),n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=!!n.vertical;var s=a(this,e.call(this,i,n));return s.on(i,"volumechange",s.volumeUpdate),s.on(i,"loadstart",s.volumeUpdate),r.call(s),s.on(i,"loadstart",r),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return s(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new h.default(this.player_,{contentElType:"div"}),t=new b.default(this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(t){g.default.prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],c.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(e){this.on(["mousemove","touchmove"],c.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(e){this.off(["mousemove","touchmove"],c.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(v.default);_.prototype.volumeUpdate=g.default.prototype.update,_.prototype.controlText_="Mute",d.default.registerComponent("VolumeMenuButton",_),t.default=_},1048:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(937),h=r(f),p=i(945),v=r(p),y=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"});var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),v.on(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},t}(c.default);c.default.registerComponent("Popup",y),t.default=y},1049:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(951),l=r(s),c=i(936),u=r(c),d=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var a=o(this,e.call(this,i,r));return a.update(),a}return a(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(l.default);u.default.registerComponent("PopupButton",d),t.default=d},1050:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(955),l=r(s),c=i(936),u=r(c),d=i(1052),f=r(d),h=i(948),p=r(h),v=function(e){function t(i,r,a){n(this,t);var s=o(this,e.call(this,i,r,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,p.default)(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,r=t.length;i<r;i++){var n=t[i],o=new f.default(this.player_,{track:this.track_,cue:n});e.push(o)}return e},t}(l.default);v.prototype.kind_="chapters",v.prototype.controlText_="Chapters",u.default.registerComponent("ChaptersButton",v),t.default=v},1051:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(962),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t),r.track={player:i,kind:r.kind,label:r.kind+" off",default:!1,mode:"disabled"},r.selectable=!0;var a=o(this,e.call(this,i,r));return a.selected(!0),a}return a(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,r=0,n=t.length;r<n;r++){var o=t[r];if(o.kind===this.track.kind&&"showing"===o.mode){i=!1;break}}this.selected(i)},t}(l.default);u.default.registerComponent("OffTextTrackMenuItem",d),t.default=d},1052:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(956),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=function(e){function t(i,r){o(this,t);var n=r.track,s=r.cue,l=i.currentTime();r.selectable=!0,r.label=s.text,r.selected=s.startTime<=l&&l<s.endTime;var c=a(this,e.call(this,i,r));return c.track=n,c.cue=s,n.addEventListener("cuechange",h.bind(c,c.update)),c}return s(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(c.default);d.default.registerComponent("ChaptersTrackMenuItem",p),t.default=p},1053:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(955),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=function(e){function t(i,r,n){o(this,t);var s=a(this,e.call(this,i,r,n));s.el_.setAttribute("aria-label","Descriptions Menu");var l=i.textTracks();if(l){var c=h.bind(s,s.handleTracksChange);l.addEventListener("change",c),s.on("dispose",function(){l.removeEventListener("change",c)})}return s}return s(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,r=0,n=t.length;r<n;r++){var o=t[r];if(o.kind!==this.kind_&&"showing"===o.mode){i=!0;break}}i?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(c.default);p.prototype.kind_="descriptions",p.prototype.controlText_="Descriptions",d.default.registerComponent("DescriptionsButton",p),t.default=p},1054:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(955),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r,a){n(this,t);var s=o(this,e.call(this,i,r,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){
return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(l.default);d.prototype.kind_="subtitles",d.prototype.controlText_="Subtitles",u.default.registerComponent("SubtitlesButton",d),t.default=d},1055:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(955),l=r(s),c=i(936),u=r(c),d=i(1056),f=r(d),h=function(e){function t(i,r,a){n(this,t);var s=o(this,e.call(this,i,r,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(t.push(new f.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(l.default);h.prototype.kind_="captions",h.prototype.controlText_="Captions",u.default.registerComponent("CaptionsButton",h),t.default=h},1056:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(962),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t),r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1;var a=o(this,e.call(this,i,r));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+r.kind+" settings dialog"),a}return a(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(l.default);u.default.registerComponent("CaptionSettingsMenuItem",d),t.default=d},1057:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(982),l=r(s),c=i(936),u=r(c),d=i(1058),f=r(d),h=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),r.tracks=i.audioTracks&&i.audioTracks();var a=o(this,e.call(this,i,r));return a.el_.setAttribute("aria-label","Audio Menu"),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;var t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var i=0;i<t.length;i++){var r=t[i];e.push(new f.default(this.player_,{track:r,selectable:!0}))}return e},t}(l.default);h.prototype.controlText_="Audio Track",u.default.registerComponent("AudioTrackButton",h),t.default=h},1058:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(956),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=function(e){function t(i,r){o(this,t);var n=r.track,s=i.audioTracks();r.label=n.label||n.language||"Unknown",r.selected=n.enabled;var l=a(this,e.call(this,i,r));if(l.track=n,s){var c=h.bind(l,l.handleTracksChange);s.addEventListener("change",c),l.on("dispose",function(){s.removeEventListener("change",c)})}return l}return s(t,e),t.prototype.handleClick=function(t){var i=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var n=i[r];n.enabled=n===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(c.default);d.default.registerComponent("AudioTrackMenuItem",p),t.default=p},1059:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(983),c=n(l),u=i(984),d=n(u),f=i(1060),h=n(f),p=i(936),v=n(p),y=i(938),g=r(y),m=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.updateVisibility(),n.updateLabel(),n.on(i,"loadstart",n.updateVisibility),n.on(i,"ratechange",n.updateLabel),n}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=g.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new d.default(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new h.default(this.player(),{rate:t[i]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),r=i[0],n=0;n<i.length;n++)if(i[n]>t){r=i[n];break}this.player().playbackRate(r)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(c.default);m.prototype.controlText_="Playback Rate",v.default.registerComponent("PlaybackRateMenuButton",m),t.default=m},1060:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(956),l=r(s),c=i(936),u=r(c),d=function(e){function t(i,r){n(this,t);var a=r.rate,s=parseFloat(a,10);r.label=a,r.selected=1===s,r.selectable=!0;var l=o(this,e.call(this,i,r));return l.label=a,l.rate=s,l.on(i,"ratechange",l.update),l}return a(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(l.default);d.prototype.contentElType="button",u.default.registerComponent("PlaybackRateMenuItem",d),t.default=d},1061:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(1062),l=r(s),c=i(936),u=r(c),d=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(l.default);u.default.registerComponent("CustomControlSpacer",d),t.default=d},1062:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(l.default);l.default.registerComponent("Spacer",c),t.default=c},1063:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(936),l=r(s),c=i(975),u=r(c),d=i(944),f=r(d),h=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.on(i,"error",a.open),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(u.default);h.prototype.options_=(0,f.default)(u.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),l.default.registerComponent("ErrorDisplay",h),t.default=h},1064:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function c(e,t){var i=e.options[e.options.selectedIndex].value;return l(i,t)}function u(e,t,i){if(t)for(var r=0;r<e.options.length;r++)if(l(e.options[r].value,i)===t){e.selectedIndex=r;break}}t.__esModule=!0;var d=i(940),f=n(d),h=i(936),p=n(h),v=i(938),y=i(937),g=r(y),m=i(942),b=r(m),_=i(943),w=n(_),T="vjs-text-track-settings",S=["#000","Black"],E=["#00F","Blue"],k=["#0FF","Cyan"],O=["#0F0","Green"],R=["#F0F","Magenta"],C=["#F00","Red"],P=["#FFF","White"],I=["#FF0","Yellow"],A=["1","Opaque"],x=["0.5","Semi-Transparent"],j=["0","Transparent"],L={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[S,P,C,O,E,I,R,k]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[A,x,j]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[P,S,C,O,E,I,R,k]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[A,x]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[j,x,A]}};L.windowColor.options=L.backgroundColor.options;var M=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.setDefaults(),n.hide(),n.updateDisplay=g.bind(n,n.updateDisplay),void 0===r.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.hide()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),b.each(L,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}return s(t,e),t.prototype.createElSelect_=function(e){var t=this,i=L[e],r=i.id.replace("%s",this.id_);return[(0,v.createEl)("label",{className:"vjs-label",textContent:i.label},{for:r}),(0,v.createEl)("select",{id:r},void 0,i.options.map(function(e){return(0,v.createEl)("option",{textContent:t.localize(e[1]),value:e[0]})}))]},t.prototype.createElFgColor_=function(){var e=(0,v.createEl)("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),i=(0,v.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,v.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[e].concat(t,i))},t.prototype.createElBgColor_=function(){var e=(0,v.createEl)("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),i=(0,v.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,v.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[e].concat(t,i))},t.prototype.createElWinColor_=function(){var e=(0,v.createEl)("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),i=(0,v.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return(0,v.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[e].concat(t,i))},t.prototype.createElColors_=function(){return(0,v.createEl)("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},t.prototype.createElFont_=function(){var e=(0,v.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),t=(0,v.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),i=(0,v.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return(0,v.createEl)("div",{className:"vjs-tracksettings-font"},void 0,[e,t,i])},t.prototype.createElControls_=function(){var e=(0,v.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=(0,v.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,v.createEl)("div",{className:"vjs-tracksettings-controls"},void 0,[e,t])},t.prototype.createEl=function(){var e=(0,v.createEl)("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=(0,v.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),i=(0,v.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),r=(0,v.createEl)("div",void 0,{role:"document"},[t,i,e]);return(0,v.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":i.id},r)},t.prototype.getValues=function(){var e=this;return b.reduce(L,function(t,i,r){var n=c(e.$(i.selector),i.parser);return void 0!==n&&(t[r]=n),t},{})},t.prototype.setValues=function(e){var t=this;b.each(L,function(i,r){u(t.$(i.selector),e[r],i.parser)})},t.prototype.setDefaults=function(){var e=this;b.each(L,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(f.default.localStorage.getItem(T))}catch(e){w.default.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?f.default.localStorage.setItem(T,JSON.stringify(e)):f.default.localStorage.removeItem(T)}catch(e){w.default.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(p.default);p.default.registerComponent("TextTrackSettings",M),t.default=M},1065:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.raw=t,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var c=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),u=i(950),d=n(u),f=i(936),h=n(f),p=i(938),v=r(p),y=i(954),g=r(y),m=i(937),b=r(m),_=i(943),w=n(_),T=i(970),S=n(T),E=i(941),k=r(E),O=i(939),R=n(O),C=i(940),P=n(C),I=i(942),A=i(944),x=n(A),j=i(948),L=n(j),M=function(e){function t(i,r){a(this,t);var n=s(this,e.call(this,i,r)),o=i.source,l=!1;if(o&&(n.el_.currentSrc!==o.src||i.tag&&3===i.tag.initNetworkState_)?n.setSource(o):n.handleLateInit_(n.el_),n.el_.hasChildNodes()){for(var u=n.el_.childNodes,d=u.length,f=[];d--;){var h=u[d],p=h.nodeName.toLowerCase();"track"===p&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(h),n.remoteTextTracks().addTrack_(h.track),l||n.el_.hasAttribute("crossorigin")||!g.isCrossOrigin(h.src)||(l=!0)):f.push(h))}for(var v=0;v<f.length;v++)n.el_.removeChild(f[v])}var y=["audio","video"];return y.forEach(function(e){var t=n.el()[e+"Tracks"],i=n[e+"Tracks"](),r=(0,L.default)(e);n["featuresNative"+r+"Tracks"]&&t&&t.addEventListener&&(n["handle"+r+"TrackChange_"]=function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},n["handle"+r+"TrackAdd_"]=function(e){return i.addTrack(e.track)},n["handle"+r+"TrackRemove_"]=function(e){return i.removeTrack(e.track)},t.addEventListener("change",n["handle"+r+"TrackChange_"]),t.addEventListener("addtrack",n["handle"+r+"TrackAdd_"]),t.addEventListener("removetrack",n["handle"+r+"TrackRemove_"]),n["removeOld"+r+"Tracks_"]=function(e){return n.removeOldTracks_(i,t)},n.on("loadstart",n["removeOld"+r+"Tracks_"]))}),n.featuresNativeTextTracks&&(l&&w.default.warn((0,S.default)(c)),n.handleTextTrackChange_=b.bind(n,n.handleTextTrackChange),n.handleTextTrackAdd_=b.bind(n,n.handleTextTrackAdd),n.handleTextTrackRemove_=b.bind(n,n.handleTextTrackRemove),n.proxyNativeTextTracks_()),n.restoreMetadataTracksInIOSNativePlayer_(),(k.TOUCH_ENABLED||k.IS_IPHONE||k.IS_NATIVE_ANDROID)&&i.nativeControlsForTouch===!0&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}return l(t,e),t.prototype.dispose=function(){var i=this;["audio","video","text"].forEach(function(e){var t=(0,L.default)(e),r=i.el_[e+"Tracks"];r&&r.removeEventListener&&(r.removeEventListener("change",i["handle"+t+"TrackChange_"]),r.removeEventListener("addtrack",i["handle"+t+"TrackAdd_"]),r.removeEventListener("removetrack",i["handle"+t+"TrackRemove_"])),r&&i.off("loadstart",i["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,i=function(){t=[];for(var i=0;i<e.length;i++){var r=e[i];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};i(),e.addEventListener("change",i);var r=function i(){for(var r=0;r<t.length;r++){var n=t[r];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=R.default.createElement("video");var r=this.options_.tag&&v.getElAttributes(this.options_.tag),n=(0,x.default)({},r);k.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete n.controls,v.setElAttributes(e,(0,I.assign)(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&v.setAttribute(e,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],a=o.length-1;a>=0;a--){var s=o[a],l=this.options_[s];"undefined"!=typeof l&&(l?v.setAttribute(e,s,s):v.removeAttribute(e,s),e[s]=l)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(e){var t=this.textTracks();this.textTracks().trigger({type:"change",target:t,currentTarget:t,srcElement:t})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var i=[];if(t){for(var r=0;r<e.length;r++){for(var n=e[r],o=!1,a=0;a<t.length;a++)if(t[a]===n){o=!0;break}o||i.push(n)}for(var s=0;s<i.length;s++){var l=i[s];e.removeTrack_(l)}}},t.prototype.removeOldTextTracks_=function(e){var t=this.textTracks(),i=this.el().textTracks;this.removeOldTracks_(t,i)},t.prototype.play=function(){var e=this.el_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){(0,w.default)(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&k.IS_ANDROID&&k.IS_CHROME&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=P.default.navigator&&P.default.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,i,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,r):e.prototype.addTextTrack.call(this,t,i,r)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=R.default.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},t.prototype.addRemoteTextTrack=function(t,i){var r=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),r=i.length;r--;)t!==i[r]&&t!==i[r].track||this.el().removeChild(i[r])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),P.default.performance&&"function"==typeof P.default.performance.now?e.creationTime=P.default.performance.now():P.default.performance&&P.default.performance.timing&&"number"==typeof P.default.performance.timing.navigationStart&&(e.creationTime=P.default.Date.now()-P.default.performance.timing.navigationStart),e},t}(d.default);if(v.isReal()){M.TEST_VID=R.default.createElement("video");var D=R.default.createElement("track");D.kind="captions",D.srclang="en",D.label="English",M.TEST_VID.appendChild(D)}M.isSupported=function(){try{M.TEST_VID.volume=.5}catch(e){return!1}return!(!M.TEST_VID||!M.TEST_VID.canPlayType)},M.canControlVolume=function(){try{var e=M.TEST_VID.volume;return M.TEST_VID.volume=e/2+.1,e!==M.TEST_VID.volume}catch(e){return!1}},M.canControlPlaybackRate=function(){if(k.IS_ANDROID&&k.IS_CHROME&&k.CHROME_VERSION<58)return!1;try{var e=M.TEST_VID.playbackRate;return M.TEST_VID.playbackRate=e/2+.1,e!==M.TEST_VID.playbackRate}catch(e){return!1}},M.supportsNativeTextTracks=function(){return k.IS_ANY_SAFARI},M.supportsNativeVideoTracks=function(){return!(!M.TEST_VID||!M.TEST_VID.videoTracks)},M.supportsNativeAudioTracks=function(){return!(!M.TEST_VID||!M.TEST_VID.audioTracks)},M.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],
M.prototype.featuresVolumeControl=M.canControlVolume(),M.prototype.featuresPlaybackRate=M.canControlPlaybackRate(),M.prototype.movingMediaElementInDOM=!k.IS_IOS,M.prototype.featuresFullscreenResize=!0,M.prototype.featuresProgressEvents=!0,M.prototype.featuresTimeupdateEvents=!0,M.prototype.featuresNativeTextTracks=M.supportsNativeTextTracks(),M.prototype.featuresNativeVideoTracks=M.supportsNativeVideoTracks(),M.prototype.featuresNativeAudioTracks=M.supportsNativeAudioTracks();var F=M.TEST_VID&&M.TEST_VID.constructor.prototype.canPlayType,N=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,U=/^video\/mp4/i;M.patchCanPlayType=function(){k.ANDROID_VERSION>=4&&!k.IS_FIREFOX?M.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&N.test(e)?"maybe":F.call(this,e)}:k.IS_OLD_ANDROID&&(M.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&U.test(e)?"maybe":F.call(this,e)})},M.unpatchCanPlayType=function(){var e=M.TEST_VID.constructor.prototype.canPlayType;return M.TEST_VID.constructor.prototype.canPlayType=F,e},M.patchCanPlayType(),M.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(e){}}()}},M.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){M.prototype["set"+(0,L.default)(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate"].forEach(function(e){M.prototype["set"+(0,L.default)(e)]=function(t){this.el_[e]=t}}),["pause","load"].forEach(function(e){M.prototype[e]=function(){return this.el_[e]()}}),d.default.withSourceHandlers(M),M.nativeSourceHandler={},M.nativeSourceHandler.canPlayType=function(e){try{return M.TEST_VID.canPlayType(e)}catch(e){return""}},M.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return M.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=g.getFileExtension(e.src);return M.nativeSourceHandler.canPlayType("video/"+i)}return""},M.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},M.nativeSourceHandler.dispose=function(){},M.registerSourceHandler(M.nativeSourceHandler),h.default.registerComponent("Html5",M),d.default.registerTech("Html5",M),t.default=M},1066:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(972),o=r(n),a=function(e,t){o.default.prototype[e]=t};t.default=a},1067:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(958),c=i(959),u=n(c),d=i(944),f=n(d),h=i(941),p=r(h),v=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=(0,f.default)(n,{kind:l.AudioTrackKind[n.kind]||""}),c=i=a(this,e.call(this,s)),u=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(c[d]=t.prototype[d]);return Object.defineProperty(c,"enabled",{get:function(){return u},set:function(e){"boolean"==typeof e&&e!==u&&(u=e,this.trigger("enabledchange"))}}),s.enabled&&(c.enabled=s.enabled),c.loaded_=!0,r=c,a(i,r)}return s(t,e),t}(u.default);t.default=v},1068:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(958),c=i(959),u=n(c),d=i(944),f=n(d),h=i(941),p=r(h),v=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=(0,f.default)(n,{kind:l.VideoTrackKind[n.kind]||""}),c=i=a(this,e.call(this,s)),u=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(c[d]=t.prototype[d]);return Object.defineProperty(c,"selected",{get:function(){return u},set:function(e){"boolean"==typeof e&&e!==u&&(u=e,this.trigger("selectedchange"))}}),s.selected&&(c.selected=s.selected),r=c,a(i,r)}return s(t,e),t}(u.default);t.default=v},1069:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i(943),a=r(o),s=i(942),l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){e.apply(this,arguments)},r={};(0,s.isObject)(t)?("function"==typeof t.init&&(a.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):"function"==typeof t&&(i=t),l(i,e);for(var n in r)r.hasOwnProperty(n)&&(i.prototype[n]=r[n]);return i};t.default=c},1072:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1),l=function(){function e(e,t){this.$http=e,this.query=t.thumbUrl}return e.prototype.getImage=function(e){var t=s.getSyndetixWithProxy();return t+="primo",e.isbn&&(t+="&isbn=",t+=e.isbn,t+="/sc.jpg"),e.issn&&(t+="&issn=",t+=e.issn,t+="/sc.jpg"),t},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),n("design:paramtypes",[Object,Object])],e)}();t.RecomendationsItemService=l;var c=function(){function e(e){if(this.issn="",this.isbn="",this.maxTitle=70,this.maxLine1=70,this.maxLine2=70,this.image="",this.line1="",this.line1dot="",this.issn="",e.pnx.addata.issn&&(this.issn=e.pnx.addata.issn[0]),e.pnx.control.sourceid&&(this.sourceid=e.pnx.control.sourceid[0]),this.isbn="",e.pnx.addata.isbn&&(this.isbn=e.pnx.addata.isbn[0]),this.title=e.pnx.display.title[0],this.title.length>this.maxTitle?this.titledot=this.title.substring(0,this.maxTitle)+"...":this.titledot=this.title,this.image="","suprima"!==s.getBackendSystem()){var t=e.delivery.getIt1.getItTabsData["Remote Search Resource"];t?this.link1=t.getItLinks[0].linkUrl:(t=e.delivery.getIt1.getItTabsData["Remote Search Resource:Alma"],this.link1=t.getItLinks[0].linkUrl)}else this.link1=e.pnx.delivery.availabilityLinkUrl;this.line1="",e.pnx.display.creator&&(this.line1=e.pnx.display.creator.join(";")),this.line2=e.pnx.display.ispartof[0],this.line1.length>this.maxLine1?this.line1dot=this.line1.substring(0,this.maxLine1)+"...":this.line1dot=this.line1,this.line2.length>this.maxLine2?this.line2dot=this.line2.substring(0,this.maxLine2)+"...":this.line2dot=this.line2,this.suggestion=e.context,this.type=e.pnx.display.type[0],this.suggestionText=e.pnx.display.identifier[0]}return e}();t.Rec=c},1073:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1),l=function(){function e(e,t){this.$http=e,this.query=t.bxUrl+("suprima"===s.getBackendSystem()?"/"+s.getVid():"")}return e.prototype.getRecomendations=function(e){return this.$http({method:"POST",url:this.query,data:e})},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),n("design:paramtypes",[Object,Object])],e)}();t.RecomendationsService=l},1074:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1),l=function(){function e(e,t){this.$http=e,this.angularLoad=t,this.isloaded=!1,this.query="https://unbound.syndetics.com/syndeticsunbound/connector/initiator.php?a_id="+s.getSyndeticUnboundId()}return e.prototype.setLoaded=function(){this.isloaded=!0},e.prototype.isLoaded=function(){return this.isloaded},e.prototype.getSU=function(){return this.angularLoad.loadScript(this.query)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("angularLoad")),n("design:paramtypes",[Object,Object])],e)}();t.SyndeticUnboundService=l},1075:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(93),l=i(15),c=function(){function e(e,t,i,r){this.$http=e,this.$location=t,this.fullViewService=r,this.OPENURL_API_URL=i.openUrl}return e.prototype.getItem=function(e,t){var i=this.getSearchParams(),r={params:i};return this.$http.get(this.OPENURL_API_URL+"/"+e+"/"+t,r)},e.prototype.getSearchParams=function(){var e=this.$location.search(),t=function(e){return e.replace?e.replace(/~2F/g,"/"):e};for(var i in e)e[i]&&(l(e[i])?e[i]=e[i].map(t):e[i]=t(e[i])),i.indexOf(" ")>-1&&(e[encodeURIComponent(i.trim())]=e[i],delete e[i]);return e},e.prototype.getServicePageDelivery=function(e,t,i){var r=this.getSearchParams(),n={params:r};return this.$http.post(this.OPENURL_API_URL+"/delivery/"+t+"/"+i,e,n)},e=r([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$location")),o(2,a.Inject("restBaseURLs")),n("design:paramtypes",[Object,Object,Object,"function"==typeof(t="undefined"!=typeof s.FullViewService&&s.FullViewService)&&t||Object])],e);var t}();t.ServicesPageService=c},1092:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1093),a=i(1098),s=i(1099),l=i(1100),c=i(1101),u=i(1104),d=i(1107),f=i(1112),h=function(){function e(){}return e=r([n.NgModule({declarations:[o.PrmAlmaMashup,a.PrmAlmaMoreInst,c.PrmViewOnline,s.PrmAlmaOtherMembers,f.PrmAlmaOtherUnits,l.PrmSearchWithinJournal],providers:[],imports:[u.AlmaViewitModule,d.HowToGetitModule]})],e)}();t.GetitModule=h},1093:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(93),l=i(1094),c=i(2),u=i(3),d=function(){function e(e,t,i,r){this.$sce=e,this.$timeout=t,this.fullViewService=i,this.configurationUtil=r,this.serviceName="",this.targetNames={Almagetit:"AlmagetitMashupIframe",Almaviewit:"AlmaviewitMashupIframe"},this.serviceText=null,this.callGetRequest="Y"!==this.configurationUtil.getSystemConfiguration("Use POST method for Alma Mashup requests")}return e.prototype.ngOnInit=function(){var e=this;this.isLinkAvailable()||this.fullViewService.disableService("getit_link1"),this.callGetRequest||(this.serviceName=this.linksArray[0].displayText,this.parseLink(this.linksArray[0].link),this.$timeout(function(){var t=document.getElementById(e.serviceName+"MashupForm");t.submit()},200))},Object.defineProperty(e.prototype,"isAlmaIframe",{get:function(){var e=u(this,"linksArray[0]",void 0),t=["Almagetit","Almaviewtit","Almaviewit_remote"];return e&&t.indexOf(e.displayText)>=0||e.link&&e.link.includes("uresolver")},enumerable:!0,configurable:!0}),e.prototype.iframeResize=function(){this.isAlmaIframe&&l.iframeResizer({log:!1,checkOrigin:!1},".mashup-iframe")},e.prototype.getLink=function(){if(this.callGetRequest){var e=this.linksArray[0].link;try{var t=decodeURI(e);e=encodeURI(t)}catch(e){}return e=e.replace("%3A%2F%2F","://"),this.$sce.trustAsResourceUrl(e+"&is_new_ui=true&Force_direct=false")}},e.prototype.parseLink=function(e){try{var t=decodeURI(e);e=encodeURI(t)}catch(e){}e=e.replace("%3A%2F%2F","://"),this._linkPart=this.$sce.trustAsResourceUrl(e.split("?")[0]);var i=/[?&]([^=]+)=([^&]*)/g;this._jsonPart=[];for(var r;null!=(r=i.exec(e));)this._jsonPart.push({name:r[1],value:r[2]});this._jsonPart.push({name:"is_new_ui",value:"true"},{name:"Force_direct",value:"false"})},Object.defineProperty(e.prototype,"jsonPart",{get:function(){return this._jsonPart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkPart",{get:function(){return this._linkPart},enumerable:!0,configurable:!0}),e.prototype.getTargetName=function(){if(this.callGetRequest)return"";if(!this.serviceName)return"";switch(this.serviceName){case"Almaviewit":case"Almaviewit_remote":return this.targetNames.Almaviewit;case"Almagetit":case"Almagetit_remote":return this.targetNames.Almagetit;default:return this.serviceName.toLowerCase().indexOf("getit")>-1?this.targetNames.Almagetit:this.serviceName.toLowerCase().indexOf("viewit")>-1?this.targetNames.Almaviewit:""}},e.prototype.getLabel=function(){return"getit."+this.linksArray[0].getItTabText},e.prototype.isAlmaGetit=function(){return!!this.callGetRequest||this.linksArray[0]&&this.getTargetName()===this.targetNames.Almagetit},e.prototype.isLinkAvailable=function(){return null!==this.linksArray[0].link&&"null"!==this.linksArray[0].link.toString()},e.prototype.isFormAvailable=function(){return!this.callGetRequest&&this.jsonPart.length>0},r([a.Input(),n("design:type",Array)],e.prototype,"linksArray",void 0),e=r([a.Component({selector:"prm-alma-mashup",templateUrl:"components/search/fullView/getit/almaMashup/almaMashup.html"}),o(0,a.Inject("$sce")),o(1,a.Inject("$timeout")),n("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.FullViewService&&s.FullViewService)&&t||Object,"function"==typeof(i="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&i||Object])],e);var t,i}();t.PrmAlmaMashup=d},1094:function(e,t,i){"use strict";e.exports=i(1095)},1095:function(e,t,i){t.iframeResizer=i(1096),t.iframeResizerContentWindow=i(1097)},1096:function(e,t,i){var r,n,o;!function(i){"use strict";function a(e,t,r){"addEventListener"in i?e.addEventListener(t,r,!1):"attachEvent"in i&&e.attachEvent("on"+t,r)}function s(e,t,r){"removeEventListener"in i?e.removeEventListener(t,r,!1):"detachEvent"in i&&e.detachEvent("on"+t,r)}function l(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!W;e+=1)W=i[t[e]+"RequestAnimationFrame"];W||f("setup","RequestAnimationFrame not supported")}function c(e){var t="Host page: "+e;return i.top!==i.self&&(t=i.parentIFrame&&i.parentIFrame.getId?i.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}function u(e){return V+"["+c(e)+"]"}function d(e){return z[e]?z[e].log:F}function f(e,t){v("log",e,t,d(e))}function h(e,t){v("info",e,t,d(e))}function p(e,t){v("warn",e,t,!0)}function v(e,t,r,n){!0===n&&"object"==typeof i.console&&console[e](u(t),r)}function y(e){function t(){function e(){S($),_(q)}n("Height"),n("Width"),E(e,$,"init")}function r(){var e=W.substr(H).split(":");return{iframe:z[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}function n(e){var t=Number(z[q]["max"+e]),i=Number(z[q]["min"+e]),r=e.toLowerCase(),n=Number($[r]);f(q,"Checking "+r+" is in range "+i+"-"+t),n<i&&(n=i,f(q,"Set "+r+" to min value")),n>t&&(n=t,f(q,"Set "+r+" to max value")),$[r]=""+n}function o(){function t(){function e(){var e=0,t=!1;for(f(q,"Checking connection is from allowed list of origins: "+r);e<r.length;e++)if(r[e]===i){t=!0;break}return t}function t(){var e=z[q].remoteHost;return f(q,"Checking connection is from: "+e),i===e}return r.constructor===Array?e():t()}var i=e.origin,r=z[q].checkOrigin;if(r&&""+i!="null"&&!t())throw new Error("Unexpected message received from: "+i+" for "+$.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function l(){return V===(""+W).substr(0,H)&&W.substr(H).split(":")[0]in z}function c(){var e=$.type in{true:1,false:1,undefined:1};return e&&f(q,"Ignoring init message from meta parent page"),e}function u(e){return W.substr(W.indexOf(":")+B+e)}function d(e){f(q,"MessageCallback passed: {iframe: "+$.iframe.id+", message: "+e+"}"),M("messageCallback",{iframe:$.iframe,message:JSON.parse(e)}),f(q,"--")}function v(){var e=document.body.getBoundingClientRect(),t=$.iframe.getBoundingClientRect();return JSON.stringify({clientHeight:Math.max(document.documentElement.clientHeight,i.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,i.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:i.pageYOffset,scrollLeft:i.pageXOffset})}function y(e,t){function i(){k("Send Page Info","pageInfo:"+v(),e,t)}C(i,32)}function R(){function e(e,r){function o(){z[n]?y(z[n].iframe,n):t()}["scroll","resize"].forEach(function(t){f(n,e+t+" listener for sendPageInfo"),r(i,t,o)})}function t(){e("Remove ",s)}function r(){e("Add ",a)}var n=q;r(),z[n].stopPageInfo=t}function P(){z[q]&&z[q].stopPageInfo&&(z[q].stopPageInfo(),delete z[q].stopPageInfo)}function I(){var e=!0;return null===$.iframe&&(p(q,"IFrame ("+$.id+") not found"),e=!1),e}function A(e){var t=e.getBoundingClientRect();return b(q),{x:Math.floor(Number(t.left)+Number(G.x)),y:Math.floor(Number(t.top)+Number(G.y))}}function x(e){function t(){G=a,j(),f(q,"--")}function r(){return{x:Number($.width)+o.x,y:Number($.height)+o.y}}function n(){i.parentIFrame?i.parentIFrame["scrollTo"+(e?"Offset":"")](a.x,a.y):p(q,"Unable to scroll to requested position, window.parentIFrame not found")}var o=e?A($.iframe):{x:0,y:0},a=r();f(q,"Reposition requested from iFrame (offset x:"+o.x+" y:"+o.y+")"),i.top!==i.self?n():t()}function j(){!1!==M("scrollCallback",G)?_(q):w()}function L(e){function t(){var e=A(a);f(q,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),G={x:e.x,y:e.y},j(),f(q,"--")}function r(){i.parentIFrame?i.parentIFrame.moveToAnchor(n):f(q,"In page link #"+n+" not found and window.parentIFrame not found")}var n=e.split("#")[1]||"",o=decodeURIComponent(n),a=document.getElementById(o)||document.getElementsByName(o)[0];a?t():i.top!==i.self?r():f(q,"In page link #"+n+" not found")}function M(e,t){return g(q,e,t)}function D(){switch(z[q].firstRun&&U(),$.type){case"close":m($.iframe);break;case"message":d(u(6));break;case"scrollTo":x(!1);break;case"scrollToOffset":x(!0);break;case"pageInfo":y(z[q].iframe,q),R();break;case"pageInfoStop":P();break;case"inPageLink":L(u(9));break;case"reset":T($);break;case"init":t(),M("initCallback",$.iframe),M("resizedCallback",$);break;default:t(),M("resizedCallback",$)}}function F(e){var t=!0;return z[e]||(t=!1,p($.type+" No settings for "+e+". Message was: "+W)),t}function N(){for(var e in z)k("iFrame requested init",O(e),document.getElementById(e),e)}function U(){z[q].firstRun=!1}var W=e.data,$={},q=null;"[iFrameResizerChild]Ready"===W?N():l()?($=r(),q=K=$.id,!c()&&F(q)&&(f(q,"Received: "+W),I()&&o()&&D())):h(q,"Ignored: "+W)}function g(e,t,i){var r=null,n=null;if(z[e]){if(r=z[e][t],"function"!=typeof r)throw new TypeError(t+" on iFrame["+e+"] is not a function");n=r(i)}return n}function m(e){var t=e.id;f(t,"Removing iFrame: "+t),e.parentNode.removeChild(e),g(t,"closedCallback",t),f(t,"--"),delete z[t]}function b(e){null===G&&(G={x:void 0!==i.pageXOffset?i.pageXOffset:document.documentElement.scrollLeft,y:void 0!==i.pageYOffset?i.pageYOffset:document.documentElement.scrollTop},f(e,"Get page position: "+G.x+","+G.y))}function _(e){null!==G&&(i.scrollTo(G.x,G.y),f(e,"Set page position: "+G.x+","+G.y),w())}function w(){G=null}function T(e){function t(){S(e),k("reset","reset",e.iframe,e.id)}f(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),b(e.id),E(t,e,"reset")}function S(e){function t(t){e.iframe.style[t]=e[t]+"px",f(e.id,"IFrame ("+n+") "+t+" set to "+e[t]+"px")}function i(t){N||"0"!==e[t]||(N=!0,f(n,"Hidden iFrame detected, creating visibility listener"),P())}function r(e){t(e),i(e)}var n=e.iframe.id;z[n]&&(z[n].sizeHeight&&r("height"),z[n].sizeWidth&&r("width"))}function E(e,t,i){i!==t.type&&W?(f(t.id,"Requesting animation frame"),W(e)):e()}function k(e,t,i,r){function n(){var n=z[r].targetOrigin;f(r,"["+e+"] Sending msg to iframe["+r+"] ("+t+") targetOrigin: "+n),i.contentWindow.postMessage(V+t,n)}function o(){h(r,"["+e+"] IFrame("+r+") not found"),z[r]&&delete z[r]}function a(){i&&"contentWindow"in i&&null!==i.contentWindow?n():o()}r=r||i.id,z[r]&&a()}function O(e){return e+":"+z[e].bodyMarginV1+":"+z[e].sizeWidth+":"+z[e].log+":"+z[e].interval+":"+z[e].enablePublicMethods+":"+z[e].autoResize+":"+z[e].bodyMargin+":"+z[e].heightCalculationMethod+":"+z[e].bodyBackground+":"+z[e].bodyPadding+":"+z[e].tolerance+":"+z[e].inPageLinks+":"+z[e].resizeFrom+":"+z[e].widthCalculationMethod}function R(e,t){function i(){function t(t){1/0!==z[b][t]&&0!==z[b][t]&&(e.style[t]=z[b][t]+"px",f(b,"Set "+t+" = "+z[b][t]+"px"))}function i(e){if(z[b]["min"+e]>z[b]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}i("Height"),i("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}function r(){var e=t&&t.id||X.id+D++;return null!==document.getElementById(e)&&(e+=D++),e}function n(i){return K=i,""===i&&(e.id=i=r(),F=(t||{}).log,K=i,f(i,"Added missing iframe ID: "+i+" ("+e.src+")")),i}function o(){f(b,"IFrame scrolling "+(z[b].scrolling?"enabled":"disabled")+" for "+b),e.style.overflow=!1===z[b].scrolling?"hidden":"auto",e.scrolling=!1===z[b].scrolling?"no":"yes"}function s(){"number"!=typeof z[b].bodyMargin&&"0"!==z[b].bodyMargin||(z[b].bodyMarginV1=z[b].bodyMargin,z[b].bodyMargin=""+z[b].bodyMargin+"px")}function l(){var t=z[b].firstRun,i=z[b].heightCalculationMethod in $;!t&&i&&T({iframe:e,height:0,width:0,type:"init"})}function c(){Function.prototype.bind&&(z[b].iframe.iFrameResizer={close:m.bind(null,z[b].iframe),resize:k.bind(null,"Window resize","resize",z[b].iframe),moveToAnchor:function(e){k("Move to anchor","inPageLink:"+e,z[b].iframe,b)},sendMessage:function(e){e=JSON.stringify(e),k("Send Message","message:"+e,z[b].iframe,b)}})}function u(t){function i(){k("iFrame.onload",t,e),l()}a(e,"load",i),k("init",t,e)}function d(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function h(e){for(var t in X)X.hasOwnProperty(t)&&(z[b][t]=e.hasOwnProperty(t)?e[t]:X[t])}function v(e){return""===e||"file://"===e?"*":e}function y(t){t=t||{},z[b]={firstRun:!0,iframe:e,remoteHost:e.src.split("/").slice(0,3).join("/")},d(t),h(t),z[b].targetOrigin=!0===z[b].checkOrigin?v(z[b].remoteHost):"*"}function g(){return b in z&&"iFrameResizer"in e}var b=n(e.id);g()?p(b,"Ignored iFrame, already setup."):(y(t),o(),i(),s(),u(O(b)),c())}function C(e,t){null===q&&(q=setTimeout(function(){q=null,e()},t))}function P(){function e(){function e(e){function t(t){return"0px"===z[e].iframe.style[t]}function i(e){return null!==e.offsetParent}i(z[e].iframe)&&(t("height")||t("width"))&&k("Visibility change","resize",z[e].iframe,e)}for(var t in z)e(t)}function t(t){f("window","Mutation observed: "+t[0].target+" "+t[0].type),C(e,16)}function r(){var e=document.querySelector("body"),i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},r=new n(t);r.observe(e,i)}var n=i.MutationObserver||i.WebKitMutationObserver;n&&r()}function I(e){function t(){x("Window "+e,"resize")}f("window","Trigger event: "+e),C(t,16)}function A(){function e(){x("Tab Visable","resize")}"hidden"!==document.visibilityState&&(f("document","Trigger event: Visiblity change"),C(e,16))}function x(e,t){function i(e){return"parent"===z[e].resizeFrom&&z[e].autoResize&&!z[e].firstRun}for(var r in z)i(r)&&k(e,t,document.getElementById(r),r)}function j(){a(i,"message",y),a(i,"resize",function(){I("resize")}),a(document,"visibilitychange",A),a(document,"-webkit-visibilitychange",A),a(i,"focusin",function(){I("focus")}),a(i,"focus",function(){I("focus")})}function L(){function e(e,i){function r(){if(!i.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==i.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+i.tagName+">")}i&&(r(),R(i,e),t.push(i))}var t;return l(),j(),function(i,r){switch(t=[],typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),e.bind(void 0,i));break;case"object":e(i,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return t}}function M(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){R(i,e)}).end()}}var D=0,F=!1,N=!1,U="message",B=U.length,V="[iFrameSizer]",H=V.length,G=null,W=i.requestAnimationFrame,$={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},z={},q=null,K="Host Page",X={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){p("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};i.jQuery&&M(jQuery),n=[],r=L,o="function"==typeof r?r.apply(t,n):r,!(void 0!==o&&(e.exports=o))}(window||{})},1097:function(e,t){!function(e){"use strict";function t(t,i,r){"addEventListener"in e?t.addEventListener(i,r,!1):"attachEvent"in e&&t.attachEvent("on"+i,r)}function i(t,i,r){"removeEventListener"in e?t.removeEventListener(i,r,!1):"detachEvent"in e&&t.detachEvent("on"+i,r)}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e){var t,i,r,n=null,o=0,a=function(){o=Ae(),n=null,r=e.apply(t,i),n||(t=i=null)};return function(){var s=Ae();o||(o=s);var l=Se-(s-o);return t=this,i=arguments,l<=0||l>Se?(n&&(clearTimeout(n),n=null),o=s,r=e.apply(t,i),n||(t=i=null)):n||(n=setTimeout(a,l)),r}}function o(e){return fe+"["+pe+"] "+e}function a(t){de&&"object"==typeof e.console&&console.log(o(t))}function s(t){"object"==typeof e.console&&console.warn(o(t))}function l(){c(),a("Initialising iFrame ("+location.href+")"),u(),h(),f("background",K),f("padding",Q),O(),m(),b(),p(),C(),_(),le=R(),U("init","Init message from host page"),Pe()}function c(){function e(e){return"true"===e}var t=se.substr(he).split(":");pe=t[0],X=void 0!==t[1]?Number(t[1]):X,Z=void 0!==t[2]?e(t[2]):Z,de=void 0!==t[3]?e(t[3]):de,ce=void 0!==t[4]?Number(t[4]):ce,z=void 0!==t[6]?e(t[6]):z,Y=t[7],oe=void 0!==t[8]?t[8]:oe,K=t[9],Q=t[10],_e=void 0!==t[11]?Number(t[11]):_e,le.enable=void 0!==t[12]&&e(t[12]),ye=void 0!==t[13]?t[13]:ye,Oe=void 0!==t[14]?t[14]:Oe}function u(){function t(){var t=e.iFrameResizer;a("Reading data from page: "+JSON.stringify(t)),Ce="messageCallback"in t?t.messageCallback:Ce,Pe="readyCallback"in t?t.readyCallback:Pe,be="targetOrigin"in t?t.targetOrigin:be,oe="heightCalculationMethod"in t?t.heightCalculationMethod:oe,Oe="widthCalculationMethod"in t?t.widthCalculationMethod:Oe}"iFrameResizer"in e&&Object===e.iFrameResizer.constructor&&t(),a("TargetOrigin for parent set to: "+be)}function d(e,t){return-1!==t.indexOf("-")&&(s("Negative CSS value ignored for "+e),t=""),t}function f(e,t){void 0!==t&&""!==t&&"null"!==t&&(document.body.style[e]=t,a("Body "+e+' set to "'+t+'"'))}function h(){void 0===Y&&(Y=X+"px"),f("margin",d("margin",Y))}function p(){document.documentElement.style.height="",document.body.style.height="",a('HTML & body height set to "auto"')}function v(n){function o(){U(n.eventName,n.eventType)}var s={add:function(i){t(e,i,o)},remove:function(t){i(e,t,o)}};n.eventNames&&Array.prototype.map?(n.eventName=n.eventNames[0],n.eventNames.map(s[n.method])):s[n.method](n.eventName),a(r(n.method)+" event listener: "+n.eventType)}function y(e){v({method:e,
eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),v({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),v({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),v({method:e,eventType:"Input",eventName:"input"}),v({method:e,eventType:"Mouse Up",eventName:"mouseup"}),v({method:e,eventType:"Mouse Down",eventName:"mousedown"}),v({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),v({method:e,eventType:"Touch Start",eventName:"touchstart"}),v({method:e,eventType:"Touch End",eventName:"touchend"}),v({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),v({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),v({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),v({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),v({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===ye&&v({method:e,eventType:"IFrame Resized",eventName:"resize"})}function g(e,t,i,r){return t!==e&&(e in i||(s(e+" is not a valid option for "+r+"CalculationMethod."),e=t),a(r+' calculation method set to "'+e+'"')),e}function m(){oe=g(oe,ne,xe,"height")}function b(){Oe=g(Oe,ke,je,"width")}function _(){!0===z?(y("add"),A()):a("Auto Resize disabled")}function w(){a("Disable outgoing messages"),ge=!1}function T(){a("Remove event listener: Message"),i(e,"message",W)}function S(){null!==J&&J.disconnect()}function E(){y("remove"),S(),clearInterval(ue)}function k(){w(),T(),!0===z&&E()}function O(){var e=document.createElement("div");e.style.clear="both",e.style.display="block",document.body.appendChild(e)}function R(){function i(){return{x:void 0!==e.pageXOffset?e.pageXOffset:document.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:document.documentElement.scrollTop}}function r(e){var t=e.getBoundingClientRect(),r=i();return{x:parseInt(t.left,10)+parseInt(r.x,10),y:parseInt(t.top,10)+parseInt(r.y,10)}}function n(e){function t(e){var t=r(e);a("Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),G(t.y,t.x,"scrollToOffset")}var i=e.split("#")[1]||e,n=decodeURIComponent(i),o=document.getElementById(n)||document.getElementsByName(n)[0];void 0!==o?t(o):(a("In page link (#"+i+") not found in iFrame, so sending to parent"),G(0,0,"inPageLink","#"+i))}function o(){""!==location.hash&&"#"!==location.hash&&n(location.href)}function l(){function e(e){function i(e){e.preventDefault(),n(this.getAttribute("href"))}"#"!==e.getAttribute("href")&&t(e,"click",i)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),e)}function c(){t(e,"hashchange",o)}function u(){setTimeout(o,te)}function d(){Array.prototype.forEach&&document.querySelectorAll?(a("Setting up location.hash handlers"),l(),c(),u()):s("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return le.enable?d():a("In page linking not enabled"),{findTarget:n}}function C(){a("Enable public methods"),Re.parentIFrame={autoResize:function(e){return!0===e&&!1===z?(z=!0,_()):!1===e&&!0===z&&(z=!1,E()),z},close:function(){G(0,0,"close"),k()},getId:function(){return pe},getPageInfo:function(e){"function"==typeof e?(Ie=e,G(0,0,"pageInfo")):(Ie=e,G(0,0,"pageInfoStop"))},moveToAnchor:function(e){le.findTarget(e)},reset:function(){H("parentIFrame.reset")},scrollTo:function(e,t){G(t,e,"scrollTo")},scrollToOffset:function(e,t){G(t,e,"scrollToOffset")},sendMessage:function(e,t){G(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){oe=e,m()},setWidthCalculationMethod:function(e){Oe=e,b()},setTargetOrigin:function(e){a("Set targetOrigin: "+e),be=e},size:function(e,t){var i=""+(e?e:"")+(t?","+t:"");U("size","parentIFrame.size("+i+")",e,t)}}}function P(){0!==ce&&(a("setInterval: "+ce+"ms"),ue=setInterval(function(){U("interval","setInterval: "+ce)},Math.abs(ce)))}function I(){function t(e){function t(e){!1===e.complete&&(a("Attach listeners to "+e.src),e.addEventListener("load",o,!1),e.addEventListener("error",s,!1),u.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function i(e){u.splice(u.indexOf(e),1)}function r(e){a("Remove listeners from "+e.src),e.removeEventListener("load",o,!1),e.removeEventListener("error",s,!1),i(e)}function n(e,t,i){r(e.target),U(t,i+": "+e.target.src,void 0,void 0)}function o(e){n(e,"imageLoad","Image loaded")}function s(e){n(e,"imageLoadFailed","Image load failed")}function l(e){U("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}function c(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return f=new d(l),a("Create body MutationObserver"),f.observe(e,t),f}var u=[],d=e.MutationObserver||e.WebKitMutationObserver,f=c();return{disconnect:function(){"disconnect"in f&&(a("Disconnect body MutationObserver"),f.disconnect(),u.forEach(r))}}}function A(){var t=0>ce;e.MutationObserver||e.WebKitMutationObserver?t?P():J=I():(a("MutationObserver not supported in this browser!"),P())}function x(e,t){function i(e){var i=/^\d+(px)?$/i;if(i.test(e))return parseInt(e,q);var r=t.style.left,n=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=r,t.runtimeStyle.left=n,e}var r=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(r=document.defaultView.getComputedStyle(t,null),r=null!==r?r[e]:0):r=i(t.currentStyle[e]),parseInt(r,q)}function j(e){e>Se/2&&(Se=2*e,a("Event throttle increased to "+Se+"ms"))}function L(e,t){for(var i=t.length,n=0,o=0,s=r(e),l=Ae(),c=0;c<i;c++)n=t[c].getBoundingClientRect()[e]+x("margin"+s,t[c]),n>o&&(o=n);return l=Ae()-l,a("Parsed "+i+" HTML elements"),a("Element position calculated in "+l+"ms"),j(l),o}function M(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function D(e,t){function i(){return s("No tagged elements ("+t+") found on page"),re}var r=document.querySelectorAll("["+t+"]");return 0===r.length?i():L(e,r)}function F(){return document.querySelectorAll("body *")}function N(e,t,i,r){function n(){re=d,Ee=f,G(re,Ee,e)}function o(){function e(e,t){var i=Math.abs(e-t)<=_e;return!i}return d=void 0!==i?i:xe[oe](),f=void 0!==r?r:je[Oe](),e(re,d)||Z&&e(Ee,f)}function s(){return!(e in{init:1,interval:1,size:1})}function l(){return oe in ve||Z&&Oe in ve}function c(){a("No change in size detected")}function u(){s()&&l()?H(t):e in{interval:1}||c()}var d,f;o()||"init"===e?(B(),n()):u()}function U(e,t,i,r){function n(){e in{reset:1,resetPage:1,init:1}||a("Trigger event: "+t)}function o(){return we&&e in ee}o()?a("Trigger event cancelled: "+e):(n(),Le(e,t,i,r))}function B(){we||(we=!0,a("Trigger event lock on")),clearTimeout(Te),Te=setTimeout(function(){we=!1,a("Trigger event lock off"),a("--")},te)}function V(e){re=xe[oe](),Ee=je[Oe](),G(re,Ee,e)}function H(e){var t=oe;oe=ne,a("Reset trigger event: "+e),B(),V("reset"),oe=t}function G(e,t,i,r,n){function o(){void 0===n?n=be:a("Message targetOrigin: "+n)}function s(){var o=e+":"+t,s=pe+":"+o+":"+i+(void 0!==r?":"+r:"");a("Sending message to host page ("+s+")"),me.postMessage(fe+s,n)}!0===ge&&(o(),s())}function W(t){function i(){return fe===(""+t.data).substr(0,he)}function r(){se=t.data,me=t.source,l(),ie=!1,setTimeout(function(){ae=!1},te)}function n(){ae?a("Page reset ignored by init"):(a("Page size reset by host page"),V("resetPage"))}function o(){U("resizeParent","Parent window requested size check")}function c(){var e=d();le.findTarget(e)}function u(){return t.data.split("]")[1].split(":")[0]}function d(){return t.data.substr(t.data.indexOf(":")+1)}function f(){return"iFrameResize"in e}function h(){var e=d();a("MessageCallback called from parent: "+e),Ce(JSON.parse(e)),a(" --")}function p(){var e=d();a("PageInfoFromParent called from parent: "+e),Ie(JSON.parse(e)),a(" --")}function v(){return t.data.split(":")[2]in{true:1,false:1}}function y(){switch(u()){case"reset":n();break;case"resize":o();break;case"moveToAnchor":c();break;case"message":h();break;case"pageInfo":p();break;default:f()||v()||s("Unexpected message ("+t.data+")")}}function g(){!1===ie?y():v()?r():a('Ignored message of type "'+u()+'". Received before initialization.')}i()&&g()}function $(){"loading"!==document.readyState&&e.parent.postMessage("[iFrameResizerChild]Ready","*")}var z=!0,q=10,K="",X=0,Y="",J=null,Q="",Z=!1,ee={resize:1,click:1},te=128,ie=!0,re=1,ne="bodyOffset",oe=ne,ae=!0,se="",le={},ce=32,ue=null,de=!1,fe="[iFrameSizer]",he=fe.length,pe="",ve={max:1,min:1,bodyScroll:1,documentElementScroll:1},ye="child",ge=!0,me=e.parent,be="*",_e=0,we=!1,Te=null,Se=16,Ee=1,ke="scroll",Oe=ke,Re=e,Ce=function(){s("MessageCallback function not defined")},Pe=function(){},Ie=function(){},Ae=Date.now||function(){return(new Date).getTime()},xe={bodyOffset:function(){return document.body.offsetHeight+x("marginTop")+x("marginBottom")},offset:function(){return xe.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,M(xe))},min:function(){return Math.min.apply(null,M(xe))},grow:function(){return xe.max()},lowestElement:function(){return Math.max(xe.bodyOffset(),L("bottom",F()))},taggedElement:function(){return D("bottom","data-iframe-height")}},je={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(je.bodyScroll(),je.documentElementScroll())},max:function(){return Math.max.apply(null,M(je))},min:function(){return Math.min.apply(null,M(je))},rightMostElement:function(){return L("right",F())},taggedElement:function(){return D("right","data-iframe-width")}},Le=n(N);t(e,"message",W),$()}(window||{})},1098:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(26),l=function(){function e(e){this.opacLocations=e,this.TABS={INST_LIST:0,MASHUP:1},this._selectedTab=this.TABS.INST_LIST,this._selectedLinks=[]}return e.prototype.getInstitutions=function(){return this.item.delivery.almaInstitutionsList||[]},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._selectedLinks||[]},enumerable:!0,configurable:!0}),e.prototype.loadMashup=function(e){this._selectedLinks=e.getitLink},e.prototype.unloadMashup=function(){this._selectedLinks=[]},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-alma-more-inst",templateUrl:"components/search/fullView/getit/almaMoreInst/alma-more-inst.html"}),o(0,a.Inject("opacLocations")),n("design:paramtypes",[Object])],e);var t}();t.PrmAlmaMoreInst=l},1099:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(26),l=i(424),c=i(6),u=i(33),d=angular.IScope,f=i(3),h=function(){function e(e,t,i,r,n,o){this.almaOtherMembersService=e,this.element=t,this.$timeout=i,this.$scope=r,this.smoothScrollUtil=n,this.primolyticsService=o,this.TABS={INST_LIST:0,OPAC:1},this._selectedTab=this.TABS.INST_LIST,this.loadOtherMemberInProgress=!1,this.servicesMap={},"E"===this.availabilityType?this.label="nui.brief.results.tabs.viewit_other":this.label="nui.brief.results.tabs.getit_other",this.almaInstitutionsList=this.almaOtherMembersService.getInstitutionsFilteredByType(this.item,this.availabilityType)}return e.prototype.getInstitutions=function(){return this.almaInstitutionsList},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),e.prototype.loadOtherMember=function(e){var t=this;this.memberInst=e.instCode,this.loadOtherMemberInProgress=!0,this.almaOtherMembersService.loadOtherMember(e,this.availabilityType).then(function(e){if(t.setOtherMemberScrollWatcher(),"P"===t.availabilityType){var i=e.data[0];t.memberItem=i,t.registerUser=f(i,"registerUser","None")}else"E"===t.availabilityType?(t.memberItem=e.data,t.servicesMap=t.almaOtherMembersService.initializeViewitOtherServicesMap(t.memberItem)):console.error("The type "+t.availabilityType+"is not supported as an availability type for other members")}).finally(function(){t.loadOtherMemberInProgress=!1})},e.prototype.setOtherMemberScrollWatcher=function(){var e=this;this.$timeout(function(){var t=e.$scope.$watch(function(){return e.loadOtherMemberInProgress},function(i,r){i||(e.isOverlayFullView?e.smoothScrollUtil.scrollTo(e.element[0],"","sticky-scroll"):e.smoothScrollUtil.scrollTo(e.element[0],"",""),t())});e.isOverlayFullView?e.smoothScrollUtil.scrollTo(e.serviceScrollId,"","sticky-scroll"):e.smoothScrollUtil.scrollTo(e.serviceScrollId,"","")},0,!1)},e.prototype.collapseSection=function(e){this.isCollapsed&&"E"===this.availabilityType&&this.callViewitOtherBeacon(),this.isCollapsed=!this.isCollapsed;var t=e.target;t.setAttribute("aria-expanded",this.isCollapsed)},Object.defineProperty(e.prototype,"opacRequestInProgress",{get:function(){return this.almaOtherMembersService.opacRequestInProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicesList",{get:function(){return this.almaOtherMembersService.getServicesList()},enumerable:!0,configurable:!0}),e.prototype.getServices=function(e){if(this.servicesMap[e])return this.servicesMap[e]},e.prototype.callViewitOtherBeacon=function(){},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Object)],e.prototype,"serviceMode",void 0),r([a.Input(),n("design:type",String)],e.prototype,"serviceScrollId",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),n("design:type",String)],e.prototype,"availabilityType",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isCollapsed",void 0),r([c.beacon({p:"brief",op:"checkOnlineFromOthers"}),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],e.prototype,"callViewitOtherBeacon",null),e=r([a.Component({selector:"prm-alma-other-members",templateUrl:"components/search/fullView/getit/almaOtherMembers/alma-other-members.html"}),o(1,a.Inject("$element")),o(2,a.Inject("$timeout")),o(3,a.Inject("$scope")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof l.AlmaOtherMembersService&&l.AlmaOtherMembersService)&&i||Object,Object,Object,"function"==typeof(h="undefined"!=typeof d&&d)&&h||Object,"function"==typeof(p="undefined"!=typeof u.SmoothScrollUtil&&u.SmoothScrollUtil)&&p||Object,"function"==typeof(v="undefined"!=typeof c.PrimolyticsService&&c.PrimolyticsService)&&v||Object])],e);var t,i,h,p,v}();t.PrmAlmaOtherMembers=h},1100:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),i(251);var a=i(0),s=i(2),l=i(26),c=i(1),u=i(3),d=i(69),f=function(){function e(e,t){this.searchBoxIcons=e,this.configurationUtil=t}return e.prototype.onSubmit=function(){if(this._searchInput){var e=u(this.item,"pnx.addata.issn",[]),t=u(this.item,"pnx.addata.eissn",[]);e=e.concat(t).map(function(e,t,i){return e.replace("-","")}),e=d(e);var i,r=encodeURI(e.join(" OR "));i=this.configurationUtil.getSummonOverAlma()?this.createSummonOverAlmaLink(r):this.createAdvanceSearchLink(r),window.open(i,"_blank")}},e.prototype.createSummonOverAlmaLink=function(e){var t="search?q=ISSN:({issns}){query}",i=this.configurationUtil.getSearchWithinJournalConfig(),r=encodeURI(this._searchInput);return t=t.replace("{issns}",e).replace("{query}",r),i.summonUrl+t},e.prototype.createAdvanceSearchLink=function(e){var t="/discovery/search?query=any,contains,{query},AND&query=issn,contains,({issns}),AND&tab={tab}&search_scope={scope}&sortby=rank&vid={vid}&mode=advanced&offset=0",i=this.configurationUtil.getSearchWithinJournalConfig(),r=encodeURI(this._searchInput),n=c.getVid(),o=i.tab,a=i.scope;return t=t.replace("{query}",r).replace("{issns}",e).replace("{tab}",o).replace("{scope}",a).replace("{vid}",n)},Object.defineProperty(e.prototype,"searchInput",{get:function(){return this._searchInput},set:function(e){this._searchInput=e},enumerable:!0,configurable:!0}),r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IExtendedDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-search-within-journal",templateUrl:"components/journals/search-within-journal.html"}),o(0,a.Inject("searchBoxIcons")),n("design:paramtypes",[Array,"function"==typeof(i="undefined"!=typeof s.ConfigurationUtil&&s.ConfigurationUtil)&&i||Object])],e);var t,i}();t.PrmSearchWithinJournal=f},1101:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=(i(1102),i(26)),l=function(){function e(e,t){this.$translate=t,this.availabilityLineIcons=e}return e.prototype.getLabel=function(){return"getit."+this.item.linkElement.links[0].getItTabText},e.prototype.getLinks=function(){var e=this.item.linkElement.links;return e},e.prototype.getCode=function(e){var t="";return t=0==e.displayText.indexOf("$$E")?this.$translate.instant("fulldisplay."+e.displayText.substring(3)):e.displayText.indexOf(" ")==-1&&e.hyperlinkText.indexOf(".")==-1&&this.$translate.instant("nui.getit_full."+e.hyperlinkText)!=e.hyperlinkText?this.$translate.instant("nui.getit_full."+e.hyperlinkText):e.displayText},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-view-online",templateUrl:"components/search/fullView/getit/viewOnline/viewOnline.html"}),o(0,a.Inject("availabilityLineIcons")),o(1,a.Inject("$translate")),n("design:paramtypes",[Object,Object])],e);var t}();t.PrmViewOnline=l},1102:function(e,t,i){function r(e,t){return o(e||[],t||[],n)}var n=i(157),o=i(1103);e.exports=r},1103:function(e,t){function i(e,t,i){for(var r=-1,n=e.length,o=t.length,a={};++r<n;){var s=r<o?t[r]:void 0;i(a,e[r],s)}return a}e.exports=i},1104:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(422),a=i(1105),s=i(1106),l=function(){function e(){}return e=r([n.NgModule({declarations:[a.PrmAlmaViewit,s.PrmAlmaViewitItems],providers:[o.ViewItService],imports:[]})],e)}();t.AlmaViewitModule=l},1105:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(422),l=i(26),c=i(93),u=i(7),d=function(){function e(e,t,i,r){this.viewItService=e,this.$scope=t,this.fullViewService=i,this.jwtUtilService=r,this.servicesMap={}}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.item.delivery?e.item.delivery.electronicServices:void 0},function(){e.servicesMap={}})},e.prototype.getServices=function(e){var t=this;if(this.servicesMap[e])return this.servicesMap[e];if(this.item&&this.item.delivery&&this.item.delivery.electronicServices){var i=this.item.delivery.electronicServices.filter(function(t){return e===t.serviceType}).map(function(e,i,r){return e.authNote=t.viewItService.stripHtml(e.authNote),e.parsedAvailiability=t.viewItService.splitHtml(e.availiability),e});return this.servicesMap[e]=i,i}},Object.defineProperty(e.prototype,"isCalculateSvcDone",{get:function(){return this.fullViewService.calculatePrimaViewItDone()},enumerable:!0,configurable:!0}),e.prototype.showSignInLink=function(){if(this.isSignedIn()||!this.fullViewService.calculatePrimaViewItDone())return!1;var e=this.getServices("ESPLORO");if(e&&e.length>0)return!1;var t=this.getServices("DIGITAL");return!!(this.item.delivery.hasD||t&&t.length>0)},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this.viewItService.signInLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicesList",{get:function(){return this.viewItService.getServicesList()},enumerable:!0,configurable:!0}),r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-alma-viewit",templateUrl:"components/search/fullView/getit/almaViewit/almaViewit.html"}),o(1,a.Inject("$scope")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof s.ViewItService&&s.ViewItService)&&i||Object,Object,"function"==typeof(d="undefined"!=typeof c.FullViewService&&c.FullViewService)&&d||Object,"function"==typeof(f="undefined"!=typeof u.JwtUtilService&&u.JwtUtilService)&&f||Object])],e);var t,i,d,f}();t.PrmAlmaViewit=d},1106:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(422),l=i(196),c=i(18),u=function(){function e(e,t,i,r,n,o,a){this.availabilityLineIcons=e,this.viewItIcons=t,this.viewItService=i,this.$window=r,this.$translate=n,this.$element=o,this.translationService=a,this.readOnly=!1,setTimeout(function(){var e=o[0].querySelector("#public-note");if(e){var t=e.querySelectorAll("a");t&&t.length>0&&c(t,function(e){e.addEventListener("click",function(e){e.stopPropagation()})})}},200)}return e.prototype.getLicense=function(e,t){this.viewItService.getLicense(e),t.stopPropagation(),e.toggleLicense=!e.toggleLicense},e.prototype.onClick=function(e,t){if(!this.readOnly){var i=getSelection();i.toString()&&e.currentTarget.contains(i.anchorNode.parentNode)||("DIGITAL"!==t.serviceType||t.hasAccess)&&this.$window.open(t.serviceUrl,"_blank")}},e.prototype.isLinkable=function(e){return!(this.readOnly||"DIGITAL"===e.serviceType&&!e.hasAccess)},e.prototype.disableClick=function(e){e.stopPropagation()},e.prototype.getPackageName=function(e){return e&&e.indexOf(" ")>0?e:this.translationService.translateInstantWithDefault(e,e)},e.prototype.isEsploroService=function(){return!!(this.services&&this.services.length>0&&"ESPLORO"===this.services[0].serviceType)},e.prototype.isPdfFile=function(e){return"pdf"===e.format},e.prototype.isTextFile=function(e){return"txt"===e.format||"doc"===e.format||"docx"===e.format},e.prototype.isZipFile=function(e){return"zip"===e.format||"rar"===e.format},e.prototype.isGenericFile=function(e){return!this.isPdfFile(e)&&!this.isTextFile(e)&&!this.isZipFile(e)},e.prototype.onClickEsploro=function(e,t,i){var r=getSelection();r.toString()&&e.currentTarget.contains(r.anchorNode.parentNode)||i||this.$window.open(t,"_blank")},e.prototype.onClickLicenseUrl=function(e){this.$window.open(e,"_blank")},e.prototype.viewItAvailability=function(e){var t=e.parsedAvailiability;return t?e.parsedAvailiability.join(", "):""},r([a.Input(),n("design:type",Object)],e.prototype,"services",void 0),r([a.Input(),n("design:type",Object)],e.prototype,"header",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"readOnly",void 0),e=r([a.Component({selector:"prm-alma-viewit-items",templateUrl:"components/search/fullView/getit/almaViewit/almaViewitItems.html"}),o(0,a.Inject("availabilityLineIcons")),o(1,a.Inject("viewItIcons")),o(3,a.Inject("$window")),o(4,a.Inject("$translate")),o(5,a.Inject("$element")),n("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.ViewItService&&s.ViewItService)&&t||Object,Object,Object,Object,"function"==typeof(i="undefined"!=typeof l.TranslationService&&l.TranslationService)&&i||Object])],e);var t,i}();t.PrmAlmaViewitItems=u},1107:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(992),a=i(1108),s=i(1109),l=i(1110),c=i(1111),u=function(){function e(){}return e=r([n.NgModule({declarations:[c.AlmaHowovpTabs,l.AlmaHowToGetit,s.AlmaHtgiBackButton,a.PrmAlmaHowovp],providers:[o.AlmaHowToGetitService],imports:[]})],e)}();t.HowToGetitModule=u},1108:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(93),l=i(10),c=i(992),u=i(1),d=i(63),f=i(200),h=i(50),p=i(34),v=i(26),y=i(114),g=i(114),m=function(){function e(e,t,i,r,n,o,s,l){this.opacService=e,this.fullViewService=t,this.userSessionManagerService=i,this.almaHowToGetitService=r,this.requestService=n,this.serviceButtonService=o,this.$window=s,this.opacLocations=l,this.institutionCode=u.getInstitutionCode(),this.parentTab=h.OPAC_TAB.LOCATIONS,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"servicesListIsLoading",{get:function(){return this._servicesListIsLoading},set:function(e){this._servicesListIsLoading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"services",{get:function(){return this.almaHowToGetitService.services},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},e.prototype.ngOnInit=function(){this.getHowToGetitServicesFromIls(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item)},e.prototype.getServiceAdditionalParams=function(e){return this._servicesAdditionalParams[e.type]},e.prototype.getHowToGetitServicesFromIls=function(){var e=this;if(this.almaHowToGetitService.services={},this.servicesListIsLoading=!1,this.almaHowToGetitService.setMessages(this.almaHowToGetitService.getHtml(this.isLoggedIn(),void 0)),this.servicesListIsLoading=!0,this.item.delivery.serviceMode[0]&&"howovp"===this.item.delivery.serviceMode[0]){var t=this.institutionCode,i=void 0;this.item.delivery&&(i=this.item.delivery.physicalServiceId),this.opacService.getIlsServicesList(-1,t,i).then(function(t){e.almaHowToGetitService.services=t.data;var i=t["reply-text"],r=!t.data.serviceinfo||0===t.data.serviceinfo.length||"N"===t.data.serviceinfo[0].allowed;e.isLoggedIn()&&i&&"0000"!==t["reply-code"]&&r?e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!0,i)):!e.isLoggedIn()&&r?e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!1,"nui.request.signin")):e.isLoggedIn()||r||e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!1,"nui.request.signin_additional")),e.servicesListIsLoading=!1},function(t){e.servicesListIsLoading=!1})}else this.servicesListIsLoading=!1},e.prototype.onClick=function(e){var t=this;if("OvL"===e["service-type"]){var i=e["link-to-service"];void 0!==i&&window.open(i,"_blank")}else this.serviceButtonService.makeIlsRequest(e,this.getServiceAdditionalParams(e)).then(function(e){var i={referer:t.parentTab,dest:h.OPAC_TAB.REQUEST};t.changeTabEvent.emit(i)})},e.prototype.isOvp=function(e){
return"OvP"===e["service-type"]},e.prototype.ngrsEnabledAndRSLinkIsOnlyService=function(){return y.ngrsEnabledAndRSLinkIsOnlyService(this.services.serviceinfo)},e.prototype.filteredServices=function(){return g.filteredServices(this.services.serviceinfo)},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof v.PrimoResponse&&v.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",String)],e.prototype,"serviceMode",void 0),r([a.Output(),n("design:type","function"==typeof(i="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&i||Object)],e.prototype,"changeTabEvent",void 0),e=r([a.Component({selector:"alma-howovp",templateUrl:"components/search/fullView/getit/howToGetit/howovp.html"}),o(6,a.Inject("$window")),o(7,a.Inject("opacLocations")),n("design:paramtypes",["function"==typeof(m="undefined"!=typeof p.OpacService&&p.OpacService)&&m||Object,"function"==typeof(b="undefined"!=typeof s.FullViewService&&s.FullViewService)&&b||Object,"function"==typeof(_="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&_||Object,"function"==typeof(w="undefined"!=typeof c.AlmaHowToGetitService&&c.AlmaHowToGetitService)&&w||Object,"function"==typeof(T="undefined"!=typeof d.RequestService&&d.RequestService)&&T||Object,"function"==typeof(S="undefined"!=typeof f.ServiceButtonService&&f.ServiceButtonService)&&S||Object,Object,Object])],e);var t,i,m,b,_,w,T,S}();t.PrmAlmaHowovp=m},1109:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(154),l=i(50),c=function(){function e(e){this.opacLocations=e,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"label",{get:function(){var e=this.historyStack.peek();switch(e){case l.OPAC_TAB.LOCATIONS:return"htgi.back_to_htgi_requests";default:return"eshelf.back"}},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){var e=this.historyStack.pop();this.requestStatus?(e=this.historyStack.pop(),this.changeTabEvent.emit({dest:e,referer:this.historyStack.peek()})):this.changeTabEvent.emit({dest:e})},r([a.Input(),n("design:type","function"==typeof(t="undefined"!=typeof s.LimitedHistoryStack&&s.LimitedHistoryStack)&&t||Object)],e.prototype,"historyStack",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"requestStatus",void 0),r([a.Output(),n("design:type","function"==typeof(i="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&i||Object)],e.prototype,"changeTabEvent",void 0),e=r([a.Component({selector:"alma-htgi-back-button",templateUrl:"components/search/fullView/getit/howToGetit/htgi-back-button.html"}),o(0,a.Inject("opacLocations")),n("design:paramtypes",[Object])],e);var t,i}();t.AlmaHtgiBackButton=c},1110:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=i(93),s=function(){function e(e){this.fullViewService=e,this.serviceScrollId="",this.isOverlayFullView=!1}return Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),r([o.Input(),n("design:type",Object)],e.prototype,"item",void 0),r([o.Input(),n("design:type",String)],e.prototype,"serviceMode",void 0),r([o.Input(),n("design:type",String)],e.prototype,"serviceScrollId",void 0),r([o.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),e=r([o.Component({selector:"alma-htgi-svc",templateUrl:"components/search/fullView/getit/howToGetit/htgi-service.html"}),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.FullViewService&&a.FullViewService)&&t||Object])],e);var t}();t.AlmaHowToGetit=s},1111:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(93),l=i(10),c=i(992),u=i(50),d=i(154),f=i(34),h=i(0),p=i(33),v=function(){function e(e,t,i,r,n,o){this.userSessionManagerService=e,this.almaHowToGetitService=t,this.fullViewService=i,this.opacService=r,this.$timeout=n,this.smoothScrollUtil=o,this.changeTabEvent=new a.EventEmitter,this.defaultTab=u.OPAC_TAB.LOCATIONS,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new d.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab,this.isOverlayFullView=!1}return e.prototype.onChangeTabEvent=function(e){var t=this,i=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==i.referer&&this.backToHistoryStack.push(i.referer),i.service&&(this.service=i.service),this.selectedTab=i.dest),this.$timeout(function(){t.isOverlayFullView?t.smoothScrollUtil.scrollTo(t.serviceScrollId,"","sticky-scroll"):t.smoothScrollUtil.scrollTo(t.serviceScrollId,"","")},100)},e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this.isLoggedIn()&&this.almaHowToGetitService.reqAlert&&this.almaHowToGetitService.reqAlert.getMsgHtml()===this.almaHowToGetitService.getHtml(!1,void 0)&&this.almaHowToGetitService.setMessages(this.almaHowToGetitService.getHtml(this.isLoggedIn(),void 0)),this.almaHowToGetitService.reqAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e.prototype.getResponseMessage=function(){return this.opacService.getResponseMessage()},e.prototype.onCopyRightSelected=function(){var e=this;!function(){e.isOverlayFullView?e.smoothScrollUtil.scrollTo("copyright-form","","sticky-scroll"):e.smoothScrollUtil.scrollTo("copyright-form","","")}()},r([a.Input(),n("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),n("design:type",String)],e.prototype,"serviceScrollId",void 0),r([a.Output(),n("design:type","function"==typeof(t="undefined"!=typeof a.EventEmitter&&a.EventEmitter)&&t||Object)],e.prototype,"changeTabEvent",void 0),e=r([a.Component({selector:"alma-htgi-tabs",templateUrl:"components/search/fullView/getit/howToGetit/htgi-tabs.html"}),o(4,h.Inject("$timeout")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof l.UserSessionManagerService&&l.UserSessionManagerService)&&i||Object,"function"==typeof(v="undefined"!=typeof c.AlmaHowToGetitService&&c.AlmaHowToGetitService)&&v||Object,"function"==typeof(y="undefined"!=typeof s.FullViewService&&s.FullViewService)&&y||Object,"function"==typeof(g="undefined"!=typeof f.OpacService&&f.OpacService)&&g||Object,Object,"function"==typeof(m="undefined"!=typeof p.SmoothScrollUtil&&p.SmoothScrollUtil)&&m||Object])],e);var t,i,v,y,g,m}();t.AlmaHowovpTabs=v},1112:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=i(6),s=i(26),l=i(422),c=function(){function e(e,t){var i=this;this.viewItService=e,this.primolyticsService=t,this.TABS={UNITS_LIST:0,UNIT_SERVICES:1},this._selectedTab=this.TABS.UNITS_LIST,this.almaUnitsList=this.item.delivery.filteredByGroupServices,this.almaUnitsList.forEach(function(e){e.services.forEach(function(e){e.authNote=i.viewItService.stripHtml(e.authNote),e.parsedAvailiability=i.viewItService.splitHtml(e.availiability)})}),"CAMPUS"===this.almaUnitsList[0].unitType?this.label="nui.brief.results.tabs.viewit_other_campuses":"LIBRARY"===this.almaUnitsList[0].unitType&&(this.label="nui.brief.results.tabs.viewit_other_libraries")}return Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),e.prototype.getUnits=function(){return this.almaUnitsList},e.prototype.collapseSection=function(e){this.isCollapsed&&this.sendBeacon(),this.isCollapsed=!this.isCollapsed;var t=e.target;t.setAttribute("aria-expanded",this.isCollapsed)},e.prototype.sendBeacon=function(){},r([o.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([o.Input(),n("design:type",Boolean)],e.prototype,"isCollapsed",void 0),r([a.beacon({p:"brief",op:"checkOnlineFromOthersCampuses"}),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],e.prototype,"sendBeacon",null),e=r([o.Component({selector:"prm-alma-other-units",templateUrl:"components/search/fullView/getit/almaOtherUnits/alma-other-units.html"}),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof l.ViewItService&&l.ViewItService)&&i||Object,"function"==typeof(c="undefined"!=typeof a.PrimolyticsService&&a.PrimolyticsService)&&c||Object])],e);var t,i,c}();t.PrmAlmaOtherUnits=c},1113:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(112),a=function(){function e(){}return e=r([n.NgModule({declarations:[],providers:[o.FullViewPageService],imports:[]})],e)}();t.FullViewPageModule=a},1114:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=function(){function e(){}return r([o.Input(),n("design:type",String)],e.prototype,"title",void 0),e=r([o.Component({selector:"prm-service-header",templateUrl:"components/search/fullView/serviceHeader/service-header.html"})],e)}();t.PrmServiceHeader=a},1115:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(11),l=i(190),c=i(14),u=i(8),d=i(1),f=i(2),h=i(79),p=i(153),v=i(27),y=i(96),g=i(6),m=i(20),b=(i(39),i(116),i(117),i(81),i(3),function(){function e(e,t,i,r,n,o,a,s,l,c,u,d,f,h,p){this.serviceDetailsService=e,this.primolyticsService=t,this.searchService=i,this.$stateParams=r,this.$mdDialog=n,this.searchFieldsService=o,this.filterInstitution=a,this.filterLanguage=s,this.mediaQueries=l,this.configurationUtil=c,this.$location=u,this.$translate=d,this.briefResultService=f,this.preFiltersService=h,this.changeLangService=p,this.chainDelimiterReg=/(?!\\+s)[.*+?^${}()|[\]\\]/g,this.queryOptions={},this._details=[],this.vid=r.vid,this.scope=r.search_scope,this.tab=r.tab,this.titlePerService={crsinfo:"fulldisplay.crsinfo.link.tooltip"}}return e.prototype.ngOnInit=function(){this.activate()},Object.defineProperty(e.prototype,"details",{get:function(){var e=this,t=this._details;return t.filter(function(t){for(var i=0;i<t.values.length;i++){var r=t.values[i];return r=e.getValuesOfValueItems(r),r.length>0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serachMode",{get:function(){return this.preFiltersService.isPreFilterEnable(this.tab)?this.$stateParams.mode:"advanced"},enumerable:!0,configurable:!0}),e.prototype.getQuery=function(e,t){return e.key+","+e.operator+","+this.getQueryFromVal(t).split("'").join("\\'")+("advanced"===this.serachMode?",AND":"")},e.prototype.createSummonOverAlmaLink=function(e,t){var i="search?q={field}:({query})",r=this.configurationUtil.getSearchWithinJournalConfig();return i=i.replace("{field}",this.getSummonSearchField(e.key)).replace("{query}",this.getQueryFromVal(t)),r.summonUrl+i},e.prototype.runLinkToLegantoBeacon=function(){},e.prototype.createLegantoLink=function(e){return this.serviceDetailsService.createLegantoLink(this.item,e)},e.prototype.getSummonSearchField=function(e){switch(e){case"sub":return"SubjectTerms";case"creator":return"AuthorCombined";default:return""}},e.prototype.isSummonOverAlma=function(){return this.configurationUtil.getSummonOverAlma()},e.prototype.activate=function(){this._details=this.serviceDetailsService.parseDetails(this.item);var e=this.searchService.getSearchObject();this.queryOptions={query:e.query,vid:this.vid,scope:this.scope,tab:this.tab}},e.prototype.getValuesOfValueItems=function(e){var t=this.filterInstitution.filterAndNormalizeData(e,e.values);return t=this.filterLanguage.filterField(t)},e.prototype.search=function(e,t){this.$mdDialog.hide();var i=this.searchService.getSearchObject();i.query=e+",exact,"+t,this.searchFieldsService.mainSearch=t,this.searchService.search(i,!0)},e.prototype.getChainArray=function(e,t){if(t){var i=new RegExp(t.replace(this.chainDelimiterReg,"\\$&"));return e.split(i)}return[e]},e.prototype.getDLToMmsId=function(e){var t=this.$location.$$protocol+"://"+this.$location.$$host+":"+this.$location.$$port+"/discovery/fulldisplay?docid=alma"+this.getSubfieldFromVal(e,"$$Z")+"&context=L&vid="+d.getVid()+"&lang="+this.$translate.use();return t},e.prototype.isSubfieldExist=function(e,t){return e.includes(t)},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e.prototype.getTextFromVal=function(e){return this.serviceDetailsService.getTextFromVal(e)},e.prototype.getToolTip=function(e){return this.titlePerService[e.keyt]||""},e.prototype.getQueryFromVal=function(e){return!e.includes("$$Q")&&e.includes("$$V")?this.serviceDetailsService.getSubfieldFromVal(e,"$$V"):this.serviceDetailsService.getSubfieldFromVal(e,"$$Q")},e.prototype.getPrefix=function(e){var t=this.serviceDetailsService.getSubfieldFromVal(e,"$$C");return t=t.replace(/:\s*$/g,":"),t.endsWith(":")?t+" ":t+": "},e.prototype.getFacet=function(e,t){var i="";if(this.isSuprima()?"creator"===e.key&&(i="creator"):e.isFacetExact&&(i=e.facetField),i){var r=this.getQueryFromVal(t).split("'").join("\\'");return i+",exact,"+r}return""},e.prototype.getSubfieldFromVal=function(e,t){return this.serviceDetailsService.getSubfieldFromVal(e,t)},e.prototype.setCameFromIndicationLateral=function(e){if(e){var t=e;e.key&&e.keyt&&(t="title"===e.key&&e.keyt?e.keyt:e.key),this.$mdDialog.hide(),this.searchService.cameFromState="lateralLinking:"+t}},e.prototype.setIsFacetExact=function(e){e&&(this.searchService.isFacetExact=e.isFacetExact)},Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.hl=function(e){if(this.searchService.highlightsService.highlights){var t=this.searchService.highlightsService.highlights[e];return t?t===this.serviceDetailsService.doNotHighlightField?"":t:this.searchService.highlightsService.highlights.termsUnion}return""},e.prototype.dontChangeStringDirectionToRtl=function(e){return this.briefResultService.dontChangeStringDirectionToRtl(e)},e.prototype.isCDEnabled=function(){return"suprima"!==d.getBackendSystem()||d.getAttributesMap().collectionDiscoveryEnabled},e.prototype.isLtr=function(){return"ltr"==this.changeLangService.direction},r([a.Input(),n("design:type",Object)],e.prototype,"item",void 0),r([g.beacon({p:"linksService",op:"linkToLeganto"}),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],e.prototype,"runLinkToLegantoBeacon",null),e=r([a.Component({selector:"prm-service-details",templateUrl:"components/search/fullView/details/service-details.html"}),o(3,a.Inject("$stateParams")),o(4,a.Inject("$mdDialog")),o(10,a.Inject("$location")),o(11,a.Inject("$translate")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.ServiceDetailsService&&l.ServiceDetailsService)&&t||Object,"function"==typeof(i="undefined"!=typeof g.PrimolyticsService&&g.PrimolyticsService)&&i||Object,"function"==typeof(b="undefined"!=typeof s.SearchService&&s.SearchService)&&b||Object,Object,Object,"function"==typeof(_="undefined"!=typeof c.SearchFieldsService&&c.SearchFieldsService)&&_||Object,"function"==typeof(w="undefined"!=typeof h.FilterInstitution&&h.FilterInstitution)&&w||Object,"function"==typeof(T="undefined"!=typeof p.FilterLanguage&&p.FilterLanguage)&&T||Object,"function"==typeof(S="undefined"!=typeof u.MediaQueries&&u.MediaQueries)&&S||Object,"function"==typeof(E="undefined"!=typeof f.ConfigurationUtil&&f.ConfigurationUtil)&&E||Object,Object,Object,"function"==typeof(k="undefined"!=typeof v.BriefResultService&&v.BriefResultService)&&k||Object,"function"==typeof(O="undefined"!=typeof y.PreFiltersService&&y.PreFiltersService)&&O||Object,"function"==typeof(R="undefined"!=typeof m.ChangeLangService&&m.ChangeLangService)&&R||Object])],e);var t,i,b,_,w,T,S,E,k,O,R}());t.PrmServiceDetails=b},1116:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(993),a=i(1117),s=i(1118),l=function(){function e(){}return e=r([n.NgModule({declarations:[a.PrmLoginAlmaMashup,s.PrmFullViewServiceContainer],providers:[o.LoginAlmaMashupService],imports:[]})],e)}();t.FullViewContainerServiceModule=l},1117:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=i(10),s=i(993),l=function(){function e(e,t){this.userSessionManagerService=e,this.loginAlmaMashupService=t,this.indexAlma=-1}return e.prototype.ngOnInit=function(){this.loginAlmaMashupService.setIndex(this.index)},e.prototype.isLoggedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.getIndexFullView=function(){return this.loginAlmaMashupService.getIndex()},r([o.Input(),n("design:type",Number)],e.prototype,"index",void 0),e=r([o.Component({selector:"prm-login-alma-mashup",templateUrl:"components/search/fullView/fullViewServiceContainer/login-alma-mashup.html"}),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.UserSessionManagerService&&a.UserSessionManagerService)&&t||Object,"function"==typeof(i="undefined"!=typeof s.LoginAlmaMashupService&&s.LoginAlmaMashupService)&&i||Object])],e);var t,i}();t.PrmLoginAlmaMashup=l},1118:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(26),l=i(118),c=i(2),u=i(10),d=i(93),f=i(424),h=i(3),p=function(){function e(e,t,i,r,n,o,a,s){var l=this;this.$rootScope=e,this.$timeout=t,this.tagsService=i,this.configurationUtil=r,this.$element=n,this.userSessionManagerService=o,this.fullViewService=a,this.almaOtherMembersService=s,this.KEY_CODE={LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},this._isTagsLoaded=!1,this._hackForAlma=!1,e.$on("silentLogin",function(){return l.getRecordTagsFromApi()}),this.$timeout(function(){return l._hackForAlma=!0},500)}return e.prototype.getRecordTagsFromApi=function(){this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid)},e.prototype.initTags=function(){this._isTagsLoaded||(this._isTagsLoaded=!0,this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid),this.tagsService.getTagsFromApi())},e.prototype.isMashupLink=function(){return""!==this.service.linkElement.links[0].link},e.prototype.isAlmaGetit=function(){return this.service.linkElement.links.filter(function(e){return"Almagetit"===e.displayText}).length>0},e.prototype.isQuickAccess=function(){return null!=this.item.delivery.quickAccessService},e.prototype.isMoreAlmaInst=function(e){return this.almaOtherMembersService.isMoreAlmaInst(this.item,e)},e.prototype.isMoreAlmaUnits=function(){return h(this.item,"delivery.filteredByGroupServices[0]")},e.prototype.hackForAlma=function(){return this._hackForAlma},Object.defineProperty(e.prototype,"recordNonUserTags",{get:function(){return this._isTagsLoaded||this.initTags(),this.tagsService.recordNonUserTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordUserTags",{get:function(){return this._isTagsLoaded||this.initTags(),this.tagsService.recordUserTags},enumerable:!0,configurable:!0}),e.prototype.keyDownSupport=function(e){this.KEY_CODE;40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e.prototype.ngOnInit=function(){var e=this;this.$timeout(function(){e.unfocusActionButtons("md-nav-bar button"),e.unfocusActionButtons("md-nav-bar nav")},400)},e.prototype.unfocusActionButtons=function(e){var t=this.$element[0].querySelectorAll(e);if(this.$element)for(var i=0,r=t;i<r.length;i++){var n=r[i];n.removeAttribute("tabindex","-1"),n.setAttribute("role","list")}},e.prototype.isLoggedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.mashupServiceClassName=function(){return this.isLoggedIn()||this.isLoggedInIDP()?"":h(this.service,"linkElement.links[0].displayText")||""},Object.defineProperty(e.prototype,"moreLikeThisItems",{get:function(){return this.fullViewService.moreLikeThisUnfilteredItems},enumerable:!0,configurable:!0}),r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Object)],e.prototype,"service",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isfavorites",void 0),r([a.Input(),n("design:type",Number)],e.prototype,"index",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"loadAdditionalServices",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isCourse",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isCollection",void 0),e=r([a.Component({selector:"prm-full-view-service-container",templateUrl:"components/search/fullView/fullViewServiceContainer/full-view-service-container.html"}),o(0,a.Inject("$rootScope")),o(1,a.Inject("$timeout")),o(4,a.Inject("$element")),n("design:paramtypes",[Object,Object,"function"==typeof(i="undefined"!=typeof l.TagsService&&l.TagsService)&&i||Object,"function"==typeof(p="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&p||Object,Object,"function"==typeof(v="undefined"!=typeof u.UserSessionManagerService&&u.UserSessionManagerService)&&v||Object,"function"==typeof(y="undefined"!=typeof d.FullViewService&&d.FullViewService)&&y||Object,"function"==typeof(g="undefined"!=typeof f.AlmaOtherMembersService&&f.AlmaOtherMembersService)&&g||Object])],e);var t,i,p,v,y,g}();t.PrmFullViewServiceContainer=p},1119:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(193),l=i(26),c=i(1),u=i(1),d=i(6),f=i(3),h=function(){function e(e,t,i,r,n){this.availabilityLineIcons=e,this.linksService=t,this.primolyticsService=i,this.$scope=r,this.$translate=n,this.vid=c.getVid()}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.item.delivery?e.item.delivery.link:void 0},function(){e.updateLinks()}),this.recordLinks=[],this.updateLinks()},e.prototype.getRecordOwner=function(){if("suprima"===u.getBackendSystem()){var e=f(this.item,"delivery.recordOwner",void 0);return e}},e.prototype.updateLinks=function(){var e=this;this.linksService.hasGoogleLinks(this.item)?this.linksService.handleGoogleLinks(this.item).then(function(t){e.recordLinks=e.linksService.getPnxLinks(e.item,e.linksService.getGoogleLinks(t.data))}):this.linksService.hasLinks(this.item)&&(this.recordLinks=this.linksService.getPnxLinks(this.item))},e.prototype.getLabel=function(e){return"fulldisplay."+e.displayLabel.substring(3)},e.prototype.getLinks=function(){return this.recordLinks},e.prototype.getRecordId=function(){return this.item.pnx.control.recordid[0]},e.prototype.hasSourceRecordLink=function(){return this.linksService.hasSourceRecordLink(this.item)},e.prototype.getSourceRecordLinkName=function(){return"fulldisplay."+this.linksService.getSourceRecordLinkName()},e.prototype.setLinkType=function(e){var t=f(e,"linkType","").split("/").pop();this.primolyticsService.doBeaconReport({p:"detailsTab",op:t},this.item,this.primolyticsService.getTimestamp())},e.prototype.getDefaultLabel=function(e){return e?(e.indexOf(".")<0&&(e=e.replace(/_/g," "),e=e.replace(/-/g," ")),e):""},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-service-links",templateUrl:"components/search/fullView/links/service-links.html"}),o(0,a.Inject("availabilityLineIcons")),o(3,a.Inject("$scope")),o(4,a.Inject("$translate")),n("design:paramtypes",[Array,"function"==typeof(i="undefined"!=typeof s.FullViewLinksService&&s.FullViewLinksService)&&i||Object,"function"==typeof(h="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&h||Object,Object,Object])],e);var t,i,h}();t.PrmServiceLinks=h},1120:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(26),l=i(423),c=(i(92),i(5),function(){function e(e,t){var i=this;this.almaViewerService=e,this.$state=t,this._deniedNote="",this._copyRightsFileContent="",this._embedUrl="",this._fileType="",this._denied=!1,this._allowDownload=!0,this._isObtrusiveCopyrights=!1,this._hideRepeatedLabels=!1,this._date=new Date;var r={repId:"",mmsId:"",pid:this.item.pnx.display.mms,inst:this.item.delivery.recordOwner};this.almaViewerService.getRepresentationInfo(r).then(function(e){return i.setRepresentationInfo(e)})}return e.prototype.setRepresentationInfo=function(e){e.remote_url&&!e.file_type?window.location.href=e.remote_url:e.remote_url&&e.file_type&&(this._embedUrl=e.remote_url,this._fileType=e.file_type),e.data&&(this._data=e.data,this.almaViewerService.mmsRes=e.data.mms_id),e.res&&(this._res=e.res),e.social&&(this._social=e.social),"401"!=e.status&&"403"!=e.status||(this._denied=!0,this._deniedNote=e.deniedMessage),this._allowDownload=e.allowDownload,this._copyRightsFileContent=e.copyRightsFileContent,this._isObtrusiveCopyrights=e.isObtrusiveCopyrights,this._hideRepeatedLabels=e.hideRepeatedLabels,this.almaViewerService.requestId=e.requestId},Object.defineProperty(e.prototype,"denied",{get:function(){return this._denied},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.almaViewerService.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deniedNote",{get:function(){return this._deniedNote},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"embedUrl",{get:function(){
return this._embedUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileType",{get:function(){return this._fileType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyRightsFileContent",{get:function(){return this._copyRightsFileContent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isObtrusiveCopyrights",{get:function(){return this._isObtrusiveCopyrights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDownload",{get:function(){return this._allowDownload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRepeatedLabels",{get:function(){return this._hideRepeatedLabels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"res",{get:function(){return this._res},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"social",{get:function(){return this._social},enumerable:!0,configurable:!0}),r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof s.PrimoResponse&&s.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-quick-access",templateUrl:"components/search/fullView/quickAccess/quickAccess.html"}),o(1,a.Inject("$state")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof l.AlmaViewerService&&l.AlmaViewerService)&&i||Object,Object])],e);var t,i}());t.PrmQuickAccess=c},1121:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(994),a=i(423),s=i(965),l=function(){function e(){}return e=r([n.NgModule({declarations:[s.PrmRepresentationViewer],providers:[a.AlmaViewerService],imports:[o.RepresentationViewerModule]})],e)}();t.QuickAccessModule=l},1122:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1123),a=i(1072),s=i(1073),l=i(1124),c=function(){function e(){}return e=r([n.NgModule({declarations:[l.PrmRecomendation,o.PrmRecomendationItem],providers:[a.RecomendationsItemService,s.RecomendationsService],imports:[]})],e)}();t.RecommendationModule=c},1123:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1072),l=i(6),c=function(){function e(e,t,i,r,n){this.recomendationsItemService=e,this.$http=t,this.primolyticsService=i,this.availabilityLineIcons=r,this.featuredActionsIcons=n,this.isfavorites=!1}return e.prototype.ngOnInit=function(){this.pnx=this.item,this.rec=new s.Rec(this.item),this.rec.index=this.index,this.getImage(),console.log(this.rec.link1)},e.prototype.showBookmark=function(){return!1},e.prototype.showPin=function(){return!1},e.prototype.updateFavorites=function(){},e.prototype.getImage=function(){this.rec.image=this.recomendationsItemService.getImage(this.rec)},e.prototype.getPlaceHolders=function(e){return{idx_0:e.type}},e.prototype.sendBeacon=function(){},e.prototype.getLink=function(){if(this.rec.link1.indexOf("&")<=-1)return this.rec.link1;for(var e="",t=this.rec.link1.split("&"),i=0,r=t;i<r.length;i++){var n=r[i];n.startsWith("rfr_id=")&&(n+="-Bx");var o=n.indexOf("<")!=-1?encodeURI(n):n;e+="&"+o}return e.slice(1)},r([a.Input(),n("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Number)],e.prototype,"index",void 0),r([l.beacon({p:"recommender",op:"ClickTrough",item:"rec"}),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],e.prototype,"sendBeacon",null),e=r([a.Component({selector:"prm-recomendation-item",templateUrl:"components/search/fullView/recomendation/recomendationItem.html"}),o(1,a.Inject("$http")),o(3,a.Inject("availabilityLineIcons")),o(4,a.Inject("featuredActionsIcons")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.RecomendationsItemService&&s.RecomendationsItemService)&&t||Object,Object,"function"==typeof(i="undefined"!=typeof l.PrimolyticsService&&l.PrimolyticsService)&&i||Object,Array,Array])],e);var t,i}();t.PrmRecomendationItem=c},1124:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1073),l=i(26),c=function(){function e(e,t){this.recomendationsService=e,this.availabilityLineIcons=t,this.bxenable=!1,this.quantity=5,this.more=!1}return e.prototype.ngOnInit=function(){this.getRecomendations(),this.quantity=5},e.prototype.moreSuggestions=function(){this.quantity=10,this.more=!1},e.prototype.getRecomendations=function(){var e=this;this.recomendationsService.getRecomendations(this.item).then(function(t){e.recommendations=t.data,e.recommendations.docs.length>0?(e.bxenable=!0,e.bxdisplay=!0):e.bxdisplay=!1,e.recommendations.docs.length>5?e.more=!0:e.more=!1},function(t){e.bxdisplay=!1})},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"bxdisplay",void 0),e=r([a.Component({selector:"prm-recomendations",templateUrl:"components/search/fullView/recomendation/recomendations.html"}),o(1,a.Inject("availabilityLineIcons")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof s.RecomendationsService&&s.RecomendationsService)&&i||Object,Array])],e);var t,i}();t.PrmRecomendation=c},1125:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1074),a=i(1126),s=function(){function e(){}return e=r([n.NgModule({declarations:[a.PrmSyndeticUnbound],providers:[o.SyndeticUnboundService],imports:["angularLoad"]})],e)}();t.SyndeticUnboundModule=s},1126:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1074),l=i(26),c=function(){function e(e,t){this.$translate=e,this.syndeticUnboundService=t,this.suenabled=!0}return e.prototype.ngOnInit=function(){this.runSU()},e.prototype.runSU=function(){var e=this;this.syndeticUnboundService.isLoaded()?this.runSyndeticUnboundCoore():this.syndeticUnboundService.getSU().then(function(t){e.syndeticUnboundService.setLoaded(),e.runSyndeticUnboundCoore()},function(e){console.log("Error Load Syndetic Unbound Script")})},e.prototype.runSyndeticUnboundCoore=function(){if("undefined"!=typeof LibraryThingConnector){var e="",t="",i="",r="",n="";this.item.pnx.addata.isbn?e=this.item.pnx.addata.isbn[0]||"":this.item.pnx.search&&this.item.pnx.search.isbn&&(e=this.item.pnx.search.isbn[0]||""),this.item.pnx.addata.btitle?t=this.item.pnx.addata.btitle[0]||"":this.item.pnx.addata.atitle?t=this.item.pnx.addata.atitle[0]||"":this.item.pnx.search&&this.item.pnx.search.title&&(t=this.item.pnx.search.title[0]||""),this.item.pnx.addata.au?i=this.item.pnx.addata.au[0]||"":this.item.pnx.search&&this.item.pnx.search.creatorcontrib&&(i=this.item.pnx.search.creatorcontrib[0]||""),this.item.pnx.control.recordid&&(r=this.item.pnx.control.recordid[0]||""),this.item.enrichment&&this.item.enrichment.virtualBrowseObject&&this.item.enrichment.virtualBrowseObject.callNumber?n=this.item.enrichment.virtualBrowseObject.callNumber||"":this.item.delivery&&this.item.delivery.bestlocation&&this.item.delivery.bestlocation.callNumber&&(n=this.item.delivery.bestlocation.callNumber||"");var o=this.$translate.instant("nui.aria.fulldisplay.exploreButton"),a=this.$translate.instant("brief.results.tabs.syndeticsunbound"),s={isbn:e,title:t,author:i,id:r,callnumber:n,buttonTitle:o,sectionTitle:a};LibraryThingConnector.error=function(e){console.error("ERR SU:  "+e)},LibraryThingConnector.runUnboundWithMetadata(s)}},r([a.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof l.PrimoResponse&&l.PrimoResponse).IDoc)&&t||Object)],e.prototype,"item",void 0),e=r([a.Component({selector:"prm-syndetic-unbound",templateUrl:"components/search/fullView/syndeticUnbound/syndeticUnbound.html"}),o(0,a.Inject("$translate")),n("design:paramtypes",[Object,"function"==typeof(i="undefined"!=typeof s.SyndeticUnboundService&&s.SyndeticUnboundService)&&i||Object])],e);var t,i}();t.PrmSyndeticUnbound=c},1127:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(194),s=i(0),l=i(93),c=i(33),u=i(993),d=i(6),f=i(1),h=i(8),p=i(26),v=i(11),y=i(95),g=i(195),m=i(2),b=i(10),_=i(197),w=i(4),T=i(27),S=i(48),E=i(42),k=i(49),O=i(159),R=i(3),C=["chaptersAndReviewsItem","nextRecord","previousRecord"],P=function(){function e(e,t,i,r,n,o,a,s,l,c,u,d,h,p,v,y,g,m,b,w,T,S,E,k){this.fullViewService=e,this.smoothScrollUtil=t,this.$document=i,this.$mdSticky=r,this.$scope=n,this.$timeout=o,this.$location=a,this.loginAlmaMashupService=s,this.primolyticsService=l,this.$mdDialog=c,this.mediaQueries=u,this.searchService=d,this.recordUtil=h,this.timesCitedService=p,this.citationTrailsFullviewLinkService=v,this.configurationUtil=y,this.userSessionManagerService=g,this.$state=m,this.$stateParams=b,this.$translate=w,this.briefResultService=T,this.favoritesService=S,this.templateUtil=E,this.chaptersAndReviewsService=k,this.indexAlmaLogin=-1,this.bxenable=f.getBxEnable(),this.suenable=f.getSyndeticUnboundEnable(),this.institution=f.getInstitutionCode(),this.bxdisplay=!0,this.physicalItemOnly=!1,this.suprimaEnrichersCalculated=!1,this.fullViewService=e,this.loginAlmaMashupService.resetIndex(),this.fullViewService.servicesArray=void 0,_.updateZoteroPlugin()}return e.prototype.ngOnInit=function(){var e=this;if(this.$scope.$watch(function(){return e.item.delivery},function(t,i){t&&(e.suprimaEnrichersCalculated||(e.suprimaEnrichersCalculated=!0,e.fullViewService.suprimaEnrichers(e.item)),e.fullViewService.getServices(e.item,e.originator,!0).then(function(t){e._servicesArray=t}))}),this.configurationUtil.isSuprima()&&("EbscoLocal"===this.item.adaptor||"WorldCatLocal"===this.item.adaptor))try{sessionStorage.current_pnx=JSON.stringify(this.item)}catch(e){}this.configurationUtil.isSuprima()&&this.item.delivery&&this.item.delivery.deliveryCategory&&this.item.delivery.deliveryCategory.indexOf("Alma-E")===-1&&(this.physicalItemOnly=!0),this.fullViewService.updateAvailability(this.item),this.fullViewService.setSearchWithinJournalService(this.item),this.bxdisplay=this.bxenable;var t=this.item.pnx.display.type[0];"article"!==t&&(this.bxdisplay=!1);var i=this.recordUtil.loadRecordsExtras([this.item]);i&&i.then(function(t){t&&e.fullViewService.updateServices(t[0],null)}),this.updatePageTitle(),this.updatePageDescription(),this.updateScheameDotOrg();var r=this.$location.url();r.includes("tags=scholar")&&this.fullViewService.googleScholarEnrich(this.item.pnx),this.timesCitedService.updateCitedTimesAvailability(this.item);var n=this.getDisplayLines();this.firstLine=n.shift(),(this.originator&&C.indexOf(this.originator)>=0||r.includes("/fulldisplay?"))&&this.briefResultService.isRelatedItemsConfigured(this.$state.params.vid)&&this.chaptersAndReviewsService.getRelatedItems(this.item)},e.prototype.ngAfterViewInit=function(){var e=this;this.focusId?this.$timeout(function(){e.scrollToElementId(e.focusId)},100):this.$timeout(function(){e.smoothScrollUtil.scrollTo("fullView","","")},100)},Object.defineProperty(e.prototype,"services",{get:function(){var e=this;return this._servicesArray||this.fullViewService.getServices(this.item,this.originator,!1).then(function(t){e._servicesArray=t}),this.fullViewService.isPromiseResolved&&this.fullViewService.getServices(this.item,this.originator,!1).then(function(t){e._servicesArray=t,e.fullViewService.isPromiseResolved=!1}),this._servicesArray},enumerable:!0,configurable:!0}),e.prototype.scrollToElementIdWithBeacon=function(e){this.scrollToElementId(e)},e.prototype.sendNavigateToTabBeacon=function(e){var t=e;"moreFromTheSameCourse"!==t&&"moreFromTheSameCollection"!==t||(t="moreFromTheSame"),this.primolyticsService.doBeaconReport({p:t,op:"navigate"+t.charAt(0).toUpperCase()+t.slice(1)},this.item,this.primolyticsService.getTimestamp())},e.prototype.showConditionalService=function(e){return!e.conditional||e.conditional(this.item)},Object.defineProperty(e.prototype,"isScreenSizeXs",{get:function(){return window.innerWidth<600},enumerable:!0,configurable:!0}),e.prototype.scrollToElementId=function(e){var t=document.getElementById(e);t&&(t.classList.add("section-focused"),this.$timeout(function(){t.classList.remove("section-focused")},500),this.isOverlayFullView?this.smoothScrollUtil.scrollTo(e,"","sticky-scroll"):this.smoothScrollUtil.scrollTo(e,"",""))},e.prototype.closeDialog=function(){this.$mdDialog.hide()},e.prototype.enableSU=function(){return this.suenable},e.prototype.updatePageTitle=function(){try{var e=this.getTitle();this.searchService.updatePageTitleFullView(e,this.institution)}catch(e){console.log("updatePageTitleFullView is failed"),console.error(e)}},e.prototype.updatePageDescription=function(){try{var e=f.getSEOParamsMappingParam("description");if(e)try{var t=this.configurationUtil.jsonPathToValue(this.item,e);if(t)if(Array.isArray(t)){var i=t.join(";");this.searchService.updatePageDescriptionFullView(i)}else this.searchService.updatePageDescriptionFullView(t)}catch(t){console.log("Update description  be SEO path is failed. Path:"+e),console.log(this.item),console.error(t)}if(this.item.pnx.display.description){var i=this.item.pnx.display.description.join(";");this.searchService.updatePageDescriptionFullView(i)}else{var r=this.getTitle(),n=this.item.pnx.display.type[0];this.searchService.updatePageDescriptionFullView(r+"-"+n)}}catch(e){console.log("Update description  is failed."),console.error(e)}},e.prototype.updatePageKeyWords=function(){try{var e=this.getTitle();this.item.pnx.display.description&&(e+=";"+this.item.pnx.display.description.join(";")),this.item.pnx.display.subject&&(e+=";"+this.item.pnx.display.subject.join(";")),this.item.pnx.display.contributor&&(e+=";"+this.item.pnx.display.contributor.join(";")),this.item.pnx.display.publisher&&(e+=";"+this.item.pnx.display.publisher.join(";")),this.item.pnx.display.publisher&&(e+=";"+this.item.pnx.display.publisher.join(";"));for(var t in this.item.pnx.facets){var i=this.item.pnx.facets[t].join(";");e+=";"+i}this.searchService.updatePageKeywordsFullView(e)}catch(e){console.log("Update keyword  is failed."),console.error(e)}},e.prototype.getTitle=function(){try{var e=f.getSEOParamsMappingParam("title");if(e)return this.configurationUtil.jsonPathToValue(this.item,e);var t=this.getDisplayLines()[0].values.filter(function(e){return"title"==e.key}).map(function(e){return e.text})[0][0];return t}catch(e){return console.log("translation of 'nui.brief.title' is corrupt"),console.error(e),""}},e.prototype.updateScheameDotOrg=function(){var e=this.searchService.getScheameDotOrg(this.item,this.getTitle());this.searchService.updateSDO(e)},e.prototype.shouldAddSearchWithinClass=function(e){return!(!this.physicalItemOnly||"searchWithinJournal"!==e.serviceName)},e.prototype.isRestrictedRecord=function(){var e=null==this.item.pnx;return e&&!this.isOverlayFullView},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},e.prototype.isLoggedIn=function(){return this.userName().length>0},e.prototype.isSearchResults=function(){return this.$state.current.name===w.STATE_NAMES.SEARCH},e.prototype.getDisplayLines=function(){if(!this.item)return[];var e=this.item.pnx.display.source;return this.lines&&this.lastId===e||(this.lastId=e,this.lines=this.briefResultService.parseDisplayLines(this.item,this.isCollectionDiscoveryCollection)),this.lines},e.prototype.getRecoredTitle=function(e){if(e)return e.split("'").join("\\'")},e.prototype.getNextRecord=function(){var e=this,t=angular.element(document.getElementsByTagName("primo-explore")).injector().get("$state");t.current.reloadOnSearch=!1,this.briefResultService.getNextRecord().then(function(t){var i=t;e.item=e.briefResultService.searchResults()[i],e.briefResultService.changeFullDisplayUrl(e.item,e.$scope),e.changeUrl()})},e.prototype.changeUrl=function(){this.$location.search("docid",this.getRecordId(this.item.pnx.control))},e.prototype.getRecordId=function(e){var t=e.recordid[0];if(t.startsWith("dedupmrg")||t.startsWith("TN_dedupmrg")){var i=e.sourcerecordid[0],r=i.indexOf("$$O");return r!==-1&&(i=i.substring(r+3)),i}return t},e.prototype.getPreviousRecord=function(){var e=this.briefResultService.getPreviousRecord();return this.item=this.briefResultService.searchResults()[e],this.briefResultService.changeFullDisplayUrl(this.item),e},e.prototype.isFirstRecord=function(){return angular.isDefined(this.isFirstItem)?this.isFirstItem:this.briefResultService.isFirstRecord()},e.prototype.isLastRecordByState=function(){return angular.isDefined(this.isLastItem)?this.isLastItem:this.briefResultService.isLastRecord()},e.prototype.isCourseService=function(){return R(this.item,"pnx.display.crsinfo[0]")},e.prototype.isCollectionService=function(){return R(this.item,"pnx.display.cdparentid[0]")},r([s.Input(),n("design:type","function"==typeof(t=("undefined"!=typeof p.PrimoResponse&&p.PrimoResponse).IExtendedDoc)&&t||Object)],e.prototype,"item",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),r([s.Input(),n("design:type",String)],e.prototype,"focusId",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"isfavorites",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"loadFullViewAdditionalServices",void 0),r([s.Input(),n("design:type",String)],e.prototype,"originator",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"isFirstItem",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"isLastItem",void 0),r([s.Input(),n("design:type",Boolean)],e.prototype,"isCollectionDiscoveryCollection",void 0),r([d.beacon({p:"fullshortcuts"}),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"scrollToElementIdWithBeacon",null),r([k.preventStateReload,n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],e.prototype,"changeUrl",null),e=r([s.Component({selector:"prm-full-view",templateUrl:"components/search/fullView/full-view.html"}),o(2,s.Inject("$document")),o(3,s.Inject("$mdSticky")),o(4,s.Inject("$scope")),o(5,s.Inject("$timeout")),o(6,s.Inject("$location")),o(9,s.Inject("$mdDialog")),o(17,s.Inject("$state")),o(18,s.Inject("$stateParams")),o(19,s.Inject("$translate")),n("design:paramtypes",["function"==typeof(i="undefined"!=typeof l.FullViewService&&l.FullViewService)&&i||Object,"function"==typeof(P="undefined"!=typeof c.SmoothScrollUtil&&c.SmoothScrollUtil)&&P||Object,Object,Object,Object,Object,Object,"function"==typeof(I="undefined"!=typeof u.LoginAlmaMashupService&&u.LoginAlmaMashupService)&&I||Object,"function"==typeof(A="undefined"!=typeof d.PrimolyticsService&&d.PrimolyticsService)&&A||Object,Object,"function"==typeof(x="undefined"!=typeof h.MediaQueries&&h.MediaQueries)&&x||Object,"function"==typeof(j="undefined"!=typeof v.SearchService&&v.SearchService)&&j||Object,"function"==typeof(L="undefined"!=typeof a.RecordUtil&&a.RecordUtil)&&L||Object,"function"==typeof(M="undefined"!=typeof y.TimesCitedService&&y.TimesCitedService)&&M||Object,"function"==typeof(D="undefined"!=typeof g.CitationTrailsFullviewLinkService&&g.CitationTrailsFullviewLinkService)&&D||Object,"function"==typeof(F="undefined"!=typeof m.ConfigurationUtil&&m.ConfigurationUtil)&&F||Object,"function"==typeof(N="undefined"!=typeof b.UserSessionManagerService&&b.UserSessionManagerService)&&N||Object,Object,Object,Object,"function"==typeof(U="undefined"!=typeof T.BriefResultService&&T.BriefResultService)&&U||Object,"function"==typeof(B="undefined"!=typeof S.FavoritesService&&S.FavoritesService)&&B||Object,"function"==typeof(V="undefined"!=typeof E.TemplateUtil&&E.TemplateUtil)&&V||Object,"function"==typeof(H="undefined"!=typeof O.ChaptersAndReviewsService&&O.ChaptersAndReviewsService)&&H||Object])],e);var t,i,P,I,A,x,j,L,M,D,F,N,U,B,V,H}();t.PrmFullView=P},1128:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1),l=i(8),c=i(30),u=i(4),d=i(22),f=i(28),h=i(16),p=function(){function e(e,t,i,r,n,o,a){this.$state=e,this.mediaQueries=t,this.alertService=i,this.$location=r,this.journalsService=n,this.databasesService=o,this.newspapersService=a,this.vid=s.getVid(),"servicesPage"===e.current.name?this.showSearch=!1:this.showSearch=!0,this.borInfoAlert=i.create(c.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return Object.defineProperty(e.prototype,"isJournalsSearch",{get:function(){return this.journalsService.isJournalSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDBSearch",{get:function(){return this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNewspapersSearch",{get:function(){return this.newspapersService.isNewspapersSearch()},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e.prototype.onSearchBarSearchEvent=function(e){var t=u.STATE_NAMES.SEARCH;this.isJournalsSearch?t=u.STATE_NAMES.JOURNAL_SEARCH:this.isDBSearch?t=u.STATE_NAMES.DB_SEARCH:this.newspapersService.isNewspapersSearch()&&(t=u.STATE_NAMES.NEWSPAPERS),this.$state.go(t,{query:e.mainSearchField,search_scope:e.scopeField,tab:e.tab,journals:e.journals,databases:e.databases,sortby:e.sortby,vid:this.vid},{reload:!1})},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$state.params.mode},enumerable:!0,configurable:!0}),e.prototype.isRestrictedRecord=function(){var e=!this.item||null==this.item.pnx;return e&&!this.isOverlayFullView},r([a.Input(),n("design:type",Object)],e.prototype,"item",void 0),r([a.Input(),n("design:type",Boolean)],e.prototype,"isOverlayFullView",void 0),e=r([a.Component({selector:"prm-full-view-cont",templateUrl:"components/search/fullView/full-view-container.html"}),o(0,a.Inject("$state")),o(3,a.Inject("$location")),n("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof l.MediaQueries&&l.MediaQueries)&&t||Object,"function"==typeof(i="undefined"!=typeof c.AlertFactory&&c.AlertFactory)&&i||Object,Object,"function"==typeof(p="undefined"!=typeof d.JournalsService&&d.JournalsService)&&p||Object,"function"==typeof(v="undefined"!=typeof f.DatabasesService&&f.DatabasesService)&&v||Object,"function"==typeof(y="undefined"!=typeof h.NewspapersService&&h.NewspapersService)&&y||Object])],e);var t,i,p,v,y}();t.PrmFullViewCont=p},1129:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(44),l=i(1),c=i(10),u=function(){function e(e,t,i){this.signInIcon=e,this.userSessionManagerService=t,this.loginService=i,this.authenticationMethods=l.getAuthenticationMethods(),this.messages={notLoggedIn:["nui.search.error.permalink.description1","nui.search.error.permalink.description2"],loggedIn:["nui.search.error.permalink.description3"]}}return e.prototype.handleLogin=function(e){this.loginService.handleLoginClick()},e.prototype.getMessages=function(){return this.isLoggedIn()?this.messages.loggedIn:this.messages.notLoggedIn},e.prototype.displaySignInButton=function(){return!this.isLoggedIn()},e.prototype.isLoggedIn=function(){return this.userName()&&this.userName().length>0},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},e.prototype.ngOnInit=function(){},e=r([a.Component({selector:"prm-sign-in-to-view",templateUrl:"components/search/fullView/sign-in-to-view.html"}),o(0,a.Inject("signInIcon")),n("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof c.UserSessionManagerService&&c.UserSessionManagerService)&&t||Object,"function"==typeof(i="undefined"!=typeof s.LoginService&&s.LoginService)&&i||Object])],e);var t,i}();t.PrmSignInToView=u},1130:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1131),a=i(1075),s=function(){function e(){}return e=r([n.NgModule({declarations:[o.PrmServicesPage],providers:[a.ServicesPageService],imports:[]})],e)}();t.ServicePagesModule=s},1131:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(1075),l=i(93),c=i(2),u=function(){function e(e,t,i,r,n){var o=this;this.servicesPageService=e,this.$stateParams=t,this.$window=i,this.fullViewService=r,this.configurationUtil=n;var a=e.getItem(t.institution,t.vid);a.then(function(r){r.data.redirect_to?i.location.assign(r.data.redirect_to):(o.item=r.data,o.configurationUtil.isSuprima()&&!r.data.delivery&&e.getServicePageDelivery(r.data.pnx,t.institution,t.vid).then(function(e){o.item.delivery=e.data.delivery,o.item.enrichment=e.data.enrichment,o.fullViewService.suprimaEnrichers(o.item)}))})}return e=r([a.Component({selector:"prm-services-page",templateUrl:"components/servicesPage/services-page.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$window")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ServicesPageService&&s.ServicesPageService)&&t||Object,Object,Object,"function"==typeof(i="undefined"!=typeof l.FullViewService&&l.FullViewService)&&i||Object,"function"==typeof(u="undefined"!=typeof c.ConfigurationUtil&&c.ConfigurationUtil)&&u||Object])],e);var t,i,u}();t.PrmServicesPage=u},1132:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}},a=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function i(e){return function(t){return r([e,t])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:
l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),c=i(112),u=i(6),d=function(){function e(e,t,i){var r=this;this.fullViewPageService=e,this.primolyticsService=t,this.$stateParams=i;var n=this.fullViewPageService.getItemById(i.docid,i.id,i.inst,i.context,i.search_scope,i.adaptor,i.isFrbr,i.showPnx,i.virtualBrowse,i.searchCDI);n.then(function(e){r.handleDeepLinkWithBeacon(e.data)})}return Object.defineProperty(e.prototype,"currentItem",{get:function(){return this.fullViewPageService.currentItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPnx",{get:function(){return this.$stateParams.showPnx&&"true"===this.$stateParams.showPnx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pnxLength",{get:function(){if(this.fullViewPageService.currentItem)return 1.2*this.fullViewPageService.currentItem.pnx.split("\n").length},enumerable:!0,configurable:!0}),e.prototype.callBeacon=function(e){},e.prototype.handleDeepLinkWithBeacon=function(e){var t=this;this.delay(17e3).then(function(i){t.callBeacon(e)})},e.prototype.delay=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},e)})];case 1:return t.sent(),[2]}})})},r([u.beacon({p:"brief",op:"openfull"}),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"callBeacon",null),e=r([l.Component({selector:"prm-full-view-page",templateUrl:"components/search/fullView/fullViewPage/full-view-page.html"}),o(2,l.Inject("$stateParams")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.FullViewPageService&&c.FullViewPageService)&&t||Object,"function"==typeof(i="undefined"!=typeof u.PrimolyticsService&&u.PrimolyticsService)&&i||Object,Object])],e);var t,i}();t.PrmFullViewPage=d},1133:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(6),l=i(112),c=i(93),u=function(){function e(e,t,i,r){var n=this;this.fullViewPageService=e,this.fullViewService=t,this.primolyticsService=i,this.$stateParams=r;var o=this.fullViewPageService.getItemById(r.docid,r.id,r.inst,r.context,r.search_scope,r.adaptor,r.isFrbr,r.showPnx,r.virtualBrowse);o.then(function(e){n.callBeacon(e.data),n.fullViewService.suprimaEnrichers(e.data)}),r["body-bgcolor"]&&r["body-bgcolor"].length>0&&(document.body.style.backgroundColor=r["body-bgcolor"])}return Object.defineProperty(e.prototype,"currentItem",{get:function(){return this.fullViewPageService.currentItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPnx",{get:function(){return this.$stateParams.showPnx&&"true"===this.$stateParams.showPnx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pnxLength",{get:function(){if(this.fullViewPageService.currentItem)return 1.2*this.fullViewPageService.currentItem.pnx.split("\n").length},enumerable:!0,configurable:!0}),e.prototype.callBeacon=function(e){},r([s.beacon({p:"brief",op:"openfull"}),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"callBeacon",null),e=r([a.Component({selector:"prm-leganto-getit",templateUrl:"components/search/fullView/legantoGetIt/leganto-getit.html"}),o(3,a.Inject("$stateParams")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.FullViewPageService&&l.FullViewPageService)&&t||Object,"function"==typeof(i="undefined"!=typeof c.FullViewService&&c.FullViewService)&&i||Object,"function"==typeof(u="undefined"!=typeof s.PrimolyticsService&&s.PrimolyticsService)&&u||Object,Object])],e);var t,i,u}();t.PrmLegantoGetIt=u},1134:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=function(){function e(){}return e.prototype.ngOnInit=function(){var e=document.createElement("script");e.setAttribute("src","https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"),document.body.appendChild(e)},e.prototype.numOfDownloads=function(){return this.item.pnx.display.downloads?this.item.pnx.display.downloads[0]:"0"},e.prototype.numOfViews=function(){return this.item.pnx.display.views?this.item.pnx.display.views[0]:"0"},e.prototype.assetDoi=function(){return this.item.pnx.addata.doi?this.item.pnx.addata.doi[0]:""},r([o.Input(),n("design:type",Object)],e.prototype,"item",void 0),e=r([o.Component({selector:"prm-usage-metrics",templateUrl:"components/search/fullView/usageMetrics/usage-metrics.html"}),n("design:paramtypes",[])],e)}();t.PrmUsageMetrics=a},425:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1092),a=i(1113),s=i(155),l=i(1114),c=i(190),u=i(1115),d=i(1116),f=i(1119),h=i(1120),p=i(1121),v=i(1122),y=i(1125),g=i(1127),m=i(1128),b=i(257),_=i(1129),w=i(1130),T=i(1132),S=i(1133),E=i(1134),k=function(){function e(){}return e=r([n.NgModule({declarations:[g.PrmFullView,m.PrmFullViewCont,u.PrmServiceDetails,l.PrmServiceHeader,f.PrmServiceLinks,h.PrmQuickAccess,E.PrmUsageMetrics,_.PrmSignInToView,T.PrmFullViewPage,S.PrmLegantoGetIt],providers:[s.FullViewDialogService,c.ServiceDetailsService,b.TagsListService],imports:[w.ServicePagesModule,d.FullViewContainerServiceModule,a.FullViewPageModule,o.GetitModule,v.RecommendationModule,p.QuickAccessModule,y.SyndeticUnboundModule]})],e)}();t.FullViewModule=k},936:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=i(940),s=n(a),l=i(938),c=r(l),u=i(937),d=r(u),f=i(947),h=r(f),p=i(945),v=r(p),y=i(943),g=n(y),m=i(948),b=n(m),_=i(944),w=n(_),T=function(){function e(t,i,r){if(o(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=(0,w.default)({},this.options_),i=this.options_=(0,w.default)(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+h.newGUID()}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},i.initChildren!==!1&&this.initChildren(),this.ready(r),i.reportTouchActivity!==!1&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),c.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return g.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=(0,w.default)(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,i){return c.createEl(e,t,i)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages();if(!t||!i)return e;var r=i[t];if(r&&r[e])return r[e];var n=t.split("-")[0],o=i[n];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=(0,b.default)(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0,o=void 0;if("string"==typeof t){o=(0,b.default)(t),i||(i={}),i===!0&&(g.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),i={});var a=i.componentClass||o;i.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;n=new s(this.player_||this,i)}else n=t;if(this.children_.splice(r,0,n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),o=o||n.name&&(0,b.default)(n.name()),o&&(this.childNameIndex_[o]=n),"function"==typeof n.el&&n.el()){var l=this.contentEl().children,c=l[r]||null;this.contentEl().insertBefore(n.el(),c)}return n},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,i=this.options_.children;if(i){var r=this.options_,n=function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),n!==!1){n===!0&&(n={}),n.playerOptions=t.options_.playerOptions;var o=t.addChild(i,n);o&&(t[i]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(i)?i:Object.keys(i),o.concat(Object.keys(this.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r=void 0,n=void 0;return"string"==typeof e?(r=e,n=i[r]||t.options_[r]||{}):(r=e.name,n=e),{name:r,opts:n}}).filter(function(t){var i=e.getComponent(t.opts.componentClass||(0,b.default)(t.name));return i&&!a.isTech(i)}).forEach(n)}},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,i){var r=this;if("string"==typeof e||Array.isArray(e))v.on(this.el_,e,d.bind(this,t));else{var n=e,o=t,a=d.bind(this,i),s=function(){return r.off(n,o,a)};s.guid=a.guid,this.on("dispose",s);var l=function(){return r.off("dispose",s)};l.guid=a.guid,e.nodeName?(v.on(n,o,a),v.on(n,"dispose",l)):"function"==typeof e.on&&(n.on(o,a),n.on("dispose",l))}return this},e.prototype.off=function(e,t,i){if(!e||"string"==typeof e||Array.isArray(e))v.off(this.el_,e,t);else{var r=e,n=t,o=d.bind(this,i);this.off("dispose",o),e.nodeName?(v.off(r,n,o),v.off(r,"dispose",o)):(r.off(n,o),r.off("dispose",o))}return this},e.prototype.one=function(e,t,i){var r=this,n=arguments;if("string"==typeof e||Array.isArray(e))v.one(this.el_,e,d.bind(this,t));else{var o=e,a=t,s=d.bind(this,i),l=function e(){r.off(o,a,e),s.apply(null,n)};l.guid=s.guid,this.on(o,a,l)}return this},e.prototype.trigger=function(e,t){return v.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return c.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return c.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return c.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return c.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return c.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return c.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.getAttribute=function(e){return c.getAttribute(this.el_,e)},e.prototype.setAttribute=function(e,t){return c.setAttribute(this.el_,e,t),this},e.prototype.removeAttribute=function(e){return c.removeAttribute(this.el_,e),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t===t||(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:"auto"===t?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("resize"),this;if(!this.el_)return 0;var r=this.el_.style[e],n=r.indexOf("px");return n!==-1?parseInt(r.slice(0,n),10):parseInt(this.el_["offset"+(0,b.default)(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s.default.getComputedStyle){var i=s.default.getComputedStyle(this.el_);t=i.getPropertyValue(e)||i[e]}if(t=parseFloat(t),0===t){var r="offset"+(0,b.default)(e);t=this.el_[r]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,i=10,r=200,n=void 0;this.on("touchstart",function(i){1===i.touches.length&&(t={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e=(new Date).getTime(),n=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)n=!1;else if(t){var r=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY,a=Math.sqrt(r*r+o*o);a>i&&(n=!1)}});var o=function(){n=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(i){if(t=null,n===!0){var o=(new Date).getTime()-e;o<r&&(i.preventDefault(),this.trigger("tap"))}})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=d.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var i=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}},e.prototype.setTimeout=function(e,t){e=d.bind(this,e);var i=s.default.setTimeout(e,t),r=function(){this.clearTimeout(i)};return r.guid="vjs-timeout-"+i,this.on("dispose",r),i},e.prototype.clearTimeout=function(e){s.default.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=d.bind(this,e);var i=s.default.setInterval(e,t),r=function(){this.clearInterval(i)};return r.guid="vjs-interval-"+i,this.on("dispose",r),i},e.prototype.clearInterval=function(e){s.default.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,i){if(t){if(t=(0,b.default)(t),e.components_||(e.components_={}),"Player"===t&&e.components_[t]){var r=e.components_[t];if(r.players&&Object.keys(r.players).length>0&&Object.keys(r.players).map(function(e){return r.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return e.components_[t]=i,i}},e.getComponent=function(t){if(t)return t=(0,b.default)(t),e.components_&&e.components_[t]?e.components_[t]:s.default&&s.default.videojs&&s.default.videojs[t]?(g.default.warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s.default.videojs[t]):void 0},e.extend=function(t){t=t||{},g.default.warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var i=t.init||t.init||this.prototype.init||this.prototype.init||function(){},r=function(){i.apply(this,arguments)};r.prototype=Object.create(this.prototype),r.prototype.constructor=r,r.extend=e.extend;for(var n in t)t.hasOwnProperty(n)&&(r.prototype[n]=t[n]);return r},e}();T.registerComponent("Component",T),t.default=T},937:function(e,t,i){"use strict";t.__esModule=!0,t.throttle=t.bind=void 0;var r=i(947);t.bind=function(e,t,i){t.guid||(t.guid=(0,r.newGUID)());var n=function(){return t.apply(e,arguments)};return n.guid=i?i+"_"+t.guid:t.guid,n},t.throttle=function(e,t){var i=Date.now(),r=function(){var r=Date.now();r-i>=t&&(e.apply(void 0,arguments),i=r)};return r}},938:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.raw=t,e}function a(e){return"string"==typeof e&&/\S/.test(e)}function s(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function l(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function c(){return U.default===V.default.document&&"undefined"!=typeof U.default.createElement}function u(e){return(0,K.isObject)(e)&&1===e.nodeType}function d(e){return function(t,i){if(!a(t))return U.default[e](null);a(i)&&(i=U.default.querySelector(i));var r=u(i)?i:U.default;return r[e]&&r[e](t)}}function f(e){return 0===e.indexOf("#")&&(e=e.slice(1)),U.default.getElementById(e)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],n=U.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];e.indexOf("aria-")!==-1||"role"===e||"type"===e?($.default.warn((0,q.default)(F,e,i)),n.setAttribute(e,i)):"textContent"===e?p(n,i):n[e]=i}),Object.getOwnPropertyNames(i).forEach(function(e){n.setAttribute(e,i[e])}),r&&M(n,r),n}function p(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function v(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function y(e){var t=e[Y];return t||(t=e[Y]=G.newGUID()),X[t]||(X[t]={}),X[t]}function g(e){var t=e[Y];return!!t&&!!Object.getOwnPropertyNames(X[t]).length}function m(e){var t=e[Y];if(t){delete X[t];try{delete e[Y]}catch(t){e.removeAttribute?e.removeAttribute(Y):e[Y]=null}}}function b(e,t){return s(t),e.classList?e.classList.contains(t):l(t).test(e.className)}function _(e,t){return e.classList?e.classList.add(t):b(e,t)||(e.className=(e.className+" "+t).trim()),e}function w(e,t){return e.classList?e.classList.remove(t):(s(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function T(e,t,i){var r=b(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!r),i!==r)return i?_(e,t):w(e,t),e}function S(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];null===r||"undefined"==typeof r||r===!1?e.removeAttribute(i):e.setAttribute(i,r===!0?"":r)})}function E(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,n=r.length-1;n>=0;n--){var o=r[n].name,a=r[n].value;"boolean"!=typeof e[o]&&i.indexOf(","+o+",")===-1||(a=null!==a),t[o]=a}return t}function k(e,t){return e.getAttribute(t)}function O(e,t,i){e.setAttribute(t,i)}function R(e,t){e.removeAttribute(t)}function C(){U.default.body.focus(),U.default.onselectstart=function(){return!1}}function P(){U.default.onselectstart=function(){return!0}}function I(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var i=U.default.documentElement,r=U.default.body,n=i.clientLeft||r.clientLeft||0,o=V.default.pageXOffset||r.scrollLeft,a=t.left+o-n,s=i.clientTop||r.clientTop||0,l=V.default.pageYOffset||r.scrollTop,c=t.top+l-s;return{left:Math.round(a),top:Math.round(c)}}function A(e,t){var i={},r=I(e),n=e.offsetWidth,o=e.offsetHeight,a=r.top,s=r.left,l=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(a-l+o)/o)),i.x=Math.max(0,Math.min(1,(c-s)/n)),i}function x(e){return(0,K.isObject)(e)&&3===e.nodeType}function j(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function L(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),u(e)||x(e)?e:"string"==typeof e&&/\S/.test(e)?U.default.createTextNode(e):void 0}).filter(function(e){return e})}function M(e,t){return L(t).forEach(function(t){return e.appendChild(t)}),e}function D(e,t){return M(j(e),t)}t.__esModule=!0,t.$$=t.$=void 0;var F=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);t.isReal=c,t.isEl=u,t.getEl=f,t.createEl=h,t.textContent=p,t.insertElFirst=v,t.getElData=y,t.hasElData=g,t.removeElData=m,t.hasElClass=b,t.addElClass=_,t.removeElClass=w,t.toggleElClass=T,t.setElAttributes=S,t.getElAttributes=E,t.getAttribute=k,t.setAttribute=O,t.removeAttribute=R,t.blockTextSelection=C,t.unblockTextSelection=P,t.findElPosition=I,t.getPointerPosition=A,t.isTextNode=x,t.emptyEl=j,t.normalizeContent=L,t.appendContent=M,t.insertContent=D;var N=i(939),U=n(N),B=i(940),V=n(B),H=i(947),G=r(H),W=i(943),$=n(W),z=i(970),q=n(z),K=i(942),X={},Y="vdata"+(new Date).getTime();t.$=d("querySelector"),t.$$=d("querySelectorAll")},939:function(e,t,i){(function(t){var r="undefined"!=typeof t?t:"undefined"!=typeof window?window:{},n=i(1006);if("undefined"!=typeof document)e.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),e.exports=o}}).call(t,i(68))},940:function(e,t,i){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(t,i(68))},941:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}t.__esModule=!0,t.BACKGROUND_SIZE_SUPPORTED=t.TOUCH_ENABLED=t.IS_ANY_SAFARI=t.IS_SAFARI=t.IE_VERSION=t.IS_IE8=t.CHROME_VERSION=t.IS_CHROME=t.IS_EDGE=t.IS_FIREFOX=t.IS_NATIVE_ANDROID=t.IS_OLD_ANDROID=t.ANDROID_VERSION=t.IS_ANDROID=t.IOS_VERSION=t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=void 0;var o=i(938),a=n(o),s=i(940),l=r(s),c=l.default.navigator&&l.default.navigator.userAgent||"",u=/AppleWebKit\/([\d.]+)/i.exec(c),d=u?parseFloat(u.pop()):null,f=t.IS_IPAD=/iPad/i.test(c),h=t.IS_IPHONE=/iPhone/i.test(c)&&!f,p=t.IS_IPOD=/iPod/i.test(c),v=t.IS_IOS=h||f||p,y=(t.IOS_VERSION=function(){var e=c.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),t.IS_ANDROID=/Android/i.test(c)),g=t.ANDROID_VERSION=function(){var e=c.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t?t:null}(),m=(t.IS_OLD_ANDROID=y&&/webkit/i.test(c)&&g<2.3,t.IS_NATIVE_ANDROID=y&&g<5&&d<537,t.IS_FIREFOX=/Firefox/i.test(c),t.IS_EDGE=/Edge/i.test(c)),b=t.IS_CHROME=!m&&/Chrome/i.test(c),_=(t.CHROME_VERSION=function(){var e=c.match(/Chrome\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),t.IS_IE8=/MSIE\s8\.0/.test(c),t.IE_VERSION=function(){var e=/MSIE\s(\d+)\.\d/.exec(c),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(c)&&/rv:11.0/.test(c)&&(t=11),t}(),t.IS_SAFARI=/Safari/i.test(c)&&!b&&!y&&!m);t.IS_ANY_SAFARI=_||v,t.TOUCH_ENABLED=a.isReal()&&("ontouchstart"in l.default||l.default.DocumentTouch&&l.default.document instanceof l.default.DocumentTouch),t.BACKGROUND_SIZE_SUPPORTED=a.isReal()&&"backgroundSize"in l.default.document.createElement("video").style},942:function(e,t,i){"use strict";function r(e,t){u(e).forEach(function(i){return t(e[i],i)})}function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u(e).reduce(function(i,r){return t(i,e[r],r)},i)}function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(i)):(i.forEach(function(t){t&&r(t,function(t,i){e[i]=t})}),e)}function a(e){return!!e&&"object"===("undefined"==typeof e?"undefined":l(e))}function s(e){return a(e)&&"[object Object]"===c.call(e)&&e.constructor===Object}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.each=r,t.reduce=n,t.assign=o,t.isObject=a,t.isPlain=s;var c=Object.prototype.toString,u=function(e){return a(e)?Object.keys(e):[]}},943:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.logByType=void 0;var n=i(940),o=r(n),a=i(941),s=i(942),l=void 0,c=t.logByType=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!a.IE_VERSION&&a.IE_VERSION<11;"log"!==e&&t.unshift(e.toUpperCase()+":"),l.history.push(t),t.unshift("VIDEOJS:");var r=o.default.console&&o.default.console[e];r&&(i&&(t=t.map(function(e){if((0,s.isObject)(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),r.apply?r[Array.isArray(t)?"apply":"call"](o.default.console,t):r(t))};l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];c("log",t)},l.history=[],l.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return c("error",t)},l.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return c("warn",t)},t.default=l},944:function(e,t,i){"use strict";function r(){for(var e={},t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return i.forEach(function(t){t&&(0,n.each)(t,function(t,i){return(0,n.isPlain)(t)?((0,n.isPlain)(e[i])||(e[i]={}),void(e[i]=r(e[i],t))):void(e[i]=t)})}),e}t.__esModule=!0,t.default=r;var n=i(942)},945:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){var i=h.getElData(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&h.removeElData(e)}function a(e,t,i,r){i.forEach(function(i){e(t,i,r)})}function s(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var r=e||b.default.event;e={};for(var n in r)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&r.preventDefault||(e[n]=r[n]));if(e.target||(e.target=e.srcElement||w.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var o=w.default.documentElement,a=w.default.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function l(e,t,i){if(Array.isArray(t))return a(l,e,t,i);var r=h.getElData(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),i.guid||(i.guid=v.newGUID()),r.handlers[t].push(i),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,i){if(!r.disabled){t=s(t);var n=r.handlers[t.type];if(n)for(var o=n.slice(0),a=0,l=o.length;a<l&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,i)}catch(e){g.default.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var n=!1;T&&S.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function c(e,t,i){if(h.hasElData(e)){var r=h.getElData(e);if(r.handlers){if(Array.isArray(t))return a(c,e,t,i);var n=function(t){r.handlers[t]=[],o(e,t)};if(t){var s=r.handlers[t];if(s){if(!i)return void n(t);if(i.guid)for(var l=0;l<s.length;l++)s[l].guid===i.guid&&s.splice(l--,1);o(e,t)}}else for(var u in r.handlers)n(u)}}}function u(e,t,i){var r=h.hasElData(e)?h.getElData(e):{},n=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=s(t),r.dispatcher&&r.dispatcher.call(e,t,i),n&&!t.isPropagationStopped()&&t.bubbles===!0)u.call(null,n,t,i);else if(!n&&!t.defaultPrevented){var o=h.getElData(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function d(e,t,i){if(Array.isArray(t))return a(d,e,t,i);var r=function r(){c(e,t,r),i.apply(this,arguments)};r.guid=i.guid=i.guid||v.newGUID(),l(e,t,r)}t.__esModule=!0,t.fixEvent=s,t.on=l,t.off=c,t.trigger=u,
t.one=d;var f=i(938),h=n(f),p=i(947),v=n(p),y=i(943),g=r(y),m=i(940),b=r(m),_=i(939),w=r(_),T=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){T=!0}});b.default.addEventListener("test",null,e)}catch(e){}}();var S=["touchstart","touchmove"]},946:function(e,t,i){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var i=Math.floor(e%60),r=Math.floor(e/60%60),n=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(n=r=i="-"),n=n>0||a>0?n+":":"",r=((n||o>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,n+r+i}t.__esModule=!0,t.default=r},947:function(e,t,i){"use strict";function r(){return n++}t.__esModule=!0,t.newGUID=r;var n=1},948:function(e,t,i){"use strict";function r(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}t.__esModule=!0,t.default=r},949:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i){if(t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+i+").")}function o(e,t,i,r){return void 0===r&&(c.default.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),r=0),n(e,r,i.length-1),i[r][t]}function a(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:o.bind(null,"start",0,e),end:o.bind(null,"end",1,e)}}function s(e,t){return Array.isArray(e)?a(e):void 0===e||void 0===t?a():a([[e,t]])}t.__esModule=!0,t.createTimeRange=void 0,t.createTimeRanges=s;var l=i(943),c=r(l);t.createTimeRange=s},950:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();n.kind=t,i&&(n.label=i),r&&(n.language=r),n.tech=e;var a=new m.default(n);return o.addTrack_(a),a}t.__esModule=!0;var c=i(936),u=n(c),d=i(1011),f=n(d),h=i(1016),p=n(h),v=i(944),y=n(v),g=i(957),m=n(g),b=i(1017),_=n(b),w=i(977),T=n(w),S=i(978),E=n(S),k=i(937),O=r(k),R=i(943),C=n(R),P=i(949),I=i(973),A=i(974),x=n(A),j=i(940),L=n(j),M=i(939),D=n(M),F=i(942),N=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o(this,t),i.reportTouchActivity=!1;var n=a(this,e.call(this,null,i,r));return n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),n.textTracks_=i.textTracks,n.videoTracks_=i.videoTracks,n.audioTracks_=i.audioTracks,n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){i["native"+e+"Tracks"]===!1&&(n["featuresNative"+e+"Tracks"]=!1)}),i.nativeCaptions===!1&&(n.featuresNativeTextTracks=!1),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new _.default,n.initTextTrackListeners(),n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}return s(t,e),t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(O.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return(0,P.createTimeRange)(0,0)},t.prototype.bufferedPercent=function(){return(0,I.bufferedPercent)(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var i=t[e+"Tracks"]()||[],r=i.length;r--;){var n=i[r];"text"===e&&t.removeRemoteTextTrack(n),i.removeTrack_(n)}})},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new x.default(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?(0,P.createTimeRange)(0,0):(0,P.createTimeRange)()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTextTrackListeners=function(){var e=O.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",O.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},t.prototype.initTrackListeners=function(){var e=this,t=["video","audio"];t.forEach(function(t){var i=function(){e.trigger(t+"trackchange")},r=e[t+"Tracks"]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})},t.prototype.addWebVttScript_=function(){var e=this;if(!L.default.WebVTT)if(D.default.body.contains(this.el())){var t=i(1018);if(!this.options_["vtt.js"]&&(0,F.isPlain)(t)&&Object.keys(t).length>0)return void this.trigger("vttjsloaded");var r=D.default.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",r.onload=function(){e.trigger("vttjsloaded")},r.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){r.onload=null,r.onerror=null}),L.default.WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){var i=this.remoteTextTracks(),r=function(e){return t.addTrack_(e.track)},n=function(e){return t.removeTrack_(e.track)};i.on("addtrack",r),i.on("removetrack",n),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},a=function(){o();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",o),"showing"===i.mode&&i.addEventListener("cuechange",o)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",function(){i.off("addtrack",r),i.off("removetrack",n),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++){var s=t[e];s.removeEventListener("cuechange",o)}})}},t.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new T.default,this.videoTracks_},t.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new E.default,this.audioTracks_},t.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new _.default,this.textTracks_},t.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new _.default,this.remoteTextTracks_},t.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new p.default,this.remoteTextTrackEls_},t.prototype.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return l(this,e,t,i)},t.prototype.createRemoteTextTrack=function(e){var t=(0,y.default)(e,{tech:this});return new f.default(t)},t.prototype.addRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],i=this.createRemoteTextTrack(e);return t!==!0&&t!==!1&&(C.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack_(i.track),t!==!0&&this.autoRemoteTextTracks_.addTrack_(i.track),i},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.canPlayType=function(){return""},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");return t.techs_[e]=i,i},t.getTech=function(e){return t.techs_&&t.techs_[e]?t.techs_[e]:L.default&&L.default.videojs&&L.default.videojs[e]?(C.default.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),L.default.videojs[e]):void 0},t}(u.default);N.prototype.textTracks_,N.prototype.audioTracks_,N.prototype.videoTracks_,N.prototype.featuresVolumeControl=!0,N.prototype.featuresFullscreenResize=!1,N.prototype.featuresPlaybackRate=!1,N.prototype.featuresProgressEvents=!1,N.prototype.featuresTimeupdateEvents=!1,N.prototype.featuresNativeTextTracks=!1,N.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===i&&(i=r.length),r.splice(i,0,t)},e.canPlayType=function(t){for(var i=e.sourceHandlers||[],r=void 0,n=0;n<i.length;n++)if(r=i[n].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,i){for(var r=e.sourceHandlers||[],n=void 0,o=0;o<r.length;o++)if(n=r[o].canHandleSource(t,i))return r[o];return null},e.canPlaySource=function(t,i){var r=e.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);return i||(e.nativeSourceHandler?i=e.nativeSourceHandler:C.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=i.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},u.default.registerComponent("Tech",N),u.default.registerComponent("MediaTechController",N),N.registerTech("Tech",N),t.default=N},951:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(945),h=r(f),p=i(937),v=r(p),y=i(943),g=n(y),m=i(939),b=n(m),_=i(942),w=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.emitTapEvents(),n.enable(),n}return s(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i=(0,_.assign)({className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&g.default.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=(0,_.assign)({role:"button","aria-live":"polite"},r),this.tabIndex_=i.tabIndex;var n=e.prototype.createEl.call(this,t,i,r);return this.createControlTextEl(n),n},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=d.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=i,this.nonIconControl||t.setAttribute("title",i),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){h.on(b.default,"keydown",v.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){h.off(b.default,"keydown",v.bind(this,this.handleKeyPress))},t}(c.default);c.default.registerComponent("ClickableComponent",w),t.default=w},952:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(951),l=r(s),c=i(936),u=r(c),d=i(943),f=r(d),h=i(942),p=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=(0,h.assign)({className:this.buildCSSClass()},t),"button"!==e&&(f.default.warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=(0,h.assign)({tabIndex:0},t),i=(0,h.assign)({role:"button"},i)),i=(0,h.assign)({type:"button","aria-live":"polite"},i);var r=u.default.prototype.createEl.call(this,e,t,i);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.constructor.name;return f.default.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),u.default.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(l.default);u.default.registerComponent("Button",p),t.default=p},953:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}t.__esModule=!0;var n=i(945),o=r(n),a=function(){};a.prototype.allowedEvents_={},a.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},o.on(this,e,t),this.addEventListener=i},a.prototype.addEventListener=a.prototype.on,a.prototype.off=function(e,t){o.off(this,e,t)},a.prototype.removeEventListener=a.prototype.off,a.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},o.one(this,e,t),this.addEventListener=i},a.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=o.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),o.trigger(this,e)},a.prototype.dispatchEvent=a.prototype.trigger,t.default=a},954:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.isCrossOrigin=t.getFileExtension=t.getAbsoluteURL=t.parseUrl=void 0;var n=i(939),o=r(n),a=i(940),s=r(a),l=t.parseUrl=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=o.default.createElement("a");i.href=e;var r=""===i.host&&"file:"!==i.protocol,n=void 0;r&&(n=o.default.createElement("div"),n.innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),o.default.body.appendChild(n));for(var a={},s=0;s<t.length;s++)a[t[s]]=i[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),r&&o.default.body.removeChild(n),a};t.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=o.default.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},t.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,i=t.exec(e);if(i)return i.pop().toLowerCase()}return""},t.isCrossOrigin=function(e){var t=s.default.location,i=l(e),r=":"===i.protocol?t.protocol:i.protocol,n=r+i.host!==t.protocol+t.host;return n}},955:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(982),l=r(s),c=i(936),u=r(c),d=i(962),f=r(d),h=i(1051),p=r(h),v=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,t),r.tracks=i.textTracks(),o(this,e.call(this,i,r))}return a(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.push(new p.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1;var t=this.player_.textTracks();if(!t)return e;for(var i=0;i<t.length;i++){var r=t[i];r.kind===this.kind_&&e.push(new f.default(this.player_,{track:r,selectable:!0}))}return e},t}(l.default);u.default.registerComponent("TextTrackButton",v),t.default=v},956:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(951),l=r(s),c=i(936),u=r(c),d=i(942),f=function(e){function t(i,r){n(this,t);var a=o(this,e.call(this,i,r));return a.selectable=r.selectable,a.selected(r.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return a(t,e),t.prototype.createEl=function(t,i,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",(0,d.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},i),r)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},t}(l.default);u.default.registerComponent("MenuItem",f),t.default=f},957:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(1012),c=n(l),u=i(937),d=r(u),f=i(958),h=i(943),p=n(h),v=i(940),y=n(v),g=i(959),m=n(g),b=i(954),_=i(976),w=n(_),T=i(944),S=n(T),E=i(941),k=r(E),O=function(e,t){var i=new y.default.WebVTT.Parser(y.default,y.default.vttjs,y.default.WebVTT.StringDecoder()),r=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){r.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),r.length>0&&(y.default.console&&y.default.console.groupCollapsed&&y.default.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return p.default.error(e)}),y.default.console&&y.default.console.groupEnd&&y.default.console.groupEnd()),i.flush()},R=function(e,t){var i={uri:e},r=(0,b.isCrossOrigin)(e);r&&(i.cors=r),(0,w.default)(i,d.bind(this,function(e,i,r){if(e)return p.default.error(e,i);if(t.loaded_=!0,"function"!=typeof y.default.WebVTT){if(t.tech_){var n=function(){return O(r,t)};t.tech_.on("vttjsloaded",n),t.tech_.on("vttjserror",function(){p.default.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",n)})}}else O(r,t)}))},C=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,t),!n.tech)throw new Error("A tech was not provided.");var s=(0,S.default)(n,{kind:f.TextTrackKind[n.kind]||"subtitles",language:n.language||n.srclang||""}),l=f.TextTrackMode[s.mode]||"disabled",u=s.default;"metadata"!==s.kind&&"chapters"!==s.kind||(l="hidden");var h=i=a(this,e.call(this,s));if(h.tech_=s.tech,k.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(h[p]=t.prototype[p]);h.cues_=[],h.activeCues_=[];var v=new c.default(h.cues_),y=new c.default(h.activeCues_),g=!1,m=d.bind(h,function(){this.activeCues,g&&(this.trigger("cuechange"),g=!1)});return"disabled"!==l&&h.tech_.ready(function(){h.tech_.on("timeupdate",m)},!0),Object.defineProperty(h,"default",{get:function(){return u},set:function(){}}),Object.defineProperty(h,"mode",{get:function(){return l},set:function(e){var t=this;f.TextTrackMode[e]&&(l=e,"showing"===l&&this.tech_.ready(function(){t.tech_.on("timeupdate",m)},!0),this.trigger("modechange"))}}),Object.defineProperty(h,"cues",{get:function(){return this.loaded_?v:null},set:function(){}}),Object.defineProperty(h,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return y;for(var e=this.tech_.currentTime(),t=[],i=0,r=this.cues.length;i<r;i++){var n=this.cues[i];n.startTime<=e&&n.endTime>=e?t.push(n):n.startTime===n.endTime&&n.startTime<=e&&n.startTime+.5>=e&&t.push(n)}if(g=!1,t.length!==this.activeCues_.length)g=!0;else for(var o=0;o<t.length;o++)this.activeCues_.indexOf(t[o])===-1&&(g=!0);return this.activeCues_=t,y.setCues_(this.activeCues_),y},set:function(){}}),s.src?(h.src=s.src,R(s.src,h)):h.loaded_=!0,r=h,a(i,r)}return s(t,e),t.prototype.addCue=function(e){var t=e;if(y.default.vttjs&&!(e instanceof y.default.vttjs.VTTCue)){t=new y.default.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}var r=this.tech_.textTracks();if(r)for(var n=0;n<r.length;n++)r[n]!==this&&r[n].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(m.default);C.prototype.allowedEvents_={cuechange:"cuechange"},t.default=C},958:function(e,t,i){"use strict";t.__esModule=!0;t.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},t.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},t.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},t.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},959:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(941),c=n(l),u=i(939),d=r(u),f=i(947),h=n(f),p=i(953),v=r(p),y=function(e){function t(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=a(this,e.call(this)),s=n;if(c.IS_IE8){s=d.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(s[l]=t.prototype[l])}var u={id:r.id||"vjs_track_"+h.newGUID(),kind:r.kind||"",label:r.label||"",language:r.language||""},f=function(e){Object.defineProperty(s,e,{get:function(){return u[e]},set:function(){}})};for(var p in u)f(p);return i=s,a(n,i)}return s(t,e),t}(v.default);t.default=y},960:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(953),c=n(l),u=i(941),d=r(u),f=i(939),h=n(f),p=function(e){function t(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t);var s=a(this,e.call(this));if(!n&&(n=s,d.IS_IE8)){n=h.default.createElement("custom");for(var l in t.prototype)"constructor"!==l&&(n[l]=t.prototype[l])}n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var c=0;c<r.length;c++)n.addTrack_(r[c]);return i=n,a(s,i)}return s(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"
}))},t.prototype.removeTrack_=function(e){for(var t=void 0,i=0,r=this.length;i<r;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,i=0,r=this.length;i<r;i++){var n=this[i];if(n.id===e){t=n;break}}return t},t}(c.default);p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var v in p.prototype.allowedEvents_)p.prototype["on"+v]=null;t.default=p},961:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!e||!t)return"";if("function"==typeof a.default.getComputedStyle){var i=a.default.getComputedStyle(e);return i?i[t]:""}return e.currentStyle[t]||""}t.__esModule=!0,t.default=n;var o=i(940),a=r(o)},962:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=i(956),u=n(c),d=i(936),f=n(d),h=i(937),p=r(h),v=i(940),y=n(v),g=i(939),m=n(g),b=function(e){function t(i,r){o(this,t);var n=r.track,s=i.textTracks();r.label=n.label||n.language||"Unknown",r.selected=n.default||"showing"===n.mode;var c=a(this,e.call(this,i,r));if(c.track=n,s){var u=p.bind(c,c.handleTracksChange);i.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),c.on("dispose",function(){s.removeEventListener("change",u)})}if(s&&void 0===s.onchange){var d=void 0;c.on(["tap","click"],function(){if("object"!==l(y.default.Event))try{d=new y.default.Event("change")}catch(e){}d||(d=m.default.createEvent("Event"),d.initEvent("change",!0,!0)),s.dispatchEvent(d)})}return c}return s(t,e),t.prototype.handleClick=function(t){var i=this.track.kind,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var n=0;n<r.length;n++){var o=r[n];o.kind===i&&(o===this.track?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},t.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},t}(u.default);f.default.registerComponent("TextTrackMenuItem",b),t.default=b},965:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(421),l=(i(92),i(5)),c=function(){function e(e,t,i,r,n){this.representationViewerService=e,this.$scope=t,this.$timeout=i,this.$http=r,this.accountIcons=n,this._representationTitle="",this._metadata=[],this._files=[],this._thumbnail_url="",this._left=!1,this._socialMap={},this._links=[],this.isOnLoad=!0,this.docData="",this.pdfData="",this.textData="",this.flage="-1",this.xmlflage="-1",this.fulltextIsExpanded=!0,this.metadataIsExpanded=!0}return e.prototype.ngOnInit=function(){var e=this;this.setRepresentationData(this.data,this.res),this.representationViewerService.setRequestId(this.requestid),this.representationViewerService.setMmsRes(this.data.mms_id);var t=(document.getElementsByClassName("main-file"),document.getElementsByClassName("main-page")),r=(document.getElementById("downloadButton"),i(966),this._files[this._index.index].cfPolicy),n=this._files[this._index.index].cfSignature,o=this._files[this._index.index].cfKP;this._files[this._index.index].url;document.cookie="CloudFront-Policy="+r+"; domain=.exlibrisgroup.com; path=/",document.cookie="CloudFront-Signature="+n+"; domain=.exlibrisgroup.com; path=/",document.cookie="CloudFront-Key-Pair-Id="+o+"; domain=.exlibrisgroup.com; path=/",this.isobtrusivecopyrights?(this.representationViewerService.setShowCopyrights(!0),this.representationViewerService.setShowMainFile(!1),this.representationViewerService.setShowThumbnailList(!1),this.isScreenSizeXs&&this.representationViewerService.setShowMetadata(!1),this._downloadStyle="display: none",t.length>0&&(t[0].classList.add("hide"),t[0].classList.remove("showIfXs"))):this.isScreenSizeXs&&(this.representationViewerService.setShowCopyrights(!1),this.representationViewerService.setShowMainFile(!0),this.representationViewerService.setShowThumbnailList(!1),this.representationViewerService.setShowMetadata(!1));var a=[];l.forEach(this.social,function(e){"vkontakte"==e.key?a.push({key:"vk",value:e.value}):"googleplus"==e.key?a.push({key:"google",value:e.value}):a.push(e)}),this._socialMap=a,this.getFile(),window.onhashchange=function(){e.getFile()}},e.prototype.ngAfterViewInit=function(){var e=this;this.isScreenSizeXs&&this.$timeout(function(){e.initToolbarIcons()},500),document.onkeydown=function(e){e=e||window.event,27===e.keyCode&&(document.getElementById("myModal").style.display="none")}},e.prototype.getFile=function(){if(null!=location.hash)for(var e=0;e<this._files.length;e++)if("#"+this._files[e].fileId==location.hash){this._index.index=this._files[e].index;break}this.viewAnalitics()},e.prototype.initToolbarIcons=function(){var e=document.getElementsByClassName("active-button"),t=document.getElementsByClassName("inactive-button");if(this.isScreenSizeXs)for(var i=0;i<e.length;i++)e[i].style.display="none",t[i].style.display="block",this.isobtrusivecopyrights?("ic_copyrights_mobile_active_24px"===e[i].getAttribute("icon-definition")&&(e[i].style.display="block"),"ic_copyrights_mobile_24px"===t[i].getAttribute("icon-definition")&&(t[i].style.display="none")):("ic_image_mobile_active_24px"===e[i].getAttribute("icon-definition")&&(e[i].style.display="block"),"ic_image_mobile_24px"===t[i].getAttribute("icon-definition")&&(t[i].style.display="none"))},e.prototype.getFulltext=function(e){var t=this,i=document.getElementById("fulltext-object_"+e);0!=i.innerText.indexOf("{{$ctrl.getFulltext")&&""!=i.innerHtml||this.$http.get(this.files[e].fulltext.url).then(function(e){t.textData=e.data})},e.prototype.getXmlContent=function(e,t){var i=this,r=document.getElementById("xml_"+e);0!=r.innerText.indexOf("{{$ctrl.getXmlContent")&&""!=r.innerHtml||this.$http.get(t).then(function(e){i.xmlData=e.data})},e.prototype.getDocContent=function(e){var t=this,i=document.getElementById("docdiv_"+e),r=document.getElementById("spinner");0!=i.innerText.indexOf("{{$ctrl.getDocContent($index)}}")&&""!=i.innerHtml||(this.isOnLoad=!0,this.docData="",this.representationViewerService.getRepresentationInfo(this.files[this.index.index].url).then(function(e){return t.setRepresentationInfo(e)})),l.element(i).empty().append(this.docData),l.element(r).empty()},e.prototype.setRepresentationInfo=function(e){this.isOnLoad=!1,this.docData='<object id="doc-object" type="text/html" class="show-main-file" width="100%" height="100%" data="'+e.office+'"></object> ',e.res,"401"==e.status||"403"==e.status},e.prototype.setRepresentationData=function(e,t){if(this._representationTitle=e.label,this.hiderepeatedlabels){var i=[];l.forEach(e.metadata,function(e,t){i.indexOf(e.label)!=-1?(e.hideLabel="hide-label-field",e.isHideLabel=!0):(i.push(e.label),e.isHideLabel=!1)})}t&&this.representationViewerService.setDetails(t),this._metadata=e.metadata,this._thumbnail_url=e.thumbnail_url,this._files=this.representationViewerService.parseFilesDisplay(e.files),this._index={index:0},this._delay={delay:!0},this._links=e.links},Object.defineProperty(e.prototype,"isShowMainFile",{get:function(){return this.representationViewerService.isShowMainFile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowCopyrights",{get:function(){return this.representationViewerService.isShowCopyrights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowThumbnailList",{get:function(){return this.representationViewerService.isShowThumbnailList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowMetadata",{get:function(){return this.representationViewerService.isShowMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._metadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this._files},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downloadStyle",{get:function(){return this._downloadStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnail_url",{get:function(){return this._thumbnail_url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._links},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"details",{get:function(){var e=this.representationViewerService.getDetails();return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"socialMap",{get:function(){return this._socialMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"embed",{get:function(){return"embedded"==this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickAccess",{get:function(){return"quickaccess"==this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFileStyle",{get:function(){if("true"==this.embed)return this.isScreenSizeXs?"height:82vh":"height:90vh"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isScreenSizeXs",{get:function(){return window.innerWidth<600},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"representationTitle",{get:function(){return this._representationTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainFileflexSize",{get:function(){if(this.quickAccess)return 100;var e=70;return this._files.length<=1&&(e+=10),this.embed&&(e+=30),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyrightsFlexSize",{get:function(){var e=80;return this.embed&&(e+=30),e},enumerable:!0,configurable:!0}),e.prototype.nextFile=function(){var e=this._index.index;e<this._files.length-1&&(this._index.index=e+1,this.quickAccess||(history.pushState("",document.title,window.location.pathname+window.location.search),this.viewAnalitics()))},e.prototype.prevFile=function(){var e=this._index.index;e>0&&(this._index.index=e-1,this.quickAccess||(history.pushState("",document.title,window.location.pathname+window.location.search),this.viewAnalitics()))},e.prototype.showMetadata=function(){var e=document.getElementsByClassName("main-file");this._left=!0,1==this.isShowCopyrights&&(this._left=!1,this.representationViewerService.setShowCopyrights(!1)),this.representationViewerService.setShowMainFile(!1),this.representationViewerService.setShowThumbnailList(!1);for(var t=document.getElementsByClassName("active-button"),i=document.getElementsByClassName("inactive-button"),r=0;r<t.length;r++)t[r].style.display="none",i[r].style.display="block","ic_copyrights_mobile_active_24px"===t[r].getAttribute("icon-definition")&&(t[r].style.display="block"),"ic_copyrights_mobile_24px"===i[r].getAttribute("icon-definition")&&(i[r].style.display="none");for(var t=document.getElementsByClassName("active-button"),i=document.getElementsByClassName("inactive-button"),r=0;r<t.length;r++)t[r].style.display="none",i[r].style.display="block","ic_info_mobile_active_24px"===t[r].getAttribute("icon-definition")&&(t[r].style.display="block"),"ic_info_mobile_24px"===i[r].getAttribute("icon-definition")&&(i[r].style.display="none");var n=(document.getElementsByTagName("prm-copyrights"),document.getElementsByClassName("main-file"),document.getElementsByClassName("main-page"));document.getElementsByClassName("thumbnail-list"),document.getElementsByClassName("md-list");0!=n.length&&(n[0].classList.remove("showIfXs"),n[0].classList.add("hide")),this.representationViewerService.setShowMetadata(!0),e[0].style.display="none"},e.prototype.showMainFile=function(){this.representationViewerService.showMainFile()},e.prototype.showThumbnails=function(){var e=(document.getElementsByTagName("prm-representation-viewer"),document.getElementsByTagName("prm-copyrights"),document.getElementsByClassName("main-file"),document.getElementsByClassName("main-page"));document.getElementsByClassName("thumbnail-list"),document.getElementsByClassName("md-list");this.representationViewerService.setShowCopyrights(!1),this.representationViewerService.setShowMainFile(!1),this.representationViewerService.setShowMetadata(!1);for(var t=document.getElementsByClassName("active-button"),i=document.getElementsByClassName("inactive-button"),r=0;r<t.length;r++)t[r].style.display="none",i[r].style.display="block","ic_folder_mobile_active_24px"===t[r].getAttribute("icon-definition")&&(t[r].style.display="block"),"ic_folder_mobile_24px"===i[r].getAttribute("icon-definition")&&(i[r].style.display="none");this.representationViewerService.setShowThumbnailList(!0),0!=e.length&&(e[0].classList.remove("showIfXs"),e[0].classList.add("hide"))},e.prototype.downloadAnalitics=function(){this.representationViewerService.updateStatistics(this.files[this.index.index].fileId,"DOWNLOAD")},e.prototype.viewAnalitics=function(){this.representationViewerService.updateStatistics(this.files[this.index.index].fileId,"VIEW")},e.prototype.showCopyrights=function(){var e=(document.getElementsByTagName("prm-copyrights"),document.getElementsByClassName("main-file"),document.getElementsByClassName("main-page")),t=(document.getElementsByClassName("thumbnail-list"),document.getElementsByClassName("md-list"),document.getElementById("downloadButton"));if(0==this.isShowCopyrights){if(this.representationViewerService.setShowMainFile(!1),this.representationViewerService.setShowThumbnailList(!1),null!=t&&(t.style.display="none"),0!=e.length&&(e[0].classList.remove("showIfXs"),e[0].classList.add("hide")),this.isScreenSizeXs){this.representationViewerService.setShowMetadata(!1);for(var i=document.getElementsByClassName("active-button"),r=document.getElementsByClassName("inactive-button"),n=0;n<i.length;n++)i[n].style.display="none",r[n].style.display="block","ic_copyrights_mobile_active_24px"===i[n].getAttribute("icon-definition")&&(i[n].style.display="block"),"ic_copyrights_mobile_24px"===r[n].getAttribute("icon-definition")&&(r[n].style.display="none")}this.representationViewerService.setShowCopyrights(!0)}else this.isScreenSizeXs||(this.representationViewerService.setShowCopyrights(!1),this.representationViewerService.setShowMainFile(!0),this.representationViewerService.setShowThumbnailList(!0),this.representationViewerService.setShowMetadata(!0),null!=t&&(t.style.display="block"),0!=e.length&&(e[0].classList.remove("hide"),e[0].classList.add("showIfXs")))},e.prototype.getTextFromVal=function(e){if(e.includes("$$Q")){var t=e.split("$$Q")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}if(e.includes("$$Z")){var t=e.split("$$Z")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}return e.includes("$$V")?this.getSubfieldFromVal(e,"$$V"):e},e.prototype.getSubfieldFromVal=function(e,t){if(this.isSubfieldExist(e,t)){var i=e.split(t)[1];return i.indexOf("$$")!==-1&&(i=i.substring(0,i.indexOf("$$"))),i}return e},e.prototype.isSubfieldExist=function(e,t){return e.includes(t)},e.prototype.openModal=function(){document.getElementById("myModal").style.display="block"},e.prototype.closeModal=function(){document.getElementById("myModal").style.display="none"},Object.defineProperty(e.prototype,"viewerUrl",{get:function(){return window.origin+"/discovery/delivery/"+this.representationViewerService.currentVid+"/"+this.data.mms_id},enumerable:!0,configurable:!0}),e.prototype.openInNewWindow=function(e){window.open(this.viewerUrl+"#"+e)},e.prototype.getPDFWithCoverPageContent=function(e){var t=this,i=document.getElementById("pdfdiv_"+e);0!=i.innerText.indexOf("{{$ctrl.getPDFWithCoverPageContent($index)}}")&&""!=i.innerHtml||(this.isOnLoad=!0,this.pdfData="",this.$http.get(this.files[e].url).then(function(i){t.isOnLoad=!1,t.files[e].url=i.data,t.files[e].downloadUrl=i.data,t.files[e].requiresPDFCoverPage=!1})),l.element(i).empty().append(this.pdfData)},e=r([a.Component({inputs:["data","mode","allowdownload","copyrightsfilecontent","isobtrusivecopyrights","hiderepeatedlabels","res","social","requestid","filetype","remoteurl"],selector:"prm-representation-viewer",templateUrl:"components/delivery/representationViewer/representationViewer.html"}),o(1,a.Inject("$scope")),o(2,a.Inject("$timeout")),o(3,a.Inject("$http")),o(4,a.Inject("accountIcons")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.RepresentationViewerService&&s.RepresentationViewerService)&&t||Object,Object,Object,Object,Object])],e);var t}();t.PrmRepresentationViewer=c},966:function(e,t,i){var r,r;!function(t){e.exports=t()}(function(){var e;return function e(t,i,n){function o(s,l){if(!i[s]){if(!t[s]){var c="function"==typeof r&&r;if(!l&&c)return r(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return o(i?i:e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof r&&r,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,i,r,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(i=this._events[e],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(a(i))for(o=Array.prototype.slice.call(arguments,1),c=i.slice(),r=c.length,l=0;l<r;l++)c[l].apply(this,o);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var i,r,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],o=i.length,r=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(i)){for(s=o;s-- >0;)if(i[s]===t||i[s].listener&&i[s].listener===t){r=s;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],n(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,i,r){!function(t){var n=/^([^#]*)(.*)$/,o=/^([^\?]*)(.*)$/,a=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,s={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var i=null,r=null,l=n.exec(t);l&&(r=l[2],t=l[1]);var c=o.exec(t);c&&(i=c[2],t=c[1]);var u=n.exec(e);u&&(e=u[1]);var d=o.exec(e);d&&(e=d[1]);var f=a.exec(e);if(!f)throw new Error("Error trying to parse base URL.");var h=f[2]||"",p=f[1]||"",v=f[3];0!==v.indexOf("/")&&""!==p&&(v="/"+v);var y=null;return y=/^\/\//.test(t)?h+s.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?p+"/"+s.buildAbsolutePath("",t.substring(1)):s.buildAbsolutePath(p+v,t),i&&(y+=i),r&&(y+=r),y},buildAbsolutePath:function(e,t){for(var i,r,n=t,o="",a=e.replace(/[^\/]*$/,n.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;r=a.indexOf("/../",s),r>-1;s=r+i)i=/^\/(?:\.\.\/)*/.exec(a.slice(r))[0].length,o=(o+a.substring(s,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(i-1)/3+"}$"),"/");return o+a.substr(s)}};"object"==typeof r&&"object"==typeof i?i.exports=s:"function"==typeof e&&e.amd?e([],function(){return s}):"object"==typeof r?r.URLToolkit=s:t.URLToolkit=s}(this)},{}],3:[function(e,t,i){var r=arguments[3],n=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function i(e){y[e]=!0;for(var t in n[e][1]){var r=n[e][1][t];y[r]||i(r)}}for(var s,l=Object.keys(o),c=0,u=l.length;c<u;c++){var d=l[c],f=o[d].exports;if(f===e||f&&f.default===e){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},c=0,u=l.length;c<u;c++){var d=l[c];h[d]=d}n[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,n[p]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),v];var y={};i(p);var g="("+r+")({"+Object.keys(y).map(function(e){return a(e)+":["+n[e][0]+","+a(n[e][1])+"]"}).join(",")+"},{},["+a(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return b;var _=m.createObjectURL(b),w=new Worker(_);return w.objectURL=_,w}},{}],4:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(30),h=r(f),p=e(26),v=e(45),y=e(9),g=r(y),m=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.FRAG_LOADING,c.default.FRAG_LOADED,c.default.FRAG_BUFFERED,c.default.ERROR));return i.lastLoadedFragLevel=0,i._autoLevelCapping=-1,i._nextAutoLevel=-1,i.hls=e,i.onCheck=i.abandonRulesCheck.bind(i),i}return a(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var i=this.hls,r=e.frag.level,n=i.levels[r].details.live,o=i.config,a=void 0,s=void 0;n?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this.bwEstimator=new g.default(i,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"abandonRulesCheck",value:function(){var e=this.hls,t=e.media,i=this.fragCurrent,r=i.loader,n=this.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=r.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var a=performance.now()-o.trequest,s=Math.abs(t.playbackRate);if(a>500*i.duration/s){var l=e.levels,u=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),d=l[i.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=o.total?o.total:Math.max(o.loaded,Math.round(i.duration*f/8)),y=t.currentTime,g=(p-o.loaded)/u,m=(h.default.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(m<2*i.duration/s&&g>m){var b=void 0,_=void 0;for(_=i.level-1;_>n;_--){var w=l[_].realBitrate?Math.max(l[_].realBitrate,l[_].bitrate):l[_].bitrate;if(b=i.duration*w/(6.4*u),b<m)break}b<g&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=_,this.bwEstimator.sample(a,o.loaded),r.abort(),this.clearTimer(),e.trigger(c.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:o}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type){this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1;var i=this.hls.levels[t.level],r=(i.loaded?i.loaded.bytes:0)+e.stats.loaded,n=(i.loaded?i.loaded.duration:0)+e.frag.duration;if(i.loaded={bytes:r,duration:n},i.realBitrate=Math.round(8*r/n),e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,i=e.frag;if(t.aborted!==!0&&1===i.loadCounter&&"main"===i.type&&(!i.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(r,t.loaded),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(e,t,i,r,n,o,a,s,l){for(var c=n;c>=r;c--){var u=l[c],d=u.details,f=d?d.totalduration/d.fragments.length:t,h=!!d&&d.live,p=void 0;p=c<=e?a*i:s*i;var y=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,g=y*f/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+y+"/"+f+"/"+o+"/"+g),p>y&&(!g||h||g<o))return c}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping=e}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator,i=this.hls,r=i.levels,n=i.config.minAutoBitrate;if(!(e===-1||t&&t.canEstimate()))return Math.min(e,this.maxAutoLevel);var o=this.nextABRAutoLevel;if(e!==-1&&(o=Math.min(e,o)),void 0!==n)for(var a=r[o].realBitrate?Math.max(r[o].realBitrate,r[o].bitrate):r[o].bitrate;a<n;)o++;return o},set:function(e){this._nextAutoLevel=e}},{key:"minAutoLevel",get:function(){for(var e=this.hls,t=e.levels,i=e.config.minAutoBitrate,r=t?t.length:0,n=0;n<r;n++){var o=t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate;if(o>i)return n}return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.hls.levels,i=this._autoLevelCapping;return e=i===-1&&t&&t.length?t.length-1:i}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=this.maxAutoLevel,i=e.levels,r=e.config,n=this.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=(h.default.bufferInfo(o,l,r.maxBufferHole).end-l)/c,f=this.findBestLevel(a,s,u,n,t,d,r.abrBandWidthFactor,r.abrBandWidthUpFactor,i);if(f>=0)return f;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,y=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;if(m){var b=s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay;p=b-m,v.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),y=g=1}}return f=this.findBestLevel(a,s,u,n,t,d+p,y,g,i),Math.max(f,0)}}]),t}(d.default);i.default=m},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){
function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),c=e(41),u=r(c),d=e(30),f=r(d),h=e(22),p=r(h),v=e(28),y=r(v),g=e(27),m=r(g),b=e(31),_=r(b),w=e(46),T=r(w),S=e(26),E=e(45),k={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},O=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,y.default.MEDIA_ATTACHED,y.default.MEDIA_DETACHING,y.default.AUDIO_TRACKS_UPDATED,y.default.AUDIO_TRACK_SWITCHING,y.default.AUDIO_TRACK_LOADED,y.default.KEY_LOADED,y.default.FRAG_LOADED,y.default.FRAG_PARSING_INIT_SEGMENT,y.default.FRAG_PARSING_DATA,y.default.FRAG_PARSED,y.default.ERROR,y.default.BUFFER_CREATED,y.default.BUFFER_APPENDED,y.default.BUFFER_FLUSHED,y.default.INIT_PTS_FOUND));return i.config=e.config,i.audioCodecSwap=!1,i.ticks=0,i._state=k.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i}return a(t,e),l(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=k.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,i=e.cc,r=e.initPTS;"main"===t&&(this.initPTS[i]=r,E.logger.log("InitPTS for cc:"+i+" found from video track:"+r),this.state===k.WAITING_INIT_PTS&&(E.logger.log("sending pending audio frag to demuxer"),this.state=k.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&e===-1?(E.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=k.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=k.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=k.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,i,r,n,o,a=this,l=this.hls,c=l.config,d=function(){switch(a.state){case k.ERROR:case k.PAUSED:case k.BUFFER_FLUSHING:break;case k.STARTING:a.state=k.WAITING_TRACK,a.loadedmetadata=!1;break;case k.IDLE:var s=a.tracks;if(!s)break;if(!a.media&&(a.startFragRequested||!c.startFragPrefetch))break;e=a.loadedmetadata?a.media.currentTime:a.nextLoadPosition;var d=a.mediaBuffer?a.mediaBuffer:a.media,h=f.default.bufferInfo(d,e,c.maxBufferHole),p=h.len,v=h.end,g=a.fragPrevious,m=c.maxMaxBufferLength,b=a.audioSwitch,_=a.trackId;if(p<m&&_<s.length){if(i=s[_].details,"undefined"==typeof i){a.state=k.WAITING_TRACK;break}if(!b&&!i.live&&g&&g.sn===i.endSN&&(!a.media.seeking||a.media.duration-v<g.duration/2)){a.hls.trigger(y.default.BUFFER_EOS,{type:"audio"}),a.state=k.ENDED;break}var w=i.fragments,T=w.length,O=w[0].start,R=w[T-1].start+w[T-1].duration,C=void 0;if(b)if(i.live&&!i.PTSKnown)E.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),v=0;else if(v=e,i.PTSKnown&&e<O){if(!(h.end>O||h.nextStart))return{v:void 0};E.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),a.media.currentTime=O+.05}if(v<=O){if(C=w[0],i.live&&C.loadIdx&&C.loadIdx===a.fragLoadIdx){var P=h.nextStart?h.nextStart:O;return E.logger.log("no alt audio available @currentTime:"+a.media.currentTime+", seeking @"+(P+.05)),a.media.currentTime=P+.05,{v:void 0}}}else!function(){var e=void 0,t=c.maxFragLookUpTolerance;v<R?(v>R-t&&(t=0),e=u.default.search(w,function(e){return e.start+e.duration-t<=v?1:e.start-t>v?-1:0}),e||E.logger.log("frag not found @bufferEnd/start:"+v+"/"+O)):e=w[T-1],e&&(C=e,O=e.start,g&&C.level===g.level&&C.sn===g.sn&&(C.sn<i.endSN?(C=w[C.sn+1-i.startSN],E.logger.log("SN just loaded, load next one: "+C.sn)):C=null))}();if(C)if(null!=C.decryptdata.uri&&null==C.decryptdata.key)E.logger.log("Loading key for "+C.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+_),a.state=k.KEY_LOADING,l.trigger(y.default.KEY_LOADING,{frag:C});else{if(E.logger.log("Loading "+C.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+_+", currentTime:"+e+",bufferEnd:"+v.toFixed(3)),void 0!==a.fragLoadIdx?a.fragLoadIdx++:a.fragLoadIdx=0,C.loadCounter){C.loadCounter++;var I=c.fragLoadingLoopThreshold;if(C.loadCounter>I&&Math.abs(a.fragLoadIdx-C.loadIdx)<I)return l.trigger(y.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:C}),{v:void 0}}else C.loadCounter=1;C.loadIdx=a.fragLoadIdx,a.fragCurrent=C,a.startFragRequested=!0,a.nextLoadPosition=C.start+C.duration,l.trigger(y.default.FRAG_LOADING,{frag:C}),a.state=k.FRAG_LOADING}}break;case k.WAITING_TRACK:t=a.tracks[a.trackId],t&&t.details&&(a.state=k.IDLE);break;case k.FRAG_LOADING_WAITING_RETRY:r=performance.now(),n=a.retryDate,d=a.media,o=d&&d.seeking,(!n||r>=n||o)&&(E.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),a.state=k.IDLE);break;case k.WAITING_INIT_PTS:case k.STOPPED:case k.FRAG_LOADING:case k.PARSING:case k.PARSED:case k.ENDED:}}();if("object"===("undefined"==typeof d?"undefined":s(d)))return d.v}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(E.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===k.ENDED&&(this.state=k.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){E.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=k.IDLE,this.fragCurrent=null,this.state=k.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=k.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,i=e.id,r=this.tracks[i],n=t.totalduration,o=0;if(E.logger.log("track "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live){var a=r.details;a&&t.fragments.length>0?(_.default.mergeDetails(a,t),o=t.fragments[0].start,t.PTSKnown?E.logger.log("live audio playlist sliding:"+o.toFixed(3)):E.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,E.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(this.startPosition===-1){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(E.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===k.WAITING_TRACK&&(this.state=k.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===k.KEY_LOADING&&(this.state=k.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent;if(this.state===k.FRAG_LOADING&&t&&"audio"===e.frag.type&&e.frag.level===t.level&&e.frag.sn===t.sn){this.state=k.PARSING,this.stats=e.stats;var i=this.tracks[this.trackId],r=i.details,n=r.totalduration,o=t.start,a=t.level,s=t.sn,l=t.cc,c=this.config.defaultAudioCodec||i.audioCodec;this.appended=!1,this.demuxer||(this.demuxer=new p.default(this.hls,"audio"));var u=this.initPTS[l];if(void 0!==u){this.pendingBuffering=!0,E.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a);var d=!1;this.demuxer.push(e.payload,c,null,o,l,a,s,n,t.decryptdata,d,u)}else E.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=e,this.state=k.WAITING_INIT_PTS}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===k.PARSING){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec="mp4a.40.2",r.id=e.id,this.hls.trigger(y.default.BUFFER_CODECS,i),E.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var n=r.initSegment;if(n){var o={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(y.default.BUFFER_APPENDING,o))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,i=this.fragCurrent;i&&"audio"===e.id&&"audio"===e.type&&e.sn===i.sn&&e.level===i.level&&this.state===k.PARSING&&!function(){var i=t.trackId,r=t.tracks[i],n=t.fragCurrent,o=t.hls;E.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),_.default.updateFragPTSDTS(r.details,n.sn,e.startPTS,e.endPTS);var a=t.audioSwitch,s=t.media,l=!1;if(a&&s)if(s.readyState){var c=s.currentTime;E.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(E.logger.log("switching audio track : flushing all audio"),t.state=k.BUFFER_FLUSHING,o.trigger(y.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,t.audioSwitch=!1,o.trigger(y.default.AUDIO_TRACK_SWITCHED,{id:i}))}else t.audioSwitch=!1,o.trigger(y.default.AUDIO_TRACK_SWITCHED,{id:i});var u=t.pendingData;t.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&u.push({type:e.type,data:t,parent:"audio",content:"data"})}),!l&&u.length&&(u.forEach(function(e){t.pendingBuffering=!0,t.hls.trigger(y.default.BUFFER_APPENDING,e)}),t.pendingData=[],t.appended=!0)),t.tick()}()}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===k.PARSING&&(this.stats.tparsed=performance.now(),this.state=k.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==k.PARSING&&t!==k.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==k.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,i=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),i.trigger(y.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;E.logger.log("audio buffered : "+T.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(y.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=k.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case S.ErrorDetails.FRAG_LOAD_ERROR:case S.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var r=this.config;if(i<=r.fragLoadingMaxRetry){this.fragLoadError=i,t.loadCounter=0;var n=Math.min(Math.pow(2,i-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);E.logger.warn("audioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.state=k.FRAG_LOADING_WAITING_RETRY}else E.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(y.default.ERROR,e),this.state=k.ERROR}break;case S.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case S.ErrorDetails.KEY_LOAD_ERROR:case S.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==k.ERROR&&(this.state=e.fatal?k.ERROR:k.IDLE,E.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(E.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(y.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=k.PARSED):(this.state=k.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,E.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(m.default);i.default=O},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],6:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(45),h=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.AUDIO_TRACK_LOADED));return i.ticks=0,i.ontick=i.tick.bind(i),i}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,i=e.audioTracks||[],r=!1;this.tracks=i,this.hls.trigger(c.default.AUDIO_TRACKS_UPDATED,{audioTracks:i});var n=0;i.forEach(function(e){return e.default?(t.audioTrack=n,void(r=!0)):void n++}),r===!1&&i.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(f.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("switching to audioTrack "+e);var t=this.tracks[e],i=this.hls,r=t.type,n=t.url,o={id:e,type:r,url:n};i.trigger(c.default.AUDIO_TRACK_SWITCH,o),i.trigger(c.default.AUDIO_TRACK_SWITCHING,o);var a=t.details;!n||void 0!==a&&a.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),i.trigger(c.default.AUDIO_TRACK_LOADING,{url:n,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("updating audioTrack "+e);var t=this.tracks[e],i=t.url,r=t.details;!i||void 0!==r&&r.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(c.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(d.default);i.default=h},{27:27,28:28,45:45}],7:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(45),h=e(26),p=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_RESET,c.default.BUFFER_APPENDING,c.default.BUFFER_CODECS,c.default.BUFFER_EOS,c.default.BUFFER_FLUSHING,c.default.LEVEL_PTS_UPDATED,c.default.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){var r=this.sourceBuffer.audio,n=Math.abs(r.timestampOffset-e.start);if(n>.1){var o=r.updating;try{r.abort()}catch(e){o=!0,f.logger.warn("can not abort audio buffer: "+e)}o?this.audioTimestampOffset=e.start:(f.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,i=e.video,r=0;e.altAudio&&(t||i)&&(r=(t?1:0)+(i?1:0),f.logger.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var i=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(i)}}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(c.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(c.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,i=this.segments.reduce(function(e,i){return i.parent===t?e+1:e},0);this.hls.trigger(c.default.BUFFER_APPENDED,{parent:t,pending:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){f.logger.error("sourceBuffer error:"+e),this.hls.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var i=e[t];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,i=this.mediaSource;for(var r in e)if(!t[r]){var n=e[r],o=n.levelCodec||n.codec,a=n.container+";codecs="+o;f.logger.log("creating sourceBuffer("+a+")");try{var s=t[r]=i.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:o,container:n.container},n.buffer=s}catch(e){f.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(c.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){f.logger.error("sourceBuffer error:",e.event),this.hls.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,i=e.type;for(var r in t)i&&r!==i||t[r].ended||(t[r].ended=!0,f.logger.log(r+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var i in e){var r=e[i];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){f.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,i=this.sourceBuffer,r=this._levelDuration;if(null!==r&&e&&t&&i&&0!==e.readyState&&"open"===t.readyState){for(var n in i)if(i[n].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var o=e.duration;(r>this._msDuration&&r>o||o===1/0||isNaN(o))&&(f.logger.log("Updating mediasource duration to "+r.toFixed(3)),this._msDuration=t.duration=r)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,i=this.sourceBuffer;try{for(var r in i)t+=i[r].buffered.length}catch(e){f.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(c.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,i=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var r=i.shift();try{var n=r.type,o=t[n];o?o.updating?i.unshift(r):(o.ended=!1,this.parent=r.parent,o.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){f.logger.error("error while trying to append buffer:"+t.message),i.unshift(r);var a={type:h.ErrorTypes.MEDIA_ERROR};if(22===t.code)return this.segments=[],a.details=h.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(c.default.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=h.ErrorDetails.BUFFER_APPEND_ERROR,a.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return f.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],a.fatal=!0,void e.trigger(c.default.ERROR,a);a.fatal=!1,e.trigger(c.default.ERROR,a)}}}}},{key:"flushBuffer",value:function(e,t,i){var r,n,o,a,s,l,c=this.sourceBuffer;if(Object.keys(c).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var u in c)if(!i||u===i){if(r=c[u],r.ended=!1,r.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;try{for(n=0;n<r.buffered.length;n++)if(o=r.buffered.start(n),a=r.buffered.end(n),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&t===Number.POSITIVE_INFINITY?(s=e,l=t):(s=Math.max(o,e),l=Math.min(a,t)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,f.logger.log("flush "+u+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),r.remove(s,l),!1}catch(e){f.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),t}(d.default);i.default=p},{26:26,27:27,28:28,45:45}],8:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=function(e){function t(e){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.FPS_DROP_LEVEL_CAPPING,c.default.MEDIA_ATTACHING,c.default.MANIFEST_PARSED))}return a(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var t=0,i=void 0,r=void 0,n=this.mediaWidth,o=this.mediaHeight,a=0,s=0;for(i=0;i<=e&&(r=this.levels[i],!this.isLevelRestricted(i))&&(t=i,a=r.width,s=r.height,!(n<=a||o<=s));i++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(d.default);i.default=f},{27:27,28:28}],9:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(44),s=r(a),l=function(){function e(t,i,r,o){n(this,e),this.hls=t,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(i),this.fast_=new s.default(r)}return o(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var i=8e3*t/e,r=e/1e3;this.fast_.sample(r,i),this.slow_.sample(r,i)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();i.default=l},{44:44}],10:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){
if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(45),h=function(e){function t(e){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHING))}return a(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var i=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,i){var r=performance.now();if(t){if(this.lastTime){var n=r-this.lastTime,o=i-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/n,l=this.hls;if(l.trigger(c.default.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:i}),s>0&&o>l.config.fpsDroppedMonitoringThreshold*a){var u=l.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=u)&&(u-=1,l.trigger(c.default.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(d.default);i.default=h},{27:27,28:28,45:45}],11:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(45),h=e(26),p=e(30),v=r(p),y=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MANIFEST_LOADED,c.default.LEVEL_LOADED,c.default.FRAG_LOADED,c.default.ERROR));return i.ontick=i.tick.bind(i),i._manualLevel=i._autoLevelCapping=-1,i}return a(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,i=[],r=[],n={},o=!1,a=!1,s=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),l&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(a=!0);var t=n[e.bitrate];void 0===t?(n[e.bitrate]=i.length,e.url=[e.url],e.urlId=0,i.push(e)):i[t].url.push(e.url)}),o&&a?i.forEach(function(e){e.videoCodec&&r.push(e)}):r=i,r=r.filter(function(e){var t=e.audioCodec,i=e.videoCodec;return(!t||u("audio",t))&&(!i||u("video",i))}),r.length){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,f.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}s.trigger(c.default.MANIFEST_PARSED,{levels:r,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:o,altAudio:e.audioTracks.length>0})}else s.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels;if(e>=0&&e<t.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(f.logger.log("switching to level "+e),this._level=e,this.hls.trigger(c.default.LEVEL_SWITCH,{level:e}));var i=t[e],r=i.details;if(!r||r.live===!0){var n=i.urlId;this.hls.trigger(c.default.LEVEL_LOADING,{url:i.url[n],level:e,id:n})}}else this.hls.trigger(c.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,i=this.hls,r=void 0,n=void 0,o=!1,a=i.abrController,s=a.minAutoLevel;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:r=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=e.context.level,o=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:r=e.level}if(void 0!==r){n=this._levels[r],n.loadError?n.loadError++:n.loadError=1;var l=n.url.length;if(l>1&&n.loadError<l)n.urlId=(n.urlId+1)%l,n.details=void 0,f.logger.warn("level controller,"+t+" for level "+r+": switching to redundant stream id "+n.urlId);else{var u=this._manualLevel===-1&&r;if(u)f.logger.warn("level controller,"+t+": switch-down for next fragment"),a.nextAutoLevel=Math.max(s,r-1);else if(n&&n.details&&n.details.live)f.logger.warn("level controller,"+t+" on live stream, discard"),o&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var d=i.media,p=d&&v.default.isBuffered(d,d.currentTime)&&v.default.isBuffered(d,d.currentTime+.5);if(p){var y=i.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+t+", but media buffered, retry in "+y+"ms"),this.timer=setTimeout(this.ontick,y)}else f.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0,i.trigger(c.default.ERROR,e)}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var i=this._levels[t.level];i&&(i.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var i=this._levels[t];i.loadError=0;var r=e.details;if(r.live){var n=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),o=i.details;o&&r.endSN===o.endSN&&(n/=2,f.logger.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),f.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e],i=t.urlId;this.hls.trigger(c.default.LEVEL_LOADING,{url:t.url[i],level:e,id:i})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),e!==-1&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){e!==-1&&(e=Math.max(e,this.hls.abrController.minAutoLevel)),this._startLevel=e}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&&(this.hls.abrController.nextAutoLevel=e)}}]),t}(d.default);i.default=y},{26:26,27:27,28:28,30:30,45:45}],12:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(41),c=r(l),u=e(30),d=r(u),f=e(22),h=r(f),p=e(28),v=r(p),y=e(27),g=r(y),m=e(31),b=r(m),_=e(46),w=r(_),T=e(26),S=e(45),E={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},k=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return i.config=e.config,i.audioCodecSwap=!1,i.ticks=0,i._state=E.STOPPED,i.ontick=i.tick.bind(i),i}return a(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=E.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=i.startLevel;r===-1&&(r=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&e===-1&&(S.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=E.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else S.logger.warn("cannot start loading as manifest not parsed yet"),this.state=E.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case E.ERROR:break;case E.BUFFER_FLUSHING:this.fragLoadError=0;break;case E.IDLE:if(!this._doTickIdle())return;break;case E.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=E.IDLE);break;case E.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),i=this.retryDate;(!i||t>=i||this.media&&this.media.seeking)&&(S.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=E.IDLE);break;case E.ERROR:case E.STOPPED:case E.FRAG_LOADING:case E.PARSING:case E.PARSED:case E.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,i=this.media;if(void 0!==this.levelLastLoaded&&!i&&(this.startFragRequested||!t.startFragPrefetch))return!0;var r=void 0;r=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var n=e.nextLoadLevel,o=this.levels[n],a=o.bitrate,s=void 0;s=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=d.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,r,t.maxBufferHole),c=l.len;if(c>=s)return!0;S.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=n;var u=o.details;if("undefined"==typeof u||u.live&&this.levelLastLoaded!==n)return this.state=E.WAITING_LEVEL,!0;var f=this.fragPrevious;if(!u.live&&f&&f.sn===u.endSN&&i.duration-Math.max(l.end,f.start)<=Math.max(.2,f.duration/2)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(v.default.BUFFER_EOS,h),this.state=E.ENDED,!0}return this._fetchPayloadOrEos(r,l,u)}},{key:"_fetchPayloadOrEos",value:function(e,t,i){var r=this.fragPrevious,n=this.level,o=i.fragments,a=o.length;if(0===a)return!1;var s=o[0].start,l=o[a-1].start+o[a-1].duration,c=t.end,u=void 0;if(i.live){var d=this.config.initialLiveManifestSize;if(a<d)return S.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d),!1;if(u=this._ensureFragmentAtLivePoint(i,c,s,l,r,o,a),null===u)return!1}else c<s&&(u=o[0]);return u||(u=this._findFragment(s,r,a,o,c,l,i)),!u||this._loadFragmentOrKey(u,n,i,e,c)}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,i,r,n,o,a){var s=this.hls.config,l=this.media,c=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(i-s.maxFragLookUpTolerance,r-u)){var d=this.liveSyncPosition=this.computeLivePosition(i,e);S.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d)}if(e.PTSKnown&&t>r&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(n){var f=n.sn+1;f>=e.startSN&&f<=e.endSN&&(c=o[f-e.startSN],S.logger.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=o[Math.min(a-1,Math.round(a/2))],S.logger.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c}},{key:"_findFragment",value:function(e,t,i,r,n,o,a){var s=this.hls.config,l=void 0,u=void 0,d=s.maxFragLookUpTolerance;if(n<o?(n>o-d&&(d=0),u=c.default.search(r,function(e){return e.start+e.duration-d<=n?1:e.start-d>n&&e.start?-1:0})):u=r[i-1],u&&(l=u,e=u.start,t&&l.level===t.level&&l.sn===t.sn))if(l.sn<a.endSN){var f=t.deltaPTS,h=l.sn-a.startSN;f&&f>s.maxBufferHole&&t.dropped&&h?(l=r[h-1],S.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=r[h+1],S.logger.log("SN just loaded, load next one: "+l.sn))}else l=null;return l}},{key:"_loadFragmentOrKey",value:function(e,t,i,r,n){var o=this.hls,a=o.config;if(null==e.decryptdata.uri||null!=e.decryptdata.key){if(S.logger.log("Loading "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+n.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=a.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return o.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,this.nextLoadPosition=e.start+e.duration,e.autoLevel=o.autoLevelEnabled,e.bitrateTest=this.bitrateTest,o.trigger(v.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(o,"main")),this.state=E.FRAG_LOADING,!0}S.logger.log("Loading key for "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t),this.state=E.KEY_LOADING,o.trigger(v.default.KEY_LOADING,{frag:e})}},{key:"getBufferRange",value:function(e){return c.default.search(this.bufferRange,function(t){return e<t.start?-1:e>t.end?1:0})}},{key:"followingBufferRange",value:function(e){return e?this.getBufferRange(e.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,i=this.media;if(i&&i.readyState&&i.seeking===!1&&(t=i.currentTime,t>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),d.default.isBuffered(i,t)?e=this.getBufferRange(t):d.default.isBuffered(i,t+.1)&&(e=this.getBufferRange(t+.1)),e)){var r=e.frag;r!==this.fragPlaying&&(this.fragPlaying=r,this.hls.trigger(v.default.FRAG_CHANGED,{frag:r}))}}},{key:"immediateLevelSwitch",value:function(){if(S.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,d.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,i=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,i=this.getBufferRange(e.currentTime),i&&i.start>1&&this.flushMainBuffer(0,i.start-1),e.paused)t=0;else{var n=this.hls.nextLoadLevel,o=this.levels[n],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if(r=this.getBufferRange(e.currentTime+t),r&&(r=this.followingBufferRange(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.start,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=E.BUFFER_FLUSHING;var i={startOffset:e,endOffset:t};this.altAudio&&(i.type="video"),this.hls.trigger(v.default.BUFFER_FLUSHING,i)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,i=this.config;if(S.logger.log("media seeking to "+t.toFixed(3)),this.state===E.FRAG_LOADING){var r=this.mediaBuffer?this.mediaBuffer:e,n=d.default.bufferInfo(r,t,this.config.maxBufferHole),o=this.fragCurrent;if(0===n.len&&o){var a=i.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;t<s||t>l?(o.loader&&(S.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=E.IDLE):S.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===E.ENDED&&(this.state=E.IDLE);e&&(this.lastCurrentTime=t),this.state!==E.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){S.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){S.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){S.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,i=!1,r=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(t.indexOf("mp4a.40.2")!==-1&&(i=!0),t.indexOf("mp4a.40.5")!==-1&&(r=!0))}),this.audioCodecSwitch=i&&r,this.audioCodecSwitch&&S.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var n=this.config;n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,i=e.level,r=this.levels[i],n=t.totalduration,o=0;if(S.logger.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),this.levelLastLoaded=i,t.live){var a=r.details;a&&t.fragments.length>0?(b.default.mergeDetails(a,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),t.PTSKnown?S.logger.log("live playlist sliding:"+o.toFixed(3)):S.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,S.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,this.hls.trigger(v.default.LEVEL_UPDATED,{details:t,level:i}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(o,t),S.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(S.logger.log("negative start time offset "+s+", count from end of last fragment"),s=o+n+s),S.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===E.WAITING_LEVEL&&(this.state=E.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===E.KEY_LOADING&&(this.state=E.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,i=e.frag;if(this.state===E.FRAG_LOADING&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){var r=e.stats,n=this.levels[t.level],o=n.details;if(S.logger.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,i.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=E.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=E.PARSING,this.stats=r;var a=o.totalduration,s=isNaN(t.startDTS)?t.start:t.startDTS,l=t.level,c=t.sn,u=this.config.defaultAudioCodec||n.audioCodec;this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=u.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,S.logger.log("Parsing "+c+" of ["+o.startSN+" ,"+o.endSN+"],level "+l+", cc "+t.cc);var d=this.demuxer;d||(d=this.demuxer=new h.default(this.hls,"main"));var f=this.media,p=f&&f.seeking,y=!p&&(o.PTSKnown||!o.live);d.push(e.payload,u,n.videoCodec,s,t.cc,l,c,a,t.decryptdata,y,null)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===E.PARSING){var i,r,n=e.tracks;if(n.audio&&this.altAudio&&delete n.audio,r=n.audio){var o=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),o=o.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&a.indexOf("firefox")===-1&&(o="mp4a.40.5"),a.indexOf("android")!==-1&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",S.logger.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=e.id}if(r=n.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),e.unique){var s={codec:"",levelCodec:""};for(i in e.tracks)r=n[i],s.container=r.container,s.codec&&(s.codec+=",",s.levelCodec+=","),r.codec&&(s.codec+=r.codec),r.levelCodec&&(s.levelCodec+=r.levelCodec);n={audiovideo:s}}this.hls.trigger(v.default.BUFFER_CODECS,n);for(i in n){r=n[i],S.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,i=this.fragCurrent;if(i&&"main"===e.id&&e.sn===i.sn&&e.level===i.level&&("audio"!==e.type||!this.altAudio)&&this.state===E.PARSING){var r=this.levels[this.level],n=this.fragCurrent;S.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0));var o=b.default.updateFragPTSDTS(r.details,n.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),a=this.hls;a.trigger(v.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),"video"===e.type&&(n.dropped=e.dropped),[e.data1,e.data2].forEach(function(i){i&&(t.appended=!0,t.pendingBuffering=!0,a.trigger(v.default.BUFFER_APPENDING,{type:e.type,data:i,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===E.PARSING&&(this.stats.tparsed=performance.now(),this.state=E.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,i=e.id;if(!t){if(this.mediaBuffer!==this.media){S.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(S.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.IDLE}var n=this.hls;n.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,i=!!this.hls.audioTracks[t].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(S.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,i=void 0,r=void 0,n=!1;for(var o in t){var a=t[o];"main"===a.id?(r=o,i=a,"video"===o&&(this.videoBuffer=t[o].buffer)):n=!0}n&&i?(S.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==E.PARSING&&t!==E.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){var e=this;if(!(this.state!==E.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;t&&!function(){var i=e.mediaBuffer?e.mediaBuffer:e.media;S.logger.log("main buffered : "+w.default.toString(i.buffered));var r=e.bufferRange.filter(function(e){return d.default.isBuffered(i,(e.start+e.end)/2)});r.push({type:t.type,start:t.startPTS,end:t.endPTS,frag:t}),e.bufferRange=r.sort(function(e,t){return e.start-t.start}),e.fragPrevious=t;var n=e.stats;n.tbuffered=performance.now(),e.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),e.hls.trigger(v.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),e.state=E.IDLE}(),this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i=this.media,r=i&&d.default.isBuffered(i,i.currentTime)&&d.default.isBuffered(i,i.currentTime+.5);switch(e.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var o=this.config;if(n<=o.fragLoadingMaxRetry||r||t.autoLevel&&t.level){this.fragLoadError=n,t.loadCounter=0;var a=Math.min(Math.pow(2,n-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);S.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=E.FRAG_LOADING_WAITING_RETRY}else S.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(v.default.ERROR,e),this.state=E.ERROR}break;case T.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=E.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.hls.trigger(v.default.ERROR,e),this.state=E.ERROR));break;case T.ErrorDetails.LEVEL_LOAD_ERROR:case T.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==E.ERROR&&(e.fatal?(this.state=E.ERROR,S.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===E.WAITING_LEVEL&&(this.state=E.IDLE));break;case T.ErrorDetails.BUFFER_FULL_ERROR:this.state!==E.PARSING&&this.state!==E.PARSED||(r?(this._reduceMaxBufferLength(t.duration),this.state=E.IDLE):(S.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,S.logger.warn("reduce max buffer length to "+t.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,r=i.buffered;if(this.loadedmetadata||!r.length||e.seeking)if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var n=d.default.bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),a=.5,s=t!==this.lastCurrentTime,l=this.config;if(s)this.stallReported&&(S.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var c=performance.now(),u=this.hls;if(this.stalled){var f=c-this.stalled,h=n.len,p=this.nudgeRetry||0;if(h<=a&&f>1e3*l.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in low buffer @"+t),
u.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:h}));var y=n.nextStart,g=y-t;if(y&&g<l.maxSeekHole&&g>0){this.nudgeRetry=++p;var m=p*l.nudgeOffset;S.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+m),e.currentTime=y+m,this.stalled=void 0,u.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+m-t})}}else if(h>a&&f>1e3*l.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in high buffer @"+t),u.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:h})),this.stalled=void 0,this.nudgeRetry=++p,p<l.nudgeMaxRetry){var b=e.currentTime,_=b+p*l.nudgeOffset;S.logger.log("adjust currentTime from "+b+" to "+_),e.currentTime=_,u.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else S.logger.error("still stuck in high buffer @"+t+" after "+l.nudgeMaxRetry+", raise fatal error"),u.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=c,this.stallReported=!1}}else{this.loadedmetadata=!0;var w=this.startPosition,E=d.default.isBuffered(i,w);t===w&&E||(S.logger.log("target start position:"+w),E||(w=r.start(0),S.logger.log("target start position not buffered, seek to buffered.start(0) "+w)),S.logger.log("adjust currentTime from "+t+" to "+w),e.currentTime=w)}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=E.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferRange=this.bufferRange.filter(function(t){return d.default.isBuffered(e,(t.start+t.end)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=E.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,S.logger.log("main stream:"+t+"->"+e),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferRange(e.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){var e=this.media;return e?this.followingBufferRange(this.getBufferRange(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferRange;return e?e.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(g.default);i.default=k},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],13:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(42),h=r(f),p=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.MANIFEST_LOADING,c.default.FRAG_LOADED,c.default.LEVEL_SWITCH));if(i.hls=e,i.config=e.config,i.enabled=!0,i.Cues=e.config.cueHandler,i.config.enableCEA708Captions){var r=i,a=function(e,t){var i=null;try{i=new window.Event("addtrack")}catch(e){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)},s={newCue:function(e,t,i){if(!r.textTrack1){var n=r.getExistingTrack("1");n?(r.textTrack1=n,r.clearCurrentCues(r.textTrack1),a(r.textTrack1,r.media)):(r.textTrack1=r.createTextTrack("captions","English","en"),r.textTrack1.textTrack1=!0)}r.Cues.newCue(r.textTrack1,e,t,i)}},l={newCue:function(e,t,i){if(!r.textTrack2){var n=r.getExistingTrack("2");n?(r.textTrack2=n,r.clearCurrentCues(r.textTrack2),a(r.textTrack2,r.media)):(r.textTrack2=r.createTextTrack("captions","Spanish","es"),r.textTrack2.textTrack2=!0)}r.Cues.newCue(r.textTrack2,e,t,i)}};i.cea608Parser=new h.default(0,s,l)}return i}return a(t,e),s(t,[{key:"clearCurrentCues",value:function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var r=t.textTracks[i],n="textTrack"+e;if(r[n]===!0)return r}return null}},{key:"createTextTrack",value:function(e,t,i){if(this.media)return this.media.addTextTrack(e,t,i)}},{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(e){if("main"===e.frag.type){var t=e.frag.start;t<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=t}}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var i=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,i)}}},{key:"extractCea608Data",value:function(e){for(var t,i,r,n,o,a=31&e[0],s=2,l=[],c=0;c<a;c++)t=e[s++],i=127&e[s++],r=127&e[s++],n=0!==(4&t),o=3&t,0===i&&0===r||n&&0===o&&(l.push(i),l.push(r));return l}}]),t}(d.default);i.default=p},{27:27,28:28,42:42}],14:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(t,i){r(this,e),this.subtle=t,this.aesIV=i}return n(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();i.default=o},{}],15:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return n(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),i=new Uint32Array(4),r=0;r<i.length;r++)i[r]=t.getUint32(4*r);return i}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,i=this.subMix[0],r=this.subMix[1],n=this.subMix[2],o=this.subMix[3],a=this.invSubMix[0],s=this.invSubMix[1],l=this.invSubMix[2],c=this.invSubMix[3],u=new Uint32Array(256),d=0,f=0,h=0;for(h=0;h<256;h++)h<128?u[h]=h<<1:u[h]=h<<1^283;for(h=0;h<256;h++){var p=f^f<<1^f<<2^f<<3^f<<4;p=p>>>8^255&p^99,e[d]=p,t[p]=d;var v=u[d],y=u[v],g=u[y],m=257*u[p]^16843008*p;i[d]=m<<24|m>>>8,r[d]=m<<16|m>>>16,n[d]=m<<8|m>>>24,o[d]=m,m=16843009*g^65537*y^257*v^16843008*d,a[p]=m<<24|m>>>8,s[p]=m<<16|m>>>16,l[p]=m<<8|m>>>24,c[p]=m,d?(d=v^u[u[u[g^v]]],f^=u[u[f]]):d=f=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,r=0;r<t.length&&i;)i=t[r]===this.key[r],r++;if(!i){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var o=this.ksRows=4*(n+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(this.ksRows),c=this.invKeySchedule=new Uint32Array(this.ksRows),u=this.sBox,d=this.rcon,f=this.invSubMix[0],h=this.invSubMix[1],p=this.invSubMix[2],v=this.invSubMix[3],y=void 0,g=void 0;for(a=0;a<o;a++)a<n?y=l[a]=t[a]:(g=y,a%n===0?(g=g<<8|g>>>24,g=u[g>>>24]<<24|u[g>>>16&255]<<16|u[g>>>8&255]<<8|u[255&g],g^=d[a/n|0]<<24):n>6&&a%n===4&&(g=u[g>>>24]<<24|u[g>>>16&255]<<16|u[g>>>8&255]<<8|u[255&g]),l[a]=y=(l[a-n]^g)>>>0);for(s=0;s<o;s++)a=o-s,g=3&s?l[a]:l[a-4],s<4||a<=4?c[s]=g:c[s]=f[u[g>>>24]]^h[u[g>>>16&255]]^p[u[g>>>8&255]]^v[u[255&g]],c[s]=c[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,i){for(var r,n,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix[0],c=this.invSubMix[1],u=this.invSubMix[2],d=this.invSubMix[3],f=this.uint8ArrayToUint32Array_(i),h=f[0],p=f[1],v=f[2],y=f[3],g=new Int32Array(e),m=new Int32Array(g.length),b=void 0,_=void 0,w=void 0,T=void 0,S=void 0,E=void 0,k=void 0,O=void 0,R=void 0,C=void 0,P=void 0,I=void 0;t<g.length;){for(R=this.networkToHostOrderSwap(g[t]),C=this.networkToHostOrderSwap(g[t+1]),P=this.networkToHostOrderSwap(g[t+2]),I=this.networkToHostOrderSwap(g[t+3]),S=R^a[0],E=I^a[1],k=P^a[2],O=C^a[3],r=4,n=1;n<o;n++)b=l[S>>>24]^c[E>>16&255]^u[k>>8&255]^d[255&O]^a[r],_=l[E>>>24]^c[k>>16&255]^u[O>>8&255]^d[255&S]^a[r+1],w=l[k>>>24]^c[O>>16&255]^u[S>>8&255]^d[255&E]^a[r+2],T=l[O>>>24]^c[S>>16&255]^u[E>>8&255]^d[255&k]^a[r+3],S=b,E=_,k=w,O=T,r+=4;b=s[S>>>24]<<24^s[E>>16&255]<<16^s[k>>8&255]<<8^s[255&O]^a[r],_=s[E>>>24]<<24^s[k>>16&255]<<16^s[O>>8&255]<<8^s[255&S]^a[r+1],w=s[k>>>24]<<24^s[O>>16&255]<<16^s[S>>8&255]<<8^s[255&E]^a[r+2],T=s[O>>>24]<<24^s[S>>16&255]<<16^s[E>>8&255]<<8^s[255&k]^a[r+3],r+=3,m[t]=this.networkToHostOrderSwap(b^h),m[t+1]=this.networkToHostOrderSwap(T^p),m[t+2]=this.networkToHostOrderSwap(w^v),m[t+3]=this.networkToHostOrderSwap(_^y),h=R,p=C,v=P,y=I,t+=4}return m.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();i.default=o},{}],16:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(14),s=r(a),l=e(17),c=r(l),u=e(15),d=r(u),f=e(26),h=e(45),p=function(){function e(t,i){n(this,e),this.observer=t,this.config=i;try{var r=crypto?crypto:self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return o(e,[{key:"decrypt",value:function(e,t,i,r){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){h.logger.log("JS AES decrypt");var o=this.decryptor;o||(this.decryptor=o=new d.default),o.expandKey(t),r(o.decrypt(e,0,i))}else!function(){h.logger.log("WebCrypto AES decrypt");var o=n.subtle;n.key!==t&&(n.key=t,n.fastAesKey=new c.default(o,t)),n.fastAesKey.expandKey().then(function(t){var n=new s.default(o,i);n.decrypt(e,t).then(function(e){r(e)})}).catch(function(o){n.onWebCryptoError(o,e,t,i,r)})}()}},{key:"onWebCryptoError",value:function(e,t,i,r,n){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(t,i,r,n)):(h.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();i.default=p},{14:14,15:15,17:17,26:26,45:45}],17:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(t,i){r(this,e),this.subtle=t,this.key=i}return n(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();i.default=o},{}],18:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(19),s=r(a),l=e(45),c=e(24),u=r(c),d=function(){function e(t,i,r,o,a){n(this,e),this.observer=t,this.id=i,this.remuxerClass=r,this.config=o,this.remuxer=new this.remuxerClass(t,i,o,a),this.insertDiscontinuity()}return o(e,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(e,t,i,r,n,o,a,c,d,f){var h,p,v,y,g,m,b,_,w,T,S=new u.default(e),E=90*S.timeStamp,k=!1;for(n!==this.lastCC?(l.logger.log(this.id+" discontinuity detected"),this.lastCC=n,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):o!==this.lastLevel?(l.logger.log("audio track switch detected"),this.lastLevel=o,this.remuxer.switchLevel(),this.insertDiscontinuity()):a===this.lastSN+1&&(k=!0),h=this._aacTrack,this.lastSN=a,this.lastLevel=o,m=S.length,w=e.length;m<w-1&&(255!==e[m]||240!==(240&e[m+1]));m++);for(h.audiosamplerate||(p=s.default.getAudioConfig(this.observer,e,m,t),h.config=p.config,h.audiosamplerate=p.samplerate,h.channelCount=p.channelCount,h.codec=p.codec,h.manifestCodec=p.manifestCodec,h.duration=c,l.logger.log("parsed codec:"+h.codec+",rate:"+p.samplerate+",nb channel:"+p.channelCount)),g=0,y=9216e4/h.audiosamplerate;m+5<w&&(b=1&e[m+1]?7:9,v=(3&e[m+3])<<11|e[m+4]<<3|(224&e[m+5])>>>5,v-=b,v>0&&m+b+v<=w);)for(_=E+g*y,T={unit:e.subarray(m+b,m+b+v),pts:_,dts:_},h.samples.push(T),h.len+=v,m+=v+b,g++;m<w-1&&(255!==e[m]||240!==(240&e[m+1]));m++);this.remuxer.remux(o,a,n,h,{samples:[]},{samples:[{pts:E,dts:E,unit:S.payload}]},{samples:[]},r,k,d,f)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,i,r=new u.default(e);if(r.hasTimeStamp)for(t=r.length,i=e.length;t<i-1;t++)if(255===e[t]&&240===(240&e[t+1]))return!0;return!1}}]),e}();i.default=d},{19:19,24:24,45:45}],19:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e(45),a=e(26),s=function(){function e(){r(this,e)}return n(e,null,[{key:"getAudioConfig",value:function(e,t,i,r){var n,s,l,c,u,d=navigator.userAgent.toLowerCase(),f=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return n=((192&t[i+2])>>>6)+1,s=(60&t[i+2])>>>2,s>h.length-1?void e.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(c=(1&t[i+2])<<2,c|=(192&t[i+3])>>>6,o.logger.log("manifest codec:"+r+",ADTS data:type:"+n+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+c),/firefox/i.test(d)?s>=6?(n=5,u=new Array(4),l=s-3):(n=2,u=new Array(2),l=s):d.indexOf("android")!==-1?(n=2,u=new Array(2),l=s):(n=5,u=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&s>=6?l=s-3:((r&&r.indexOf("mp4a.40.2")!==-1&&s>=6&&1===c||!r&&1===c)&&(n=2,u=new Array(2)),l=s)),u[0]=n<<3,u[0]|=(14&s)>>1,u[1]|=(1&s)<<7,u[1]|=c<<3,5===n&&(u[1]|=(14&l)>>1,u[2]=(1&l)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[s],channelCount:c,codec:"mp4a.40."+n,manifestCodec:f})}}]),e}();i.default=s},{26:26,45:45}],20:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(28),s=r(a),l=e(26),c=e(16),u=r(c),d=e(18),f=r(d),h=e(25),p=r(h),v=e(38),y=r(v),g=e(39),m=r(g),b=function(){function e(t,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n(this,e),this.hls=t,this.id=i,this.config=this.hls.config||o,this.typeSupported=r}return o(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,i,r,n,o,a,l,c,d,f){if(e.byteLength>0&&null!=c&&null!=c.key&&"AES-128"===c.method){null==this.decrypter&&(this.decrypter=new u.default(this.hls,this.config));var h,p=this;try{h=performance.now()}catch(e){h=Date.now()}this.decrypter.decrypt(e,c.key.buffer,c.iv.buffer,function(e){var c;try{c=performance.now()}catch(e){c=Date.now()}p.hls.trigger(s.default.FRAG_DECRYPTED,{level:o,sn:a,stats:{tstart:h,tdecrypt:c}}),p.pushDecrypted(new Uint8Array(e),t,i,r,n,o,a,l,d,f)})}else this.pushDecrypted(new Uint8Array(e),t,i,r,n,o,a,l,d,f)}},{key:"pushDecrypted",value:function(e,t,i,r,n,o,a,c,u,d){var h=this.demuxer;if(!h||n!==this.cc&&!h.probe(e)){var v=this.hls,g=this.id,b=this.config,_=this.typeSupported;if(p.default.probe(e))h=this.typeSupported.mp2t===!0?new p.default(v,g,m.default,b,_):new p.default(v,g,y.default,b,_),h.probe=p.default.probe;else{if(!f.default.probe(e))return void v.trigger(s.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,id:g,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h=new f.default(v,g,y.default,b,_),h.probe=f.default.probe}this.demuxer=h}h.push(e,t,i,r,n,o,a,c,u,d),this.cc=n}}]),e}();i.default=b},{16:16,18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var n=e(20),o=r(n),a=e(28),s=r(a),l=e(45),c=e(1),u=r(c),d=function(e){var t=new u.default;t.trigger=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var i=function(t,i){e.postMessage({event:t,data:i})};e.addEventListener("message",function(r){var n=r.data;switch(n.cmd){case"init":var a=JSON.parse(n.config);e.demuxer=new o.default(t,n.id,n.typeSupported,a);try{(0,l.enableLogs)(a.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":e.demuxer.push(n.data,n.audioCodec,n.videoCodec,n.timeOffset,n.cc,n.level,n.sn,n.duration,n.decryptdata,n.accurateTimeOffset,n.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,i),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,i),t.on(s.default.FRAG_PARSED,i),t.on(s.default.ERROR,i),t.on(s.default.FRAG_PARSING_METADATA,i),t.on(s.default.FRAG_PARSING_USERDATA,i),t.on(s.default.INIT_PTS_FOUND,i),t.on(s.default.FRAG_PARSING_DATA,function(t,i){var r=i.data1.buffer,n=i.data2.buffer;delete i.data1,delete i.data2,e.postMessage({event:t,data:i,data1:r,data2:n},[r,n])})};i.default=d},{1:1,20:20,28:28,45:45}],22:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(28),s=r(a),l=e(20),c=r(l),u=e(21),d=r(u),f=e(45),h=e(26),p=function(){function t(i,r){n(this,t),this.hls=i,this.id=r;var o={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:i.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(i.config.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var a=void 0;try{var l=e(3);a=this.w=l(d.default),this.onwmsg=this.onWorkerMessage.bind(this),a.addEventListener("message",this.onwmsg),a.onerror=function(e){i.trigger(s.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},a.postMessage({cmd:"init",typeSupported:o,id:r,config:JSON.stringify(i.config)})}catch(e){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),a&&URL.revokeObjectURL(a.objectURL),this.demuxer=new c.default(i,r,o),this.w=void 0}}else this.demuxer=new c.default(i,r,o);this.demuxInitialized=!0}return o(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}}},{key:"push",value:function(e,t,i,r,n,o,a,s,l,c,u){var d=this.w;if(d)d.postMessage({cmd:"demux",data:e,audioCodec:t,videoCodec:i,timeOffset:r,cc:n,level:o,sn:a,duration:s,decryptdata:l,accurateTimeOffset:c,defaultInitPTS:u},[e]);else{var f=this.demuxer;f&&f.push(e,t,i,r,n,o,a,s,l,c,u)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,i=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data.data2=new Uint8Array(t.data2);default:i.trigger(t.event,t.data)}}}]),t}();i.default=p},{20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e(45),a=function(){function e(t){r(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return n(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");r.set(e.subarray(i,i+n)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return e>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,i,r=8,n=8;for(t=0;t<e;t++)0!==n&&(i=this.readEG(),n=(r+i+256)%256),r=0===n?r:n}},{key:"readSPS",value:function(){var e,t,i,r,n,o,a,s,l,c=0,u=0,d=0,f=0,h=this.readUByte.bind(this),p=this.readBits.bind(this),v=this.readUEG.bind(this),y=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),b=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);if(h(),e=h(),t=p(5),g(3),i=h(),b(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var w=v();if(3===w&&g(1),b(),b(),g(1),y())for(s=3!==w?8:12,l=0;l<s;l++)y()&&_(l<6?16:64)}b();var T=v();if(0===T)v();else if(1===T)for(g(1),m(),m(),r=v(),l=0;l<r;l++)m();b(),g(1),n=v(),o=v(),a=p(1),0===a&&g(1),g(1),y()&&(c=v(),u=v(),d=v(),f=v());var S=[1,1];if(y()&&y()){var E=h();switch(E){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(n+1)-2*c-2*u),height:(2-a)*(o+1)*16-(a?2:4)*(d+f),pixelRatio:S}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();i.default=a},{45:45}],24:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e(45),a=function(){function e(t){r(this,e),this._hasTimeStamp=!1;for(var i,n,a,s,l,c,u,d,f=0;;)if(u=this.readUTF(t,f,3),f+=3,"ID3"===u)f+=3,i=127&t[f++],n=127&t[f++],a=127&t[f++],s=127&t[f++],l=(i<<21)+(n<<14)+(a<<7)+s,c=f+l,this._parseID3Frames(t,f,c),f=c;else{if("3DI"!==u)return f-=3,d=f,void(d&&(this.hasTimeStamp||o.logger.warn("ID3 tag found, but no timestamp"),this._length=d,this._payload=t.subarray(0,d)));f+=7,o.logger.log("3DI footer found, end: "+f)}}return n(e,[{key:"readUTF",value:function(e,t,i){var r="",n=t,o=t+i;do r+=String.fromCharCode(e[n++]);while(n<o);return r}},{key:"_parseID3Frames",value:function(e,t,i){for(var r,n,a,s,l;t+8<=i;)switch(r=this.readUTF(e,t,4),t+=4,n=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],s=e[t++]<<8+e[t++],a=t,r){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var c=1&e[t++];this._hasTimeStamp=!0,l=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,c&&(l+=47721858.84),l=Math.round(l),o.logger.trace("ID3 timestamp found: "+l),this._timeStamp=l}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();i.default=a},{45:45}],25:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(19),s=r(a),l=e(28),c=r(l),u=e(23),d=r(u),f=e(45),h=e(26),p=function(){function e(t,i,r,o,a){n(this,e),this.observer=t,this.id=i,this.remuxerClass=r,this.config=o,this.typeSupported=a,this.lastCC=0,this.remuxer=new this.remuxerClass(t,i,o,a)}return o(e,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(e,t,i,r,n,o,a,s,l,u){var d,p,v,y,g,m,b=e.length,_=this.remuxer.passthrough,w=!1;this.audioCodec=t,this.videoCodec=i,this._duration=s,this.contiguous=!1,this.accurateTimeOffset=l,n!==this.lastCC&&(f.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=n),o!==this.lastLevel?(f.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=o):a===this.lastSN+1&&(this.contiguous=!0),this.lastSN=a;var T=this.pmtParsed,S=this._avcTrack,E=this._audioTrack,k=this._id3Track,O=S.id,R=E.id,C=k.id,P=this._pmtId,I=S.pesData,A=E.pesData,x=k.pesData,j=this._parsePAT,L=this._parsePMT,M=this._parsePES,D=this._parseAVCPES.bind(this),F=this._parseAACPES.bind(this),N=this._parseMPEGPES.bind(this),U=this._parseID3PES.bind(this);for(b-=b%188,d=0;d<b;d+=188)if(71===e[d]){if(p=!!(64&e[d+1]),v=((31&e[d+1])<<8)+e[d+2],y=(48&e[d+3])>>4,y>1){if(g=d+5+e[d+4],g===d+188)continue}else g=d+4;switch(v){case O:if(p){if(I&&(m=M(I))&&(D(m,!1),_&&S.codec&&(R===-1||E.codec)))return void this.remux(o,a,n,e,r);I={data:[],size:0}}I&&(I.data.push(e.subarray(g,d+188)),I.size+=d+188-g);break;case R:if(p){if(A&&(m=M(A))&&(E.isAAC?F(m):N(m),_&&E.codec&&(O===-1||S.codec)))return void this.remux(o,a,n,e,r);A={data:[],size:0}}A&&(A.data.push(e.subarray(g,d+188)),A.size+=d+188-g);break;case C:p&&(x&&(m=M(x))&&U(m),x={data:[],size:0}),x&&(x.data.push(e.subarray(g,d+188)),x.size+=d+188-g);break;case 0:p&&(g+=e[g]+1),P=this._pmtId=j(e,g);break;
case P:p&&(g+=e[g]+1);var B=L(e,g,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0);O=B.avc,O>0&&(S.id=O),R=B.audio,R>0&&(E.id=R,E.isAAC=B.isAAC),C=B.id3,C>0&&(k.id=C),w&&!T&&(f.logger.log("reparse from beginning"),w=!1,d=-188),T=this.pmtParsed=!0;break;case 17:case 8191:break;default:w=!0}}else this.observer.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});I&&(m=M(I))?(D(m,!0),S.pesData=null):S.pesData=I,A&&(m=M(A))?(E.isAAC?F(m):N(m),E.pesData=null):(A&&A.size&&f.logger.log("last AAC PES packet truncated,might overlap between fragments"),E.pesData=A),x&&(m=M(x))?(U(m),k.pesData=null):k.pesData=x,this.remux(o,a,n,null,r,u)}},{key:"remux",value:function(e,t,i,r,n,o){for(var a=this._avcTrack,s=a.samples,l=0,c=0,u=0;u<s.length;u++){for(var d=s[u],f=d.units.units,h=f.length,p=0,v=0;v<h;v++)p+=f[v].data.length;c+=p,l+=h,d.length=p}a.len=c,a.nbNalu=l,this.remuxer.remux(e,t,i,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,n,this.contiguous,this.accurateTimeOffset,o,r)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,i){var r,n,o,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&e[t+1])<<8|e[t+2],n=t+3+r-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<n;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 15:s.audio===-1&&(s.audio=a);break;case 21:s.id3===-1&&(s.id3=a);break;case 27:s.avc===-1&&(s.avc=a);break;case 3:case 4:i?s.audio===-1&&(s.audio=a,s.isAAC=!1):f.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:f.logger.warn("HEVC stream type found, not supported for now");break;default:f.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return s}},{key:"_parsePES",value:function(e){var t,i,r,n,o,a,s,l,c,u=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(t=d[0],r=(t[0]<<16)+(t[1]<<8)+t[2],1===r){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;i=t[7],192&i&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,s>4294967295&&(s-=8589934592),64&i?(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,l>4294967295&&(l-=8589934592),s-l>54e5&&(f.logger.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),o=t[8],c=o+9,e.size-=c,a=new Uint8Array(e.size);for(var p=0,v=d.length;p<v;p++){t=d[p];var y=t.byteLength;if(c){if(c>y){c-=y;continue}t=t.subarray(c),y-=c,c=0}a.set(t,u),u+=y}return n&&(n-=o+3),{data:a,pts:s,dts:l,len:n}}return null}},{key:"pushAccesUnit",value:function(e,t){e.units.units.length&&e.frame&&(!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(t.samples.length||this.contiguous)?t.samples.push(e):t.dropped++),e.debug.length&&f.logger.log(e.pts+"/"+e.dts+":"+e.debug+","+e.units.length)}},{key:"_parseAVCPES",value:function(e,t){var i,r,n,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),l=!1,c=this.avcSample;e.data=null,s.forEach(function(t){switch(t.type){case 1:r=!0,l&&c&&(c.debug+="NDR "),c.frame=!0;var s=t.data;if(s.length>4){var u=new d.default(s).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(c.key=!0)}break;case 5:r=!0,c||(c=o.avcSample=o._createAVCSample(!0,e.pts,e.dts,"")),l&&(c.debug+="IDR "),c.key=!0,c.frame=!0;break;case 6:r=!0,l&&c&&(c.debug+="SEI "),i=new d.default(o.discardEPB(t.data)),i.readUByte();for(var f=0,h=0,p=!1,v=0;!p&&i.bytesAvailable>1;){f=0;do v=i.readUByte(),f+=v;while(255===v);h=0;do v=i.readUByte(),h+=v;while(255===v);if(4===f&&0!==i.bytesAvailable){p=!0;var y=i.readUByte();if(181===y){var g=i.readUShort();if(49===g){var m=i.readUInt();if(1195456820===m){var b=i.readUByte();if(3===b){var _=i.readUByte(),w=i.readUByte(),T=31&_,S=[_,w];for(n=0;n<T;n++)S.push(i.readUByte()),S.push(i.readUByte()),S.push(i.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(h<i.bytesAvailable)for(n=0;n<h;n++)i.readUByte()}break;case 7:if(r=!0,l&&c&&(c.debug+="SPS "),!a.sps){i=new d.default(t.data);var E=i.readSPS();a.width=E.width,a.height=E.height,a.pixelRatio=E.pixelRatio,a.sps=[t.data],a.duration=o._duration;var k=t.data.subarray(1,4),O="avc1.";for(n=0;n<3;n++){var R=k[n].toString(16);R.length<2&&(R="0"+R),O+=R}a.codec=O}break;case 8:r=!0,l&&c&&(c.debug+="PPS "),a.pps||(a.pps=[t.data]);break;case 9:r=!1,c&&o.pushAccesUnit(c,a),c=o.avcSample=o._createAVCSample(!1,e.pts,e.dts,l?"AUD ":"");break;case 12:r=!1;break;default:r=!1,c&&(c.debug+="unknown NAL "+t.type+" ")}if(c&&r){var C=c.units;C.units.push(t)}}),t&&c&&(this.pushAccesUnit(c,a),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,i,r){return{key:e,pts:t,dts:i,units:{units:[],length:0},debug:r}}},{key:"_insertSampleInOrder",value:function(e,t){var i=e.length;if(i>0){if(t.pts>=e[i-1].pts)e.push(t);else for(var r=i-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.units.length){var i=this._avcTrack,r=i.samples;e=r[r.length-1]}if(e){var n=e.units.units;t=n[n.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,i,r,n,o,a=0,s=e.byteLength,l=this._avcTrack,c=l.naluState||0,u=c,d=[],f=-1;for(c===-1&&(f=0,o=31&e[0],c=0,a=1);a<s;)if(t=e[a++],c)if(1!==c)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,a-c-1),type:o},d.push(r);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),i=a-c-1,i>0)){var p=new Uint8Array(h.data.byteLength+i);p.set(h.data,0),p.set(e.subarray(0,i),h.data.byteLength),h.data=p}}a<s?(n=31&e[a],f=a,o=n,c=0):c=-1}else c=0;else c=3;else c=t?0:2;else c=t?0:1;if(f>=0&&c>=0&&(r={data:e.subarray(f,s),type:o,state:c},d.push(r)),0===d.length){var v=this._getLastNalUnit();if(v){var y=new Uint8Array(v.data.byteLength+e.byteLength);y.set(v.data,0),y.set(e,v.data.byteLength),v.data=y}}return l.naluState=c,d}},{key:"discardEPB",value:function(e){for(var t,i,r=e.byteLength,n=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(n.push(o+2),o+=2):o++;if(0===n.length)return e;t=r-n.length,i=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===n[0]&&(a++,n.shift()),i[o]=e[a];return i}},{key:"_parseAACPES",value:function(e){var t,i,r,n,o,a,l,u,d,p=this._audioTrack,v=e.data,y=e.pts,g=0,m=this.aacOverFlow,b=this.aacLastPTS;if(m){var _=new Uint8Array(m.byteLength+v.byteLength);_.set(m,0),_.set(v,m.byteLength),v=_}for(o=g,u=v.length;o<u-1&&(255!==v[o]||240!==(240&v[o+1]));o++);if(o){var w,T;if(o<u-1?(w="AAC PES did not start with ADTS header,offset:"+o,T=!1):(w="no ADTS header found in AAC PES",T=!0),f.logger.warn("parsing error:"+w),this.observer.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:T,reason:w}),T)return}if(!p.audiosamplerate){var S=this.audioCodec;t=s.default.getAudioConfig(this.observer,v,o,S),p.config=t.config,p.audiosamplerate=t.samplerate,p.channelCount=t.channelCount,p.codec=t.codec,p.manifestCodec=t.manifestCodec,p.duration=this._duration,f.logger.log("parsed codec:"+p.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(n=0,r=9216e4/p.audiosamplerate,m&&b){var E=b+r;Math.abs(E-y)>1&&(f.logger.log("AAC: align PTS for overlapping frames by "+Math.round((E-y)/90)),y=E)}for(;o+5<u&&(a=1&v[o+1]?7:9,i=(3&v[o+3])<<11|v[o+4]<<3|(224&v[o+5])>>>5,i-=a,i>0&&o+a+i<=u);)for(l=y+n*r,d={unit:v.subarray(o+a,o+a+i),pts:l,dts:l},p.samples.push(d),p.len+=i,o+=i+a,n++;o<u-1&&(255!==v[o]||240!==(240&v[o+1]));o++);m=o<u?v.subarray(o,u):null,this.aacOverFlow=m,this.aacLastPTS=l}},{key:"_parseMPEGPES",value:function(e){for(var t,i=e.data,r=e.pts,n=i.length,o=0,a=0;a<n&&(t=this._parseMpeg(i,a,n,o++,r))>0;)a+=t}},{key:"_onMpegFrame",value:function(e,t,i,r,n,o){var a=1152/i*1e3,s=o+n*a,l=this._audioTrack;l.config=[],l.channelCount=r,l.audiosamplerate=i,l.duration=this._duration,l.samples.push({unit:e,pts:s,dts:s}),l.len+=e.length}},{key:"_onMpegNoise",value:function(e){f.logger.warn("mpeg audio has noise: "+e.length+" bytes")}},{key:"_parseMpeg",value:function(e,t,i,r,n){var o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2>i)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>i)return-1;var s=e[t+1]>>3&3,l=e[t+1]>>1&3,c=e[t+2]>>4&15,u=e[t+2]>>2&3,d=!!(2&e[t+2]);if(1!==s&&0!==c&&15!==c&&3!==u){var f=3===s?3-l:3===l?3:4,h=1e3*o[14*f+c-1],p=3===s?0:2===s?1:2,v=a[3*p+u],y=d?1:0,g=e[t+3]>>6===3?1:2,m=3===l?(3===s?12:6)*h/v+y<<2:(3===s?144:72)*h/v+y|0;return t+m>i?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+m),h,v,g,r,n),m)}}for(var b=t+2;b<i;){if(255===e[b-1]&&224===(224&e[b]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,b-1)),b-t-1;b++}return-1}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();i.default=p},{19:19,23:23,26:26,28:28,45:45}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=e(45),l=e(26),c=e(28),u=r(c),d=function(){function e(t){n(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return a(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var i=function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)};try{i.call(this,e,t).call()}catch(t){s.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();i.default=d},{26:26,28:28,45:45}],28:[function(e,t,i){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();i.default=o},{}],30:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"isBuffered",value:function(e,t){if(e)for(var i=e.buffered,r=0;r<i.length;r++)if(t>=i.start(r)&&t<=i.end(r))return!0;return!1}},{key:"bufferInfo",value:function(e,t,i){if(e){var r,n=e.buffered,o=[];for(r=0;r<n.length;r++)o.push({start:n.start(r),end:n.end(r)});return this.bufferedInfo(o,t,i)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(e,t,i){var r,n,o,a,s,l=[];for(e.sort(function(e,t){var i=e.start-t.start;return i?i:t.end-e.end}),s=0;s<e.length;s++){var c=l.length;if(c){var u=l[c-1].end;e[s].start-u<i?e[s].end>u&&(l[c-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,r=0,n=o=t;s<l.length;s++){var d=l[s].start,f=l[s].end;if(t+i>=d&&t<f)n=d,o=f,r=o-t;else if(t+i<d){a=d;break}}return{len:r,start:n,end:o,nextStart:a}}}]),e}();i.default=o},{}],31:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e(45),a=function(){function e(){r(this,e)}return n(e,null,[{key:"mergeDetails",value:function(t,i){var r,n=Math.max(t.startSN,i.startSN)-i.startSN,a=Math.min(t.endSN,i.endSN)-i.startSN,s=i.startSN-t.startSN,l=t.fragments,c=i.fragments,u=0;if(a<n)return void(i.PTSKnown=!1);for(var d=n;d<=a;d++){var f=l[s+d],h=c[d];h&&f&&(u=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,r=h))}if(u)for(o.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<c.length;d++)c[d].cc+=u;if(r)e.updateFragPTSDTS(i,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<l.length){var p=l[s].start;for(d=0;d<c.length;d++)c[d].start+=p}i.PTSKnown=t.PTSKnown}},{key:"updateFragPTSDTS",value:function(t,i,r,n,o,a){var s,l,c,u;if(!t||i<t.startSN||i>t.endSN)return 0;if(s=i-t.startSN,l=t.fragments,c=l[s],!isNaN(c.startPTS)){var d=Math.abs(c.startPTS-r);isNaN(c.deltaPTS)?c.deltaPTS=d:c.deltaPTS=Math.max(d,c.deltaPTS),r=Math.min(r,c.startPTS),n=Math.max(n,c.endPTS),o=Math.min(o,c.startDTS),a=Math.max(a,c.endDTS)}var f=r-c.start;for(c.start=c.startPTS=r,c.endPTS=n,c.startDTS=o,c.endDTS=a,c.duration=n-r,u=s;u>0;u--)e.updatePTS(l,u,u-1);for(u=s;u<l.length-1;u++)e.updatePTS(l,u,u+1);return t.PTSKnown=!0,f}},{key:"updatePTS",value:function(e,t,i){var r=e[t],n=e[i],a=n.startPTS;isNaN(a)?i>t?n.start=r.start+r.duration:n.start=r.start-n.duration:i>t?(r.duration=a-r.start,r.duration<0&&o.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(n.duration=r.start-a,n.duration<0&&o.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"))}}]),e}();i.default=a},{45:45}],32:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(28),s=r(a),l=e(26),c=e(36),u=r(c),d=e(34),f=r(d),h=e(4),p=r(h),v=e(7),y=r(v),g=e(8),m=r(g),b=e(5),_=r(b),w=e(12),T=r(w),S=e(11),E=r(S),k=e(13),O=r(k),R=e(10),C=r(R),P=e(6),I=r(P),A=e(45),x=e(47),j=r(x),L=e(1),M=r(L),D=e(35),F=r(D),N=e(43),U=r(N),B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);var i=e.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in t||(t[r]=i[r]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,A.enableLogs)(t.debug),this.config=t;var o=this.observer=new M.default;o.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o.emit.apply(o,[e,e].concat(i))},o.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o.removeListener.apply(o,[e].concat(i))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o),this.playlistLoader=new u.default(this),this.fragmentLoader=new f.default(this),this.levelController=new E.default(this),this.abrController=new t.abrController(this),this.bufferController=new t.bufferController(this),this.capLevelController=new t.capLevelController(this),this.fpsController=new t.fpsController(this),this.streamController=new t.streamController(this),this.audioStreamController=new t.audioStreamController(this),this.timelineController=new t.timelineController(this),this.audioTrackController=new I.default(this),this.keyLoader=new F.default(this)}return o(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.21"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxMaxBufferLength:600,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:j.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:p.default,bufferController:y.default,capLevelController:m.default,fpsController:C.default,streamController:T.default,audioStreamController:_.default,timelineController:O.default,cueHandler:U.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),o(e,[{key:"destroy",value:function(){A.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(e){A.logger.log("attachMedia"),this.media=e,this.trigger(s.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){A.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){A.logger.log("loadSource:"+e),this.url=e,this.trigger(s.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;A.logger.log("startLoad("+e+")"),this.levelController.startLoad(),this.streamController.startLoad(e),this.audioStreamController.startLoad(e)}},{key:"stopLoad",value:function(){A.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){A.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){A.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){A.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){A.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){A.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(e){A.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){A.logger.log("set startLevel:"+e),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(e){A.logger.log("set autoLevelCapping:"+e),this.abrController.autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(e){this.audioTrackController.audioTrack=e}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),e}();i.default=B},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,47:47,5:5,6:6,7:7,8:8}],33:[function(e,t,i){"use strict";t.exports=e(32).default},{32:32}],34:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(26),h=e(45),p=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.FRAG_LOADING));return i.loaders={},i}return a(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var i=e[t];i&&i.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,i=t.type,r=this.loaders[i],n=this.hls.config;t.loaded=0,r&&(h.logger.warn("abort previous fragment loader for type:"+i),r.abort()),r=this.loaders[i]=t.loader="undefined"!=typeof n.fLoader?new n.fLoader(n):new n.loader(n);var o=void 0,a=void 0,s=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(l)||isNaN(c)||(o.rangeStart=l,o.rangeEnd=c),a={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(o,a,s)}},{key:"loadsuccess",value:function(e,t,i){var r=e.data,n=i.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(c.default.FRAG_LOADED,{payload:r,frag:n,stats:t})}},{key:"loaderror",value:function(e,t){var i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(c.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(c.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,i){var r=t.frag;r.loaded=e.loaded,this.hls.trigger(c.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e})}}]),t}(d.default);i.default=p},{26:26,27:27,28:28,45:45}],35:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(28),c=r(l),u=e(27),d=r(u),f=e(26),h=e(45),p=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.KEY_LOADING));return i.loaders={},
i.decryptkey=null,i.decrypturl=null,i}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,i=t.type,r=this.loaders[i],n=t.decryptdata,o=n.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;r&&(h.logger.warn("abort previous key loader for type:"+i),r.abort()),t.loader=this.loaders[i]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,u=void 0;s={url:o,frag:t,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,u)}else this.decryptkey&&(n.key=this.decryptkey,this.hls.trigger(c.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,i){var r=i.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(c.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(c.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})}},{key:"loadtimeout",value:function(e,t){var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(c.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})}}]),t}(d.default);i.default=p},{26:26,27:27,28:28,45:45}],36:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=e(2),c=r(l),u=e(28),d=r(u),f=e(27),h=r(f),p=e(26),v=e(40),y=r(v),g=e(45),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,_=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,T=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=c.default.buildAbsoluteURL(this.baseuri,this.reluri)),this._uri}}]),e}(),S=function(){function e(){a(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&(i=new T,i.method=e.method,i.baseuri=e.baseuri,i.reluri=e.reluri,i.iv=this.createInitializationVector(t)),i}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=c.default.buildAbsoluteURL(this.baseurl,this.relurl)),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var i=this.lastByteRangeEndOffset;e[0]=i?i:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),E=function(e){function t(e){a(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MANIFEST_LOADING,d.default.LEVEL_LOADING,d.default.AUDIO_TRACK_LOADING));return i.loaders={},i}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"load",value:function(e,t){var i=this.loaders[t.type];if(i){var r=i.context;if(r&&r.url===e)return void g.logger.trace("playlist request ongoing");g.logger.warn("abort previous loader for type:"+t.type),i.abort()}var n=this.hls.config,o=void 0,a=void 0,s=void 0,l=void 0;"manifest"===t.type?(o=n.manifestLoadingMaxRetry,a=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,l=n.manifestLoadingMaxRetryTimeout):(o=n.levelLoadingMaxRetry,a=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,l=n.levelLoadingMaxRetryTimeout,g.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),i=this.loaders[t.type]=t.loader="undefined"!=typeof n.pLoader?new n.pLoader(n):new n.loader(n),t.url=e,t.responseType="";var c=void 0,u=void 0;c={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(t,c,u)}},{key:"resolve",value:function(e,t){return c.default.buildAbsoluteURL(t,e)}},{key:"parseMasterPlaylist",value:function(e,t){var i=[],r=void 0;for(m.lastIndex=0;null!=(r=m.exec(e));){var n={},o=n.attrs=new y.default(r[1]);n.url=this.resolve(r[2],t);var a=o.decimalResolution("RESOLUTION");a&&(n.width=a.width,n.height=a.height),n.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),n.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var l=0;l<s.length;l++){var c=s[l];c.indexOf("avc1")!==-1?n.videoCodec=this.avc1toavcoti(c):n.audioCodec=c}}i.push(n)}return i}},{key:"parseMasterPlaylistMedia",value:function(e,t,i){var r=void 0,n=[];for(b.lastIndex=0;null!=(r=b.exec(e));){var o={},a=new y.default(r[1]);a.TYPE===i&&(o.groupId=a["GROUP-ID"],o.name=a.NAME,o.type=i,o.default="YES"===a.DEFAULT,o.autoselect="YES"===a.AUTOSELECT,o.forced="YES"===a.FORCED,a.URI&&(o.url=this.resolve(a.URI,t)),o.lang=a.LANGUAGE,o.name||(o.name=o.lang),n.push(o))}return n}},{key:"avc1toavcoti",value:function(e){var t,i=e.split(".");return i.length>2?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,i,r){var n,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new T,u=0,d=null,f=new S;for(_.lastIndex=0;null!==(n=_.exec(e));){var h=n[1];if(h){f.duration=parseFloat(h);var p=(" "+n[2]).slice(1);f.title=p?p:null,f.tagList.push(p?["INF",h,p]:["INF",h])}else if(n[3]){if(!isNaN(f.duration)){var v=a++;f.type=r,f.start=s,f.levelkey=c,f.sn=v,f.level=i,f.cc=u,f.baseurl=t,f.relurl=(" "+n[3]).slice(1),l.fragments.push(f),d=f,s+=f.duration,f=new S}}else if(n[4]){if(f.rawByteRange=(" "+n[4]).slice(1),d){var m=d.byteRangeEndOffset;m&&(f.lastByteRangeEndOffset=m)}}else if(n[5])f.rawProgramDateTime=(" "+n[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(n=n[0].match(w),o=1;o<n.length&&void 0===n[o];o++);var b=(" "+n[o+1]).slice(1),E=(" "+n[o+2]).slice(1);switch(n[o]){case"#":f.tagList.push(E?[b,E]:[b]);break;case"PLAYLIST-TYPE":l.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(b);break;case"TARGETDURATION":l.targetduration=parseFloat(b);break;case"VERSION":l.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(b);break;case"KEY":var k=b,O=new y.default(k),R=O.enumeratedString("METHOD"),C=O.URI,P=O.hexadecimalInteger("IV");R&&(c=new T,C&&"AES-128"===R&&(c.method=R,c.baseuri=t,c.reluri=C,c.key=null,c.iv=P));break;case"START":var I=b,A=new y.default(I),x=A.decimalFloatingPoint("TIME-OFFSET");isNaN(x)||(l.startTimeOffset=x);break;case"MAP":var j=new y.default(b);f.relurl=j.URI,f.rawByteRange=j.BYTERANGE,f.baseurl=t,f.level=i,f.type=r,f.sn="initSegment",l.initSegment=f,f=new S;break;default:g.logger.warn("line parsed but not handled: "+n)}}}return f=d,f&&!f.relurl&&(l.fragments.pop(),s-=f.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l}},{key:"loadsuccess",value:function(e,t,i){var r=e.data,n=e.url,o=i.type,a=i.id,s=i.level,l=this.hls;if(this.loaders[o]=void 0,void 0!==n&&0!==n.indexOf("data:")||(n=i.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var c="audioTrack"!==o,u=this.parseLevelPlaylist(r,n,(c?s:a)||0,c?"main":"audio");"manifest"===o&&l.trigger(d.default.MANIFEST_LOADED,{levels:[{url:n,details:u}],audioTracks:[],url:n,stats:t}),t.tparsed=performance.now(),u.targetduration?c?l.trigger(d.default.LEVEL_LOADED,{details:u,level:s||0,id:a||0,stats:t}):l.trigger(d.default.AUDIO_TRACK_LOADED,{details:u,id:a,stats:t}):l.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"invalid targetduration"})}else{var f=this.parseMasterPlaylist(r,n);if(f.length){var h=this.parseMasterPlaylistMedia(r,n,"AUDIO");if(h.length){var v=!1;h.forEach(function(e){e.url||(v=!0)}),v===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(g.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}l.trigger(d.default.MANIFEST_LOADED,{levels:f,audioTracks:h,url:n,stats:t})}else l.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no level found in manifest"})}else l.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var i,r,n=t.loader;switch(t.type){case"manifest":i=p.ErrorDetails.MANIFEST_LOAD_ERROR,r=!0;break;case"level":i=p.ErrorDetails.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":i=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,r=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:i,fatal:r,url:n.url,loader:n,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var i,r,n=t.loader;switch(t.type){case"manifest":i=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":i=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":i=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:i,fatal:r,url:n.url,loader:n,context:t})}}]),t}(h.default);i.default=E},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:i,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))}},{key:"box",value:function(e){for(var t,i=Array.prototype.slice.call(arguments,1),r=8,n=i.length,o=n;n--;)r+=i[n].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),n=0,r=8;n<o;n++)t.set(i[n],r),r+=i[n].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,i){return i*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,i,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,i))}},{key:"moov",value:function(t){for(var i=t.length,r=[];i--;)r[i]=e.trak(t[i]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var i=t.length,r=[];i--;)r[i]=e.trex(t[i]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,i){i*=t;var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)}},{key:"sdtp",value:function(t){var i,r,n=t.samples||[],o=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,o[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,o)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var i,r,n,o=[],a=[];for(i=0;i<t.sps.length;i++)r=t.sps[i],n=r.byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(r));for(i=0;i<t.pps.length;i++)r=t.pps[i],n=r.byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,c=t.height,u=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var i=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var i=t.audiosamplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var i=t.id,r=t.duration*t.timescale,n=t.width,o=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,i){var r=e.sdtp(t),n=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var i=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,i){var r,n,o,a,s,l,c=t.samples||[],u=c.length,d=12+16*u,f=new Uint8Array(d);for(i+=8+d,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),r=0;r<u;r++)n=c[r],o=n.duration,a=n.size,s=n.flags,l=n.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var i,r=e.moov(t);return i=new Uint8Array(e.FTYP.byteLength+r.byteLength),i.set(e.FTYP),i.set(r,e.FTYP.byteLength),i}}]),e}();i.default=o},{}],38:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(29),s=r(a),l=e(28),c=r(l),u=e(45),d=e(37),f=r(d),h=e(26),p=function(){function e(t,i,r,o){n(this,e),this.observer=t,this.id=i,this.config=r,this.typeSupported=o,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return o(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,i,r,n,o,a,s,l,u,d){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(r,n,s,i),null!==d&&(this._initPTS=this._initDTS=d),this.ISGenerated)if(r.samples.length){var f=this.remuxAudio(r,s,l,u);if(n.samples.length){var h=void 0;f&&(h=f.endPTS-f.startPTS),this.remuxVideo(n,s,l,h)}}else{var p=void 0;n.samples.length&&(p=this.remuxVideo(n,s,l)),p&&r.codec&&this.remuxEmptyAudio(r,s,l,p)}o.samples.length&&this.remuxID3(o,s),a.samples.length&&this.remuxText(a,s),this.observer.trigger(c.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,i,r){var n,o,a=this.observer,s=e.samples,l=t.samples,d=this.PES_TIMESCALE,p=this.typeSupported,v="audio/mp4",y={},g={id:this.id,level:this.level,sn:this.sn,tracks:y,unique:!1},m=void 0===this._initPTS;m&&(n=o=1/0),e.config&&s.length&&(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)&&!function(){var t=function e(t,i){return i?e(i,t%i):t};e.timescale=e.audiosamplerate/t(e.audiosamplerate,e.isAAC?1024:1152)}(),u.logger.log("audio mp4 timescale :"+e.timescale),e.isAAC||(p.mpeg?(v="audio/mpeg",e.codec=""):p.mp3&&(e.codec="mp3")),y.audio={container:v,codec:e.codec,initSegment:!e.isAAC&&p.mpeg?new Uint8Array:f.default.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(n=o=s[0].pts-d*i)),t.sps&&t.pps&&l.length&&(t.timescale=this.MP4_TIMESCALE,y.video={container:"video/mp4",codec:t.codec,initSegment:f.default.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(n=Math.min(n,l[0].pts-d*i),o=Math.min(o,l[0].dts-d*i),this.observer.trigger(c.default.INIT_PTS_FOUND,{id:this.id,initPTS:n,cc:r}))),Object.keys(y).length?(a.trigger(c.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,m&&(this._initPTS=n,this._initDTS=o)):a.trigger(c.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,i,r){var n,o,a,s,l,d,p,v,y=8,g=this.PES_TIMESCALE,m=this.PES2MP4SCALEFACTOR,b=e.samples,_=[],w=b.length,T=this._PTSNormalize,S=this._initDTS;b.sort(function(e,t){var i=e.dts-t.dts;return i?i:e.pts-t.pts});var E=b.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(E<0){u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var k=0;k<b.length;k++)b[k].dts+=E}var O=void 0;O=i?this.nextAvcDts:t*g;var R=b[0];l=Math.max(T(R.dts-S,O),0),s=Math.max(T(R.pts-S,O),0);var C=Math.round((l-O)/90);i&&C&&(C>1?u.logger.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&u.logger.log("AVC:"+-C+" ms overlapping between fragments detected"),l=O,b[0].dts=l+S,s=Math.max(s-C,O),b[0].pts=s+S,u.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(l/90)+",delta:"+C+" ms")),d=l,R=b[b.length-1],v=Math.max(T(R.dts-S,O),0),p=Math.max(T(R.pts-S,O),0),p=Math.max(p,v);var P=navigator.vendor,I=navigator.userAgent,A=P&&P.indexOf("Apple")>-1&&I&&!I.match("CriOS");A&&(n=Math.round((v-l)/(m*(b.length-1))));for(var x=0;x<w;x++){var j=b[x];A?j.dts=l+x*m*n:(j.dts=Math.max(T(j.dts-S,O),l),j.dts=Math.round(j.dts/m)*m),j.pts=Math.max(T(j.pts-S,O),j.dts),j.pts=Math.round(j.pts/m)*m}var L=e.len+4*e.nbNalu+8;try{o=new Uint8Array(L)}catch(e){return void this.observer.trigger(c.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating video mdat "+L})}var M=new DataView(o.buffer);M.setUint32(0,L),o.set(f.default.types.mdat,4);for(var D=0;D<w;D++){for(var F=b[D],N=F.units.units,U=0,B=void 0,V=0,H=N.length;V<H;V++){var G=N[V],W=G.data,$=G.data.byteLength;M.setUint32(y,$),y+=4,o.set(W,y),y+=$,U+=4+$}if(A)B=Math.max(0,n*Math.round((F.pts-F.dts)/(m*n)));else{if(D<w-1)n=b[D+1].dts-F.dts;else{var z=this.config,q=F.dts-b[D>0?D-1:D].dts;if(z.stretchShortVideoTrack){var K=z.maxBufferHole,X=z.maxSeekHole,Y=Math.floor(Math.min(K,X)*g),J=(r?s+r*g:this.nextAudioPts)-F.pts;J>Y?(n=J-q,n<0&&(n=q),u.logger.log("It is approximately "+J/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=q}else n=q}n/=m,B=Math.round((F.pts-F.dts)/m)}_.push({size:U,duration:n,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=v+n*m;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Z=_[0].flags;Z.dependsOn=2,Z.isNonSync=0}e.samples=_,a=f.default.moof(e.sequenceNumber++,l/m,e),e.samples=[];var ee={id:this.id,level:this.level,sn:this.sn,data1:a,data2:o,startPTS:s/g,endPTS:(p+m*n)/g,startDTS:l/g,endDTS:this.nextAvcDts/g,type:"video",nb:_.length,dropped:Q};return this.observer.trigger(c.default.FRAG_PARSING_DATA,ee),ee}},{key:"remuxAudio",value:function(e,t,i,r){var n,o,a,l,d,p,v,y,g,m,b,_,w,T,S,E,k=this.PES_TIMESCALE,O=e.timescale,R=k/O,C=e.timescale*(e.isAAC?1024:1152)/e.audiosamplerate,P=C*R,I=this._PTSNormalize,A=this._initDTS,x=!e.isAAC&&this.typeSupported.mpeg,j=x?0:8,L=[],M=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),M=e.samples,E=this.nextAudioPts,i|=M.length&&E&&(Math.abs(t-E/k)<.1||Math.abs(M[0].pts-E-this._initDTS)<20*P),i||(E=t*k),r&&e.isAAC)for(var D=0,F=E;D<M.length;){var N=M[D],U=I(N.pts-A,E),B=U-F;if(B<=-P)u.logger.warn("Dropping 1 audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(Math.abs(B/90))+" ms overlap."),M.splice(D,1),e.len-=N.unit.length;else if(B>=P&&F){var V=Math.round(B/P);u.logger.warn("Injecting "+V+" audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(B/90)+" ms gap.");for(var H=0;H<V;H++)S=F+A,S=Math.max(S,A),T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(u.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),T=N.unit.subarray()),M.splice(D,0,{unit:T,pts:S,dts:S}),e.len+=T.length,F+=P,D+=1;N.pts=N.dts=F+A,F+=P,D+=1}else Math.abs(B)>.1*P,F+=P,0===D?N.pts=N.dts=A+E:N.pts=N.dts=M[D-1].pts+P,D+=1}for(var G=0,W=M.length;G<W;G++){if(o=M[G],l=o.unit,m=o.pts-A,b=o.dts-A,void 0!==g)_=I(m,g),w=I(b,g),a.duration=Math.round((w-g)/R);else{_=I(m,E),w=I(b,E);var $=Math.round(1e3*(_-E)/k),z=0;if(i&&e.isAAC&&$){if($>0)z=Math.round((_-E)/P),u.logger.log($+" ms hole between AAC samples detected,filling it"),z>0&&(T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(T=l.subarray()),e.len+=z*T.length);else if($<-12){u.logger.log(-$+" ms overlapping between AAC samples detected, drop frame"),e.len-=l.byteLength;continue}_=w=E}if(v=Math.max(0,_),y=Math.max(0,w),!(e.len>0))return;var q=x?e.len:e.len+8;try{d=new Uint8Array(q)}catch(e){return void this.observer.trigger(c.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating audio mdat "+q})}x||(n=new DataView(d.buffer),n.setUint32(0,q),d.set(f.default.types.mdat,4));for(var K=0;K<z;K++)S=_-(z-K)*P,T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(u.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),T=l.subarray()),d.set(T,j),j+=T.byteLength,a={size:T.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},L.push(a)}d.set(l,j);var X=l.byteLength;j+=X,a={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},L.push(a),g=w}var Y=0,J=L.length;if(J>=2&&(Y=L[J-2].duration,a.duration=Y),J){this.nextAudioPts=_+R*Y,e.len=0,e.samples=L,p=x?new Uint8Array:f.default.moof(e.sequenceNumber++,y/R,e),e.samples=[];var Q={id:this.id,level:this.level,sn:this.sn,data1:p,data2:d,startPTS:v/k,endPTS:this.nextAudioPts/k,startDTS:y/k,endDTS:(w+R*Y)/k,type:"audio",nb:J};return this.observer.trigger(c.default.FRAG_PARSING_DATA,Q),Q}return null}},{key:"remuxEmptyAudio",value:function(e,t,i,r){var n=this.PES_TIMESCALE,o=e.timescale?e.timescale:e.audiosamplerate,a=n/o,l=this.nextAudioPts,c=(void 0!==l?l:r.startDTS*n)+this._initDTS,d=r.endDTS*n+this._initDTS,f=1024,h=a*f,p=Math.ceil((d-c)/h),v=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(u.logger.warn("remux empty Audio"),!v)return void u.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var y=[],g=0;g<p;g++){var m=c+g*h;y.push({unit:v,pts:m,dts:m}),e.len+=v.length}e.samples=y,this.remuxAudio(e,t,i)}},{key:"remuxID3",value:function(e,t){var i,r=e.samples.length;if(r){for(var n=0;n<r;n++)i=e.samples[n],i.pts=(i.pts-this._initPTS)/this.PES_TIMESCALE,i.dts=(i.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(c.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var i,r=e.samples.length;if(r){for(var n=0;n<r;n++)i=e.samples[n],i.pts=(i.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(c.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var i;if(void 0===t)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e}},{key:"passthrough",get:function(){return!1}}]),e}();i.default=p},{26:26,28:28,29:29,37:37,45:45}],39:[function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=e(28),s=r(a),l=function(){function e(t,i){n(this,e),this.observer=t,this.id=i,this.ISGenerated=!1}return o(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,i,r,n,o){var a=this.observer;if(!this.ISGenerated){var l={},c={id:this.id,tracks:l,unique:!0},u=t,d=u.codec;d&&(c.tracks.video={container:u.container,codec:d,metadata:{width:u.width,height:u.height}}),u=e,d=u.codec,d&&(c.tracks.audio={container:u.container,codec:d,metadata:{channelCount:u.channelCount}}),this.ISGenerated=!0,a.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,c)}a.trigger(s.default.FRAG_PARSING_DATA,{id:this.id,data1:o,startPTS:n,startDTS:n,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),e}();i.default=l},{28:28}],40:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}return n(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(2*r,2*r+2),16);return i;
}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=o.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,i={};for(a.lastIndex=0;null!==(t=a.exec(e));){var r=t[2],n='"';0===r.indexOf(n)&&r.lastIndexOf(n)===r.length-1&&(r=r.slice(1,-1)),i[t[1]]=r}return i}}]),e}();i.default=s},{}],41:[function(e,t,i){"use strict";var r={search:function(e,t){for(var i=0,r=e.length-1,n=null,o=null;i<=r;){n=(i+r)/2|0,o=e[n];var a=t(o);if(a>0)i=n+1;else{if(!(a<0))return o;r=n-1}}return null}};t.exports=r},{}],42:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=function(e){var t=e;return o.hasOwnProperty(e)&&(t=o[e]),String.fromCharCode(t)},s=15,l=32,c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var i=this.verboseFilter[e];this.verboseLevel>=i&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t},y=function(){function e(t,i,n,o,a){r(this,e),this.foreground=t||"white",this.underline=i||!1,this.italics=n||!1,this.background=o||"black",this.flash=a||!1}return n(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var r=t[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,i,n,o,a,s){r(this,e),this.uchar=t||" ",this.penState=new y(i,n,o,a,s)}return n(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),m=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<l;t++)this.chars.push(new g);this.pos=0,this.currPenState=new y}return n(e,[{key:"equals",value:function(e){for(var t=!0,i=0;i<l;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=l)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=a(e);return this.pos>=l?void p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<l;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,i=0;i<l;i++){var r=this.chars[i].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),b=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new m);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return n(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,i=0;i<s;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e,t){p.log("INFO","pacData = "+JSON.stringify(e));var i=e.row-1;if(this.nrRollUpRows&&i<this.nrRollUpRows-1&&(i=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==i){for(var r=0;r<s;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,o=t.rows[n].cueStartTime;if(o&&o<p.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[i-this.nrRollUpRows+r+1].copy(t.rows[n+r])}this.currRow=i;var a=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,c=Math.max(l-1,0);a.setCursor(e.indent),e.color=a.chars[c].penState.foreground}var u={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(u)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],i="",r=-1,n=0;n<s;n++){var o=this.rows[n].getTextString();o&&(r=n+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),_=function(){function e(t,i){r(this,e),this.chNr=t,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return n(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e,this.lastOutputScreen)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[i]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),w=function(){function e(t,i,n){r(this,e),this.field=t||1,this.outputs=[i,n],this.channels=[new _(1,i),new _(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return n(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var i,r,n,o=!1;this.lastTime=e,p.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],n=127&t[a+1],0!==r||0!==n){if(p.log("DATA","["+v([t[a],t[a+1]])+"] -> ("+v([r,n])+")"),i=this.parseCmd(r,n),i||(i=this.parseMidrow(r,n)),i||(i=this.parsePAC(r,n)),i||(i=this.parseBackgroundAttributes(r,n)),!i&&(o=this.parseChars(r,n)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([r,n])+" orig: "+v([t[a],t[a+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var i=null,r=(20===e||28===e)&&32<=t&&t<=47,n=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!n)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;i=20===e||23===e?1:2;var o=this.channels[i-1];return 20===e||28===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0}},{key:"parseMidrow",value:function(e,t){var i=null;if((17===e||25===e)&&32<=t&&t<=47){if(i=17===e?1:2,i!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[i-1];return r.ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var i=null,r=null,n=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,o=(16===e||24===e)&&64<=t&&t<=95;if(!n&&!o)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=e<=23?1:2,r=64<=t&&t<=95?1===i?c[e]:d[e]:1===i?u[e]:f[e];var a=this.interpretPAC(r,t),s=this.channels[i-1];return s.setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0}},{key:"interpretPAC",value:function(e,t){var i=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,r.underline=1===(1&i),i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((i-16)/2),r}},{key:"parseChars",value:function(e,t){var i=null,r=null,n=null;if(e>=25?(i=2,n=e-8):(i=1,n=e),17<=n&&n<=19){var o=t;o=17===n?t+80:18===n?t+112:t+144,p.log("INFO","Special char '"+a(o)+"' in channel "+i),r=[o]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=v(r);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r}},{key:"parseBackgroundAttributes",value:function(e,t){var i,r,n,o,a=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!a&&!s)&&(i={},16===e||24===e?(r=Math.floor((t-32)/2),i.background=h[r],t%2===1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),n=e<24?1:2,o=this.channels[n-1],o.setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();i.default=w},{}],43:[function(e,t,i){"use strict";var r={newCue:function(e,t,i,r){for(var n,o,a,s,l,c=window.VTTCue||window.TextTrackCue,u=0;u<r.rows.length;u++)if(n=r.rows[u],a=!0,s=0,l="",!n.isEmpty()){for(var d=0;d<n.chars.length;d++)n.chars[d].uchar.match(/\s/)&&a?s++:(l+=n.chars[d].uchar,a=!1);n.cueStartTime=t,o=new c(t,i,l.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=u+1:o.line=u>7?u-2:u+1,o.align="left",o.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(o)}}};t.exports=r},{}],44:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return n(e,[{key:"sample",value:function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();i.default=o},{}],45:[function(e,t,i){"use strict";function r(){}function n(e,t){return t="["+e+"] > "+t}function o(e){var t=self.console[e];return t?function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];r[0]&&(r[0]=n(e,r[0])),t.apply(self.console,r)}:r}function a(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];i.forEach(function(t){c[t]=e[t]?e[t].bind(e):o(t)})}Object.defineProperty(i,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={trace:r,debug:r,log:r,warn:r,info:r,error:r},c=l;i.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":s(e))){a(e,"debug","log","info","warn","error");try{c.log()}catch(e){c=l}}else c=l},i.logger=c},{}],46:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"toString",value:function(e){for(var t="",i=e.length,r=0;r<i;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}]),e}();i.default=o},{}],47:[function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=e(45),a=function(){function e(t){r(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return n(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var i=this.stats;i.tfirst=0,i.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,i=t.readyState,r=this.stats,n=this.context,a=this.config;if(!r.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===i){var s=t.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var l=void 0,c=void 0;"arraybuffer"===n.responseType?(l=t.response,c=l.byteLength):(l=t.responseText,c=l.length),r.loaded=r.total=c;var u={url:t.responseURL,data:l};this.callbacks.onSuccess(u,r,n)}else r.retry>=a.maxRetry||s>=400&&s<499?(o.logger.error(s+" while loading "+n.url),this.callbacks.onError({code:s,text:t.statusText},n)):(o.logger.warn(s+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)}},{key:"loadtimeout",value:function(){o.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var i=this.callbacks.onProgress;i&&i(t,this.context,null)}}]),e}();i.default=a},{45:45}]},{},[33])(33)})},967:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(190),l=i(2),c=i(1),u=(i(39),i(29),function(){function e(e,t,i,r){this.configurationUtil=e,this.serviceDetailsService=t,this.$state=i,this.$translate=r,this.vid=c.getVid(),this._repPid=this.getRepId()}return e.prototype.getRepId=function(){return this.$state.params.repId},e=r([a.Injectable(),o(2,a.Inject("$state")),o(3,a.Inject("$translate")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&t||Object,"function"==typeof(i="undefined"!=typeof s.ServiceDetailsService&&s.ServiceDetailsService)&&i||Object,Object,Object])],e);var t,i}());t.ThumbnailListService=u,t.default=[]},968:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(190),l=i(2),c=i(1),u=(i(39),i(29),function(){function e(e,t,i,r){this.configurationUtil=e,this.serviceDetailsService=t,this.$state=i,this.$translate=r,this.vid=c.getVid(),this._repPid=this.getRepId()}return e.prototype.getRepId=function(){return this.$state.params.repId},e=r([a.Injectable(),o(2,a.Inject("$state")),o(3,a.Inject("$translate")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.ConfigurationUtil&&l.ConfigurationUtil)&&t||Object,"function"==typeof(i="undefined"!=typeof s.ServiceDetailsService&&s.ServiceDetailsService)&&i||Object,Object,Object])],e);var t,i}());t.HlsViewerService=u,t.default=[]},969:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,i){var r=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),o.getPlayers()[e])return t&&W.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&o.getPlayers()[e].ready(i),o.getPlayers()[e];r=v.getEl(e)}else r=e;if(!r||!r.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(r.player||R.default.players[r.playerId])return r.player||R.default.players[r.playerId];t=t||{},o.hooks("beforesetup").forEach(function(e){var i=e(r,(0,A.default)(t));return!(0,q.isObject)(i)||Array.isArray(i)?void W.default.error("please return an object in beforesetup hooks"):void(t=(0,A.default)(t,i))});var n=w.default.getComponent("Player"),a=new n(r,t,i);return o.hooks("setup").forEach(function(e){return e(a)}),a}var a,s;t.__esModule=!0;var l=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(940)),c=n(l),u=i(939),d=n(u),f=i(941),h=r(f),p=i(938),v=r(p),y=i(1007),g=r(y),m=i(971),b=r(m),_=i(936),w=n(_),T=i(953),S=n(T),E=i(945),k=r(E),O=i(972),R=n(O),C=i(1066),P=n(C),I=i(944),A=n(I),x=i(937),j=r(x),L=i(957),M=n(L),D=i(1067),F=n(D),N=i(1068),U=n(N),B=i(949),V=i(946),H=n(V),G=i(943),W=n(G),$=i(954),z=r($),q=i(942),K=i(961),X=n(K),Y=i(1069),J=n(Y),Q=i(976),Z=n(Q),ee=i(950),te=n(ee);if("undefined"==typeof HTMLVideoElement&&v.isReal()&&(d.default.createElement("video"),d.default.createElement("audio"),d.default.createElement("track")),o.hooks_={},o.hooks=function(e,t){return o.hooks_[e]=o.hooks_[e]||[],t&&(o.hooks_[e]=o.hooks_[e].concat(t)),o.hooks_[e]},o.hook=function(e,t){o.hooks(e,t)},o.removeHook=function(e,t){var i=o.hooks(e).indexOf(t);return!(i<=-1)&&(o.hooks_[e]=o.hooks_[e].slice(),o.hooks_[e].splice(i,1),!0)},c.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&v.isReal()){var ie=v.$(".vjs-styles-defaults");if(!ie){ie=b.createStyleElement("vjs-styles-defaults");var re=v.$("head");re&&re.insertBefore(ie,re.firstChild),b.setTextContent(ie,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}g.autoSetupTimeout(1,o),o.VERSION="5.20.5",o.options=R.default.prototype.options_,o.getPlayers=function(){return R.default.players},o.players=R.default.players,o.getComponent=w.default.getComponent,o.registerComponent=function(e,t){te.default.isTech(t)&&W.default.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),w.default.registerComponent.call(w.default,e,t)},o.getTech=te.default.getTech,o.registerTech=te.default.registerTech,o.browser=h,o.TOUCH_ENABLED=h.TOUCH_ENABLED,o.extend=J.default,o.mergeOptions=A.default,o.bind=j.bind,o.plugin=P.default,o.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),o.options.languages=(0,A.default)(o.options.languages,(i={},i[e]=t,i)),o.options.languages[e]},o.log=W.default,o.createTimeRange=o.createTimeRanges=B.createTimeRanges,o.formatTime=H.default,o.parseUrl=z.parseUrl,o.isCrossOrigin=z.isCrossOrigin,o.EventTarget=S.default,o.on=k.on,o.one=k.one,o.off=k.off,o.trigger=k.trigger,o.xhr=Z.default,o.TextTrack=M.default,o.AudioTrack=F.default,o.VideoTrack=U.default,o.isEl=v.isEl,o.isTextNode=v.isTextNode,o.createEl=v.createEl,o.hasClass=v.hasElClass,o.addClass=v.addElClass,o.removeClass=v.removeElClass,o.toggleClass=v.toggleElClass,o.setAttributes=v.setElAttributes,o.getAttributes=v.getElAttributes,o.emptyEl=v.emptyEl,o.appendContent=v.appendContent,o.insertContent=v.insertContent,o.computedStyle=X.default,a=[],s=function(){return o}.apply(t,a),!(void 0!==s&&(e.exports=s)),t.default=o},970:function(e,t){function i(e){return e.replace(/\n\r?\s*/g,"")}e.exports=function(e){for(var t="",r=0;r<arguments.length;r++)t+=i(e[r])+(arguments[r+1]||"");return t}},971:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.setTextContent=t.createStyleElement=void 0;var n=i(939),o=r(n);t.createStyleElement=function(e){var t=o.default.createElement("style");return t.className=e,t},t.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},972:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(939),d=n(u),f=i(940),h=n(f),p=i(945),v=r(p),y=i(938),g=r(y),m=i(937),b=r(m),_=i(947),w=r(_),T=i(941),S=r(T),E=i(943),k=n(E),O=i(948),R=n(O),C=i(949),P=i(973),I=i(971),A=r(I),x=i(1008),j=n(x),L=i(974),M=n(L),D=i(1009),F=n(D),N=i(942),U=i(944),B=n(U),V=i(1010),H=n(V),G=i(975),W=n(G),$=i(950),z=n($),q=i(978),K=n(q),X=i(977),Y=n(X);i(1023),i(1024),i(1026),i(1027),i(1028),i(1029),i(1030),i(1031),i(1063),i(1064),i(1065);var J=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],Q=function(e){function t(i,r,n){if(o(this,t),i.id=i.id||"vjs_video_"+w.newGUID(),r=(0,N.assign)(t.getTagSettings(i),r),r.initChildren=!1,r.createEl=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof i.closest){var s=i.closest("[lang]");s&&(r.language=s.getAttribute("lang"))}else for(var l=i;l&&1===l.nodeType;){if(g.getElAttributes(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}var c=a(this,e.call(this,null,r,n));if(!c.options_||!c.options_.techOrder||!c.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
if(c.tag=i,c.tagAttributes=i&&g.getElAttributes(i),c.language(c.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach(function(e){u[e.toLowerCase()]=r.languages[e]}),c.languages_=u}else c.languages_=t.prototype.options_.languages;c.cache_={},c.poster_=r.poster||"",c.controls_=!!r.controls,i.controls=!1,c.scrubbing_=!1,c.el_=c.createEl();var d=(0,B.default)(c.options_);if(r.plugins){var f=r.plugins;Object.getOwnPropertyNames(f).forEach(function(e){"function"==typeof this[e]?this[e](f[e]):k.default.error("Unable to find plugin:",e)},c)}c.options_.playerOptions=d,c.initChildren(),c.isAudio("audio"===i.nodeName.toLowerCase()),c.controls()?c.addClass("vjs-controls-enabled"):c.addClass("vjs-controls-disabled"),c.el_.setAttribute("role","region"),c.isAudio()?c.el_.setAttribute("aria-label","audio player"):c.el_.setAttribute("aria-label","video player"),c.isAudio()&&c.addClass("vjs-audio"),c.flexNotSupported_()&&c.addClass("vjs-no-flex"),S.IS_IOS||c.addClass("vjs-workinghover"),t.players[c.id_]=c;var h="5.20.5".split(".")[0];return c.addClass("vjs-v"+h),c.userActive(!0),c.reportUserActivity(),c.listenForUserActivity_(),c.on("fullscreenchange",c.handleFullscreenChange_),c.on("stageclick",c.handleStageClick_),c}return s(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.tag,i=void 0,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");i=r?this.el_=t.parentNode:this.el_=e.prototype.createEl.call(this,"div"),t.setAttribute("tabindex","-1"),t.removeAttribute("width"),t.removeAttribute("height");var n=g.getElAttributes(t);if(Object.getOwnPropertyNames(n).forEach(function(e){"class"===e?i.className+=" "+n[e]:i.setAttribute(e,n[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=i.player=this,this.addClass("vjs-paused"),h.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=A.createStyleElement("vjs-styles-dimensions");var o=g.$(".vjs-styles-defaults"),a=g.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),l=0;l<s.length;l++){var c=s.item(l);g.addElClass(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(i,t),g.insertElFirst(t,i),this.children_.unshift(t),this.el_=i,i},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)this[i]=void 0;else{var r=parseFloat(t);if(isNaN(r))return k.default.error('Improper value "'+t+'" supplied for for '+e),this;this[i]=r}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(h.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,i=this.tech_&&this.tech_.el();return void(i&&(e>=0&&(i.width=e),t>=0&&(i.height=t)))}var r=void 0,n=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),l=s[1]/s[0];r=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,n=void 0!==this.height_?this.height_:r*l,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),A.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+r+"px;\n        height: "+n+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(z.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var r=(0,N.assign)({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(r.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);var n=z.default.getTech(e);n||(n=c.default.getComponent(e)),this.tech_=new n(r),this.tech_.ready(b.bind(this,this.handleTechReady_),!0),H.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),J.forEach(function(e){i.on(i.tech_,e,i["handleTech"+(0,R.default)(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||g.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=H.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw h.default.alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,k.default)("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(k.default.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw(0,k.default)(e),e}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(0,k.default)("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?((0,k.default)("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):(0,k.default)(t),t}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(e){return void 0===e?void 0!==this.cache_.duration?this.cache_.duration:NaN:(e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function e(){var e=this.techGet_("buffered");return e&&e.length||(e=(0,C.createTimeRange)(0,0)),e},t.prototype.bufferedPercent=function(){return(0,P.bufferedPercent)(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=j.default;return this.isFullscreen(!0),e.requestFullscreen?(v.on(d.default,e.fullscreenchange,b.bind(this,function t(i){this.isFullscreen(d.default[e.fullscreenElement]),this.isFullscreen()===!1&&v.off(d.default,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=j.default;return this.isFullscreen(!1),e.requestFullscreen?d.default[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d.default.documentElement.style.overflow,v.on(d.default,"keydown",b.bind(this,this.fullWindowOnEscKey)),d.default.documentElement.style.overflow="hidden",g.addElClass(d.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,v.off(d.default,"keydown",this.fullWindowOnEscKey),d.default.documentElement.style.overflow=this.docOrigOverflow,g.removeElClass(d.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,i=0,r=this.options_.techOrder;i<r.length;i++){var n=(0,R.default)(r[i]),o=z.default.getTech(n);if(o||(o=c.default.getComponent(n)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else k.default.error('The "'+n+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this,i=this.options_.techOrder.map(R.default).map(function(e){return[e,z.default.getTech(e)||c.default.getComponent(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(k.default.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,i){var r=void 0;return e.some(function(e){return t.some(function(t){if(r=i(e,t))return!0})}),r},n=void 0,o=function(e){return function(t,i){return e(i,t)}},a=function(e,i){var r=e[0],n=e[1];if(n.canPlaySource(i,t.options_[r.toLowerCase()]))return{source:i,tech:r}};return n=this.options_.sourceOrder?r(e,i,o(a)):r(i,e,a),n||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=z.default.getTech(this.techName_);return t||(t=c.default.getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_((0,R.default)(this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},t.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new M.default(e),this.addClass("vjs-error"),k.default.error("(CODE:"+this.error_.code+" "+M.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.reportUserActivity=function(e){this.userActivity_=!0},t.prototype.userActive=function(e){return void 0!==e?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,i=void 0,r=b.bind(this,this.reportUserActivity),n=function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},a=function(t){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",n),this.on("mouseup",a),this.on("keydown",r),this.on("keyup",r);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new Y.default,this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new K.default,this.audioTracks_)},t.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},t.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track,i=void 0===t?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(i)},t.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=String(e).toLowerCase(),this)},t.prototype.languages=function(){return(0,B.default)(t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=(0,B.default)(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var r=t[i];r=(0,B.default)(r),r.player=void 0,e.tracks[i]=r}return e},t.prototype.createModal=function(e,t){var i=this;t=t||{},t.content=e||"";var r=new W.default(this,t);return this.addChild(r),r.on("dispose",function(){i.removeChild(r)}),r.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},i=g.getElAttributes(e),r=i["data-setup"];if(g.hasElClass(e,"vjs-fluid")&&(i.fluid=!0),null!==r){var n=(0,F.default)(r||"{}"),o=n[0],a=n[1];o&&k.default.error(o),(0,N.assign)(i,a)}if((0,N.assign)(t,i),e.hasChildNodes())for(var s=e.childNodes,l=0,c=s.length;l<c;l++){var u=s[l],d=u.nodeName.toLowerCase();"source"===d?t.sources.push(g.getElAttributes(u)):"track"===d&&t.tracks.push(g.getElAttributes(u))}return t},t.prototype.flexNotSupported_=function(){var e=d.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(c.default);Q.players={};var Z=h.default.navigator;Q.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Z&&(Z.languages&&Z.languages[0]||Z.userLanguage||Z.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Q.prototype[e]=function(){return this.techGet_(e)}}),J.forEach(function(e){Q.prototype["handleTech"+(0,R.default)(e)+"_"]=function(){return this.trigger(e)}}),c.default.registerComponent("Player",Q),t.default=Q},973:function(e,t,i){"use strict";function r(e,t){var i=0,r=void 0,o=void 0;if(!t)return 0;e&&e.length||(e=(0,n.createTimeRange)(0,0));for(var a=0;a<e.length;a++)r=e.start(a),o=e.end(a),o>t&&(o=t),i+=o-r;return i/t}t.__esModule=!0,t.bufferedPercent=r;var n=i(949)},974:function(e,t,i){"use strict";function r(e){return e instanceof r?e:("number"==typeof e?this.code=e:"string"==typeof e?this.message=e:(0,n.isObject)(e)&&("number"==typeof e.code&&(this.code=e.code),(0,n.assign)(this,e)),void(this.message||(this.message=r.defaultMessages[this.code]||"")))}t.__esModule=!0;var n=i(942);r.prototype.code=0,r.prototype.message="",r.prototype.status=null,r.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],r.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<r.errorTypes.length;o++)r[r.errorTypes[o]]=o,r.prototype[r.errorTypes[o]]=o;t.default=r},975:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(938),c=n(l),u=i(937),d=n(u),f=i(936),h=r(f),p="vjs-modal-dialog",v=27,y=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=c.createEl("div",{className:p+"-content"},{role:"document"}),n.descEl_=c.createEl("p",{className:p+"-description vjs-offscreen",id:n.el().getAttribute("aria-describedby")}),c.textContent(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return p+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===v&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function e(t){if("boolean"==typeof t){var e=this.closeable_=!!t,i=this.getChild("closeButton");if(e&&!i){var r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close)}!e&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,r=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),c.insertContent(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),c.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},t}(h.default);y.prototype.options_={pauseOnOpen:!0,temporary:!0},h.default.registerComponent("ModalDialog",y),t.default=y},976:function(e,t,i){"use strict";function r(e,t){for(var i=0;i<e.length;i++)t(e[i])}function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,i){var r=e;return d(t)?(i=t,"string"==typeof e&&(r={uri:e})):r=h(t,{uri:e}),r.callback=i,r}function a(e,t,i){return t=o(e,t,i),s(t)}function s(e){function t(){4===d.readyState&&o()}function i(){var e=void 0;if(e=d.response?d.response:d.responseText||l(d),w)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(v),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,u)}function o(){if(!p){var t;clearTimeout(v),t=e.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var r=u,n=null;return 0!==t?(r={body:i(),statusCode:t,method:g,headers:{},url:y,rawRequest:d},d.getAllResponseHeaders&&(r.headers=f(d.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),c(n,r,r.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var s=!1,c=function(t,i,r){s||(s=!0,e.callback(t,i,r))},u={body:void 0,headers:{},statusCode:0,method:g,url:y,rawRequest:d},d=e.xhr||null;d||(d=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var h,p,v,y=d.url=e.uri||e.url,g=d.method=e.method||"GET",m=e.body||e.data||null,b=d.headers=e.headers||{},_=!!e.sync,w=!1;
if("json"in e&&(w=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(e.json))),d.onreadystatechange=t,d.onload=o,d.onerror=r,d.onprogress=function(){},d.ontimeout=r,d.open(g,y,!_,e.username,e.password),_||(d.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(v=setTimeout(function(){p=!0,d.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)},e.timeout)),d.setRequestHeader)for(h in b)b.hasOwnProperty(h)&&d.setRequestHeader(h,b[h]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(d.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(d),d.send(m),d}function l(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function c(){}var u=i(940),d=i(1013),f=i(1014),h=i(1015);e.exports=a,a.XMLHttpRequest=u.XMLHttpRequest||c,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:u.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,i,r){return i=o(t,i,r),i.method=e.toUpperCase(),s(i)}})},977:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(960),c=n(l),u=i(941),d=r(u),f=i(939),h=n(f),p=function(e,t){for(var i=0;i<e.length;i++)t.id!==e[i].id&&(e[i].selected=!1)},v=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,l=n.length-1;l>=0;l--)if(n[l].selected){p(n,n[l]);break}if(d.IS_IE8){s=h.default.createElement("custom");for(var u in c.default.prototype)"constructor"!==u&&(s[u]=c.default.prototype[u]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=i=a(this,e.call(this,n,s)),s.changing_=!1,Object.defineProperty(s,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),r=s,a(i,r)}return s(t,e),t.prototype.addTrack_=function(t){var i=this;t.selected&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,p(i,t),i.changing_=!1,i.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(c.default);t.default=v},978:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(960),c=n(l),u=i(941),d=r(u),f=i(939),h=n(f),p=function(e,t){for(var i=0;i<e.length;i++)t.id!==e[i].id&&(e[i].enabled=!1)},v=function(e){function t(){var i,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,l=n.length-1;l>=0;l--)if(n[l].enabled){p(n,n[l]);break}if(d.IS_IE8){s=h.default.createElement("custom");for(var u in c.default.prototype)"constructor"!==u&&(s[u]=c.default.prototype[u]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=i=a(this,e.call(this,n,s)),s.changing_=!1,r=s,a(i,r)}return s(t,e),t.prototype.addTrack_=function(t){var i=this;t.enabled&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,p(i,t),i.changing_=!1,i.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(c.default);t.default=v},979:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(942),h=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on("focus",n.handleFocus),n.on("blur",n.handleBlur),n.on("click",n.handleClick),n.on(i,"controlsvisible",n.update),n.on(i,n.playerEvent,n.update),n}return s(t,e),t.prototype.createEl=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.className=i.className+" vjs-slider",i=(0,f.assign)({tabIndex:0},i),r=(0,f.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,i,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),d.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;d.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||e<0||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=i:t.el().style.width=i}}},t.prototype.calculateDistance=function(e){var t=d.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},t}(c.default);c.default.registerComponent("Slider",h),t.default=h},980:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(979),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f);i(1046);var p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"volumechange",n.updateARIAAttributes),i.ready(h.bind(n,n.updateARIAAttributes)),n}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t}(c.default);p.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",d.default.registerComponent("VolumeBar",p),t.default=p},981:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(952),c=n(l),u=i(936),d=n(u),f=i(938),h=r(f),p=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.on(i,"volumechange",n.update),i.tech_&&i.tech_.featuresVolumeControl===!1&&n.addClass("vjs-hidden"),n.on(i,"loadstart",function(){this.update(),i.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),n}return s(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){var t=this.player_.volume(),i=3;this.player_.muted()?i=0:t<.33?i=1:t<.67&&(i=2);var r=this.player_.muted()?"Unmute":"Mute";this.controlText()!==r&&this.controlText(r);for(var n=0;n<4;n++)h.removeElClass(this.el_,"vjs-vol-"+n);h.addElClass(this.el_,"vjs-vol-"+i)},t}(c.default);p.prototype.controlText_="Mute",d.default.registerComponent("MuteToggle",p),t.default=p},982:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(983),c=n(l),u=i(936),d=n(u),f=i(937),h=r(f),p=function(e){function t(i,r){o(this,t);var n=r.tracks,s=a(this,e.call(this,i,r));if(s.items.length<=1&&s.hide(),!n)return a(s);var l=h.bind(s,s.update);return n.addEventListener("removetrack",l),n.addEventListener("addtrack",l),s.player_.on("dispose",function(){n.removeEventListener("removetrack",l),n.removeEventListener("addtrack",l)}),s}return s(t,e),t}(c.default);d.default.registerComponent("TrackButton",p),t.default=p},983:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(951),c=n(l),u=i(936),d=n(u),f=i(984),h=n(f),p=i(938),v=r(p),y=i(937),g=r(y),m=i(948),b=n(m),_=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=a(this,e.call(this,i,r));return n.update(),n.enabled_=!0,n.el_.setAttribute("aria-haspopup","true"),n.el_.setAttribute("role","menuitem"),n.on("keydown",n.handleSubmenuKeyPress),n}return s(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new h.default(this.player_);if(this.hideThreshold_=0,this.options_.title){var t=v.createEl("li",{className:"vjs-menu-title",innerHTML:(0,b.default)(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),v.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",g.bind(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(c.default);d.default.registerComponent("MenuButton",_),t.default=_},984:function(e,t,i){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=i(936),c=n(l),u=i(938),d=r(u),f=i(937),h=r(f),p=i(945),v=r(p),y=function(e){function t(i,r){o(this,t);var n=a(this,e.call(this,i,r));return n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(e){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.setAttribute("role","presentation"),i.appendChild(this.contentEl_),v.on(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice(),i=t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className);i&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(c.default);c.default.registerComponent("Menu",y),t.default=y},992:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(30),l=i(43),c=function(){function e(e,t,i){this.restBaseURLs=e,this.$http=t,this.alertService=i,this._reqAlert=this.alertService.create(s.ALERT_MSG_TYPE.REQUEST)}return Object.defineProperty(e.prototype,"services",{get:function(){return this._services},set:function(e){this._services=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this._reqAlert},enumerable:!0,configurable:!0}),e.prototype.setMessages=function(e){this._reqAlert.show(e)},e.prototype.getHtml=function(e,t){var i="";return!e&&t?i='<span class="bar-text margin-right-small" translate="'+t+'"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>':t&&(i='<span class="bar-text margin-right-small" translate="'+t+'"></span>'),i},e=r([a.Injectable(),o(0,a.Inject("restBaseURLs")),o(1,a.Inject("$http")),n("design:paramtypes",[Object,Object,"function"==typeof(t="undefined"!=typeof s.AlertFactory&&s.AlertFactory)&&t||Object])],e);var t}();t.AlmaHowToGetitService=c,t.default=[l.default.name]},993:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=function(){function e(){this.indexAlma=-1}return e.prototype.setIndex=function(e){this.indexAlma===-1&&(this.indexAlma=e)},e.prototype.getIndex=function(){return this.indexAlma},e.prototype.resetIndex=function(){this.indexAlma=-1},e=r([o.Injectable(),n("design:paramtypes",[])],e)}();t.LoginAlmaMashupService=a,t.default=[]},994:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(995),a=i(965),s=i(190),l=i(421),c=i(996),u=i(998),d=i(1e3);i(1001),i(1003),i(1004);var f=function(){function e(){}return e=r([n.NgModule({declarations:[a.PrmRepresentationViewer,o.PrmCopyrights,d.PrmSocialMenu],providers:[s.ServiceDetailsService,l.RepresentationViewerService],imports:[c.ThumbnailListModule,u.HlsViewerModule,"720kb.socialshare","pdfjsViewer","vjs.video"]})],e)}();t.RepresentationViewerModule=f},995:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),a=i(421),s=(i(92),i(5),function(){function e(e){this.representationViewerService=e}return e.prototype.hideCopyrights=function(){for(var e=(document.getElementsByTagName("prm-copyrights"),document.getElementsByClassName("main-file")),t=document.getElementsByClassName("main-page"),i=document.getElementsByClassName("thumbnail-list"),r=document.getElementById("downloadButton"),n=document.getElementsByClassName("active-button"),o=document.getElementsByClassName("inactive-button"),a=0;a<n.length;a++)n[a].style.display="none",o[a].style.display="block","ic_image_mobile_active_24px"===n[a].getAttribute("icon-definition")&&(n[a].style.display="block"),"ic_image_mobile_24px"===o[a].getAttribute("icon-definition")&&(o[a].style.display="none");if(null!=r&&(r.style.display="block"),this.representationViewerService.setShowCopyrights(!1),this.isScreenSizeXs){var s=document.getElementById("main-file-button");s.focus()}else this.representationViewerService.setShowThumbnailList(!0);this.representationViewerService.setShowMainFile(!0),t.length>0&&(t[0].classList.add("showIfXs"),t[0].classList.remove("hide")),this.embed&&(e[0].style.height="calc(100vh - 18px)",i.length>0&&(i[0].style.height="calc(100vh - 18px)"));try{self.PDFViewerApplication&&(self.PDFViewerApplication.pdfViewer.eventBus.dispatch("resize",{source:window}),self.PDFViewerApplication.pdfViewer.eventBus.dispatch("resize",{source:window}))}catch(e){console.log("failed to run pdfViewer resize event")}},Object.defineProperty(e.prototype,"copyrightsFlexSize",{get:function(){var e=70;return this.embed&&(e+=30),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isScreenSizeXs",{get:function(){return window.innerWidth<600},enumerable:!0,configurable:!0}),e=r([o.Component({inputs:["copyrightsfilecontent","embed"],selector:"prm-copyrights",templateUrl:"components/delivery/copyrights/copyrights.html"}),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.RepresentationViewerService&&a.RepresentationViewerService)&&t||Object])],e);var t}());t.PrmCopyrights=s},996:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(997),a=i(967),s=function(){function e(){}return e=r([n.NgModule({declarations:[o.PrmThumbnailList],providers:[a.ThumbnailListService],imports:[]})],e)}();t.ThumbnailListModule=s},997:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(967),l=i(79),c=i(153),u=i(421),d=(i(92),i(5),function(){function e(e,t,i,r,n,o,a){this.thumbnailListService=e,this.representationViewerService=t,this.$scope=i,this.accountIcons=r,this.$timeout=n,this.filterInstitution=o,this.filterLanguage=a,this._files=[],this._index=[],this._delay=[],this._mainFileStyle="display: block"}return e.prototype.ngOnInit=function(){document.getElementsByClassName("main-file"),document.getElementsByClassName("thumbnail-list")},e.prototype.fileClick=function(e){var t=this;this._index[0].index=e.$index,history.pushState("",document.title,window.location.pathname+window.location.search),this._delay[0].delay=!1,this.$timeout(function(){t._delay[0].delay=!0},100);for(var i=document.getElementById("listItem").querySelectorAll(".selected-object"),r=0,n=i.length;r<n;r++)i[r].classList.remove("selected-object");var o=document.getElementById("thumbnail-"+e.$index);if(o.classList.add("selected-object"),this.isScreenSizeXs){this.representationViewerService.showMainFile();var a=document.getElementById("main-file-button");a.focus()}this.viewAnalitics()},Object.defineProperty(e.prototype,"isScreenSizeXs",{get:function(){return window.innerWidth<600},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this._files},set:function(e){this._files=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index[0]},set:function(e){this._index=[],this._index.push(e,0)},enumerable:!0,configurable:!0}),e.prototype.hasFulltext=function(e){var t=e.file.fulltext;return null!=t&&void 0!=t&&null!=t.url},e.prototype.viewAnalitics=function(){this.representationViewerService.updateStatistics(this.files[this.index.index].fileId,"VIEW")},Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay[0]},set:function(e){this._delay=[],this._delay.push(e,0)},enumerable:!0,configurable:!0}),e.prototype.collapse=function(){var e=document.getElementById("thumbnail-list"),t=document.getElementById("main-file"),i=document.getElementById("collapseButton"),r=document.getElementById("collapseTitle"),n=document.getElementById("collapseDiv"),o=document.getElementById("listItem");e.classList.contains("listClosed")?(e.style.maxWidth="15%",t.style.maxWidth="65%",i.classList.add("collapse-button-opened"),i.classList.remove("collapse-button-close"),r.classList.add("collapse-title-opened"),r.classList.remove("collapse-title-close"),e.classList.remove("listClosed"),o.style.display="block",n.innerHTML="",n.appendChild(r),n.appendChild(i)):(e.classList.add("listClosed"),i.classList.remove("collapse-button-opened"),i.classList.add("collapse-button-close"),r.classList.remove("collapse-title-opened"),r.classList.add("collapse-title-close"),e.style.maxWidth="5%",t.style.maxWidth="80%",o.style.display="none",n.innerHTML="",n.appendChild(i),n.appendChild(r))},e=r([a.Component({inputs:["files","index","delay"],selector:"prm-thumbnail-list",templateUrl:"components/delivery/thumbnailList/thumbnailList.html"}),o(2,a.Inject("$scope")),o(3,a.Inject("accountIcons")),o(4,a.Inject("$timeout")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.ThumbnailListService&&s.ThumbnailListService)&&t||Object,"function"==typeof(i="undefined"!=typeof u.RepresentationViewerService&&u.RepresentationViewerService)&&i||Object,Object,Object,Object,"function"==typeof(d="undefined"!=typeof l.FilterInstitution&&l.FilterInstitution)&&d||Object,"function"==typeof(f="undefined"!=typeof c.FilterLanguage&&c.FilterLanguage)&&f||Object])],e);var t,i,d,f}());t.PrmThumbnailList=d},998:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(999),a=i(968),s=function(){function e(){}return e=r([n.NgModule({declarations:[o.PrmHlsViewer],providers:[a.HlsViewerService],imports:[]})],e)}();t.HlsViewerModule=s},999:function(e,t,i){"use strict";var r=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(968),l=(i(92),i(5),function(){function e(e,t,i){this.hlsViewerService=e,this.$scope=t,this.accountIcons=i,this._thumbnail="",this._streamingSrc="",this._fallbacks="",
this._height="",this._width=""}return e.prototype.ngOnInit=function(){var e={xhrSetup:function(e,t){e.withCredentials=!0}},t=i(966),r=document.getElementsByClassName("video-to-play")[0];r.setAttribute("controls","controls"),r.setAttribute("height",this.height),r.setAttribute("width",this.width);var n=r.canPlayType("application/vnd.apple.mpegURL");if(""===n&&t.isSupported()){var o=new t(e);o.loadSource(this.streamingSrc),o.attachMedia(r)}else{var a=createSourceElement(this.streamingSrc);r.appendChild(a),Array.isArray(this.fallbacks)&&this.fallbacks.forEach(function(e){var t=createSourceElement(e);r.appendChild(t)})}},Object.defineProperty(e.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"streamingSrc",{get:function(){return this._streamingSrc},set:function(e){this._streamingSrc=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fallbacks",{get:function(){return this._fallbacks},set:function(e){this._fallbacks=e},enumerable:!0,configurable:!0}),e=r([a.Component({inputs:["thumbnail","streamingSrc","fallbacks","height","width"],selector:"hls-video",templateUrl:"components/delivery/hlsViewer/hlsViewer.html"}),o(1,a.Inject("$scope")),o(2,a.Inject("accountIcons")),n("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.HlsViewerService&&s.HlsViewerService)&&t||Object,Object,Object])],e);var t}());t.PrmHlsViewer=l}});
//# sourceMappingURL=fullView_chunk.js.map
